var bQ=Object.defineProperty;var _Q=(i,e,t)=>e in i?bQ(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var SM=(i,e,t)=>_Q(i,typeof e!="symbol"?e+"":e,t);function bF(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function jx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var TM={exports:{}},Sv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function wQ(){if(qD)return Sv;qD=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:a,ref:r!==void 0?r:null,props:s}}return Sv.Fragment=e,Sv.jsx=t,Sv.jsxs=t,Sv}var WD;function SQ(){return WD||(WD=1,TM.exports=wQ()),TM.exports}var Hi=SQ(),MM={exports:{}},pi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD;function TQ(){if(jD)return pi;jD=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function d(ne){return ne===null||typeof ne!="object"?null:(ne=h&&ne[h]||ne["@@iterator"],typeof ne=="function"?ne:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function S(ne,he,Te){this.props=ne,this.context=he,this.refs=_,this.updater=Te||A}S.prototype.isReactComponent={},S.prototype.setState=function(ne,he){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,he,"setState")},S.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function w(){}w.prototype=S.prototype;function C(ne,he,Te){this.props=ne,this.context=he,this.refs=_,this.updater=Te||A}var P=C.prototype=new w;P.constructor=C,x(P,S.prototype),P.isPureReactComponent=!0;var L=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function k(ne,he,Te,Pe,_e,Ie){return Te=Ie.ref,{$$typeof:i,type:ne,key:he,ref:Te!==void 0?Te:null,props:Ie}}function U(ne,he){return k(ne.type,he,void 0,void 0,void 0,ne.props)}function F(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===i}function z(ne){var he={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Te){return he[Te]})}var V=/\/+/g;function W(ne,he){return typeof ne=="object"&&ne!==null&&ne.key!=null?z(""+ne.key):he.toString(36)}function X(){}function J(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(X,X):(ne.status="pending",ne.then(function(he){ne.status==="pending"&&(ne.status="fulfilled",ne.value=he)},function(he){ne.status==="pending"&&(ne.status="rejected",ne.reason=he)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function K(ne,he,Te,Pe,_e){var Ie=typeof ne;(Ie==="undefined"||Ie==="boolean")&&(ne=null);var Ve=!1;if(ne===null)Ve=!0;else switch(Ie){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(ne.$$typeof){case i:case e:Ve=!0;break;case u:return Ve=ne._init,K(Ve(ne._payload),he,Te,Pe,_e)}}if(Ve)return _e=_e(ne),Ve=Pe===""?"."+W(ne,0):Pe,L(_e)?(Te="",Ve!=null&&(Te=Ve.replace(V,"$&/")+"/"),K(_e,he,Te,"",function(vt){return vt})):_e!=null&&(F(_e)&&(_e=U(_e,Te+(_e.key==null||ne&&ne.key===_e.key?"":(""+_e.key).replace(V,"$&/")+"/")+Ve)),he.push(_e)),1;Ve=0;var $e=Pe===""?".":Pe+":";if(L(ne))for(var Je=0;Je<ne.length;Je++)Pe=ne[Je],Ie=$e+W(Pe,Je),Ve+=K(Pe,he,Te,Ie,_e);else if(Je=d(ne),typeof Je=="function")for(ne=Je.call(ne),Je=0;!(Pe=ne.next()).done;)Pe=Pe.value,Ie=$e+W(Pe,Je++),Ve+=K(Pe,he,Te,Ie,_e);else if(Ie==="object"){if(typeof ne.then=="function")return K(J(ne),he,Te,Pe,_e);throw he=String(ne),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function Y(ne,he,Te){if(ne==null)return ne;var Pe=[],_e=0;return K(ne,Pe,"","",function(Ie){return he.call(Te,Ie,_e++)}),Pe}function ee(ne){if(ne._status===-1){var he=ne._result;he=he(),he.then(function(Te){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Te)},function(Te){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Te)}),ne._status===-1&&(ne._status=0,ne._result=he)}if(ne._status===1)return ne._result.default;throw ne._result}var se=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)};function fe(){}return pi.Children={map:Y,forEach:function(ne,he,Te){Y(ne,function(){he.apply(this,arguments)},Te)},count:function(ne){var he=0;return Y(ne,function(){he++}),he},toArray:function(ne){return Y(ne,function(he){return he})||[]},only:function(ne){if(!F(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},pi.Component=S,pi.Fragment=t,pi.Profiler=r,pi.PureComponent=C,pi.StrictMode=n,pi.Suspense=l,pi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,pi.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return D.H.useMemoCache(ne)}},pi.cache=function(ne){return function(){return ne.apply(null,arguments)}},pi.cloneElement=function(ne,he,Te){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var Pe=x({},ne.props),_e=ne.key,Ie=void 0;if(he!=null)for(Ve in he.ref!==void 0&&(Ie=void 0),he.key!==void 0&&(_e=""+he.key),he)!B.call(he,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&he.ref===void 0||(Pe[Ve]=he[Ve]);var Ve=arguments.length-2;if(Ve===1)Pe.children=Te;else if(1<Ve){for(var $e=Array(Ve),Je=0;Je<Ve;Je++)$e[Je]=arguments[Je+2];Pe.children=$e}return k(ne.type,_e,void 0,void 0,Ie,Pe)},pi.createContext=function(ne){return ne={$$typeof:a,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:s,_context:ne},ne},pi.createElement=function(ne,he,Te){var Pe,_e={},Ie=null;if(he!=null)for(Pe in he.key!==void 0&&(Ie=""+he.key),he)B.call(he,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(_e[Pe]=he[Pe]);var Ve=arguments.length-2;if(Ve===1)_e.children=Te;else if(1<Ve){for(var $e=Array(Ve),Je=0;Je<Ve;Je++)$e[Je]=arguments[Je+2];_e.children=$e}if(ne&&ne.defaultProps)for(Pe in Ve=ne.defaultProps,Ve)_e[Pe]===void 0&&(_e[Pe]=Ve[Pe]);return k(ne,Ie,void 0,void 0,null,_e)},pi.createRef=function(){return{current:null}},pi.forwardRef=function(ne){return{$$typeof:o,render:ne}},pi.isValidElement=F,pi.lazy=function(ne){return{$$typeof:u,_payload:{_status:-1,_result:ne},_init:ee}},pi.memo=function(ne,he){return{$$typeof:c,type:ne,compare:he===void 0?null:he}},pi.startTransition=function(ne){var he=D.T,Te={};D.T=Te;try{var Pe=ne(),_e=D.S;_e!==null&&_e(Te,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(fe,se)}catch(Ie){se(Ie)}finally{D.T=he}},pi.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},pi.use=function(ne){return D.H.use(ne)},pi.useActionState=function(ne,he,Te){return D.H.useActionState(ne,he,Te)},pi.useCallback=function(ne,he){return D.H.useCallback(ne,he)},pi.useContext=function(ne){return D.H.useContext(ne)},pi.useDebugValue=function(){},pi.useDeferredValue=function(ne,he){return D.H.useDeferredValue(ne,he)},pi.useEffect=function(ne,he,Te){var Pe=D.H;if(typeof Te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Pe.useEffect(ne,he)},pi.useId=function(){return D.H.useId()},pi.useImperativeHandle=function(ne,he,Te){return D.H.useImperativeHandle(ne,he,Te)},pi.useInsertionEffect=function(ne,he){return D.H.useInsertionEffect(ne,he)},pi.useLayoutEffect=function(ne,he){return D.H.useLayoutEffect(ne,he)},pi.useMemo=function(ne,he){return D.H.useMemo(ne,he)},pi.useOptimistic=function(ne,he){return D.H.useOptimistic(ne,he)},pi.useReducer=function(ne,he,Te){return D.H.useReducer(ne,he,Te)},pi.useRef=function(ne){return D.H.useRef(ne)},pi.useState=function(ne){return D.H.useState(ne)},pi.useSyncExternalStore=function(ne,he,Te){return D.H.useSyncExternalStore(ne,he,Te)},pi.useTransition=function(){return D.H.useTransition()},pi.version="19.1.0",pi}var XD;function RS(){return XD||(XD=1,MM.exports=TQ()),MM.exports}var ye=RS();const xa=jx(ye),$5=bF({__proto__:null,default:xa},[ye]);var EM={exports:{}},Tv={},CM={exports:{}},RM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YD;function MQ(){return YD||(YD=1,function(i){function e(Y,ee){var se=Y.length;Y.push(ee);e:for(;0<se;){var fe=se-1>>>1,ne=Y[fe];if(0<r(ne,ee))Y[fe]=ee,Y[se]=ne,se=fe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ee=Y[0],se=Y.pop();if(se!==ee){Y[0]=se;e:for(var fe=0,ne=Y.length,he=ne>>>1;fe<he;){var Te=2*(fe+1)-1,Pe=Y[Te],_e=Te+1,Ie=Y[_e];if(0>r(Pe,se))_e<ne&&0>r(Ie,Pe)?(Y[fe]=Ie,Y[_e]=se,fe=_e):(Y[fe]=Pe,Y[Te]=se,fe=Te);else if(_e<ne&&0>r(Ie,se))Y[fe]=Ie,Y[_e]=se,fe=_e;else break e}}return ee}function r(Y,ee){var se=Y.sortIndex-ee.sortIndex;return se!==0?se:Y.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,d=3,A=!1,x=!1,_=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function L(Y){for(var ee=t(c);ee!==null;){if(ee.callback===null)n(c);else if(ee.startTime<=Y)n(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(c)}}function D(Y){if(_=!1,L(Y),!x)if(t(l)!==null)x=!0,B||(B=!0,W());else{var ee=t(c);ee!==null&&K(D,ee.startTime-Y)}}var B=!1,k=-1,U=5,F=-1;function z(){return S?!0:!(i.unstable_now()-F<U)}function V(){if(S=!1,B){var Y=i.unstable_now();F=Y;var ee=!0;try{e:{x=!1,_&&(_=!1,C(k),k=-1),A=!0;var se=d;try{t:{for(L(Y),h=t(l);h!==null&&!(h.expirationTime>Y&&z());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,d=h.priorityLevel;var ne=fe(h.expirationTime<=Y);if(Y=i.unstable_now(),typeof ne=="function"){h.callback=ne,L(Y),ee=!0;break t}h===t(l)&&n(l),L(Y)}else n(l);h=t(l)}if(h!==null)ee=!0;else{var he=t(c);he!==null&&K(D,he.startTime-Y),ee=!1}}break e}finally{h=null,d=se,A=!1}ee=void 0}}finally{ee?W():B=!1}}}var W;if(typeof P=="function")W=function(){P(V)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,J=X.port2;X.port1.onmessage=V,W=function(){J.postMessage(null)}}else W=function(){w(V,0)};function K(Y,ee){k=w(function(){Y(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var ee=3;break;default:ee=d}var se=d;d=ee;try{return Y()}finally{d=se}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(Y,ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=d;d=Y;try{return ee()}finally{d=se}},i.unstable_scheduleCallback=function(Y,ee,se){var fe=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,Y){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=se+ne,Y={id:u++,callback:ee,priorityLevel:Y,startTime:se,expirationTime:ne,sortIndex:-1},se>fe?(Y.sortIndex=se,e(c,Y),t(l)===null&&Y===t(c)&&(_?(C(k),k=-1):_=!0,K(D,se-fe))):(Y.sortIndex=ne,e(l,Y),x||A||(x=!0,B||(B=!0,W()))),Y},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(Y){var ee=d;return function(){var se=d;d=ee;try{return Y.apply(this,arguments)}finally{d=se}}}}(RM)),RM}var $D;function EQ(){return $D||($D=1,CM.exports=MQ()),CM.exports}var PM={exports:{}},Ca={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD;function CQ(){if(QD)return Ca;QD=1;var i=RS();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,c,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:c,implementation:u}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ca.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ca.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},Ca.flushSync=function(l){var c=a.T,u=n.p;try{if(a.T=null,n.p=2,l)return l()}finally{a.T=c,n.p=u,n.d.f()}},Ca.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},Ca.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Ca.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,h=o(u,c.crossOrigin),d=typeof c.integrity=="string"?c.integrity:void 0,A=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:d,fetchPriority:A}):u==="script"&&n.d.X(l,{crossOrigin:h,integrity:d,fetchPriority:A,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ca.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},Ca.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,h=o(u,c.crossOrigin);n.d.L(l,u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ca.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},Ca.requestFormReset=function(l){n.d.r(l)},Ca.unstable_batchedUpdates=function(l,c){return l(c)},Ca.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},Ca.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ca.version="19.1.0",Ca}var ZD;function _F(){if(ZD)return PM.exports;ZD=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),PM.exports=CQ(),PM.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function RQ(){if(KD)return Tv;KD=1;var i=EQ(),e=RS(),t=_F();function n(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function a(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function o(f){if(s(f)!==f)throw Error(n(188))}function l(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(n(188));return p!==f?null:f}for(var b=f,E=p;;){var I=b.return;if(I===null)break;var H=I.alternate;if(H===null){if(E=I.return,E!==null){b=E;continue}break}if(I.child===H.child){for(H=I.child;H;){if(H===b)return o(I),f;if(H===E)return o(I),p;H=H.sibling}throw Error(n(188))}if(b.return!==E.return)b=I,E=H;else{for(var te=!1,ce=I.child;ce;){if(ce===b){te=!0,b=I,E=H;break}if(ce===E){te=!0,E=I,b=H;break}ce=ce.sibling}if(!te){for(ce=H.child;ce;){if(ce===b){te=!0,b=H,E=I;break}if(ce===E){te=!0,E=H,b=I;break}ce=ce.sibling}if(!te)throw Error(n(189))}}if(b.alternate!==E)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?f:p}function c(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=c(f),p!==null)return p;f=f.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),P=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function W(f){return f===null||typeof f!="object"?null:(f=V&&f[V]||f["@@iterator"],typeof f=="function"?f:null)}var X=Symbol.for("react.client.reference");function J(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===X?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case x:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList";case F:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case A:return"Portal";case P:return(f.displayName||"Context")+".Provider";case C:return(f._context.displayName||"Context")+".Consumer";case L:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case k:return p=f.displayName||null,p!==null?p:J(f.type)||"Memo";case U:p=f._payload,f=f._init;try{return J(f(p))}catch{}}return null}var K=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},fe=[],ne=-1;function he(f){return{current:f}}function Te(f){0>ne||(f.current=fe[ne],fe[ne]=null,ne--)}function Pe(f,p){ne++,fe[ne]=f.current,f.current=p}var _e=he(null),Ie=he(null),Ve=he(null),$e=he(null);function Je(f,p){switch(Pe(Ve,p),Pe(Ie,f),Pe(_e,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?vD(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=vD(p),f=yD(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}Te(_e),Pe(_e,f)}function vt(){Te(_e),Te(Ie),Te(Ve)}function pt(f){f.memoizedState!==null&&Pe($e,f);var p=_e.current,b=yD(p,f.type);p!==b&&(Pe(Ie,f),Pe(_e,b))}function Vt(f){Ie.current===f&&(Te(_e),Te(Ie)),$e.current===f&&(Te($e),yv._currentValue=se)}var fn=Object.prototype.hasOwnProperty,jt=i.unstable_scheduleCallback,de=i.unstable_cancelCallback,Dt=i.unstable_shouldYield,gt=i.unstable_requestPaint,Ct=i.unstable_now,at=i.unstable_getCurrentPriorityLevel,Yt=i.unstable_ImmediatePriority,Rt=i.unstable_UserBlockingPriority,kt=i.unstable_NormalPriority,an=i.unstable_LowPriority,be=i.unstable_IdlePriority,oe=i.log,He=i.unstable_setDisableYieldValue,tt=null,ct=null;function et(f){if(typeof oe=="function"&&He(f),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(tt,f)}catch{}}var Xt=Math.clz32?Math.clz32:dn,Gt=Math.log,ln=Math.LN2;function dn(f){return f>>>=0,f===0?32:31-(Gt(f)/ln|0)|0}var _t=256,Zt=4194304;function yn(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function mn(f,p,b){var E=f.pendingLanes;if(E===0)return 0;var I=0,H=f.suspendedLanes,te=f.pingedLanes;f=f.warmLanes;var ce=E&134217727;return ce!==0?(E=ce&~H,E!==0?I=yn(E):(te&=ce,te!==0?I=yn(te):b||(b=ce&~f,b!==0&&(I=yn(b))))):(ce=E&~H,ce!==0?I=yn(ce):te!==0?I=yn(te):b||(b=E&~f,b!==0&&(I=yn(b)))),I===0?0:p!==0&&p!==I&&(p&H)===0&&(H=I&-I,b=p&-p,H>=b||H===32&&(b&4194048)!==0)?p:I}function zt(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function zn(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ae(){var f=_t;return _t<<=1,(_t&4194048)===0&&(_t=256),f}function Ht(){var f=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),f}function Mt(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function en(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Ot(f,p,b,E,I,H){var te=f.pendingLanes;f.pendingLanes=b,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=b,f.entangledLanes&=b,f.errorRecoveryDisabledLanes&=b,f.shellSuspendCounter=0;var ce=f.entanglements,we=f.expirationTimes,Xe=f.hiddenUpdates;for(b=te&~b;0<b;){var ut=31-Xt(b),xt=1<<ut;ce[ut]=0,we[ut]=-1;var Ze=Xe[ut];if(Ze!==null)for(Xe[ut]=null,ut=0;ut<Ze.length;ut++){var Ke=Ze[ut];Ke!==null&&(Ke.lane&=-536870913)}b&=~xt}E!==0&&ht(f,E,0),H!==0&&I===0&&f.tag!==0&&(f.suspendedLanes|=H&~(te&~p))}function ht(f,p,b){f.pendingLanes|=p,f.suspendedLanes&=~p;var E=31-Xt(p);f.entangledLanes|=p,f.entanglements[E]=f.entanglements[E]|1073741824|b&4194090}function tn(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var E=31-Xt(b),I=1<<E;I&p|f[E]&p&&(f[E]|=p),b&=~I}}function Ln(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Ei(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function fi(){var f=ee.p;return f!==0?f:(f=window.event,f===void 0?32:FD(f.type))}function Or(f,p){var b=ee.p;try{return ee.p=f,p()}finally{ee.p=b}}var Gi=Math.random().toString(36).slice(2),qe="__reactFiber$"+Gi,st="__reactProps$"+Gi,St="__reactContainer$"+Gi,ft="__reactEvents$"+Gi,m="__reactListeners$"+Gi,ie="__reactHandles$"+Gi,xn="__reactResources$"+Gi,Gn="__reactMarker$"+Gi;function mi(f){delete f[qe],delete f[st],delete f[ft],delete f[m],delete f[ie]}function wn(f){var p=f[qe];if(p)return p;for(var b=f.parentNode;b;){if(p=b[St]||b[qe]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(f=wD(f);f!==null;){if(b=f[qe])return b;f=wD(f)}return p}f=b,b=f.parentNode}return null}function Zn(f){if(f=f[qe]||f[St]){var p=f.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return f}return null}function Rs(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(n(33))}function ni(f){var p=f[xn];return p||(p=f[xn]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function hn(f){f[Gn]=!0}var Ps=new Set,Ql={};function hs(f,p){ue(f,p),ue(f+"Capture",p)}function ue(f,p){for(Ql[f]=p,f=0;f<p.length;f++)Ps.add(p[f])}var Oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},Ye={};function Ue(f){return fn.call(Ye,f)?!0:fn.call(Qe,f)?!1:Oe.test(f)?Ye[f]=!0:(Qe[f]=!0,!1)}function It(f,p,b){if(Ue(p))if(b===null)f.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+b)}}function Ut(f,p,b){if(b===null)f.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+b)}}function dt(f,p,b,E){if(E===null)f.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(b);return}f.setAttributeNS(p,b,""+E)}}var ae,Lt;function Nn(f){if(ae===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ae=p&&p[1]||"",Lt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+f+Lt}var bn=!1;function di(f,p){if(!f||bn)return"";bn=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(Ke){var Ze=Ke}Reflect.construct(f,[],xt)}else{try{xt.call()}catch(Ke){Ze=Ke}f.call(xt.prototype)}}else{try{throw Error()}catch(Ke){Ze=Ke}(xt=f())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(Ke){if(Ke&&Ze&&typeof Ke.stack=="string")return[Ke.stack,Ze.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=E.DetermineComponentFrameRoot(),te=H[0],ce=H[1];if(te&&ce){var we=te.split(`
`),Xe=ce.split(`
`);for(I=E=0;E<we.length&&!we[E].includes("DetermineComponentFrameRoot");)E++;for(;I<Xe.length&&!Xe[I].includes("DetermineComponentFrameRoot");)I++;if(E===we.length||I===Xe.length)for(E=we.length-1,I=Xe.length-1;1<=E&&0<=I&&we[E]!==Xe[I];)I--;for(;1<=E&&0<=I;E--,I--)if(we[E]!==Xe[I]){if(E!==1||I!==1)do if(E--,I--,0>I||we[E]!==Xe[I]){var ut=`
`+we[E].replace(" at new "," at ");return f.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",f.displayName)),ut}while(1<=E&&0<=I);break}}}finally{bn=!1,Error.prepareStackTrace=b}return(b=f?f.displayName||f.name:"")?Nn(b):""}function Ii(f){switch(f.tag){case 26:case 27:case 5:return Nn(f.type);case 16:return Nn("Lazy");case 13:return Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 15:return di(f.type,!1);case 11:return di(f.type.render,!1);case 1:return di(f.type,!0);case 31:return Nn("Activity");default:return""}}function cr(f){try{var p="";do p+=Ii(f),f=f.return;while(f);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function re(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function wi(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Dn(f){var p=wi(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),E=""+f[p];if(!f.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var I=b.get,H=b.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return I.call(this)},set:function(te){E=""+te,H.call(this,te)}}),Object.defineProperty(f,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(te){E=""+te},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function Ir(f){f._valueTracker||(f._valueTracker=Dn(f))}function Pi(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return f&&(E=wi(f)?f.checked?"true":"false":f.value),f=E,f!==b?(p.setValue(f),!0):!1}function Ws(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Uc=/[\n"\\]/g;function tr(f){return f.replace(Uc,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function dl(f,p,b,E,I,H,te,ce){f.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?f.type=te:f.removeAttribute("type"),p!=null?te==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+re(p)):f.value!==""+re(p)&&(f.value=""+re(p)):te!=="submit"&&te!=="reset"||f.removeAttribute("value"),p!=null?wr(f,te,re(p)):b!=null?wr(f,te,re(b)):E!=null&&f.removeAttribute("value"),I==null&&H!=null&&(f.defaultChecked=!!H),I!=null&&(f.checked=I&&typeof I!="function"&&typeof I!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?f.name=""+re(ce):f.removeAttribute("name")}function Qi(f,p,b,E,I,H,te,ce){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(f.type=H),p!=null||b!=null){if(!(H!=="submit"&&H!=="reset"||p!=null))return;b=b!=null?""+re(b):"",p=p!=null?""+re(p):b,ce||p===f.value||(f.value=p),f.defaultValue=p}E=E??I,E=typeof E!="function"&&typeof E!="symbol"&&!!E,f.checked=ce?f.checked:!!E,f.defaultChecked=!!E,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(f.name=te)}function wr(f,p,b){p==="number"&&Ws(f.ownerDocument)===f||f.defaultValue===""+b||(f.defaultValue=""+b)}function vi(f,p,b,E){if(f=f.options,p){p={};for(var I=0;I<b.length;I++)p["$"+b[I]]=!0;for(b=0;b<f.length;b++)I=p.hasOwnProperty("$"+f[b].value),f[b].selected!==I&&(f[b].selected=I),I&&E&&(f[b].defaultSelected=!0)}else{for(b=""+re(b),p=null,I=0;I<f.length;I++){if(f[I].value===b){f[I].selected=!0,E&&(f[I].defaultSelected=!0);return}p!==null||f[I].disabled||(p=f[I])}p!==null&&(p.selected=!0)}}function Zr(f,p,b){if(p!=null&&(p=""+re(p),p!==f.value&&(f.value=p),b==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=b!=null?""+re(b):""}function Ns(f,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(n(92));if(K(E)){if(1<E.length)throw Error(n(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=re(p),f.defaultValue=b,E=f.textContent,E===b&&E!==""&&E!==null&&(f.value=E)}function pl(f,p){if(p){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=p;return}}f.textContent=p}var Al=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function k1(f,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":E?f.setProperty(p,b):typeof b!="number"||b===0||Al.has(p)?p==="float"?f.cssFloat=b:f[p]=(""+b).trim():f[p]=b+"px"}function O1(f,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(f=f.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?f.setProperty(E,""):E==="float"?f.cssFloat="":f[E]="");for(var I in p)E=p[I],p.hasOwnProperty(I)&&b[I]!==E&&k1(f,I,E)}else for(var H in p)p.hasOwnProperty(H)&&k1(f,H,p[H])}function wm(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wd(f){return Sm.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var Tm=null;function Mm(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Kh=null,Iu=null;function hA(f){var p=Zn(f);if(p&&(f=p.stateNode)){var b=f[st]||null;e:switch(f=p.stateNode,p.type){case"input":if(dl(f,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+tr(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==f&&E.form===f.form){var I=E[st]||null;if(!I)throw Error(n(90));dl(E,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===f.form&&Pi(E)}break e;case"textarea":Zr(f,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&vi(f,!!b.multiple,p,!1)}}}var Sd=!1;function I1(f,p,b){if(Sd)return f(p,b);Sd=!0;try{var E=f(p);return E}finally{if(Sd=!1,(Kh!==null||Iu!==null)&&(Mb(),Kh&&(p=Kh,f=Iu,Iu=Kh=null,hA(p),f)))for(p=0;p<f.length;p++)hA(f[p])}}function Td(f,p){var b=f.stateNode;if(b===null)return null;var E=b[st]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var Zl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fA=!1;if(Zl)try{var Md={};Object.defineProperty(Md,"passive",{get:function(){fA=!0}}),window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{fA=!1}var gl=null,Ed=null,dA=null;function Em(){if(dA)return dA;var f,p=Ed,b=p.length,E,I="value"in gl?gl.value:gl.textContent,H=I.length;for(f=0;f<b&&p[f]===I[f];f++);var te=b-f;for(E=1;E<=te&&p[b-E]===I[H-E];E++);return dA=I.slice(f,1<E?1-E:void 0)}function Cd(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function Rd(){return!0}function B1(){return!1}function Ma(f){function p(b,E,I,H,te){this._reactName=b,this._targetInst=I,this.type=E,this.nativeEvent=H,this.target=te,this.currentTarget=null;for(var ce in f)f.hasOwnProperty(ce)&&(b=f[ce],this[ce]=b?b(H):H[ce]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Rd:B1,this.isPropagationStopped=B1,this}return u(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),p}var Bu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pA=Ma(Bu),Kr=u({},Bu,{view:0,detail:0}),Fu=Ma(Kr),Ls,Pd,Jh,Uu=u({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rm,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Jh&&(Jh&&f.type==="mousemove"?(Ls=f.screenX-Jh.screenX,Pd=f.screenY-Jh.screenY):Pd=Ls=0,Jh=f),Ls)},movementY:function(f){return"movementY"in f?f.movementY:Pd}}),F1=Ma(Uu),jT=u({},Uu,{dataTransfer:0}),XT=Ma(jT),U1=u({},Kr,{relatedTarget:0}),ef=Ma(U1),zu=u({},Bu,{animationName:0,elapsedTime:0,pseudoElement:0}),z1=Ma(zu),G1=u({},Bu,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),AA=Ma(G1),Gu=u({},Bu,{data:0}),Kl=Ma(Gu),V1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YT(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=Cm[f])?!!p[f]:!1}function Rm(){return YT}var q1=u({},Kr,{key:function(f){if(f.key){var p=V1[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=Cd(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?H1[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rm,charCode:function(f){return f.type==="keypress"?Cd(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Cd(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),$T=Ma(q1),QT=u({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W1=Ma(QT),ZT=u({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rm}),KT=Ma(ZT),JT=u({},Bu,{propertyName:0,elapsedTime:0,pseudoElement:0}),e3=Ma(JT),t3=u({},Uu,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),gA=Ma(t3),n3=u({},Bu,{newState:0,oldState:0}),i3=Ma(n3),r3=[9,13,27,32],Vu=Zl&&"CompositionEvent"in window,Nd=null;Zl&&"documentMode"in document&&(Nd=document.documentMode);var Pm=Zl&&"TextEvent"in window&&!Nd,Nm=Zl&&(!Vu||Nd&&8<Nd&&11>=Nd),Hu=" ",j1=!1;function mA(f,p){switch(f){case"keyup":return r3.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var tf=!1;function X1(f,p){switch(f){case"compositionend":return Lm(p);case"keypress":return p.which!==32?null:(j1=!0,Hu);case"textInput":return f=p.data,f===Hu&&j1?null:f;default:return null}}function Dm(f,p){if(tf)return f==="compositionend"||!Vu&&mA(f,p)?(f=Em(),dA=Ed=gl=null,tf=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Nm&&p.locale!=="ko"?null:p.data;default:return null}}var km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vA(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!km[f.type]:p==="textarea"}function nf(f,p,b,E){Kh?Iu?Iu.push(E):Iu=[E]:Kh=E,p=Lb(p,"onChange"),0<p.length&&(b=new pA("onChange","change",null,b,E),f.push({event:b,listeners:p}))}var Ni=null,Ld=null;function Y1(f){dD(f,0)}function Dd(f){var p=Rs(f);if(Pi(p))return f}function $1(f,p){if(f==="change")return p}var Q1=!1;if(Zl){var Om;if(Zl){var Im="oninput"in document;if(!Im){var sa=document.createElement("div");sa.setAttribute("oninput","return;"),Im=typeof sa.oninput=="function"}Om=Im}else Om=!1;Q1=Om&&(!document.documentMode||9<document.documentMode)}function yA(){Ni&&(Ni.detachEvent("onpropertychange",zc),Ld=Ni=null)}function zc(f){if(f.propertyName==="value"&&Dd(Ld)){var p=[];nf(p,Ld,f,Mm(f)),I1(Y1,p)}}function s3(f,p,b){f==="focusin"?(yA(),Ni=p,Ld=b,Ni.attachEvent("onpropertychange",zc)):f==="focusout"&&yA()}function Bm(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Dd(Ld)}function a3(f,p){if(f==="click")return Dd(p)}function ro(f,p){if(f==="input"||f==="change")return Dd(p)}function Fm(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var aa=typeof Object.is=="function"?Object.is:Fm;function ml(f,p){if(aa(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var I=b[E];if(!fn.call(p,I)||!aa(f[I],p[I]))return!1}return!0}function Gc(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function qu(f,p){var b=Gc(f);f=0;for(var E;b;){if(b.nodeType===3){if(E=f+b.textContent.length,f<=p&&E>=p)return{node:b,offset:p-f};f=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Gc(b)}}function Z1(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?Z1(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function Um(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=Ws(f.document);p instanceof f.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)f=p.contentWindow;else break;p=Ws(f.document)}return p}function zm(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var Gm=Zl&&"documentMode"in document&&11>=document.documentMode,rf=null,Vm=null,Wu=null,xA=!1;function bA(f,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;xA||rf==null||rf!==Ws(E)||(E=rf,"selectionStart"in E&&zm(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Wu&&ml(Wu,E)||(Wu=E,E=Lb(Vm,"onSelect"),0<E.length&&(p=new pA("onSelect","select",null,p,b),f.push({event:p,listeners:E}),p.target=rf)))}function Do(f,p){var b={};return b[f.toLowerCase()]=p.toLowerCase(),b["Webkit"+f]="webkit"+p,b["Moz"+f]="moz"+p,b}var ko={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionrun:Do("Transition","TransitionRun"),transitionstart:Do("Transition","TransitionStart"),transitioncancel:Do("Transition","TransitionCancel"),transitionend:Do("Transition","TransitionEnd")},oa={},K1={};Zl&&(K1=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Oo(f){if(oa[f])return oa[f];if(!ko[f])return f;var p=ko[f],b;for(b in p)if(p.hasOwnProperty(b)&&b in K1)return oa[f]=p[b];return f}var J1=Oo("animationend"),eb=Oo("animationiteration"),tb=Oo("animationstart"),nb=Oo("transitionrun"),o3=Oo("transitionstart"),l3=Oo("transitioncancel"),ib=Oo("transitionend"),_A=new Map,wA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wA.push("scrollEnd");function Ga(f,p){_A.set(f,p),hs(p,[f])}var rb=new WeakMap;function so(f,p){if(typeof f=="object"&&f!==null){var b=rb.get(f);return b!==void 0?b:(p={value:f,source:p,stack:cr(p)},rb.set(f,p),p)}return{value:f,source:p,stack:cr(p)}}var ao=[],sf=0,Hm=0;function SA(){for(var f=sf,p=Hm=sf=0;p<f;){var b=ao[p];ao[p++]=null;var E=ao[p];ao[p++]=null;var I=ao[p];ao[p++]=null;var H=ao[p];if(ao[p++]=null,E!==null&&I!==null){var te=E.pending;te===null?I.next=I:(I.next=te.next,te.next=I),E.pending=I}H!==0&&qm(b,I,H)}}function TA(f,p,b,E){ao[sf++]=f,ao[sf++]=p,ao[sf++]=b,ao[sf++]=E,Hm|=E,f.lanes|=E,f=f.alternate,f!==null&&(f.lanes|=E)}function MA(f,p,b,E){return TA(f,p,b,E),oo(f)}function af(f,p){return TA(f,null,null,p),oo(f)}function qm(f,p,b){f.lanes|=b;var E=f.alternate;E!==null&&(E.lanes|=b);for(var I=!1,H=f.return;H!==null;)H.childLanes|=b,E=H.alternate,E!==null&&(E.childLanes|=b),H.tag===22&&(f=H.stateNode,f===null||f._visibility&1||(I=!0)),f=H,H=H.return;return f.tag===3?(H=f.stateNode,I&&p!==null&&(I=31-Xt(b),f=H.hiddenUpdates,E=f[I],E===null?f[I]=[p]:E.push(p),p.lane=b|536870912),H):null}function oo(f){if(50<hv)throw hv=0,Y3=null,Error(n(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var ju={};function c3(f,p,b,E){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(f,p,b,E){return new c3(f,p,b,E)}function Wm(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Jl(f,p){var b=f.alternate;return b===null?(b=Va(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&65011712,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b.refCleanup=f.refCleanup,b}function sb(f,p){f.flags&=65011714;var b=f.alternate;return b===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=b.childLanes,f.lanes=b.lanes,f.child=b.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=b.memoizedProps,f.memoizedState=b.memoizedState,f.updateQueue=b.updateQueue,f.type=b.type,p=b.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function Io(f,p,b,E,I,H){var te=0;if(E=f,typeof f=="function")Wm(f)&&(te=1);else if(typeof f=="string")te=lQ(f,b,_e.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case F:return f=Va(31,b,p,I),f.elementType=F,f.lanes=H,f;case x:return ec(b.children,I,H,p);case _:te=8,I|=24;break;case S:return f=Va(12,b,p,I|2),f.elementType=S,f.lanes=H,f;case D:return f=Va(13,b,p,I),f.elementType=D,f.lanes=H,f;case B:return f=Va(19,b,p,I),f.elementType=B,f.lanes=H,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case w:case P:te=10;break e;case C:te=9;break e;case L:te=11;break e;case k:te=14;break e;case U:te=16,E=null;break e}te=29,b=Error(n(130,f===null?"null":typeof f,"")),E=null}return p=Va(te,b,p,I),p.elementType=f,p.type=E,p.lanes=H,p}function ec(f,p,b,E){return f=Va(7,f,E,p),f.lanes=b,f}function jm(f,p,b){return f=Va(6,f,null,p),f.lanes=b,f}function of(f,p,b){return p=Va(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var Xu=[],lf=0,EA=null,Vc=0,Ha=[],js=0,tc=null,Bo=1,vl="";function yl(f,p){Xu[lf++]=Vc,Xu[lf++]=EA,EA=f,Vc=p}function Xm(f,p,b){Ha[js++]=Bo,Ha[js++]=vl,Ha[js++]=tc,tc=f;var E=Bo;f=vl;var I=32-Xt(E)-1;E&=~(1<<I),b+=1;var H=32-Xt(p)+I;if(30<H){var te=I-I%5;H=(E&(1<<te)-1).toString(32),E>>=te,I-=te,Bo=1<<32-Xt(p)+I|b<<I|E,vl=H+f}else Bo=1<<H|b<<I|E,vl=f}function Ym(f){f.return!==null&&(yl(f,1),Xm(f,1,0))}function $m(f){for(;f===EA;)EA=Xu[--lf],Xu[lf]=null,Vc=Xu[--lf],Xu[lf]=null;for(;f===tc;)tc=Ha[--js],Ha[js]=null,vl=Ha[--js],Ha[js]=null,Bo=Ha[--js],Ha[js]=null}var la=null,Br=null,Bi=!1,Yu=null,xl=!1,Qm=Error(n(519));function $u(f){var p=Error(n(418,""));throw nc(so(p,f)),Qm}function Zm(f){var p=f.stateNode,b=f.type,E=f.memoizedProps;switch(p[qe]=f,p[st]=E,b){case"dialog":Ti("cancel",p),Ti("close",p);break;case"iframe":case"object":case"embed":Ti("load",p);break;case"video":case"audio":for(b=0;b<dv.length;b++)Ti(dv[b],p);break;case"source":Ti("error",p);break;case"img":case"image":case"link":Ti("error",p),Ti("load",p);break;case"details":Ti("toggle",p);break;case"input":Ti("invalid",p),Qi(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Ir(p);break;case"select":Ti("invalid",p);break;case"textarea":Ti("invalid",p),Ns(p,E.value,E.defaultValue,E.children),Ir(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||mD(p.textContent,b)?(E.popover!=null&&(Ti("beforetoggle",p),Ti("toggle",p)),E.onScroll!=null&&Ti("scroll",p),E.onScrollEnd!=null&&Ti("scrollend",p),E.onClick!=null&&(p.onclick=Db),p=!0):p=!1,p||$u(f)}function Km(f){for(la=f.return;la;)switch(la.tag){case 5:case 13:xl=!1;return;case 27:case 3:xl=!0;return;default:la=la.return}}function Sr(f){if(f!==la)return!1;if(!Bi)return Km(f),Bi=!0,!1;var p=f.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=f.type,b=!(b!=="form"&&b!=="button")||uM(f.type,f.memoizedProps)),b=!b),b&&Br&&$u(f),Km(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8)if(b=f.data,b==="/$"){if(p===0){Br=oc(f.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;f=f.nextSibling}Br=null}}else p===27?(p=Br,wf(f.type)?(f=pM,pM=null,Br=f):Br=p):Br=la?oc(f.stateNode.nextSibling):null;return!0}function kd(){Br=la=null,Bi=!1}function ab(){var f=Yu;return f!==null&&(ho===null?ho=f:ho.push.apply(ho,f),Yu=null),f}function nc(f){Yu===null?Yu=[f]:Yu.push(f)}var Ea=he(null),Qu=null,ic=null;function Hc(f,p,b){Pe(Ea,p._currentValue),p._currentValue=b}function bl(f){f._currentValue=Ea.current,Te(Ea)}function CA(f,p,b){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===b)break;f=f.return}}function RA(f,p,b,E){var I=f.child;for(I!==null&&(I.return=f);I!==null;){var H=I.dependencies;if(H!==null){var te=I.child;H=H.firstContext;e:for(;H!==null;){var ce=H;H=I;for(var we=0;we<p.length;we++)if(ce.context===p[we]){H.lanes|=b,ce=H.alternate,ce!==null&&(ce.lanes|=b),CA(H.return,b,f),E||(te=null);break e}H=ce.next}}else if(I.tag===18){if(te=I.return,te===null)throw Error(n(341));te.lanes|=b,H=te.alternate,H!==null&&(H.lanes|=b),CA(te,b,f),te=null}else te=I.child;if(te!==null)te.return=I;else for(te=I;te!==null;){if(te===f){te=null;break}if(I=te.sibling,I!==null){I.return=te.return,te=I;break}te=te.return}I=te}}function cf(f,p,b,E){f=null;for(var I=p,H=!1;I!==null;){if(!H){if((I.flags&524288)!==0)H=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var te=I.alternate;if(te===null)throw Error(n(387));if(te=te.memoizedProps,te!==null){var ce=I.type;aa(I.pendingProps.value,te.value)||(f!==null?f.push(ce):f=[ce])}}else if(I===$e.current){if(te=I.alternate,te===null)throw Error(n(387));te.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(f!==null?f.push(yv):f=[yv])}I=I.return}f!==null&&RA(p,f,b,E),p.flags|=262144}function PA(f){for(f=f.firstContext;f!==null;){if(!aa(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Zu(f){Qu=f,ic=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Xs(f){return rc(Qu,f)}function NA(f,p){return Qu===null&&Zu(f),rc(f,p)}function rc(f,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},ic===null){if(f===null)throw Error(n(308));ic=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else ic=ic.next=p;return b}var _l=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(b,E){f.push(E)}};this.abort=function(){p.aborted=!0,f.forEach(function(b){return b()})}},kn=i.unstable_scheduleCallback,lo=i.unstable_NormalPriority,Qt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fs(){return{controller:new _l,data:new Map,refCount:0}}function uf(f){f.refCount--,f.refCount===0&&kn(lo,function(){f.controller.abort()})}var Ku=null,wl=0,hf=0,qr=null;function ff(f,p){if(Ku===null){var b=Ku=[];wl=0,hf=tM(),qr={status:"pending",value:void 0,then:function(E){b.push(E)}}}return wl++,p.then(Ju,Ju),p}function Ju(){if(--wl===0&&Ku!==null){qr!==null&&(qr.status="fulfilled");var f=Ku;Ku=null,hf=0,qr=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function ob(f,p){var b=[],E={status:"pending",value:null,reason:null,then:function(I){b.push(I)}};return f.then(function(){E.status="fulfilled",E.value=p;for(var I=0;I<b.length;I++)(0,b[I])(p)},function(I){for(E.status="rejected",E.reason=I,I=0;I<b.length;I++)(0,b[I])(void 0)}),E}var bt=Y.S;Y.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&ff(f,p),bt!==null&&bt(f,p)};var Pt=he(null);function LA(){var f=Pt.current;return f!==null?f:Tr.pooledCache}function Od(f,p){p===null?Pe(Pt,Pt.current):Pe(Pt,p.pool)}function Id(){var f=LA();return f===null?null:{parent:Qt._currentValue,pool:f}}var qc=Error(n(460)),eh=Error(n(474)),Sl=Error(n(542)),DA={then:function(){}};function sc(f){return f=f.status,f==="fulfilled"||f==="rejected"}function g(){}function v(f,p,b){switch(b=f[b],b===void 0?f.push(p):b!==p&&(p.then(g,g),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,M(f),f;default:if(typeof p.status=="string")p.then(g,g);else{if(f=Tr,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=p,f.status="pending",f.then(function(E){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=E}},function(E){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,M(f),f}throw y=p,qc}}var y=null;function T(){if(y===null)throw Error(n(459));var f=y;return y=null,f}function M(f){if(f===qc||f===Sl)throw Error(n(483))}var R=!1;function N(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function O(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function G(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function q(f,p,b){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(nr&2)!==0){var I=E.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),E.pending=p,p=oo(f),qm(f,null,b),p}return TA(f,E,p,b),oo(f)}function Q(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=f.pendingLanes,b|=E,p.lanes=b,tn(f,b)}}function le(f,p){var b=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var I=null,H=null;if(b=b.firstBaseUpdate,b!==null){do{var te={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};H===null?I=H=te:H=H.next=te,b=b.next}while(b!==null);H===null?I=H=p:H=H.next=p}else I=H=p;b={baseState:E.baseState,firstBaseUpdate:I,lastBaseUpdate:H,shared:E.shared,callbacks:E.callbacks},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}var xe=!1;function ge(){if(xe){var f=qr;if(f!==null)throw f}}function me(f,p,b,E){xe=!1;var I=f.updateQueue;R=!1;var H=I.firstBaseUpdate,te=I.lastBaseUpdate,ce=I.shared.pending;if(ce!==null){I.shared.pending=null;var we=ce,Xe=we.next;we.next=null,te===null?H=Xe:te.next=Xe,te=we;var ut=f.alternate;ut!==null&&(ut=ut.updateQueue,ce=ut.lastBaseUpdate,ce!==te&&(ce===null?ut.firstBaseUpdate=Xe:ce.next=Xe,ut.lastBaseUpdate=we))}if(H!==null){var xt=I.baseState;te=0,ut=Xe=we=null,ce=H;do{var Ze=ce.lane&-536870913,Ke=Ze!==ce.lane;if(Ke?(Li&Ze)===Ze:(E&Ze)===Ze){Ze!==0&&Ze===hf&&(xe=!0),ut!==null&&(ut=ut.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Wn=f,Bn=ce;Ze=p;var hr=b;switch(Bn.tag){case 1:if(Wn=Bn.payload,typeof Wn=="function"){xt=Wn.call(hr,xt,Ze);break e}xt=Wn;break e;case 3:Wn.flags=Wn.flags&-65537|128;case 0:if(Wn=Bn.payload,Ze=typeof Wn=="function"?Wn.call(hr,xt,Ze):Wn,Ze==null)break e;xt=u({},xt,Ze);break e;case 2:R=!0}}Ze=ce.callback,Ze!==null&&(f.flags|=64,Ke&&(f.flags|=8192),Ke=I.callbacks,Ke===null?I.callbacks=[Ze]:Ke.push(Ze))}else Ke={lane:Ze,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ut===null?(Xe=ut=Ke,we=xt):ut=ut.next=Ke,te|=Ze;if(ce=ce.next,ce===null){if(ce=I.shared.pending,ce===null)break;Ke=ce,ce=Ke.next,Ke.next=null,I.lastBaseUpdate=Ke,I.shared.pending=null}}while(!0);ut===null&&(we=xt),I.baseState=we,I.firstBaseUpdate=Xe,I.lastBaseUpdate=ut,H===null&&(I.shared.lanes=0),yf|=te,f.lanes=te,f.memoizedState=xt}}function Me(f,p){if(typeof f!="function")throw Error(n(191,f));f.call(p)}function De(f,p){var b=f.callbacks;if(b!==null)for(f.callbacks=null,f=0;f<b.length;f++)Me(b[f],p)}var je=he(null),ze=he(0);function Be(f,p){f=oh,Pe(ze,f),Pe(je,p),oh=f|p.baseLanes}function Ee(){Pe(ze,oh),Pe(je,je.current)}function Nt(){oh=ze.current,Te(je),Te(ze)}var nn=0,wt=null,$t=null,cn=null,ii=!1,_n=!1,sn=!1,Et=0,Hn=0,Ci=null,Xn=0;function In(){throw Error(n(321))}function Ds(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!aa(f[b],p[b]))return!1;return!0}function kA(f,p,b,E,I,H){return nn=H,wt=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Y.H=f===null||f.memoizedState===null?ZN:KN,sn=!1,H=b(E,I),sn=!1,_n&&(H=gN(p,b,E,I)),AN(f),H}function AN(f){Y.H=db;var p=$t!==null&&$t.next!==null;if(nn=0,cn=$t=wt=null,ii=!1,Hn=0,Ci=null,p)throw Error(n(300));f===null||Ys||(f=f.dependencies,f!==null&&PA(f)&&(Ys=!0))}function gN(f,p,b,E){wt=f;var I=0;do{if(_n&&(Ci=null),Hn=0,_n=!1,25<=I)throw Error(n(301));if(I+=1,cn=$t=null,f.updateQueue!=null){var H=f.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Y.H=y$,H=p(b,E)}while(_n);return H}function d$(){var f=Y.H,p=f.useState()[0];return p=typeof p.then=="function"?Jm(p):p,f=f.useState()[0],($t!==null?$t.memoizedState:null)!==f&&(wt.flags|=1024),p}function u3(){var f=Et!==0;return Et=0,f}function h3(f,p,b){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~b}function f3(f){if(ii){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}ii=!1}nn=0,cn=$t=wt=null,_n=!1,Hn=Et=0,Ci=null}function co(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?wt.memoizedState=cn=f:cn=cn.next=f,cn}function vs(){if($t===null){var f=wt.alternate;f=f!==null?f.memoizedState:null}else f=$t.next;var p=cn===null?wt.memoizedState:cn.next;if(p!==null)cn=p,$t=f;else{if(f===null)throw wt.alternate===null?Error(n(467)):Error(n(310));$t=f,f={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},cn===null?wt.memoizedState=cn=f:cn=cn.next=f}return cn}function d3(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jm(f){var p=Hn;return Hn+=1,Ci===null&&(Ci=[]),f=v(Ci,f,p),p=wt,(cn===null?p.memoizedState:cn.next)===null&&(p=p.alternate,Y.H=p===null||p.memoizedState===null?ZN:KN),f}function lb(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Jm(f);if(f.$$typeof===P)return Xs(f)}throw Error(n(438,String(f)))}function p3(f){var p=null,b=wt.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=wt.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=d3(),wt.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(f),E=0;E<f;E++)b[E]=z;return p.index++,b}function th(f,p){return typeof p=="function"?p(f):p}function cb(f){var p=vs();return A3(p,$t,f)}function A3(f,p,b){var E=f.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=b;var I=f.baseQueue,H=E.pending;if(H!==null){if(I!==null){var te=I.next;I.next=H.next,H.next=te}p.baseQueue=I=H,E.pending=null}if(H=f.baseState,I===null)f.memoizedState=H;else{p=I.next;var ce=te=null,we=null,Xe=p,ut=!1;do{var xt=Xe.lane&-536870913;if(xt!==Xe.lane?(Li&xt)===xt:(nn&xt)===xt){var Ze=Xe.revertLane;if(Ze===0)we!==null&&(we=we.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),xt===hf&&(ut=!0);else if((nn&Ze)===Ze){Xe=Xe.next,Ze===hf&&(ut=!0);continue}else xt={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},we===null?(ce=we=xt,te=H):we=we.next=xt,wt.lanes|=Ze,yf|=Ze;xt=Xe.action,sn&&b(H,xt),H=Xe.hasEagerState?Xe.eagerState:b(H,xt)}else Ze={lane:xt,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},we===null?(ce=we=Ze,te=H):we=we.next=Ze,wt.lanes|=xt,yf|=xt;Xe=Xe.next}while(Xe!==null&&Xe!==p);if(we===null?te=H:we.next=ce,!aa(H,f.memoizedState)&&(Ys=!0,ut&&(b=qr,b!==null)))throw b;f.memoizedState=H,f.baseState=te,f.baseQueue=we,E.lastRenderedState=H}return I===null&&(E.lanes=0),[f.memoizedState,E.dispatch]}function g3(f){var p=vs(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var E=b.dispatch,I=b.pending,H=p.memoizedState;if(I!==null){b.pending=null;var te=I=I.next;do H=f(H,te.action),te=te.next;while(te!==I);aa(H,p.memoizedState)||(Ys=!0),p.memoizedState=H,p.baseQueue===null&&(p.baseState=H),b.lastRenderedState=H}return[H,E]}function mN(f,p,b){var E=wt,I=vs(),H=Bi;if(H){if(b===void 0)throw Error(n(407));b=b()}else b=p();var te=!aa(($t||I).memoizedState,b);te&&(I.memoizedState=b,Ys=!0),I=I.queue;var ce=xN.bind(null,E,I,f);if(ev(2048,8,ce,[f]),I.getSnapshot!==p||te||cn!==null&&cn.memoizedState.tag&1){if(E.flags|=2048,OA(9,ub(),yN.bind(null,E,I,b,p),null),Tr===null)throw Error(n(349));H||(nn&124)!==0||vN(E,p,b)}return b}function vN(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=wt.updateQueue,p===null?(p=d3(),wt.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function yN(f,p,b,E){p.value=b,p.getSnapshot=E,bN(p)&&_N(f)}function xN(f,p,b){return b(function(){bN(p)&&_N(f)})}function bN(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!aa(f,b)}catch{return!0}}function _N(f){var p=af(f,2);p!==null&&Vo(p,f,2)}function m3(f){var p=co();if(typeof f=="function"){var b=f;if(f=b(),sn){et(!0);try{b()}finally{et(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:f},p}function wN(f,p,b,E){return f.baseState=b,A3(f,$t,typeof E=="function"?E:th)}function p$(f,p,b,E,I){if(fb(f))throw Error(n(485));if(f=p.action,f!==null){var H={payload:I,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){H.listeners.push(te)}};Y.T!==null?b(!0):H.isTransition=!1,E(H),b=p.pending,b===null?(H.next=p.pending=H,SN(p,H)):(H.next=b.next,p.pending=b.next=H)}}function SN(f,p){var b=p.action,E=p.payload,I=f.state;if(p.isTransition){var H=Y.T,te={};Y.T=te;try{var ce=b(I,E),we=Y.S;we!==null&&we(te,ce),TN(f,p,ce)}catch(Xe){v3(f,p,Xe)}finally{Y.T=H}}else try{H=b(I,E),TN(f,p,H)}catch(Xe){v3(f,p,Xe)}}function TN(f,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){MN(f,p,E)},function(E){return v3(f,p,E)}):MN(f,p,b)}function MN(f,p,b){p.status="fulfilled",p.value=b,EN(p),f.state=b,p=f.pending,p!==null&&(b=p.next,b===p?f.pending=null:(b=b.next,p.next=b,SN(f,b)))}function v3(f,p,b){var E=f.pending;if(f.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,EN(p),p=p.next;while(p!==E)}f.action=null}function EN(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function CN(f,p){return p}function RN(f,p){if(Bi){var b=Tr.formState;if(b!==null){e:{var E=wt;if(Bi){if(Br){t:{for(var I=Br,H=xl;I.nodeType!==8;){if(!H){I=null;break t}if(I=oc(I.nextSibling),I===null){I=null;break t}}H=I.data,I=H==="F!"||H==="F"?I:null}if(I){Br=oc(I.nextSibling),E=I.data==="F!";break e}}$u(E)}E=!1}E&&(p=b[0])}}return b=co(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CN,lastRenderedState:p},b.queue=E,b=YN.bind(null,wt,E),E.dispatch=b,E=m3(!1),H=w3.bind(null,wt,!1,E.queue),E=co(),I={state:p,dispatch:null,action:f,pending:null},E.queue=I,b=p$.bind(null,wt,I,H,b),I.dispatch=b,E.memoizedState=f,[p,b,!1]}function PN(f){var p=vs();return NN(p,$t,f)}function NN(f,p,b){if(p=A3(f,p,CN)[0],f=cb(th)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Jm(p)}catch(te){throw te===qc?Sl:te}else E=p;p=vs();var I=p.queue,H=I.dispatch;return b!==p.memoizedState&&(wt.flags|=2048,OA(9,ub(),A$.bind(null,I,b),null)),[E,H,f]}function A$(f,p){f.action=p}function LN(f){var p=vs(),b=$t;if(b!==null)return NN(p,b,f);vs(),p=p.memoizedState,b=vs();var E=b.queue.dispatch;return b.memoizedState=f,[p,E,!1]}function OA(f,p,b,E){return f={tag:f,create:b,deps:E,inst:p,next:null},p=wt.updateQueue,p===null&&(p=d3(),wt.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=f.next=f:(E=b.next,b.next=f,f.next=E,p.lastEffect=f),f}function ub(){return{destroy:void 0,resource:void 0}}function DN(){return vs().memoizedState}function hb(f,p,b,E){var I=co();E=E===void 0?null:E,wt.flags|=f,I.memoizedState=OA(1|p,ub(),b,E)}function ev(f,p,b,E){var I=vs();E=E===void 0?null:E;var H=I.memoizedState.inst;$t!==null&&E!==null&&Ds(E,$t.memoizedState.deps)?I.memoizedState=OA(p,H,b,E):(wt.flags|=f,I.memoizedState=OA(1|p,H,b,E))}function kN(f,p){hb(8390656,8,f,p)}function ON(f,p){ev(2048,8,f,p)}function IN(f,p){return ev(4,2,f,p)}function BN(f,p){return ev(4,4,f,p)}function FN(f,p){if(typeof p=="function"){f=f();var b=p(f);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function UN(f,p,b){b=b!=null?b.concat([f]):null,ev(4,4,FN.bind(null,p,f),b)}function y3(){}function zN(f,p){var b=vs();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&Ds(p,E[1])?E[0]:(b.memoizedState=[f,p],f)}function GN(f,p){var b=vs();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&Ds(p,E[1]))return E[0];if(E=f(),sn){et(!0);try{f()}finally{et(!1)}}return b.memoizedState=[E,p],E}function x3(f,p,b){return b===void 0||(nn&1073741824)!==0?f.memoizedState=p:(f.memoizedState=b,f=qL(),wt.lanes|=f,yf|=f,b)}function VN(f,p,b,E){return aa(b,p)?b:je.current!==null?(f=x3(f,b,E),aa(f,p)||(Ys=!0),f):(nn&42)===0?(Ys=!0,f.memoizedState=b):(f=qL(),wt.lanes|=f,yf|=f,p)}function HN(f,p,b,E,I){var H=ee.p;ee.p=H!==0&&8>H?H:8;var te=Y.T,ce={};Y.T=ce,w3(f,!1,p,b);try{var we=I(),Xe=Y.S;if(Xe!==null&&Xe(ce,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var ut=ob(we,E);tv(f,p,ut,Go(f))}else tv(f,p,E,Go(f))}catch(xt){tv(f,p,{then:function(){},status:"rejected",reason:xt},Go())}finally{ee.p=H,Y.T=te}}function g$(){}function b3(f,p,b,E){if(f.tag!==5)throw Error(n(476));var I=qN(f).queue;HN(f,I,p,se,b===null?g$:function(){return WN(f),b(E)})}function qN(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:se},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:b},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function WN(f){var p=qN(f).next.queue;tv(f,p,{},Go())}function _3(){return Xs(yv)}function jN(){return vs().memoizedState}function XN(){return vs().memoizedState}function m$(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var b=Go();f=G(b);var E=q(p,f,b);E!==null&&(Vo(E,p,b),Q(E,p,b)),p={cache:fs()},f.payload=p;return}p=p.return}}function v$(f,p,b){var E=Go();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},fb(f)?$N(p,b):(b=MA(f,p,b,E),b!==null&&(Vo(b,f,E),QN(b,p,E)))}function YN(f,p,b){var E=Go();tv(f,p,b,E)}function tv(f,p,b,E){var I={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(fb(f))$N(p,I);else{var H=f.alternate;if(f.lanes===0&&(H===null||H.lanes===0)&&(H=p.lastRenderedReducer,H!==null))try{var te=p.lastRenderedState,ce=H(te,b);if(I.hasEagerState=!0,I.eagerState=ce,aa(ce,te))return TA(f,p,I,0),Tr===null&&SA(),!1}catch{}finally{}if(b=MA(f,p,I,E),b!==null)return Vo(b,f,E),QN(b,p,E),!0}return!1}function w3(f,p,b,E){if(E={lane:2,revertLane:tM(),action:E,hasEagerState:!1,eagerState:null,next:null},fb(f)){if(p)throw Error(n(479))}else p=MA(f,b,E,2),p!==null&&Vo(p,f,2)}function fb(f){var p=f.alternate;return f===wt||p!==null&&p===wt}function $N(f,p){_n=ii=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function QN(f,p,b){if((b&4194048)!==0){var E=p.lanes;E&=f.pendingLanes,b|=E,p.lanes=b,tn(f,b)}}var db={readContext:Xs,use:lb,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In},ZN={readContext:Xs,use:lb,useCallback:function(f,p){return co().memoizedState=[f,p===void 0?null:p],f},useContext:Xs,useEffect:kN,useImperativeHandle:function(f,p,b){b=b!=null?b.concat([f]):null,hb(4194308,4,FN.bind(null,p,f),b)},useLayoutEffect:function(f,p){return hb(4194308,4,f,p)},useInsertionEffect:function(f,p){hb(4,2,f,p)},useMemo:function(f,p){var b=co();p=p===void 0?null:p;var E=f();if(sn){et(!0);try{f()}finally{et(!1)}}return b.memoizedState=[E,p],E},useReducer:function(f,p,b){var E=co();if(b!==void 0){var I=b(p);if(sn){et(!0);try{b(p)}finally{et(!1)}}}else I=p;return E.memoizedState=E.baseState=I,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:I},E.queue=f,f=f.dispatch=v$.bind(null,wt,f),[E.memoizedState,f]},useRef:function(f){var p=co();return f={current:f},p.memoizedState=f},useState:function(f){f=m3(f);var p=f.queue,b=YN.bind(null,wt,p);return p.dispatch=b,[f.memoizedState,b]},useDebugValue:y3,useDeferredValue:function(f,p){var b=co();return x3(b,f,p)},useTransition:function(){var f=m3(!1);return f=HN.bind(null,wt,f.queue,!0,!1),co().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,b){var E=wt,I=co();if(Bi){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Tr===null)throw Error(n(349));(Li&124)!==0||vN(E,p,b)}I.memoizedState=b;var H={value:b,getSnapshot:p};return I.queue=H,kN(xN.bind(null,E,H,f),[f]),E.flags|=2048,OA(9,ub(),yN.bind(null,E,H,b,p),null),b},useId:function(){var f=co(),p=Tr.identifierPrefix;if(Bi){var b=vl,E=Bo;b=(E&~(1<<32-Xt(E)-1)).toString(32)+b,p="«"+p+"R"+b,b=Et++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=Xn++,p="«"+p+"r"+b.toString(32)+"»";return f.memoizedState=p},useHostTransitionStatus:_3,useFormState:RN,useActionState:RN,useOptimistic:function(f){var p=co();p.memoizedState=p.baseState=f;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=w3.bind(null,wt,!0,b),b.dispatch=p,[f,p]},useMemoCache:p3,useCacheRefresh:function(){return co().memoizedState=m$.bind(null,wt)}},KN={readContext:Xs,use:lb,useCallback:zN,useContext:Xs,useEffect:ON,useImperativeHandle:UN,useInsertionEffect:IN,useLayoutEffect:BN,useMemo:GN,useReducer:cb,useRef:DN,useState:function(){return cb(th)},useDebugValue:y3,useDeferredValue:function(f,p){var b=vs();return VN(b,$t.memoizedState,f,p)},useTransition:function(){var f=cb(th)[0],p=vs().memoizedState;return[typeof f=="boolean"?f:Jm(f),p]},useSyncExternalStore:mN,useId:jN,useHostTransitionStatus:_3,useFormState:PN,useActionState:PN,useOptimistic:function(f,p){var b=vs();return wN(b,$t,f,p)},useMemoCache:p3,useCacheRefresh:XN},y$={readContext:Xs,use:lb,useCallback:zN,useContext:Xs,useEffect:ON,useImperativeHandle:UN,useInsertionEffect:IN,useLayoutEffect:BN,useMemo:GN,useReducer:g3,useRef:DN,useState:function(){return g3(th)},useDebugValue:y3,useDeferredValue:function(f,p){var b=vs();return $t===null?x3(b,f,p):VN(b,$t.memoizedState,f,p)},useTransition:function(){var f=g3(th)[0],p=vs().memoizedState;return[typeof f=="boolean"?f:Jm(f),p]},useSyncExternalStore:mN,useId:jN,useHostTransitionStatus:_3,useFormState:LN,useActionState:LN,useOptimistic:function(f,p){var b=vs();return $t!==null?wN(b,$t,f,p):(b.baseState=f,[f,b.queue.dispatch])},useMemoCache:p3,useCacheRefresh:XN},IA=null,nv=0;function pb(f){var p=nv;return nv+=1,IA===null&&(IA=[]),v(IA,f,p)}function iv(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function Ab(f,p){throw p.$$typeof===h?Error(n(525)):(f=Object.prototype.toString.call(p),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function JN(f){var p=f._init;return p(f._payload)}function eL(f){function p(Fe,Le){if(f){var We=Fe.deletions;We===null?(Fe.deletions=[Le],Fe.flags|=16):We.push(Le)}}function b(Fe,Le){if(!f)return null;for(;Le!==null;)p(Fe,Le),Le=Le.sibling;return null}function E(Fe){for(var Le=new Map;Fe!==null;)Fe.key!==null?Le.set(Fe.key,Fe):Le.set(Fe.index,Fe),Fe=Fe.sibling;return Le}function I(Fe,Le){return Fe=Jl(Fe,Le),Fe.index=0,Fe.sibling=null,Fe}function H(Fe,Le,We){return Fe.index=We,f?(We=Fe.alternate,We!==null?(We=We.index,We<Le?(Fe.flags|=67108866,Le):We):(Fe.flags|=67108866,Le)):(Fe.flags|=1048576,Le)}function te(Fe){return f&&Fe.alternate===null&&(Fe.flags|=67108866),Fe}function ce(Fe,Le,We,At){return Le===null||Le.tag!==6?(Le=jm(We,Fe.mode,At),Le.return=Fe,Le):(Le=I(Le,We),Le.return=Fe,Le)}function we(Fe,Le,We,At){var pn=We.type;return pn===x?ut(Fe,Le,We.props.children,At,We.key):Le!==null&&(Le.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===U&&JN(pn)===Le.type)?(Le=I(Le,We.props),iv(Le,We),Le.return=Fe,Le):(Le=Io(We.type,We.key,We.props,null,Fe.mode,At),iv(Le,We),Le.return=Fe,Le)}function Xe(Fe,Le,We,At){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==We.containerInfo||Le.stateNode.implementation!==We.implementation?(Le=of(We,Fe.mode,At),Le.return=Fe,Le):(Le=I(Le,We.children||[]),Le.return=Fe,Le)}function ut(Fe,Le,We,At,pn){return Le===null||Le.tag!==7?(Le=ec(We,Fe.mode,At,pn),Le.return=Fe,Le):(Le=I(Le,We),Le.return=Fe,Le)}function xt(Fe,Le,We){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Le=jm(""+Le,Fe.mode,We),Le.return=Fe,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case d:return We=Io(Le.type,Le.key,Le.props,null,Fe.mode,We),iv(We,Le),We.return=Fe,We;case A:return Le=of(Le,Fe.mode,We),Le.return=Fe,Le;case U:var At=Le._init;return Le=At(Le._payload),xt(Fe,Le,We)}if(K(Le)||W(Le))return Le=ec(Le,Fe.mode,We,null),Le.return=Fe,Le;if(typeof Le.then=="function")return xt(Fe,pb(Le),We);if(Le.$$typeof===P)return xt(Fe,NA(Fe,Le),We);Ab(Fe,Le)}return null}function Ze(Fe,Le,We,At){var pn=Le!==null?Le.key:null;if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return pn!==null?null:ce(Fe,Le,""+We,At);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case d:return We.key===pn?we(Fe,Le,We,At):null;case A:return We.key===pn?Xe(Fe,Le,We,At):null;case U:return pn=We._init,We=pn(We._payload),Ze(Fe,Le,We,At)}if(K(We)||W(We))return pn!==null?null:ut(Fe,Le,We,At,null);if(typeof We.then=="function")return Ze(Fe,Le,pb(We),At);if(We.$$typeof===P)return Ze(Fe,Le,NA(Fe,We),At);Ab(Fe,We)}return null}function Ke(Fe,Le,We,At,pn){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return Fe=Fe.get(We)||null,ce(Le,Fe,""+At,pn);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case d:return Fe=Fe.get(At.key===null?We:At.key)||null,we(Le,Fe,At,pn);case A:return Fe=Fe.get(At.key===null?We:At.key)||null,Xe(Le,Fe,At,pn);case U:var yi=At._init;return At=yi(At._payload),Ke(Fe,Le,We,At,pn)}if(K(At)||W(At))return Fe=Fe.get(We)||null,ut(Le,Fe,At,pn,null);if(typeof At.then=="function")return Ke(Fe,Le,We,pb(At),pn);if(At.$$typeof===P)return Ke(Fe,Le,We,NA(Le,At),pn);Ab(Le,At)}return null}function Wn(Fe,Le,We,At){for(var pn=null,yi=null,Sn=Le,Vn=Le=0,Qs=null;Sn!==null&&Vn<We.length;Vn++){Sn.index>Vn?(Qs=Sn,Sn=null):Qs=Sn.sibling;var Vi=Ze(Fe,Sn,We[Vn],At);if(Vi===null){Sn===null&&(Sn=Qs);break}f&&Sn&&Vi.alternate===null&&p(Fe,Sn),Le=H(Vi,Le,Vn),yi===null?pn=Vi:yi.sibling=Vi,yi=Vi,Sn=Qs}if(Vn===We.length)return b(Fe,Sn),Bi&&yl(Fe,Vn),pn;if(Sn===null){for(;Vn<We.length;Vn++)Sn=xt(Fe,We[Vn],At),Sn!==null&&(Le=H(Sn,Le,Vn),yi===null?pn=Sn:yi.sibling=Sn,yi=Sn);return Bi&&yl(Fe,Vn),pn}for(Sn=E(Sn);Vn<We.length;Vn++)Qs=Ke(Sn,Fe,Vn,We[Vn],At),Qs!==null&&(f&&Qs.alternate!==null&&Sn.delete(Qs.key===null?Vn:Qs.key),Le=H(Qs,Le,Vn),yi===null?pn=Qs:yi.sibling=Qs,yi=Qs);return f&&Sn.forEach(function(Cf){return p(Fe,Cf)}),Bi&&yl(Fe,Vn),pn}function Bn(Fe,Le,We,At){if(We==null)throw Error(n(151));for(var pn=null,yi=null,Sn=Le,Vn=Le=0,Qs=null,Vi=We.next();Sn!==null&&!Vi.done;Vn++,Vi=We.next()){Sn.index>Vn?(Qs=Sn,Sn=null):Qs=Sn.sibling;var Cf=Ze(Fe,Sn,Vi.value,At);if(Cf===null){Sn===null&&(Sn=Qs);break}f&&Sn&&Cf.alternate===null&&p(Fe,Sn),Le=H(Cf,Le,Vn),yi===null?pn=Cf:yi.sibling=Cf,yi=Cf,Sn=Qs}if(Vi.done)return b(Fe,Sn),Bi&&yl(Fe,Vn),pn;if(Sn===null){for(;!Vi.done;Vn++,Vi=We.next())Vi=xt(Fe,Vi.value,At),Vi!==null&&(Le=H(Vi,Le,Vn),yi===null?pn=Vi:yi.sibling=Vi,yi=Vi);return Bi&&yl(Fe,Vn),pn}for(Sn=E(Sn);!Vi.done;Vn++,Vi=We.next())Vi=Ke(Sn,Fe,Vn,Vi.value,At),Vi!==null&&(f&&Vi.alternate!==null&&Sn.delete(Vi.key===null?Vn:Vi.key),Le=H(Vi,Le,Vn),yi===null?pn=Vi:yi.sibling=Vi,yi=Vi);return f&&Sn.forEach(function(xQ){return p(Fe,xQ)}),Bi&&yl(Fe,Vn),pn}function hr(Fe,Le,We,At){if(typeof We=="object"&&We!==null&&We.type===x&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case d:e:{for(var pn=We.key;Le!==null;){if(Le.key===pn){if(pn=We.type,pn===x){if(Le.tag===7){b(Fe,Le.sibling),At=I(Le,We.props.children),At.return=Fe,Fe=At;break e}}else if(Le.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===U&&JN(pn)===Le.type){b(Fe,Le.sibling),At=I(Le,We.props),iv(At,We),At.return=Fe,Fe=At;break e}b(Fe,Le);break}else p(Fe,Le);Le=Le.sibling}We.type===x?(At=ec(We.props.children,Fe.mode,At,We.key),At.return=Fe,Fe=At):(At=Io(We.type,We.key,We.props,null,Fe.mode,At),iv(At,We),At.return=Fe,Fe=At)}return te(Fe);case A:e:{for(pn=We.key;Le!==null;){if(Le.key===pn)if(Le.tag===4&&Le.stateNode.containerInfo===We.containerInfo&&Le.stateNode.implementation===We.implementation){b(Fe,Le.sibling),At=I(Le,We.children||[]),At.return=Fe,Fe=At;break e}else{b(Fe,Le);break}else p(Fe,Le);Le=Le.sibling}At=of(We,Fe.mode,At),At.return=Fe,Fe=At}return te(Fe);case U:return pn=We._init,We=pn(We._payload),hr(Fe,Le,We,At)}if(K(We))return Wn(Fe,Le,We,At);if(W(We)){if(pn=W(We),typeof pn!="function")throw Error(n(150));return We=pn.call(We),Bn(Fe,Le,We,At)}if(typeof We.then=="function")return hr(Fe,Le,pb(We),At);if(We.$$typeof===P)return hr(Fe,Le,NA(Fe,We),At);Ab(Fe,We)}return typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint"?(We=""+We,Le!==null&&Le.tag===6?(b(Fe,Le.sibling),At=I(Le,We),At.return=Fe,Fe=At):(b(Fe,Le),At=jm(We,Fe.mode,At),At.return=Fe,Fe=At),te(Fe)):b(Fe,Le)}return function(Fe,Le,We,At){try{nv=0;var pn=hr(Fe,Le,We,At);return IA=null,pn}catch(Sn){if(Sn===qc||Sn===Sl)throw Sn;var yi=Va(29,Sn,null,Fe.mode);return yi.lanes=At,yi.return=Fe,yi}finally{}}}var BA=eL(!0),tL=eL(!1),Tl=he(null),Wc=null;function df(f){var p=f.alternate;Pe(ks,ks.current&1),Pe(Tl,f),Wc===null&&(p===null||je.current!==null||p.memoizedState!==null)&&(Wc=f)}function nL(f){if(f.tag===22){if(Pe(ks,ks.current),Pe(Tl,f),Wc===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(Wc=f)}}else pf()}function pf(){Pe(ks,ks.current),Pe(Tl,Tl.current)}function nh(f){Te(Tl),Wc===f&&(Wc=null),Te(ks)}var ks=he(0);function gb(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||dM(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function S3(f,p,b,E){p=f.memoizedState,b=b(E,p),b=b==null?p:u({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var T3={enqueueSetState:function(f,p,b){f=f._reactInternals;var E=Go(),I=G(E);I.payload=p,b!=null&&(I.callback=b),p=q(f,I,E),p!==null&&(Vo(p,f,E),Q(p,f,E))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var E=Go(),I=G(E);I.tag=1,I.payload=p,b!=null&&(I.callback=b),p=q(f,I,E),p!==null&&(Vo(p,f,E),Q(p,f,E))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=Go(),E=G(b);E.tag=2,p!=null&&(E.callback=p),p=q(f,E,b),p!==null&&(Vo(p,f,b),Q(p,f,b))}};function iL(f,p,b,E,I,H,te){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,H,te):p.prototype&&p.prototype.isPureReactComponent?!ml(b,E)||!ml(I,H):!0}function rL(f,p,b,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==f&&T3.enqueueReplaceState(p,p.state,null)}function Bd(f,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(f=f.defaultProps){b===p&&(b=u({},b));for(var I in f)b[I]===void 0&&(b[I]=f[I])}return b}var mb=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function sL(f){mb(f)}function aL(f){console.error(f)}function oL(f){mb(f)}function vb(f,p){try{var b=f.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function lL(f,p,b){try{var E=f.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function M3(f,p,b){return b=G(b),b.tag=3,b.payload={element:null},b.callback=function(){vb(f,p)},b}function cL(f){return f=G(f),f.tag=3,f}function uL(f,p,b,E){var I=b.type.getDerivedStateFromError;if(typeof I=="function"){var H=E.value;f.payload=function(){return I(H)},f.callback=function(){lL(p,b,E)}}var te=b.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(f.callback=function(){lL(p,b,E),typeof I!="function"&&(xf===null?xf=new Set([this]):xf.add(this));var ce=E.stack;this.componentDidCatch(E.value,{componentStack:ce!==null?ce:""})})}function x$(f,p,b,E,I){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&cf(p,b,I,!0),b=Tl.current,b!==null){switch(b.tag){case 13:return Wc===null?Q3():b.alternate===null&&Jr===0&&(Jr=3),b.flags&=-257,b.flags|=65536,b.lanes=I,E===DA?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),K3(f,E,I)),!1;case 22:return b.flags|=65536,E===DA?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),K3(f,E,I)),!1}throw Error(n(435,b.tag))}return K3(f,E,I),Q3(),!1}if(Bi)return p=Tl.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,E!==Qm&&(f=Error(n(422),{cause:E}),nc(so(f,b)))):(E!==Qm&&(p=Error(n(423),{cause:E}),nc(so(p,b))),f=f.current.alternate,f.flags|=65536,I&=-I,f.lanes|=I,E=so(E,b),I=M3(f.stateNode,E,I),le(f,I),Jr!==4&&(Jr=2)),!1;var H=Error(n(520),{cause:E});if(H=so(H,b),uv===null?uv=[H]:uv.push(H),Jr!==4&&(Jr=2),p===null)return!0;E=so(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,f=I&-I,b.lanes|=f,f=M3(b.stateNode,E,f),le(b,f),!1;case 1:if(p=b.type,H=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(xf===null||!xf.has(H))))return b.flags|=65536,I&=-I,b.lanes|=I,I=cL(I),uL(I,f,b,E),le(b,I),!1}b=b.return}while(b!==null);return!1}var hL=Error(n(461)),Ys=!1;function ca(f,p,b,E){p.child=f===null?tL(p,null,b,E):BA(p,f.child,b,E)}function fL(f,p,b,E,I){b=b.render;var H=p.ref;if("ref"in E){var te={};for(var ce in E)ce!=="ref"&&(te[ce]=E[ce])}else te=E;return Zu(p),E=kA(f,p,b,te,H,I),ce=u3(),f!==null&&!Ys?(h3(f,p,I),ih(f,p,I)):(Bi&&ce&&Ym(p),p.flags|=1,ca(f,p,E,I),p.child)}function dL(f,p,b,E,I){if(f===null){var H=b.type;return typeof H=="function"&&!Wm(H)&&H.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=H,pL(f,p,H,E,I)):(f=Io(b.type,null,E,p,p.mode,I),f.ref=p.ref,f.return=p,p.child=f)}if(H=f.child,!k3(f,I)){var te=H.memoizedProps;if(b=b.compare,b=b!==null?b:ml,b(te,E)&&f.ref===p.ref)return ih(f,p,I)}return p.flags|=1,f=Jl(H,E),f.ref=p.ref,f.return=p,p.child=f}function pL(f,p,b,E,I){if(f!==null){var H=f.memoizedProps;if(ml(H,E)&&f.ref===p.ref)if(Ys=!1,p.pendingProps=E=H,k3(f,I))(f.flags&131072)!==0&&(Ys=!0);else return p.lanes=f.lanes,ih(f,p,I)}return E3(f,p,b,E,I)}function AL(f,p,b){var E=p.pendingProps,I=E.children,H=f!==null?f.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=H!==null?H.baseLanes|b:b,f!==null){for(I=p.child=f.child,H=0;I!==null;)H=H|I.lanes|I.childLanes,I=I.sibling;p.childLanes=H&~E}else p.childLanes=0,p.child=null;return gL(f,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&Od(p,H!==null?H.cachePool:null),H!==null?Be(p,H):Ee(),nL(p);else return p.lanes=p.childLanes=536870912,gL(f,p,H!==null?H.baseLanes|b:b,b)}else H!==null?(Od(p,H.cachePool),Be(p,H),pf(),p.memoizedState=null):(f!==null&&Od(p,null),Ee(),pf());return ca(f,p,I,b),p.child}function gL(f,p,b,E){var I=LA();return I=I===null?null:{parent:Qt._currentValue,pool:I},p.memoizedState={baseLanes:b,cachePool:I},f!==null&&Od(p,null),Ee(),nL(p),f!==null&&cf(f,p,E,!0),null}function yb(f,p){var b=p.ref;if(b===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(f===null||f.ref!==b)&&(p.flags|=4194816)}}function E3(f,p,b,E,I){return Zu(p),b=kA(f,p,b,E,void 0,I),E=u3(),f!==null&&!Ys?(h3(f,p,I),ih(f,p,I)):(Bi&&E&&Ym(p),p.flags|=1,ca(f,p,b,I),p.child)}function mL(f,p,b,E,I,H){return Zu(p),p.updateQueue=null,b=gN(p,E,b,I),AN(f),E=u3(),f!==null&&!Ys?(h3(f,p,H),ih(f,p,H)):(Bi&&E&&Ym(p),p.flags|=1,ca(f,p,b,H),p.child)}function vL(f,p,b,E,I){if(Zu(p),p.stateNode===null){var H=ju,te=b.contextType;typeof te=="object"&&te!==null&&(H=Xs(te)),H=new b(E,H),p.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=T3,p.stateNode=H,H._reactInternals=p,H=p.stateNode,H.props=E,H.state=p.memoizedState,H.refs={},N(p),te=b.contextType,H.context=typeof te=="object"&&te!==null?Xs(te):ju,H.state=p.memoizedState,te=b.getDerivedStateFromProps,typeof te=="function"&&(S3(p,b,te,E),H.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(te=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),te!==H.state&&T3.enqueueReplaceState(H,H.state,null),me(p,E,H,I),ge(),H.state=p.memoizedState),typeof H.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(f===null){H=p.stateNode;var ce=p.memoizedProps,we=Bd(b,ce);H.props=we;var Xe=H.context,ut=b.contextType;te=ju,typeof ut=="object"&&ut!==null&&(te=Xs(ut));var xt=b.getDerivedStateFromProps;ut=typeof xt=="function"||typeof H.getSnapshotBeforeUpdate=="function",ce=p.pendingProps!==ce,ut||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ce||Xe!==te)&&rL(p,H,E,te),R=!1;var Ze=p.memoizedState;H.state=Ze,me(p,E,H,I),ge(),Xe=p.memoizedState,ce||Ze!==Xe||R?(typeof xt=="function"&&(S3(p,b,xt,E),Xe=p.memoizedState),(we=R||iL(p,b,we,E,Ze,Xe,te))?(ut||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(p.flags|=4194308)):(typeof H.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Xe),H.props=E,H.state=Xe,H.context=te,E=we):(typeof H.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{H=p.stateNode,O(f,p),te=p.memoizedProps,ut=Bd(b,te),H.props=ut,xt=p.pendingProps,Ze=H.context,Xe=b.contextType,we=ju,typeof Xe=="object"&&Xe!==null&&(we=Xs(Xe)),ce=b.getDerivedStateFromProps,(Xe=typeof ce=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(te!==xt||Ze!==we)&&rL(p,H,E,we),R=!1,Ze=p.memoizedState,H.state=Ze,me(p,E,H,I),ge();var Ke=p.memoizedState;te!==xt||Ze!==Ke||R||f!==null&&f.dependencies!==null&&PA(f.dependencies)?(typeof ce=="function"&&(S3(p,b,ce,E),Ke=p.memoizedState),(ut=R||iL(p,b,ut,E,Ze,Ke,we)||f!==null&&f.dependencies!==null&&PA(f.dependencies))?(Xe||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(E,Ke,we),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(E,Ke,we)),typeof H.componentDidUpdate=="function"&&(p.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof H.componentDidUpdate!="function"||te===f.memoizedProps&&Ze===f.memoizedState||(p.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||te===f.memoizedProps&&Ze===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=Ke),H.props=E,H.state=Ke,H.context=we,E=ut):(typeof H.componentDidUpdate!="function"||te===f.memoizedProps&&Ze===f.memoizedState||(p.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||te===f.memoizedProps&&Ze===f.memoizedState||(p.flags|=1024),E=!1)}return H=E,yb(f,p),E=(p.flags&128)!==0,H||E?(H=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:H.render(),p.flags|=1,f!==null&&E?(p.child=BA(p,f.child,null,I),p.child=BA(p,null,b,I)):ca(f,p,b,I),p.memoizedState=H.state,f=p.child):f=ih(f,p,I),f}function yL(f,p,b,E){return kd(),p.flags|=256,ca(f,p,b,E),p.child}var C3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function R3(f){return{baseLanes:f,cachePool:Id()}}function P3(f,p,b){return f=f!==null?f.childLanes&~b:0,p&&(f|=Ml),f}function xL(f,p,b){var E=p.pendingProps,I=!1,H=(p.flags&128)!==0,te;if((te=H)||(te=f!==null&&f.memoizedState===null?!1:(ks.current&2)!==0),te&&(I=!0,p.flags&=-129),te=(p.flags&32)!==0,p.flags&=-33,f===null){if(Bi){if(I?df(p):pf(),Bi){var ce=Br,we;if(we=ce){e:{for(we=ce,ce=xl;we.nodeType!==8;){if(!ce){ce=null;break e}if(we=oc(we.nextSibling),we===null){ce=null;break e}}ce=we}ce!==null?(p.memoizedState={dehydrated:ce,treeContext:tc!==null?{id:Bo,overflow:vl}:null,retryLane:536870912,hydrationErrors:null},we=Va(18,null,null,0),we.stateNode=ce,we.return=p,p.child=we,la=p,Br=null,we=!0):we=!1}we||$u(p)}if(ce=p.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return dM(ce)?p.lanes=32:p.lanes=536870912,null;nh(p)}return ce=E.children,E=E.fallback,I?(pf(),I=p.mode,ce=xb({mode:"hidden",children:ce},I),E=ec(E,I,b,null),ce.return=p,E.return=p,ce.sibling=E,p.child=ce,I=p.child,I.memoizedState=R3(b),I.childLanes=P3(f,te,b),p.memoizedState=C3,E):(df(p),N3(p,ce))}if(we=f.memoizedState,we!==null&&(ce=we.dehydrated,ce!==null)){if(H)p.flags&256?(df(p),p.flags&=-257,p=L3(f,p,b)):p.memoizedState!==null?(pf(),p.child=f.child,p.flags|=128,p=null):(pf(),I=E.fallback,ce=p.mode,E=xb({mode:"visible",children:E.children},ce),I=ec(I,ce,b,null),I.flags|=2,E.return=p,I.return=p,E.sibling=I,p.child=E,BA(p,f.child,null,b),E=p.child,E.memoizedState=R3(b),E.childLanes=P3(f,te,b),p.memoizedState=C3,p=I);else if(df(p),dM(ce)){if(te=ce.nextSibling&&ce.nextSibling.dataset,te)var Xe=te.dgst;te=Xe,E=Error(n(419)),E.stack="",E.digest=te,nc({value:E,source:null,stack:null}),p=L3(f,p,b)}else if(Ys||cf(f,p,b,!1),te=(b&f.childLanes)!==0,Ys||te){if(te=Tr,te!==null&&(E=b&-b,E=(E&42)!==0?1:Ln(E),E=(E&(te.suspendedLanes|b))!==0?0:E,E!==0&&E!==we.retryLane))throw we.retryLane=E,af(f,E),Vo(te,f,E),hL;ce.data==="$?"||Q3(),p=L3(f,p,b)}else ce.data==="$?"?(p.flags|=192,p.child=f.child,p=null):(f=we.treeContext,Br=oc(ce.nextSibling),la=p,Bi=!0,Yu=null,xl=!1,f!==null&&(Ha[js++]=Bo,Ha[js++]=vl,Ha[js++]=tc,Bo=f.id,vl=f.overflow,tc=p),p=N3(p,E.children),p.flags|=4096);return p}return I?(pf(),I=E.fallback,ce=p.mode,we=f.child,Xe=we.sibling,E=Jl(we,{mode:"hidden",children:E.children}),E.subtreeFlags=we.subtreeFlags&65011712,Xe!==null?I=Jl(Xe,I):(I=ec(I,ce,b,null),I.flags|=2),I.return=p,E.return=p,E.sibling=I,p.child=E,E=I,I=p.child,ce=f.child.memoizedState,ce===null?ce=R3(b):(we=ce.cachePool,we!==null?(Xe=Qt._currentValue,we=we.parent!==Xe?{parent:Xe,pool:Xe}:we):we=Id(),ce={baseLanes:ce.baseLanes|b,cachePool:we}),I.memoizedState=ce,I.childLanes=P3(f,te,b),p.memoizedState=C3,E):(df(p),b=f.child,f=b.sibling,b=Jl(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,f!==null&&(te=p.deletions,te===null?(p.deletions=[f],p.flags|=16):te.push(f)),p.child=b,p.memoizedState=null,b)}function N3(f,p){return p=xb({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function xb(f,p){return f=Va(22,f,null,p),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function L3(f,p,b){return BA(p,f.child,null,b),f=N3(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function bL(f,p,b){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),CA(f.return,p,b)}function D3(f,p,b,E,I){var H=f.memoizedState;H===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:I}:(H.isBackwards=p,H.rendering=null,H.renderingStartTime=0,H.last=E,H.tail=b,H.tailMode=I)}function _L(f,p,b){var E=p.pendingProps,I=E.revealOrder,H=E.tail;if(ca(f,p,E.children,b),E=ks.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&bL(f,b,p);else if(f.tag===19)bL(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}switch(Pe(ks,E),I){case"forwards":for(b=p.child,I=null;b!==null;)f=b.alternate,f!==null&&gb(f)===null&&(I=b),b=b.sibling;b=I,b===null?(I=p.child,p.child=null):(I=b.sibling,b.sibling=null),D3(p,!1,I,b,H);break;case"backwards":for(b=null,I=p.child,p.child=null;I!==null;){if(f=I.alternate,f!==null&&gb(f)===null){p.child=I;break}f=I.sibling,I.sibling=b,b=I,I=f}D3(p,!0,b,null,H);break;case"together":D3(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ih(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),yf|=p.lanes,(b&p.childLanes)===0)if(f!==null){if(cf(f,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(n(153));if(p.child!==null){for(f=p.child,b=Jl(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=Jl(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function k3(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&PA(f)))}function b$(f,p,b){switch(p.tag){case 3:Je(p,p.stateNode.containerInfo),Hc(p,Qt,f.memoizedState.cache),kd();break;case 27:case 5:pt(p);break;case 4:Je(p,p.stateNode.containerInfo);break;case 10:Hc(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(df(p),p.flags|=128,null):(b&p.child.childLanes)!==0?xL(f,p,b):(df(p),f=ih(f,p,b),f!==null?f.sibling:null);df(p);break;case 19:var I=(f.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(cf(f,p,b,!1),E=(b&p.childLanes)!==0),I){if(E)return _L(f,p,b);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Pe(ks,ks.current),E)break;return null;case 22:case 23:return p.lanes=0,AL(f,p,b);case 24:Hc(p,Qt,f.memoizedState.cache)}return ih(f,p,b)}function wL(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps)Ys=!0;else{if(!k3(f,b)&&(p.flags&128)===0)return Ys=!1,b$(f,p,b);Ys=(f.flags&131072)!==0}else Ys=!1,Bi&&(p.flags&1048576)!==0&&Xm(p,Vc,p.index);switch(p.lanes=0,p.tag){case 16:e:{f=p.pendingProps;var E=p.elementType,I=E._init;if(E=I(E._payload),p.type=E,typeof E=="function")Wm(E)?(f=Bd(E,f),p.tag=1,p=vL(null,p,E,f,b)):(p.tag=0,p=E3(null,p,E,f,b));else{if(E!=null){if(I=E.$$typeof,I===L){p.tag=11,p=fL(null,p,E,f,b);break e}else if(I===k){p.tag=14,p=dL(null,p,E,f,b);break e}}throw p=J(E)||E,Error(n(306,p,""))}}return p;case 0:return E3(f,p,p.type,p.pendingProps,b);case 1:return E=p.type,I=Bd(E,p.pendingProps),vL(f,p,E,I,b);case 3:e:{if(Je(p,p.stateNode.containerInfo),f===null)throw Error(n(387));E=p.pendingProps;var H=p.memoizedState;I=H.element,O(f,p),me(p,E,null,b);var te=p.memoizedState;if(E=te.cache,Hc(p,Qt,E),E!==H.cache&&RA(p,[Qt],b,!0),ge(),E=te.element,H.isDehydrated)if(H={element:E,isDehydrated:!1,cache:te.cache},p.updateQueue.baseState=H,p.memoizedState=H,p.flags&256){p=yL(f,p,E,b);break e}else if(E!==I){I=so(Error(n(424)),p),nc(I),p=yL(f,p,E,b);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Br=oc(f.firstChild),la=p,Bi=!0,Yu=null,xl=!0,b=tL(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(kd(),E===I){p=ih(f,p,b);break e}ca(f,p,E,b)}p=p.child}return p;case 26:return yb(f,p),f===null?(b=ED(p.type,null,p.pendingProps,null))?p.memoizedState=b:Bi||(b=p.type,f=p.pendingProps,E=kb(Ve.current).createElement(b),E[qe]=p,E[st]=f,ha(E,b,f),hn(E),p.stateNode=E):p.memoizedState=ED(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return pt(p),f===null&&Bi&&(E=p.stateNode=SD(p.type,p.pendingProps,Ve.current),la=p,xl=!0,I=Br,wf(p.type)?(pM=I,Br=oc(E.firstChild)):Br=I),ca(f,p,p.pendingProps.children,b),yb(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Bi&&((I=E=Br)&&(E=$$(E,p.type,p.pendingProps,xl),E!==null?(p.stateNode=E,la=p,Br=oc(E.firstChild),xl=!1,I=!0):I=!1),I||$u(p)),pt(p),I=p.type,H=p.pendingProps,te=f!==null?f.memoizedProps:null,E=H.children,uM(I,H)?E=null:te!==null&&uM(I,te)&&(p.flags|=32),p.memoizedState!==null&&(I=kA(f,p,d$,null,null,b),yv._currentValue=I),yb(f,p),ca(f,p,E,b),p.child;case 6:return f===null&&Bi&&((f=b=Br)&&(b=Q$(b,p.pendingProps,xl),b!==null?(p.stateNode=b,la=p,Br=null,f=!0):f=!1),f||$u(p)),null;case 13:return xL(f,p,b);case 4:return Je(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=BA(p,null,E,b):ca(f,p,E,b),p.child;case 11:return fL(f,p,p.type,p.pendingProps,b);case 7:return ca(f,p,p.pendingProps,b),p.child;case 8:return ca(f,p,p.pendingProps.children,b),p.child;case 12:return ca(f,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,Hc(p,p.type,E.value),ca(f,p,E.children,b),p.child;case 9:return I=p.type._context,E=p.pendingProps.children,Zu(p),I=Xs(I),E=E(I),p.flags|=1,ca(f,p,E,b),p.child;case 14:return dL(f,p,p.type,p.pendingProps,b);case 15:return pL(f,p,p.type,p.pendingProps,b);case 19:return _L(f,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},f===null?(b=xb(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=Jl(f.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return AL(f,p,b);case 24:return Zu(p),E=Xs(Qt),f===null?(I=LA(),I===null&&(I=Tr,H=fs(),I.pooledCache=H,H.refCount++,H!==null&&(I.pooledCacheLanes|=b),I=H),p.memoizedState={parent:E,cache:I},N(p),Hc(p,Qt,I)):((f.lanes&b)!==0&&(O(f,p),me(p,null,null,b),ge()),I=f.memoizedState,H=p.memoizedState,I.parent!==E?(I={parent:E,cache:E},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),Hc(p,Qt,E)):(E=H.cache,Hc(p,Qt,E),E!==I.cache&&RA(p,[Qt],b,!0))),ca(f,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function rh(f){f.flags|=4}function SL(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!LD(p)){if(p=Tl.current,p!==null&&((Li&4194048)===Li?Wc!==null:(Li&62914560)!==Li&&(Li&536870912)===0||p!==Wc))throw y=DA,eh;f.flags|=8192}}function bb(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?Ht():536870912,f.lanes|=p,GA|=p)}function rv(f,p){if(!Bi)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Wr(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,E=0;if(p)for(var I=f.child;I!==null;)b|=I.lanes|I.childLanes,E|=I.subtreeFlags&65011712,E|=I.flags&65011712,I.return=f,I=I.sibling;else for(I=f.child;I!==null;)b|=I.lanes|I.childLanes,E|=I.subtreeFlags,E|=I.flags,I.return=f,I=I.sibling;return f.subtreeFlags|=E,f.childLanes=b,p}function _$(f,p,b){var E=p.pendingProps;switch($m(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(p),null;case 1:return Wr(p),null;case 3:return b=p.stateNode,E=null,f!==null&&(E=f.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),bl(Qt),vt(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(Sr(p)?rh(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ab())),Wr(p),null;case 26:return b=p.memoizedState,f===null?(rh(p),b!==null?(Wr(p),SL(p,b)):(Wr(p),p.flags&=-16777217)):b?b!==f.memoizedState?(rh(p),Wr(p),SL(p,b)):(Wr(p),p.flags&=-16777217):(f.memoizedProps!==E&&rh(p),Wr(p),p.flags&=-16777217),null;case 27:Vt(p),b=Ve.current;var I=p.type;if(f!==null&&p.stateNode!=null)f.memoizedProps!==E&&rh(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return Wr(p),null}f=_e.current,Sr(p)?Zm(p):(f=SD(I,E,b),p.stateNode=f,rh(p))}return Wr(p),null;case 5:if(Vt(p),b=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&rh(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return Wr(p),null}if(f=_e.current,Sr(p))Zm(p);else{switch(I=kb(Ve.current),f){case 1:f=I.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:f=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":f=I.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":f=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":f=I.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof E.is=="string"?I.createElement("select",{is:E.is}):I.createElement("select"),E.multiple?f.multiple=!0:E.size&&(f.size=E.size);break;default:f=typeof E.is=="string"?I.createElement(b,{is:E.is}):I.createElement(b)}}f[qe]=p,f[st]=E;e:for(I=p.child;I!==null;){if(I.tag===5||I.tag===6)f.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===p)break e;for(;I.sibling===null;){if(I.return===null||I.return===p)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}p.stateNode=f;e:switch(ha(f,b,E),b){case"button":case"input":case"select":case"textarea":f=!!E.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&rh(p)}}return Wr(p),p.flags&=-16777217,null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==E&&rh(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(n(166));if(f=Ve.current,Sr(p)){if(f=p.stateNode,b=p.memoizedProps,E=null,I=la,I!==null)switch(I.tag){case 27:case 5:E=I.memoizedProps}f[qe]=p,f=!!(f.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||mD(f.nodeValue,b)),f||$u(p)}else f=kb(f).createTextNode(E),f[qe]=p,p.stateNode=f}return Wr(p),null;case 13:if(E=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(I=Sr(p),E!==null&&E.dehydrated!==null){if(f===null){if(!I)throw Error(n(318));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(n(317));I[qe]=p}else kd(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Wr(p),I=!1}else I=ab(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=I),I=!0;if(!I)return p.flags&256?(nh(p),p):(nh(p),null)}if(nh(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,f=f!==null&&f.memoizedState!==null,b){E=p.child,I=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(I=E.alternate.memoizedState.cachePool.pool);var H=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(H=E.memoizedState.cachePool.pool),H!==I&&(E.flags|=2048)}return b!==f&&b&&(p.child.flags|=8192),bb(p,p.updateQueue),Wr(p),null;case 4:return vt(),f===null&&sM(p.stateNode.containerInfo),Wr(p),null;case 10:return bl(p.type),Wr(p),null;case 19:if(Te(ks),I=p.memoizedState,I===null)return Wr(p),null;if(E=(p.flags&128)!==0,H=I.rendering,H===null)if(E)rv(I,!1);else{if(Jr!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(H=gb(f),H!==null){for(p.flags|=128,rv(I,!1),f=H.updateQueue,p.updateQueue=f,bb(p,f),p.subtreeFlags=0,f=b,b=p.child;b!==null;)sb(b,f),b=b.sibling;return Pe(ks,ks.current&1|2),p.child}f=f.sibling}I.tail!==null&&Ct()>Sb&&(p.flags|=128,E=!0,rv(I,!1),p.lanes=4194304)}else{if(!E)if(f=gb(H),f!==null){if(p.flags|=128,E=!0,f=f.updateQueue,p.updateQueue=f,bb(p,f),rv(I,!0),I.tail===null&&I.tailMode==="hidden"&&!H.alternate&&!Bi)return Wr(p),null}else 2*Ct()-I.renderingStartTime>Sb&&b!==536870912&&(p.flags|=128,E=!0,rv(I,!1),p.lanes=4194304);I.isBackwards?(H.sibling=p.child,p.child=H):(f=I.last,f!==null?f.sibling=H:p.child=H,I.last=H)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=Ct(),p.sibling=null,f=ks.current,Pe(ks,E?f&1|2:f&1),p):(Wr(p),null);case 22:case 23:return nh(p),Nt(),E=p.memoizedState!==null,f!==null?f.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(Wr(p),p.subtreeFlags&6&&(p.flags|=8192)):Wr(p),b=p.updateQueue,b!==null&&bb(p,b.retryQueue),b=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),f!==null&&Te(Pt),null;case 24:return b=null,f!==null&&(b=f.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),bl(Qt),Wr(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function w$(f,p){switch($m(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return bl(Qt),vt(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return Vt(p),null;case 13:if(nh(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(n(340));kd()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return Te(ks),null;case 4:return vt(),null;case 10:return bl(p.type),null;case 22:case 23:return nh(p),Nt(),f!==null&&Te(Pt),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return bl(Qt),null;case 25:return null;default:return null}}function TL(f,p){switch($m(p),p.tag){case 3:bl(Qt),vt();break;case 26:case 27:case 5:Vt(p);break;case 4:vt();break;case 13:nh(p);break;case 19:Te(ks);break;case 10:bl(p.type);break;case 22:case 23:nh(p),Nt(),f!==null&&Te(Pt);break;case 24:bl(Qt)}}function sv(f,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var I=E.next;b=I;do{if((b.tag&f)===f){E=void 0;var H=b.create,te=b.inst;E=H(),te.destroy=E}b=b.next}while(b!==I)}}catch(ce){yr(p,p.return,ce)}}function Af(f,p,b){try{var E=p.updateQueue,I=E!==null?E.lastEffect:null;if(I!==null){var H=I.next;E=H;do{if((E.tag&f)===f){var te=E.inst,ce=te.destroy;if(ce!==void 0){te.destroy=void 0,I=p;var we=b,Xe=ce;try{Xe()}catch(ut){yr(I,we,ut)}}}E=E.next}while(E!==H)}}catch(ut){yr(p,p.return,ut)}}function ML(f){var p=f.updateQueue;if(p!==null){var b=f.stateNode;try{De(p,b)}catch(E){yr(f,f.return,E)}}}function EL(f,p,b){b.props=Bd(f.type,f.memoizedProps),b.state=f.memoizedState;try{b.componentWillUnmount()}catch(E){yr(f,p,E)}}function av(f,p){try{var b=f.ref;if(b!==null){switch(f.tag){case 26:case 27:case 5:var E=f.stateNode;break;case 30:E=f.stateNode;break;default:E=f.stateNode}typeof b=="function"?f.refCleanup=b(E):b.current=E}}catch(I){yr(f,p,I)}}function jc(f,p){var b=f.ref,E=f.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(I){yr(f,p,I)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(I){yr(f,p,I)}else b.current=null}function CL(f){var p=f.type,b=f.memoizedProps,E=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(I){yr(f,f.return,I)}}function O3(f,p,b){try{var E=f.stateNode;q$(E,f.type,b,p),E[st]=p}catch(I){yr(f,f.return,I)}}function RL(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&wf(f.type)||f.tag===4}function I3(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||RL(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&wf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function B3(f,p,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(f,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(f),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Db));else if(E!==4&&(E===27&&wf(f.type)&&(b=f.stateNode,p=null),f=f.child,f!==null))for(B3(f,p,b),f=f.sibling;f!==null;)B3(f,p,b),f=f.sibling}function _b(f,p,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?b.insertBefore(f,p):b.appendChild(f);else if(E!==4&&(E===27&&wf(f.type)&&(b=f.stateNode),f=f.child,f!==null))for(_b(f,p,b),f=f.sibling;f!==null;)_b(f,p,b),f=f.sibling}function PL(f){var p=f.stateNode,b=f.memoizedProps;try{for(var E=f.type,I=p.attributes;I.length;)p.removeAttributeNode(I[0]);ha(p,E,b),p[qe]=f,p[st]=b}catch(H){yr(f,f.return,H)}}var sh=!1,ds=!1,F3=!1,NL=typeof WeakSet=="function"?WeakSet:Set,$s=null;function S$(f,p){if(f=f.containerInfo,lM=zb,f=Um(f),zm(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var I=E.anchorOffset,H=E.focusNode;E=E.focusOffset;try{b.nodeType,H.nodeType}catch{b=null;break e}var te=0,ce=-1,we=-1,Xe=0,ut=0,xt=f,Ze=null;t:for(;;){for(var Ke;xt!==b||I!==0&&xt.nodeType!==3||(ce=te+I),xt!==H||E!==0&&xt.nodeType!==3||(we=te+E),xt.nodeType===3&&(te+=xt.nodeValue.length),(Ke=xt.firstChild)!==null;)Ze=xt,xt=Ke;for(;;){if(xt===f)break t;if(Ze===b&&++Xe===I&&(ce=te),Ze===H&&++ut===E&&(we=te),(Ke=xt.nextSibling)!==null)break;xt=Ze,Ze=xt.parentNode}xt=Ke}b=ce===-1||we===-1?null:{start:ce,end:we}}else b=null}b=b||{start:0,end:0}}else b=null;for(cM={focusedElem:f,selectionRange:b},zb=!1,$s=p;$s!==null;)if(p=$s,f=p.child,(p.subtreeFlags&1024)!==0&&f!==null)f.return=p,$s=f;else for(;$s!==null;){switch(p=$s,H=p.alternate,f=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&H!==null){f=void 0,b=p,I=H.memoizedProps,H=H.memoizedState,E=b.stateNode;try{var Wn=Bd(b.type,I,b.elementType===b.type);f=E.getSnapshotBeforeUpdate(Wn,H),E.__reactInternalSnapshotBeforeUpdate=f}catch(Bn){yr(b,b.return,Bn)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,b=f.nodeType,b===9)fM(f);else if(b===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":fM(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=p.sibling,f!==null){f.return=p.return,$s=f;break}$s=p.return}}function LL(f,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:gf(f,b),E&4&&sv(5,b);break;case 1:if(gf(f,b),E&4)if(f=b.stateNode,p===null)try{f.componentDidMount()}catch(te){yr(b,b.return,te)}else{var I=Bd(b.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(I,p,f.__reactInternalSnapshotBeforeUpdate)}catch(te){yr(b,b.return,te)}}E&64&&ML(b),E&512&&av(b,b.return);break;case 3:if(gf(f,b),E&64&&(f=b.updateQueue,f!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{De(f,p)}catch(te){yr(b,b.return,te)}}break;case 27:p===null&&E&4&&PL(b);case 26:case 5:gf(f,b),p===null&&E&4&&CL(b),E&512&&av(b,b.return);break;case 12:gf(f,b);break;case 13:gf(f,b),E&4&&OL(f,b),E&64&&(f=b.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(b=D$.bind(null,b),Z$(f,b))));break;case 22:if(E=b.memoizedState!==null||sh,!E){p=p!==null&&p.memoizedState!==null||ds,I=sh;var H=ds;sh=E,(ds=p)&&!H?mf(f,b,(b.subtreeFlags&8772)!==0):gf(f,b),sh=I,ds=H}break;case 30:break;default:gf(f,b)}}function DL(f){var p=f.alternate;p!==null&&(f.alternate=null,DL(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&mi(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Fr=null,uo=!1;function ah(f,p,b){for(b=b.child;b!==null;)kL(f,p,b),b=b.sibling}function kL(f,p,b){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(tt,b)}catch{}switch(b.tag){case 26:ds||jc(b,p),ah(f,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:ds||jc(b,p);var E=Fr,I=uo;wf(b.type)&&(Fr=b.stateNode,uo=!1),ah(f,p,b),Av(b.stateNode),Fr=E,uo=I;break;case 5:ds||jc(b,p);case 6:if(E=Fr,I=uo,Fr=null,ah(f,p,b),Fr=E,uo=I,Fr!==null)if(uo)try{(Fr.nodeType===9?Fr.body:Fr.nodeName==="HTML"?Fr.ownerDocument.body:Fr).removeChild(b.stateNode)}catch(H){yr(b,p,H)}else try{Fr.removeChild(b.stateNode)}catch(H){yr(b,p,H)}break;case 18:Fr!==null&&(uo?(f=Fr,_D(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,b.stateNode),wv(f)):_D(Fr,b.stateNode));break;case 4:E=Fr,I=uo,Fr=b.stateNode.containerInfo,uo=!0,ah(f,p,b),Fr=E,uo=I;break;case 0:case 11:case 14:case 15:ds||Af(2,b,p),ds||Af(4,b,p),ah(f,p,b);break;case 1:ds||(jc(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&EL(b,p,E)),ah(f,p,b);break;case 21:ah(f,p,b);break;case 22:ds=(E=ds)||b.memoizedState!==null,ah(f,p,b),ds=E;break;default:ah(f,p,b)}}function OL(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{wv(f)}catch(b){yr(p,p.return,b)}}function T$(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new NL),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new NL),p;default:throw Error(n(435,f.tag))}}function U3(f,p){var b=T$(f);p.forEach(function(E){var I=k$.bind(null,f,E);b.has(E)||(b.add(E),E.then(I,I))})}function Fo(f,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var I=b[E],H=f,te=p,ce=te;e:for(;ce!==null;){switch(ce.tag){case 27:if(wf(ce.type)){Fr=ce.stateNode,uo=!1;break e}break;case 5:Fr=ce.stateNode,uo=!1;break e;case 3:case 4:Fr=ce.stateNode.containerInfo,uo=!0;break e}ce=ce.return}if(Fr===null)throw Error(n(160));kL(H,te,I),Fr=null,uo=!1,H=I.alternate,H!==null&&(H.return=null),I.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)IL(p,f),p=p.sibling}var ac=null;function IL(f,p){var b=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Fo(p,f),Uo(f),E&4&&(Af(3,f,f.return),sv(3,f),Af(5,f,f.return));break;case 1:Fo(p,f),Uo(f),E&512&&(ds||b===null||jc(b,b.return)),E&64&&sh&&(f=f.updateQueue,f!==null&&(E=f.callbacks,E!==null&&(b=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var I=ac;if(Fo(p,f),Uo(f),E&512&&(ds||b===null||jc(b,b.return)),E&4){var H=b!==null?b.memoizedState:null;if(E=f.memoizedState,b===null)if(E===null)if(f.stateNode===null){e:{E=f.type,b=f.memoizedProps,I=I.ownerDocument||I;t:switch(E){case"title":H=I.getElementsByTagName("title")[0],(!H||H[Gn]||H[qe]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=I.createElement(E),I.head.insertBefore(H,I.querySelector("head > title"))),ha(H,E,b),H[qe]=f,hn(H),E=H;break e;case"link":var te=PD("link","href",I).get(E+(b.href||""));if(te){for(var ce=0;ce<te.length;ce++)if(H=te[ce],H.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&H.getAttribute("rel")===(b.rel==null?null:b.rel)&&H.getAttribute("title")===(b.title==null?null:b.title)&&H.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){te.splice(ce,1);break t}}H=I.createElement(E),ha(H,E,b),I.head.appendChild(H);break;case"meta":if(te=PD("meta","content",I).get(E+(b.content||""))){for(ce=0;ce<te.length;ce++)if(H=te[ce],H.getAttribute("content")===(b.content==null?null:""+b.content)&&H.getAttribute("name")===(b.name==null?null:b.name)&&H.getAttribute("property")===(b.property==null?null:b.property)&&H.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&H.getAttribute("charset")===(b.charSet==null?null:b.charSet)){te.splice(ce,1);break t}}H=I.createElement(E),ha(H,E,b),I.head.appendChild(H);break;default:throw Error(n(468,E))}H[qe]=f,hn(H),E=H}f.stateNode=E}else ND(I,f.type,f.stateNode);else f.stateNode=RD(I,E,f.memoizedProps);else H!==E?(H===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):H.count--,E===null?ND(I,f.type,f.stateNode):RD(I,E,f.memoizedProps)):E===null&&f.stateNode!==null&&O3(f,f.memoizedProps,b.memoizedProps)}break;case 27:Fo(p,f),Uo(f),E&512&&(ds||b===null||jc(b,b.return)),b!==null&&E&4&&O3(f,f.memoizedProps,b.memoizedProps);break;case 5:if(Fo(p,f),Uo(f),E&512&&(ds||b===null||jc(b,b.return)),f.flags&32){I=f.stateNode;try{pl(I,"")}catch(Ke){yr(f,f.return,Ke)}}E&4&&f.stateNode!=null&&(I=f.memoizedProps,O3(f,I,b!==null?b.memoizedProps:I)),E&1024&&(F3=!0);break;case 6:if(Fo(p,f),Uo(f),E&4){if(f.stateNode===null)throw Error(n(162));E=f.memoizedProps,b=f.stateNode;try{b.nodeValue=E}catch(Ke){yr(f,f.return,Ke)}}break;case 3:if(Bb=null,I=ac,ac=Ob(p.containerInfo),Fo(p,f),ac=I,Uo(f),E&4&&b!==null&&b.memoizedState.isDehydrated)try{wv(p.containerInfo)}catch(Ke){yr(f,f.return,Ke)}F3&&(F3=!1,BL(f));break;case 4:E=ac,ac=Ob(f.stateNode.containerInfo),Fo(p,f),Uo(f),ac=E;break;case 12:Fo(p,f),Uo(f);break;case 13:Fo(p,f),Uo(f),f.child.flags&8192&&f.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(W3=Ct()),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,U3(f,E)));break;case 22:I=f.memoizedState!==null;var we=b!==null&&b.memoizedState!==null,Xe=sh,ut=ds;if(sh=Xe||I,ds=ut||we,Fo(p,f),ds=ut,sh=Xe,Uo(f),E&8192)e:for(p=f.stateNode,p._visibility=I?p._visibility&-2:p._visibility|1,I&&(b===null||we||sh||ds||Fd(f)),b=null,p=f;;){if(p.tag===5||p.tag===26){if(b===null){we=b=p;try{if(H=we.stateNode,I)te=H.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{ce=we.stateNode;var xt=we.memoizedProps.style,Ze=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;ce.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch(Ke){yr(we,we.return,Ke)}}}else if(p.tag===6){if(b===null){we=p;try{we.stateNode.nodeValue=I?"":we.memoizedProps}catch(Ke){yr(we,we.return,Ke)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=f.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,U3(f,b))));break;case 19:Fo(p,f),Uo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,U3(f,E)));break;case 30:break;case 21:break;default:Fo(p,f),Uo(f)}}function Uo(f){var p=f.flags;if(p&2){try{for(var b,E=f.return;E!==null;){if(RL(E)){b=E;break}E=E.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var I=b.stateNode,H=I3(f);_b(f,H,I);break;case 5:var te=b.stateNode;b.flags&32&&(pl(te,""),b.flags&=-33);var ce=I3(f);_b(f,ce,te);break;case 3:case 4:var we=b.stateNode.containerInfo,Xe=I3(f);B3(f,Xe,we);break;default:throw Error(n(161))}}catch(ut){yr(f,f.return,ut)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function BL(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;BL(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function gf(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)LL(f,p.alternate,p),p=p.sibling}function Fd(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:Af(4,p,p.return),Fd(p);break;case 1:jc(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&EL(p,p.return,b),Fd(p);break;case 27:Av(p.stateNode);case 26:case 5:jc(p,p.return),Fd(p);break;case 22:p.memoizedState===null&&Fd(p);break;case 30:Fd(p);break;default:Fd(p)}f=f.sibling}}function mf(f,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,I=f,H=p,te=H.flags;switch(H.tag){case 0:case 11:case 15:mf(I,H,b),sv(4,H);break;case 1:if(mf(I,H,b),E=H,I=E.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Xe){yr(E,E.return,Xe)}if(E=H,I=E.updateQueue,I!==null){var ce=E.stateNode;try{var we=I.shared.hiddenCallbacks;if(we!==null)for(I.shared.hiddenCallbacks=null,I=0;I<we.length;I++)Me(we[I],ce)}catch(Xe){yr(E,E.return,Xe)}}b&&te&64&&ML(H),av(H,H.return);break;case 27:PL(H);case 26:case 5:mf(I,H,b),b&&E===null&&te&4&&CL(H),av(H,H.return);break;case 12:mf(I,H,b);break;case 13:mf(I,H,b),b&&te&4&&OL(I,H);break;case 22:H.memoizedState===null&&mf(I,H,b),av(H,H.return);break;case 30:break;default:mf(I,H,b)}p=p.sibling}}function z3(f,p){var b=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==b&&(f!=null&&f.refCount++,b!=null&&uf(b))}function G3(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&uf(f))}function Xc(f,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)FL(f,p,b,E),p=p.sibling}function FL(f,p,b,E){var I=p.flags;switch(p.tag){case 0:case 11:case 15:Xc(f,p,b,E),I&2048&&sv(9,p);break;case 1:Xc(f,p,b,E);break;case 3:Xc(f,p,b,E),I&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&uf(f)));break;case 12:if(I&2048){Xc(f,p,b,E),f=p.stateNode;try{var H=p.memoizedProps,te=H.id,ce=H.onPostCommit;typeof ce=="function"&&ce(te,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(we){yr(p,p.return,we)}}else Xc(f,p,b,E);break;case 13:Xc(f,p,b,E);break;case 23:break;case 22:H=p.stateNode,te=p.alternate,p.memoizedState!==null?H._visibility&2?Xc(f,p,b,E):ov(f,p):H._visibility&2?Xc(f,p,b,E):(H._visibility|=2,FA(f,p,b,E,(p.subtreeFlags&10256)!==0)),I&2048&&z3(te,p);break;case 24:Xc(f,p,b,E),I&2048&&G3(p.alternate,p);break;default:Xc(f,p,b,E)}}function FA(f,p,b,E,I){for(I=I&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var H=f,te=p,ce=b,we=E,Xe=te.flags;switch(te.tag){case 0:case 11:case 15:FA(H,te,ce,we,I),sv(8,te);break;case 23:break;case 22:var ut=te.stateNode;te.memoizedState!==null?ut._visibility&2?FA(H,te,ce,we,I):ov(H,te):(ut._visibility|=2,FA(H,te,ce,we,I)),I&&Xe&2048&&z3(te.alternate,te);break;case 24:FA(H,te,ce,we,I),I&&Xe&2048&&G3(te.alternate,te);break;default:FA(H,te,ce,we,I)}p=p.sibling}}function ov(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=f,E=p,I=E.flags;switch(E.tag){case 22:ov(b,E),I&2048&&z3(E.alternate,E);break;case 24:ov(b,E),I&2048&&G3(E.alternate,E);break;default:ov(b,E)}p=p.sibling}}var lv=8192;function UA(f){if(f.subtreeFlags&lv)for(f=f.child;f!==null;)UL(f),f=f.sibling}function UL(f){switch(f.tag){case 26:UA(f),f.flags&lv&&f.memoizedState!==null&&uQ(ac,f.memoizedState,f.memoizedProps);break;case 5:UA(f);break;case 3:case 4:var p=ac;ac=Ob(f.stateNode.containerInfo),UA(f),ac=p;break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=lv,lv=16777216,UA(f),lv=p):UA(f));break;default:UA(f)}}function zL(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function cv(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];$s=E,VL(E,f)}zL(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)GL(f),f=f.sibling}function GL(f){switch(f.tag){case 0:case 11:case 15:cv(f),f.flags&2048&&Af(9,f,f.return);break;case 3:cv(f);break;case 12:cv(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,wb(f)):cv(f);break;default:cv(f)}}function wb(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];$s=E,VL(E,f)}zL(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:Af(8,p,p.return),wb(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,wb(p));break;default:wb(p)}f=f.sibling}}function VL(f,p){for(;$s!==null;){var b=$s;switch(b.tag){case 0:case 11:case 15:Af(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:uf(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,$s=E;else e:for(b=f;$s!==null;){E=$s;var I=E.sibling,H=E.return;if(DL(E),E===b){$s=null;break e}if(I!==null){I.return=H,$s=I;break e}$s=H}}}var M$={getCacheForType:function(f){var p=Xs(Qt),b=p.data.get(f);return b===void 0&&(b=f(),p.data.set(f,b)),b}},E$=typeof WeakMap=="function"?WeakMap:Map,nr=0,Tr=null,Si=null,Li=0,ir=0,zo=null,vf=!1,zA=!1,V3=!1,oh=0,Jr=0,yf=0,Ud=0,H3=0,Ml=0,GA=0,uv=null,ho=null,q3=!1,W3=0,Sb=1/0,Tb=null,xf=null,ua=0,bf=null,VA=null,HA=0,j3=0,X3=null,HL=null,hv=0,Y3=null;function Go(){if((nr&2)!==0&&Li!==0)return Li&-Li;if(Y.T!==null){var f=hf;return f!==0?f:tM()}return fi()}function qL(){Ml===0&&(Ml=(Li&536870912)===0||Bi?Ae():536870912);var f=Tl.current;return f!==null&&(f.flags|=32),Ml}function Vo(f,p,b){(f===Tr&&(ir===2||ir===9)||f.cancelPendingCommit!==null)&&(qA(f,0),_f(f,Li,Ml,!1)),en(f,b),((nr&2)===0||f!==Tr)&&(f===Tr&&((nr&2)===0&&(Ud|=b),Jr===4&&_f(f,Li,Ml,!1)),Yc(f))}function WL(f,p,b){if((nr&6)!==0)throw Error(n(327));var E=!b&&(p&124)===0&&(p&f.expiredLanes)===0||zt(f,p),I=E?P$(f,p):Z3(f,p,!0),H=E;do{if(I===0){zA&&!E&&_f(f,p,0,!1);break}else{if(b=f.current.alternate,H&&!C$(b)){I=Z3(f,p,!1),H=!1;continue}if(I===2){if(H=p,f.errorRecoveryDisabledLanes&H)var te=0;else te=f.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){p=te;e:{var ce=f;I=uv;var we=ce.current.memoizedState.isDehydrated;if(we&&(qA(ce,te).flags|=256),te=Z3(ce,te,!1),te!==2){if(V3&&!we){ce.errorRecoveryDisabledLanes|=H,Ud|=H,I=4;break e}H=ho,ho=I,H!==null&&(ho===null?ho=H:ho.push.apply(ho,H))}I=te}if(H=!1,I!==2)continue}}if(I===1){qA(f,0),_f(f,p,0,!0);break}e:{switch(E=f,H=I,H){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:_f(E,p,Ml,!vf);break e;case 2:ho=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(I=W3+300-Ct(),10<I)){if(_f(E,p,Ml,!vf),mn(E,0,!0)!==0)break e;E.timeoutHandle=xD(jL.bind(null,E,b,ho,Tb,q3,p,Ml,Ud,GA,vf,H,2,-0,0),I);break e}jL(E,b,ho,Tb,q3,p,Ml,Ud,GA,vf,H,0,-0,0)}}break}while(!0);Yc(f)}function jL(f,p,b,E,I,H,te,ce,we,Xe,ut,xt,Ze,Ke){if(f.timeoutHandle=-1,xt=p.subtreeFlags,(xt&8192||(xt&16785408)===16785408)&&(vv={stylesheets:null,count:0,unsuspend:cQ},UL(p),xt=hQ(),xt!==null)){f.cancelPendingCommit=xt(JL.bind(null,f,p,H,b,E,I,te,ce,we,ut,1,Ze,Ke)),_f(f,H,te,!Xe);return}JL(f,p,H,b,E,I,te,ce,we)}function C$(f){for(var p=f;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var I=b[E],H=I.getSnapshot;I=I.value;try{if(!aa(H(),I))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function _f(f,p,b,E){p&=~H3,p&=~Ud,f.suspendedLanes|=p,f.pingedLanes&=~p,E&&(f.warmLanes|=p),E=f.expirationTimes;for(var I=p;0<I;){var H=31-Xt(I),te=1<<H;E[H]=-1,I&=~te}b!==0&&ht(f,b,p)}function Mb(){return(nr&6)===0?(fv(0),!1):!0}function $3(){if(Si!==null){if(ir===0)var f=Si.return;else f=Si,ic=Qu=null,f3(f),IA=null,nv=0,f=Si;for(;f!==null;)TL(f.alternate,f),f=f.return;Si=null}}function qA(f,p){var b=f.timeoutHandle;b!==-1&&(f.timeoutHandle=-1,j$(b)),b=f.cancelPendingCommit,b!==null&&(f.cancelPendingCommit=null,b()),$3(),Tr=f,Si=b=Jl(f.current,null),Li=p,ir=0,zo=null,vf=!1,zA=zt(f,p),V3=!1,GA=Ml=H3=Ud=yf=Jr=0,ho=uv=null,q3=!1,(p&8)!==0&&(p|=p&32);var E=f.entangledLanes;if(E!==0)for(f=f.entanglements,E&=p;0<E;){var I=31-Xt(E),H=1<<I;p|=f[I],E&=~H}return oh=p,SA(),b}function XL(f,p){wt=null,Y.H=db,p===qc||p===Sl?(p=T(),ir=3):p===eh?(p=T(),ir=4):ir=p===hL?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,zo=p,Si===null&&(Jr=1,vb(f,so(p,f.current)))}function YL(){var f=Y.H;return Y.H=db,f===null?db:f}function $L(){var f=Y.A;return Y.A=M$,f}function Q3(){Jr=4,vf||(Li&4194048)!==Li&&Tl.current!==null||(zA=!0),(yf&134217727)===0&&(Ud&134217727)===0||Tr===null||_f(Tr,Li,Ml,!1)}function Z3(f,p,b){var E=nr;nr|=2;var I=YL(),H=$L();(Tr!==f||Li!==p)&&(Tb=null,qA(f,p)),p=!1;var te=Jr;e:do try{if(ir!==0&&Si!==null){var ce=Si,we=zo;switch(ir){case 8:$3(),te=6;break e;case 3:case 2:case 9:case 6:Tl.current===null&&(p=!0);var Xe=ir;if(ir=0,zo=null,WA(f,ce,we,Xe),b&&zA){te=0;break e}break;default:Xe=ir,ir=0,zo=null,WA(f,ce,we,Xe)}}R$(),te=Jr;break}catch(ut){XL(f,ut)}while(!0);return p&&f.shellSuspendCounter++,ic=Qu=null,nr=E,Y.H=I,Y.A=H,Si===null&&(Tr=null,Li=0,SA()),te}function R$(){for(;Si!==null;)QL(Si)}function P$(f,p){var b=nr;nr|=2;var E=YL(),I=$L();Tr!==f||Li!==p?(Tb=null,Sb=Ct()+500,qA(f,p)):zA=zt(f,p);e:do try{if(ir!==0&&Si!==null){p=Si;var H=zo;t:switch(ir){case 1:ir=0,zo=null,WA(f,p,H,1);break;case 2:case 9:if(sc(H)){ir=0,zo=null,ZL(p);break}p=function(){ir!==2&&ir!==9||Tr!==f||(ir=7),Yc(f)},H.then(p,p);break e;case 3:ir=7;break e;case 4:ir=5;break e;case 7:sc(H)?(ir=0,zo=null,ZL(p)):(ir=0,zo=null,WA(f,p,H,7));break;case 5:var te=null;switch(Si.tag){case 26:te=Si.memoizedState;case 5:case 27:var ce=Si;if(!te||LD(te)){ir=0,zo=null;var we=ce.sibling;if(we!==null)Si=we;else{var Xe=ce.return;Xe!==null?(Si=Xe,Eb(Xe)):Si=null}break t}}ir=0,zo=null,WA(f,p,H,5);break;case 6:ir=0,zo=null,WA(f,p,H,6);break;case 8:$3(),Jr=6;break e;default:throw Error(n(462))}}N$();break}catch(ut){XL(f,ut)}while(!0);return ic=Qu=null,Y.H=E,Y.A=I,nr=b,Si!==null?0:(Tr=null,Li=0,SA(),Jr)}function N$(){for(;Si!==null&&!Dt();)QL(Si)}function QL(f){var p=wL(f.alternate,f,oh);f.memoizedProps=f.pendingProps,p===null?Eb(f):Si=p}function ZL(f){var p=f,b=p.alternate;switch(p.tag){case 15:case 0:p=mL(b,p,p.pendingProps,p.type,void 0,Li);break;case 11:p=mL(b,p,p.pendingProps,p.type.render,p.ref,Li);break;case 5:f3(p);default:TL(b,p),p=Si=sb(p,oh),p=wL(b,p,oh)}f.memoizedProps=f.pendingProps,p===null?Eb(f):Si=p}function WA(f,p,b,E){ic=Qu=null,f3(p),IA=null,nv=0;var I=p.return;try{if(x$(f,I,p,b,Li)){Jr=1,vb(f,so(b,f.current)),Si=null;return}}catch(H){if(I!==null)throw Si=I,H;Jr=1,vb(f,so(b,f.current)),Si=null;return}p.flags&32768?(Bi||E===1?f=!0:zA||(Li&536870912)!==0?f=!1:(vf=f=!0,(E===2||E===9||E===3||E===6)&&(E=Tl.current,E!==null&&E.tag===13&&(E.flags|=16384))),KL(p,f)):Eb(p)}function Eb(f){var p=f;do{if((p.flags&32768)!==0){KL(p,vf);return}f=p.return;var b=_$(p.alternate,p,oh);if(b!==null){Si=b;return}if(p=p.sibling,p!==null){Si=p;return}Si=p=f}while(p!==null);Jr===0&&(Jr=5)}function KL(f,p){do{var b=w$(f.alternate,f);if(b!==null){b.flags&=32767,Si=b;return}if(b=f.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(f=f.sibling,f!==null)){Si=f;return}Si=f=b}while(f!==null);Jr=6,Si=null}function JL(f,p,b,E,I,H,te,ce,we){f.cancelPendingCommit=null;do Cb();while(ua!==0);if((nr&6)!==0)throw Error(n(327));if(p!==null){if(p===f.current)throw Error(n(177));if(H=p.lanes|p.childLanes,H|=Hm,Ot(f,b,H,te,ce,we),f===Tr&&(Si=Tr=null,Li=0),VA=p,bf=f,HA=b,j3=H,X3=I,HL=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,O$(kt,function(){return rD(),null})):(f.callbackNode=null,f.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=Y.T,Y.T=null,I=ee.p,ee.p=2,te=nr,nr|=4;try{S$(f,p,b)}finally{nr=te,ee.p=I,Y.T=E}}ua=1,eD(),tD(),nD()}}function eD(){if(ua===1){ua=0;var f=bf,p=VA,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=Y.T,Y.T=null;var E=ee.p;ee.p=2;var I=nr;nr|=4;try{IL(p,f);var H=cM,te=Um(f.containerInfo),ce=H.focusedElem,we=H.selectionRange;if(te!==ce&&ce&&ce.ownerDocument&&Z1(ce.ownerDocument.documentElement,ce)){if(we!==null&&zm(ce)){var Xe=we.start,ut=we.end;if(ut===void 0&&(ut=Xe),"selectionStart"in ce)ce.selectionStart=Xe,ce.selectionEnd=Math.min(ut,ce.value.length);else{var xt=ce.ownerDocument||document,Ze=xt&&xt.defaultView||window;if(Ze.getSelection){var Ke=Ze.getSelection(),Wn=ce.textContent.length,Bn=Math.min(we.start,Wn),hr=we.end===void 0?Bn:Math.min(we.end,Wn);!Ke.extend&&Bn>hr&&(te=hr,hr=Bn,Bn=te);var Fe=qu(ce,Bn),Le=qu(ce,hr);if(Fe&&Le&&(Ke.rangeCount!==1||Ke.anchorNode!==Fe.node||Ke.anchorOffset!==Fe.offset||Ke.focusNode!==Le.node||Ke.focusOffset!==Le.offset)){var We=xt.createRange();We.setStart(Fe.node,Fe.offset),Ke.removeAllRanges(),Bn>hr?(Ke.addRange(We),Ke.extend(Le.node,Le.offset)):(We.setEnd(Le.node,Le.offset),Ke.addRange(We))}}}}for(xt=[],Ke=ce;Ke=Ke.parentNode;)Ke.nodeType===1&&xt.push({element:Ke,left:Ke.scrollLeft,top:Ke.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<xt.length;ce++){var At=xt[ce];At.element.scrollLeft=At.left,At.element.scrollTop=At.top}}zb=!!lM,cM=lM=null}finally{nr=I,ee.p=E,Y.T=b}}f.current=p,ua=2}}function tD(){if(ua===2){ua=0;var f=bf,p=VA,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=Y.T,Y.T=null;var E=ee.p;ee.p=2;var I=nr;nr|=4;try{LL(f,p.alternate,p)}finally{nr=I,ee.p=E,Y.T=b}}ua=3}}function nD(){if(ua===4||ua===3){ua=0,gt();var f=bf,p=VA,b=HA,E=HL;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?ua=5:(ua=0,VA=bf=null,iD(f,f.pendingLanes));var I=f.pendingLanes;if(I===0&&(xf=null),Ei(b),p=p.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(tt,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=Y.T,I=ee.p,ee.p=2,Y.T=null;try{for(var H=f.onRecoverableError,te=0;te<E.length;te++){var ce=E[te];H(ce.value,{componentStack:ce.stack})}}finally{Y.T=p,ee.p=I}}(HA&3)!==0&&Cb(),Yc(f),I=f.pendingLanes,(b&4194090)!==0&&(I&42)!==0?f===Y3?hv++:(hv=0,Y3=f):hv=0,fv(0)}}function iD(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,uf(p)))}function Cb(f){return eD(),tD(),nD(),rD()}function rD(){if(ua!==5)return!1;var f=bf,p=j3;j3=0;var b=Ei(HA),E=Y.T,I=ee.p;try{ee.p=32>b?32:b,Y.T=null,b=X3,X3=null;var H=bf,te=HA;if(ua=0,VA=bf=null,HA=0,(nr&6)!==0)throw Error(n(331));var ce=nr;if(nr|=4,GL(H.current),FL(H,H.current,te,b),nr=ce,fv(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(tt,H)}catch{}return!0}finally{ee.p=I,Y.T=E,iD(f,p)}}function sD(f,p,b){p=so(b,p),p=M3(f.stateNode,p,2),f=q(f,p,2),f!==null&&(en(f,2),Yc(f))}function yr(f,p,b){if(f.tag===3)sD(f,f,b);else for(;p!==null;){if(p.tag===3){sD(p,f,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(xf===null||!xf.has(E))){f=so(b,f),b=cL(2),E=q(p,b,2),E!==null&&(uL(b,E,p,f),en(E,2),Yc(E));break}}p=p.return}}function K3(f,p,b){var E=f.pingCache;if(E===null){E=f.pingCache=new E$;var I=new Set;E.set(p,I)}else I=E.get(p),I===void 0&&(I=new Set,E.set(p,I));I.has(b)||(V3=!0,I.add(b),f=L$.bind(null,f,p,b),p.then(f,f))}function L$(f,p,b){var E=f.pingCache;E!==null&&E.delete(p),f.pingedLanes|=f.suspendedLanes&b,f.warmLanes&=~b,Tr===f&&(Li&b)===b&&(Jr===4||Jr===3&&(Li&62914560)===Li&&300>Ct()-W3?(nr&2)===0&&qA(f,0):H3|=b,GA===Li&&(GA=0)),Yc(f)}function aD(f,p){p===0&&(p=Ht()),f=af(f,p),f!==null&&(en(f,p),Yc(f))}function D$(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),aD(f,b)}function k$(f,p){var b=0;switch(f.tag){case 13:var E=f.stateNode,I=f.memoizedState;I!==null&&(b=I.retryLane);break;case 19:E=f.stateNode;break;case 22:E=f.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(p),aD(f,b)}function O$(f,p){return jt(f,p)}var Rb=null,jA=null,J3=!1,Pb=!1,eM=!1,zd=0;function Yc(f){f!==jA&&f.next===null&&(jA===null?Rb=jA=f:jA=jA.next=f),Pb=!0,J3||(J3=!0,B$())}function fv(f,p){if(!eM&&Pb){eM=!0;do for(var b=!1,E=Rb;E!==null;){if(f!==0){var I=E.pendingLanes;if(I===0)var H=0;else{var te=E.suspendedLanes,ce=E.pingedLanes;H=(1<<31-Xt(42|f)+1)-1,H&=I&~(te&~ce),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(b=!0,uD(E,H))}else H=Li,H=mn(E,E===Tr?H:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(H&3)===0||zt(E,H)||(b=!0,uD(E,H));E=E.next}while(b);eM=!1}}function I$(){oD()}function oD(){Pb=J3=!1;var f=0;zd!==0&&(W$()&&(f=zd),zd=0);for(var p=Ct(),b=null,E=Rb;E!==null;){var I=E.next,H=lD(E,p);H===0?(E.next=null,b===null?Rb=I:b.next=I,I===null&&(jA=b)):(b=E,(f!==0||(H&3)!==0)&&(Pb=!0)),E=I}fv(f)}function lD(f,p){for(var b=f.suspendedLanes,E=f.pingedLanes,I=f.expirationTimes,H=f.pendingLanes&-62914561;0<H;){var te=31-Xt(H),ce=1<<te,we=I[te];we===-1?((ce&b)===0||(ce&E)!==0)&&(I[te]=zn(ce,p)):we<=p&&(f.expiredLanes|=ce),H&=~ce}if(p=Tr,b=Li,b=mn(f,f===p?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E=f.callbackNode,b===0||f===p&&(ir===2||ir===9)||f.cancelPendingCommit!==null)return E!==null&&E!==null&&de(E),f.callbackNode=null,f.callbackPriority=0;if((b&3)===0||zt(f,b)){if(p=b&-b,p===f.callbackPriority)return p;switch(E!==null&&de(E),Ei(b)){case 2:case 8:b=Rt;break;case 32:b=kt;break;case 268435456:b=be;break;default:b=kt}return E=cD.bind(null,f),b=jt(b,E),f.callbackPriority=p,f.callbackNode=b,p}return E!==null&&E!==null&&de(E),f.callbackPriority=2,f.callbackNode=null,2}function cD(f,p){if(ua!==0&&ua!==5)return f.callbackNode=null,f.callbackPriority=0,null;var b=f.callbackNode;if(Cb()&&f.callbackNode!==b)return null;var E=Li;return E=mn(f,f===Tr?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E===0?null:(WL(f,E,p),lD(f,Ct()),f.callbackNode!=null&&f.callbackNode===b?cD.bind(null,f):null)}function uD(f,p){if(Cb())return null;WL(f,p,!0)}function B$(){X$(function(){(nr&6)!==0?jt(Yt,I$):oD()})}function tM(){return zd===0&&(zd=Ae()),zd}function hD(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:wd(""+f)}function fD(f,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,f.id&&b.setAttribute("form",f.id),p.parentNode.insertBefore(b,p),f=new FormData(f),b.parentNode.removeChild(b),f}function F$(f,p,b,E,I){if(p==="submit"&&b&&b.stateNode===I){var H=hD((I[st]||null).action),te=E.submitter;te&&(p=(p=te[st]||null)?hD(p.formAction):te.getAttribute("formAction"),p!==null&&(H=p,te=null));var ce=new pA("action","action",null,E,I);f.push({event:ce,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(zd!==0){var we=te?fD(I,te):new FormData(I);b3(b,{pending:!0,data:we,method:I.method,action:H},null,we)}}else typeof H=="function"&&(ce.preventDefault(),we=te?fD(I,te):new FormData(I),b3(b,{pending:!0,data:we,method:I.method,action:H},H,we))},currentTarget:I}]})}}for(var nM=0;nM<wA.length;nM++){var iM=wA[nM],U$=iM.toLowerCase(),z$=iM[0].toUpperCase()+iM.slice(1);Ga(U$,"on"+z$)}Ga(J1,"onAnimationEnd"),Ga(eb,"onAnimationIteration"),Ga(tb,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(nb,"onTransitionRun"),Ga(o3,"onTransitionStart"),Ga(l3,"onTransitionCancel"),Ga(ib,"onTransitionEnd"),ue("onMouseEnter",["mouseout","mouseover"]),ue("onMouseLeave",["mouseout","mouseover"]),ue("onPointerEnter",["pointerout","pointerover"]),ue("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dv));function dD(f,p){p=(p&4)!==0;for(var b=0;b<f.length;b++){var E=f[b],I=E.event;E=E.listeners;e:{var H=void 0;if(p)for(var te=E.length-1;0<=te;te--){var ce=E[te],we=ce.instance,Xe=ce.currentTarget;if(ce=ce.listener,we!==H&&I.isPropagationStopped())break e;H=ce,I.currentTarget=Xe;try{H(I)}catch(ut){mb(ut)}I.currentTarget=null,H=we}else for(te=0;te<E.length;te++){if(ce=E[te],we=ce.instance,Xe=ce.currentTarget,ce=ce.listener,we!==H&&I.isPropagationStopped())break e;H=ce,I.currentTarget=Xe;try{H(I)}catch(ut){mb(ut)}I.currentTarget=null,H=we}}}}function Ti(f,p){var b=p[ft];b===void 0&&(b=p[ft]=new Set);var E=f+"__bubble";b.has(E)||(pD(p,f,2,!1),b.add(E))}function rM(f,p,b){var E=0;p&&(E|=4),pD(b,f,E,p)}var Nb="_reactListening"+Math.random().toString(36).slice(2);function sM(f){if(!f[Nb]){f[Nb]=!0,Ps.forEach(function(b){b!=="selectionchange"&&(G$.has(b)||rM(b,!1,f),rM(b,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[Nb]||(p[Nb]=!0,rM("selectionchange",!1,p))}}function pD(f,p,b,E){switch(FD(p)){case 2:var I=pQ;break;case 8:I=AQ;break;default:I=yM}b=I.bind(null,p,b,f),I=void 0,!fA||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),E?I!==void 0?f.addEventListener(p,b,{capture:!0,passive:I}):f.addEventListener(p,b,!0):I!==void 0?f.addEventListener(p,b,{passive:I}):f.addEventListener(p,b,!1)}function aM(f,p,b,E,I){var H=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var te=E.tag;if(te===3||te===4){var ce=E.stateNode.containerInfo;if(ce===I)break;if(te===4)for(te=E.return;te!==null;){var we=te.tag;if((we===3||we===4)&&te.stateNode.containerInfo===I)return;te=te.return}for(;ce!==null;){if(te=wn(ce),te===null)return;if(we=te.tag,we===5||we===6||we===26||we===27){E=H=te;continue e}ce=ce.parentNode}}E=E.return}I1(function(){var Xe=H,ut=Mm(b),xt=[];e:{var Ze=_A.get(f);if(Ze!==void 0){var Ke=pA,Wn=f;switch(f){case"keypress":if(Cd(b)===0)break e;case"keydown":case"keyup":Ke=$T;break;case"focusin":Wn="focus",Ke=ef;break;case"focusout":Wn="blur",Ke=ef;break;case"beforeblur":case"afterblur":Ke=ef;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=F1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=XT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=KT;break;case J1:case eb:case tb:Ke=z1;break;case ib:Ke=e3;break;case"scroll":case"scrollend":Ke=Fu;break;case"wheel":Ke=gA;break;case"copy":case"cut":case"paste":Ke=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=W1;break;case"toggle":case"beforetoggle":Ke=i3}var Bn=(p&4)!==0,hr=!Bn&&(f==="scroll"||f==="scrollend"),Fe=Bn?Ze!==null?Ze+"Capture":null:Ze;Bn=[];for(var Le=Xe,We;Le!==null;){var At=Le;if(We=At.stateNode,At=At.tag,At!==5&&At!==26&&At!==27||We===null||Fe===null||(At=Td(Le,Fe),At!=null&&Bn.push(pv(Le,At,We))),hr)break;Le=Le.return}0<Bn.length&&(Ze=new Ke(Ze,Wn,null,b,ut),xt.push({event:Ze,listeners:Bn}))}}if((p&7)===0){e:{if(Ze=f==="mouseover"||f==="pointerover",Ke=f==="mouseout"||f==="pointerout",Ze&&b!==Tm&&(Wn=b.relatedTarget||b.fromElement)&&(wn(Wn)||Wn[St]))break e;if((Ke||Ze)&&(Ze=ut.window===ut?ut:(Ze=ut.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,Ke?(Wn=b.relatedTarget||b.toElement,Ke=Xe,Wn=Wn?wn(Wn):null,Wn!==null&&(hr=s(Wn),Bn=Wn.tag,Wn!==hr||Bn!==5&&Bn!==27&&Bn!==6)&&(Wn=null)):(Ke=null,Wn=Xe),Ke!==Wn)){if(Bn=F1,At="onMouseLeave",Fe="onMouseEnter",Le="mouse",(f==="pointerout"||f==="pointerover")&&(Bn=W1,At="onPointerLeave",Fe="onPointerEnter",Le="pointer"),hr=Ke==null?Ze:Rs(Ke),We=Wn==null?Ze:Rs(Wn),Ze=new Bn(At,Le+"leave",Ke,b,ut),Ze.target=hr,Ze.relatedTarget=We,At=null,wn(ut)===Xe&&(Bn=new Bn(Fe,Le+"enter",Wn,b,ut),Bn.target=We,Bn.relatedTarget=hr,At=Bn),hr=At,Ke&&Wn)t:{for(Bn=Ke,Fe=Wn,Le=0,We=Bn;We;We=XA(We))Le++;for(We=0,At=Fe;At;At=XA(At))We++;for(;0<Le-We;)Bn=XA(Bn),Le--;for(;0<We-Le;)Fe=XA(Fe),We--;for(;Le--;){if(Bn===Fe||Fe!==null&&Bn===Fe.alternate)break t;Bn=XA(Bn),Fe=XA(Fe)}Bn=null}else Bn=null;Ke!==null&&AD(xt,Ze,Ke,Bn,!1),Wn!==null&&hr!==null&&AD(xt,hr,Wn,Bn,!0)}}e:{if(Ze=Xe?Rs(Xe):window,Ke=Ze.nodeName&&Ze.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ze.type==="file")var pn=$1;else if(vA(Ze))if(Q1)pn=ro;else{pn=Bm;var yi=s3}else Ke=Ze.nodeName,!Ke||Ke.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?Xe&&wm(Xe.elementType)&&(pn=$1):pn=a3;if(pn&&(pn=pn(f,Xe))){nf(xt,pn,b,ut);break e}yi&&yi(f,Ze,Xe),f==="focusout"&&Xe&&Ze.type==="number"&&Xe.memoizedProps.value!=null&&wr(Ze,"number",Ze.value)}switch(yi=Xe?Rs(Xe):window,f){case"focusin":(vA(yi)||yi.contentEditable==="true")&&(rf=yi,Vm=Xe,Wu=null);break;case"focusout":Wu=Vm=rf=null;break;case"mousedown":xA=!0;break;case"contextmenu":case"mouseup":case"dragend":xA=!1,bA(xt,b,ut);break;case"selectionchange":if(Gm)break;case"keydown":case"keyup":bA(xt,b,ut)}var Sn;if(Vu)e:{switch(f){case"compositionstart":var Vn="onCompositionStart";break e;case"compositionend":Vn="onCompositionEnd";break e;case"compositionupdate":Vn="onCompositionUpdate";break e}Vn=void 0}else tf?mA(f,b)&&(Vn="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Vn="onCompositionStart");Vn&&(Nm&&b.locale!=="ko"&&(tf||Vn!=="onCompositionStart"?Vn==="onCompositionEnd"&&tf&&(Sn=Em()):(gl=ut,Ed="value"in gl?gl.value:gl.textContent,tf=!0)),yi=Lb(Xe,Vn),0<yi.length&&(Vn=new Kl(Vn,f,null,b,ut),xt.push({event:Vn,listeners:yi}),Sn?Vn.data=Sn:(Sn=Lm(b),Sn!==null&&(Vn.data=Sn)))),(Sn=Pm?X1(f,b):Dm(f,b))&&(Vn=Lb(Xe,"onBeforeInput"),0<Vn.length&&(yi=new Kl("onBeforeInput","beforeinput",null,b,ut),xt.push({event:yi,listeners:Vn}),yi.data=Sn)),F$(xt,f,Xe,b,ut)}dD(xt,p)})}function pv(f,p,b){return{instance:f,listener:p,currentTarget:b}}function Lb(f,p){for(var b=p+"Capture",E=[];f!==null;){var I=f,H=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||H===null||(I=Td(f,b),I!=null&&E.unshift(pv(f,I,H)),I=Td(f,p),I!=null&&E.push(pv(f,I,H))),f.tag===3)return E;f=f.return}return[]}function XA(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function AD(f,p,b,E,I){for(var H=p._reactName,te=[];b!==null&&b!==E;){var ce=b,we=ce.alternate,Xe=ce.stateNode;if(ce=ce.tag,we!==null&&we===E)break;ce!==5&&ce!==26&&ce!==27||Xe===null||(we=Xe,I?(Xe=Td(b,H),Xe!=null&&te.unshift(pv(b,Xe,we))):I||(Xe=Td(b,H),Xe!=null&&te.push(pv(b,Xe,we)))),b=b.return}te.length!==0&&f.push({event:p,listeners:te})}var V$=/\r\n?/g,H$=/\u0000|\uFFFD/g;function gD(f){return(typeof f=="string"?f:""+f).replace(V$,`
`).replace(H$,"")}function mD(f,p){return p=gD(p),gD(f)===p}function Db(){}function ur(f,p,b,E,I,H){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||pl(f,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&pl(f,""+E);break;case"className":Ut(f,"class",E);break;case"tabIndex":Ut(f,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(f,b,E);break;case"style":O1(f,E,H);break;case"data":if(p!=="object"){Ut(f,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){f.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(b);break}E=wd(""+E),f.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){f.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(b==="formAction"?(p!=="input"&&ur(f,p,"name",I.name,I,null),ur(f,p,"formEncType",I.formEncType,I,null),ur(f,p,"formMethod",I.formMethod,I,null),ur(f,p,"formTarget",I.formTarget,I,null)):(ur(f,p,"encType",I.encType,I,null),ur(f,p,"method",I.method,I,null),ur(f,p,"target",I.target,I,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(b);break}E=wd(""+E),f.setAttribute(b,E);break;case"onClick":E!=null&&(f.onclick=Db);break;case"onScroll":E!=null&&Ti("scroll",f);break;case"onScrollEnd":E!=null&&Ti("scrollend",f);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(I.children!=null)throw Error(n(60));f.innerHTML=b}}break;case"multiple":f.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":f.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){f.removeAttribute("xlink:href");break}b=wd(""+E),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(b,""+E):f.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(b,""):f.removeAttribute(b);break;case"capture":case"download":E===!0?f.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(b,E):f.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?f.setAttribute(b,E):f.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?f.removeAttribute(b):f.setAttribute(b,E);break;case"popover":Ti("beforetoggle",f),Ti("toggle",f),It(f,"popover",E);break;case"xlinkActuate":dt(f,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":dt(f,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":dt(f,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":dt(f,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":dt(f,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":dt(f,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":dt(f,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":dt(f,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":dt(f,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":It(f,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=vr.get(b)||b,It(f,b,E))}}function oM(f,p,b,E,I,H){switch(b){case"style":O1(f,E,H);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(I.children!=null)throw Error(n(60));f.innerHTML=b}}break;case"children":typeof E=="string"?pl(f,E):(typeof E=="number"||typeof E=="bigint")&&pl(f,""+E);break;case"onScroll":E!=null&&Ti("scroll",f);break;case"onScrollEnd":E!=null&&Ti("scrollend",f);break;case"onClick":E!=null&&(f.onclick=Db);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ql.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(I=b.endsWith("Capture"),p=b.slice(2,I?b.length-7:void 0),H=f[st]||null,H=H!=null?H[b]:null,typeof H=="function"&&f.removeEventListener(p,H,I),typeof E=="function")){typeof H!="function"&&H!==null&&(b in f?f[b]=null:f.hasAttribute(b)&&f.removeAttribute(b)),f.addEventListener(p,E,I);break e}b in f?f[b]=E:E===!0?f.setAttribute(b,""):It(f,b,E)}}}function ha(f,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ti("error",f),Ti("load",f);var E=!1,I=!1,H;for(H in b)if(b.hasOwnProperty(H)){var te=b[H];if(te!=null)switch(H){case"src":E=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ur(f,p,H,te,b,null)}}I&&ur(f,p,"srcSet",b.srcSet,b,null),E&&ur(f,p,"src",b.src,b,null);return;case"input":Ti("invalid",f);var ce=H=te=I=null,we=null,Xe=null;for(E in b)if(b.hasOwnProperty(E)){var ut=b[E];if(ut!=null)switch(E){case"name":I=ut;break;case"type":te=ut;break;case"checked":we=ut;break;case"defaultChecked":Xe=ut;break;case"value":H=ut;break;case"defaultValue":ce=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(n(137,p));break;default:ur(f,p,E,ut,b,null)}}Qi(f,H,ce,we,Xe,te,I,!1),Ir(f);return;case"select":Ti("invalid",f),E=te=H=null;for(I in b)if(b.hasOwnProperty(I)&&(ce=b[I],ce!=null))switch(I){case"value":H=ce;break;case"defaultValue":te=ce;break;case"multiple":E=ce;default:ur(f,p,I,ce,b,null)}p=H,b=te,f.multiple=!!E,p!=null?vi(f,!!E,p,!1):b!=null&&vi(f,!!E,b,!0);return;case"textarea":Ti("invalid",f),H=I=E=null;for(te in b)if(b.hasOwnProperty(te)&&(ce=b[te],ce!=null))switch(te){case"value":E=ce;break;case"defaultValue":I=ce;break;case"children":H=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(91));break;default:ur(f,p,te,ce,b,null)}Ns(f,E,I,H),Ir(f);return;case"option":for(we in b)if(b.hasOwnProperty(we)&&(E=b[we],E!=null))switch(we){case"selected":f.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ur(f,p,we,E,b,null)}return;case"dialog":Ti("beforetoggle",f),Ti("toggle",f),Ti("cancel",f),Ti("close",f);break;case"iframe":case"object":Ti("load",f);break;case"video":case"audio":for(E=0;E<dv.length;E++)Ti(dv[E],f);break;case"image":Ti("error",f),Ti("load",f);break;case"details":Ti("toggle",f);break;case"embed":case"source":case"link":Ti("error",f),Ti("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in b)if(b.hasOwnProperty(Xe)&&(E=b[Xe],E!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ur(f,p,Xe,E,b,null)}return;default:if(wm(p)){for(ut in b)b.hasOwnProperty(ut)&&(E=b[ut],E!==void 0&&oM(f,p,ut,E,b,void 0));return}}for(ce in b)b.hasOwnProperty(ce)&&(E=b[ce],E!=null&&ur(f,p,ce,E,b,null))}function q$(f,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,H=null,te=null,ce=null,we=null,Xe=null,ut=null;for(Ke in b){var xt=b[Ke];if(b.hasOwnProperty(Ke)&&xt!=null)switch(Ke){case"checked":break;case"value":break;case"defaultValue":we=xt;default:E.hasOwnProperty(Ke)||ur(f,p,Ke,null,E,xt)}}for(var Ze in E){var Ke=E[Ze];if(xt=b[Ze],E.hasOwnProperty(Ze)&&(Ke!=null||xt!=null))switch(Ze){case"type":H=Ke;break;case"name":I=Ke;break;case"checked":Xe=Ke;break;case"defaultChecked":ut=Ke;break;case"value":te=Ke;break;case"defaultValue":ce=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(n(137,p));break;default:Ke!==xt&&ur(f,p,Ze,Ke,E,xt)}}dl(f,te,ce,we,Xe,ut,H,I);return;case"select":Ke=te=ce=Ze=null;for(H in b)if(we=b[H],b.hasOwnProperty(H)&&we!=null)switch(H){case"value":break;case"multiple":Ke=we;default:E.hasOwnProperty(H)||ur(f,p,H,null,E,we)}for(I in E)if(H=E[I],we=b[I],E.hasOwnProperty(I)&&(H!=null||we!=null))switch(I){case"value":Ze=H;break;case"defaultValue":ce=H;break;case"multiple":te=H;default:H!==we&&ur(f,p,I,H,E,we)}p=ce,b=te,E=Ke,Ze!=null?vi(f,!!b,Ze,!1):!!E!=!!b&&(p!=null?vi(f,!!b,p,!0):vi(f,!!b,b?[]:"",!1));return;case"textarea":Ke=Ze=null;for(ce in b)if(I=b[ce],b.hasOwnProperty(ce)&&I!=null&&!E.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:ur(f,p,ce,null,E,I)}for(te in E)if(I=E[te],H=b[te],E.hasOwnProperty(te)&&(I!=null||H!=null))switch(te){case"value":Ze=I;break;case"defaultValue":Ke=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(91));break;default:I!==H&&ur(f,p,te,I,E,H)}Zr(f,Ze,Ke);return;case"option":for(var Wn in b)if(Ze=b[Wn],b.hasOwnProperty(Wn)&&Ze!=null&&!E.hasOwnProperty(Wn))switch(Wn){case"selected":f.selected=!1;break;default:ur(f,p,Wn,null,E,Ze)}for(we in E)if(Ze=E[we],Ke=b[we],E.hasOwnProperty(we)&&Ze!==Ke&&(Ze!=null||Ke!=null))switch(we){case"selected":f.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol";break;default:ur(f,p,we,Ze,E,Ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bn in b)Ze=b[Bn],b.hasOwnProperty(Bn)&&Ze!=null&&!E.hasOwnProperty(Bn)&&ur(f,p,Bn,null,E,Ze);for(Xe in E)if(Ze=E[Xe],Ke=b[Xe],E.hasOwnProperty(Xe)&&Ze!==Ke&&(Ze!=null||Ke!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(n(137,p));break;default:ur(f,p,Xe,Ze,E,Ke)}return;default:if(wm(p)){for(var hr in b)Ze=b[hr],b.hasOwnProperty(hr)&&Ze!==void 0&&!E.hasOwnProperty(hr)&&oM(f,p,hr,void 0,E,Ze);for(ut in E)Ze=E[ut],Ke=b[ut],!E.hasOwnProperty(ut)||Ze===Ke||Ze===void 0&&Ke===void 0||oM(f,p,ut,Ze,E,Ke);return}}for(var Fe in b)Ze=b[Fe],b.hasOwnProperty(Fe)&&Ze!=null&&!E.hasOwnProperty(Fe)&&ur(f,p,Fe,null,E,Ze);for(xt in E)Ze=E[xt],Ke=b[xt],!E.hasOwnProperty(xt)||Ze===Ke||Ze==null&&Ke==null||ur(f,p,xt,Ze,E,Ke)}var lM=null,cM=null;function kb(f){return f.nodeType===9?f:f.ownerDocument}function vD(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yD(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function uM(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var hM=null;function W$(){var f=window.event;return f&&f.type==="popstate"?f===hM?!1:(hM=f,!0):(hM=null,!1)}var xD=typeof setTimeout=="function"?setTimeout:void 0,j$=typeof clearTimeout=="function"?clearTimeout:void 0,bD=typeof Promise=="function"?Promise:void 0,X$=typeof queueMicrotask=="function"?queueMicrotask:typeof bD<"u"?function(f){return bD.resolve(null).then(f).catch(Y$)}:xD;function Y$(f){setTimeout(function(){throw f})}function wf(f){return f==="head"}function _D(f,p){var b=p,E=0,I=0;do{var H=b.nextSibling;if(f.removeChild(b),H&&H.nodeType===8)if(b=H.data,b==="/$"){if(0<E&&8>E){b=E;var te=f.ownerDocument;if(b&1&&Av(te.documentElement),b&2&&Av(te.body),b&4)for(b=te.head,Av(b),te=b.firstChild;te;){var ce=te.nextSibling,we=te.nodeName;te[Gn]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&te.rel.toLowerCase()==="stylesheet"||b.removeChild(te),te=ce}}if(I===0){f.removeChild(H),wv(p);return}I--}else b==="$"||b==="$?"||b==="$!"?I++:E=b.charCodeAt(0)-48;else E=0;b=H}while(b);wv(p)}function fM(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":fM(b),mi(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}f.removeChild(b)}}function $$(f,p,b,E){for(;f.nodeType===1;){var I=b;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(E){if(!f[Gn])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(H=f.getAttribute("rel"),H==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(H!==I.rel||f.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||f.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||f.getAttribute("title")!==(I.title==null?null:I.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(H=f.getAttribute("src"),(H!==(I.src==null?null:I.src)||f.getAttribute("type")!==(I.type==null?null:I.type)||f.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&H&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var H=I.name==null?null:""+I.name;if(I.type==="hidden"&&f.getAttribute("name")===H)return f}else return f;if(f=oc(f.nextSibling),f===null)break}return null}function Q$(f,p,b){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!b||(f=oc(f.nextSibling),f===null))return null;return f}function dM(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function Z$(f,p){var b=f.ownerDocument;if(f.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),f._reactRetry=E}}function oc(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return f}var pM=null;function wD(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return f;p--}else b==="/$"&&p++}f=f.previousSibling}return null}function SD(f,p,b){switch(p=kb(b),f){case"html":if(f=p.documentElement,!f)throw Error(n(452));return f;case"head":if(f=p.head,!f)throw Error(n(453));return f;case"body":if(f=p.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function Av(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);mi(f)}var El=new Map,TD=new Set;function Ob(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var lh=ee.d;ee.d={f:K$,r:J$,D:eQ,C:tQ,L:nQ,m:iQ,X:sQ,S:rQ,M:aQ};function K$(){var f=lh.f(),p=Mb();return f||p}function J$(f){var p=Zn(f);p!==null&&p.tag===5&&p.type==="form"?WN(p):lh.r(f)}var YA=typeof document>"u"?null:document;function MD(f,p,b){var E=YA;if(E&&typeof p=="string"&&p){var I=tr(p);I='link[rel="'+f+'"][href="'+I+'"]',typeof b=="string"&&(I+='[crossorigin="'+b+'"]'),TD.has(I)||(TD.add(I),f={rel:f,crossOrigin:b,href:p},E.querySelector(I)===null&&(p=E.createElement("link"),ha(p,"link",f),hn(p),E.head.appendChild(p)))}}function eQ(f){lh.D(f),MD("dns-prefetch",f,null)}function tQ(f,p){lh.C(f,p),MD("preconnect",f,p)}function nQ(f,p,b){lh.L(f,p,b);var E=YA;if(E&&f&&p){var I='link[rel="preload"][as="'+tr(p)+'"]';p==="image"&&b&&b.imageSrcSet?(I+='[imagesrcset="'+tr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(I+='[imagesizes="'+tr(b.imageSizes)+'"]')):I+='[href="'+tr(f)+'"]';var H=I;switch(p){case"style":H=$A(f);break;case"script":H=QA(f)}El.has(H)||(f=u({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:f,as:p},b),El.set(H,f),E.querySelector(I)!==null||p==="style"&&E.querySelector(gv(H))||p==="script"&&E.querySelector(mv(H))||(p=E.createElement("link"),ha(p,"link",f),hn(p),E.head.appendChild(p)))}}function iQ(f,p){lh.m(f,p);var b=YA;if(b&&f){var E=p&&typeof p.as=="string"?p.as:"script",I='link[rel="modulepreload"][as="'+tr(E)+'"][href="'+tr(f)+'"]',H=I;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=QA(f)}if(!El.has(H)&&(f=u({rel:"modulepreload",href:f},p),El.set(H,f),b.querySelector(I)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(mv(H)))return}E=b.createElement("link"),ha(E,"link",f),hn(E),b.head.appendChild(E)}}}function rQ(f,p,b){lh.S(f,p,b);var E=YA;if(E&&f){var I=ni(E).hoistableStyles,H=$A(f);p=p||"default";var te=I.get(H);if(!te){var ce={loading:0,preload:null};if(te=E.querySelector(gv(H)))ce.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":p},b),(b=El.get(H))&&AM(f,b);var we=te=E.createElement("link");hn(we),ha(we,"link",f),we._p=new Promise(function(Xe,ut){we.onload=Xe,we.onerror=ut}),we.addEventListener("load",function(){ce.loading|=1}),we.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,Ib(te,p,E)}te={type:"stylesheet",instance:te,count:1,state:ce},I.set(H,te)}}}function sQ(f,p){lh.X(f,p);var b=YA;if(b&&f){var E=ni(b).hoistableScripts,I=QA(f),H=E.get(I);H||(H=b.querySelector(mv(I)),H||(f=u({src:f,async:!0},p),(p=El.get(I))&&gM(f,p),H=b.createElement("script"),hn(H),ha(H,"link",f),b.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},E.set(I,H))}}function aQ(f,p){lh.M(f,p);var b=YA;if(b&&f){var E=ni(b).hoistableScripts,I=QA(f),H=E.get(I);H||(H=b.querySelector(mv(I)),H||(f=u({src:f,async:!0,type:"module"},p),(p=El.get(I))&&gM(f,p),H=b.createElement("script"),hn(H),ha(H,"link",f),b.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},E.set(I,H))}}function ED(f,p,b,E){var I=(I=Ve.current)?Ob(I):null;if(!I)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=$A(b.href),b=ni(I).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){f=$A(b.href);var H=ni(I).hoistableStyles,te=H.get(f);if(te||(I=I.ownerDocument||I,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(f,te),(H=I.querySelector(gv(f)))&&!H._p&&(te.instance=H,te.state.loading=5),El.has(f)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},El.set(f,b),H||oQ(I,f,b,te.state))),p&&E===null)throw Error(n(528,""));return te}if(p&&E!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=QA(b),b=ni(I).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function $A(f){return'href="'+tr(f)+'"'}function gv(f){return'link[rel="stylesheet"]['+f+"]"}function CD(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function oQ(f,p,b,E){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=f.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),ha(p,"link",b),hn(p),f.head.appendChild(p))}function QA(f){return'[src="'+tr(f)+'"]'}function mv(f){return"script[async]"+f}function RD(f,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=f.querySelector('style[data-href~="'+tr(b.href)+'"]');if(E)return p.instance=E,hn(E),E;var I=u({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(f.ownerDocument||f).createElement("style"),hn(E),ha(E,"style",I),Ib(E,b.precedence,f),p.instance=E;case"stylesheet":I=$A(b.href);var H=f.querySelector(gv(I));if(H)return p.state.loading|=4,p.instance=H,hn(H),H;E=CD(b),(I=El.get(I))&&AM(E,I),H=(f.ownerDocument||f).createElement("link"),hn(H);var te=H;return te._p=new Promise(function(ce,we){te.onload=ce,te.onerror=we}),ha(H,"link",E),p.state.loading|=4,Ib(H,b.precedence,f),p.instance=H;case"script":return H=QA(b.src),(I=f.querySelector(mv(H)))?(p.instance=I,hn(I),I):(E=b,(I=El.get(H))&&(E=u({},b),gM(E,I)),f=f.ownerDocument||f,I=f.createElement("script"),hn(I),ha(I,"link",E),f.head.appendChild(I),p.instance=I);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,Ib(E,b.precedence,f));return p.instance}function Ib(f,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=E.length?E[E.length-1]:null,H=I,te=0;te<E.length;te++){var ce=E[te];if(ce.dataset.precedence===p)H=ce;else if(H!==I)break}H?H.parentNode.insertBefore(f,H.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(f,p.firstChild))}function AM(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function gM(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var Bb=null;function PD(f,p,b){if(Bb===null){var E=new Map,I=Bb=new Map;I.set(b,E)}else I=Bb,E=I.get(b),E||(E=new Map,I.set(b,E));if(E.has(f))return E;for(E.set(f,null),b=b.getElementsByTagName(f),I=0;I<b.length;I++){var H=b[I];if(!(H[Gn]||H[qe]||f==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var te=H.getAttribute(p)||"";te=f+te;var ce=E.get(te);ce?ce.push(H):E.set(te,[H])}}return E}function ND(f,p,b){f=f.ownerDocument||f,f.head.insertBefore(b,p==="title"?f.querySelector("head > title"):null)}function lQ(f,p,b){if(b===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function LD(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var vv=null;function cQ(){}function uQ(f,p,b){if(vv===null)throw Error(n(475));var E=vv;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var I=$A(b.href),H=f.querySelector(gv(I));if(H){f=H._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(E.count++,E=Fb.bind(E),f.then(E,E)),p.state.loading|=4,p.instance=H,hn(H);return}H=f.ownerDocument||f,b=CD(b),(I=El.get(I))&&AM(b,I),H=H.createElement("link"),hn(H);var te=H;te._p=new Promise(function(ce,we){te.onload=ce,te.onerror=we}),ha(H,"link",b),p.instance=H}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=Fb.bind(E),f.addEventListener("load",p),f.addEventListener("error",p))}}function hQ(){if(vv===null)throw Error(n(475));var f=vv;return f.stylesheets&&f.count===0&&mM(f,f.stylesheets),0<f.count?function(p){var b=setTimeout(function(){if(f.stylesheets&&mM(f,f.stylesheets),f.unsuspend){var E=f.unsuspend;f.unsuspend=null,E()}},6e4);return f.unsuspend=p,function(){f.unsuspend=null,clearTimeout(b)}}:null}function Fb(){if(this.count--,this.count===0){if(this.stylesheets)mM(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Ub=null;function mM(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Ub=new Map,p.forEach(fQ,f),Ub=null,Fb.call(f))}function fQ(f,p){if(!(p.state.loading&4)){var b=Ub.get(f);if(b)var E=b.get(null);else{b=new Map,Ub.set(f,b);for(var I=f.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<I.length;H++){var te=I[H];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(b.set(te.dataset.precedence,te),E=te)}E&&b.set(null,E)}I=p.instance,te=I.getAttribute("data-precedence"),H=b.get(te)||E,H===E&&b.set(null,I),b.set(te,I),this.count++,E=Fb.bind(this),I.addEventListener("load",E),I.addEventListener("error",E),H?H.parentNode.insertBefore(I,H.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(I,f.firstChild)),p.state.loading|=4}}var yv={$$typeof:P,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function dQ(f,p,b,E,I,H,te,ce){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.hiddenUpdates=Mt(null),this.identifierPrefix=E,this.onUncaughtError=I,this.onCaughtError=H,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function DD(f,p,b,E,I,H,te,ce,we,Xe,ut,xt){return f=new dQ(f,p,b,te,ce,we,Xe,xt),p=1,H===!0&&(p|=24),H=Va(3,null,null,p),f.current=H,H.stateNode=f,p=fs(),p.refCount++,f.pooledCache=p,p.refCount++,H.memoizedState={element:E,isDehydrated:b,cache:p},N(H),f}function kD(f){return f?(f=ju,f):ju}function OD(f,p,b,E,I,H){I=kD(I),E.context===null?E.context=I:E.pendingContext=I,E=G(p),E.payload={element:b},H=H===void 0?null:H,H!==null&&(E.callback=H),b=q(f,E,p),b!==null&&(Vo(b,f,p),Q(b,f,p))}function ID(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function vM(f,p){ID(f,p),(f=f.alternate)&&ID(f,p)}function BD(f){if(f.tag===13){var p=af(f,67108864);p!==null&&Vo(p,f,67108864),vM(f,67108864)}}var zb=!0;function pQ(f,p,b,E){var I=Y.T;Y.T=null;var H=ee.p;try{ee.p=2,yM(f,p,b,E)}finally{ee.p=H,Y.T=I}}function AQ(f,p,b,E){var I=Y.T;Y.T=null;var H=ee.p;try{ee.p=8,yM(f,p,b,E)}finally{ee.p=H,Y.T=I}}function yM(f,p,b,E){if(zb){var I=xM(E);if(I===null)aM(f,p,E,Gb,b),UD(f,E);else if(mQ(I,f,p,b,E))E.stopPropagation();else if(UD(f,E),p&4&&-1<gQ.indexOf(f)){for(;I!==null;){var H=Zn(I);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var te=yn(H.pendingLanes);if(te!==0){var ce=H;for(ce.pendingLanes|=2,ce.entangledLanes|=2;te;){var we=1<<31-Xt(te);ce.entanglements[1]|=we,te&=~we}Yc(H),(nr&6)===0&&(Sb=Ct()+500,fv(0))}}break;case 13:ce=af(H,2),ce!==null&&Vo(ce,H,2),Mb(),vM(H,2)}if(H=xM(E),H===null&&aM(f,p,E,Gb,b),H===I)break;I=H}I!==null&&E.stopPropagation()}else aM(f,p,E,null,b)}}function xM(f){return f=Mm(f),bM(f)}var Gb=null;function bM(f){if(Gb=null,f=wn(f),f!==null){var p=s(f);if(p===null)f=null;else{var b=p.tag;if(b===13){if(f=a(p),f!==null)return f;f=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return Gb=f,null}function FD(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case Yt:return 2;case Rt:return 8;case kt:case an:return 32;case be:return 268435456;default:return 32}default:return 32}}var _M=!1,Sf=null,Tf=null,Mf=null,xv=new Map,bv=new Map,Ef=[],gQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UD(f,p){switch(f){case"focusin":case"focusout":Sf=null;break;case"dragenter":case"dragleave":Tf=null;break;case"mouseover":case"mouseout":Mf=null;break;case"pointerover":case"pointerout":xv.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":bv.delete(p.pointerId)}}function _v(f,p,b,E,I,H){return f===null||f.nativeEvent!==H?(f={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:H,targetContainers:[I]},p!==null&&(p=Zn(p),p!==null&&BD(p)),f):(f.eventSystemFlags|=E,p=f.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),f)}function mQ(f,p,b,E,I){switch(p){case"focusin":return Sf=_v(Sf,f,p,b,E,I),!0;case"dragenter":return Tf=_v(Tf,f,p,b,E,I),!0;case"mouseover":return Mf=_v(Mf,f,p,b,E,I),!0;case"pointerover":var H=I.pointerId;return xv.set(H,_v(xv.get(H)||null,f,p,b,E,I)),!0;case"gotpointercapture":return H=I.pointerId,bv.set(H,_v(bv.get(H)||null,f,p,b,E,I)),!0}return!1}function zD(f){var p=wn(f.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=a(b),p!==null){f.blockedOn=p,Or(f.priority,function(){if(b.tag===13){var E=Go();E=Ln(E);var I=af(b,E);I!==null&&Vo(I,b,E),vM(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Vb(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var b=xM(f.nativeEvent);if(b===null){b=f.nativeEvent;var E=new b.constructor(b.type,b);Tm=E,b.target.dispatchEvent(E),Tm=null}else return p=Zn(b),p!==null&&BD(p),f.blockedOn=b,!1;p.shift()}return!0}function GD(f,p,b){Vb(f)&&b.delete(p)}function vQ(){_M=!1,Sf!==null&&Vb(Sf)&&(Sf=null),Tf!==null&&Vb(Tf)&&(Tf=null),Mf!==null&&Vb(Mf)&&(Mf=null),xv.forEach(GD),bv.forEach(GD)}function Hb(f,p){f.blockedOn===p&&(f.blockedOn=null,_M||(_M=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vQ)))}var qb=null;function VD(f){qb!==f&&(qb=f,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qb===f&&(qb=null);for(var p=0;p<f.length;p+=3){var b=f[p],E=f[p+1],I=f[p+2];if(typeof E!="function"){if(bM(E||b)===null)continue;break}var H=Zn(b);H!==null&&(f.splice(p,3),p-=3,b3(H,{pending:!0,data:I,method:b.method,action:E},E,I))}}))}function wv(f){function p(we){return Hb(we,f)}Sf!==null&&Hb(Sf,f),Tf!==null&&Hb(Tf,f),Mf!==null&&Hb(Mf,f),xv.forEach(p),bv.forEach(p);for(var b=0;b<Ef.length;b++){var E=Ef[b];E.blockedOn===f&&(E.blockedOn=null)}for(;0<Ef.length&&(b=Ef[0],b.blockedOn===null);)zD(b),b.blockedOn===null&&Ef.shift();if(b=(f.ownerDocument||f).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var I=b[E],H=b[E+1],te=I[st]||null;if(typeof H=="function")te||VD(b);else if(te){var ce=null;if(H&&H.hasAttribute("formAction")){if(I=H,te=H[st]||null)ce=te.formAction;else if(bM(I)!==null)continue}else ce=te.action;typeof ce=="function"?b[E+1]=ce:(b.splice(E,3),E-=3),VD(b)}}}function wM(f){this._internalRoot=f}Wb.prototype.render=wM.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,E=Go();OD(b,E,f,p,null,null)},Wb.prototype.unmount=wM.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;OD(f.current,2,null,f,null,null),Mb(),p[St]=null}};function Wb(f){this._internalRoot=f}Wb.prototype.unstable_scheduleHydration=function(f){if(f){var p=fi();f={blockedOn:null,target:f,priority:p};for(var b=0;b<Ef.length&&p!==0&&p<Ef[b].priority;b++);Ef.splice(b,0,f),b===0&&zD(f)}};var HD=e.version;if(HD!=="19.1.0")throw Error(n(527,HD,"19.1.0"));ee.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=l(p),f=f!==null?c(f):null,f=f===null?null:f.stateNode,f};var yQ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jb.isDisabled&&jb.supportsFiber)try{tt=jb.inject(yQ),ct=jb}catch{}}return Tv.createRoot=function(f,p){if(!r(f))throw Error(n(299));var b=!1,E="",I=sL,H=aL,te=oL,ce=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(te=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ce=p.unstable_transitionCallbacks)),p=DD(f,1,!1,null,null,b,E,I,H,te,ce,null),f[St]=p.current,sM(f),new wM(p)},Tv.hydrateRoot=function(f,p,b){if(!r(f))throw Error(n(299));var E=!1,I="",H=sL,te=aL,ce=oL,we=null,Xe=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(I=b.identifierPrefix),b.onUncaughtError!==void 0&&(H=b.onUncaughtError),b.onCaughtError!==void 0&&(te=b.onCaughtError),b.onRecoverableError!==void 0&&(ce=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(we=b.unstable_transitionCallbacks),b.formState!==void 0&&(Xe=b.formState)),p=DD(f,1,!0,p,b??null,E,I,H,te,ce,we,Xe),p.context=kD(null),b=p.current,E=Go(),E=Ln(E),I=G(E),I.callback=null,q(b,I,E),b=E,p.current.lanes=b,en(p,b),Yc(p),f[St]=p.current,sM(f),new Wb(p)},Tv.version="19.1.0",Tv}var JD;function PQ(){if(JD)return EM.exports;JD=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),EM.exports=RQ(),EM.exports}var NQ=PQ(),NM={exports:{}},LM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek;function LQ(){if(ek)return LM;ek=1;var i=RS();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=i.useSyncExternalStore,r=i.useRef,s=i.useEffect,a=i.useMemo,o=i.useDebugValue;return LM.useSyncExternalStoreWithSelector=function(l,c,u,h,d){var A=r(null);if(A.current===null){var x={hasValue:!1,value:null};A.current=x}else x=A.current;A=a(function(){function S(D){if(!w){if(w=!0,C=D,D=h(D),d!==void 0&&x.hasValue){var B=x.value;if(d(B,D))return P=B}return P=D}if(B=P,t(C,D))return B;var k=h(D);return d!==void 0&&d(B,k)?(C=D,B):(C=D,P=k)}var w=!1,C,P,L=u===void 0?null:u;return[function(){return S(c())},L===null?void 0:function(){return S(L())}]},[c,u,h,d]);var _=n(l,A[0],A[1]);return s(function(){x.hasValue=!0,x.value=_},[_]),o(_),_},LM}var tk;function DQ(){return tk||(tk=1,NM.exports=LQ()),NM.exports}var kQ=DQ();function OQ(i){i()}function IQ(){let i=null,e=null;return{clear(){i=null,e=null},notify(){OQ(()=>{let t=i;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=i;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:i=r,function(){!n||i===null||(n=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:i=r.next)}}}}var nk={notify(){},get:()=>[]};function BQ(i,e){let t,n=nk,r=0,s=!1;function a(_){u();const S=n.subscribe(_);let w=!1;return()=>{w||(w=!0,S(),h())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return s}function u(){r++,t||(t=i.subscribe(l),n=IQ())}function h(){r--,t&&r===0&&(t(),t=void 0,n.clear(),n=nk)}function d(){s||(s=!0,u())}function A(){s&&(s=!1,h())}const x={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:d,tryUnsubscribe:A,getListeners:()=>n};return x}var FQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UQ=FQ(),zQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GQ=zQ(),VQ=()=>UQ||GQ?ye.useLayoutEffect:ye.useEffect,HQ=VQ(),DM=Symbol.for("react-redux-context"),kM=typeof globalThis<"u"?globalThis:{};function qQ(){if(!ye.createContext)return{};const i=kM[DM]??(kM[DM]=new Map);let e=i.get(ye.createContext);return e||(e=ye.createContext(null),i.set(ye.createContext,e)),e}var od=qQ();function WQ(i){const{children:e,context:t,serverState:n,store:r}=i,s=ye.useMemo(()=>{const l=BQ(r);return{store:r,subscription:l,getServerState:n?()=>n:void 0}},[r,n]),a=ye.useMemo(()=>r.getState(),[r]);HQ(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==r.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=t||od;return ye.createElement(o.Provider,{value:s},e)}var jQ=WQ;function Q5(i=od){return function(){return ye.useContext(i)}}var wF=Q5();function SF(i=od){const e=i===od?wF:Q5(i),t=()=>{const{store:n}=e();return n};return Object.assign(t,{withTypes:()=>t}),t}var XQ=SF();function YQ(i=od){const e=i===od?XQ:SF(i),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var $Q=YQ(),QQ=(i,e)=>i===e;function ZQ(i=od){const e=i===od?wF:Q5(i),t=(n,r={})=>{const{equalityFn:s=QQ}=typeof r=="function"?{equalityFn:r}:r,a=e(),{store:o,subscription:l,getServerState:c}=a;ye.useRef(!0);const u=ye.useCallback({[n.name](d){return n(d)}}[n.name],[n]),h=kQ.useSyncExternalStoreWithSelector(l.addNestedSub,o.getState,c||o.getState,u,s);return ye.useDebugValue(h),h};return Object.assign(t,{withTypes:()=>t}),t}var KQ=ZQ();const JQ=$Q.withTypes(),TF=KQ.withTypes();function eZ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function tZ(i,e,t){return e=cZ(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ik(i,e){return rZ(i)||eZ(i,e)||MF(i,e)||oZ()}function nZ(i){return iZ(i)||sZ(i)||MF(i)||aZ()}function iZ(i){if(Array.isArray(i))return p4(i)}function rZ(i){if(Array.isArray(i))return i}function sZ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function MF(i,e){if(i){if(typeof i=="string")return p4(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p4(i,e)}}function p4(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function aZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lZ(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function cZ(i){var e=lZ(i,"string");return typeof e=="symbol"?e:String(e)}var uZ=function(e,t){var n=new Set(t);return Object.assign.apply(Object,[{}].concat(nZ(Object.entries(e).filter(function(r){var s=ik(r,1),a=s[0];return!n.has(a)}).map(function(r){var s=ik(r,2),a=s[0],o=s[1];return tZ({},a,o)}))))};function A4(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function hZ(i){if(Array.isArray(i))return i}function fZ(i){if(Array.isArray(i))return A4(i)}function dZ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function pZ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function AZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mZ(i,e){return hZ(i)||pZ(i,e)||EF(i,e)||AZ()}function rk(i){return fZ(i)||dZ(i)||EF(i)||gZ()}function EF(i,e){if(i){if(typeof i=="string")return A4(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A4(i,e):void 0}}function vZ(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.wrapperElementType,n=t===void 0?"div":t,r=e.nodeMapper,s=r===void 0?function(u){return u}:r,a=e.methodNames,o=a===void 0?[]:a,l=e.initPropNames,c=l===void 0?[]:l;return ye.forwardRef(function(u,h){var d=ye.useRef(),A=ye.useMemo(function(){var S=Object.fromEntries(c.filter(function(w){return u.hasOwnProperty(w)}).map(function(w){return[w,u[w]]}));return i(S)},[]);sk(function(){A(s(d.current))},ye.useLayoutEffect),sk(function(){return A._destructor instanceof Function?A._destructor:void 0});var x=ye.useCallback(function(S){for(var w=arguments.length,C=new Array(w>1?w-1:0),P=1;P<w;P++)C[P-1]=arguments[P];return A[S]instanceof Function?A[S].apply(A,C):void 0},[A]),_=ye.useRef({});return Object.keys(uZ(u,[].concat(rk(o),rk(c)))).filter(function(S){return _.current[S]!==u[S]}).forEach(function(S){return x(S,u[S])}),_.current=u,ye.useImperativeHandle(h,function(){return Object.fromEntries(o.map(function(S){return[S,function(){for(var w=arguments.length,C=new Array(w),P=0;P<w;P++)C[P]=arguments[P];return x.apply(void 0,[S].concat(C))}]}))},[x]),xa.createElement(n,{ref:d})})}function sk(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye.useEffect,t=ye.useRef(),n=ye.useRef(!1),r=ye.useRef(!1),s=ye.useState(0),a=mZ(s,2);a[0];var o=a[1];n.current&&(r.current=!0),e(function(){return n.current||(t.current=i(),n.current=!0),o(function(l){return l+1}),function(){r.current&&t.current&&t.current()}},[])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const nm="177",Gl={ROTATE:0,DOLLY:1,PAN:2},D0={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CF=0,g4=1,RF=2,yZ=0,Z5=1,xZ=2,$o=3,So=0,sr=1,ws=2,To=0,to=1,sg=2,ag=3,og=4,Y0=5,ka=100,K5=101,J5=102,PF=103,NF=104,Ah=200,e6=201,t6=202,n6=203,Gy=204,Vy=205,i6=206,r6=207,s6=208,a6=209,o6=210,bZ=211,_Z=212,wZ=213,SZ=214,Hy=0,qy=1,Wy=2,ld=3,jy=4,Xy=5,Yy=6,$y=7,Xx=0,LF=1,DF=2,Mo=0,kF=1,OF=2,IF=3,BF=4,TZ=5,FF=6,UF=7,l6=300,yu=301,xu=302,lg=303,cg=304,Gp=306,Vp=1e3,lu=1001,Hp=1002,Er=1003,c6=1004,_h=1005,Bs=1006,$0=1007,vo=1008,MZ=1008,$r=1009,Cp=1010,Rp=1011,bc=1012,na=1013,br=1014,ps=1015,Ss=1016,PS=1017,NS=1018,tl=1020,LS=35902,u6=1021,Yx=1022,ss=1023,nl=1026,il=1027,$x=1028,im=1029,wh=1030,rm=1031,EZ=1032,sm=1033,Pp=33776,Jf=33777,ed=33778,td=33779,Qy=35840,Zy=35841,Ky=35842,Jy=35843,ex=36196,ug=37492,hg=37496,fg=37808,dg=37809,pg=37810,Ag=37811,gg=37812,mg=37813,vg=37814,yg=37815,xg=37816,bg=37817,_g=37818,wg=37819,Sg=37820,Tg=37821,Np=36492,m4=36494,v4=36495,h6=36283,tx=36284,nx=36285,ix=36286,CZ=0,RZ=1,ak=2,PZ=3200,NZ=3201,Nh=0,zF=1,Za="",ma="srgb",Cc="srgb-linear",Mg="linear",rn="srgb",LZ=0,rp=7680,DZ=7681,kZ=7682,OZ=7683,IZ=34055,BZ=34056,FZ=5386,UZ=512,zZ=513,GZ=514,VZ=515,HZ=516,qZ=517,WZ=518,y4=519,f6=512,DS=513,d6=514,kS=515,p6=516,A6=517,g6=518,m6=519,lw=35044,k0=35048,ok="300 es",eo=2e3,bu=2001;class Nu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Ra=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lk=1234567;const _y=Math.PI/180,qp=180/Math.PI;function fu(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ra[i&255]+Ra[i>>8&255]+Ra[i>>16&255]+Ra[i>>24&255]+"-"+Ra[e&255]+Ra[e>>8&255]+"-"+Ra[e>>16&15|64]+Ra[e>>24&255]+"-"+Ra[t&63|128]+Ra[t>>8&255]+"-"+Ra[t>>16&255]+Ra[t>>24&255]+Ra[n&255]+Ra[n>>8&255]+Ra[n>>16&255]+Ra[n>>24&255]).toLowerCase()}function ci(i,e,t){return Math.max(e,Math.min(t,i))}function v6(i,e){return(i%e+e)%e}function jZ(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function XZ(i,e,t){return i!==e?(t-i)/(e-i):0}function wy(i,e,t){return(1-t)*i+t*e}function YZ(i,e,t,n){return wy(i,e,1-Math.exp(-t*n))}function $Z(i,e=1){return e-Math.abs(v6(i,e*2)-e)}function QZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function ZZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function KZ(i,e){return i+Math.floor(Math.random()*(e-i+1))}function JZ(i,e){return i+Math.random()*(e-i)}function eK(i){return i*(.5-Math.random())}function tK(i){i!==void 0&&(lk=i);let e=lk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function nK(i){return i*_y}function iK(i){return i*qp}function rK(i){return(i&i-1)===0&&i!==0}function sK(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function aK(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function oK(i,e,t,n,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+n)/2),u=a((e+n)/2),h=s((e-n)/2),d=a((e-n)/2),A=s((n-e)/2),x=a((n-e)/2);switch(r){case"XYX":i.set(o*u,l*h,l*d,o*c);break;case"YZY":i.set(l*d,o*u,l*h,o*c);break;case"ZXZ":i.set(l*h,l*d,o*u,o*c);break;case"XZX":i.set(o*u,l*x,l*A,o*c);break;case"YXY":i.set(l*A,o*u,l*x,o*c);break;case"ZYZ":i.set(l*x,l*A,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ka(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function ui(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Eg={DEG2RAD:_y,RAD2DEG:qp,generateUUID:fu,clamp:ci,euclideanModulo:v6,mapLinear:jZ,inverseLerp:XZ,lerp:wy,damp:YZ,pingpong:$Z,smoothstep:QZ,smootherstep:ZZ,randInt:KZ,randFloat:JZ,randFloatSpread:eK,seededRandom:tK,degToRad:nK,radToDeg:iK,isPowerOfTwo:rK,ceilPowerOfTwo:sK,floorPowerOfTwo:aK,setQuaternionFromProperEuler:oK,normalize:ui,denormalize:Ka};class lt{constructor(e=0,t=0){lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ci(this.x,e.x,t.x),this.y=ci(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ci(this.x,e,t),this.y=ci(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ci(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class kc{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const d=s[a+0],A=s[a+1],x=s[a+2],_=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=d,e[t+1]=A,e[t+2]=x,e[t+3]=_;return}if(h!==_||l!==d||c!==A||u!==x){let S=1-o;const w=l*d+c*A+u*x+h*_,C=w>=0?1:-1,P=1-w*w;if(P>Number.EPSILON){const D=Math.sqrt(P),B=Math.atan2(D,w*C);S=Math.sin(S*B)/D,o=Math.sin(o*B)/D}const L=o*C;if(l=l*S+d*L,c=c*S+A*L,u=u*S+x*L,h=h*S+_*L,S===1-o){const D=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=D,c*=D,u*=D,h*=D}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[a],d=s[a+1],A=s[a+2],x=s[a+3];return e[t]=o*x+u*h+l*A-c*d,e[t+1]=l*x+u*d+c*h-o*A,e[t+2]=c*x+u*A+o*d-l*h,e[t+3]=u*x-o*h-l*d-c*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(r/2),h=o(s/2),d=l(n/2),A=l(r/2),x=l(s/2);switch(a){case"XYZ":this._x=d*u*h+c*A*x,this._y=c*A*h-d*u*x,this._z=c*u*x+d*A*h,this._w=c*u*h-d*A*x;break;case"YXZ":this._x=d*u*h+c*A*x,this._y=c*A*h-d*u*x,this._z=c*u*x-d*A*h,this._w=c*u*h+d*A*x;break;case"ZXY":this._x=d*u*h-c*A*x,this._y=c*A*h+d*u*x,this._z=c*u*x+d*A*h,this._w=c*u*h-d*A*x;break;case"ZYX":this._x=d*u*h-c*A*x,this._y=c*A*h+d*u*x,this._z=c*u*x-d*A*h,this._w=c*u*h+d*A*x;break;case"YZX":this._x=d*u*h+c*A*x,this._y=c*A*h+d*u*x,this._z=c*u*x-d*A*h,this._w=c*u*h-d*A*x;break;case"XZY":this._x=d*u*h-c*A*x,this._y=c*A*h-d*u*x,this._z=c*u*x+d*A*h,this._w=c*u*h+d*A*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=n+o+h;if(d>0){const A=.5/Math.sqrt(d+1);this._w=.25/A,this._x=(u-l)*A,this._y=(s-c)*A,this._z=(a-r)*A}else if(n>o&&n>h){const A=2*Math.sqrt(1+n-o-h);this._w=(u-l)/A,this._x=.25*A,this._y=(r+a)/A,this._z=(s+c)/A}else if(o>h){const A=2*Math.sqrt(1+o-n-h);this._w=(s-c)/A,this._x=(r+a)/A,this._y=.25*A,this._z=(l+u)/A}else{const A=2*Math.sqrt(1+h-n-o);this._w=(a-r)/A,this._x=(s+c)/A,this._y=(l+u)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ci(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-r*o,this._w=a*u-n*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const A=1-t;return this._w=A*a+t*this._w,this._x=A*n+t*this._x,this._y=A*r+t*this._y,this._z=A*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(e=0,t=0,n=0){pe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ck.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ck.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*n),u=2*(o*t-s*r),h=2*(s*n-a*t);return this.x=t+l*c+a*h-o*u,this.y=n+l*u+o*c-s*h,this.z=r+l*h+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ci(this.x,e.x,t.x),this.y=ci(this.y,e.y,t.y),this.z=ci(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ci(this.x,e,t),this.y=ci(this.y,e,t),this.z=ci(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ci(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return OM.copy(this).projectOnVector(e),this.sub(OM)}reflect(e){return this.sub(OM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const OM=new pe,ck=new kc;class Kn{constructor(e,t,n,r,s,a,o,l,c){Kn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c)}set(e,t,n,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],h=n[7],d=n[2],A=n[5],x=n[8],_=r[0],S=r[3],w=r[6],C=r[1],P=r[4],L=r[7],D=r[2],B=r[5],k=r[8];return s[0]=a*_+o*C+l*D,s[3]=a*S+o*P+l*B,s[6]=a*w+o*L+l*k,s[1]=c*_+u*C+h*D,s[4]=c*S+u*P+h*B,s[7]=c*w+u*L+h*k,s[2]=d*_+A*C+x*D,s[5]=d*S+A*P+x*B,s[8]=d*w+A*L+x*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,d=o*l-u*s,A=c*s-a*l,x=t*h+n*d+r*A;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/x;return e[0]=h*_,e[1]=(r*c-u*n)*_,e[2]=(o*n-r*a)*_,e[3]=d*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-o*t)*_,e[6]=A*_,e[7]=(n*l-c*t)*_,e[8]=(a*t-n*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(IM.makeScale(e,t)),this}rotate(e){return this.premultiply(IM.makeRotation(-e)),this}translate(e,t){return this.premultiply(IM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const IM=new Kn;function y6(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function rx(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function GF(){const i=rx("canvas");return i.style.display="block",i}const uk={};function rl(i){i in uk||(uk[i]=!0,console.warn(i))}function lK(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function cK(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function uK(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const hk=new Kn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),fk=new Kn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function hK(){const i={enabled:!0,workingColorSpace:Cc,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===rn&&(r.r=Th(r.r),r.g=Th(r.g),r.b=Th(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===rn&&(r.r=Q0(r.r),r.g=Q0(r.g),r.b=Q0(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Za?Mg:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return rl("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return rl("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Cc]:{primaries:e,whitePoint:n,transfer:Mg,toXYZ:hk,fromXYZ:fk,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ma},outputColorSpaceConfig:{drawingBufferColorSpace:ma}},[ma]:{primaries:e,whitePoint:n,transfer:rn,toXYZ:hk,fromXYZ:fk,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ma}}}),i}const qn=hK();function Th(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Q0(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let ZA;class fK{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ZA===void 0&&(ZA=rx("canvas")),ZA.width=e.width,ZA.height=e.height;const r=ZA.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=ZA}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rx("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Th(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Th(t[n]/255)*255):t[n]=Th(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let dK=0;class x6{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:dK++}),this.uuid=fu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(BM(r[a].image)):s.push(BM(r[a]))}else s=BM(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function BM(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?fK.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pK=0;const FM=new pe;class Ts extends Nu{constructor(e=Ts.DEFAULT_IMAGE,t=Ts.DEFAULT_MAPPING,n=lu,r=lu,s=Bs,a=vo,o=ss,l=$r,c=Ts.DEFAULT_ANISOTROPY,u=Za){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pK++}),this.uuid=fu(),this.name="",this.source=new x6(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(FM).x}get height(){return this.source.getSize(FM).y}get depth(){return this.source.getSize(FM).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==l6)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vp:e.x=e.x-Math.floor(e.x);break;case lu:e.x=e.x<0?0:1;break;case Hp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Vp:e.y=e.y-Math.floor(e.y);break;case lu:e.y=e.y<0?0:1;break;case Hp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ts.DEFAULT_IMAGE=null;Ts.DEFAULT_MAPPING=l6;Ts.DEFAULT_ANISOTROPY=1;class Cn{constructor(e=0,t=0,n=0,r=1){Cn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],A=l[5],x=l[9],_=l[2],S=l[6],w=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-_)<.01&&Math.abs(x-S)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+_)<.1&&Math.abs(x+S)<.1&&Math.abs(c+A+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(c+1)/2,L=(A+1)/2,D=(w+1)/2,B=(u+d)/4,k=(h+_)/4,U=(x+S)/4;return P>L&&P>D?P<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(P),r=B/n,s=k/n):L>D?L<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(L),n=B/r,s=U/r):D<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(D),n=k/s,r=U/s),this.set(n,r,s,t),this}let C=Math.sqrt((S-x)*(S-x)+(h-_)*(h-_)+(d-u)*(d-u));return Math.abs(C)<.001&&(C=1),this.x=(S-x)/C,this.y=(h-_)/C,this.z=(d-u)/C,this.w=Math.acos((c+A+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ci(this.x,e.x,t.x),this.y=ci(this.y,e.y,t.y),this.z=ci(this.z,e.z,t.z),this.w=ci(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ci(this.x,e,t),this.y=ci(this.y,e,t),this.z=ci(this.z,e,t),this.w=ci(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ci(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hh extends Nu{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Bs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Cn(0,0,e,t),this.scissorTest=!1,this.viewport=new Cn(0,0,e,t);const r={width:e,height:t,depth:n.depth},s=new Ts(r);this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Bs,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new x6(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class cd extends Hh{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class b6 extends Ts{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Er,this.minFilter=Er,this.wrapR=lu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class AK extends Ts{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Er,this.minFilter=Er,this.wrapR=lu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qh{constructor(e=new pe(1/0,1/0,1/0),t=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(lc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(lc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=lc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,lc):lc.fromBufferAttribute(s,a),lc.applyMatrix4(e.matrixWorld),this.expandByPoint(lc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Xb.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Xb.copy(n.boundingBox)),Xb.applyMatrix4(e.matrixWorld),this.union(Xb)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,lc),lc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mv),Yb.subVectors(this.max,Mv),KA.subVectors(e.a,Mv),JA.subVectors(e.b,Mv),e0.subVectors(e.c,Mv),Rf.subVectors(JA,KA),Pf.subVectors(e0,JA),Gd.subVectors(KA,e0);let t=[0,-Rf.z,Rf.y,0,-Pf.z,Pf.y,0,-Gd.z,Gd.y,Rf.z,0,-Rf.x,Pf.z,0,-Pf.x,Gd.z,0,-Gd.x,-Rf.y,Rf.x,0,-Pf.y,Pf.x,0,-Gd.y,Gd.x,0];return!UM(t,KA,JA,e0,Yb)||(t=[1,0,0,0,1,0,0,0,1],!UM(t,KA,JA,e0,Yb))?!1:($b.crossVectors(Rf,Pf),t=[$b.x,$b.y,$b.z],UM(t,KA,JA,e0,Yb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(lc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ch[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ch[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ch[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ch[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ch[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ch[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ch[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ch[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ch),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const ch=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],lc=new pe,Xb=new qh,KA=new pe,JA=new pe,e0=new pe,Rf=new pe,Pf=new pe,Gd=new pe,Mv=new pe,Yb=new pe,$b=new pe,Vd=new pe;function UM(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){Vd.fromArray(i,s);const o=r.x*Math.abs(Vd.x)+r.y*Math.abs(Vd.y)+r.z*Math.abs(Vd.z),l=e.dot(Vd),c=t.dot(Vd),u=n.dot(Vd);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const gK=new qh,Ev=new pe,zM=new pe;class Ad{constructor(e=new pe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):gK.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ev.subVectors(e,this.center);const t=Ev.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Ev,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ev.copy(e.center).add(zM)),this.expandByPoint(Ev.copy(e.center).sub(zM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const uh=new pe,GM=new pe,Qb=new pe,Nf=new pe,VM=new pe,Zb=new pe,HM=new pe;class Qx{constructor(e=new pe,t=new pe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,uh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=uh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(uh.copy(this.origin).addScaledVector(this.direction,t),uh.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){GM.copy(e).add(t).multiplyScalar(.5),Qb.copy(t).sub(e).normalize(),Nf.copy(this.origin).sub(GM);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Qb),o=Nf.dot(this.direction),l=-Nf.dot(Qb),c=Nf.lengthSq(),u=Math.abs(1-a*a);let h,d,A,x;if(u>0)if(h=a*l-o,d=a*o-l,x=s*u,h>=0)if(d>=-x)if(d<=x){const _=1/u;h*=_,d*=_,A=h*(h+a*d+2*o)+d*(a*h+d+2*l)+c}else d=s,h=Math.max(0,-(a*d+o)),A=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(a*d+o)),A=-h*h+d*(d+2*l)+c;else d<=-x?(h=Math.max(0,-(-a*s+o)),d=h>0?-s:Math.min(Math.max(-s,-l),s),A=-h*h+d*(d+2*l)+c):d<=x?(h=0,d=Math.min(Math.max(-s,-l),s),A=d*(d+2*l)+c):(h=Math.max(0,-(a*s+o)),d=h>0?s:Math.min(Math.max(-s,-l),s),A=-h*h+d*(d+2*l)+c);else d=a>0?-s:s,h=Math.max(0,-(a*d+o)),A=-h*h+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(GM).addScaledVector(Qb,d),A}intersectSphere(e,t){uh.subVectors(e.center,this.origin);const n=uh.dot(this.direction),r=uh.dot(uh)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),n>l||o>r)||((o>n||n!==n)&&(n=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,uh)!==null}intersectTriangle(e,t,n,r,s){VM.subVectors(t,e),Zb.subVectors(n,e),HM.crossVectors(VM,Zb);let a=this.direction.dot(HM),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Nf.subVectors(this.origin,e);const l=o*this.direction.dot(Zb.crossVectors(Nf,Zb));if(l<0)return null;const c=o*this.direction.dot(VM.cross(Nf));if(c<0||l+c>a)return null;const u=-o*Nf.dot(HM);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Un{constructor(e,t,n,r,s,a,o,l,c,u,h,d,A,x,_,S){Un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c,u,h,d,A,x,_,S)}set(e,t,n,r,s,a,o,l,c,u,h,d,A,x,_,S){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=r,w[1]=s,w[5]=a,w[9]=o,w[13]=l,w[2]=c,w[6]=u,w[10]=h,w[14]=d,w[3]=A,w[7]=x,w[11]=_,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Un().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/t0.setFromMatrixColumn(e,0).length(),s=1/t0.setFromMatrixColumn(e,1).length(),a=1/t0.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=a*u,A=a*h,x=o*u,_=o*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=A+x*c,t[5]=d-_*c,t[9]=-o*l,t[2]=_-d*c,t[6]=x+A*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*u,A=l*h,x=c*u,_=c*h;t[0]=d+_*o,t[4]=x*o-A,t[8]=a*c,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=A*o-x,t[6]=_+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*u,A=l*h,x=c*u,_=c*h;t[0]=d-_*o,t[4]=-a*h,t[8]=x+A*o,t[1]=A+x*o,t[5]=a*u,t[9]=_-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*u,A=a*h,x=o*u,_=o*h;t[0]=l*u,t[4]=x*c-A,t[8]=d*c+_,t[1]=l*h,t[5]=_*c+d,t[9]=A*c-x,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,A=a*c,x=o*l,_=o*c;t[0]=l*u,t[4]=_-d*h,t[8]=x*h+A,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=A*h+x,t[10]=d-_*h}else if(e.order==="XZY"){const d=a*l,A=a*c,x=o*l,_=o*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+_,t[5]=a*u,t[9]=A*h-x,t[2]=x*h-A,t[6]=o*u,t[10]=_*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mK,e,vK)}lookAt(e,t,n){const r=this.elements;return Ho.subVectors(e,t),Ho.lengthSq()===0&&(Ho.z=1),Ho.normalize(),Lf.crossVectors(n,Ho),Lf.lengthSq()===0&&(Math.abs(n.z)===1?Ho.x+=1e-4:Ho.z+=1e-4,Ho.normalize(),Lf.crossVectors(n,Ho)),Lf.normalize(),Kb.crossVectors(Ho,Lf),r[0]=Lf.x,r[4]=Kb.x,r[8]=Ho.x,r[1]=Lf.y,r[5]=Kb.y,r[9]=Ho.y,r[2]=Lf.z,r[6]=Kb.z,r[10]=Ho.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],h=n[5],d=n[9],A=n[13],x=n[2],_=n[6],S=n[10],w=n[14],C=n[3],P=n[7],L=n[11],D=n[15],B=r[0],k=r[4],U=r[8],F=r[12],z=r[1],V=r[5],W=r[9],X=r[13],J=r[2],K=r[6],Y=r[10],ee=r[14],se=r[3],fe=r[7],ne=r[11],he=r[15];return s[0]=a*B+o*z+l*J+c*se,s[4]=a*k+o*V+l*K+c*fe,s[8]=a*U+o*W+l*Y+c*ne,s[12]=a*F+o*X+l*ee+c*he,s[1]=u*B+h*z+d*J+A*se,s[5]=u*k+h*V+d*K+A*fe,s[9]=u*U+h*W+d*Y+A*ne,s[13]=u*F+h*X+d*ee+A*he,s[2]=x*B+_*z+S*J+w*se,s[6]=x*k+_*V+S*K+w*fe,s[10]=x*U+_*W+S*Y+w*ne,s[14]=x*F+_*X+S*ee+w*he,s[3]=C*B+P*z+L*J+D*se,s[7]=C*k+P*V+L*K+D*fe,s[11]=C*U+P*W+L*Y+D*ne,s[15]=C*F+P*X+L*ee+D*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],A=e[14],x=e[3],_=e[7],S=e[11],w=e[15];return x*(+s*l*h-r*c*h-s*o*d+n*c*d+r*o*A-n*l*A)+_*(+t*l*A-t*c*d+s*a*d-r*a*A+r*c*u-s*l*u)+S*(+t*c*h-t*o*A-s*a*h+n*a*A+s*o*u-n*c*u)+w*(-r*o*u-t*l*h+t*o*d+r*a*h-n*a*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],A=e[11],x=e[12],_=e[13],S=e[14],w=e[15],C=h*S*c-_*d*c+_*l*A-o*S*A-h*l*w+o*d*w,P=x*d*c-u*S*c-x*l*A+a*S*A+u*l*w-a*d*w,L=u*_*c-x*h*c+x*o*A-a*_*A-u*o*w+a*h*w,D=x*h*l-u*_*l-x*o*d+a*_*d+u*o*S-a*h*S,B=t*C+n*P+r*L+s*D;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/B;return e[0]=C*k,e[1]=(_*d*s-h*S*s-_*r*A+n*S*A+h*r*w-n*d*w)*k,e[2]=(o*S*s-_*l*s+_*r*c-n*S*c-o*r*w+n*l*w)*k,e[3]=(h*l*s-o*d*s-h*r*c+n*d*c+o*r*A-n*l*A)*k,e[4]=P*k,e[5]=(u*S*s-x*d*s+x*r*A-t*S*A-u*r*w+t*d*w)*k,e[6]=(x*l*s-a*S*s-x*r*c+t*S*c+a*r*w-t*l*w)*k,e[7]=(a*d*s-u*l*s+u*r*c-t*d*c-a*r*A+t*l*A)*k,e[8]=L*k,e[9]=(x*h*s-u*_*s-x*n*A+t*_*A+u*n*w-t*h*w)*k,e[10]=(a*_*s-x*o*s+x*n*c-t*_*c-a*n*w+t*o*w)*k,e[11]=(u*o*s-a*h*s-u*n*c+t*h*c+a*n*A-t*o*A)*k,e[12]=D*k,e[13]=(u*_*r-x*h*r+x*n*d-t*_*d-u*n*S+t*h*S)*k,e[14]=(x*o*r-a*_*r-x*n*l+t*_*l+a*n*S-t*o*S)*k,e[15]=(a*h*r-u*o*r+u*n*l-t*h*l-a*n*d+t*o*d)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+n,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,h=o+o,d=s*c,A=s*u,x=s*h,_=a*u,S=a*h,w=o*h,C=l*c,P=l*u,L=l*h,D=n.x,B=n.y,k=n.z;return r[0]=(1-(_+w))*D,r[1]=(A+L)*D,r[2]=(x-P)*D,r[3]=0,r[4]=(A-L)*B,r[5]=(1-(d+w))*B,r[6]=(S+C)*B,r[7]=0,r[8]=(x+P)*k,r[9]=(S-C)*k,r[10]=(1-(d+_))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=t0.set(r[0],r[1],r[2]).length();const a=t0.set(r[4],r[5],r[6]).length(),o=t0.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],cc.copy(this);const c=1/s,u=1/a,h=1/o;return cc.elements[0]*=c,cc.elements[1]*=c,cc.elements[2]*=c,cc.elements[4]*=u,cc.elements[5]*=u,cc.elements[6]*=u,cc.elements[8]*=h,cc.elements[9]*=h,cc.elements[10]*=h,t.setFromRotationMatrix(cc),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=eo){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let A,x;if(o===eo)A=-(a+s)/(a-s),x=-2*a*s/(a-s);else if(o===bu)A=-a/(a-s),x=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=A,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=eo){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(a-s),d=(t+e)*c,A=(n+r)*u;let x,_;if(o===eo)x=(a+s)*h,_=-2*h;else if(o===bu)x=s*h,_=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-A,l[2]=0,l[6]=0,l[10]=_,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const t0=new pe,cc=new Un,mK=new pe(0,0,0),vK=new pe(1,1,1),Lf=new pe,Kb=new pe,Ho=new pe,dk=new Un,pk=new kc;class ba{constructor(e=0,t=0,n=0,r=ba.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],A=r[10];switch(t){case"XYZ":this._y=Math.asin(ci(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,A),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ci(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,A),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(ci(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,A),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ci(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,A),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(ci(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,A));break;case"XZY":this._z=Math.asin(-ci(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return dk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(dk,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return pk.setFromEuler(this),this.setFromQuaternion(pk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ba.DEFAULT_ORDER="XYZ";class _6{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yK=0;const Ak=new pe,n0=new kc,hh=new Un,Jb=new pe,Cv=new pe,xK=new pe,bK=new kc,gk=new pe(1,0,0),mk=new pe(0,1,0),vk=new pe(0,0,1),yk={type:"added"},_K={type:"removed"},i0={type:"childadded",child:null},qM={type:"childremoved",child:null};class Lr extends Nu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yK++}),this.uuid=fu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lr.DEFAULT_UP.clone();const e=new pe,t=new ba,n=new kc,r=new pe(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Un},normalMatrix:{value:new Kn}}),this.matrix=new Un,this.matrixWorld=new Un,this.matrixAutoUpdate=Lr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Lr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _6,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return n0.setFromAxisAngle(e,t),this.quaternion.multiply(n0),this}rotateOnWorldAxis(e,t){return n0.setFromAxisAngle(e,t),this.quaternion.premultiply(n0),this}rotateX(e){return this.rotateOnAxis(gk,e)}rotateY(e){return this.rotateOnAxis(mk,e)}rotateZ(e){return this.rotateOnAxis(vk,e)}translateOnAxis(e,t){return Ak.copy(e).applyQuaternion(this.quaternion),this.position.add(Ak.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(gk,e)}translateY(e){return this.translateOnAxis(mk,e)}translateZ(e){return this.translateOnAxis(vk,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(hh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Jb.copy(e):Jb.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Cv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hh.lookAt(Cv,Jb,this.up):hh.lookAt(Jb,Cv,this.up),this.quaternion.setFromRotationMatrix(hh),r&&(hh.extractRotation(r.matrixWorld),n0.setFromRotationMatrix(hh),this.quaternion.premultiply(n0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(yk),i0.child=e,this.dispatchEvent(i0),i0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_K),qM.child=e,this.dispatchEvent(qM),qM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),hh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),hh.multiply(e.parent.matrixWorld)),e.applyMatrix4(hh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(yk),i0.child=e,this.dispatchEvent(i0),i0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cv,e,xK),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cv,bK,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),h=a(e.shapes),d=a(e.skeletons),A=a(e.animations),x=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),h.length>0&&(n.shapes=h),d.length>0&&(n.skeletons=d),A.length>0&&(n.animations=A),x.length>0&&(n.nodes=x)}return n.object=r,n;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Lr.DEFAULT_UP=new pe(0,1,0);Lr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Lr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const uc=new pe,fh=new pe,WM=new pe,dh=new pe,r0=new pe,s0=new pe,xk=new pe,jM=new pe,XM=new pe,YM=new pe,$M=new Cn,QM=new Cn,ZM=new Cn;class vc{constructor(e=new pe,t=new pe,n=new pe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),uc.subVectors(e,t),r.cross(uc);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){uc.subVectors(r,t),fh.subVectors(n,t),WM.subVectors(e,t);const a=uc.dot(uc),o=uc.dot(fh),l=uc.dot(WM),c=fh.dot(fh),u=fh.dot(WM),h=a*c-o*o;if(h===0)return s.set(0,0,0),null;const d=1/h,A=(c*l-o*u)*d,x=(a*u-o*l)*d;return s.set(1-A-x,x,A)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,dh)===null?!1:dh.x>=0&&dh.y>=0&&dh.x+dh.y<=1}static getInterpolation(e,t,n,r,s,a,o,l){return this.getBarycoord(e,t,n,r,dh)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,dh.x),l.addScaledVector(a,dh.y),l.addScaledVector(o,dh.z),l)}static getInterpolatedAttribute(e,t,n,r,s,a){return $M.setScalar(0),QM.setScalar(0),ZM.setScalar(0),$M.fromBufferAttribute(e,t),QM.fromBufferAttribute(e,n),ZM.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector($M,s.x),a.addScaledVector(QM,s.y),a.addScaledVector(ZM,s.z),a}static isFrontFacing(e,t,n,r){return uc.subVectors(n,t),fh.subVectors(e,t),uc.cross(fh).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uc.subVectors(this.c,this.b),fh.subVectors(this.a,this.b),uc.cross(fh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return vc.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return vc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,o;r0.subVectors(r,n),s0.subVectors(s,n),jM.subVectors(e,n);const l=r0.dot(jM),c=s0.dot(jM);if(l<=0&&c<=0)return t.copy(n);XM.subVectors(e,r);const u=r0.dot(XM),h=s0.dot(XM);if(u>=0&&h<=u)return t.copy(r);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(n).addScaledVector(r0,a);YM.subVectors(e,s);const A=r0.dot(YM),x=s0.dot(YM);if(x>=0&&A<=x)return t.copy(s);const _=A*c-l*x;if(_<=0&&c>=0&&x<=0)return o=c/(c-x),t.copy(n).addScaledVector(s0,o);const S=u*x-A*h;if(S<=0&&h-u>=0&&A-x>=0)return xk.subVectors(s,r),o=(h-u)/(h-u+(A-x)),t.copy(r).addScaledVector(xk,o);const w=1/(S+_+d);return a=_*w,o=d*w,t.copy(n).addScaledVector(r0,a).addScaledVector(s0,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const VF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Df={h:0,s:0,l:0},e2={h:0,s:0,l:0};function KM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let un=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ma){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=qn.workingColorSpace){return this.r=e,this.g=t,this.b=n,qn.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=qn.workingColorSpace){if(e=v6(e,1),t=ci(t,0,1),n=ci(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=KM(a,s,e+1/3),this.g=KM(a,s,e),this.b=KM(a,s,e-1/3)}return qn.colorSpaceToWorking(this,r),this}setStyle(e,t=ma){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ma){const n=VF[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Th(e.r),this.g=Th(e.g),this.b=Th(e.b),this}copyLinearToSRGB(e){return this.r=Q0(e.r),this.g=Q0(e.g),this.b=Q0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ma){return qn.workingToColorSpace(Pa.copy(this),e),Math.round(ci(Pa.r*255,0,255))*65536+Math.round(ci(Pa.g*255,0,255))*256+Math.round(ci(Pa.b*255,0,255))}getHexString(e=ma){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qn.workingColorSpace){qn.workingToColorSpace(Pa.copy(this),t);const n=Pa.r,r=Pa.g,s=Pa.b,a=Math.max(n,r,s),o=Math.min(n,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=u<=.5?h/(a+o):h/(2-a-o),a){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=qn.workingColorSpace){return qn.workingToColorSpace(Pa.copy(this),t),e.r=Pa.r,e.g=Pa.g,e.b=Pa.b,e}getStyle(e=ma){qn.workingToColorSpace(Pa.copy(this),e);const t=Pa.r,n=Pa.g,r=Pa.b;return e!==ma?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Df),this.setHSL(Df.h+e,Df.s+t,Df.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Df),e.getHSL(e2);const n=wy(Df.h,e2.h,t),r=wy(Df.s,e2.s,t),s=wy(Df.l,e2.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Pa=new un;un.NAMES=VF;let wK=0;class Fa extends Nu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wK++}),this.uuid=fu(),this.name="",this.type="Material",this.blending=to,this.side=So,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Gy,this.blendDst=Vy,this.blendEquation=ka,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new un(0,0,0),this.blendAlpha=0,this.depthFunc=ld,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=y4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rp,this.stencilZFail=rp,this.stencilZPass=rp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==to&&(n.blending=this.blending),this.side!==So&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Gy&&(n.blendSrc=this.blendSrc),this.blendDst!==Vy&&(n.blendDst=this.blendDst),this.blendEquation!==ka&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ld&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==y4&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==rp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==rp&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Il extends Fa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ba,this.combine=Xx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yh=SK();function SK(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function qo(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=ci(i,-65504,65504),yh.floatView[0]=i;const e=yh.uint32View[0],t=e>>23&511;return yh.baseTable[t]+((e&8388607)>>yh.shiftTable[t])}function t2(i){const e=i>>10;return yh.uint32View[0]=yh.mantissaTable[yh.offsetTable[e]+(i&1023)]+yh.exponentTable[e],yh.floatView[0]}const ys=new pe,n2=new lt;let TK=0;class Vr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:TK++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=lw,this.updateRanges=[],this.gpuType=ps,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)n2.fromBufferAttribute(this,t),n2.applyMatrix3(e),this.setXY(t,n2.x,n2.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ys.fromBufferAttribute(this,t),ys.applyMatrix3(e),this.setXYZ(t,ys.x,ys.y,ys.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ys.fromBufferAttribute(this,t),ys.applyMatrix4(e),this.setXYZ(t,ys.x,ys.y,ys.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ys.fromBufferAttribute(this,t),ys.applyNormalMatrix(e),this.setXYZ(t,ys.x,ys.y,ys.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ys.fromBufferAttribute(this,t),ys.transformDirection(e),this.setXYZ(t,ys.x,ys.y,ys.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ka(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ui(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ka(t,this.array)),t}setX(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ka(t,this.array)),t}setY(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ka(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ka(t,this.array)),t}setW(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array),r=ui(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array),r=ui(r,this.array),s=ui(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==lw&&(e.usage=this.usage),e}}class w6 extends Vr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class S6 extends Vr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class HF extends Vr{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=t2(this.array[e*this.itemSize]);return this.normalized&&(t=Ka(t,this.array)),t}setX(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize]=qo(t),this}getY(e){let t=t2(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ka(t,this.array)),t}setY(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+1]=qo(t),this}getZ(e){let t=t2(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ka(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+2]=qo(t),this}getW(e){let t=t2(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ka(t,this.array)),t}setW(e,t){return this.normalized&&(t=ui(t,this.array)),this.array[e*this.itemSize+3]=qo(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array)),this.array[e+0]=qo(t),this.array[e+1]=qo(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array),r=ui(r,this.array)),this.array[e+0]=qo(t),this.array[e+1]=qo(n),this.array[e+2]=qo(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array),r=ui(r,this.array),s=ui(s,this.array)),this.array[e+0]=qo(t),this.array[e+1]=qo(n),this.array[e+2]=qo(r),this.array[e+3]=qo(s),this}}class ki extends Vr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let MK=0;const Cl=new Un,JM=new Lr,a0=new pe,Wo=new qh,Rv=new qh,Zs=new pe;class lr extends Nu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:MK++}),this.uuid=fu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(y6(e)?S6:w6)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Kn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cl.makeRotationFromQuaternion(e),this.applyMatrix4(Cl),this}rotateX(e){return Cl.makeRotationX(e),this.applyMatrix4(Cl),this}rotateY(e){return Cl.makeRotationY(e),this.applyMatrix4(Cl),this}rotateZ(e){return Cl.makeRotationZ(e),this.applyMatrix4(Cl),this}translate(e,t,n){return Cl.makeTranslation(e,t,n),this.applyMatrix4(Cl),this}scale(e,t,n){return Cl.makeScale(e,t,n),this.applyMatrix4(Cl),this}lookAt(e){return JM.lookAt(e),JM.updateMatrix(),this.applyMatrix4(JM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(a0).negate(),this.translate(a0.x,a0.y,a0.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new ki(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qh);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Wo.setFromBufferAttribute(s),this.morphTargetsRelative?(Zs.addVectors(this.boundingBox.min,Wo.min),this.boundingBox.expandByPoint(Zs),Zs.addVectors(this.boundingBox.max,Wo.max),this.boundingBox.expandByPoint(Zs)):(this.boundingBox.expandByPoint(Wo.min),this.boundingBox.expandByPoint(Wo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ad);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pe,1/0);return}if(e){const n=this.boundingSphere.center;if(Wo.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];Rv.setFromBufferAttribute(o),this.morphTargetsRelative?(Zs.addVectors(Wo.min,Rv.min),Wo.expandByPoint(Zs),Zs.addVectors(Wo.max,Rv.max),Wo.expandByPoint(Zs)):(Wo.expandByPoint(Rv.min),Wo.expandByPoint(Rv.max))}Wo.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Zs.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Zs));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Zs.fromBufferAttribute(o,c),l&&(a0.fromBufferAttribute(e,c),Zs.add(a0)),r=Math.max(r,n.distanceToSquared(Zs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Vr(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let U=0;U<n.count;U++)o[U]=new pe,l[U]=new pe;const c=new pe,u=new pe,h=new pe,d=new lt,A=new lt,x=new lt,_=new pe,S=new pe;function w(U,F,z){c.fromBufferAttribute(n,U),u.fromBufferAttribute(n,F),h.fromBufferAttribute(n,z),d.fromBufferAttribute(s,U),A.fromBufferAttribute(s,F),x.fromBufferAttribute(s,z),u.sub(c),h.sub(c),A.sub(d),x.sub(d);const V=1/(A.x*x.y-x.x*A.y);isFinite(V)&&(_.copy(u).multiplyScalar(x.y).addScaledVector(h,-A.y).multiplyScalar(V),S.copy(h).multiplyScalar(A.x).addScaledVector(u,-x.x).multiplyScalar(V),o[U].add(_),o[F].add(_),o[z].add(_),l[U].add(S),l[F].add(S),l[z].add(S))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let U=0,F=C.length;U<F;++U){const z=C[U],V=z.start,W=z.count;for(let X=V,J=V+W;X<J;X+=3)w(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const P=new pe,L=new pe,D=new pe,B=new pe;function k(U){D.fromBufferAttribute(r,U),B.copy(D);const F=o[U];P.copy(F),P.sub(D.multiplyScalar(D.dot(F))).normalize(),L.crossVectors(B,F);const V=L.dot(l[U])<0?-1:1;a.setXYZW(U,P.x,P.y,P.z,V)}for(let U=0,F=C.length;U<F;++U){const z=C[U],V=z.start,W=z.count;for(let X=V,J=V+W;X<J;X+=3)k(e.getX(X+0)),k(e.getX(X+1)),k(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Vr(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,A=n.count;d<A;d++)n.setXYZ(d,0,0,0);const r=new pe,s=new pe,a=new pe,o=new pe,l=new pe,c=new pe,u=new pe,h=new pe;if(e)for(let d=0,A=e.count;d<A;d+=3){const x=e.getX(d+0),_=e.getX(d+1),S=e.getX(d+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,_),a.fromBufferAttribute(t,S),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),o.fromBufferAttribute(n,x),l.fromBufferAttribute(n,_),c.fromBufferAttribute(n,S),o.add(u),l.add(u),c.add(u),n.setXYZ(x,o.x,o.y,o.z),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(S,c.x,c.y,c.z)}else for(let d=0,A=t.count;d<A;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),n.setXYZ(d+0,u.x,u.y,u.z),n.setXYZ(d+1,u.x,u.y,u.z),n.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Zs.fromBufferAttribute(e,t),Zs.normalize(),e.setXYZ(t,Zs.x,Zs.y,Zs.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,h=o.normalized,d=new c.constructor(l.length*u);let A=0,x=0;for(let _=0,S=l.length;_<S;_++){o.isInterleavedBufferAttribute?A=l[_]*o.data.stride+o.offset:A=l[_]*u;for(let w=0;w<u;w++)d[x++]=c[A++]}return new Vr(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new lr,n=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,h=c.length;u<h;u++){const d=c[u],A=e(d,n);l.push(A)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const A=c[h];u.push(A.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,A=h.length;d<A;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const bk=new Un,Hd=new Qx,i2=new Ad,_k=new pe,r2=new pe,s2=new pe,a2=new pe,eE=new pe,o2=new pe,wk=new pe,l2=new pe;class zi extends Lr{constructor(e=new lr,t=new Il){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){o2.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],h=s[l];u!==0&&(eE.fromBufferAttribute(h,e),a?o2.addScaledVector(eE,u):o2.addScaledVector(eE.sub(t),u))}t.add(o2)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),i2.copy(n.boundingSphere),i2.applyMatrix4(s),Hd.copy(e.ray).recast(e.near),!(i2.containsPoint(Hd.origin)===!1&&(Hd.intersectSphere(i2,_k)===null||Hd.origin.distanceToSquared(_k)>(e.far-e.near)**2))&&(bk.copy(s).invert(),Hd.copy(e.ray).applyMatrix4(bk),!(n.boundingBox!==null&&Hd.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Hd)))}_computeIntersections(e,t,n){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,A=s.drawRange;if(o!==null)if(Array.isArray(a))for(let x=0,_=d.length;x<_;x++){const S=d[x],w=a[S.materialIndex],C=Math.max(S.start,A.start),P=Math.min(o.count,Math.min(S.start+S.count,A.start+A.count));for(let L=C,D=P;L<D;L+=3){const B=o.getX(L),k=o.getX(L+1),U=o.getX(L+2);r=c2(this,w,e,n,c,u,h,B,k,U),r&&(r.faceIndex=Math.floor(L/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,A.start),_=Math.min(o.count,A.start+A.count);for(let S=x,w=_;S<w;S+=3){const C=o.getX(S),P=o.getX(S+1),L=o.getX(S+2);r=c2(this,a,e,n,c,u,h,C,P,L),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let x=0,_=d.length;x<_;x++){const S=d[x],w=a[S.materialIndex],C=Math.max(S.start,A.start),P=Math.min(l.count,Math.min(S.start+S.count,A.start+A.count));for(let L=C,D=P;L<D;L+=3){const B=L,k=L+1,U=L+2;r=c2(this,w,e,n,c,u,h,B,k,U),r&&(r.faceIndex=Math.floor(L/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,A.start),_=Math.min(l.count,A.start+A.count);for(let S=x,w=_;S<w;S+=3){const C=S,P=S+1,L=S+2;r=c2(this,a,e,n,c,u,h,C,P,L),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function EK(i,e,t,n,r,s,a,o){let l;if(e.side===sr?l=n.intersectTriangle(a,s,r,!0,o):l=n.intersectTriangle(r,s,a,e.side===So,o),l===null)return null;l2.copy(o),l2.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(l2);return c<t.near||c>t.far?null:{distance:c,point:l2.clone(),object:i}}function c2(i,e,t,n,r,s,a,o,l,c){i.getVertexPosition(o,r2),i.getVertexPosition(l,s2),i.getVertexPosition(c,a2);const u=EK(i,e,t,n,r2,s2,a2,wk);if(u){const h=new pe;vc.getBarycoord(wk,r2,s2,a2,h),r&&(u.uv=vc.getInterpolatedAttribute(r,o,l,c,h,new lt)),s&&(u.uv1=vc.getInterpolatedAttribute(s,o,l,c,h,new lt)),a&&(u.normal=vc.getInterpolatedAttribute(a,o,l,c,h,new pe),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new pe,materialIndex:0};vc.getNormal(r2,s2,a2,d.normal),u.face=d,u.barycoord=h}return u}class gd extends lr{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],h=[];let d=0,A=0;x("z","y","x",-1,-1,n,t,e,a,s,0),x("z","y","x",1,-1,n,t,-e,a,s,1),x("x","z","y",1,1,e,n,t,r,a,2),x("x","z","y",1,-1,e,n,-t,r,a,3),x("x","y","z",1,-1,e,t,n,r,s,4),x("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new ki(c,3)),this.setAttribute("normal",new ki(u,3)),this.setAttribute("uv",new ki(h,2));function x(_,S,w,C,P,L,D,B,k,U,F){const z=L/k,V=D/U,W=L/2,X=D/2,J=B/2,K=k+1,Y=U+1;let ee=0,se=0;const fe=new pe;for(let ne=0;ne<Y;ne++){const he=ne*V-X;for(let Te=0;Te<K;Te++){const Pe=Te*z-W;fe[_]=Pe*C,fe[S]=he*P,fe[w]=J,c.push(fe.x,fe.y,fe.z),fe[_]=0,fe[S]=0,fe[w]=B>0?1:-1,u.push(fe.x,fe.y,fe.z),h.push(Te/k),h.push(1-ne/U),ee+=1}}for(let ne=0;ne<U;ne++)for(let he=0;he<k;he++){const Te=d+he+K*ne,Pe=d+he+K*(ne+1),_e=d+(he+1)+K*(ne+1),Ie=d+(he+1)+K*ne;l.push(Te,Pe,Ie),l.push(Pe,_e,Ie),se+=6}o.addGroup(A,se,F),A+=se,d+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Cg(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function ja(i){const e={};for(let t=0;t<i.length;t++){const n=Cg(i[t]);for(const r in n)e[r]=n[r]}return e}function CK(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function qF(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qn.workingColorSpace}const OS={clone:Cg,merge:ja};var RK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,PK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Eo extends Fa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=RK,this.fragmentShader=PK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cg(e.uniforms),this.uniformsGroups=CK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Zx extends Lr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Un,this.projectionMatrix=new Un,this.projectionMatrixInverse=new Un,this.coordinateSystem=eo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const kf=new pe,Sk=new lt,Tk=new lt;class ia extends Zx{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=qp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(_y*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qp*2*Math.atan(Math.tan(_y*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){kf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(kf.x,kf.y).multiplyScalar(-e/kf.z),kf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(kf.x,kf.y).multiplyScalar(-e/kf.z)}getViewSize(e,t){return this.getViewBounds(e,Sk,Tk),t.subVectors(Tk,Sk)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(_y*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*n/c,r*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const o0=-90,l0=1;class WF extends Lr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ia(o0,l0,e,t);r.layers=this.layers,this.add(r);const s=new ia(o0,l0,e,t);s.layers=this.layers,this.add(s);const a=new ia(o0,l0,e,t);a.layers=this.layers,this.add(a);const o=new ia(o0,l0,e,t);o.layers=this.layers,this.add(o);const l=new ia(o0,l0,e,t);l.layers=this.layers,this.add(l);const c=new ia(o0,l0,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===eo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===bu)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=_,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(h,d,A),e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}}class Kx extends Ts{constructor(e=[],t=yu,n,r,s,a,o,l,c,u){super(e,t,n,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jF extends cd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Kx(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new gd(5,5,5),s=new Eo({name:"CubemapFromEquirect",uniforms:Cg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:sr,blending:To});s.uniforms.tEquirect.value=t;const a=new zi(r,s),o=t.minFilter;return t.minFilter===vo&&(t.minFilter=Bs),new WF(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}let yo=class extends Lr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const NK={type:"move"};class R_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const _ of e.hand.values()){const S=t.getJointPose(_,n),w=this._getHandJoint(c,_);S!==null&&(w.matrix.fromArray(S.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=S.radius),w.visible=S!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),A=.02,x=.005;c.inputState.pinching&&d>A+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=A-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(NK)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new yo;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class IS extends Lr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ba,this.environmentIntensity=1,this.environmentRotation=new ba,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class T6{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=lw,this.updateRanges=[],this.version=0,this.uuid=fu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qa=new pe;class cu{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)qa.fromBufferAttribute(this,t),qa.applyMatrix4(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)qa.fromBufferAttribute(this,t),qa.applyNormalMatrix(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)qa.fromBufferAttribute(this,t),qa.transformDirection(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ka(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ui(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ui(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ka(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ka(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ka(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ka(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array),r=ui(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ui(t,this.array),n=ui(n,this.array),r=ui(r,this.array),s=ui(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Vr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class LK extends Fa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new un(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class DK extends Ts{constructor(e=null,t=1,n=1,r,s,a,o,l,c=Er,u=Er,h,d){super(null,a,o,l,c,u,r,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nd extends Vr{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const tE=new pe,kK=new pe,OK=new Kn;class iu{constructor(e=new pe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=tE.subVectors(n,t).cross(kK.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(tE),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||OK.getNormalMatrix(e),r=this.coplanarPoint(tE).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qd=new Ad,u2=new pe;class am{constructor(e=new iu,t=new iu,n=new iu,r=new iu,s=new iu,a=new iu){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=eo){const n=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],A=r[8],x=r[9],_=r[10],S=r[11],w=r[12],C=r[13],P=r[14],L=r[15];if(n[0].setComponents(l-s,d-c,S-A,L-w).normalize(),n[1].setComponents(l+s,d+c,S+A,L+w).normalize(),n[2].setComponents(l+a,d+u,S+x,L+C).normalize(),n[3].setComponents(l-a,d-u,S-x,L-C).normalize(),n[4].setComponents(l-o,d-h,S-_,L-P).normalize(),t===eo)n[5].setComponents(l+o,d+h,S+_,L+P).normalize();else if(t===bu)n[5].setComponents(o,h,_,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qd)}intersectsSprite(e){return qd.center.set(0,0,0),qd.radius=.7071067811865476,qd.applyMatrix4(e.matrixWorld),this.intersectsSphere(qd)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(u2.x=r.normal.x>0?e.max.x:e.min.x,u2.y=r.normal.y>0?e.max.y:e.min.y,u2.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(u2)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const $c=new Un,Qc=new am;class M6{constructor(){this.coordinateSystem=eo}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if($c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix($c,this.coordinateSystem),Qc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if($c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix($c,this.coordinateSystem),Qc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if($c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix($c,this.coordinateSystem),Qc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if($c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix($c,this.coordinateSystem),Qc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if($c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix($c,this.coordinateSystem),Qc.containsPoint(e))return!0}return!1}clone(){return new M6}}class om extends Fa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new un(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const cw=new pe,uw=new pe,Mk=new Un,Pv=new Qx,h2=new Ad,nE=new pe,Ek=new pe;class BS extends Lr{constructor(e=new lr,t=new om){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)cw.fromBufferAttribute(t,r-1),uw.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=cw.distanceTo(uw);e.setAttribute("lineDistance",new ki(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),h2.copy(n.boundingSphere),h2.applyMatrix4(r),h2.radius+=s,e.ray.intersectsSphere(h2)===!1)return;Mk.copy(r).invert(),Pv.copy(e.ray).applyMatrix4(Mk);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=n.index,d=n.attributes.position;if(u!==null){const A=Math.max(0,a.start),x=Math.min(u.count,a.start+a.count);for(let _=A,S=x-1;_<S;_+=c){const w=u.getX(_),C=u.getX(_+1),P=f2(this,e,Pv,l,w,C,_);P&&t.push(P)}if(this.isLineLoop){const _=u.getX(x-1),S=u.getX(A),w=f2(this,e,Pv,l,_,S,x-1);w&&t.push(w)}}else{const A=Math.max(0,a.start),x=Math.min(d.count,a.start+a.count);for(let _=A,S=x-1;_<S;_+=c){const w=f2(this,e,Pv,l,_,_+1,_);w&&t.push(w)}if(this.isLineLoop){const _=f2(this,e,Pv,l,x-1,A,x-1);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function f2(i,e,t,n,r,s,a){const o=i.geometry.attributes.position;if(cw.fromBufferAttribute(o,r),uw.fromBufferAttribute(o,s),t.distanceSqToSegment(cw,uw,nE,Ek)>n)return;nE.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(nE);if(!(c<e.near||c>e.far))return{distance:c,point:Ek.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const Ck=new pe,Rk=new pe;class XF extends BS{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Ck.fromBufferAttribute(t,r),Rk.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Ck.distanceTo(Rk);e.setAttribute("lineDistance",new ki(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class E6 extends Fa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new un(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Pk=new Un,x4=new Qx,d2=new Ad,p2=new pe;class IK extends Lr{constructor(e=new lr,t=new E6){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),d2.copy(n.boundingSphere),d2.applyMatrix4(r),d2.radius+=s,e.ray.intersectsSphere(d2)===!1)return;Pk.copy(r).invert(),x4.copy(e.ray).applyMatrix4(Pk);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,h=n.attributes.position;if(c!==null){const d=Math.max(0,a.start),A=Math.min(c.count,a.start+a.count);for(let x=d,_=A;x<_;x++){const S=c.getX(x);p2.fromBufferAttribute(h,S),Nk(p2,S,l,r,e,t,this)}}else{const d=Math.max(0,a.start),A=Math.min(h.count,a.start+a.count);for(let x=d,_=A;x<_;x++)p2.fromBufferAttribute(h,x),Nk(p2,x,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Nk(i,e,t,n,r,s,a){const o=x4.distanceSqToPoint(i);if(o<t){const l=new pe;x4.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class YF extends Ts{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Er,this.minFilter=Er,this.generateMipmaps=!1,this.needsUpdate=!0}}class sl extends Ts{constructor(e,t,n=br,r,s,a,o=Er,l=Er,c,u=nl,h=1){if(u!==nl&&u!==il)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const d={width:e,height:t,depth:h};super(d,r,s,a,o,l,u,n,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new x6(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class FS extends lr{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new pe,u=new lt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const A=n+h/t*r;c.x=e*Math.cos(A),c.y=e*Math.sin(A),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[d]/e+1)/2,u.y=(a[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new ki(a,3)),this.setAttribute("normal",new ki(o,3)),this.setAttribute("uv",new ki(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class US extends lr{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],d=[],A=[];let x=0;const _=[],S=n/2;let w=0;C(),a===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(u),this.setAttribute("position",new ki(h,3)),this.setAttribute("normal",new ki(d,3)),this.setAttribute("uv",new ki(A,2));function C(){const L=new pe,D=new pe;let B=0;const k=(t-e)/n;for(let U=0;U<=s;U++){const F=[],z=U/s,V=z*(t-e)+e;for(let W=0;W<=r;W++){const X=W/r,J=X*l+o,K=Math.sin(J),Y=Math.cos(J);D.x=V*K,D.y=-z*n+S,D.z=V*Y,h.push(D.x,D.y,D.z),L.set(K,k,Y).normalize(),d.push(L.x,L.y,L.z),A.push(X,1-z),F.push(x++)}_.push(F)}for(let U=0;U<r;U++)for(let F=0;F<s;F++){const z=_[F][U],V=_[F+1][U],W=_[F+1][U+1],X=_[F][U+1];(e>0||F!==0)&&(u.push(z,V,X),B+=3),(t>0||F!==s-1)&&(u.push(V,W,X),B+=3)}c.addGroup(w,B,0),w+=B}function P(L){const D=x,B=new lt,k=new pe;let U=0;const F=L===!0?e:t,z=L===!0?1:-1;for(let W=1;W<=r;W++)h.push(0,S*z,0),d.push(0,z,0),A.push(.5,.5),x++;const V=x;for(let W=0;W<=r;W++){const J=W/r*l+o,K=Math.cos(J),Y=Math.sin(J);k.x=F*Y,k.y=S*z,k.z=F*K,h.push(k.x,k.y,k.z),d.push(0,z,0),B.x=K*.5+.5,B.y=Y*.5*z+.5,A.push(B.x,B.y),x++}for(let W=0;W<r;W++){const X=D+W,J=V+W;L===!0?u.push(J,J+1,X):u.push(J+1,J,X),U+=3}c.addGroup(w,U,L===!0?1:2),w+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new US(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=n[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===a)return r/(s-1);const u=n[r],d=n[r+1]-u,A=(a-u)/d;return(r+A)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new lt:new pe);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new pe,r=[],s=[],a=[],o=new pe,l=new Un;for(let A=0;A<=e;A++){const x=A/e;r[A]=this.getTangentAt(x,new pe)}s[0]=new pe,a[0]=new pe;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let A=1;A<=e;A++){if(s[A]=s[A-1].clone(),a[A]=a[A-1].clone(),o.crossVectors(r[A-1],r[A]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(ci(r[A-1].dot(r[A]),-1,1));s[A].applyMatrix4(l.makeRotationAxis(o,x))}a[A].crossVectors(r[A],s[A])}if(t===!0){let A=Math.acos(ci(s[0].dot(s[e]),-1,1));A/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(A=-A);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(r[x],A*x)),a[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class C6 extends Bc{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new lt){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,A=c-this.aY;l=d*u-A*h+this.aX,c=d*h+A*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class BK extends C6{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function R6(){let i=0,e=0,t=0,n=0;function r(s,a,o,l){i=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,h){let d=(a-s)/c-(o-s)/(c+u)+(o-a)/u,A=(o-a)/u-(l-a)/(u+h)+(l-o)/h;d*=u,A*=u,r(a,o,d,A)},calc:function(s){const a=s*s,o=a*s;return i+e*s+t*a+n*o}}}const A2=new pe,iE=new R6,rE=new R6,sE=new R6;class FK extends Bc{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new pe){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(A2.subVectors(r[0],r[1]).add(r[0]),c=A2);const h=r[o%s],d=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(A2.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=A2),this.curveType==="centripetal"||this.curveType==="chordal"){const A=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(h),A),_=Math.pow(h.distanceToSquared(d),A),S=Math.pow(d.distanceToSquared(u),A);_<1e-4&&(_=1),x<1e-4&&(x=_),S<1e-4&&(S=_),iE.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,x,_,S),rE.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,x,_,S),sE.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,x,_,S)}else this.curveType==="catmullrom"&&(iE.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),rE.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),sE.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return n.set(iE.calc(l),rE.calc(l),sE.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new pe().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Lk(i,e,t,n,r){const s=(n-e)*.5,a=(r-t)*.5,o=i*i,l=i*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*i+t}function UK(i,e){const t=1-i;return t*t*e}function zK(i,e){return 2*(1-i)*i*e}function GK(i,e){return i*i*e}function Sy(i,e,t,n){return UK(i,e)+zK(i,t)+GK(i,n)}function VK(i,e){const t=1-i;return t*t*t*e}function HK(i,e){const t=1-i;return 3*t*t*i*e}function qK(i,e){return 3*(1-i)*i*i*e}function WK(i,e){return i*i*i*e}function Ty(i,e,t,n,r){return VK(i,e)+HK(i,t)+qK(i,n)+WK(i,r)}class $F extends Bc{constructor(e=new lt,t=new lt,n=new lt,r=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new lt){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Ty(e,r.x,s.x,a.x,o.x),Ty(e,r.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QF extends Bc{constructor(e=new pe,t=new pe,n=new pe,r=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new pe){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Ty(e,r.x,s.x,a.x,o.x),Ty(e,r.y,s.y,a.y,o.y),Ty(e,r.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ZF extends Bc{constructor(e=new lt,t=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new lt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new lt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jK extends Bc{constructor(e=new pe,t=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new pe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KF extends Bc{constructor(e=new lt,t=new lt,n=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new lt){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(Sy(e,r.x,s.x,a.x),Sy(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JF extends Bc{constructor(e=new pe,t=new pe,n=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new pe){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(Sy(e,r.x,s.x,a.x),Sy(e,r.y,s.y,a.y),Sy(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eU extends Bc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new lt){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(Lk(o,l.x,c.x,u.x,h.x),Lk(o,l.y,c.y,u.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new lt().fromArray(r))}return this}}var hw=Object.freeze({__proto__:null,ArcCurve:BK,CatmullRomCurve3:FK,CubicBezierCurve:$F,CubicBezierCurve3:QF,EllipseCurve:C6,LineCurve:ZF,LineCurve3:jK,QuadraticBezierCurve:KF,QuadraticBezierCurve3:JF,SplineCurve:eU});class XK extends Bc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new hw[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new hw[r.type]().fromJSON(r))}return this}}let b4=class extends XK{constructor(e){super(),this.type="Path",this.currentPoint=new lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new ZF(this.currentPoint.clone(),new lt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new KF(this.currentPoint.clone(),new lt(e,t),new lt(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const o=new $F(this.currentPoint.clone(),new lt(e,t),new lt(n,r),new lt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new eU(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,r,s,a,o,l),this}absellipse(e,t,n,r,s,a,o,l){const c=new C6(e,t,n,r,s,a,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class P_ extends b4{constructor(e){super(e),this.uuid=fu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new b4().fromJSON(r))}return this}}function YK(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=tU(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c;if(n&&(s=JK(i,e,s,t)),i.length>80*t){o=1/0,l=1/0;let u=-1/0,h=-1/0;for(let d=t;d<r;d+=t){const A=i[d],x=i[d+1];A<o&&(o=A),x<l&&(l=x),A>u&&(u=A),x>h&&(h=x)}c=Math.max(u-o,h-l),c=c!==0?32767/c:0}return sx(s,a,t,o,l,c,0),a}function tU(i,e,t,n,r){let s;if(r===uJ(i,e,t,n)>0)for(let a=e;a<t;a+=n)s=Dk(a/n|0,i[a],i[a+1],s);else for(let a=t-n;a>=e;a-=n)s=Dk(a/n|0,i[a],i[a+1],s);return s&&Rg(s,s.next)&&(ox(s),s=s.next),s}function Wp(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Rg(t,t.next)||Xr(t.prev,t,t.next)===0)){if(ox(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function sx(i,e,t,n,r,s,a){if(!i)return;!a&&s&&rJ(i,n,r,s);let o=i;for(;i.prev!==i.next;){const l=i.prev,c=i.next;if(s?QK(i,n,r,s):$K(i)){e.push(l.i,i.i,c.i),ox(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=ZK(Wp(i),e),sx(i,e,t,n,r,s,2)):a===2&&KK(i,e,t,n,r,s):sx(Wp(i),e,t,n,r,s,1);break}}}function $K(i){const e=i.prev,t=i,n=i.next;if(Xr(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,u=Math.min(r,s,a),h=Math.min(o,l,c),d=Math.max(r,s,a),A=Math.max(o,l,c);let x=n.next;for(;x!==e;){if(x.x>=u&&x.x<=d&&x.y>=h&&x.y<=A&&cy(r,o,s,l,a,c,x.x,x.y)&&Xr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function QK(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Xr(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,A=Math.min(o,l,c),x=Math.min(u,h,d),_=Math.max(o,l,c),S=Math.max(u,h,d),w=_4(A,x,e,t,n),C=_4(_,S,e,t,n);let P=i.prevZ,L=i.nextZ;for(;P&&P.z>=w&&L&&L.z<=C;){if(P.x>=A&&P.x<=_&&P.y>=x&&P.y<=S&&P!==r&&P!==a&&cy(o,u,l,h,c,d,P.x,P.y)&&Xr(P.prev,P,P.next)>=0||(P=P.prevZ,L.x>=A&&L.x<=_&&L.y>=x&&L.y<=S&&L!==r&&L!==a&&cy(o,u,l,h,c,d,L.x,L.y)&&Xr(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;P&&P.z>=w;){if(P.x>=A&&P.x<=_&&P.y>=x&&P.y<=S&&P!==r&&P!==a&&cy(o,u,l,h,c,d,P.x,P.y)&&Xr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;L&&L.z<=C;){if(L.x>=A&&L.x<=_&&L.y>=x&&L.y<=S&&L!==r&&L!==a&&cy(o,u,l,h,c,d,L.x,L.y)&&Xr(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function ZK(i,e){let t=i;do{const n=t.prev,r=t.next.next;!Rg(n,r)&&iU(n,t,t.next,r)&&ax(n,r)&&ax(r,n)&&(e.push(n.i,t.i,r.i),ox(t),ox(t.next),t=i=r),t=t.next}while(t!==i);return Wp(t)}function KK(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&oJ(a,o)){let l=rU(a,o);a=Wp(a,a.next),l=Wp(l,l.next),sx(a,e,t,n,r,s,0),sx(l,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function JK(i,e,t,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,l=s<a-1?e[s+1]*n:i.length,c=tU(i,o,l,n,!1);c===c.next&&(c.steiner=!0),r.push(aJ(c))}r.sort(eJ);for(let s=0;s<r.length;s++)t=tJ(r[s],t);return t}function eJ(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function tJ(i,e){const t=nJ(i,e);if(!t)return e;const n=rU(t,i);return Wp(n,n.next),Wp(t,t.next)}function nJ(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,a;if(Rg(i,t))return t;do{if(Rg(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>s&&(s=h,a=t.x<t.next.x?t:t.next,h===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&nU(r<c?n:s,r,l,c,r<c?s:n,r,t.x,t.y)){const h=Math.abs(r-t.y)/(n-t.x);ax(t,i)&&(h<u||h===u&&(t.x>a.x||t.x===a.x&&iJ(a,t)))&&(a=t,u=h)}t=t.next}while(t!==o);return a}function iJ(i,e){return Xr(i.prev,i,e.prev)<0&&Xr(e.next,i,i.next)<0}function rJ(i,e,t,n){let r=i;do r.z===0&&(r.z=_4(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,sJ(r)}function sJ(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=a}s.nextZ=null,t*=2}while(e>1);return i}function _4(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function aJ(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function nU(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function cy(i,e,t,n,r,s,a,o){return!(i===a&&e===o)&&nU(i,e,t,n,r,s,a,o)}function oJ(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!lJ(i,e)&&(ax(i,e)&&ax(e,i)&&cJ(i,e)&&(Xr(i.prev,i,e.prev)||Xr(i,e.prev,e))||Rg(i,e)&&Xr(i.prev,i,i.next)>0&&Xr(e.prev,e,e.next)>0)}function Xr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Rg(i,e){return i.x===e.x&&i.y===e.y}function iU(i,e,t,n){const r=m2(Xr(i,e,t)),s=m2(Xr(i,e,n)),a=m2(Xr(t,n,i)),o=m2(Xr(t,n,e));return!!(r!==s&&a!==o||r===0&&g2(i,t,e)||s===0&&g2(i,n,e)||a===0&&g2(t,i,n)||o===0&&g2(t,e,n))}function g2(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function m2(i){return i>0?1:i<0?-1:0}function lJ(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&iU(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function ax(i,e){return Xr(i.prev,i,i.next)<0?Xr(i,e,i.next)>=0&&Xr(i,i.prev,e)>=0:Xr(i,e,i.prev)<0||Xr(i,i.next,e)<0}function cJ(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function rU(i,e){const t=w4(i.i,i.x,i.y),n=w4(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Dk(i,e,t,n){const r=w4(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ox(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function w4(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function uJ(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class hJ{static triangulate(e,t,n=2){return YK(e,t,n)}}class xp{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return xp.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];kk(e),Ok(n,e);let a=e.length;t.forEach(kk);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,Ok(n,t[l]);const o=hJ.triangulate(n,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function kk(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function Ok(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class P6 extends lr{constructor(e=new P_([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new ki(r,3)),this.setAttribute("uv",new ki(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,A=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:A-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:fJ;let P,L=!1,D,B,k,U;w&&(P=w.getSpacedPoints(u),L=!0,d=!1,D=w.computeFrenetFrames(u,!1),B=new pe,k=new pe,U=new pe),d||(S=0,A=0,x=0,_=0);const F=o.extractPoints(c);let z=F.shape;const V=F.holes;if(!xp.isClockWise(z)){z=z.reverse();for(let de=0,Dt=V.length;de<Dt;de++){const gt=V[de];xp.isClockWise(gt)&&(V[de]=gt.reverse())}}function X(de){const gt=10000000000000001e-36;let Ct=de[0];for(let at=1;at<=de.length;at++){const Yt=at%de.length,Rt=de[Yt],kt=Rt.x-Ct.x,an=Rt.y-Ct.y,be=kt*kt+an*an,oe=Math.max(Math.abs(Rt.x),Math.abs(Rt.y),Math.abs(Ct.x),Math.abs(Ct.y)),He=gt*oe*oe;if(be<=He){de.splice(Yt,1),at--;continue}Ct=Rt}}X(z),V.forEach(X);const J=V.length,K=z;for(let de=0;de<J;de++){const Dt=V[de];z=z.concat(Dt)}function Y(de,Dt,gt){return Dt||console.error("THREE.ExtrudeGeometry: vec does not exist"),de.clone().addScaledVector(Dt,gt)}const ee=z.length;function se(de,Dt,gt){let Ct,at,Yt;const Rt=de.x-Dt.x,kt=de.y-Dt.y,an=gt.x-de.x,be=gt.y-de.y,oe=Rt*Rt+kt*kt,He=Rt*be-kt*an;if(Math.abs(He)>Number.EPSILON){const tt=Math.sqrt(oe),ct=Math.sqrt(an*an+be*be),et=Dt.x-kt/tt,Xt=Dt.y+Rt/tt,Gt=gt.x-be/ct,ln=gt.y+an/ct,dn=((Gt-et)*be-(ln-Xt)*an)/(Rt*be-kt*an);Ct=et+Rt*dn-de.x,at=Xt+kt*dn-de.y;const _t=Ct*Ct+at*at;if(_t<=2)return new lt(Ct,at);Yt=Math.sqrt(_t/2)}else{let tt=!1;Rt>Number.EPSILON?an>Number.EPSILON&&(tt=!0):Rt<-Number.EPSILON?an<-Number.EPSILON&&(tt=!0):Math.sign(kt)===Math.sign(be)&&(tt=!0),tt?(Ct=-kt,at=Rt,Yt=Math.sqrt(oe)):(Ct=Rt,at=kt,Yt=Math.sqrt(oe/2))}return new lt(Ct/Yt,at/Yt)}const fe=[];for(let de=0,Dt=K.length,gt=Dt-1,Ct=de+1;de<Dt;de++,gt++,Ct++)gt===Dt&&(gt=0),Ct===Dt&&(Ct=0),fe[de]=se(K[de],K[gt],K[Ct]);const ne=[];let he,Te=fe.concat();for(let de=0,Dt=J;de<Dt;de++){const gt=V[de];he=[];for(let Ct=0,at=gt.length,Yt=at-1,Rt=Ct+1;Ct<at;Ct++,Yt++,Rt++)Yt===at&&(Yt=0),Rt===at&&(Rt=0),he[Ct]=se(gt[Ct],gt[Yt],gt[Rt]);ne.push(he),Te=Te.concat(he)}let Pe;if(S===0)Pe=xp.triangulateShape(K,V);else{const de=[],Dt=[];for(let gt=0;gt<S;gt++){const Ct=gt/S,at=A*Math.cos(Ct*Math.PI/2),Yt=x*Math.sin(Ct*Math.PI/2)+_;for(let Rt=0,kt=K.length;Rt<kt;Rt++){const an=Y(K[Rt],fe[Rt],Yt);vt(an.x,an.y,-at),Ct===0&&de.push(an)}for(let Rt=0,kt=J;Rt<kt;Rt++){const an=V[Rt];he=ne[Rt];const be=[];for(let oe=0,He=an.length;oe<He;oe++){const tt=Y(an[oe],he[oe],Yt);vt(tt.x,tt.y,-at),Ct===0&&be.push(tt)}Ct===0&&Dt.push(be)}}Pe=xp.triangulateShape(de,Dt)}const _e=Pe.length,Ie=x+_;for(let de=0;de<ee;de++){const Dt=d?Y(z[de],Te[de],Ie):z[de];L?(k.copy(D.normals[0]).multiplyScalar(Dt.x),B.copy(D.binormals[0]).multiplyScalar(Dt.y),U.copy(P[0]).add(k).add(B),vt(U.x,U.y,U.z)):vt(Dt.x,Dt.y,0)}for(let de=1;de<=u;de++)for(let Dt=0;Dt<ee;Dt++){const gt=d?Y(z[Dt],Te[Dt],Ie):z[Dt];L?(k.copy(D.normals[de]).multiplyScalar(gt.x),B.copy(D.binormals[de]).multiplyScalar(gt.y),U.copy(P[de]).add(k).add(B),vt(U.x,U.y,U.z)):vt(gt.x,gt.y,h/u*de)}for(let de=S-1;de>=0;de--){const Dt=de/S,gt=A*Math.cos(Dt*Math.PI/2),Ct=x*Math.sin(Dt*Math.PI/2)+_;for(let at=0,Yt=K.length;at<Yt;at++){const Rt=Y(K[at],fe[at],Ct);vt(Rt.x,Rt.y,h+gt)}for(let at=0,Yt=V.length;at<Yt;at++){const Rt=V[at];he=ne[at];for(let kt=0,an=Rt.length;kt<an;kt++){const be=Y(Rt[kt],he[kt],Ct);L?vt(be.x,be.y+P[u-1].y,P[u-1].x+gt):vt(be.x,be.y,h+gt)}}}Ve(),$e();function Ve(){const de=r.length/3;if(d){let Dt=0,gt=ee*Dt;for(let Ct=0;Ct<_e;Ct++){const at=Pe[Ct];pt(at[2]+gt,at[1]+gt,at[0]+gt)}Dt=u+S*2,gt=ee*Dt;for(let Ct=0;Ct<_e;Ct++){const at=Pe[Ct];pt(at[0]+gt,at[1]+gt,at[2]+gt)}}else{for(let Dt=0;Dt<_e;Dt++){const gt=Pe[Dt];pt(gt[2],gt[1],gt[0])}for(let Dt=0;Dt<_e;Dt++){const gt=Pe[Dt];pt(gt[0]+ee*u,gt[1]+ee*u,gt[2]+ee*u)}}n.addGroup(de,r.length/3-de,0)}function $e(){const de=r.length/3;let Dt=0;Je(K,Dt),Dt+=K.length;for(let gt=0,Ct=V.length;gt<Ct;gt++){const at=V[gt];Je(at,Dt),Dt+=at.length}n.addGroup(de,r.length/3-de,1)}function Je(de,Dt){let gt=de.length;for(;--gt>=0;){const Ct=gt;let at=gt-1;at<0&&(at=de.length-1);for(let Yt=0,Rt=u+S*2;Yt<Rt;Yt++){const kt=ee*Yt,an=ee*(Yt+1),be=Dt+Ct+kt,oe=Dt+at+kt,He=Dt+at+an,tt=Dt+Ct+an;Vt(be,oe,He,tt)}}}function vt(de,Dt,gt){l.push(de),l.push(Dt),l.push(gt)}function pt(de,Dt,gt){fn(de),fn(Dt),fn(gt);const Ct=r.length/3,at=C.generateTopUV(n,r,Ct-3,Ct-2,Ct-1);jt(at[0]),jt(at[1]),jt(at[2])}function Vt(de,Dt,gt,Ct){fn(de),fn(Dt),fn(Ct),fn(Dt),fn(gt),fn(Ct);const at=r.length/3,Yt=C.generateSideWallUV(n,r,at-6,at-3,at-2,at-1);jt(Yt[0]),jt(Yt[1]),jt(Yt[3]),jt(Yt[1]),jt(Yt[2]),jt(Yt[3])}function fn(de){r.push(l[de*3+0]),r.push(l[de*3+1]),r.push(l[de*3+2])}function jt(de){s.push(de.x),s.push(de.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return dJ(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new hw[r.type]().fromJSON(r)),new P6(n,e.options)}}const fJ={generateTopUV:function(i,e,t,n,r){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[r*3],u=e[r*3+1];return[new lt(s,a),new lt(o,l),new lt(c,u)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],h=e[n*3+2],d=e[r*3],A=e[r*3+1],x=e[r*3+2],_=e[s*3],S=e[s*3+1],w=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new lt(a,1-l),new lt(c,1-h),new lt(d,1-x),new lt(_,1-w)]:[new lt(o,1-l),new lt(u,1-h),new lt(A,1-x),new lt(S,1-w)]}};function dJ(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Jx extends lr{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(r),c=o+1,u=l+1,h=e/o,d=t/l,A=[],x=[],_=[],S=[];for(let w=0;w<u;w++){const C=w*d-a;for(let P=0;P<c;P++){const L=P*h-s;x.push(L,-C,0),_.push(0,0,1),S.push(P/o),S.push(1-w/l)}}for(let w=0;w<l;w++)for(let C=0;C<o;C++){const P=C+c*w,L=C+c*(w+1),D=C+1+c*(w+1),B=C+1+c*w;A.push(P,L,B),A.push(L,D,B)}this.setIndex(A),this.setAttribute("position",new ki(x,3)),this.setAttribute("normal",new ki(_,3)),this.setAttribute("uv",new ki(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jx(e.width,e.height,e.widthSegments,e.heightSegments)}}class Lu extends lr{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const u=[],h=new pe,d=new pe,A=[],x=[],_=[],S=[];for(let w=0;w<=n;w++){const C=[],P=w/n;let L=0;w===0&&a===0?L=.5/t:w===n&&l===Math.PI&&(L=-.5/t);for(let D=0;D<=t;D++){const B=D/t;h.x=-e*Math.cos(r+B*s)*Math.sin(a+P*o),h.y=e*Math.cos(a+P*o),h.z=e*Math.sin(r+B*s)*Math.sin(a+P*o),x.push(h.x,h.y,h.z),d.copy(h).normalize(),_.push(d.x,d.y,d.z),S.push(B+L,1-P),C.push(c++)}u.push(C)}for(let w=0;w<n;w++)for(let C=0;C<t;C++){const P=u[w][C+1],L=u[w][C],D=u[w+1][C],B=u[w+1][C+1];(w!==0||a>0)&&A.push(P,L,B),(w!==n-1||l<Math.PI)&&A.push(L,D,B)}this.setIndex(A),this.setAttribute("position",new ki(x,3)),this.setAttribute("normal",new ki(_,3)),this.setAttribute("uv",new ki(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class N6 extends lr{constructor(e=new JF(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new pe,l=new pe,c=new lt;let u=new pe;const h=[],d=[],A=[],x=[];_(),this.setIndex(x),this.setAttribute("position",new ki(h,3)),this.setAttribute("normal",new ki(d,3)),this.setAttribute("uv",new ki(A,2));function _(){for(let P=0;P<t;P++)S(P);S(s===!1?t:0),C(),w()}function S(P){u=e.getPointAt(P/t,u);const L=a.normals[P],D=a.binormals[P];for(let B=0;B<=r;B++){const k=B/r*Math.PI*2,U=Math.sin(k),F=-Math.cos(k);l.x=F*L.x+U*D.x,l.y=F*L.y+U*D.y,l.z=F*L.z+U*D.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=u.x+n*l.x,o.y=u.y+n*l.y,o.z=u.z+n*l.z,h.push(o.x,o.y,o.z)}}function w(){for(let P=1;P<=t;P++)for(let L=1;L<=r;L++){const D=(r+1)*(P-1)+(L-1),B=(r+1)*P+(L-1),k=(r+1)*P+L,U=(r+1)*(P-1)+L;x.push(D,B,U),x.push(B,k,U)}}function C(){for(let P=0;P<=t;P++)for(let L=0;L<=r;L++)c.x=P/t,c.y=L/r,A.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new N6(new hw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class pJ extends lr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new pe,s=new pe;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,A=h.count;for(let x=d,_=d+A;x<_;x+=3)for(let S=0;S<3;S++){const w=o.getX(x+S),C=o.getX(x+(S+1)%3);r.fromBufferAttribute(a,w),s.fromBufferAttribute(a,C),Ik(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,h=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,h),Ik(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ki(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Ik(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}class AJ extends Fa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new un(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class sU extends Fa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new un(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ba,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gJ extends sU{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ci(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new un(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new un(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new un(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class aU extends Fa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new un(16777215),this.specular=new un(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ba,this.combine=Xx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mJ extends Fa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new un(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vJ extends Fa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Wh extends Fa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ba,this.combine=Xx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yJ extends Fa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=PZ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xJ extends Fa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class bJ extends Fa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new un(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _J extends om{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const Bk={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class wJ{constructor(e,t,n){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const A=c[h],x=c[h+1];if(A.global&&(A.lastIndex=0),A.test(u))return x}return null}}}const SJ=new wJ;class L6{constructor(e){this.manager=e!==void 0?e:SJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}L6.DEFAULT_MATERIAL_NAME="__DEFAULT";class TJ extends L6{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Bk.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=rx("img");function l(){u(),Bk.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class D6 extends L6{constructor(e){super(e)}load(e,t,n,r){const s=new Ts,a=new TJ(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class nA extends Lr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new un(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class MJ extends nA{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Lr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new un(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const aE=new Un,Fk=new pe,Uk=new pe;class k6{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.mapType=$r,this.map=null,this.mapPass=null,this.matrix=new Un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new am,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new Cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Fk.setFromMatrixPosition(e.matrixWorld),t.position.copy(Fk),Uk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Uk),t.updateMatrixWorld(),aE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(aE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class EJ extends k6{constructor(){super(new ia(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=qp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class O6 extends nA{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Lr.DEFAULT_UP),this.updateMatrix(),this.target=new Lr,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new EJ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const zk=new Un,Nv=new pe,oE=new pe;class CJ extends k6{constructor(){super(new ia(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new Cn(2,1,1,1),new Cn(0,1,1,1),new Cn(3,1,1,1),new Cn(1,1,1,1),new Cn(3,0,1,1),new Cn(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Nv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Nv),oE.copy(n.position),oE.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(oE),n.updateMatrixWorld(),r.makeTranslation(-Nv.x,-Nv.y,-Nv.z),zk.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zk)}}class RJ extends nA{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new CJ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class e1 extends Zx{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class PJ extends k6{constructor(){super(new e1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oU extends nA{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lr.DEFAULT_UP),this.updateMatrix(),this.target=new Lr,this.shadow=new PJ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class lU extends nA{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class NJ extends nA{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class LJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class DJ extends nA{constructor(e=new LJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class kJ extends lr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class cU extends ia{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class uU{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Gk(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Gk();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Gk(){return performance.now()}class fw extends T6{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const Vk=new Un;class OJ{constructor(e,t,n=0,r=1/0){this.ray=new Qx(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new _6,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Vk.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Vk),this}intersectObject(e,t=!0,n=[]){return S4(e,this,n,t),n.sort(Hk),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)S4(e[r],this,n,t);return n.sort(Hk),n}}function Hk(i,e){return i.distance-e.distance}function S4(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let a=0,o=s.length;a<o;a++)S4(s[a],e,t,!0)}}class qk{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ci(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ci(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class zS{constructor(e,t,n,r){zS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const Wk=new pe,v2=new pe;class IJ{constructor(e=new pe,t=new pe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Wk.subVectors(e,this.start),v2.subVectors(this.end,this.start);const n=v2.dot(v2);let s=v2.dot(Wk)/n;return t&&(s=ci(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class BJ{constructor(){this.type="ShapePath",this.color=new un,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new b4,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const C=[];for(let P=0,L=w.length;P<L;P++){const D=w[P],B=new P_;B.curves=D.curves,C.push(B)}return C}function n(w,C){const P=C.length;let L=!1;for(let D=P-1,B=0;B<P;D=B++){let k=C[D],U=C[B],F=U.x-k.x,z=U.y-k.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(k=C[B],F=-F,U=C[D],z=-z),w.y<k.y||w.y>U.y)continue;if(w.y===k.y){if(w.x===k.x)return!0}else{const V=z*(w.x-k.x)-F*(w.y-k.y);if(V===0)return!0;if(V<0)continue;L=!L}}else{if(w.y!==k.y)continue;if(U.x<=w.x&&w.x<=k.x||k.x<=w.x&&w.x<=U.x)return!0}}return L}const r=xp.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new P_,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],d=[];let A=[],x=0,_;d[x]=void 0,A[x]=[];for(let w=0,C=s.length;w<C;w++)o=s[w],_=o.getPoints(),a=r(_),a=e?!a:a,a?(!u&&d[x]&&x++,d[x]={s:new P_,p:_},d[x].s.curves=o.curves,u&&x++,A[x]=[]):A[x].push({h:o,p:_[0]});if(!d[0])return t(s);if(d.length>1){let w=!1,C=0;for(let P=0,L=d.length;P<L;P++)h[P]=[];for(let P=0,L=d.length;P<L;P++){const D=A[P];for(let B=0;B<D.length;B++){const k=D[B];let U=!0;for(let F=0;F<d.length;F++)n(k.p,d[F].p)&&(P!==F&&C++,U?(U=!1,h[F].push(k)):w=!0);U&&h[P].push(k)}}C>0&&w===!1&&(A=h)}let S;for(let w=0,C=d.length;w<C;w++){l=d[w].s,c.push(l),S=A[w];for(let P=0,L=S.length;P<L;P++)l.holes.push(S[P].h)}return c}}class I6 extends Nu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function jk(i,e,t,n){const r=FJ(n);switch(t){case u6:return i*e;case $x:return i*e/r.components*r.byteLength;case im:return i*e/r.components*r.byteLength;case wh:return i*e*2/r.components*r.byteLength;case rm:return i*e*2/r.components*r.byteLength;case Yx:return i*e*3/r.components*r.byteLength;case ss:return i*e*4/r.components*r.byteLength;case sm:return i*e*4/r.components*r.byteLength;case Pp:case Jf:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case ed:case td:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Zy:case Jy:return Math.max(i,16)*Math.max(e,8)/4;case Qy:case Ky:return Math.max(i,8)*Math.max(e,8)/2;case ex:case ug:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case hg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case fg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case dg:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case pg:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Ag:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case gg:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case mg:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case vg:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case yg:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case xg:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case bg:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case _g:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case wg:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Sg:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Tg:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Np:case m4:case v4:return Math.ceil(i/4)*Math.ceil(e/4)*16;case h6:case tx:return Math.ceil(i/4)*Math.ceil(e/4)*8;case nx:case ix:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function FJ(i){switch(i){case $r:case Cp:return{byteLength:1,components:1};case bc:case Rp:case Ss:return{byteLength:2,components:1};case PS:case NS:return{byteLength:2,components:4};case br:case na:case ps:return{byteLength:4,components:1};case LS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:nm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=nm);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function hU(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function UJ(i){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,h=c.byteLength,d=i.createBuffer();i.bindBuffer(l,d),i.bufferData(l,c,u),o.onUploadCallback();let A;if(c instanceof Float32Array)A=i.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?A=i.HALF_FLOAT:A=i.UNSIGNED_SHORT;else if(c instanceof Int16Array)A=i.SHORT;else if(c instanceof Uint32Array)A=i.UNSIGNED_INT;else if(c instanceof Int32Array)A=i.INT;else if(c instanceof Int8Array)A=i.BYTE;else if(c instanceof Uint8Array)A=i.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)A=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:A,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function n(o,l,c){const u=l.array,h=l.updateRanges;if(i.bindBuffer(c,o),h.length===0)i.bufferSubData(c,0,u);else{h.sort((A,x)=>A.start-x.start);let d=0;for(let A=1;A<h.length;A++){const x=h[d],_=h[A];_.start<=x.start+x.count+1?x.count=Math.max(x.count,_.start+_.count-x.start):(++d,h[d]=_)}h.length=d+1;for(let A=0,x=h.length;A<x;A++){const _=h[A];i.bufferSubData(c,_.start*u.BYTES_PER_ELEMENT,u,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}var zJ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,GJ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,VJ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,HJ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qJ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,WJ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jJ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,XJ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,YJ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,$J=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,QJ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZJ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,KJ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,JJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,eee=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tee=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,nee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,iee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ree=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,see=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,aee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,lee=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,cee=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uee=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hee=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fee=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,dee=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pee=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Aee=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,gee="gl_FragColor = linearToOutputTexel( gl_FragColor );",mee=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yee=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xee=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bee=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_ee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wee=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,See=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Tee=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Mee=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Eee=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Cee=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ree=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pee=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Nee=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Lee=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Dee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Oee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Iee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Bee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Fee=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Uee=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Gee=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Vee=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Hee=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qee=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Wee=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Xee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Yee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$ee=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Qee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Zee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Kee=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Jee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ete=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tte=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,nte=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ite=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,rte=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ste=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ate=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ote=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,lte=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,cte=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ute=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hte=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fte=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dte=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,pte=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ate=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,gte=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mte=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vte=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yte=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xte=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bte=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,_te=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wte=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ste=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Tte=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mte=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ete=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Cte=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Rte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Pte=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Nte=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Lte=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dte=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kte=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ote=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ite=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Bte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Fte=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ute=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zte=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Wte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jte=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Xte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Yte=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$te=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Qte=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Kte=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ene=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tne=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nne=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ine=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rne=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sne=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ane=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,one=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lne=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cne=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,une=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hne=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fne=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dne=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ane=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gne=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mne=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,si={alphahash_fragment:zJ,alphahash_pars_fragment:GJ,alphamap_fragment:VJ,alphamap_pars_fragment:HJ,alphatest_fragment:qJ,alphatest_pars_fragment:WJ,aomap_fragment:jJ,aomap_pars_fragment:XJ,batching_pars_vertex:YJ,batching_vertex:$J,begin_vertex:QJ,beginnormal_vertex:ZJ,bsdfs:KJ,iridescence_fragment:JJ,bumpmap_pars_fragment:eee,clipping_planes_fragment:tee,clipping_planes_pars_fragment:nee,clipping_planes_pars_vertex:iee,clipping_planes_vertex:ree,color_fragment:see,color_pars_fragment:aee,color_pars_vertex:oee,color_vertex:lee,common:cee,cube_uv_reflection_fragment:uee,defaultnormal_vertex:hee,displacementmap_pars_vertex:fee,displacementmap_vertex:dee,emissivemap_fragment:pee,emissivemap_pars_fragment:Aee,colorspace_fragment:gee,colorspace_pars_fragment:mee,envmap_fragment:vee,envmap_common_pars_fragment:yee,envmap_pars_fragment:xee,envmap_pars_vertex:bee,envmap_physical_pars_fragment:Lee,envmap_vertex:_ee,fog_vertex:wee,fog_pars_vertex:See,fog_fragment:Tee,fog_pars_fragment:Mee,gradientmap_pars_fragment:Eee,lightmap_pars_fragment:Cee,lights_lambert_fragment:Ree,lights_lambert_pars_fragment:Pee,lights_pars_begin:Nee,lights_toon_fragment:Dee,lights_toon_pars_fragment:kee,lights_phong_fragment:Oee,lights_phong_pars_fragment:Iee,lights_physical_fragment:Bee,lights_physical_pars_fragment:Fee,lights_fragment_begin:Uee,lights_fragment_maps:zee,lights_fragment_end:Gee,logdepthbuf_fragment:Vee,logdepthbuf_pars_fragment:Hee,logdepthbuf_pars_vertex:qee,logdepthbuf_vertex:Wee,map_fragment:jee,map_pars_fragment:Xee,map_particle_fragment:Yee,map_particle_pars_fragment:$ee,metalnessmap_fragment:Qee,metalnessmap_pars_fragment:Zee,morphinstance_vertex:Kee,morphcolor_vertex:Jee,morphnormal_vertex:ete,morphtarget_pars_vertex:tte,morphtarget_vertex:nte,normal_fragment_begin:ite,normal_fragment_maps:rte,normal_pars_fragment:ste,normal_pars_vertex:ate,normal_vertex:ote,normalmap_pars_fragment:lte,clearcoat_normal_fragment_begin:cte,clearcoat_normal_fragment_maps:ute,clearcoat_pars_fragment:hte,iridescence_pars_fragment:fte,opaque_fragment:dte,packing:pte,premultiplied_alpha_fragment:Ate,project_vertex:gte,dithering_fragment:mte,dithering_pars_fragment:vte,roughnessmap_fragment:yte,roughnessmap_pars_fragment:xte,shadowmap_pars_fragment:bte,shadowmap_pars_vertex:_te,shadowmap_vertex:wte,shadowmask_pars_fragment:Ste,skinbase_vertex:Tte,skinning_pars_vertex:Mte,skinning_vertex:Ete,skinnormal_vertex:Cte,specularmap_fragment:Rte,specularmap_pars_fragment:Pte,tonemapping_fragment:Nte,tonemapping_pars_fragment:Lte,transmission_fragment:Dte,transmission_pars_fragment:kte,uv_pars_fragment:Ote,uv_pars_vertex:Ite,uv_vertex:Bte,worldpos_vertex:Fte,background_vert:Ute,background_frag:zte,backgroundCube_vert:Gte,backgroundCube_frag:Vte,cube_vert:Hte,cube_frag:qte,depth_vert:Wte,depth_frag:jte,distanceRGBA_vert:Xte,distanceRGBA_frag:Yte,equirect_vert:$te,equirect_frag:Qte,linedashed_vert:Zte,linedashed_frag:Kte,meshbasic_vert:Jte,meshbasic_frag:ene,meshlambert_vert:tne,meshlambert_frag:nne,meshmatcap_vert:ine,meshmatcap_frag:rne,meshnormal_vert:sne,meshnormal_frag:ane,meshphong_vert:one,meshphong_frag:lne,meshphysical_vert:cne,meshphysical_frag:une,meshtoon_vert:hne,meshtoon_frag:fne,points_vert:dne,points_frag:pne,shadow_vert:Ane,shadow_frag:gne,sprite_vert:mne,sprite_frag:vne},qt={common:{diffuse:{value:new un(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kn},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kn}},envmap:{envMap:{value:null},envMapRotation:{value:new Kn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kn},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new un(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new un(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0},uvTransform:{value:new Kn}},sprite:{diffuse:{value:new un(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kn},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0}}},go={basic:{uniforms:ja([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.fog]),vertexShader:si.meshbasic_vert,fragmentShader:si.meshbasic_frag},lambert:{uniforms:ja([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,qt.lights,{emissive:{value:new un(0)}}]),vertexShader:si.meshlambert_vert,fragmentShader:si.meshlambert_frag},phong:{uniforms:ja([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,qt.lights,{emissive:{value:new un(0)},specular:{value:new un(1118481)},shininess:{value:30}}]),vertexShader:si.meshphong_vert,fragmentShader:si.meshphong_frag},standard:{uniforms:ja([qt.common,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.roughnessmap,qt.metalnessmap,qt.fog,qt.lights,{emissive:{value:new un(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:si.meshphysical_vert,fragmentShader:si.meshphysical_frag},toon:{uniforms:ja([qt.common,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.gradientmap,qt.fog,qt.lights,{emissive:{value:new un(0)}}]),vertexShader:si.meshtoon_vert,fragmentShader:si.meshtoon_frag},matcap:{uniforms:ja([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,{matcap:{value:null}}]),vertexShader:si.meshmatcap_vert,fragmentShader:si.meshmatcap_frag},points:{uniforms:ja([qt.points,qt.fog]),vertexShader:si.points_vert,fragmentShader:si.points_frag},dashed:{uniforms:ja([qt.common,qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:si.linedashed_vert,fragmentShader:si.linedashed_frag},depth:{uniforms:ja([qt.common,qt.displacementmap]),vertexShader:si.depth_vert,fragmentShader:si.depth_frag},normal:{uniforms:ja([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,{opacity:{value:1}}]),vertexShader:si.meshnormal_vert,fragmentShader:si.meshnormal_frag},sprite:{uniforms:ja([qt.sprite,qt.fog]),vertexShader:si.sprite_vert,fragmentShader:si.sprite_frag},background:{uniforms:{uvTransform:{value:new Kn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:si.background_vert,fragmentShader:si.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Kn}},vertexShader:si.backgroundCube_vert,fragmentShader:si.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:si.cube_vert,fragmentShader:si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:si.equirect_vert,fragmentShader:si.equirect_frag},distanceRGBA:{uniforms:ja([qt.common,qt.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:si.distanceRGBA_vert,fragmentShader:si.distanceRGBA_frag},shadow:{uniforms:ja([qt.lights,qt.fog,{color:{value:new un(0)},opacity:{value:1}}]),vertexShader:si.shadow_vert,fragmentShader:si.shadow_frag}};go.physical={uniforms:ja([go.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kn},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kn},sheen:{value:0},sheenColor:{value:new un(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kn},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kn},attenuationDistance:{value:0},attenuationColor:{value:new un(0)},specularColor:{value:new un(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kn},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kn}}]),vertexShader:si.meshphysical_vert,fragmentShader:si.meshphysical_frag};const y2={r:0,b:0,g:0},Wd=new ba,yne=new Un;function xne(i,e,t,n,r,s,a){const o=new un(0);let l=s===!0?0:1,c,u,h=null,d=0,A=null;function x(P){let L=P.isScene===!0?P.background:null;return L&&L.isTexture&&(L=(P.backgroundBlurriness>0?t:e).get(L)),L}function _(P){let L=!1;const D=x(P);D===null?w(o,l):D&&D.isColor&&(w(D,1),L=!0);const B=i.xr.getEnvironmentBlendMode();B==="additive"?n.buffers.color.setClear(0,0,0,1,a):B==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||L)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function S(P,L){const D=x(L);D&&(D.isCubeTexture||D.mapping===Gp)?(u===void 0&&(u=new zi(new gd(1,1,1),new Eo({name:"BackgroundCubeMaterial",uniforms:Cg(go.backgroundCube.uniforms),vertexShader:go.backgroundCube.vertexShader,fragmentShader:go.backgroundCube.fragmentShader,side:sr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(B,k,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Wd.copy(L.backgroundRotation),Wd.x*=-1,Wd.y*=-1,Wd.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Wd.y*=-1,Wd.z*=-1),u.material.uniforms.envMap.value=D,u.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=L.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(yne.makeRotationFromEuler(Wd)),u.material.toneMapped=qn.getTransfer(D.colorSpace)!==rn,(h!==D||d!==D.version||A!==i.toneMapping)&&(u.material.needsUpdate=!0,h=D,d=D.version,A=i.toneMapping),u.layers.enableAll(),P.unshift(u,u.geometry,u.material,0,0,null)):D&&D.isTexture&&(c===void 0&&(c=new zi(new Jx(2,2),new Eo({name:"BackgroundMaterial",uniforms:Cg(go.background.uniforms),vertexShader:go.background.vertexShader,fragmentShader:go.background.fragmentShader,side:So,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=D,c.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,c.material.toneMapped=qn.getTransfer(D.colorSpace)!==rn,D.matrixAutoUpdate===!0&&D.updateMatrix(),c.material.uniforms.uvTransform.value.copy(D.matrix),(h!==D||d!==D.version||A!==i.toneMapping)&&(c.material.needsUpdate=!0,h=D,d=D.version,A=i.toneMapping),c.layers.enableAll(),P.unshift(c,c.geometry,c.material,0,0,null))}function w(P,L){P.getRGB(y2,qF(i)),n.buffers.color.setClear(y2.r,y2.g,y2.b,L,a)}function C(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(P,L=1){o.set(P),l=L,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(P){l=P,w(o,l)},render:_,addToRenderList:S,dispose:C}}function bne(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=d(null);let s=r,a=!1;function o(z,V,W,X,J){let K=!1;const Y=h(X,W,V);s!==Y&&(s=Y,c(s.object)),K=A(z,X,W,J),K&&x(z,X,W,J),J!==null&&e.update(J,i.ELEMENT_ARRAY_BUFFER),(K||a)&&(a=!1,L(z,V,W,X),J!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(J).buffer))}function l(){return i.createVertexArray()}function c(z){return i.bindVertexArray(z)}function u(z){return i.deleteVertexArray(z)}function h(z,V,W){const X=W.wireframe===!0;let J=n[z.id];J===void 0&&(J={},n[z.id]=J);let K=J[V.id];K===void 0&&(K={},J[V.id]=K);let Y=K[X];return Y===void 0&&(Y=d(l()),K[X]=Y),Y}function d(z){const V=[],W=[],X=[];for(let J=0;J<t;J++)V[J]=0,W[J]=0,X[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:W,attributeDivisors:X,object:z,attributes:{},index:null}}function A(z,V,W,X){const J=s.attributes,K=V.attributes;let Y=0;const ee=W.getAttributes();for(const se in ee)if(ee[se].location>=0){const ne=J[se];let he=K[se];if(he===void 0&&(se==="instanceMatrix"&&z.instanceMatrix&&(he=z.instanceMatrix),se==="instanceColor"&&z.instanceColor&&(he=z.instanceColor)),ne===void 0||ne.attribute!==he||he&&ne.data!==he.data)return!0;Y++}return s.attributesNum!==Y||s.index!==X}function x(z,V,W,X){const J={},K=V.attributes;let Y=0;const ee=W.getAttributes();for(const se in ee)if(ee[se].location>=0){let ne=K[se];ne===void 0&&(se==="instanceMatrix"&&z.instanceMatrix&&(ne=z.instanceMatrix),se==="instanceColor"&&z.instanceColor&&(ne=z.instanceColor));const he={};he.attribute=ne,ne&&ne.data&&(he.data=ne.data),J[se]=he,Y++}s.attributes=J,s.attributesNum=Y,s.index=X}function _(){const z=s.newAttributes;for(let V=0,W=z.length;V<W;V++)z[V]=0}function S(z){w(z,0)}function w(z,V){const W=s.newAttributes,X=s.enabledAttributes,J=s.attributeDivisors;W[z]=1,X[z]===0&&(i.enableVertexAttribArray(z),X[z]=1),J[z]!==V&&(i.vertexAttribDivisor(z,V),J[z]=V)}function C(){const z=s.newAttributes,V=s.enabledAttributes;for(let W=0,X=V.length;W<X;W++)V[W]!==z[W]&&(i.disableVertexAttribArray(W),V[W]=0)}function P(z,V,W,X,J,K,Y){Y===!0?i.vertexAttribIPointer(z,V,W,J,K):i.vertexAttribPointer(z,V,W,X,J,K)}function L(z,V,W,X){_();const J=X.attributes,K=W.getAttributes(),Y=V.defaultAttributeValues;for(const ee in K){const se=K[ee];if(se.location>=0){let fe=J[ee];if(fe===void 0&&(ee==="instanceMatrix"&&z.instanceMatrix&&(fe=z.instanceMatrix),ee==="instanceColor"&&z.instanceColor&&(fe=z.instanceColor)),fe!==void 0){const ne=fe.normalized,he=fe.itemSize,Te=e.get(fe);if(Te===void 0)continue;const Pe=Te.buffer,_e=Te.type,Ie=Te.bytesPerElement,Ve=_e===i.INT||_e===i.UNSIGNED_INT||fe.gpuType===na;if(fe.isInterleavedBufferAttribute){const $e=fe.data,Je=$e.stride,vt=fe.offset;if($e.isInstancedInterleavedBuffer){for(let pt=0;pt<se.locationSize;pt++)w(se.location+pt,$e.meshPerAttribute);z.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let pt=0;pt<se.locationSize;pt++)S(se.location+pt);i.bindBuffer(i.ARRAY_BUFFER,Pe);for(let pt=0;pt<se.locationSize;pt++)P(se.location+pt,he/se.locationSize,_e,ne,Je*Ie,(vt+he/se.locationSize*pt)*Ie,Ve)}else{if(fe.isInstancedBufferAttribute){for(let $e=0;$e<se.locationSize;$e++)w(se.location+$e,fe.meshPerAttribute);z.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let $e=0;$e<se.locationSize;$e++)S(se.location+$e);i.bindBuffer(i.ARRAY_BUFFER,Pe);for(let $e=0;$e<se.locationSize;$e++)P(se.location+$e,he/se.locationSize,_e,ne,he*Ie,he/se.locationSize*$e*Ie,Ve)}}else if(Y!==void 0){const ne=Y[ee];if(ne!==void 0)switch(ne.length){case 2:i.vertexAttrib2fv(se.location,ne);break;case 3:i.vertexAttrib3fv(se.location,ne);break;case 4:i.vertexAttrib4fv(se.location,ne);break;default:i.vertexAttrib1fv(se.location,ne)}}}}C()}function D(){U();for(const z in n){const V=n[z];for(const W in V){const X=V[W];for(const J in X)u(X[J].object),delete X[J];delete V[W]}delete n[z]}}function B(z){if(n[z.id]===void 0)return;const V=n[z.id];for(const W in V){const X=V[W];for(const J in X)u(X[J].object),delete X[J];delete V[W]}delete n[z.id]}function k(z){for(const V in n){const W=n[V];if(W[z.id]===void 0)continue;const X=W[z.id];for(const J in X)u(X[J].object),delete X[J];delete W[z.id]}}function U(){F(),a=!0,s!==r&&(s=r,c(s.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:U,resetDefaultState:F,dispose:D,releaseStatesOfGeometry:B,releaseStatesOfProgram:k,initAttributes:_,enableAttribute:S,disableUnusedAttributes:C}}function _ne(i,e,t){let n;function r(c){n=c}function s(c,u){i.drawArrays(n,c,u),t.update(u,n,1)}function a(c,u,h){h!==0&&(i.drawArraysInstanced(n,c,u,h),t.update(u,n,h))}function o(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,u,0,h);let A=0;for(let x=0;x<h;x++)A+=u[x];t.update(A,n,1)}function l(c,u,h,d){if(h===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let x=0;x<c.length;x++)a(c[x],u[x],d[x]);else{A.multiDrawArraysInstancedWEBGL(n,c,0,u,0,d,0,h);let x=0;for(let _=0;_<h;_++)x+=u[_]*d[_];t.update(x,n,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function wne(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(k){return!(k!==ss&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(k){const U=k===Ss&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==$r&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==ps&&!U)}function l(k){if(k==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),A=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),w=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),P=i.getParameter(i.MAX_VARYING_VECTORS),L=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),D=x>0,B=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:A,maxVertexTextures:x,maxTextureSize:_,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:C,maxVaryings:P,maxFragmentUniforms:L,vertexTextures:D,maxSamples:B}}function Sne(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new iu,o=new Kn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const A=h.length!==0||d||n!==0||r;return r=d,n=h.length,A},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,A){const x=h.clippingPlanes,_=h.clipIntersection,S=h.clipShadows,w=i.get(h);if(!r||x===null||x.length===0||s&&!S)s?u(null):c();else{const C=s?0:n,P=C*4;let L=w.clippingState||null;l.value=L,L=u(x,d,P,A);for(let D=0;D!==P;++D)L[D]=t[D];w.clippingState=L,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=C}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(h,d,A,x){const _=h!==null?h.length:0;let S=null;if(_!==0){if(S=l.value,x!==!0||S===null){const w=A+_*4,C=d.matrixWorldInverse;o.getNormalMatrix(C),(S===null||S.length<w)&&(S=new Float32Array(w));for(let P=0,L=A;P!==_;++P,L+=4)a.copy(h[P]).applyMatrix4(C,o),a.normal.toArray(S,L),S[L+3]=a.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,S}}function Tne(i){let e=new WeakMap;function t(a,o){return o===lg?a.mapping=yu:o===cg&&(a.mapping=xu),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===lg||o===cg)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new jF(l.height);return c.fromEquirectangularTexture(i,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const O0=4,Xk=[.125,.215,.35,.446,.526,.582],fp=20,lE=new e1,Yk=new un;let cE=null,uE=0,hE=0,fE=!1;const sp=(1+Math.sqrt(5))/2,c0=1/sp,$k=[new pe(-sp,c0,0),new pe(sp,c0,0),new pe(-c0,0,sp),new pe(c0,0,sp),new pe(0,sp,-c0),new pe(0,sp,c0),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)],Mne=new pe;let Qk=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:a=256,position:o=Mne}=s;cE=this._renderer.getRenderTarget(),uE=this._renderer.getActiveCubeFace(),hE=this._renderer.getActiveMipmapLevel(),fE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Jk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Kk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cE,uE,hE),this._renderer.xr.enabled=fE,e.scissorTest=!1,x2(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===yu||e.mapping===xu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cE=this._renderer.getRenderTarget(),uE=this._renderer.getActiveCubeFace(),hE=this._renderer.getActiveMipmapLevel(),fE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Bs,minFilter:Bs,generateMipmaps:!1,type:Ss,format:ss,colorSpace:Cc,depthBuffer:!1},r=Zk(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Zk(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ene(s)),this._blurMaterial=Cne(s,e,t)}return r}_compileMaterial(e){const t=new zi(this._lodPlanes[0],e);this._renderer.compile(t,lE)}_sceneToCubeUV(e,t,n,r,s){const l=new ia(90,1,t,n),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,A=h.toneMapping;h.getClearColor(Yk),h.toneMapping=Mo,h.autoClear=!1;const x=new Il({name:"PMREM.Background",side:sr,depthWrite:!1,depthTest:!1}),_=new zi(new gd,x);let S=!1;const w=e.background;w?w.isColor&&(x.color.copy(w),e.background=null,S=!0):(x.color.copy(Yk),S=!0);for(let C=0;C<6;C++){const P=C%3;P===0?(l.up.set(0,c[C],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[C],s.y,s.z)):P===1?(l.up.set(0,0,c[C]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[C],s.z)):(l.up.set(0,c[C],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[C]));const L=this._cubeSize;x2(r,P*L,C>2?L:0,L,L),h.setRenderTarget(r),S&&h.render(_,l),h.render(e,l)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=A,h.autoClear=d,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===yu||e.mapping===xu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Jk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Kk());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new zi(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;x2(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,lE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=$k[(r-s-1)%$k.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new zi(this._lodPlanes[r],c),d=c.uniforms,A=this._sizeLods[n]-1,x=isFinite(s)?Math.PI/(2*A):2*Math.PI/(2*fp-1),_=s/x,S=isFinite(s)?1+Math.floor(u*_):fp;S>fp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${fp}`);const w=[];let C=0;for(let k=0;k<fp;++k){const U=k/_,F=Math.exp(-U*U/2);w.push(F),k===0?C+=F:k<S&&(C+=2*F)}for(let k=0;k<w.length;k++)w[k]=w[k]/C;d.envMap.value=e.texture,d.samples.value=S,d.weights.value=w,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:P}=this;d.dTheta.value=x,d.mipInt.value=P-n;const L=this._sizeLods[r],D=3*L*(r>P-O0?r-P+O0:0),B=4*(this._cubeSize-L);x2(t,D,B,3*L,2*L),l.setRenderTarget(t),l.render(h,lE)}};function Ene(i){const e=[],t=[],n=[];let r=i;const s=i-O0+1+Xk.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>i-O0?l=Xk[a-i+O0-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],A=6,x=6,_=3,S=2,w=1,C=new Float32Array(_*x*A),P=new Float32Array(S*x*A),L=new Float32Array(w*x*A);for(let B=0;B<A;B++){const k=B%3*2/3-1,U=B>2?0:-1,F=[k,U,0,k+2/3,U,0,k+2/3,U+1,0,k,U,0,k+2/3,U+1,0,k,U+1,0];C.set(F,_*x*B),P.set(d,S*x*B);const z=[B,B,B,B,B,B];L.set(z,w*x*B)}const D=new lr;D.setAttribute("position",new Vr(C,_)),D.setAttribute("uv",new Vr(P,S)),D.setAttribute("faceIndex",new Vr(L,w)),e.push(D),r>O0&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Zk(i,e,t){const n=new cd(i,e,t);return n.texture.mapping=Gp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function x2(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function Cne(i,e,t){const n=new Float32Array(fp),r=new pe(0,1,0);return new Eo({name:"SphericalGaussianBlur",defines:{n:fp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:B6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function Kk(){return new Eo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:B6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function Jk(){return new Eo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:B6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function B6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Rne(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===lg||l===cg,u=l===yu||l===xu;if(c||u){let h=e.get(o);const d=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==d)return t===null&&(t=new Qk(i)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const A=o.image;return c&&A&&A.height>0||u&&A&&r(A)?(t===null&&(t=new Qk(i)),h=c?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function Pne(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&rl("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Nne(i,e,t,n){const r={},s=new WeakMap;function a(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const x in d.attributes)e.remove(d.attributes[x]);d.removeEventListener("dispose",a),delete r[d.id];const A=s.get(d);A&&(e.remove(A),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(h,d){return r[d.id]===!0||(d.addEventListener("dispose",a),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const A in d)e.update(d[A],i.ARRAY_BUFFER)}function c(h){const d=[],A=h.index,x=h.attributes.position;let _=0;if(A!==null){const C=A.array;_=A.version;for(let P=0,L=C.length;P<L;P+=3){const D=C[P+0],B=C[P+1],k=C[P+2];d.push(D,B,B,k,k,D)}}else if(x!==void 0){const C=x.array;_=x.version;for(let P=0,L=C.length/3-1;P<L;P+=3){const D=P+0,B=P+1,k=P+2;d.push(D,B,B,k,k,D)}}else return;const S=new(y6(d)?S6:w6)(d,1);S.version=_;const w=s.get(h);w&&e.remove(w),s.set(h,S)}function u(h){const d=s.get(h);if(d){const A=h.index;A!==null&&d.version<A.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function Lne(i,e,t){let n;function r(d){n=d}let s,a;function o(d){s=d.type,a=d.bytesPerElement}function l(d,A){i.drawElements(n,A,s,d*a),t.update(A,n,1)}function c(d,A,x){x!==0&&(i.drawElementsInstanced(n,A,s,d*a,x),t.update(A,n,x))}function u(d,A,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,A,0,s,d,0,x);let S=0;for(let w=0;w<x;w++)S+=A[w];t.update(S,n,1)}function h(d,A,x,_){if(x===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<d.length;w++)c(d[w]/a,A[w],_[w]);else{S.multiDrawElementsInstancedWEBGL(n,A,0,s,d,0,_,0,x);let w=0;for(let C=0;C<x;C++)w+=A[C]*_[C];t.update(w,n,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function Dne(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function kne(i,e,t){const n=new WeakMap,r=new Cn;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=u!==void 0?u.length:0;let d=n.get(o);if(d===void 0||d.count!==h){let z=function(){U.dispose(),n.delete(o),o.removeEventListener("dispose",z)};var A=z;d!==void 0&&d.texture.dispose();const x=o.morphAttributes.position!==void 0,_=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,w=o.morphAttributes.position||[],C=o.morphAttributes.normal||[],P=o.morphAttributes.color||[];let L=0;x===!0&&(L=1),_===!0&&(L=2),S===!0&&(L=3);let D=o.attributes.position.count*L,B=1;D>e.maxTextureSize&&(B=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const k=new Float32Array(D*B*4*h),U=new b6(k,D,B,h);U.type=ps,U.needsUpdate=!0;const F=L*4;for(let V=0;V<h;V++){const W=w[V],X=C[V],J=P[V],K=D*B*4*V;for(let Y=0;Y<W.count;Y++){const ee=Y*F;x===!0&&(r.fromBufferAttribute(W,Y),k[K+ee+0]=r.x,k[K+ee+1]=r.y,k[K+ee+2]=r.z,k[K+ee+3]=0),_===!0&&(r.fromBufferAttribute(X,Y),k[K+ee+4]=r.x,k[K+ee+5]=r.y,k[K+ee+6]=r.z,k[K+ee+7]=0),S===!0&&(r.fromBufferAttribute(J,Y),k[K+ee+8]=r.x,k[K+ee+9]=r.y,k[K+ee+10]=r.z,k[K+ee+11]=J.itemSize===4?r.w:1)}}d={count:h,texture:U,size:new lt(D,B)},n.set(o,d),o.addEventListener("dispose",z)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let x=0;for(let S=0;S<c.length;S++)x+=c[S];const _=o.morphTargetsRelative?1:1-x;l.getUniforms().setValue(i,"morphTargetBaseInfluence",_),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",d.size)}return{update:s}}function One(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const fU=new Ts,eO=new sl(1,1),dU=new b6,pU=new AK,AU=new Kx,tO=[],nO=[],iO=new Float32Array(16),rO=new Float32Array(9),sO=new Float32Array(4);function lm(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=tO[r];if(s===void 0&&(s=new Float32Array(r),tO[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function zs(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Gs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function GS(i,e){let t=nO[e];t===void 0&&(t=new Int32Array(e),nO[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Ine(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Bne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zs(t,e))return;i.uniform2fv(this.addr,e),Gs(t,e)}}function Fne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(zs(t,e))return;i.uniform3fv(this.addr,e),Gs(t,e)}}function Une(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zs(t,e))return;i.uniform4fv(this.addr,e),Gs(t,e)}}function zne(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(zs(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Gs(t,e)}else{if(zs(t,n))return;sO.set(n),i.uniformMatrix2fv(this.addr,!1,sO),Gs(t,n)}}function Gne(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(zs(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Gs(t,e)}else{if(zs(t,n))return;rO.set(n),i.uniformMatrix3fv(this.addr,!1,rO),Gs(t,n)}}function Vne(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(zs(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Gs(t,e)}else{if(zs(t,n))return;iO.set(n),i.uniformMatrix4fv(this.addr,!1,iO),Gs(t,n)}}function Hne(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function qne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zs(t,e))return;i.uniform2iv(this.addr,e),Gs(t,e)}}function Wne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zs(t,e))return;i.uniform3iv(this.addr,e),Gs(t,e)}}function jne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zs(t,e))return;i.uniform4iv(this.addr,e),Gs(t,e)}}function Xne(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Yne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zs(t,e))return;i.uniform2uiv(this.addr,e),Gs(t,e)}}function $ne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zs(t,e))return;i.uniform3uiv(this.addr,e),Gs(t,e)}}function Qne(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zs(t,e))return;i.uniform4uiv(this.addr,e),Gs(t,e)}}function Zne(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(eO.compareFunction=kS,s=eO):s=fU,t.setTexture2D(e||s,r)}function Kne(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||pU,r)}function Jne(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||AU,r)}function eie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||dU,r)}function tie(i){switch(i){case 5126:return Ine;case 35664:return Bne;case 35665:return Fne;case 35666:return Une;case 35674:return zne;case 35675:return Gne;case 35676:return Vne;case 5124:case 35670:return Hne;case 35667:case 35671:return qne;case 35668:case 35672:return Wne;case 35669:case 35673:return jne;case 5125:return Xne;case 36294:return Yne;case 36295:return $ne;case 36296:return Qne;case 35678:case 36198:case 36298:case 36306:case 35682:return Zne;case 35679:case 36299:case 36307:return Kne;case 35680:case 36300:case 36308:case 36293:return Jne;case 36289:case 36303:case 36311:case 36292:return eie}}function nie(i,e){i.uniform1fv(this.addr,e)}function iie(i,e){const t=lm(e,this.size,2);i.uniform2fv(this.addr,t)}function rie(i,e){const t=lm(e,this.size,3);i.uniform3fv(this.addr,t)}function sie(i,e){const t=lm(e,this.size,4);i.uniform4fv(this.addr,t)}function aie(i,e){const t=lm(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function oie(i,e){const t=lm(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function lie(i,e){const t=lm(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function cie(i,e){i.uniform1iv(this.addr,e)}function uie(i,e){i.uniform2iv(this.addr,e)}function hie(i,e){i.uniform3iv(this.addr,e)}function fie(i,e){i.uniform4iv(this.addr,e)}function die(i,e){i.uniform1uiv(this.addr,e)}function pie(i,e){i.uniform2uiv(this.addr,e)}function Aie(i,e){i.uniform3uiv(this.addr,e)}function gie(i,e){i.uniform4uiv(this.addr,e)}function mie(i,e,t){const n=this.cache,r=e.length,s=GS(t,r);zs(n,s)||(i.uniform1iv(this.addr,s),Gs(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||fU,s[a])}function vie(i,e,t){const n=this.cache,r=e.length,s=GS(t,r);zs(n,s)||(i.uniform1iv(this.addr,s),Gs(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||pU,s[a])}function yie(i,e,t){const n=this.cache,r=e.length,s=GS(t,r);zs(n,s)||(i.uniform1iv(this.addr,s),Gs(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||AU,s[a])}function xie(i,e,t){const n=this.cache,r=e.length,s=GS(t,r);zs(n,s)||(i.uniform1iv(this.addr,s),Gs(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||dU,s[a])}function bie(i){switch(i){case 5126:return nie;case 35664:return iie;case 35665:return rie;case 35666:return sie;case 35674:return aie;case 35675:return oie;case 35676:return lie;case 5124:case 35670:return cie;case 35667:case 35671:return uie;case 35668:case 35672:return hie;case 35669:case 35673:return fie;case 5125:return die;case 36294:return pie;case 36295:return Aie;case 36296:return gie;case 35678:case 36198:case 36298:case 36306:case 35682:return mie;case 35679:case 36299:case 36307:return vie;case 35680:case 36300:case 36308:case 36293:return yie;case 36289:case 36303:case 36311:case 36292:return xie}}class _ie{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=tie(t.type)}}class wie{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=bie(t.type)}}class Sie{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],n)}}}const dE=/(\w+)(\])?(\[|\.)?/g;function aO(i,e){i.seq.push(e),i.map[e.id]=e}function Tie(i,e,t){const n=i.name,r=n.length;for(dE.lastIndex=0;;){const s=dE.exec(n),a=dE.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){aO(t,c===void 0?new _ie(o,i,e):new wie(o,i,e));break}else{let h=t.map[o];h===void 0&&(h=new Sie(o),aO(t,h)),t=h}}}class N_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Tie(s,a,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function oO(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const Mie=37297;let Eie=0;function Cie(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const lO=new Kn;function Rie(i){qn._getMatrix(lO,qn.workingColorSpace,i);const e=`mat3( ${lO.elements.map(t=>t.toFixed(4))} )`;switch(qn.getTransfer(i)){case Mg:return[e,"LinearTransferOETF"];case rn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function cO(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Cie(i.getShaderSource(e),a)}else return r}function Pie(i,e){const t=Rie(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Nie(i,e){let t;switch(e){case kF:t="Linear";break;case OF:t="Reinhard";break;case IF:t="Cineon";break;case BF:t="ACESFilmic";break;case FF:t="AgX";break;case UF:t="Neutral";break;case TZ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const b2=new pe;function Lie(){qn.getLuminanceCoefficients(b2);const i=b2.x.toFixed(4),e=b2.y.toFixed(4),t=b2.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Die(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(uy).join(`
`)}function kie(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Oie(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function uy(i){return i!==""}function uO(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hO(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Iie=/^[ \t]*#include +<([\w\d./]+)>/gm;function T4(i){return i.replace(Iie,Fie)}const Bie=new Map;function Fie(i,e){let t=si[e];if(t===void 0){const n=Bie.get(e);if(n!==void 0)t=si[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return T4(t)}const Uie=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fO(i){return i.replace(Uie,zie)}function zie(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function dO(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Gie(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Z5?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===xZ?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===$o&&(e="SHADOWMAP_TYPE_VSM"),e}function Vie(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case yu:case xu:e="ENVMAP_TYPE_CUBE";break;case Gp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Hie(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case xu:e="ENVMAP_MODE_REFRACTION";break}return e}function qie(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Xx:e="ENVMAP_BLENDING_MULTIPLY";break;case LF:e="ENVMAP_BLENDING_MIX";break;case DF:e="ENVMAP_BLENDING_ADD";break}return e}function Wie(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function jie(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Gie(t),c=Vie(t),u=Hie(t),h=qie(t),d=Wie(t),A=Die(t),x=kie(s),_=r.createProgram();let S,w,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(uy).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(uy).join(`
`),w.length>0&&(w+=`
`)):(S=[dO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(uy).join(`
`),w=[dO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Mo?"#define TONE_MAPPING":"",t.toneMapping!==Mo?si.tonemapping_pars_fragment:"",t.toneMapping!==Mo?Nie("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",si.colorspace_pars_fragment,Pie("linearToOutputTexel",t.outputColorSpace),Lie(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(uy).join(`
`)),a=T4(a),a=uO(a,t),a=hO(a,t),o=T4(o),o=uO(o,t),o=hO(o,t),a=fO(a),o=fO(o),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,S=[A,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",t.glslVersion===ok?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ok?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const P=C+S+a,L=C+w+o,D=oO(r,r.VERTEX_SHADER,P),B=oO(r,r.FRAGMENT_SHADER,L);r.attachShader(_,D),r.attachShader(_,B),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function k(V){if(i.debug.checkShaderErrors){const W=r.getProgramInfoLog(_).trim(),X=r.getShaderInfoLog(D).trim(),J=r.getShaderInfoLog(B).trim();let K=!0,Y=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(K=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,_,D,B);else{const ee=cO(r,D,"vertex"),se=cO(r,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+W+`
`+ee+`
`+se)}else W!==""?console.warn("THREE.WebGLProgram: Program Info Log:",W):(X===""||J==="")&&(Y=!1);Y&&(V.diagnostics={runnable:K,programLog:W,vertexShader:{log:X,prefix:S},fragmentShader:{log:J,prefix:w}})}r.deleteShader(D),r.deleteShader(B),U=new N_(r,_),F=Oie(r,_)}let U;this.getUniforms=function(){return U===void 0&&k(this),U};let F;this.getAttributes=function(){return F===void 0&&k(this),F};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=r.getProgramParameter(_,Mie)),z},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Eie++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=D,this.fragmentShader=B,this}let Xie=0;class Yie{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new $ie(e),t.set(e,n)),n}}class $ie{constructor(e){this.id=Xie++,this.code=e,this.usedTimes=0}}function Qie(i,e,t,n,r,s,a){const o=new _6,l=new Yie,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.vertexTextures;let A=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(F){return c.add(F),F===0?"uv":`uv${F}`}function S(F,z,V,W,X){const J=W.fog,K=X.geometry,Y=F.isMeshStandardMaterial?W.environment:null,ee=(F.isMeshStandardMaterial?t:e).get(F.envMap||Y),se=ee&&ee.mapping===Gp?ee.image.height:null,fe=x[F.type];F.precision!==null&&(A=r.getMaxPrecision(F.precision),A!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",A,"instead."));const ne=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,he=ne!==void 0?ne.length:0;let Te=0;K.morphAttributes.position!==void 0&&(Te=1),K.morphAttributes.normal!==void 0&&(Te=2),K.morphAttributes.color!==void 0&&(Te=3);let Pe,_e,Ie,Ve;if(fe){const fi=go[fe];Pe=fi.vertexShader,_e=fi.fragmentShader}else Pe=F.vertexShader,_e=F.fragmentShader,l.update(F),Ie=l.getVertexShaderID(F),Ve=l.getFragmentShaderID(F);const $e=i.getRenderTarget(),Je=i.state.buffers.depth.getReversed(),vt=X.isInstancedMesh===!0,pt=X.isBatchedMesh===!0,Vt=!!F.map,fn=!!F.matcap,jt=!!ee,de=!!F.aoMap,Dt=!!F.lightMap,gt=!!F.bumpMap,Ct=!!F.normalMap,at=!!F.displacementMap,Yt=!!F.emissiveMap,Rt=!!F.metalnessMap,kt=!!F.roughnessMap,an=F.anisotropy>0,be=F.clearcoat>0,oe=F.dispersion>0,He=F.iridescence>0,tt=F.sheen>0,ct=F.transmission>0,et=an&&!!F.anisotropyMap,Xt=be&&!!F.clearcoatMap,Gt=be&&!!F.clearcoatNormalMap,ln=be&&!!F.clearcoatRoughnessMap,dn=He&&!!F.iridescenceMap,_t=He&&!!F.iridescenceThicknessMap,Zt=tt&&!!F.sheenColorMap,yn=tt&&!!F.sheenRoughnessMap,mn=!!F.specularMap,zt=!!F.specularColorMap,zn=!!F.specularIntensityMap,Ae=ct&&!!F.transmissionMap,Ht=ct&&!!F.thicknessMap,Mt=!!F.gradientMap,en=!!F.alphaMap,Ot=F.alphaTest>0,ht=!!F.alphaHash,tn=!!F.extensions;let Ln=Mo;F.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(Ln=i.toneMapping);const Ei={shaderID:fe,shaderType:F.type,shaderName:F.name,vertexShader:Pe,fragmentShader:_e,defines:F.defines,customVertexShaderID:Ie,customFragmentShaderID:Ve,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:A,batching:pt,batchingColor:pt&&X._colorsTexture!==null,instancing:vt,instancingColor:vt&&X.instanceColor!==null,instancingMorph:vt&&X.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:$e===null?i.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:Cc,alphaToCoverage:!!F.alphaToCoverage,map:Vt,matcap:fn,envMap:jt,envMapMode:jt&&ee.mapping,envMapCubeUVHeight:se,aoMap:de,lightMap:Dt,bumpMap:gt,normalMap:Ct,displacementMap:d&&at,emissiveMap:Yt,normalMapObjectSpace:Ct&&F.normalMapType===zF,normalMapTangentSpace:Ct&&F.normalMapType===Nh,metalnessMap:Rt,roughnessMap:kt,anisotropy:an,anisotropyMap:et,clearcoat:be,clearcoatMap:Xt,clearcoatNormalMap:Gt,clearcoatRoughnessMap:ln,dispersion:oe,iridescence:He,iridescenceMap:dn,iridescenceThicknessMap:_t,sheen:tt,sheenColorMap:Zt,sheenRoughnessMap:yn,specularMap:mn,specularColorMap:zt,specularIntensityMap:zn,transmission:ct,transmissionMap:Ae,thicknessMap:Ht,gradientMap:Mt,opaque:F.transparent===!1&&F.blending===to&&F.alphaToCoverage===!1,alphaMap:en,alphaTest:Ot,alphaHash:ht,combine:F.combine,mapUv:Vt&&_(F.map.channel),aoMapUv:de&&_(F.aoMap.channel),lightMapUv:Dt&&_(F.lightMap.channel),bumpMapUv:gt&&_(F.bumpMap.channel),normalMapUv:Ct&&_(F.normalMap.channel),displacementMapUv:at&&_(F.displacementMap.channel),emissiveMapUv:Yt&&_(F.emissiveMap.channel),metalnessMapUv:Rt&&_(F.metalnessMap.channel),roughnessMapUv:kt&&_(F.roughnessMap.channel),anisotropyMapUv:et&&_(F.anisotropyMap.channel),clearcoatMapUv:Xt&&_(F.clearcoatMap.channel),clearcoatNormalMapUv:Gt&&_(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ln&&_(F.clearcoatRoughnessMap.channel),iridescenceMapUv:dn&&_(F.iridescenceMap.channel),iridescenceThicknessMapUv:_t&&_(F.iridescenceThicknessMap.channel),sheenColorMapUv:Zt&&_(F.sheenColorMap.channel),sheenRoughnessMapUv:yn&&_(F.sheenRoughnessMap.channel),specularMapUv:mn&&_(F.specularMap.channel),specularColorMapUv:zt&&_(F.specularColorMap.channel),specularIntensityMapUv:zn&&_(F.specularIntensityMap.channel),transmissionMapUv:Ae&&_(F.transmissionMap.channel),thicknessMapUv:Ht&&_(F.thicknessMap.channel),alphaMapUv:en&&_(F.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(Ct||an),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!K.attributes.uv&&(Vt||en),fog:!!J,useFog:F.fog===!0,fogExp2:!!J&&J.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:Je,skinning:X.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:Te,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:F.dithering,shadowMapEnabled:i.shadowMap.enabled&&V.length>0,shadowMapType:i.shadowMap.type,toneMapping:Ln,decodeVideoTexture:Vt&&F.map.isVideoTexture===!0&&qn.getTransfer(F.map.colorSpace)===rn,decodeVideoTextureEmissive:Yt&&F.emissiveMap.isVideoTexture===!0&&qn.getTransfer(F.emissiveMap.colorSpace)===rn,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===ws,flipSided:F.side===sr,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:tn&&F.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tn&&F.extensions.multiDraw===!0||pt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return Ei.vertexUv1s=c.has(1),Ei.vertexUv2s=c.has(2),Ei.vertexUv3s=c.has(3),c.clear(),Ei}function w(F){const z=[];if(F.shaderID?z.push(F.shaderID):(z.push(F.customVertexShaderID),z.push(F.customFragmentShaderID)),F.defines!==void 0)for(const V in F.defines)z.push(V),z.push(F.defines[V]);return F.isRawShaderMaterial===!1&&(C(z,F),P(z,F),z.push(i.outputColorSpace)),z.push(F.customProgramCacheKey),z.join()}function C(F,z){F.push(z.precision),F.push(z.outputColorSpace),F.push(z.envMapMode),F.push(z.envMapCubeUVHeight),F.push(z.mapUv),F.push(z.alphaMapUv),F.push(z.lightMapUv),F.push(z.aoMapUv),F.push(z.bumpMapUv),F.push(z.normalMapUv),F.push(z.displacementMapUv),F.push(z.emissiveMapUv),F.push(z.metalnessMapUv),F.push(z.roughnessMapUv),F.push(z.anisotropyMapUv),F.push(z.clearcoatMapUv),F.push(z.clearcoatNormalMapUv),F.push(z.clearcoatRoughnessMapUv),F.push(z.iridescenceMapUv),F.push(z.iridescenceThicknessMapUv),F.push(z.sheenColorMapUv),F.push(z.sheenRoughnessMapUv),F.push(z.specularMapUv),F.push(z.specularColorMapUv),F.push(z.specularIntensityMapUv),F.push(z.transmissionMapUv),F.push(z.thicknessMapUv),F.push(z.combine),F.push(z.fogExp2),F.push(z.sizeAttenuation),F.push(z.morphTargetsCount),F.push(z.morphAttributeCount),F.push(z.numDirLights),F.push(z.numPointLights),F.push(z.numSpotLights),F.push(z.numSpotLightMaps),F.push(z.numHemiLights),F.push(z.numRectAreaLights),F.push(z.numDirLightShadows),F.push(z.numPointLightShadows),F.push(z.numSpotLightShadows),F.push(z.numSpotLightShadowsWithMaps),F.push(z.numLightProbes),F.push(z.shadowMapType),F.push(z.toneMapping),F.push(z.numClippingPlanes),F.push(z.numClipIntersection),F.push(z.depthPacking)}function P(F,z){o.disableAll(),z.supportsVertexTextures&&o.enable(0),z.instancing&&o.enable(1),z.instancingColor&&o.enable(2),z.instancingMorph&&o.enable(3),z.matcap&&o.enable(4),z.envMap&&o.enable(5),z.normalMapObjectSpace&&o.enable(6),z.normalMapTangentSpace&&o.enable(7),z.clearcoat&&o.enable(8),z.iridescence&&o.enable(9),z.alphaTest&&o.enable(10),z.vertexColors&&o.enable(11),z.vertexAlphas&&o.enable(12),z.vertexUv1s&&o.enable(13),z.vertexUv2s&&o.enable(14),z.vertexUv3s&&o.enable(15),z.vertexTangents&&o.enable(16),z.anisotropy&&o.enable(17),z.alphaHash&&o.enable(18),z.batching&&o.enable(19),z.dispersion&&o.enable(20),z.batchingColor&&o.enable(21),F.push(o.mask),o.disableAll(),z.fog&&o.enable(0),z.useFog&&o.enable(1),z.flatShading&&o.enable(2),z.logarithmicDepthBuffer&&o.enable(3),z.reverseDepthBuffer&&o.enable(4),z.skinning&&o.enable(5),z.morphTargets&&o.enable(6),z.morphNormals&&o.enable(7),z.morphColors&&o.enable(8),z.premultipliedAlpha&&o.enable(9),z.shadowMapEnabled&&o.enable(10),z.doubleSided&&o.enable(11),z.flipSided&&o.enable(12),z.useDepthPacking&&o.enable(13),z.dithering&&o.enable(14),z.transmission&&o.enable(15),z.sheen&&o.enable(16),z.opaque&&o.enable(17),z.pointsUvs&&o.enable(18),z.decodeVideoTexture&&o.enable(19),z.decodeVideoTextureEmissive&&o.enable(20),z.alphaToCoverage&&o.enable(21),F.push(o.mask)}function L(F){const z=x[F.type];let V;if(z){const W=go[z];V=OS.clone(W.uniforms)}else V=F.uniforms;return V}function D(F,z){let V;for(let W=0,X=u.length;W<X;W++){const J=u[W];if(J.cacheKey===z){V=J,++V.usedTimes;break}}return V===void 0&&(V=new jie(i,z,F,s),u.push(V)),V}function B(F){if(--F.usedTimes===0){const z=u.indexOf(F);u[z]=u[u.length-1],u.pop(),F.destroy()}}function k(F){l.remove(F)}function U(){l.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:L,acquireProgram:D,releaseProgram:B,releaseShaderCache:k,programs:u,dispose:U}}function Zie(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function r(a,o,l){i.get(a)[o]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function Kie(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function pO(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function AO(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(h,d,A,x,_,S){let w=i[e];return w===void 0?(w={id:h.id,object:h,geometry:d,material:A,groupOrder:x,renderOrder:h.renderOrder,z:_,group:S},i[e]=w):(w.id=h.id,w.object=h,w.geometry=d,w.material=A,w.groupOrder=x,w.renderOrder=h.renderOrder,w.z=_,w.group=S),e++,w}function o(h,d,A,x,_,S){const w=a(h,d,A,x,_,S);A.transmission>0?n.push(w):A.transparent===!0?r.push(w):t.push(w)}function l(h,d,A,x,_,S){const w=a(h,d,A,x,_,S);A.transmission>0?n.unshift(w):A.transparent===!0?r.unshift(w):t.unshift(w)}function c(h,d){t.length>1&&t.sort(h||Kie),n.length>1&&n.sort(d||pO),r.length>1&&r.sort(d||pO)}function u(){for(let h=e,d=i.length;h<d;h++){const A=i[h];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function Jie(){let i=new WeakMap;function e(n,r){const s=i.get(n);let a;return s===void 0?(a=new AO,i.set(n,[a])):r>=s.length?(a=new AO,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function ere(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new pe,color:new un};break;case"SpotLight":t={position:new pe,direction:new pe,color:new un,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new pe,color:new un,distance:0,decay:0};break;case"HemisphereLight":t={direction:new pe,skyColor:new un,groundColor:new un};break;case"RectAreaLight":t={color:new un,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return i[e.id]=t,t}}}function tre(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let nre=0;function ire(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function rre(i){const e=new ere,t=tre(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new pe);const r=new pe,s=new Un,a=new Un;function o(c){let u=0,h=0,d=0;for(let F=0;F<9;F++)n.probe[F].set(0,0,0);let A=0,x=0,_=0,S=0,w=0,C=0,P=0,L=0,D=0,B=0,k=0;c.sort(ire);for(let F=0,z=c.length;F<z;F++){const V=c[F],W=V.color,X=V.intensity,J=V.distance,K=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)u+=W.r*X,h+=W.g*X,d+=W.b*X;else if(V.isLightProbe){for(let Y=0;Y<9;Y++)n.probe[Y].addScaledVector(V.sh.coefficients[Y],X);k++}else if(V.isDirectionalLight){const Y=e.get(V);if(Y.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const ee=V.shadow,se=t.get(V);se.shadowIntensity=ee.intensity,se.shadowBias=ee.bias,se.shadowNormalBias=ee.normalBias,se.shadowRadius=ee.radius,se.shadowMapSize=ee.mapSize,n.directionalShadow[A]=se,n.directionalShadowMap[A]=K,n.directionalShadowMatrix[A]=V.shadow.matrix,C++}n.directional[A]=Y,A++}else if(V.isSpotLight){const Y=e.get(V);Y.position.setFromMatrixPosition(V.matrixWorld),Y.color.copy(W).multiplyScalar(X),Y.distance=J,Y.coneCos=Math.cos(V.angle),Y.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),Y.decay=V.decay,n.spot[_]=Y;const ee=V.shadow;if(V.map&&(n.spotLightMap[D]=V.map,D++,ee.updateMatrices(V),V.castShadow&&B++),n.spotLightMatrix[_]=ee.matrix,V.castShadow){const se=t.get(V);se.shadowIntensity=ee.intensity,se.shadowBias=ee.bias,se.shadowNormalBias=ee.normalBias,se.shadowRadius=ee.radius,se.shadowMapSize=ee.mapSize,n.spotShadow[_]=se,n.spotShadowMap[_]=K,L++}_++}else if(V.isRectAreaLight){const Y=e.get(V);Y.color.copy(W).multiplyScalar(X),Y.halfWidth.set(V.width*.5,0,0),Y.halfHeight.set(0,V.height*.5,0),n.rectArea[S]=Y,S++}else if(V.isPointLight){const Y=e.get(V);if(Y.color.copy(V.color).multiplyScalar(V.intensity),Y.distance=V.distance,Y.decay=V.decay,V.castShadow){const ee=V.shadow,se=t.get(V);se.shadowIntensity=ee.intensity,se.shadowBias=ee.bias,se.shadowNormalBias=ee.normalBias,se.shadowRadius=ee.radius,se.shadowMapSize=ee.mapSize,se.shadowCameraNear=ee.camera.near,se.shadowCameraFar=ee.camera.far,n.pointShadow[x]=se,n.pointShadowMap[x]=K,n.pointShadowMatrix[x]=V.shadow.matrix,P++}n.point[x]=Y,x++}else if(V.isHemisphereLight){const Y=e.get(V);Y.skyColor.copy(V.color).multiplyScalar(X),Y.groundColor.copy(V.groundColor).multiplyScalar(X),n.hemi[w]=Y,w++}}S>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=qt.LTC_FLOAT_1,n.rectAreaLTC2=qt.LTC_FLOAT_2):(n.rectAreaLTC1=qt.LTC_HALF_1,n.rectAreaLTC2=qt.LTC_HALF_2)),n.ambient[0]=u,n.ambient[1]=h,n.ambient[2]=d;const U=n.hash;(U.directionalLength!==A||U.pointLength!==x||U.spotLength!==_||U.rectAreaLength!==S||U.hemiLength!==w||U.numDirectionalShadows!==C||U.numPointShadows!==P||U.numSpotShadows!==L||U.numSpotMaps!==D||U.numLightProbes!==k)&&(n.directional.length=A,n.spot.length=_,n.rectArea.length=S,n.point.length=x,n.hemi.length=w,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=P,n.pointShadowMap.length=P,n.spotShadow.length=L,n.spotShadowMap.length=L,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=P,n.spotLightMatrix.length=L+D-B,n.spotLightMap.length=D,n.numSpotLightShadowsWithMaps=B,n.numLightProbes=k,U.directionalLength=A,U.pointLength=x,U.spotLength=_,U.rectAreaLength=S,U.hemiLength=w,U.numDirectionalShadows=C,U.numPointShadows=P,U.numSpotShadows=L,U.numSpotMaps=D,U.numLightProbes=k,n.version=nre++)}function l(c,u){let h=0,d=0,A=0,x=0,_=0;const S=u.matrixWorldInverse;for(let w=0,C=c.length;w<C;w++){const P=c[w];if(P.isDirectionalLight){const L=n.directional[h];L.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(S),h++}else if(P.isSpotLight){const L=n.spot[A];L.position.setFromMatrixPosition(P.matrixWorld),L.position.applyMatrix4(S),L.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(S),A++}else if(P.isRectAreaLight){const L=n.rectArea[x];L.position.setFromMatrixPosition(P.matrixWorld),L.position.applyMatrix4(S),a.identity(),s.copy(P.matrixWorld),s.premultiply(S),a.extractRotation(s),L.halfWidth.set(P.width*.5,0,0),L.halfHeight.set(0,P.height*.5,0),L.halfWidth.applyMatrix4(a),L.halfHeight.applyMatrix4(a),x++}else if(P.isPointLight){const L=n.point[d];L.position.setFromMatrixPosition(P.matrixWorld),L.position.applyMatrix4(S),d++}else if(P.isHemisphereLight){const L=n.hemi[_];L.direction.setFromMatrixPosition(P.matrixWorld),L.direction.transformDirection(S),_++}}}return{setup:o,setupView:l,state:n}}function gO(i){const e=new rre(i),t=[],n=[];function r(u){c.camera=u,t.length=0,n.length=0}function s(u){t.push(u)}function a(u){n.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function sre(i){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new gO(i),e.set(r,[o])):s>=a.length?(o=new gO(i),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const are=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ore=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lre(i,e,t){let n=new am;const r=new lt,s=new lt,a=new Cn,o=new yJ({depthPacking:NZ}),l=new xJ,c={},u=t.maxTextureSize,h={[So]:sr,[sr]:So,[ws]:ws},d=new Eo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:are,fragmentShader:ore}),A=d.clone();A.defines.HORIZONTAL_PASS=1;const x=new lr;x.setAttribute("position",new Vr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new zi(x,d),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Z5;let w=this.type;this.render=function(B,k,U){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||B.length===0)return;const F=i.getRenderTarget(),z=i.getActiveCubeFace(),V=i.getActiveMipmapLevel(),W=i.state;W.setBlending(To),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const X=w!==$o&&this.type===$o,J=w===$o&&this.type!==$o;for(let K=0,Y=B.length;K<Y;K++){const ee=B[K],se=ee.shadow;if(se===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(se.autoUpdate===!1&&se.needsUpdate===!1)continue;r.copy(se.mapSize);const fe=se.getFrameExtents();if(r.multiply(fe),s.copy(se.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/fe.x),r.x=s.x*fe.x,se.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/fe.y),r.y=s.y*fe.y,se.mapSize.y=s.y)),se.map===null||X===!0||J===!0){const he=this.type!==$o?{minFilter:Er,magFilter:Er}:{};se.map!==null&&se.map.dispose(),se.map=new cd(r.x,r.y,he),se.map.texture.name=ee.name+".shadowMap",se.camera.updateProjectionMatrix()}i.setRenderTarget(se.map),i.clear();const ne=se.getViewportCount();for(let he=0;he<ne;he++){const Te=se.getViewport(he);a.set(s.x*Te.x,s.y*Te.y,s.x*Te.z,s.y*Te.w),W.viewport(a),se.updateMatrices(ee,he),n=se.getFrustum(),L(k,U,se.camera,ee,this.type)}se.isPointLightShadow!==!0&&this.type===$o&&C(se,U),se.needsUpdate=!1}w=this.type,S.needsUpdate=!1,i.setRenderTarget(F,z,V)};function C(B,k){const U=e.update(_);d.defines.VSM_SAMPLES!==B.blurSamples&&(d.defines.VSM_SAMPLES=B.blurSamples,A.defines.VSM_SAMPLES=B.blurSamples,d.needsUpdate=!0,A.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new cd(r.x,r.y)),d.uniforms.shadow_pass.value=B.map.texture,d.uniforms.resolution.value=B.mapSize,d.uniforms.radius.value=B.radius,i.setRenderTarget(B.mapPass),i.clear(),i.renderBufferDirect(k,null,U,d,_,null),A.uniforms.shadow_pass.value=B.mapPass.texture,A.uniforms.resolution.value=B.mapSize,A.uniforms.radius.value=B.radius,i.setRenderTarget(B.map),i.clear(),i.renderBufferDirect(k,null,U,A,_,null)}function P(B,k,U,F){let z=null;const V=U.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(V!==void 0)z=V;else if(z=U.isPointLight===!0?l:o,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const W=z.uuid,X=k.uuid;let J=c[W];J===void 0&&(J={},c[W]=J);let K=J[X];K===void 0&&(K=z.clone(),J[X]=K,k.addEventListener("dispose",D)),z=K}if(z.visible=k.visible,z.wireframe=k.wireframe,F===$o?z.side=k.shadowSide!==null?k.shadowSide:k.side:z.side=k.shadowSide!==null?k.shadowSide:h[k.side],z.alphaMap=k.alphaMap,z.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,z.map=k.map,z.clipShadows=k.clipShadows,z.clippingPlanes=k.clippingPlanes,z.clipIntersection=k.clipIntersection,z.displacementMap=k.displacementMap,z.displacementScale=k.displacementScale,z.displacementBias=k.displacementBias,z.wireframeLinewidth=k.wireframeLinewidth,z.linewidth=k.linewidth,U.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const W=i.properties.get(z);W.light=U}return z}function L(B,k,U,F,z){if(B.visible===!1)return;if(B.layers.test(k.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&z===$o)&&(!B.frustumCulled||n.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,B.matrixWorld);const X=e.update(B),J=B.material;if(Array.isArray(J)){const K=X.groups;for(let Y=0,ee=K.length;Y<ee;Y++){const se=K[Y],fe=J[se.materialIndex];if(fe&&fe.visible){const ne=P(B,fe,F,z);B.onBeforeShadow(i,B,k,U,X,ne,se),i.renderBufferDirect(U,null,X,ne,B,se),B.onAfterShadow(i,B,k,U,X,ne,se)}}}else if(J.visible){const K=P(B,J,F,z);B.onBeforeShadow(i,B,k,U,X,K,null),i.renderBufferDirect(U,null,X,K,B,null),B.onAfterShadow(i,B,k,U,X,K,null)}}const W=B.children;for(let X=0,J=W.length;X<J;X++)L(W[X],k,U,F,z)}function D(B){B.target.removeEventListener("dispose",D);for(const U in c){const F=c[U],z=B.target.uuid;z in F&&(F[z].dispose(),delete F[z])}}}const cre={[Hy]:qy,[Wy]:Yy,[jy]:$y,[ld]:Xy,[qy]:Hy,[Yy]:Wy,[$y]:jy,[Xy]:ld};function ure(i,e){function t(){let Ae=!1;const Ht=new Cn;let Mt=null;const en=new Cn(0,0,0,0);return{setMask:function(Ot){Mt!==Ot&&!Ae&&(i.colorMask(Ot,Ot,Ot,Ot),Mt=Ot)},setLocked:function(Ot){Ae=Ot},setClear:function(Ot,ht,tn,Ln,Ei){Ei===!0&&(Ot*=Ln,ht*=Ln,tn*=Ln),Ht.set(Ot,ht,tn,Ln),en.equals(Ht)===!1&&(i.clearColor(Ot,ht,tn,Ln),en.copy(Ht))},reset:function(){Ae=!1,Mt=null,en.set(-1,0,0,0)}}}function n(){let Ae=!1,Ht=!1,Mt=null,en=null,Ot=null;return{setReversed:function(ht){if(Ht!==ht){const tn=e.get("EXT_clip_control");ht?tn.clipControlEXT(tn.LOWER_LEFT_EXT,tn.ZERO_TO_ONE_EXT):tn.clipControlEXT(tn.LOWER_LEFT_EXT,tn.NEGATIVE_ONE_TO_ONE_EXT),Ht=ht;const Ln=Ot;Ot=null,this.setClear(Ln)}},getReversed:function(){return Ht},setTest:function(ht){ht?$e(i.DEPTH_TEST):Je(i.DEPTH_TEST)},setMask:function(ht){Mt!==ht&&!Ae&&(i.depthMask(ht),Mt=ht)},setFunc:function(ht){if(Ht&&(ht=cre[ht]),en!==ht){switch(ht){case Hy:i.depthFunc(i.NEVER);break;case qy:i.depthFunc(i.ALWAYS);break;case Wy:i.depthFunc(i.LESS);break;case ld:i.depthFunc(i.LEQUAL);break;case jy:i.depthFunc(i.EQUAL);break;case Xy:i.depthFunc(i.GEQUAL);break;case Yy:i.depthFunc(i.GREATER);break;case $y:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}en=ht}},setLocked:function(ht){Ae=ht},setClear:function(ht){Ot!==ht&&(Ht&&(ht=1-ht),i.clearDepth(ht),Ot=ht)},reset:function(){Ae=!1,Mt=null,en=null,Ot=null,Ht=!1}}}function r(){let Ae=!1,Ht=null,Mt=null,en=null,Ot=null,ht=null,tn=null,Ln=null,Ei=null;return{setTest:function(fi){Ae||(fi?$e(i.STENCIL_TEST):Je(i.STENCIL_TEST))},setMask:function(fi){Ht!==fi&&!Ae&&(i.stencilMask(fi),Ht=fi)},setFunc:function(fi,Or,Gi){(Mt!==fi||en!==Or||Ot!==Gi)&&(i.stencilFunc(fi,Or,Gi),Mt=fi,en=Or,Ot=Gi)},setOp:function(fi,Or,Gi){(ht!==fi||tn!==Or||Ln!==Gi)&&(i.stencilOp(fi,Or,Gi),ht=fi,tn=Or,Ln=Gi)},setLocked:function(fi){Ae=fi},setClear:function(fi){Ei!==fi&&(i.clearStencil(fi),Ei=fi)},reset:function(){Ae=!1,Ht=null,Mt=null,en=null,Ot=null,ht=null,tn=null,Ln=null,Ei=null}}}const s=new t,a=new n,o=new r,l=new WeakMap,c=new WeakMap;let u={},h={},d=new WeakMap,A=[],x=null,_=!1,S=null,w=null,C=null,P=null,L=null,D=null,B=null,k=new un(0,0,0),U=0,F=!1,z=null,V=null,W=null,X=null,J=null;const K=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,ee=0;const se=i.getParameter(i.VERSION);se.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(se)[1]),Y=ee>=1):se.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(se)[1]),Y=ee>=2);let fe=null,ne={};const he=i.getParameter(i.SCISSOR_BOX),Te=i.getParameter(i.VIEWPORT),Pe=new Cn().fromArray(he),_e=new Cn().fromArray(Te);function Ie(Ae,Ht,Mt,en){const Ot=new Uint8Array(4),ht=i.createTexture();i.bindTexture(Ae,ht),i.texParameteri(Ae,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Ae,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let tn=0;tn<Mt;tn++)Ae===i.TEXTURE_3D||Ae===i.TEXTURE_2D_ARRAY?i.texImage3D(Ht,0,i.RGBA,1,1,en,0,i.RGBA,i.UNSIGNED_BYTE,Ot):i.texImage2D(Ht+tn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ot);return ht}const Ve={};Ve[i.TEXTURE_2D]=Ie(i.TEXTURE_2D,i.TEXTURE_2D,1),Ve[i.TEXTURE_CUBE_MAP]=Ie(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ve[i.TEXTURE_2D_ARRAY]=Ie(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ve[i.TEXTURE_3D]=Ie(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),$e(i.DEPTH_TEST),a.setFunc(ld),gt(!1),Ct(g4),$e(i.CULL_FACE),de(To);function $e(Ae){u[Ae]!==!0&&(i.enable(Ae),u[Ae]=!0)}function Je(Ae){u[Ae]!==!1&&(i.disable(Ae),u[Ae]=!1)}function vt(Ae,Ht){return h[Ae]!==Ht?(i.bindFramebuffer(Ae,Ht),h[Ae]=Ht,Ae===i.DRAW_FRAMEBUFFER&&(h[i.FRAMEBUFFER]=Ht),Ae===i.FRAMEBUFFER&&(h[i.DRAW_FRAMEBUFFER]=Ht),!0):!1}function pt(Ae,Ht){let Mt=A,en=!1;if(Ae){Mt=d.get(Ht),Mt===void 0&&(Mt=[],d.set(Ht,Mt));const Ot=Ae.textures;if(Mt.length!==Ot.length||Mt[0]!==i.COLOR_ATTACHMENT0){for(let ht=0,tn=Ot.length;ht<tn;ht++)Mt[ht]=i.COLOR_ATTACHMENT0+ht;Mt.length=Ot.length,en=!0}}else Mt[0]!==i.BACK&&(Mt[0]=i.BACK,en=!0);en&&i.drawBuffers(Mt)}function Vt(Ae){return x!==Ae?(i.useProgram(Ae),x=Ae,!0):!1}const fn={[ka]:i.FUNC_ADD,[K5]:i.FUNC_SUBTRACT,[J5]:i.FUNC_REVERSE_SUBTRACT};fn[PF]=i.MIN,fn[NF]=i.MAX;const jt={[Ah]:i.ZERO,[e6]:i.ONE,[t6]:i.SRC_COLOR,[Gy]:i.SRC_ALPHA,[o6]:i.SRC_ALPHA_SATURATE,[s6]:i.DST_COLOR,[i6]:i.DST_ALPHA,[n6]:i.ONE_MINUS_SRC_COLOR,[Vy]:i.ONE_MINUS_SRC_ALPHA,[a6]:i.ONE_MINUS_DST_COLOR,[r6]:i.ONE_MINUS_DST_ALPHA,[bZ]:i.CONSTANT_COLOR,[_Z]:i.ONE_MINUS_CONSTANT_COLOR,[wZ]:i.CONSTANT_ALPHA,[SZ]:i.ONE_MINUS_CONSTANT_ALPHA};function de(Ae,Ht,Mt,en,Ot,ht,tn,Ln,Ei,fi){if(Ae===To){_===!0&&(Je(i.BLEND),_=!1);return}if(_===!1&&($e(i.BLEND),_=!0),Ae!==Y0){if(Ae!==S||fi!==F){if((w!==ka||L!==ka)&&(i.blendEquation(i.FUNC_ADD),w=ka,L=ka),fi)switch(Ae){case to:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case sg:i.blendFunc(i.ONE,i.ONE);break;case ag:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case og:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case to:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case sg:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case ag:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case og:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}C=null,P=null,D=null,B=null,k.set(0,0,0),U=0,S=Ae,F=fi}return}Ot=Ot||Ht,ht=ht||Mt,tn=tn||en,(Ht!==w||Ot!==L)&&(i.blendEquationSeparate(fn[Ht],fn[Ot]),w=Ht,L=Ot),(Mt!==C||en!==P||ht!==D||tn!==B)&&(i.blendFuncSeparate(jt[Mt],jt[en],jt[ht],jt[tn]),C=Mt,P=en,D=ht,B=tn),(Ln.equals(k)===!1||Ei!==U)&&(i.blendColor(Ln.r,Ln.g,Ln.b,Ei),k.copy(Ln),U=Ei),S=Ae,F=!1}function Dt(Ae,Ht){Ae.side===ws?Je(i.CULL_FACE):$e(i.CULL_FACE);let Mt=Ae.side===sr;Ht&&(Mt=!Mt),gt(Mt),Ae.blending===to&&Ae.transparent===!1?de(To):de(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.blendColor,Ae.blendAlpha,Ae.premultipliedAlpha),a.setFunc(Ae.depthFunc),a.setTest(Ae.depthTest),a.setMask(Ae.depthWrite),s.setMask(Ae.colorWrite);const en=Ae.stencilWrite;o.setTest(en),en&&(o.setMask(Ae.stencilWriteMask),o.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),o.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),Yt(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?$e(i.SAMPLE_ALPHA_TO_COVERAGE):Je(i.SAMPLE_ALPHA_TO_COVERAGE)}function gt(Ae){z!==Ae&&(Ae?i.frontFace(i.CW):i.frontFace(i.CCW),z=Ae)}function Ct(Ae){Ae!==CF?($e(i.CULL_FACE),Ae!==V&&(Ae===g4?i.cullFace(i.BACK):Ae===RF?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Je(i.CULL_FACE),V=Ae}function at(Ae){Ae!==W&&(Y&&i.lineWidth(Ae),W=Ae)}function Yt(Ae,Ht,Mt){Ae?($e(i.POLYGON_OFFSET_FILL),(X!==Ht||J!==Mt)&&(i.polygonOffset(Ht,Mt),X=Ht,J=Mt)):Je(i.POLYGON_OFFSET_FILL)}function Rt(Ae){Ae?$e(i.SCISSOR_TEST):Je(i.SCISSOR_TEST)}function kt(Ae){Ae===void 0&&(Ae=i.TEXTURE0+K-1),fe!==Ae&&(i.activeTexture(Ae),fe=Ae)}function an(Ae,Ht,Mt){Mt===void 0&&(fe===null?Mt=i.TEXTURE0+K-1:Mt=fe);let en=ne[Mt];en===void 0&&(en={type:void 0,texture:void 0},ne[Mt]=en),(en.type!==Ae||en.texture!==Ht)&&(fe!==Mt&&(i.activeTexture(Mt),fe=Mt),i.bindTexture(Ae,Ht||Ve[Ae]),en.type=Ae,en.texture=Ht)}function be(){const Ae=ne[fe];Ae!==void 0&&Ae.type!==void 0&&(i.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function oe(){try{i.compressedTexImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function He(){try{i.compressedTexImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function tt(){try{i.texSubImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ct(){try{i.texSubImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function et(){try{i.compressedTexSubImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Xt(){try{i.compressedTexSubImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Gt(){try{i.texStorage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ln(){try{i.texStorage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function dn(){try{i.texImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function _t(){try{i.texImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Zt(Ae){Pe.equals(Ae)===!1&&(i.scissor(Ae.x,Ae.y,Ae.z,Ae.w),Pe.copy(Ae))}function yn(Ae){_e.equals(Ae)===!1&&(i.viewport(Ae.x,Ae.y,Ae.z,Ae.w),_e.copy(Ae))}function mn(Ae,Ht){let Mt=c.get(Ht);Mt===void 0&&(Mt=new WeakMap,c.set(Ht,Mt));let en=Mt.get(Ae);en===void 0&&(en=i.getUniformBlockIndex(Ht,Ae.name),Mt.set(Ae,en))}function zt(Ae,Ht){const en=c.get(Ht).get(Ae);l.get(Ht)!==en&&(i.uniformBlockBinding(Ht,en,Ae.__bindingPointIndex),l.set(Ht,en))}function zn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},fe=null,ne={},h={},d=new WeakMap,A=[],x=null,_=!1,S=null,w=null,C=null,P=null,L=null,D=null,B=null,k=new un(0,0,0),U=0,F=!1,z=null,V=null,W=null,X=null,J=null,Pe.set(0,0,i.canvas.width,i.canvas.height),_e.set(0,0,i.canvas.width,i.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:$e,disable:Je,bindFramebuffer:vt,drawBuffers:pt,useProgram:Vt,setBlending:de,setMaterial:Dt,setFlipSided:gt,setCullFace:Ct,setLineWidth:at,setPolygonOffset:Yt,setScissorTest:Rt,activeTexture:kt,bindTexture:an,unbindTexture:be,compressedTexImage2D:oe,compressedTexImage3D:He,texImage2D:dn,texImage3D:_t,updateUBOMapping:mn,uniformBlockBinding:zt,texStorage2D:Gt,texStorage3D:ln,texSubImage2D:tt,texSubImage3D:ct,compressedTexSubImage2D:et,compressedTexSubImage3D:Xt,scissor:Zt,viewport:yn,reset:zn}}function hre(i,e,t,n,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new lt,u=new WeakMap;let h;const d=new WeakMap;let A=!1;try{A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(be,oe){return A?new OffscreenCanvas(be,oe):rx("canvas")}function _(be,oe,He){let tt=1;const ct=an(be);if((ct.width>He||ct.height>He)&&(tt=He/Math.max(ct.width,ct.height)),tt<1)if(typeof HTMLImageElement<"u"&&be instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&be instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&be instanceof ImageBitmap||typeof VideoFrame<"u"&&be instanceof VideoFrame){const et=Math.floor(tt*ct.width),Xt=Math.floor(tt*ct.height);h===void 0&&(h=x(et,Xt));const Gt=oe?x(et,Xt):h;return Gt.width=et,Gt.height=Xt,Gt.getContext("2d").drawImage(be,0,0,et,Xt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ct.width+"x"+ct.height+") to ("+et+"x"+Xt+")."),Gt}else return"data"in be&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ct.width+"x"+ct.height+")."),be;return be}function S(be){return be.generateMipmaps}function w(be){i.generateMipmap(be)}function C(be){return be.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:be.isWebGL3DRenderTarget?i.TEXTURE_3D:be.isWebGLArrayRenderTarget||be.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function P(be,oe,He,tt,ct=!1){if(be!==null){if(i[be]!==void 0)return i[be];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+be+"'")}let et=oe;if(oe===i.RED&&(He===i.FLOAT&&(et=i.R32F),He===i.HALF_FLOAT&&(et=i.R16F),He===i.UNSIGNED_BYTE&&(et=i.R8)),oe===i.RED_INTEGER&&(He===i.UNSIGNED_BYTE&&(et=i.R8UI),He===i.UNSIGNED_SHORT&&(et=i.R16UI),He===i.UNSIGNED_INT&&(et=i.R32UI),He===i.BYTE&&(et=i.R8I),He===i.SHORT&&(et=i.R16I),He===i.INT&&(et=i.R32I)),oe===i.RG&&(He===i.FLOAT&&(et=i.RG32F),He===i.HALF_FLOAT&&(et=i.RG16F),He===i.UNSIGNED_BYTE&&(et=i.RG8)),oe===i.RG_INTEGER&&(He===i.UNSIGNED_BYTE&&(et=i.RG8UI),He===i.UNSIGNED_SHORT&&(et=i.RG16UI),He===i.UNSIGNED_INT&&(et=i.RG32UI),He===i.BYTE&&(et=i.RG8I),He===i.SHORT&&(et=i.RG16I),He===i.INT&&(et=i.RG32I)),oe===i.RGB_INTEGER&&(He===i.UNSIGNED_BYTE&&(et=i.RGB8UI),He===i.UNSIGNED_SHORT&&(et=i.RGB16UI),He===i.UNSIGNED_INT&&(et=i.RGB32UI),He===i.BYTE&&(et=i.RGB8I),He===i.SHORT&&(et=i.RGB16I),He===i.INT&&(et=i.RGB32I)),oe===i.RGBA_INTEGER&&(He===i.UNSIGNED_BYTE&&(et=i.RGBA8UI),He===i.UNSIGNED_SHORT&&(et=i.RGBA16UI),He===i.UNSIGNED_INT&&(et=i.RGBA32UI),He===i.BYTE&&(et=i.RGBA8I),He===i.SHORT&&(et=i.RGBA16I),He===i.INT&&(et=i.RGBA32I)),oe===i.RGB&&He===i.UNSIGNED_INT_5_9_9_9_REV&&(et=i.RGB9_E5),oe===i.RGBA){const Xt=ct?Mg:qn.getTransfer(tt);He===i.FLOAT&&(et=i.RGBA32F),He===i.HALF_FLOAT&&(et=i.RGBA16F),He===i.UNSIGNED_BYTE&&(et=Xt===rn?i.SRGB8_ALPHA8:i.RGBA8),He===i.UNSIGNED_SHORT_4_4_4_4&&(et=i.RGBA4),He===i.UNSIGNED_SHORT_5_5_5_1&&(et=i.RGB5_A1)}return(et===i.R16F||et===i.R32F||et===i.RG16F||et===i.RG32F||et===i.RGBA16F||et===i.RGBA32F)&&e.get("EXT_color_buffer_float"),et}function L(be,oe){let He;return be?oe===null||oe===br||oe===tl?He=i.DEPTH24_STENCIL8:oe===ps?He=i.DEPTH32F_STENCIL8:oe===bc&&(He=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):oe===null||oe===br||oe===tl?He=i.DEPTH_COMPONENT24:oe===ps?He=i.DEPTH_COMPONENT32F:oe===bc&&(He=i.DEPTH_COMPONENT16),He}function D(be,oe){return S(be)===!0||be.isFramebufferTexture&&be.minFilter!==Er&&be.minFilter!==Bs?Math.log2(Math.max(oe.width,oe.height))+1:be.mipmaps!==void 0&&be.mipmaps.length>0?be.mipmaps.length:be.isCompressedTexture&&Array.isArray(be.image)?oe.mipmaps.length:1}function B(be){const oe=be.target;oe.removeEventListener("dispose",B),U(oe),oe.isVideoTexture&&u.delete(oe)}function k(be){const oe=be.target;oe.removeEventListener("dispose",k),z(oe)}function U(be){const oe=n.get(be);if(oe.__webglInit===void 0)return;const He=be.source,tt=d.get(He);if(tt){const ct=tt[oe.__cacheKey];ct.usedTimes--,ct.usedTimes===0&&F(be),Object.keys(tt).length===0&&d.delete(He)}n.remove(be)}function F(be){const oe=n.get(be);i.deleteTexture(oe.__webglTexture);const He=be.source,tt=d.get(He);delete tt[oe.__cacheKey],a.memory.textures--}function z(be){const oe=n.get(be);if(be.depthTexture&&(be.depthTexture.dispose(),n.remove(be.depthTexture)),be.isWebGLCubeRenderTarget)for(let tt=0;tt<6;tt++){if(Array.isArray(oe.__webglFramebuffer[tt]))for(let ct=0;ct<oe.__webglFramebuffer[tt].length;ct++)i.deleteFramebuffer(oe.__webglFramebuffer[tt][ct]);else i.deleteFramebuffer(oe.__webglFramebuffer[tt]);oe.__webglDepthbuffer&&i.deleteRenderbuffer(oe.__webglDepthbuffer[tt])}else{if(Array.isArray(oe.__webglFramebuffer))for(let tt=0;tt<oe.__webglFramebuffer.length;tt++)i.deleteFramebuffer(oe.__webglFramebuffer[tt]);else i.deleteFramebuffer(oe.__webglFramebuffer);if(oe.__webglDepthbuffer&&i.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&i.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let tt=0;tt<oe.__webglColorRenderbuffer.length;tt++)oe.__webglColorRenderbuffer[tt]&&i.deleteRenderbuffer(oe.__webglColorRenderbuffer[tt]);oe.__webglDepthRenderbuffer&&i.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}const He=be.textures;for(let tt=0,ct=He.length;tt<ct;tt++){const et=n.get(He[tt]);et.__webglTexture&&(i.deleteTexture(et.__webglTexture),a.memory.textures--),n.remove(He[tt])}n.remove(be)}let V=0;function W(){V=0}function X(){const be=V;return be>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+be+" texture units while this GPU supports only "+r.maxTextures),V+=1,be}function J(be){const oe=[];return oe.push(be.wrapS),oe.push(be.wrapT),oe.push(be.wrapR||0),oe.push(be.magFilter),oe.push(be.minFilter),oe.push(be.anisotropy),oe.push(be.internalFormat),oe.push(be.format),oe.push(be.type),oe.push(be.generateMipmaps),oe.push(be.premultiplyAlpha),oe.push(be.flipY),oe.push(be.unpackAlignment),oe.push(be.colorSpace),oe.join()}function K(be,oe){const He=n.get(be);if(be.isVideoTexture&&Rt(be),be.isRenderTargetTexture===!1&&be.version>0&&He.__version!==be.version){const tt=be.image;if(tt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(tt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ve(He,be,oe);return}}t.bindTexture(i.TEXTURE_2D,He.__webglTexture,i.TEXTURE0+oe)}function Y(be,oe){const He=n.get(be);if(be.version>0&&He.__version!==be.version){Ve(He,be,oe);return}t.bindTexture(i.TEXTURE_2D_ARRAY,He.__webglTexture,i.TEXTURE0+oe)}function ee(be,oe){const He=n.get(be);if(be.version>0&&He.__version!==be.version){Ve(He,be,oe);return}t.bindTexture(i.TEXTURE_3D,He.__webglTexture,i.TEXTURE0+oe)}function se(be,oe){const He=n.get(be);if(be.version>0&&He.__version!==be.version){$e(He,be,oe);return}t.bindTexture(i.TEXTURE_CUBE_MAP,He.__webglTexture,i.TEXTURE0+oe)}const fe={[Vp]:i.REPEAT,[lu]:i.CLAMP_TO_EDGE,[Hp]:i.MIRRORED_REPEAT},ne={[Er]:i.NEAREST,[c6]:i.NEAREST_MIPMAP_NEAREST,[_h]:i.NEAREST_MIPMAP_LINEAR,[Bs]:i.LINEAR,[$0]:i.LINEAR_MIPMAP_NEAREST,[vo]:i.LINEAR_MIPMAP_LINEAR},he={[f6]:i.NEVER,[m6]:i.ALWAYS,[DS]:i.LESS,[kS]:i.LEQUAL,[d6]:i.EQUAL,[g6]:i.GEQUAL,[p6]:i.GREATER,[A6]:i.NOTEQUAL};function Te(be,oe){if(oe.type===ps&&e.has("OES_texture_float_linear")===!1&&(oe.magFilter===Bs||oe.magFilter===$0||oe.magFilter===_h||oe.magFilter===vo||oe.minFilter===Bs||oe.minFilter===$0||oe.minFilter===_h||oe.minFilter===vo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(be,i.TEXTURE_WRAP_S,fe[oe.wrapS]),i.texParameteri(be,i.TEXTURE_WRAP_T,fe[oe.wrapT]),(be===i.TEXTURE_3D||be===i.TEXTURE_2D_ARRAY)&&i.texParameteri(be,i.TEXTURE_WRAP_R,fe[oe.wrapR]),i.texParameteri(be,i.TEXTURE_MAG_FILTER,ne[oe.magFilter]),i.texParameteri(be,i.TEXTURE_MIN_FILTER,ne[oe.minFilter]),oe.compareFunction&&(i.texParameteri(be,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(be,i.TEXTURE_COMPARE_FUNC,he[oe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(oe.magFilter===Er||oe.minFilter!==_h&&oe.minFilter!==vo||oe.type===ps&&e.has("OES_texture_float_linear")===!1)return;if(oe.anisotropy>1||n.get(oe).__currentAnisotropy){const He=e.get("EXT_texture_filter_anisotropic");i.texParameterf(be,He.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,r.getMaxAnisotropy())),n.get(oe).__currentAnisotropy=oe.anisotropy}}}function Pe(be,oe){let He=!1;be.__webglInit===void 0&&(be.__webglInit=!0,oe.addEventListener("dispose",B));const tt=oe.source;let ct=d.get(tt);ct===void 0&&(ct={},d.set(tt,ct));const et=J(oe);if(et!==be.__cacheKey){ct[et]===void 0&&(ct[et]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,He=!0),ct[et].usedTimes++;const Xt=ct[be.__cacheKey];Xt!==void 0&&(ct[be.__cacheKey].usedTimes--,Xt.usedTimes===0&&F(oe)),be.__cacheKey=et,be.__webglTexture=ct[et].texture}return He}function _e(be,oe,He){return Math.floor(Math.floor(be/He)/oe)}function Ie(be,oe,He,tt){const et=be.updateRanges;if(et.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,oe.width,oe.height,He,tt,oe.data);else{et.sort((_t,Zt)=>_t.start-Zt.start);let Xt=0;for(let _t=1;_t<et.length;_t++){const Zt=et[Xt],yn=et[_t],mn=Zt.start+Zt.count,zt=_e(yn.start,oe.width,4),zn=_e(Zt.start,oe.width,4);yn.start<=mn+1&&zt===zn&&_e(yn.start+yn.count-1,oe.width,4)===zt?Zt.count=Math.max(Zt.count,yn.start+yn.count-Zt.start):(++Xt,et[Xt]=yn)}et.length=Xt+1;const Gt=i.getParameter(i.UNPACK_ROW_LENGTH),ln=i.getParameter(i.UNPACK_SKIP_PIXELS),dn=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,oe.width);for(let _t=0,Zt=et.length;_t<Zt;_t++){const yn=et[_t],mn=Math.floor(yn.start/4),zt=Math.ceil(yn.count/4),zn=mn%oe.width,Ae=Math.floor(mn/oe.width),Ht=zt,Mt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,zn),i.pixelStorei(i.UNPACK_SKIP_ROWS,Ae),t.texSubImage2D(i.TEXTURE_2D,0,zn,Ae,Ht,Mt,He,tt,oe.data)}be.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,Gt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,ln),i.pixelStorei(i.UNPACK_SKIP_ROWS,dn)}}function Ve(be,oe,He){let tt=i.TEXTURE_2D;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(tt=i.TEXTURE_2D_ARRAY),oe.isData3DTexture&&(tt=i.TEXTURE_3D);const ct=Pe(be,oe),et=oe.source;t.bindTexture(tt,be.__webglTexture,i.TEXTURE0+He);const Xt=n.get(et);if(et.version!==Xt.__version||ct===!0){t.activeTexture(i.TEXTURE0+He);const Gt=qn.getPrimaries(qn.workingColorSpace),ln=oe.colorSpace===Za?null:qn.getPrimaries(oe.colorSpace),dn=oe.colorSpace===Za||Gt===ln?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,oe.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,oe.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,dn);let _t=_(oe.image,!1,r.maxTextureSize);_t=kt(oe,_t);const Zt=s.convert(oe.format,oe.colorSpace),yn=s.convert(oe.type);let mn=P(oe.internalFormat,Zt,yn,oe.colorSpace,oe.isVideoTexture);Te(tt,oe);let zt;const zn=oe.mipmaps,Ae=oe.isVideoTexture!==!0,Ht=Xt.__version===void 0||ct===!0,Mt=et.dataReady,en=D(oe,_t);if(oe.isDepthTexture)mn=L(oe.format===il,oe.type),Ht&&(Ae?t.texStorage2D(i.TEXTURE_2D,1,mn,_t.width,_t.height):t.texImage2D(i.TEXTURE_2D,0,mn,_t.width,_t.height,0,Zt,yn,null));else if(oe.isDataTexture)if(zn.length>0){Ae&&Ht&&t.texStorage2D(i.TEXTURE_2D,en,mn,zn[0].width,zn[0].height);for(let Ot=0,ht=zn.length;Ot<ht;Ot++)zt=zn[Ot],Ae?Mt&&t.texSubImage2D(i.TEXTURE_2D,Ot,0,0,zt.width,zt.height,Zt,yn,zt.data):t.texImage2D(i.TEXTURE_2D,Ot,mn,zt.width,zt.height,0,Zt,yn,zt.data);oe.generateMipmaps=!1}else Ae?(Ht&&t.texStorage2D(i.TEXTURE_2D,en,mn,_t.width,_t.height),Mt&&Ie(oe,_t,Zt,yn)):t.texImage2D(i.TEXTURE_2D,0,mn,_t.width,_t.height,0,Zt,yn,_t.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){Ae&&Ht&&t.texStorage3D(i.TEXTURE_2D_ARRAY,en,mn,zn[0].width,zn[0].height,_t.depth);for(let Ot=0,ht=zn.length;Ot<ht;Ot++)if(zt=zn[Ot],oe.format!==ss)if(Zt!==null)if(Ae){if(Mt)if(oe.layerUpdates.size>0){const tn=jk(zt.width,zt.height,oe.format,oe.type);for(const Ln of oe.layerUpdates){const Ei=zt.data.subarray(Ln*tn/zt.data.BYTES_PER_ELEMENT,(Ln+1)*tn/zt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ot,0,0,Ln,zt.width,zt.height,1,Zt,Ei)}oe.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ot,0,0,0,zt.width,zt.height,_t.depth,Zt,zt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ot,mn,zt.width,zt.height,_t.depth,0,zt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ae?Mt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Ot,0,0,0,zt.width,zt.height,_t.depth,Zt,yn,zt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Ot,mn,zt.width,zt.height,_t.depth,0,Zt,yn,zt.data)}else{Ae&&Ht&&t.texStorage2D(i.TEXTURE_2D,en,mn,zn[0].width,zn[0].height);for(let Ot=0,ht=zn.length;Ot<ht;Ot++)zt=zn[Ot],oe.format!==ss?Zt!==null?Ae?Mt&&t.compressedTexSubImage2D(i.TEXTURE_2D,Ot,0,0,zt.width,zt.height,Zt,zt.data):t.compressedTexImage2D(i.TEXTURE_2D,Ot,mn,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Mt&&t.texSubImage2D(i.TEXTURE_2D,Ot,0,0,zt.width,zt.height,Zt,yn,zt.data):t.texImage2D(i.TEXTURE_2D,Ot,mn,zt.width,zt.height,0,Zt,yn,zt.data)}else if(oe.isDataArrayTexture)if(Ae){if(Ht&&t.texStorage3D(i.TEXTURE_2D_ARRAY,en,mn,_t.width,_t.height,_t.depth),Mt)if(oe.layerUpdates.size>0){const Ot=jk(_t.width,_t.height,oe.format,oe.type);for(const ht of oe.layerUpdates){const tn=_t.data.subarray(ht*Ot/_t.data.BYTES_PER_ELEMENT,(ht+1)*Ot/_t.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ht,_t.width,_t.height,1,Zt,yn,tn)}oe.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,_t.width,_t.height,_t.depth,Zt,yn,_t.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,mn,_t.width,_t.height,_t.depth,0,Zt,yn,_t.data);else if(oe.isData3DTexture)Ae?(Ht&&t.texStorage3D(i.TEXTURE_3D,en,mn,_t.width,_t.height,_t.depth),Mt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,_t.width,_t.height,_t.depth,Zt,yn,_t.data)):t.texImage3D(i.TEXTURE_3D,0,mn,_t.width,_t.height,_t.depth,0,Zt,yn,_t.data);else if(oe.isFramebufferTexture){if(Ht)if(Ae)t.texStorage2D(i.TEXTURE_2D,en,mn,_t.width,_t.height);else{let Ot=_t.width,ht=_t.height;for(let tn=0;tn<en;tn++)t.texImage2D(i.TEXTURE_2D,tn,mn,Ot,ht,0,Zt,yn,null),Ot>>=1,ht>>=1}}else if(zn.length>0){if(Ae&&Ht){const Ot=an(zn[0]);t.texStorage2D(i.TEXTURE_2D,en,mn,Ot.width,Ot.height)}for(let Ot=0,ht=zn.length;Ot<ht;Ot++)zt=zn[Ot],Ae?Mt&&t.texSubImage2D(i.TEXTURE_2D,Ot,0,0,Zt,yn,zt):t.texImage2D(i.TEXTURE_2D,Ot,mn,Zt,yn,zt);oe.generateMipmaps=!1}else if(Ae){if(Ht){const Ot=an(_t);t.texStorage2D(i.TEXTURE_2D,en,mn,Ot.width,Ot.height)}Mt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Zt,yn,_t)}else t.texImage2D(i.TEXTURE_2D,0,mn,Zt,yn,_t);S(oe)&&w(tt),Xt.__version=et.version,oe.onUpdate&&oe.onUpdate(oe)}be.__version=oe.version}function $e(be,oe,He){if(oe.image.length!==6)return;const tt=Pe(be,oe),ct=oe.source;t.bindTexture(i.TEXTURE_CUBE_MAP,be.__webglTexture,i.TEXTURE0+He);const et=n.get(ct);if(ct.version!==et.__version||tt===!0){t.activeTexture(i.TEXTURE0+He);const Xt=qn.getPrimaries(qn.workingColorSpace),Gt=oe.colorSpace===Za?null:qn.getPrimaries(oe.colorSpace),ln=oe.colorSpace===Za||Xt===Gt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,oe.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,oe.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ln);const dn=oe.isCompressedTexture||oe.image[0].isCompressedTexture,_t=oe.image[0]&&oe.image[0].isDataTexture,Zt=[];for(let ht=0;ht<6;ht++)!dn&&!_t?Zt[ht]=_(oe.image[ht],!0,r.maxCubemapSize):Zt[ht]=_t?oe.image[ht].image:oe.image[ht],Zt[ht]=kt(oe,Zt[ht]);const yn=Zt[0],mn=s.convert(oe.format,oe.colorSpace),zt=s.convert(oe.type),zn=P(oe.internalFormat,mn,zt,oe.colorSpace),Ae=oe.isVideoTexture!==!0,Ht=et.__version===void 0||tt===!0,Mt=ct.dataReady;let en=D(oe,yn);Te(i.TEXTURE_CUBE_MAP,oe);let Ot;if(dn){Ae&&Ht&&t.texStorage2D(i.TEXTURE_CUBE_MAP,en,zn,yn.width,yn.height);for(let ht=0;ht<6;ht++){Ot=Zt[ht].mipmaps;for(let tn=0;tn<Ot.length;tn++){const Ln=Ot[tn];oe.format!==ss?mn!==null?Ae?Mt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn,0,0,Ln.width,Ln.height,mn,Ln.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn,zn,Ln.width,Ln.height,0,Ln.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ae?Mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn,0,0,Ln.width,Ln.height,mn,zt,Ln.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn,zn,Ln.width,Ln.height,0,mn,zt,Ln.data)}}}else{if(Ot=oe.mipmaps,Ae&&Ht){Ot.length>0&&en++;const ht=an(Zt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,en,zn,ht.width,ht.height)}for(let ht=0;ht<6;ht++)if(_t){Ae?Mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,0,0,Zt[ht].width,Zt[ht].height,mn,zt,Zt[ht].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,zn,Zt[ht].width,Zt[ht].height,0,mn,zt,Zt[ht].data);for(let tn=0;tn<Ot.length;tn++){const Ei=Ot[tn].image[ht].image;Ae?Mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn+1,0,0,Ei.width,Ei.height,mn,zt,Ei.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn+1,zn,Ei.width,Ei.height,0,mn,zt,Ei.data)}}else{Ae?Mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,0,0,mn,zt,Zt[ht]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,zn,mn,zt,Zt[ht]);for(let tn=0;tn<Ot.length;tn++){const Ln=Ot[tn];Ae?Mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn+1,0,0,mn,zt,Ln.image[ht]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,tn+1,zn,mn,zt,Ln.image[ht])}}}S(oe)&&w(i.TEXTURE_CUBE_MAP),et.__version=ct.version,oe.onUpdate&&oe.onUpdate(oe)}be.__version=oe.version}function Je(be,oe,He,tt,ct,et){const Xt=s.convert(He.format,He.colorSpace),Gt=s.convert(He.type),ln=P(He.internalFormat,Xt,Gt,He.colorSpace),dn=n.get(oe),_t=n.get(He);if(_t.__renderTarget=oe,!dn.__hasExternalTextures){const Zt=Math.max(1,oe.width>>et),yn=Math.max(1,oe.height>>et);ct===i.TEXTURE_3D||ct===i.TEXTURE_2D_ARRAY?t.texImage3D(ct,et,ln,Zt,yn,oe.depth,0,Xt,Gt,null):t.texImage2D(ct,et,ln,Zt,yn,0,Xt,Gt,null)}t.bindFramebuffer(i.FRAMEBUFFER,be),Yt(oe)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,tt,ct,_t.__webglTexture,0,at(oe)):(ct===i.TEXTURE_2D||ct>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ct<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,tt,ct,_t.__webglTexture,et),t.bindFramebuffer(i.FRAMEBUFFER,null)}function vt(be,oe,He){if(i.bindRenderbuffer(i.RENDERBUFFER,be),oe.depthBuffer){const tt=oe.depthTexture,ct=tt&&tt.isDepthTexture?tt.type:null,et=L(oe.stencilBuffer,ct),Xt=oe.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Gt=at(oe);Yt(oe)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Gt,et,oe.width,oe.height):He?i.renderbufferStorageMultisample(i.RENDERBUFFER,Gt,et,oe.width,oe.height):i.renderbufferStorage(i.RENDERBUFFER,et,oe.width,oe.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Xt,i.RENDERBUFFER,be)}else{const tt=oe.textures;for(let ct=0;ct<tt.length;ct++){const et=tt[ct],Xt=s.convert(et.format,et.colorSpace),Gt=s.convert(et.type),ln=P(et.internalFormat,Xt,Gt,et.colorSpace),dn=at(oe);He&&Yt(oe)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,dn,ln,oe.width,oe.height):Yt(oe)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,dn,ln,oe.width,oe.height):i.renderbufferStorage(i.RENDERBUFFER,ln,oe.width,oe.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function pt(be,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,be),!(oe.depthTexture&&oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const tt=n.get(oe.depthTexture);tt.__renderTarget=oe,(!tt.__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),K(oe.depthTexture,0);const ct=tt.__webglTexture,et=at(oe);if(oe.depthTexture.format===nl)Yt(oe)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ct,0,et):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ct,0);else if(oe.depthTexture.format===il)Yt(oe)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ct,0,et):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ct,0);else throw new Error("Unknown depthTexture format")}function Vt(be){const oe=n.get(be),He=be.isWebGLCubeRenderTarget===!0;if(oe.__boundDepthTexture!==be.depthTexture){const tt=be.depthTexture;if(oe.__depthDisposeCallback&&oe.__depthDisposeCallback(),tt){const ct=()=>{delete oe.__boundDepthTexture,delete oe.__depthDisposeCallback,tt.removeEventListener("dispose",ct)};tt.addEventListener("dispose",ct),oe.__depthDisposeCallback=ct}oe.__boundDepthTexture=tt}if(be.depthTexture&&!oe.__autoAllocateDepthBuffer){if(He)throw new Error("target.depthTexture not supported in Cube render targets");const tt=be.texture.mipmaps;tt&&tt.length>0?pt(oe.__webglFramebuffer[0],be):pt(oe.__webglFramebuffer,be)}else if(He){oe.__webglDepthbuffer=[];for(let tt=0;tt<6;tt++)if(t.bindFramebuffer(i.FRAMEBUFFER,oe.__webglFramebuffer[tt]),oe.__webglDepthbuffer[tt]===void 0)oe.__webglDepthbuffer[tt]=i.createRenderbuffer(),vt(oe.__webglDepthbuffer[tt],be,!1);else{const ct=be.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=oe.__webglDepthbuffer[tt];i.bindRenderbuffer(i.RENDERBUFFER,et),i.framebufferRenderbuffer(i.FRAMEBUFFER,ct,i.RENDERBUFFER,et)}}else{const tt=be.texture.mipmaps;if(tt&&tt.length>0?t.bindFramebuffer(i.FRAMEBUFFER,oe.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,oe.__webglFramebuffer),oe.__webglDepthbuffer===void 0)oe.__webglDepthbuffer=i.createRenderbuffer(),vt(oe.__webglDepthbuffer,be,!1);else{const ct=be.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=oe.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,et),i.framebufferRenderbuffer(i.FRAMEBUFFER,ct,i.RENDERBUFFER,et)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function fn(be,oe,He){const tt=n.get(be);oe!==void 0&&Je(tt.__webglFramebuffer,be,be.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),He!==void 0&&Vt(be)}function jt(be){const oe=be.texture,He=n.get(be),tt=n.get(oe);be.addEventListener("dispose",k);const ct=be.textures,et=be.isWebGLCubeRenderTarget===!0,Xt=ct.length>1;if(Xt||(tt.__webglTexture===void 0&&(tt.__webglTexture=i.createTexture()),tt.__version=oe.version,a.memory.textures++),et){He.__webglFramebuffer=[];for(let Gt=0;Gt<6;Gt++)if(oe.mipmaps&&oe.mipmaps.length>0){He.__webglFramebuffer[Gt]=[];for(let ln=0;ln<oe.mipmaps.length;ln++)He.__webglFramebuffer[Gt][ln]=i.createFramebuffer()}else He.__webglFramebuffer[Gt]=i.createFramebuffer()}else{if(oe.mipmaps&&oe.mipmaps.length>0){He.__webglFramebuffer=[];for(let Gt=0;Gt<oe.mipmaps.length;Gt++)He.__webglFramebuffer[Gt]=i.createFramebuffer()}else He.__webglFramebuffer=i.createFramebuffer();if(Xt)for(let Gt=0,ln=ct.length;Gt<ln;Gt++){const dn=n.get(ct[Gt]);dn.__webglTexture===void 0&&(dn.__webglTexture=i.createTexture(),a.memory.textures++)}if(be.samples>0&&Yt(be)===!1){He.__webglMultisampledFramebuffer=i.createFramebuffer(),He.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,He.__webglMultisampledFramebuffer);for(let Gt=0;Gt<ct.length;Gt++){const ln=ct[Gt];He.__webglColorRenderbuffer[Gt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,He.__webglColorRenderbuffer[Gt]);const dn=s.convert(ln.format,ln.colorSpace),_t=s.convert(ln.type),Zt=P(ln.internalFormat,dn,_t,ln.colorSpace,be.isXRRenderTarget===!0),yn=at(be);i.renderbufferStorageMultisample(i.RENDERBUFFER,yn,Zt,be.width,be.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Gt,i.RENDERBUFFER,He.__webglColorRenderbuffer[Gt])}i.bindRenderbuffer(i.RENDERBUFFER,null),be.depthBuffer&&(He.__webglDepthRenderbuffer=i.createRenderbuffer(),vt(He.__webglDepthRenderbuffer,be,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(et){t.bindTexture(i.TEXTURE_CUBE_MAP,tt.__webglTexture),Te(i.TEXTURE_CUBE_MAP,oe);for(let Gt=0;Gt<6;Gt++)if(oe.mipmaps&&oe.mipmaps.length>0)for(let ln=0;ln<oe.mipmaps.length;ln++)Je(He.__webglFramebuffer[Gt][ln],be,oe,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ln);else Je(He.__webglFramebuffer[Gt],be,oe,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0);S(oe)&&w(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xt){for(let Gt=0,ln=ct.length;Gt<ln;Gt++){const dn=ct[Gt],_t=n.get(dn);t.bindTexture(i.TEXTURE_2D,_t.__webglTexture),Te(i.TEXTURE_2D,dn),Je(He.__webglFramebuffer,be,dn,i.COLOR_ATTACHMENT0+Gt,i.TEXTURE_2D,0),S(dn)&&w(i.TEXTURE_2D)}t.unbindTexture()}else{let Gt=i.TEXTURE_2D;if((be.isWebGL3DRenderTarget||be.isWebGLArrayRenderTarget)&&(Gt=be.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Gt,tt.__webglTexture),Te(Gt,oe),oe.mipmaps&&oe.mipmaps.length>0)for(let ln=0;ln<oe.mipmaps.length;ln++)Je(He.__webglFramebuffer[ln],be,oe,i.COLOR_ATTACHMENT0,Gt,ln);else Je(He.__webglFramebuffer,be,oe,i.COLOR_ATTACHMENT0,Gt,0);S(oe)&&w(Gt),t.unbindTexture()}be.depthBuffer&&Vt(be)}function de(be){const oe=be.textures;for(let He=0,tt=oe.length;He<tt;He++){const ct=oe[He];if(S(ct)){const et=C(be),Xt=n.get(ct).__webglTexture;t.bindTexture(et,Xt),w(et),t.unbindTexture()}}}const Dt=[],gt=[];function Ct(be){if(be.samples>0){if(Yt(be)===!1){const oe=be.textures,He=be.width,tt=be.height;let ct=i.COLOR_BUFFER_BIT;const et=be.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Xt=n.get(be),Gt=oe.length>1;if(Gt)for(let dn=0;dn<oe.length;dn++)t.bindFramebuffer(i.FRAMEBUFFER,Xt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+dn,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Xt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+dn,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Xt.__webglMultisampledFramebuffer);const ln=be.texture.mipmaps;ln&&ln.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xt.__webglFramebuffer);for(let dn=0;dn<oe.length;dn++){if(be.resolveDepthBuffer&&(be.depthBuffer&&(ct|=i.DEPTH_BUFFER_BIT),be.stencilBuffer&&be.resolveStencilBuffer&&(ct|=i.STENCIL_BUFFER_BIT)),Gt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Xt.__webglColorRenderbuffer[dn]);const _t=n.get(oe[dn]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,_t,0)}i.blitFramebuffer(0,0,He,tt,0,0,He,tt,ct,i.NEAREST),l===!0&&(Dt.length=0,gt.length=0,Dt.push(i.COLOR_ATTACHMENT0+dn),be.depthBuffer&&be.resolveDepthBuffer===!1&&(Dt.push(et),gt.push(et),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,gt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Dt))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Gt)for(let dn=0;dn<oe.length;dn++){t.bindFramebuffer(i.FRAMEBUFFER,Xt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+dn,i.RENDERBUFFER,Xt.__webglColorRenderbuffer[dn]);const _t=n.get(oe[dn]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Xt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+dn,i.TEXTURE_2D,_t,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xt.__webglMultisampledFramebuffer)}else if(be.depthBuffer&&be.resolveDepthBuffer===!1&&l){const oe=be.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[oe])}}}function at(be){return Math.min(r.maxSamples,be.samples)}function Yt(be){const oe=n.get(be);return be.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&oe.__useRenderToTexture!==!1}function Rt(be){const oe=a.render.frame;u.get(be)!==oe&&(u.set(be,oe),be.update())}function kt(be,oe){const He=be.colorSpace,tt=be.format,ct=be.type;return be.isCompressedTexture===!0||be.isVideoTexture===!0||He!==Cc&&He!==Za&&(qn.getTransfer(He)===rn?(tt!==ss||ct!==$r)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",He)),oe}function an(be){return typeof HTMLImageElement<"u"&&be instanceof HTMLImageElement?(c.width=be.naturalWidth||be.width,c.height=be.naturalHeight||be.height):typeof VideoFrame<"u"&&be instanceof VideoFrame?(c.width=be.displayWidth,c.height=be.displayHeight):(c.width=be.width,c.height=be.height),c}this.allocateTextureUnit=X,this.resetTextureUnits=W,this.setTexture2D=K,this.setTexture2DArray=Y,this.setTexture3D=ee,this.setTextureCube=se,this.rebindTextures=fn,this.setupRenderTarget=jt,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=Ct,this.setupDepthRenderbuffer=Vt,this.setupFrameBufferTexture=Je,this.useMultisampledRTT=Yt}function fre(i,e){function t(n,r=Za){let s;const a=qn.getTransfer(r);if(n===$r)return i.UNSIGNED_BYTE;if(n===PS)return i.UNSIGNED_SHORT_4_4_4_4;if(n===NS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===LS)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Cp)return i.BYTE;if(n===Rp)return i.SHORT;if(n===bc)return i.UNSIGNED_SHORT;if(n===na)return i.INT;if(n===br)return i.UNSIGNED_INT;if(n===ps)return i.FLOAT;if(n===Ss)return i.HALF_FLOAT;if(n===u6)return i.ALPHA;if(n===Yx)return i.RGB;if(n===ss)return i.RGBA;if(n===nl)return i.DEPTH_COMPONENT;if(n===il)return i.DEPTH_STENCIL;if(n===$x)return i.RED;if(n===im)return i.RED_INTEGER;if(n===wh)return i.RG;if(n===rm)return i.RG_INTEGER;if(n===sm)return i.RGBA_INTEGER;if(n===Pp||n===Jf||n===ed||n===td)if(a===rn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Pp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Jf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ed)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===td)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Pp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Jf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ed)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===td)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Qy||n===Zy||n===Ky||n===Jy)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Qy)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Zy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ky)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Jy)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===ex||n===ug||n===hg)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===ex||n===ug)return a===rn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===hg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===fg||n===dg||n===pg||n===Ag||n===gg||n===mg||n===vg||n===yg||n===xg||n===bg||n===_g||n===wg||n===Sg||n===Tg)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===fg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===dg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===pg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ag)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===gg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===mg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===vg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===yg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===xg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===bg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===_g)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===wg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Sg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Tg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Np||n===m4||n===v4)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Np)return a===rn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===m4)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===v4)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===h6||n===tx||n===nx||n===ix)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Np)return s.COMPRESSED_RED_RGTC1_EXT;if(n===tx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===nx)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ix)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===tl?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const dre=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,pre=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Are{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new Ts,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Eo({vertexShader:dre,fragmentShader:pre,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new zi(new Jx(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gre extends Nu{constructor(e,t){super();const n=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,h=null,d=null,A=null,x=null;const _=new Are,S=t.getContextAttributes();let w=null,C=null;const P=[],L=[],D=new lt;let B=null;const k=new ia;k.viewport=new Cn;const U=new ia;U.viewport=new Cn;const F=[k,U],z=new cU;let V=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(_e){let Ie=P[_e];return Ie===void 0&&(Ie=new R_,P[_e]=Ie),Ie.getTargetRaySpace()},this.getControllerGrip=function(_e){let Ie=P[_e];return Ie===void 0&&(Ie=new R_,P[_e]=Ie),Ie.getGripSpace()},this.getHand=function(_e){let Ie=P[_e];return Ie===void 0&&(Ie=new R_,P[_e]=Ie),Ie.getHandSpace()};function X(_e){const Ie=L.indexOf(_e.inputSource);if(Ie===-1)return;const Ve=P[Ie];Ve!==void 0&&(Ve.update(_e.inputSource,_e.frame,c||a),Ve.dispatchEvent({type:_e.type,data:_e.inputSource}))}function J(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",J),r.removeEventListener("inputsourceschange",K);for(let _e=0;_e<P.length;_e++){const Ie=L[_e];Ie!==null&&(L[_e]=null,P[_e].disconnect(Ie))}V=null,W=null,_.reset(),e.setRenderTarget(w),A=null,d=null,h=null,r=null,C=null,Pe.stop(),n.isPresenting=!1,e.setPixelRatio(B),e.setSize(D.width,D.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(_e){s=_e,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_e){o=_e,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(_e){c=_e},this.getBaseLayer=function(){return d!==null?d:A},this.getBinding=function(){return h},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(_e){if(r=_e,r!==null){if(w=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",J),r.addEventListener("inputsourceschange",K),S.xrCompatible!==!0&&await t.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(D),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ve=null,$e=null,Je=null;S.depth&&(Je=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ve=S.stencil?il:nl,$e=S.stencil?tl:br);const vt={colorFormat:t.RGBA8,depthFormat:Je,scaleFactor:s};h=new XRWebGLBinding(r,t),d=h.createProjectionLayer(vt),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),C=new cd(d.textureWidth,d.textureHeight,{format:ss,type:$r,depthTexture:new sl(d.textureWidth,d.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,Ve),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1})}else{const Ve={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};A=new XRWebGLLayer(r,t,Ve),r.updateRenderState({baseLayer:A}),e.setPixelRatio(1),e.setSize(A.framebufferWidth,A.framebufferHeight,!1),C=new cd(A.framebufferWidth,A.framebufferHeight,{format:ss,type:$r,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:A.ignoreDepthValues===!1,resolveStencilBuffer:A.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Pe.setContext(r),Pe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function K(_e){for(let Ie=0;Ie<_e.removed.length;Ie++){const Ve=_e.removed[Ie],$e=L.indexOf(Ve);$e>=0&&(L[$e]=null,P[$e].disconnect(Ve))}for(let Ie=0;Ie<_e.added.length;Ie++){const Ve=_e.added[Ie];let $e=L.indexOf(Ve);if($e===-1){for(let vt=0;vt<P.length;vt++)if(vt>=L.length){L.push(Ve),$e=vt;break}else if(L[vt]===null){L[vt]=Ve,$e=vt;break}if($e===-1)break}const Je=P[$e];Je&&Je.connect(Ve)}}const Y=new pe,ee=new pe;function se(_e,Ie,Ve){Y.setFromMatrixPosition(Ie.matrixWorld),ee.setFromMatrixPosition(Ve.matrixWorld);const $e=Y.distanceTo(ee),Je=Ie.projectionMatrix.elements,vt=Ve.projectionMatrix.elements,pt=Je[14]/(Je[10]-1),Vt=Je[14]/(Je[10]+1),fn=(Je[9]+1)/Je[5],jt=(Je[9]-1)/Je[5],de=(Je[8]-1)/Je[0],Dt=(vt[8]+1)/vt[0],gt=pt*de,Ct=pt*Dt,at=$e/(-de+Dt),Yt=at*-de;if(Ie.matrixWorld.decompose(_e.position,_e.quaternion,_e.scale),_e.translateX(Yt),_e.translateZ(at),_e.matrixWorld.compose(_e.position,_e.quaternion,_e.scale),_e.matrixWorldInverse.copy(_e.matrixWorld).invert(),Je[10]===-1)_e.projectionMatrix.copy(Ie.projectionMatrix),_e.projectionMatrixInverse.copy(Ie.projectionMatrixInverse);else{const Rt=pt+at,kt=Vt+at,an=gt-Yt,be=Ct+($e-Yt),oe=fn*Vt/kt*Rt,He=jt*Vt/kt*Rt;_e.projectionMatrix.makePerspective(an,be,oe,He,Rt,kt),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert()}}function fe(_e,Ie){Ie===null?_e.matrixWorld.copy(_e.matrix):_e.matrixWorld.multiplyMatrices(Ie.matrixWorld,_e.matrix),_e.matrixWorldInverse.copy(_e.matrixWorld).invert()}this.updateCamera=function(_e){if(r===null)return;let Ie=_e.near,Ve=_e.far;_.texture!==null&&(_.depthNear>0&&(Ie=_.depthNear),_.depthFar>0&&(Ve=_.depthFar)),z.near=U.near=k.near=Ie,z.far=U.far=k.far=Ve,(V!==z.near||W!==z.far)&&(r.updateRenderState({depthNear:z.near,depthFar:z.far}),V=z.near,W=z.far),k.layers.mask=_e.layers.mask|2,U.layers.mask=_e.layers.mask|4,z.layers.mask=k.layers.mask|U.layers.mask;const $e=_e.parent,Je=z.cameras;fe(z,$e);for(let vt=0;vt<Je.length;vt++)fe(Je[vt],$e);Je.length===2?se(z,k,U):z.projectionMatrix.copy(k.projectionMatrix),ne(_e,z,$e)};function ne(_e,Ie,Ve){Ve===null?_e.matrix.copy(Ie.matrixWorld):(_e.matrix.copy(Ve.matrixWorld),_e.matrix.invert(),_e.matrix.multiply(Ie.matrixWorld)),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.updateMatrixWorld(!0),_e.projectionMatrix.copy(Ie.projectionMatrix),_e.projectionMatrixInverse.copy(Ie.projectionMatrixInverse),_e.isPerspectiveCamera&&(_e.fov=qp*2*Math.atan(1/_e.projectionMatrix.elements[5]),_e.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(d===null&&A===null))return l},this.setFoveation=function(_e){l=_e,d!==null&&(d.fixedFoveation=_e),A!==null&&A.fixedFoveation!==void 0&&(A.fixedFoveation=_e)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(z)};let he=null;function Te(_e,Ie){if(u=Ie.getViewerPose(c||a),x=Ie,u!==null){const Ve=u.views;A!==null&&(e.setRenderTargetFramebuffer(C,A.framebuffer),e.setRenderTarget(C));let $e=!1;Ve.length!==z.cameras.length&&(z.cameras.length=0,$e=!0);for(let pt=0;pt<Ve.length;pt++){const Vt=Ve[pt];let fn=null;if(A!==null)fn=A.getViewport(Vt);else{const de=h.getViewSubImage(d,Vt);fn=de.viewport,pt===0&&(e.setRenderTargetTextures(C,de.colorTexture,de.depthStencilTexture),e.setRenderTarget(C))}let jt=F[pt];jt===void 0&&(jt=new ia,jt.layers.enable(pt),jt.viewport=new Cn,F[pt]=jt),jt.matrix.fromArray(Vt.transform.matrix),jt.matrix.decompose(jt.position,jt.quaternion,jt.scale),jt.projectionMatrix.fromArray(Vt.projectionMatrix),jt.projectionMatrixInverse.copy(jt.projectionMatrix).invert(),jt.viewport.set(fn.x,fn.y,fn.width,fn.height),pt===0&&(z.matrix.copy(jt.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),$e===!0&&z.cameras.push(jt)}const Je=r.enabledFeatures;if(Je&&Je.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){const pt=h.getDepthInformation(Ve[0]);pt&&pt.isValid&&pt.texture&&_.init(e,pt,r.renderState)}}for(let Ve=0;Ve<P.length;Ve++){const $e=L[Ve],Je=P[Ve];$e!==null&&Je!==void 0&&Je.update($e,Ie,c||a)}he&&he(_e,Ie),Ie.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ie}),x=null}const Pe=new hU;Pe.setAnimationLoop(Te),this.setAnimationLoop=function(_e){he=_e},this.dispose=function(){}}}const jd=new ba,mre=new Un;function vre(i,e){function t(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function n(S,w){w.color.getRGB(S.fogColor.value,qF(i)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function r(S,w,C,P,L){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(S,w):w.isMeshToonMaterial?(s(S,w),h(S,w)):w.isMeshPhongMaterial?(s(S,w),u(S,w)):w.isMeshStandardMaterial?(s(S,w),d(S,w),w.isMeshPhysicalMaterial&&A(S,w,L)):w.isMeshMatcapMaterial?(s(S,w),x(S,w)):w.isMeshDepthMaterial?s(S,w):w.isMeshDistanceMaterial?(s(S,w),_(S,w)):w.isMeshNormalMaterial?s(S,w):w.isLineBasicMaterial?(a(S,w),w.isLineDashedMaterial&&o(S,w)):w.isPointsMaterial?l(S,w,C,P):w.isSpriteMaterial?c(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,t(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===sr&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,t(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===sr&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,t(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,t(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const C=e.get(w),P=C.envMap,L=C.envMapRotation;P&&(S.envMap.value=P,jd.copy(L),jd.x*=-1,jd.y*=-1,jd.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(jd.y*=-1,jd.z*=-1),S.envMapRotation.value.setFromMatrix4(mre.makeRotationFromEuler(jd)),S.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,S.aoMapTransform))}function a(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform))}function o(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function l(S,w,C,P){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*C,S.scale.value=P*.5,w.map&&(S.map.value=w.map,t(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function c(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,t(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,t(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function u(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function h(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function d(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function A(S,w,C){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===sr&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=C.texture,S.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,w){w.matcap&&(S.matcap.value=w.matcap)}function _(S,w){const C=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(C.matrixWorld),S.nearDistance.value=C.shadow.camera.near,S.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function yre(i,e,t,n){let r={},s={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(C,P){const L=P.program;n.uniformBlockBinding(C,L)}function c(C,P){let L=r[C.id];L===void 0&&(x(C),L=u(C),r[C.id]=L,C.addEventListener("dispose",S));const D=P.program;n.updateUBOMapping(C,D);const B=e.render.frame;s[C.id]!==B&&(d(C),s[C.id]=B)}function u(C){const P=h();C.__bindingPointIndex=P;const L=i.createBuffer(),D=C.__size,B=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,L),i.bufferData(i.UNIFORM_BUFFER,D,B),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,P,L),L}function h(){for(let C=0;C<o;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(C){const P=r[C.id],L=C.uniforms,D=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,P);for(let B=0,k=L.length;B<k;B++){const U=Array.isArray(L[B])?L[B]:[L[B]];for(let F=0,z=U.length;F<z;F++){const V=U[F];if(A(V,B,F,D)===!0){const W=V.__offset,X=Array.isArray(V.value)?V.value:[V.value];let J=0;for(let K=0;K<X.length;K++){const Y=X[K],ee=_(Y);typeof Y=="number"||typeof Y=="boolean"?(V.__data[0]=Y,i.bufferSubData(i.UNIFORM_BUFFER,W+J,V.__data)):Y.isMatrix3?(V.__data[0]=Y.elements[0],V.__data[1]=Y.elements[1],V.__data[2]=Y.elements[2],V.__data[3]=0,V.__data[4]=Y.elements[3],V.__data[5]=Y.elements[4],V.__data[6]=Y.elements[5],V.__data[7]=0,V.__data[8]=Y.elements[6],V.__data[9]=Y.elements[7],V.__data[10]=Y.elements[8],V.__data[11]=0):(Y.toArray(V.__data,J),J+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,W,V.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function A(C,P,L,D){const B=C.value,k=P+"_"+L;if(D[k]===void 0)return typeof B=="number"||typeof B=="boolean"?D[k]=B:D[k]=B.clone(),!0;{const U=D[k];if(typeof B=="number"||typeof B=="boolean"){if(U!==B)return D[k]=B,!0}else if(U.equals(B)===!1)return U.copy(B),!0}return!1}function x(C){const P=C.uniforms;let L=0;const D=16;for(let k=0,U=P.length;k<U;k++){const F=Array.isArray(P[k])?P[k]:[P[k]];for(let z=0,V=F.length;z<V;z++){const W=F[z],X=Array.isArray(W.value)?W.value:[W.value];for(let J=0,K=X.length;J<K;J++){const Y=X[J],ee=_(Y),se=L%D,fe=se%ee.boundary,ne=se+fe;L+=fe,ne!==0&&D-ne<ee.storage&&(L+=D-ne),W.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=L,L+=ee.storage}}}const B=L%D;return B>0&&(L+=D-B),C.__size=L,C.__cache={},this}function _(C){const P={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(P.boundary=4,P.storage=4):C.isVector2?(P.boundary=8,P.storage=8):C.isVector3||C.isColor?(P.boundary=16,P.storage=12):C.isVector4?(P.boundary=16,P.storage=16):C.isMatrix3?(P.boundary=48,P.storage=48):C.isMatrix4?(P.boundary=64,P.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),P}function S(C){const P=C.target;P.removeEventListener("dispose",S);const L=a.indexOf(P.__bindingPointIndex);a.splice(L,1),i.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function w(){for(const C in r)i.deleteBuffer(r[C]);a=[],r={},s={}}return{bind:l,update:c,dispose:w}}class xre{constructor(e={}){const{canvas:t=GF(),context:n=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let A;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");A=n.getContextAttributes().alpha}else A=a;const x=new Uint32Array(4),_=new Int32Array(4);let S=null,w=null;const C=[],P=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Mo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const L=this;let D=!1;this._outputColorSpace=ma;let B=0,k=0,U=null,F=-1,z=null;const V=new Cn,W=new Cn;let X=null;const J=new un(0);let K=0,Y=t.width,ee=t.height,se=1,fe=null,ne=null;const he=new Cn(0,0,Y,ee),Te=new Cn(0,0,Y,ee);let Pe=!1;const _e=new am;let Ie=!1,Ve=!1;const $e=new Un,Je=new Un,vt=new pe,pt=new Cn,Vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let fn=!1;function jt(){return U===null?se:1}let de=n;function Dt(ue,Oe){return t.getContext(ue,Oe)}try{const ue={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${nm}`),t.addEventListener("webglcontextlost",en,!1),t.addEventListener("webglcontextrestored",Ot,!1),t.addEventListener("webglcontextcreationerror",ht,!1),de===null){const Oe="webgl2";if(de=Dt(Oe,ue),de===null)throw Dt(Oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let gt,Ct,at,Yt,Rt,kt,an,be,oe,He,tt,ct,et,Xt,Gt,ln,dn,_t,Zt,yn,mn,zt,zn,Ae;function Ht(){gt=new Pne(de),gt.init(),zt=new fre(de,gt),Ct=new wne(de,gt,e,zt),at=new ure(de,gt),Ct.reverseDepthBuffer&&d&&at.buffers.depth.setReversed(!0),Yt=new Dne(de),Rt=new Zie,kt=new hre(de,gt,at,Rt,Ct,zt,Yt),an=new Tne(L),be=new Rne(L),oe=new UJ(de),zn=new bne(de,oe),He=new Nne(de,oe,Yt,zn),tt=new One(de,He,oe,Yt),Zt=new kne(de,Ct,kt),ln=new Sne(Rt),ct=new Qie(L,an,be,gt,Ct,zn,ln),et=new vre(L,Rt),Xt=new Jie,Gt=new sre(gt),_t=new xne(L,an,be,at,tt,A,l),dn=new lre(L,tt,Ct),Ae=new yre(de,Yt,Ct,at),yn=new _ne(de,gt,Yt),mn=new Lne(de,gt,Yt),Yt.programs=ct.programs,L.capabilities=Ct,L.extensions=gt,L.properties=Rt,L.renderLists=Xt,L.shadowMap=dn,L.state=at,L.info=Yt}Ht();const Mt=new gre(L,de);this.xr=Mt,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const ue=gt.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=gt.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function(ue){ue!==void 0&&(se=ue,this.setSize(Y,ee,!1))},this.getSize=function(ue){return ue.set(Y,ee)},this.setSize=function(ue,Oe,Qe=!0){if(Mt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=ue,ee=Oe,t.width=Math.floor(ue*se),t.height=Math.floor(Oe*se),Qe===!0&&(t.style.width=ue+"px",t.style.height=Oe+"px"),this.setViewport(0,0,ue,Oe)},this.getDrawingBufferSize=function(ue){return ue.set(Y*se,ee*se).floor()},this.setDrawingBufferSize=function(ue,Oe,Qe){Y=ue,ee=Oe,se=Qe,t.width=Math.floor(ue*Qe),t.height=Math.floor(Oe*Qe),this.setViewport(0,0,ue,Oe)},this.getCurrentViewport=function(ue){return ue.copy(V)},this.getViewport=function(ue){return ue.copy(he)},this.setViewport=function(ue,Oe,Qe,Ye){ue.isVector4?he.set(ue.x,ue.y,ue.z,ue.w):he.set(ue,Oe,Qe,Ye),at.viewport(V.copy(he).multiplyScalar(se).round())},this.getScissor=function(ue){return ue.copy(Te)},this.setScissor=function(ue,Oe,Qe,Ye){ue.isVector4?Te.set(ue.x,ue.y,ue.z,ue.w):Te.set(ue,Oe,Qe,Ye),at.scissor(W.copy(Te).multiplyScalar(se).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(ue){at.setScissorTest(Pe=ue)},this.setOpaqueSort=function(ue){fe=ue},this.setTransparentSort=function(ue){ne=ue},this.getClearColor=function(ue){return ue.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor(...arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha(...arguments)},this.clear=function(ue=!0,Oe=!0,Qe=!0){let Ye=0;if(ue){let Ue=!1;if(U!==null){const It=U.texture.format;Ue=It===sm||It===rm||It===im}if(Ue){const It=U.texture.type,Ut=It===$r||It===br||It===bc||It===tl||It===PS||It===NS,dt=_t.getClearColor(),ae=_t.getClearAlpha(),Lt=dt.r,Nn=dt.g,bn=dt.b;Ut?(x[0]=Lt,x[1]=Nn,x[2]=bn,x[3]=ae,de.clearBufferuiv(de.COLOR,0,x)):(_[0]=Lt,_[1]=Nn,_[2]=bn,_[3]=ae,de.clearBufferiv(de.COLOR,0,_))}else Ye|=de.COLOR_BUFFER_BIT}Oe&&(Ye|=de.DEPTH_BUFFER_BIT),Qe&&(Ye|=de.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),de.clear(Ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",en,!1),t.removeEventListener("webglcontextrestored",Ot,!1),t.removeEventListener("webglcontextcreationerror",ht,!1),_t.dispose(),Xt.dispose(),Gt.dispose(),Rt.dispose(),an.dispose(),be.dispose(),tt.dispose(),zn.dispose(),Ae.dispose(),ct.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",qe),Mt.removeEventListener("sessionend",st),St.stop()};function en(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function Ot(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const ue=Yt.autoReset,Oe=dn.enabled,Qe=dn.autoUpdate,Ye=dn.needsUpdate,Ue=dn.type;Ht(),Yt.autoReset=ue,dn.enabled=Oe,dn.autoUpdate=Qe,dn.needsUpdate=Ye,dn.type=Ue}function ht(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function tn(ue){const Oe=ue.target;Oe.removeEventListener("dispose",tn),Ln(Oe)}function Ln(ue){Ei(ue),Rt.remove(ue)}function Ei(ue){const Oe=Rt.get(ue).programs;Oe!==void 0&&(Oe.forEach(function(Qe){ct.releaseProgram(Qe)}),ue.isShaderMaterial&&ct.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,Oe,Qe,Ye,Ue,It){Oe===null&&(Oe=Vt);const Ut=Ue.isMesh&&Ue.matrixWorld.determinant()<0,dt=Rs(ue,Oe,Qe,Ye,Ue);at.setMaterial(Ye,Ut);let ae=Qe.index,Lt=1;if(Ye.wireframe===!0){if(ae=He.getWireframeAttribute(Qe),ae===void 0)return;Lt=2}const Nn=Qe.drawRange,bn=Qe.attributes.position;let di=Nn.start*Lt,Ii=(Nn.start+Nn.count)*Lt;It!==null&&(di=Math.max(di,It.start*Lt),Ii=Math.min(Ii,(It.start+It.count)*Lt)),ae!==null?(di=Math.max(di,0),Ii=Math.min(Ii,ae.count)):bn!=null&&(di=Math.max(di,0),Ii=Math.min(Ii,bn.count));const cr=Ii-di;if(cr<0||cr===1/0)return;zn.setup(Ue,Ye,dt,Qe,ae);let re,wi=yn;if(ae!==null&&(re=oe.get(ae),wi=mn,wi.setIndex(re)),Ue.isMesh)Ye.wireframe===!0?(at.setLineWidth(Ye.wireframeLinewidth*jt()),wi.setMode(de.LINES)):wi.setMode(de.TRIANGLES);else if(Ue.isLine){let Dn=Ye.linewidth;Dn===void 0&&(Dn=1),at.setLineWidth(Dn*jt()),Ue.isLineSegments?wi.setMode(de.LINES):Ue.isLineLoop?wi.setMode(de.LINE_LOOP):wi.setMode(de.LINE_STRIP)}else Ue.isPoints?wi.setMode(de.POINTS):Ue.isSprite&&wi.setMode(de.TRIANGLES);if(Ue.isBatchedMesh)if(Ue._multiDrawInstances!==null)rl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),wi.renderMultiDrawInstances(Ue._multiDrawStarts,Ue._multiDrawCounts,Ue._multiDrawCount,Ue._multiDrawInstances);else if(gt.get("WEBGL_multi_draw"))wi.renderMultiDraw(Ue._multiDrawStarts,Ue._multiDrawCounts,Ue._multiDrawCount);else{const Dn=Ue._multiDrawStarts,Ir=Ue._multiDrawCounts,Pi=Ue._multiDrawCount,Ws=ae?oe.get(ae).bytesPerElement:1,Uc=Rt.get(Ye).currentProgram.getUniforms();for(let tr=0;tr<Pi;tr++)Uc.setValue(de,"_gl_DrawID",tr),wi.render(Dn[tr]/Ws,Ir[tr])}else if(Ue.isInstancedMesh)wi.renderInstances(di,cr,Ue.count);else if(Qe.isInstancedBufferGeometry){const Dn=Qe._maxInstanceCount!==void 0?Qe._maxInstanceCount:1/0,Ir=Math.min(Qe.instanceCount,Dn);wi.renderInstances(di,cr,Ir)}else wi.render(di,cr)};function fi(ue,Oe,Qe){ue.transparent===!0&&ue.side===ws&&ue.forceSinglePass===!1?(ue.side=sr,ue.needsUpdate=!0,mi(ue,Oe,Qe),ue.side=So,ue.needsUpdate=!0,mi(ue,Oe,Qe),ue.side=ws):mi(ue,Oe,Qe)}this.compile=function(ue,Oe,Qe=null){Qe===null&&(Qe=ue),w=Gt.get(Qe),w.init(Oe),P.push(w),Qe.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Oe.layers)&&(w.pushLight(Ue),Ue.castShadow&&w.pushShadow(Ue))}),ue!==Qe&&ue.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Oe.layers)&&(w.pushLight(Ue),Ue.castShadow&&w.pushShadow(Ue))}),w.setupLights();const Ye=new Set;return ue.traverse(function(Ue){if(!(Ue.isMesh||Ue.isPoints||Ue.isLine||Ue.isSprite))return;const It=Ue.material;if(It)if(Array.isArray(It))for(let Ut=0;Ut<It.length;Ut++){const dt=It[Ut];fi(dt,Qe,Ue),Ye.add(dt)}else fi(It,Qe,Ue),Ye.add(It)}),w=P.pop(),Ye},this.compileAsync=function(ue,Oe,Qe=null){const Ye=this.compile(ue,Oe,Qe);return new Promise(Ue=>{function It(){if(Ye.forEach(function(Ut){Rt.get(Ut).currentProgram.isReady()&&Ye.delete(Ut)}),Ye.size===0){Ue(ue);return}setTimeout(It,10)}gt.get("KHR_parallel_shader_compile")!==null?It():setTimeout(It,10)})};let Or=null;function Gi(ue){Or&&Or(ue)}function qe(){St.stop()}function st(){St.start()}const St=new hU;St.setAnimationLoop(Gi),typeof self<"u"&&St.setContext(self),this.setAnimationLoop=function(ue){Or=ue,Mt.setAnimationLoop(ue),ue===null?St.stop():St.start()},Mt.addEventListener("sessionstart",qe),Mt.addEventListener("sessionend",st),this.render=function(ue,Oe){if(Oe!==void 0&&Oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Oe.parent===null&&Oe.matrixWorldAutoUpdate===!0&&Oe.updateMatrixWorld(),Mt.enabled===!0&&Mt.isPresenting===!0&&(Mt.cameraAutoUpdate===!0&&Mt.updateCamera(Oe),Oe=Mt.getCamera()),ue.isScene===!0&&ue.onBeforeRender(L,ue,Oe,U),w=Gt.get(ue,P.length),w.init(Oe),P.push(w),Je.multiplyMatrices(Oe.projectionMatrix,Oe.matrixWorldInverse),_e.setFromProjectionMatrix(Je),Ve=this.localClippingEnabled,Ie=ln.init(this.clippingPlanes,Ve),S=Xt.get(ue,C.length),S.init(),C.push(S),Mt.enabled===!0&&Mt.isPresenting===!0){const It=L.xr.getDepthSensingMesh();It!==null&&ft(It,Oe,-1/0,L.sortObjects)}ft(ue,Oe,0,L.sortObjects),S.finish(),L.sortObjects===!0&&S.sort(fe,ne),fn=Mt.enabled===!1||Mt.isPresenting===!1||Mt.hasDepthSensing()===!1,fn&&_t.addToRenderList(S,ue),this.info.render.frame++,Ie===!0&&ln.beginShadows();const Qe=w.state.shadowsArray;dn.render(Qe,ue,Oe),Ie===!0&&ln.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ye=S.opaque,Ue=S.transmissive;if(w.setupLights(),Oe.isArrayCamera){const It=Oe.cameras;if(Ue.length>0)for(let Ut=0,dt=It.length;Ut<dt;Ut++){const ae=It[Ut];ie(Ye,Ue,ue,ae)}fn&&_t.render(ue);for(let Ut=0,dt=It.length;Ut<dt;Ut++){const ae=It[Ut];m(S,ue,ae,ae.viewport)}}else Ue.length>0&&ie(Ye,Ue,ue,Oe),fn&&_t.render(ue),m(S,ue,Oe);U!==null&&k===0&&(kt.updateMultisampleRenderTarget(U),kt.updateRenderTargetMipmap(U)),ue.isScene===!0&&ue.onAfterRender(L,ue,Oe),zn.resetDefaultState(),F=-1,z=null,P.pop(),P.length>0?(w=P[P.length-1],Ie===!0&&ln.setGlobalState(L.clippingPlanes,w.state.camera)):w=null,C.pop(),C.length>0?S=C[C.length-1]:S=null};function ft(ue,Oe,Qe,Ye){if(ue.visible===!1)return;if(ue.layers.test(Oe.layers)){if(ue.isGroup)Qe=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(Oe);else if(ue.isLight)w.pushLight(ue),ue.castShadow&&w.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||_e.intersectsSprite(ue)){Ye&&pt.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(Je);const Ut=tt.update(ue),dt=ue.material;dt.visible&&S.push(ue,Ut,dt,Qe,pt.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||_e.intersectsObject(ue))){const Ut=tt.update(ue),dt=ue.material;if(Ye&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),pt.copy(ue.boundingSphere.center)):(Ut.boundingSphere===null&&Ut.computeBoundingSphere(),pt.copy(Ut.boundingSphere.center)),pt.applyMatrix4(ue.matrixWorld).applyMatrix4(Je)),Array.isArray(dt)){const ae=Ut.groups;for(let Lt=0,Nn=ae.length;Lt<Nn;Lt++){const bn=ae[Lt],di=dt[bn.materialIndex];di&&di.visible&&S.push(ue,Ut,di,Qe,pt.z,bn)}}else dt.visible&&S.push(ue,Ut,dt,Qe,pt.z,null)}}const It=ue.children;for(let Ut=0,dt=It.length;Ut<dt;Ut++)ft(It[Ut],Oe,Qe,Ye)}function m(ue,Oe,Qe,Ye){const Ue=ue.opaque,It=ue.transmissive,Ut=ue.transparent;w.setupLightsView(Qe),Ie===!0&&ln.setGlobalState(L.clippingPlanes,Qe),Ye&&at.viewport(V.copy(Ye)),Ue.length>0&&xn(Ue,Oe,Qe),It.length>0&&xn(It,Oe,Qe),Ut.length>0&&xn(Ut,Oe,Qe),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function ie(ue,Oe,Qe,Ye){if((Qe.isScene===!0?Qe.overrideMaterial:null)!==null)return;w.state.transmissionRenderTarget[Ye.id]===void 0&&(w.state.transmissionRenderTarget[Ye.id]=new cd(1,1,{generateMipmaps:!0,type:gt.has("EXT_color_buffer_half_float")||gt.has("EXT_color_buffer_float")?Ss:$r,minFilter:vo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qn.workingColorSpace}));const It=w.state.transmissionRenderTarget[Ye.id],Ut=Ye.viewport||V;It.setSize(Ut.z*L.transmissionResolutionScale,Ut.w*L.transmissionResolutionScale);const dt=L.getRenderTarget();L.setRenderTarget(It),L.getClearColor(J),K=L.getClearAlpha(),K<1&&L.setClearColor(16777215,.5),L.clear(),fn&&_t.render(Qe);const ae=L.toneMapping;L.toneMapping=Mo;const Lt=Ye.viewport;if(Ye.viewport!==void 0&&(Ye.viewport=void 0),w.setupLightsView(Ye),Ie===!0&&ln.setGlobalState(L.clippingPlanes,Ye),xn(ue,Qe,Ye),kt.updateMultisampleRenderTarget(It),kt.updateRenderTargetMipmap(It),gt.has("WEBGL_multisampled_render_to_texture")===!1){let Nn=!1;for(let bn=0,di=Oe.length;bn<di;bn++){const Ii=Oe[bn],cr=Ii.object,re=Ii.geometry,wi=Ii.material,Dn=Ii.group;if(wi.side===ws&&cr.layers.test(Ye.layers)){const Ir=wi.side;wi.side=sr,wi.needsUpdate=!0,Gn(cr,Qe,Ye,re,wi,Dn),wi.side=Ir,wi.needsUpdate=!0,Nn=!0}}Nn===!0&&(kt.updateMultisampleRenderTarget(It),kt.updateRenderTargetMipmap(It))}L.setRenderTarget(dt),L.setClearColor(J,K),Lt!==void 0&&(Ye.viewport=Lt),L.toneMapping=ae}function xn(ue,Oe,Qe){const Ye=Oe.isScene===!0?Oe.overrideMaterial:null;for(let Ue=0,It=ue.length;Ue<It;Ue++){const Ut=ue[Ue],dt=Ut.object,ae=Ut.geometry,Lt=Ut.group;let Nn=Ut.material;Nn.allowOverride===!0&&Ye!==null&&(Nn=Ye),dt.layers.test(Qe.layers)&&Gn(dt,Oe,Qe,ae,Nn,Lt)}}function Gn(ue,Oe,Qe,Ye,Ue,It){ue.onBeforeRender(L,Oe,Qe,Ye,Ue,It),ue.modelViewMatrix.multiplyMatrices(Qe.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Ue.onBeforeRender(L,Oe,Qe,Ye,ue,It),Ue.transparent===!0&&Ue.side===ws&&Ue.forceSinglePass===!1?(Ue.side=sr,Ue.needsUpdate=!0,L.renderBufferDirect(Qe,Oe,Ye,Ue,ue,It),Ue.side=So,Ue.needsUpdate=!0,L.renderBufferDirect(Qe,Oe,Ye,Ue,ue,It),Ue.side=ws):L.renderBufferDirect(Qe,Oe,Ye,Ue,ue,It),ue.onAfterRender(L,Oe,Qe,Ye,Ue,It)}function mi(ue,Oe,Qe){Oe.isScene!==!0&&(Oe=Vt);const Ye=Rt.get(ue),Ue=w.state.lights,It=w.state.shadowsArray,Ut=Ue.state.version,dt=ct.getParameters(ue,Ue.state,It,Oe,Qe),ae=ct.getProgramCacheKey(dt);let Lt=Ye.programs;Ye.environment=ue.isMeshStandardMaterial?Oe.environment:null,Ye.fog=Oe.fog,Ye.envMap=(ue.isMeshStandardMaterial?be:an).get(ue.envMap||Ye.environment),Ye.envMapRotation=Ye.environment!==null&&ue.envMap===null?Oe.environmentRotation:ue.envMapRotation,Lt===void 0&&(ue.addEventListener("dispose",tn),Lt=new Map,Ye.programs=Lt);let Nn=Lt.get(ae);if(Nn!==void 0){if(Ye.currentProgram===Nn&&Ye.lightsStateVersion===Ut)return Zn(ue,dt),Nn}else dt.uniforms=ct.getUniforms(ue),ue.onBeforeCompile(dt,L),Nn=ct.acquireProgram(dt,ae),Lt.set(ae,Nn),Ye.uniforms=dt.uniforms;const bn=Ye.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(bn.clippingPlanes=ln.uniform),Zn(ue,dt),Ye.needsLights=hn(ue),Ye.lightsStateVersion=Ut,Ye.needsLights&&(bn.ambientLightColor.value=Ue.state.ambient,bn.lightProbe.value=Ue.state.probe,bn.directionalLights.value=Ue.state.directional,bn.directionalLightShadows.value=Ue.state.directionalShadow,bn.spotLights.value=Ue.state.spot,bn.spotLightShadows.value=Ue.state.spotShadow,bn.rectAreaLights.value=Ue.state.rectArea,bn.ltc_1.value=Ue.state.rectAreaLTC1,bn.ltc_2.value=Ue.state.rectAreaLTC2,bn.pointLights.value=Ue.state.point,bn.pointLightShadows.value=Ue.state.pointShadow,bn.hemisphereLights.value=Ue.state.hemi,bn.directionalShadowMap.value=Ue.state.directionalShadowMap,bn.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,bn.spotShadowMap.value=Ue.state.spotShadowMap,bn.spotLightMatrix.value=Ue.state.spotLightMatrix,bn.spotLightMap.value=Ue.state.spotLightMap,bn.pointShadowMap.value=Ue.state.pointShadowMap,bn.pointShadowMatrix.value=Ue.state.pointShadowMatrix),Ye.currentProgram=Nn,Ye.uniformsList=null,Nn}function wn(ue){if(ue.uniformsList===null){const Oe=ue.currentProgram.getUniforms();ue.uniformsList=N_.seqWithValue(Oe.seq,ue.uniforms)}return ue.uniformsList}function Zn(ue,Oe){const Qe=Rt.get(ue);Qe.outputColorSpace=Oe.outputColorSpace,Qe.batching=Oe.batching,Qe.batchingColor=Oe.batchingColor,Qe.instancing=Oe.instancing,Qe.instancingColor=Oe.instancingColor,Qe.instancingMorph=Oe.instancingMorph,Qe.skinning=Oe.skinning,Qe.morphTargets=Oe.morphTargets,Qe.morphNormals=Oe.morphNormals,Qe.morphColors=Oe.morphColors,Qe.morphTargetsCount=Oe.morphTargetsCount,Qe.numClippingPlanes=Oe.numClippingPlanes,Qe.numIntersection=Oe.numClipIntersection,Qe.vertexAlphas=Oe.vertexAlphas,Qe.vertexTangents=Oe.vertexTangents,Qe.toneMapping=Oe.toneMapping}function Rs(ue,Oe,Qe,Ye,Ue){Oe.isScene!==!0&&(Oe=Vt),kt.resetTextureUnits();const It=Oe.fog,Ut=Ye.isMeshStandardMaterial?Oe.environment:null,dt=U===null?L.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:Cc,ae=(Ye.isMeshStandardMaterial?be:an).get(Ye.envMap||Ut),Lt=Ye.vertexColors===!0&&!!Qe.attributes.color&&Qe.attributes.color.itemSize===4,Nn=!!Qe.attributes.tangent&&(!!Ye.normalMap||Ye.anisotropy>0),bn=!!Qe.morphAttributes.position,di=!!Qe.morphAttributes.normal,Ii=!!Qe.morphAttributes.color;let cr=Mo;Ye.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(cr=L.toneMapping);const re=Qe.morphAttributes.position||Qe.morphAttributes.normal||Qe.morphAttributes.color,wi=re!==void 0?re.length:0,Dn=Rt.get(Ye),Ir=w.state.lights;if(Ie===!0&&(Ve===!0||ue!==z)){const Zr=ue===z&&Ye.id===F;ln.setState(Ye,ue,Zr)}let Pi=!1;Ye.version===Dn.__version?(Dn.needsLights&&Dn.lightsStateVersion!==Ir.state.version||Dn.outputColorSpace!==dt||Ue.isBatchedMesh&&Dn.batching===!1||!Ue.isBatchedMesh&&Dn.batching===!0||Ue.isBatchedMesh&&Dn.batchingColor===!0&&Ue.colorTexture===null||Ue.isBatchedMesh&&Dn.batchingColor===!1&&Ue.colorTexture!==null||Ue.isInstancedMesh&&Dn.instancing===!1||!Ue.isInstancedMesh&&Dn.instancing===!0||Ue.isSkinnedMesh&&Dn.skinning===!1||!Ue.isSkinnedMesh&&Dn.skinning===!0||Ue.isInstancedMesh&&Dn.instancingColor===!0&&Ue.instanceColor===null||Ue.isInstancedMesh&&Dn.instancingColor===!1&&Ue.instanceColor!==null||Ue.isInstancedMesh&&Dn.instancingMorph===!0&&Ue.morphTexture===null||Ue.isInstancedMesh&&Dn.instancingMorph===!1&&Ue.morphTexture!==null||Dn.envMap!==ae||Ye.fog===!0&&Dn.fog!==It||Dn.numClippingPlanes!==void 0&&(Dn.numClippingPlanes!==ln.numPlanes||Dn.numIntersection!==ln.numIntersection)||Dn.vertexAlphas!==Lt||Dn.vertexTangents!==Nn||Dn.morphTargets!==bn||Dn.morphNormals!==di||Dn.morphColors!==Ii||Dn.toneMapping!==cr||Dn.morphTargetsCount!==wi)&&(Pi=!0):(Pi=!0,Dn.__version=Ye.version);let Ws=Dn.currentProgram;Pi===!0&&(Ws=mi(Ye,Oe,Ue));let Uc=!1,tr=!1,dl=!1;const Qi=Ws.getUniforms(),wr=Dn.uniforms;if(at.useProgram(Ws.program)&&(Uc=!0,tr=!0,dl=!0),Ye.id!==F&&(F=Ye.id,tr=!0),Uc||z!==ue){at.buffers.depth.getReversed()?($e.copy(ue.projectionMatrix),cK($e),uK($e),Qi.setValue(de,"projectionMatrix",$e)):Qi.setValue(de,"projectionMatrix",ue.projectionMatrix),Qi.setValue(de,"viewMatrix",ue.matrixWorldInverse);const Ns=Qi.map.cameraPosition;Ns!==void 0&&Ns.setValue(de,vt.setFromMatrixPosition(ue.matrixWorld)),Ct.logarithmicDepthBuffer&&Qi.setValue(de,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshLambertMaterial||Ye.isMeshBasicMaterial||Ye.isMeshStandardMaterial||Ye.isShaderMaterial)&&Qi.setValue(de,"isOrthographic",ue.isOrthographicCamera===!0),z!==ue&&(z=ue,tr=!0,dl=!0)}if(Ue.isSkinnedMesh){Qi.setOptional(de,Ue,"bindMatrix"),Qi.setOptional(de,Ue,"bindMatrixInverse");const Zr=Ue.skeleton;Zr&&(Zr.boneTexture===null&&Zr.computeBoneTexture(),Qi.setValue(de,"boneTexture",Zr.boneTexture,kt))}Ue.isBatchedMesh&&(Qi.setOptional(de,Ue,"batchingTexture"),Qi.setValue(de,"batchingTexture",Ue._matricesTexture,kt),Qi.setOptional(de,Ue,"batchingIdTexture"),Qi.setValue(de,"batchingIdTexture",Ue._indirectTexture,kt),Qi.setOptional(de,Ue,"batchingColorTexture"),Ue._colorsTexture!==null&&Qi.setValue(de,"batchingColorTexture",Ue._colorsTexture,kt));const vi=Qe.morphAttributes;if((vi.position!==void 0||vi.normal!==void 0||vi.color!==void 0)&&Zt.update(Ue,Qe,Ws),(tr||Dn.receiveShadow!==Ue.receiveShadow)&&(Dn.receiveShadow=Ue.receiveShadow,Qi.setValue(de,"receiveShadow",Ue.receiveShadow)),Ye.isMeshGouraudMaterial&&Ye.envMap!==null&&(wr.envMap.value=ae,wr.flipEnvMap.value=ae.isCubeTexture&&ae.isRenderTargetTexture===!1?-1:1),Ye.isMeshStandardMaterial&&Ye.envMap===null&&Oe.environment!==null&&(wr.envMapIntensity.value=Oe.environmentIntensity),tr&&(Qi.setValue(de,"toneMappingExposure",L.toneMappingExposure),Dn.needsLights&&ni(wr,dl),It&&Ye.fog===!0&&et.refreshFogUniforms(wr,It),et.refreshMaterialUniforms(wr,Ye,se,ee,w.state.transmissionRenderTarget[ue.id]),N_.upload(de,wn(Dn),wr,kt)),Ye.isShaderMaterial&&Ye.uniformsNeedUpdate===!0&&(N_.upload(de,wn(Dn),wr,kt),Ye.uniformsNeedUpdate=!1),Ye.isSpriteMaterial&&Qi.setValue(de,"center",Ue.center),Qi.setValue(de,"modelViewMatrix",Ue.modelViewMatrix),Qi.setValue(de,"normalMatrix",Ue.normalMatrix),Qi.setValue(de,"modelMatrix",Ue.matrixWorld),Ye.isShaderMaterial||Ye.isRawShaderMaterial){const Zr=Ye.uniformsGroups;for(let Ns=0,pl=Zr.length;Ns<pl;Ns++){const Al=Zr[Ns];Ae.update(Al,Ws),Ae.bind(Al,Ws)}}return Ws}function ni(ue,Oe){ue.ambientLightColor.needsUpdate=Oe,ue.lightProbe.needsUpdate=Oe,ue.directionalLights.needsUpdate=Oe,ue.directionalLightShadows.needsUpdate=Oe,ue.pointLights.needsUpdate=Oe,ue.pointLightShadows.needsUpdate=Oe,ue.spotLights.needsUpdate=Oe,ue.spotLightShadows.needsUpdate=Oe,ue.rectAreaLights.needsUpdate=Oe,ue.hemisphereLights.needsUpdate=Oe}function hn(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(ue,Oe,Qe){const Ye=Rt.get(ue);Ye.__autoAllocateDepthBuffer=ue.resolveDepthBuffer===!1,Ye.__autoAllocateDepthBuffer===!1&&(Ye.__useRenderToTexture=!1),Rt.get(ue.texture).__webglTexture=Oe,Rt.get(ue.depthTexture).__webglTexture=Ye.__autoAllocateDepthBuffer?void 0:Qe,Ye.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ue,Oe){const Qe=Rt.get(ue);Qe.__webglFramebuffer=Oe,Qe.__useDefaultFramebuffer=Oe===void 0};const Ps=de.createFramebuffer();this.setRenderTarget=function(ue,Oe=0,Qe=0){U=ue,B=Oe,k=Qe;let Ye=!0,Ue=null,It=!1,Ut=!1;if(ue){const ae=Rt.get(ue);if(ae.__useDefaultFramebuffer!==void 0)at.bindFramebuffer(de.FRAMEBUFFER,null),Ye=!1;else if(ae.__webglFramebuffer===void 0)kt.setupRenderTarget(ue);else if(ae.__hasExternalTextures)kt.rebindTextures(ue,Rt.get(ue.texture).__webglTexture,Rt.get(ue.depthTexture).__webglTexture);else if(ue.depthBuffer){const bn=ue.depthTexture;if(ae.__boundDepthTexture!==bn){if(bn!==null&&Rt.has(bn)&&(ue.width!==bn.image.width||ue.height!==bn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");kt.setupDepthRenderbuffer(ue)}}const Lt=ue.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(Ut=!0);const Nn=Rt.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(Nn[Oe])?Ue=Nn[Oe][Qe]:Ue=Nn[Oe],It=!0):ue.samples>0&&kt.useMultisampledRTT(ue)===!1?Ue=Rt.get(ue).__webglMultisampledFramebuffer:Array.isArray(Nn)?Ue=Nn[Qe]:Ue=Nn,V.copy(ue.viewport),W.copy(ue.scissor),X=ue.scissorTest}else V.copy(he).multiplyScalar(se).floor(),W.copy(Te).multiplyScalar(se).floor(),X=Pe;if(Qe!==0&&(Ue=Ps),at.bindFramebuffer(de.FRAMEBUFFER,Ue)&&Ye&&at.drawBuffers(ue,Ue),at.viewport(V),at.scissor(W),at.setScissorTest(X),It){const ae=Rt.get(ue.texture);de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,ae.__webglTexture,Qe)}else if(Ut){const ae=Rt.get(ue.texture),Lt=Oe;de.framebufferTextureLayer(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,ae.__webglTexture,Qe,Lt)}else if(ue!==null&&Qe!==0){const ae=Rt.get(ue.texture);de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,ae.__webglTexture,Qe)}F=-1},this.readRenderTargetPixels=function(ue,Oe,Qe,Ye,Ue,It,Ut,dt=0){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ae=Rt.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Ut!==void 0&&(ae=ae[Ut]),ae){at.bindFramebuffer(de.FRAMEBUFFER,ae);try{const Lt=ue.textures[dt],Nn=Lt.format,bn=Lt.type;if(!Ct.textureFormatReadable(Nn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ct.textureTypeReadable(bn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Oe>=0&&Oe<=ue.width-Ye&&Qe>=0&&Qe<=ue.height-Ue&&(ue.textures.length>1&&de.readBuffer(de.COLOR_ATTACHMENT0+dt),de.readPixels(Oe,Qe,Ye,Ue,zt.convert(Nn),zt.convert(bn),It))}finally{const Lt=U!==null?Rt.get(U).__webglFramebuffer:null;at.bindFramebuffer(de.FRAMEBUFFER,Lt)}}},this.readRenderTargetPixelsAsync=async function(ue,Oe,Qe,Ye,Ue,It,Ut,dt=0){if(!(ue&&ue.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ae=Rt.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Ut!==void 0&&(ae=ae[Ut]),ae)if(Oe>=0&&Oe<=ue.width-Ye&&Qe>=0&&Qe<=ue.height-Ue){at.bindFramebuffer(de.FRAMEBUFFER,ae);const Lt=ue.textures[dt],Nn=Lt.format,bn=Lt.type;if(!Ct.textureFormatReadable(Nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ct.textureTypeReadable(bn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const di=de.createBuffer();de.bindBuffer(de.PIXEL_PACK_BUFFER,di),de.bufferData(de.PIXEL_PACK_BUFFER,It.byteLength,de.STREAM_READ),ue.textures.length>1&&de.readBuffer(de.COLOR_ATTACHMENT0+dt),de.readPixels(Oe,Qe,Ye,Ue,zt.convert(Nn),zt.convert(bn),0);const Ii=U!==null?Rt.get(U).__webglFramebuffer:null;at.bindFramebuffer(de.FRAMEBUFFER,Ii);const cr=de.fenceSync(de.SYNC_GPU_COMMANDS_COMPLETE,0);return de.flush(),await lK(de,cr,4),de.bindBuffer(de.PIXEL_PACK_BUFFER,di),de.getBufferSubData(de.PIXEL_PACK_BUFFER,0,It),de.deleteBuffer(di),de.deleteSync(cr),It}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ue,Oe=null,Qe=0){const Ye=Math.pow(2,-Qe),Ue=Math.floor(ue.image.width*Ye),It=Math.floor(ue.image.height*Ye),Ut=Oe!==null?Oe.x:0,dt=Oe!==null?Oe.y:0;kt.setTexture2D(ue,0),de.copyTexSubImage2D(de.TEXTURE_2D,Qe,0,0,Ut,dt,Ue,It),at.unbindTexture()};const Ql=de.createFramebuffer(),hs=de.createFramebuffer();this.copyTextureToTexture=function(ue,Oe,Qe=null,Ye=null,Ue=0,It=null){It===null&&(Ue!==0?(rl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),It=Ue,Ue=0):It=0);let Ut,dt,ae,Lt,Nn,bn,di,Ii,cr;const re=ue.isCompressedTexture?ue.mipmaps[It]:ue.image;if(Qe!==null)Ut=Qe.max.x-Qe.min.x,dt=Qe.max.y-Qe.min.y,ae=Qe.isBox3?Qe.max.z-Qe.min.z:1,Lt=Qe.min.x,Nn=Qe.min.y,bn=Qe.isBox3?Qe.min.z:0;else{const vi=Math.pow(2,-Ue);Ut=Math.floor(re.width*vi),dt=Math.floor(re.height*vi),ue.isDataArrayTexture?ae=re.depth:ue.isData3DTexture?ae=Math.floor(re.depth*vi):ae=1,Lt=0,Nn=0,bn=0}Ye!==null?(di=Ye.x,Ii=Ye.y,cr=Ye.z):(di=0,Ii=0,cr=0);const wi=zt.convert(Oe.format),Dn=zt.convert(Oe.type);let Ir;Oe.isData3DTexture?(kt.setTexture3D(Oe,0),Ir=de.TEXTURE_3D):Oe.isDataArrayTexture||Oe.isCompressedArrayTexture?(kt.setTexture2DArray(Oe,0),Ir=de.TEXTURE_2D_ARRAY):(kt.setTexture2D(Oe,0),Ir=de.TEXTURE_2D),de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,Oe.flipY),de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Oe.premultiplyAlpha),de.pixelStorei(de.UNPACK_ALIGNMENT,Oe.unpackAlignment);const Pi=de.getParameter(de.UNPACK_ROW_LENGTH),Ws=de.getParameter(de.UNPACK_IMAGE_HEIGHT),Uc=de.getParameter(de.UNPACK_SKIP_PIXELS),tr=de.getParameter(de.UNPACK_SKIP_ROWS),dl=de.getParameter(de.UNPACK_SKIP_IMAGES);de.pixelStorei(de.UNPACK_ROW_LENGTH,re.width),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,re.height),de.pixelStorei(de.UNPACK_SKIP_PIXELS,Lt),de.pixelStorei(de.UNPACK_SKIP_ROWS,Nn),de.pixelStorei(de.UNPACK_SKIP_IMAGES,bn);const Qi=ue.isDataArrayTexture||ue.isData3DTexture,wr=Oe.isDataArrayTexture||Oe.isData3DTexture;if(ue.isDepthTexture){const vi=Rt.get(ue),Zr=Rt.get(Oe),Ns=Rt.get(vi.__renderTarget),pl=Rt.get(Zr.__renderTarget);at.bindFramebuffer(de.READ_FRAMEBUFFER,Ns.__webglFramebuffer),at.bindFramebuffer(de.DRAW_FRAMEBUFFER,pl.__webglFramebuffer);for(let Al=0;Al<ae;Al++)Qi&&(de.framebufferTextureLayer(de.READ_FRAMEBUFFER,de.COLOR_ATTACHMENT0,Rt.get(ue).__webglTexture,Ue,bn+Al),de.framebufferTextureLayer(de.DRAW_FRAMEBUFFER,de.COLOR_ATTACHMENT0,Rt.get(Oe).__webglTexture,It,cr+Al)),de.blitFramebuffer(Lt,Nn,Ut,dt,di,Ii,Ut,dt,de.DEPTH_BUFFER_BIT,de.NEAREST);at.bindFramebuffer(de.READ_FRAMEBUFFER,null),at.bindFramebuffer(de.DRAW_FRAMEBUFFER,null)}else if(Ue!==0||ue.isRenderTargetTexture||Rt.has(ue)){const vi=Rt.get(ue),Zr=Rt.get(Oe);at.bindFramebuffer(de.READ_FRAMEBUFFER,Ql),at.bindFramebuffer(de.DRAW_FRAMEBUFFER,hs);for(let Ns=0;Ns<ae;Ns++)Qi?de.framebufferTextureLayer(de.READ_FRAMEBUFFER,de.COLOR_ATTACHMENT0,vi.__webglTexture,Ue,bn+Ns):de.framebufferTexture2D(de.READ_FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,vi.__webglTexture,Ue),wr?de.framebufferTextureLayer(de.DRAW_FRAMEBUFFER,de.COLOR_ATTACHMENT0,Zr.__webglTexture,It,cr+Ns):de.framebufferTexture2D(de.DRAW_FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,Zr.__webglTexture,It),Ue!==0?de.blitFramebuffer(Lt,Nn,Ut,dt,di,Ii,Ut,dt,de.COLOR_BUFFER_BIT,de.NEAREST):wr?de.copyTexSubImage3D(Ir,It,di,Ii,cr+Ns,Lt,Nn,Ut,dt):de.copyTexSubImage2D(Ir,It,di,Ii,Lt,Nn,Ut,dt);at.bindFramebuffer(de.READ_FRAMEBUFFER,null),at.bindFramebuffer(de.DRAW_FRAMEBUFFER,null)}else wr?ue.isDataTexture||ue.isData3DTexture?de.texSubImage3D(Ir,It,di,Ii,cr,Ut,dt,ae,wi,Dn,re.data):Oe.isCompressedArrayTexture?de.compressedTexSubImage3D(Ir,It,di,Ii,cr,Ut,dt,ae,wi,re.data):de.texSubImage3D(Ir,It,di,Ii,cr,Ut,dt,ae,wi,Dn,re):ue.isDataTexture?de.texSubImage2D(de.TEXTURE_2D,It,di,Ii,Ut,dt,wi,Dn,re.data):ue.isCompressedTexture?de.compressedTexSubImage2D(de.TEXTURE_2D,It,di,Ii,re.width,re.height,wi,re.data):de.texSubImage2D(de.TEXTURE_2D,It,di,Ii,Ut,dt,wi,Dn,re);de.pixelStorei(de.UNPACK_ROW_LENGTH,Pi),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,Ws),de.pixelStorei(de.UNPACK_SKIP_PIXELS,Uc),de.pixelStorei(de.UNPACK_SKIP_ROWS,tr),de.pixelStorei(de.UNPACK_SKIP_IMAGES,dl),It===0&&Oe.generateMipmaps&&de.generateMipmap(Ir),at.unbindTexture()},this.copyTextureToTexture3D=function(ue,Oe,Qe=null,Ye=null,Ue=0){return rl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ue,Oe,Qe,Ye,Ue)},this.initRenderTarget=function(ue){Rt.get(ue).__webglFramebuffer===void 0&&kt.setupRenderTarget(ue)},this.initTexture=function(ue){ue.isCubeTexture?kt.setTextureCube(ue,0):ue.isData3DTexture?kt.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?kt.setTexture2DArray(ue,0):kt.setTexture2D(ue,0),at.unbindTexture()},this.resetState=function(){B=0,k=0,U=null,at.reset(),zn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return eo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=qn._getUnpackColorSpace()}}class bre extends Lr{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new lt(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const u0=new pe,mO=new Un,vO=new Un,yO=new pe,xO=new pe;class _re{constructor(e={}){const t=this;let n,r,s,a;const o={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(x,_){x.matrixWorldAutoUpdate===!0&&x.updateMatrixWorld(),_.parent===null&&_.matrixWorldAutoUpdate===!0&&_.updateMatrixWorld(),mO.copy(_.matrixWorldInverse),vO.multiplyMatrices(_.projectionMatrix,mO),u(x,x,_),A(x)},this.setSize=function(x,_){n=x,r=_,s=n/2,a=r/2,l.style.width=x+"px",l.style.height=_+"px"};function c(x){x.isCSS2DObject&&(x.element.style.display="none");for(let _=0,S=x.children.length;_<S;_++)c(x.children[_])}function u(x,_,S){if(x.visible===!1){c(x);return}if(x.isCSS2DObject){u0.setFromMatrixPosition(x.matrixWorld),u0.applyMatrix4(vO);const w=u0.z>=-1&&u0.z<=1&&x.layers.test(S.layers)===!0,C=x.element;C.style.display=w===!0?"":"none",w===!0&&(x.onBeforeRender(t,_,S),C.style.transform="translate("+-100*x.center.x+"%,"+-100*x.center.y+"%)translate("+(u0.x*s+s)+"px,"+(-u0.y*a+a)+"px)",C.parentNode!==l&&l.appendChild(C),x.onAfterRender(t,_,S));const P={distanceToCameraSquared:h(S,x)};o.objects.set(x,P)}for(let w=0,C=x.children.length;w<C;w++)u(x.children[w],_,S)}function h(x,_){return yO.setFromMatrixPosition(x.matrixWorld),xO.setFromMatrixPosition(_.matrixWorld),yO.distanceToSquared(xO)}function d(x){const _=[];return x.traverseVisible(function(S){S.isCSS2DObject&&_.push(S)}),_}function A(x){const _=d(x).sort(function(w,C){if(w.renderOrder!==C.renderOrder)return C.renderOrder-w.renderOrder;const P=o.objects.get(w).distanceToCameraSquared,L=o.objects.get(C).distanceToCameraSquared;return P-L}),S=_.length;for(let w=0,C=_.length;w<C;w++)_[w].element.style.zIndex=S-w}}}function M4(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var wre=typeof global=="object"&&global&&global.Object===Object&&global,Sre=typeof self=="object"&&self&&self.Object===Object&&self,gU=wre||Sre||Function("return this")(),pE=function(){return gU.Date.now()},Tre=/\s/;function Mre(i){for(var e=i.length;e--&&Tre.test(i.charAt(e)););return e}var Ere=/^\s+/;function Cre(i){return i&&i.slice(0,Mre(i)+1).replace(Ere,"")}var dw=gU.Symbol,mU=Object.prototype,Rre=mU.hasOwnProperty,Pre=mU.toString,Lv=dw?dw.toStringTag:void 0;function Nre(i){var e=Rre.call(i,Lv),t=i[Lv];try{i[Lv]=void 0;var n=!0}catch{}var r=Pre.call(i);return n&&(e?i[Lv]=t:delete i[Lv]),r}var Lre=Object.prototype,Dre=Lre.toString;function kre(i){return Dre.call(i)}var Ore="[object Null]",Ire="[object Undefined]",bO=dw?dw.toStringTag:void 0;function Bre(i){return i==null?i===void 0?Ire:Ore:bO&&bO in Object(i)?Nre(i):kre(i)}function Fre(i){return i!=null&&typeof i=="object"}var Ure="[object Symbol]";function zre(i){return typeof i=="symbol"||Fre(i)&&Bre(i)==Ure}var _O=NaN,Gre=/^[-+]0x[0-9a-f]+$/i,Vre=/^0b[01]+$/i,Hre=/^0o[0-7]+$/i,qre=parseInt;function wO(i){if(typeof i=="number")return i;if(zre(i))return _O;if(M4(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=M4(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Cre(i);var t=Vre.test(i);return t||Hre.test(i)?qre(i.slice(2),t?2:8):Gre.test(i)?_O:+i}var Wre="Expected a function",jre=Math.max,Xre=Math.min;function Yre(i,e,t){var n,r,s,a,o,l,c=0,u=!1,h=!1,d=!0;if(typeof i!="function")throw new TypeError(Wre);e=wO(e)||0,M4(t)&&(u=!!t.leading,h="maxWait"in t,s=h?jre(wO(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function A(B){var k=n,U=r;return n=r=void 0,c=B,a=i.apply(U,k),a}function x(B){return c=B,o=setTimeout(w,e),u?A(B):a}function _(B){var k=B-l,U=B-c,F=e-k;return h?Xre(F,s-U):F}function S(B){var k=B-l,U=B-c;return l===void 0||k>=e||k<0||h&&U>=s}function w(){var B=pE();if(S(B))return C(B);o=setTimeout(w,_(B))}function C(B){return o=void 0,d&&n?A(B):(n=r=void 0,a)}function P(){o!==void 0&&clearTimeout(o),c=0,n=l=r=o=void 0}function L(){return o===void 0?a:C(pE())}function D(){var B=pE(),k=S(B);if(n=arguments,r=this,l=B,k){if(o===void 0)return x(l);if(h)return clearTimeout(o),o=setTimeout(w,e),A(l)}return o===void 0&&(o=setTimeout(w,e)),a}return D.cancel=P,D.flush=L,D}function SO(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function $re(i){if(Array.isArray(i))return i}function Qre(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Zre(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function Kre(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function Jre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ese(i,e){return $re(i)||Kre(i,e)||tse(i,e)||Jre()}function tse(i,e){if(i){if(typeof i=="string")return SO(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?SO(i,e):void 0}}var nse=Zre(function i(e,t){var n=t.default,r=n===void 0?null:n,s=t.triggerUpdate,a=s===void 0?!0:s,o=t.onChange,l=o===void 0?function(c,u){}:o;Qre(this,i),this.name=e,this.defaultVal=r,this.triggerUpdate=a,this.onChange=l});function Hs(i){var e=i.stateInit,t=e===void 0?function(){return{}}:e,n=i.props,r=n===void 0?{}:n,s=i.methods,a=s===void 0?{}:s,o=i.aliases,l=o===void 0?{}:o,c=i.init,u=c===void 0?function(){}:c,h=i.update,d=h===void 0?function(){}:h,A=Object.keys(r).map(function(x){return new nse(x,r[x])});return function x(){for(var _=arguments.length,S=new Array(_),w=0;w<_;w++)S[w]=arguments[w];var C=!!(this instanceof x&&this.constructor),P=C?S.shift():void 0,L=S[0],D=L===void 0?{}:L,B=Object.assign({},t instanceof Function?t(D):t,{initialised:!1}),k={};function U(V){return F(V,D),z(),U}var F=function(W,X){u.call(U,W,B,X),B.initialised=!0},z=Yre(function(){B.initialised&&(d.call(U,B,k),k={})},1);return A.forEach(function(V){U[V.name]=W(V);function W(X){var J=X.name,K=X.triggerUpdate,Y=K===void 0?!1:K,ee=X.onChange,se=ee===void 0?function(he,Te){}:ee,fe=X.defaultVal,ne=fe===void 0?null:fe;return function(he){var Te=B[J];if(!arguments.length)return Te;var Pe=he===void 0?ne:he;return B[J]=Pe,se.call(U,Pe,B,Te),!k.hasOwnProperty(J)&&(k[J]=Te),Y&&z(),U}}}),Object.keys(a).forEach(function(V){U[V]=function(){for(var W,X=arguments.length,J=new Array(X),K=0;K<X;K++)J[K]=arguments[K];return(W=a[V]).call.apply(W,[U,B].concat(J))}}),Object.entries(l).forEach(function(V){var W=ese(V,2),X=W[0],J=W[1];return U[X]=U[J]}),U.resetProps=function(){return A.forEach(function(V){U[V.name](V.defaultVal)}),U},U.resetProps(),B._rerender=z,C&&P&&U(P),U}}var Ms=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-Ms.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?Ms.Bounce.In(i*2)*.5:Ms.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),hy=function(){return performance.now()},VS=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,s=t;r<s.length;r++){var a=s[r];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},i.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var s=r[n];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},i.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},i.prototype.update=function(e,t){e===void 0&&(e=hy()),t===void 0&&(t=!0);var n=Object.keys(this._tweens);if(n.length!==0)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],a=!t;s&&s.update(e,a)===!1&&!t&&this.remove(s)}n=Object.keys(this._tweensAddedDuringUpdate)}},i}(),E4={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=E4.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i}}},vU=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),C4=new VS,Ua=function(){function i(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ms.Linear.None,this._interpolationFunction=E4.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=vU.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof t=="object"?(this._group=t,t.add(this)):t===!0&&(this._group=C4,C4.add(this))}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=hy()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var a in n){var o=e[a],l=Array.isArray(o),c=l?"array":typeof o,u=!l&&Array.isArray(n[a]);if(!(c==="undefined"||c==="function")){if(u){var h=n[a];if(h.length===0)continue;for(var d=[o],A=0,x=h.length;A<x;A+=1){var _=this._handleRelativeValue(o,h[A]);if(isNaN(_)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(_)}u&&(n[a]=d)}if((c==="object"||l)&&o&&!u){t[a]=l?[]:{};var S=o;for(var w in S)t[a][w]=S[w];r[a]=l?[]:{};var h=n[a];if(!this._isDynamic){var C={};for(var w in h)C[w]=h[w];n[a]=h=C}this._setupProperties(S,t[a],h,r[a],s)}else(typeof t[a]>"u"||s)&&(t[a]=o),l||(t[a]*=1),u?r[a]=n[a].slice().reverse():r[a]=t[a]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},i.prototype.pause=function(e){return e===void 0&&(e=hy()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},i.prototype.resume=function(e){return e===void 0&&(e=hy()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},i.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=Ms.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=E4.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,r;if(e===void 0&&(e=hy()),t===void 0&&(t=i.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(t)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,o=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),l=this._duration+this._repeat*o,c=function(){if(n._duration===0||a>l)return 1;var _=Math.trunc(a/o),S=a-_*o,w=Math.min(S/n._duration,1);return w===0&&a===n._duration?1:w},u=c(),h=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),this._duration===0||a>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((a-this._duration)/o)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=o*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var A=0,x=this._chainedTweens.length;A<x;A++)this._chainedTweens[A].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var a=t[s]||0,o=n[s],l=Array.isArray(e[s]),c=Array.isArray(o),u=!l&&c;u?e[s]=this._interpolationFunction(o,r):typeof o=="object"&&o?this._updateProperties(e[s],a,o,r):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(e[s]=a+(o-a)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i.autoStartOnUpdate=!1,i}();vU.nextId;var _u=C4;_u.getAll.bind(_u);_u.removeAll.bind(_u);_u.add.bind(_u);_u.remove.bind(_u);_u.update.bind(_u);function ise(i){const e=+this._x.call(null,i),t=+this._y.call(null,i),n=+this._z.call(null,i);return yU(this.cover(e,t,n),e,t,n,i)}function yU(i,e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n))return i;var s,a=i._root,o={data:r},l=i._x0,c=i._y0,u=i._z0,h=i._x1,d=i._y1,A=i._z1,x,_,S,w,C,P,L,D,B,k,U;if(!a)return i._root=o,i;for(;a.length;)if((L=e>=(x=(l+h)/2))?l=x:h=x,(D=t>=(_=(c+d)/2))?c=_:d=_,(B=n>=(S=(u+A)/2))?u=S:A=S,s=a,!(a=a[k=B<<2|D<<1|L]))return s[k]=o,i;if(w=+i._x.call(null,a.data),C=+i._y.call(null,a.data),P=+i._z.call(null,a.data),e===w&&t===C&&n===P)return o.next=a,s?s[k]=o:i._root=o,i;do s=s?s[k]=new Array(8):i._root=new Array(8),(L=e>=(x=(l+h)/2))?l=x:h=x,(D=t>=(_=(c+d)/2))?c=_:d=_,(B=n>=(S=(u+A)/2))?u=S:A=S;while((k=B<<2|D<<1|L)===(U=(P>=S)<<2|(C>=_)<<1|w>=x));return s[U]=a,s[k]=o,i}function rse(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e),n=new Float64Array(e),r=new Float64Array(e);let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h=0,d,A,x,_;h<e;++h)isNaN(A=+this._x.call(null,d=i[h]))||isNaN(x=+this._y.call(null,d))||isNaN(_=+this._z.call(null,d))||(t[h]=A,n[h]=x,r[h]=_,A<s&&(s=A),A>l&&(l=A),x<a&&(a=x),x>c&&(c=x),_<o&&(o=_),_>u&&(u=_));if(s>l||a>c||o>u)return this;this.cover(s,a,o).cover(l,c,u);for(let h=0;h<e;++h)yU(this,t[h],n[h],r[h],i[h]);return this}function sse(i,e,t){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,s=this._z0,a=this._x1,o=this._y1,l=this._z1;if(isNaN(n))a=(n=Math.floor(i))+1,o=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var c=a-n||1,u=this._root,h,d;n>i||i>=a||r>e||e>=o||s>t||t>=l;)switch(d=(t<s)<<2|(e<r)<<1|i<n,h=new Array(8),h[d]=u,u=h,c*=2,d){case 0:a=n+c,o=r+c,l=s+c;break;case 1:n=a-c,o=r+c,l=s+c;break;case 2:a=n+c,r=o-c,l=s+c;break;case 3:n=a-c,r=o-c,l=s+c;break;case 4:a=n+c,o=r+c,s=l-c;break;case 5:n=a-c,o=r+c,s=l-c;break;case 6:a=n+c,r=o-c,s=l-c;break;case 7:n=a-c,r=o-c,s=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this}function ase(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function ose(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function xr(i,e,t,n,r,s,a){this.node=i,this.x0=e,this.y0=t,this.z0=n,this.x1=r,this.y1=s,this.z1=a}function lse(i,e,t,n){var r,s=this._x0,a=this._y0,o=this._z0,l,c,u,h,d,A,x=this._x1,_=this._y1,S=this._z1,w=[],C=this._root,P,L;for(C&&w.push(new xr(C,s,a,o,x,_,S)),n==null?n=1/0:(s=i-n,a=e-n,o=t-n,x=i+n,_=e+n,S=t+n,n*=n);P=w.pop();)if(!(!(C=P.node)||(l=P.x0)>x||(c=P.y0)>_||(u=P.z0)>S||(h=P.x1)<s||(d=P.y1)<a||(A=P.z1)<o))if(C.length){var D=(l+h)/2,B=(c+d)/2,k=(u+A)/2;w.push(new xr(C[7],D,B,k,h,d,A),new xr(C[6],l,B,k,D,d,A),new xr(C[5],D,c,k,h,B,A),new xr(C[4],l,c,k,D,B,A),new xr(C[3],D,B,u,h,d,k),new xr(C[2],l,B,u,D,d,k),new xr(C[1],D,c,u,h,B,k),new xr(C[0],l,c,u,D,B,k)),(L=(t>=k)<<2|(e>=B)<<1|i>=D)&&(P=w[w.length-1],w[w.length-1]=w[w.length-1-L],w[w.length-1-L]=P)}else{var U=i-+this._x.call(null,C.data),F=e-+this._y.call(null,C.data),z=t-+this._z.call(null,C.data),V=U*U+F*F+z*z;if(V<n){var W=Math.sqrt(n=V);s=i-W,a=e-W,o=t-W,x=i+W,_=e+W,S=t+W,r=C.data}}return r}const cse=(i,e,t,n,r,s)=>Math.sqrt((i-n)**2+(e-r)**2+(t-s)**2);function use(i,e,t,n){const r=[],s=i-n,a=e-n,o=t-n,l=i+n,c=e+n,u=t+n;return this.visit((h,d,A,x,_,S,w)=>{if(!h.length)do{const C=h.data;cse(i,e,t,this._x(C),this._y(C),this._z(C))<=n&&r.push(C)}while(h=h.next);return d>l||A>c||x>u||_<s||S<a||w<o}),r}function hse(i){if(isNaN(d=+this._x.call(null,i))||isNaN(A=+this._y.call(null,i))||isNaN(x=+this._z.call(null,i)))return this;var e,t=this._root,n,r,s,a=this._x0,o=this._y0,l=this._z0,c=this._x1,u=this._y1,h=this._z1,d,A,x,_,S,w,C,P,L,D,B;if(!t)return this;if(t.length)for(;;){if((C=d>=(_=(a+c)/2))?a=_:c=_,(P=A>=(S=(o+u)/2))?o=S:u=S,(L=x>=(w=(l+h)/2))?l=w:h=w,e=t,!(t=t[D=L<<2|P<<1|C]))return this;if(!t.length)break;(e[D+1&7]||e[D+2&7]||e[D+3&7]||e[D+4&7]||e[D+5&7]||e[D+6&7]||e[D+7&7])&&(n=e,B=D)}for(;t.data!==i;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[D]=s:delete e[D],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[B]=t:this._root=t),this):(this._root=s,this)}function fse(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function dse(){return this._root}function pse(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function Ase(i){var e=[],t,n=this._root,r,s,a,o,l,c,u;for(n&&e.push(new xr(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!i(n=t.node,s=t.x0,a=t.y0,o=t.z0,l=t.x1,c=t.y1,u=t.z1)&&n.length){var h=(s+l)/2,d=(a+c)/2,A=(o+u)/2;(r=n[7])&&e.push(new xr(r,h,d,A,l,c,u)),(r=n[6])&&e.push(new xr(r,s,d,A,h,c,u)),(r=n[5])&&e.push(new xr(r,h,a,A,l,d,u)),(r=n[4])&&e.push(new xr(r,s,a,A,h,d,u)),(r=n[3])&&e.push(new xr(r,h,d,o,l,c,A)),(r=n[2])&&e.push(new xr(r,s,d,o,h,c,A)),(r=n[1])&&e.push(new xr(r,h,a,o,l,d,A)),(r=n[0])&&e.push(new xr(r,s,a,o,h,d,A))}return this}function gse(i){var e=[],t=[],n;for(this._root&&e.push(new xr(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var r=n.node;if(r.length){var s,a=n.x0,o=n.y0,l=n.z0,c=n.x1,u=n.y1,h=n.z1,d=(a+c)/2,A=(o+u)/2,x=(l+h)/2;(s=r[0])&&e.push(new xr(s,a,o,l,d,A,x)),(s=r[1])&&e.push(new xr(s,d,o,l,c,A,x)),(s=r[2])&&e.push(new xr(s,a,A,l,d,u,x)),(s=r[3])&&e.push(new xr(s,d,A,l,c,u,x)),(s=r[4])&&e.push(new xr(s,a,o,x,d,A,h)),(s=r[5])&&e.push(new xr(s,d,o,x,c,A,h)),(s=r[6])&&e.push(new xr(s,a,A,x,d,u,h)),(s=r[7])&&e.push(new xr(s,d,A,x,c,u,h))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function mse(i){return i[0]}function vse(i){return arguments.length?(this._x=i,this):this._x}function yse(i){return i[1]}function xse(i){return arguments.length?(this._y=i,this):this._y}function bse(i){return i[2]}function _se(i){return arguments.length?(this._z=i,this):this._z}function xU(i,e,t,n){var r=new F6(e??mse,t??yse,n??bse,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function F6(i,e,t,n,r,s,a,o,l){this._x=i,this._y=e,this._z=t,this._x0=n,this._y0=r,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this._root=void 0}function TO(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var wa=xU.prototype=F6.prototype;wa.copy=function(){var i=new F6(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=TO(e),i;for(t=[{source:e,target:i._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(n=e.source[r])&&(n.length?t.push({source:n,target:e.target[r]=new Array(8)}):e.target[r]=TO(n));return i};wa.add=ise;wa.addAll=rse;wa.cover=sse;wa.data=ase;wa.extent=ose;wa.find=lse;wa.findAllWithinRadius=use;wa.remove=hse;wa.removeAll=fse;wa.root=dse;wa.size=pse;wa.visit=Ase;wa.visitAfter=gse;wa.x=vse;wa.y=xse;wa.z=_se;function L_(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function wse(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function bU(i){let e,t,n;i.length!==2?(e=L_,t=(o,l)=>L_(i(o),l),n=(o,l)=>i(o)-l):(e=i===L_||i===wse?i:Sse,t=i,n=i);function r(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(o[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(o[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function a(o,l,c=0,u=o.length){const h=r(o,l,c,u-1);return h>c&&n(o[h-1],l)>-n(o[h],l)?h-1:h}return{left:r,center:a,right:s}}function Sse(){return 0}function Tse(i){return i===null?NaN:+i}const Mse=bU(L_),_U=Mse.right;bU(Tse).center;function pw(i,e){let t,n;if(e===void 0)for(const r of i)r!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)));else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class Mh{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],a=e+s,o=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);o&&(t[n++]=o),e=a}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,a=0;if(t>0){for(a=e[--t];t>0&&(n=a,r=e[--t],a=n+r,s=r-(a-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=a+r,r==n-a&&(a=n))}return a}}const Ese=Math.sqrt(50),Cse=Math.sqrt(10),Rse=Math.sqrt(2);function Aw(i,e,t){const n=(e-i)/Math.max(0,t),r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r),a=s>=Ese?10:s>=Cse?5:s>=Rse?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/a,o=Math.round(i*c),l=Math.round(e*c),o/c<i&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*a,o=Math.round(i/c),l=Math.round(e/c),o*c<i&&++o,l*c>e&&--l),l<o&&.5<=t&&t<2?Aw(i,e,t*2):[o,l,c]}function Pse(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[r,s,a]=n?Aw(e,i,t):Aw(i,e,t);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(r+c)/-a;else for(let c=0;c<o;++c)l[c]=(r+c)*a;return l}function R4(i,e,t){return e=+e,i=+i,t=+t,Aw(i,e,t)[2]}function Nse(i,e,t){e=+e,i=+i,t=+t;const n=e<i,r=n?R4(e,i,t):R4(i,e,t);return(n?-1:1)*(r<0?1/-r:r)}function Lse(i,e){let t;for(const n of i)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function Dse(i,e){let t=0,n=0;if(e===void 0)for(let r of i)r!=null&&(r=+r)>=r&&(++t,n+=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*kse(i){for(const e of i)yield*e}function lx(i){return Array.from(kse(i))}function I0(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}function Ose(i,e){let t=0;for(let n of i)(n=+n)&&(t+=n);return t}function wU(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function U6(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function SU(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function t1(){}var cx=.7,gw=1/cx,Z0="\\s*([+-]?\\d+)\\s*",ux="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ise=/^#([0-9a-f]{3,8})$/,Bse=new RegExp(`^rgb\\(${Z0},${Z0},${Z0}\\)$`),Fse=new RegExp(`^rgb\\(${du},${du},${du}\\)$`),Use=new RegExp(`^rgba\\(${Z0},${Z0},${Z0},${ux}\\)$`),zse=new RegExp(`^rgba\\(${du},${du},${du},${ux}\\)$`),Gse=new RegExp(`^hsl\\(${ux},${du},${du}\\)$`),Vse=new RegExp(`^hsla\\(${ux},${du},${du},${ux}\\)$`),MO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U6(t1,jp,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:EO,formatHex:EO,formatHex8:Hse,formatHsl:qse,formatRgb:CO,toString:CO});function EO(){return this.rgb().formatHex()}function Hse(){return this.rgb().formatHex8()}function qse(){return TU(this).formatHsl()}function CO(){return this.rgb().formatRgb()}function jp(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Ise.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?RO(e):t===3?new xo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?_2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?_2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Bse.exec(i))?new xo(e[1],e[2],e[3],1):(e=Fse.exec(i))?new xo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Use.exec(i))?_2(e[1],e[2],e[3],e[4]):(e=zse.exec(i))?_2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Gse.exec(i))?LO(e[1],e[2]/100,e[3]/100,1):(e=Vse.exec(i))?LO(e[1],e[2]/100,e[3]/100,e[4]):MO.hasOwnProperty(i)?RO(MO[i]):i==="transparent"?new xo(NaN,NaN,NaN,0):null}function RO(i){return new xo(i>>16&255,i>>8&255,i&255,1)}function _2(i,e,t,n){return n<=0&&(i=e=t=NaN),new xo(i,e,t,n)}function Wse(i){return i instanceof t1||(i=jp(i)),i?(i=i.rgb(),new xo(i.r,i.g,i.b,i.opacity)):new xo}function P4(i,e,t,n){return arguments.length===1?Wse(i):new xo(i,e,t,n??1)}function xo(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}U6(xo,P4,SU(t1,{brighter(i){return i=i==null?gw:Math.pow(gw,i),new xo(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?cx:Math.pow(cx,i),new xo(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new xo(Lp(this.r),Lp(this.g),Lp(this.b),mw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PO,formatHex:PO,formatHex8:jse,formatRgb:NO,toString:NO}));function PO(){return`#${bp(this.r)}${bp(this.g)}${bp(this.b)}`}function jse(){return`#${bp(this.r)}${bp(this.g)}${bp(this.b)}${bp((isNaN(this.opacity)?1:this.opacity)*255)}`}function NO(){const i=mw(this.opacity);return`${i===1?"rgb(":"rgba("}${Lp(this.r)}, ${Lp(this.g)}, ${Lp(this.b)}${i===1?")":`, ${i})`}`}function mw(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Lp(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function bp(i){return i=Lp(i),(i<16?"0":"")+i.toString(16)}function LO(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new yc(i,e,t,n)}function TU(i){if(i instanceof yc)return new yc(i.h,i.s,i.l,i.opacity);if(i instanceof t1||(i=jp(i)),!i)return new yc;if(i instanceof yc)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),a=NaN,o=s-r,l=(s+r)/2;return o?(e===s?a=(t-n)/o+(t<n)*6:t===s?a=(n-e)/o+2:a=(e-t)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new yc(a,o,l,i.opacity)}function Xse(i,e,t,n){return arguments.length===1?TU(i):new yc(i,e,t,n??1)}function yc(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}U6(yc,Xse,SU(t1,{brighter(i){return i=i==null?gw:Math.pow(gw,i),new yc(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?cx:Math.pow(cx,i),new yc(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new xo(AE(i>=240?i-240:i+120,r,n),AE(i,r,n),AE(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new yc(DO(this.h),w2(this.s),w2(this.l),mw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=mw(this.opacity);return`${i===1?"hsl(":"hsla("}${DO(this.h)}, ${w2(this.s)*100}%, ${w2(this.l)*100}%${i===1?")":`, ${i})`}`}}));function DO(i){return i=(i||0)%360,i<0?i+360:i}function w2(i){return Math.max(0,Math.min(1,i||0))}function AE(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const z6=i=>()=>i;function Yse(i,e){return function(t){return i+t*e}}function $se(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function Qse(i){return(i=+i)==1?MU:function(e,t){return t-e?$se(e,t,i):z6(isNaN(e)?t:e)}}function MU(i,e){var t=e-i;return t?Yse(i,t):z6(isNaN(i)?e:i)}const kO=function i(e){var t=Qse(e);function n(r,s){var a=t((r=P4(r)).r,(s=P4(s)).r),o=t(r.g,s.g),l=t(r.b,s.b),c=MU(r.opacity,s.opacity);return function(u){return r.r=a(u),r.g=o(u),r.b=l(u),r.opacity=c(u),r+""}}return n.gamma=i,n}(1);function EU(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),r;return function(s){for(r=0;r<t;++r)n[r]=i[r]*(1-s)+e[r]*s;return n}}function CU(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Zse(i,e){return(CU(e)?EU:RU)(i,e)}function RU(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,r=new Array(n),s=new Array(t),a;for(a=0;a<n;++a)r[a]=G6(i[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=r[a](o);return s}}function Kse(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function hx(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Jse(i,e){var t={},n={},r;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in i?t[r]=G6(i[r],e[r]):n[r]=e[r];return function(s){for(r in t)n[r]=t[r](s);return n}}var N4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gE=new RegExp(N4.source,"g");function eae(i){return function(){return i}}function tae(i){return function(e){return i(e)+""}}function nae(i,e){var t=N4.lastIndex=gE.lastIndex=0,n,r,s,a=-1,o=[],l=[];for(i=i+"",e=e+"";(n=N4.exec(i))&&(r=gE.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:hx(n,r)})),t=gE.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?tae(l[0].x):eae(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}function G6(i,e){var t=typeof e,n;return e==null||t==="boolean"?z6(e):(t==="number"?hx:t==="string"?(n=jp(e))?(e=n,kO):nae:e instanceof jp?kO:e instanceof Date?Kse:CU(e)?EU:Array.isArray(e)?RU:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Jse:hx)(i,e)}function iae(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function rae(i){return function(){return i}}function sae(i){return+i}var OO=[0,1];function B0(i){return i}function L4(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:rae(isNaN(e)?NaN:.5)}function aae(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function oae(i,e,t){var n=i[0],r=i[1],s=e[0],a=e[1];return r<n?(n=L4(r,n),s=t(a,s)):(n=L4(n,r),s=t(s,a)),function(o){return s(n(o))}}function lae(i,e,t){var n=Math.min(i.length,e.length)-1,r=new Array(n),s=new Array(n),a=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++a<n;)r[a]=L4(i[a],i[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var l=_U(i,o,1,n)-1;return s[l](r[l](o))}}function cae(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function uae(){var i=OO,e=OO,t=G6,n,r,s,a=B0,o,l,c;function u(){var d=Math.min(i.length,e.length);return a!==B0&&(a=aae(i[0],i[d-1])),o=d>2?lae:oae,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?s:(l||(l=o(i.map(n),e,t)))(n(a(d)))}return h.invert=function(d){return a(r((c||(c=o(e,i.map(n),hx)))(d)))},h.domain=function(d){return arguments.length?(i=Array.from(d,sae),u()):i.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),t=iae,u()},h.clamp=function(d){return arguments.length?(a=d?!0:B0,u()):a!==B0},h.interpolate=function(d){return arguments.length?(t=d,u()):t},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,A){return n=d,r=A,u()}}function hae(){return uae()(B0,B0)}function fae(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function vw(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function Pg(i){return i=vw(Math.abs(i)),i?i[1]:NaN}function dae(i,e){return function(t,n){for(var r=t.length,s=[],a=0,o=i[0],l=0;r>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(t.substring(r-=o,r+o)),!((l+=o+1)>n));)o=i[a=(a+1)%i.length];return s.reverse().join(e)}}function pae(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var Aae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yw(i){if(!(e=Aae.exec(i)))throw new Error("invalid format: "+i);var e;return new V6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}yw.prototype=V6.prototype;function V6(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}V6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gae(i){e:for(var e=i.length,t=1,n=-1,r;t<e;++t)switch(i[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var PU;function mae(i,e){var t=vw(i,e);if(!t)return i+"";var n=t[0],r=t[1],s=r-(PU=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+vw(i,Math.max(0,e+s-1))[0]}function IO(i,e){var t=vw(i,e);if(!t)return i+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const BO={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:fae,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>IO(i*100,e),r:IO,s:mae,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function FO(i){return i}var UO=Array.prototype.map,zO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vae(i){var e=i.grouping===void 0||i.thousands===void 0?FO:dae(UO.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?FO:pae(UO.call(i.numerals,String)),a=i.percent===void 0?"%":i.percent+"",o=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(h){h=yw(h);var d=h.fill,A=h.align,x=h.sign,_=h.symbol,S=h.zero,w=h.width,C=h.comma,P=h.precision,L=h.trim,D=h.type;D==="n"?(C=!0,D="g"):BO[D]||(P===void 0&&(P=12),L=!0,D="g"),(S||d==="0"&&A==="=")&&(S=!0,d="0",A="=");var B=_==="$"?t:_==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",k=_==="$"?n:/[%p]/.test(D)?a:"",U=BO[D],F=/[defgprs%]/.test(D);P=P===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function z(V){var W=B,X=k,J,K,Y;if(D==="c")X=U(V)+X,V="";else{V=+V;var ee=V<0||1/V<0;if(V=isNaN(V)?l:U(Math.abs(V),P),L&&(V=gae(V)),ee&&+V==0&&x!=="+"&&(ee=!1),W=(ee?x==="("?x:o:x==="-"||x==="("?"":x)+W,X=(D==="s"?zO[8+PU/3]:"")+X+(ee&&x==="("?")":""),F){for(J=-1,K=V.length;++J<K;)if(Y=V.charCodeAt(J),48>Y||Y>57){X=(Y===46?r+V.slice(J+1):V.slice(J))+X,V=V.slice(0,J);break}}}C&&!S&&(V=e(V,1/0));var se=W.length+V.length+X.length,fe=se<w?new Array(w-se+1).join(d):"";switch(C&&S&&(V=e(fe+V,fe.length?w-X.length:1/0),fe=""),A){case"<":V=W+V+X+fe;break;case"=":V=W+fe+V+X;break;case"^":V=fe.slice(0,se=fe.length>>1)+W+V+X+fe.slice(se);break;default:V=fe+W+V+X;break}return s(V)}return z.toString=function(){return h+""},z}function u(h,d){var A=c((h=yw(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Pg(d)/3)))*3,_=Math.pow(10,-x),S=zO[8+x/3];return function(w){return A(_*w)+S}}return{format:c,formatPrefix:u}}var S2,NU,LU;yae({thousands:",",grouping:[3],currency:["$",""]});function yae(i){return S2=vae(i),NU=S2.format,LU=S2.formatPrefix,S2}function xae(i){return Math.max(0,-Pg(Math.abs(i)))}function bae(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pg(e)/3)))*3-Pg(Math.abs(i)))}function _ae(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,Pg(e)-Pg(i))+1}function wae(i,e,t,n){var r=Nse(i,e,t),s;switch(n=yw(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=bae(r,a))&&(n.precision=s),LU(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=_ae(r,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=xae(r))&&(n.precision=s-(n.type==="%")*2);break}}return NU(n)}function DU(i){var e=i.domain;return i.ticks=function(t){var n=e();return Pse(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var r=e();return wae(r[0],r[r.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),r=0,s=n.length-1,a=n[r],o=n[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=r,r=s,s=c);u-- >0;){if(c=R4(a,o,t),c===l)return n[r]=a,n[s]=o,e(n);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return i},i}function Lh(){var i=hae();return i.copy=function(){return cae(i,Lh())},wU.apply(i,arguments),DU(i)}function kU(){var i=0,e=1,t=1,n=[.5],r=[0,1],s;function a(l){return l!=null&&l<=l?r[_U(n,l,0,t)]:s}function o(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return a}return a.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,o()):[i,e]},a.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,o()):r.slice()},a.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[i,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return kU().domain([i,e]).range(r).unknown(s)},wU.apply(DU(a),arguments)}var _i=1e-6,xw=1e-12,Fi=Math.PI,bo=Fi/2,bw=Fi/4,ol=Fi*2,ns=180/Fi,Jn=Fi/180,Ar=Math.abs,H6=Math.atan,ql=Math.atan2,li=Math.cos,T2=Math.ceil,Sae=Math.exp,D4=Math.hypot,Tae=Math.log,jn=Math.sin,Mae=Math.sign||function(i){return i>0?1:i<0?-1:0},Dh=Math.sqrt,Eae=Math.tan;function Cae(i){return i>1?0:i<-1?Fi:Math.acos(i)}function kh(i){return i>1?bo:i<-1?-bo:Math.asin(i)}function GO(i){return(i=jn(i/2))*i}function Oa(){}function _w(i,e){i&&HO.hasOwnProperty(i.type)&&HO[i.type](i,e)}var VO={Feature:function(i,e){_w(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)_w(t[n].geometry,e)}},HO={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){k4(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)k4(t[n],e,0)},Polygon:function(i,e){qO(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)qO(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)_w(t[n],e)}};function k4(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function qO(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)k4(i[t],e,1);e.polygonEnd()}function HS(i,e){i&&VO.hasOwnProperty(i.type)?VO[i.type](i,e):_w(i,e)}var ww=new Mh,WO=new Mh,OU,IU,O4,I4,B4,Oh={point:Oa,lineStart:Oa,lineEnd:Oa,polygonStart:function(){ww=new Mh,Oh.lineStart=Rae,Oh.lineEnd=Pae},polygonEnd:function(){var i=+ww;WO.add(i<0?ol+i:i),this.lineStart=this.lineEnd=this.point=Oa},sphere:function(){WO.add(ol)}};function Rae(){Oh.point=Nae}function Pae(){BU(OU,IU)}function Nae(i,e){Oh.point=BU,OU=i,IU=e,i*=Jn,e*=Jn,O4=i,I4=li(e=e/2+bw),B4=jn(e)}function BU(i,e){i*=Jn,e*=Jn,e=e/2+bw;var t=i-O4,n=t>=0?1:-1,r=n*t,s=li(e),a=jn(e),o=B4*a,l=I4*s+o*li(r),c=o*n*jn(r);ww.add(ql(c,l)),O4=i,I4=s,B4=a}function Sw(i){return[ql(i[1],i[0]),kh(i[2])]}function Xp(i){var e=i[0],t=i[1],n=li(t);return[n*li(e),n*jn(e),jn(t)]}function M2(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Ng(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function mE(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function E2(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function Tw(i){var e=Dh(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var jr,mo,es,Jo,ap,FU,UU,K0,My,Hf,Ih,gh={point:F4,lineStart:jO,lineEnd:XO,polygonStart:function(){gh.point=GU,gh.lineStart=Lae,gh.lineEnd=Dae,My=new Mh,Oh.polygonStart()},polygonEnd:function(){Oh.polygonEnd(),gh.point=F4,gh.lineStart=jO,gh.lineEnd=XO,ww<0?(jr=-(es=180),mo=-(Jo=90)):My>_i?Jo=90:My<-_i&&(mo=-90),Ih[0]=jr,Ih[1]=es},sphere:function(){jr=-(es=180),mo=-(Jo=90)}};function F4(i,e){Hf.push(Ih=[jr=i,es=i]),e<mo&&(mo=e),e>Jo&&(Jo=e)}function zU(i,e){var t=Xp([i*Jn,e*Jn]);if(K0){var n=Ng(K0,t),r=[n[1],-n[0],0],s=Ng(r,n);Tw(s),s=Sw(s);var a=i-ap,o=a>0?1:-1,l=s[0]*ns*o,c,u=Ar(a)>180;u^(o*ap<l&&l<o*i)?(c=s[1]*ns,c>Jo&&(Jo=c)):(l=(l+360)%360-180,u^(o*ap<l&&l<o*i)?(c=-s[1]*ns,c<mo&&(mo=c)):(e<mo&&(mo=e),e>Jo&&(Jo=e))),u?i<ap?Qo(jr,i)>Qo(jr,es)&&(es=i):Qo(i,es)>Qo(jr,es)&&(jr=i):es>=jr?(i<jr&&(jr=i),i>es&&(es=i)):i>ap?Qo(jr,i)>Qo(jr,es)&&(es=i):Qo(i,es)>Qo(jr,es)&&(jr=i)}else Hf.push(Ih=[jr=i,es=i]);e<mo&&(mo=e),e>Jo&&(Jo=e),K0=t,ap=i}function jO(){gh.point=zU}function XO(){Ih[0]=jr,Ih[1]=es,gh.point=F4,K0=null}function GU(i,e){if(K0){var t=i-ap;My.add(Ar(t)>180?t+(t>0?360:-360):t)}else FU=i,UU=e;Oh.point(i,e),zU(i,e)}function Lae(){Oh.lineStart()}function Dae(){GU(FU,UU),Oh.lineEnd(),Ar(My)>_i&&(jr=-(es=180)),Ih[0]=jr,Ih[1]=es,K0=null}function Qo(i,e){return(e-=i)<0?e+360:e}function kae(i,e){return i[0]-e[0]}function YO(i,e){return i[0]<=i[1]?i[0]<=e&&e<=i[1]:e<i[0]||i[1]<e}function VU(i){var e,t,n,r,s,a,o;if(Jo=es=-(jr=mo=1/0),Hf=[],HS(i,gh),t=Hf.length){for(Hf.sort(kae),e=1,n=Hf[0],s=[n];e<t;++e)r=Hf[e],YO(n,r[0])||YO(n,r[1])?(Qo(n[0],r[1])>Qo(n[0],n[1])&&(n[1]=r[1]),Qo(r[0],n[1])>Qo(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(a=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=r,++e)r=s[e],(o=Qo(n[1],r[0]))>a&&(a=o,jr=r[0],es=n[1])}return Hf=Ih=null,jr===1/0||mo===1/0?[[NaN,NaN],[NaN,NaN]]:[[jr,mo],[es,Jo]]}var fy,Mw,Ew,Cw,Rw,Pw,Nw,Lw,U4,z4,G4,HU,qU,Ya,$a,Qa,_c={sphere:Oa,point:q6,lineStart:$O,lineEnd:QO,polygonStart:function(){_c.lineStart=Bae,_c.lineEnd=Fae},polygonEnd:function(){_c.lineStart=$O,_c.lineEnd=QO}};function q6(i,e){i*=Jn,e*=Jn;var t=li(e);n1(t*li(i),t*jn(i),jn(e))}function n1(i,e,t){++fy,Ew+=(i-Ew)/fy,Cw+=(e-Cw)/fy,Rw+=(t-Rw)/fy}function $O(){_c.point=Oae}function Oae(i,e){i*=Jn,e*=Jn;var t=li(e);Ya=t*li(i),$a=t*jn(i),Qa=jn(e),_c.point=Iae,n1(Ya,$a,Qa)}function Iae(i,e){i*=Jn,e*=Jn;var t=li(e),n=t*li(i),r=t*jn(i),s=jn(e),a=ql(Dh((a=$a*s-Qa*r)*a+(a=Qa*n-Ya*s)*a+(a=Ya*r-$a*n)*a),Ya*n+$a*r+Qa*s);Mw+=a,Pw+=a*(Ya+(Ya=n)),Nw+=a*($a+($a=r)),Lw+=a*(Qa+(Qa=s)),n1(Ya,$a,Qa)}function QO(){_c.point=q6}function Bae(){_c.point=Uae}function Fae(){WU(HU,qU),_c.point=q6}function Uae(i,e){HU=i,qU=e,i*=Jn,e*=Jn,_c.point=WU;var t=li(e);Ya=t*li(i),$a=t*jn(i),Qa=jn(e),n1(Ya,$a,Qa)}function WU(i,e){i*=Jn,e*=Jn;var t=li(e),n=t*li(i),r=t*jn(i),s=jn(e),a=$a*s-Qa*r,o=Qa*n-Ya*s,l=Ya*r-$a*n,c=D4(a,o,l),u=kh(c),h=c&&-u/c;U4.add(h*a),z4.add(h*o),G4.add(h*l),Mw+=u,Pw+=u*(Ya+(Ya=n)),Nw+=u*($a+($a=r)),Lw+=u*(Qa+(Qa=s)),n1(Ya,$a,Qa)}function ZO(i){fy=Mw=Ew=Cw=Rw=Pw=Nw=Lw=0,U4=new Mh,z4=new Mh,G4=new Mh,HS(i,_c);var e=+U4,t=+z4,n=+G4,r=D4(e,t,n);return r<xw&&(e=Pw,t=Nw,n=Lw,Mw<_i&&(e=Ew,t=Cw,n=Rw),r=D4(e,t,n),r<xw)?[NaN,NaN]:[ql(t,e)*ns,kh(n/r)*ns]}function V4(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function H4(i,e){return Ar(i)>Fi&&(i-=Math.round(i/ol)*ol),[i,e]}H4.invert=H4;function jU(i,e,t){return(i%=ol)?e||t?V4(JO(i),e7(e,t)):JO(i):e||t?e7(e,t):H4}function KO(i){return function(e,t){return e+=i,Ar(e)>Fi&&(e-=Math.round(e/ol)*ol),[e,t]}}function JO(i){var e=KO(i);return e.invert=KO(-i),e}function e7(i,e){var t=li(i),n=jn(i),r=li(e),s=jn(e);function a(o,l){var c=li(l),u=li(o)*c,h=jn(o)*c,d=jn(l),A=d*t+u*n;return[ql(h*r-A*s,u*t-d*n),kh(A*r+h*s)]}return a.invert=function(o,l){var c=li(l),u=li(o)*c,h=jn(o)*c,d=jn(l),A=d*r-h*s;return[ql(h*r+d*s,u*t+A*n),kh(A*t-u*n)]},a}function zae(i){i=jU(i[0]*Jn,i[1]*Jn,i.length>2?i[2]*Jn:0);function e(t){return t=i(t[0]*Jn,t[1]*Jn),t[0]*=ns,t[1]*=ns,t}return e.invert=function(t){return t=i.invert(t[0]*Jn,t[1]*Jn),t[0]*=ns,t[1]*=ns,t},e}function Gae(i,e,t,n,r,s){if(t){var a=li(e),o=jn(e),l=n*t;r==null?(r=e+n*ol,s=e-l/2):(r=t7(a,r),s=t7(a,s),(n>0?r<s:r>s)&&(r+=n*ol));for(var c,u=r;n>0?u>s:u<s;u-=l)c=Sw([a,-o*li(u),-o*jn(u)]),i.point(c[0],c[1])}}function t7(i,e){e=Xp(e),e[0]-=i,Tw(e);var t=Cae(-e[1]);return((-e[2]<0?-t:t)+ol-_i)%ol}function XU(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:Oa,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function D_(i,e){return Ar(i[0]-e[0])<_i&&Ar(i[1]-e[1])<_i}function C2(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function YU(i,e,t,n,r){var s=[],a=[],o,l;if(i.forEach(function(x){if(!((_=x.length-1)<=0)){var _,S=x[0],w=x[_],C;if(D_(S,w)){if(!S[2]&&!w[2]){for(r.lineStart(),o=0;o<_;++o)r.point((S=x[o])[0],S[1]);r.lineEnd();return}w[0]+=2*_i}s.push(C=new C2(S,x,null,!0)),a.push(C.o=new C2(S,null,C,!1)),s.push(C=new C2(w,x,null,!1)),a.push(C.o=new C2(w,null,C,!0))}}),!!s.length){for(a.sort(e),n7(s),n7(a),o=0,l=a.length;o<l;++o)a[o].e=t=!t;for(var c=s[0],u,h;;){for(var d=c,A=!0;d.v;)if((d=d.n)===c)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(A)for(o=0,l=u.length;o<l;++o)r.point((h=u[o])[0],h[1]);else n(d.x,d.n.x,1,r);d=d.n}else{if(A)for(u=d.p.z,o=u.length-1;o>=0;--o)r.point((h=u[o])[0],h[1]);else n(d.x,d.p.x,-1,r);d=d.p}d=d.o,u=d.z,A=!A}while(!d.v);r.lineEnd()}}}function n7(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function vE(i){return Ar(i[0])<=Fi?i[0]:Mae(i[0])*((Ar(i[0])+Fi)%ol-Fi)}function $U(i,e){var t=vE(e),n=e[1],r=jn(n),s=[jn(t),-li(t),0],a=0,o=0,l=new Mh;r===1?n=bo+_i:r===-1&&(n=-bo-_i);for(var c=0,u=i.length;c<u;++c)if(d=(h=i[c]).length)for(var h,d,A=h[d-1],x=vE(A),_=A[1]/2+bw,S=jn(_),w=li(_),C=0;C<d;++C,x=L,S=B,w=k,A=P){var P=h[C],L=vE(P),D=P[1]/2+bw,B=jn(D),k=li(D),U=L-x,F=U>=0?1:-1,z=F*U,V=z>Fi,W=S*B;if(l.add(ql(W*F*jn(z),w*k+W*li(z))),a+=V?U+F*ol:U,V^x>=t^L>=t){var X=Ng(Xp(A),Xp(P));Tw(X);var J=Ng(s,X);Tw(J);var K=(V^U>=0?-1:1)*kh(J[2]);(n>K||n===K&&(X[0]||X[1]))&&(o+=V^U>=0?1:-1)}}return(a<-_i||a<_i&&l<-xw)^o&1}function QU(i,e,t,n){return function(r){var s=e(r),a=XU(),o=e(a),l=!1,c,u,h,d={point:A,lineStart:_,lineEnd:S,polygonStart:function(){d.point=w,d.lineStart=C,d.lineEnd=P,u=[],c=[]},polygonEnd:function(){d.point=A,d.lineStart=_,d.lineEnd=S,u=lx(u);var L=$U(c,n);u.length?(l||(r.polygonStart(),l=!0),YU(u,Hae,L,t,r)):L&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function A(L,D){i(L,D)&&r.point(L,D)}function x(L,D){s.point(L,D)}function _(){d.point=x,s.lineStart()}function S(){d.point=A,s.lineEnd()}function w(L,D){h.push([L,D]),o.point(L,D)}function C(){o.lineStart(),h=[]}function P(){w(h[0][0],h[0][1]),o.lineEnd();var L=o.clean(),D=a.result(),B,k=D.length,U,F,z;if(h.pop(),c.push(h),h=null,!!k){if(L&1){if(F=D[0],(U=F.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),B=0;B<U;++B)r.point((z=F[B])[0],z[1]);r.lineEnd()}return}k>1&&L&2&&D.push(D.pop().concat(D.shift())),u.push(D.filter(Vae))}}return d}}function Vae(i){return i.length>1}function Hae(i,e){return((i=i.x)[0]<0?i[1]-bo-_i:bo-i[1])-((e=e.x)[0]<0?e[1]-bo-_i:bo-e[1])}const i7=QU(function(){return!0},qae,jae,[-Fi,-bo]);function qae(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,a){var o=s>0?Fi:-Fi,l=Ar(s-e);Ar(l-Fi)<_i?(i.point(e,t=(t+a)/2>0?bo:-bo),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),i.point(s,t),r=0):n!==o&&l>=Fi&&(Ar(e-n)<_i&&(e-=n*_i),Ar(s-o)<_i&&(s-=o*_i),t=Wae(e,t,s,a),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),r=0),i.point(e=s,t=a),n=o},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function Wae(i,e,t,n){var r,s,a=jn(i-t);return Ar(a)>_i?H6((jn(e)*(s=li(n))*jn(t)-jn(n)*(r=li(e))*jn(i))/(r*s*a)):(e+n)/2}function jae(i,e,t,n){var r;if(i==null)r=t*bo,n.point(-Fi,r),n.point(0,r),n.point(Fi,r),n.point(Fi,0),n.point(Fi,-r),n.point(0,-r),n.point(-Fi,-r),n.point(-Fi,0),n.point(-Fi,r);else if(Ar(i[0]-e[0])>_i){var s=i[0]<e[0]?Fi:-Fi;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function Xae(i){var e=li(i),t=2*Jn,n=e>0,r=Ar(e)>_i;function s(u,h,d,A){Gae(A,i,t,d,u,h)}function a(u,h){return li(u)*li(h)>e}function o(u){var h,d,A,x,_;return{lineStart:function(){x=A=!1,_=1},point:function(S,w){var C=[S,w],P,L=a(S,w),D=n?L?0:c(S,w):L?c(S+(S<0?Fi:-Fi),w):0;if(!h&&(x=A=L)&&u.lineStart(),L!==A&&(P=l(h,C),(!P||D_(h,P)||D_(C,P))&&(C[2]=1)),L!==A)_=0,L?(u.lineStart(),P=l(C,h),u.point(P[0],P[1])):(P=l(h,C),u.point(P[0],P[1],2),u.lineEnd()),h=P;else if(r&&h&&n^L){var B;!(D&d)&&(B=l(C,h,!0))&&(_=0,n?(u.lineStart(),u.point(B[0][0],B[0][1]),u.point(B[1][0],B[1][1]),u.lineEnd()):(u.point(B[1][0],B[1][1]),u.lineEnd(),u.lineStart(),u.point(B[0][0],B[0][1],3)))}L&&(!h||!D_(h,C))&&u.point(C[0],C[1]),h=C,A=L,d=D},lineEnd:function(){A&&u.lineEnd(),h=null},clean:function(){return _|(x&&A)<<1}}}function l(u,h,d){var A=Xp(u),x=Xp(h),_=[1,0,0],S=Ng(A,x),w=M2(S,S),C=S[0],P=w-C*C;if(!P)return!d&&u;var L=e*w/P,D=-e*C/P,B=Ng(_,S),k=E2(_,L),U=E2(S,D);mE(k,U);var F=B,z=M2(k,F),V=M2(F,F),W=z*z-V*(M2(k,k)-1);if(!(W<0)){var X=Dh(W),J=E2(F,(-z-X)/V);if(mE(J,k),J=Sw(J),!d)return J;var K=u[0],Y=h[0],ee=u[1],se=h[1],fe;Y<K&&(fe=K,K=Y,Y=fe);var ne=Y-K,he=Ar(ne-Fi)<_i,Te=he||ne<_i;if(!he&&se<ee&&(fe=ee,ee=se,se=fe),Te?he?ee+se>0^J[1]<(Ar(J[0]-K)<_i?ee:se):ee<=J[1]&&J[1]<=se:ne>Fi^(K<=J[0]&&J[0]<=Y)){var Pe=E2(F,(-z+X)/V);return mE(Pe,k),[J,Sw(Pe)]}}}function c(u,h){var d=n?i:Fi-i,A=0;return u<-d?A|=1:u>d&&(A|=2),h<-d?A|=4:h>d&&(A|=8),A}return QU(a,o,s,n?[0,-i]:[-Fi,i-Fi])}function Yae(i,e,t,n,r,s){var a=i[0],o=i[1],l=e[0],c=e[1],u=0,h=1,d=l-a,A=c-o,x;if(x=t-a,!(!d&&x>0)){if(x/=d,d<0){if(x<u)return;x<h&&(h=x)}else if(d>0){if(x>h)return;x>u&&(u=x)}if(x=r-a,!(!d&&x<0)){if(x/=d,d<0){if(x>h)return;x>u&&(u=x)}else if(d>0){if(x<u)return;x<h&&(h=x)}if(x=n-o,!(!A&&x>0)){if(x/=A,A<0){if(x<u)return;x<h&&(h=x)}else if(A>0){if(x>h)return;x>u&&(u=x)}if(x=s-o,!(!A&&x<0)){if(x/=A,A<0){if(x>h)return;x>u&&(u=x)}else if(A>0){if(x<u)return;x<h&&(h=x)}return u>0&&(i[0]=a+u*d,i[1]=o+u*A),h<1&&(e[0]=a+h*d,e[1]=o+h*A),!0}}}}}var dy=1e9,R2=-dy;function $ae(i,e,t,n){function r(c,u){return i<=c&&c<=t&&e<=u&&u<=n}function s(c,u,h,d){var A=0,x=0;if(c==null||(A=a(c,h))!==(x=a(u,h))||l(c,u)<0^h>0)do d.point(A===0||A===3?i:t,A>1?n:e);while((A=(A+h+4)%4)!==x);else d.point(u[0],u[1])}function a(c,u){return Ar(c[0]-i)<_i?u>0?0:3:Ar(c[0]-t)<_i?u>0?2:1:Ar(c[1]-e)<_i?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var h=a(c,1),d=a(u,1);return h!==d?h-d:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=XU(),d,A,x,_,S,w,C,P,L,D,B,k={point:U,lineStart:W,lineEnd:X,polygonStart:z,polygonEnd:V};function U(K,Y){r(K,Y)&&u.point(K,Y)}function F(){for(var K=0,Y=0,ee=A.length;Y<ee;++Y)for(var se=A[Y],fe=1,ne=se.length,he=se[0],Te,Pe,_e=he[0],Ie=he[1];fe<ne;++fe)Te=_e,Pe=Ie,he=se[fe],_e=he[0],Ie=he[1],Pe<=n?Ie>n&&(_e-Te)*(n-Pe)>(Ie-Pe)*(i-Te)&&++K:Ie<=n&&(_e-Te)*(n-Pe)<(Ie-Pe)*(i-Te)&&--K;return K}function z(){u=h,d=[],A=[],B=!0}function V(){var K=F(),Y=B&&K,ee=(d=lx(d)).length;(Y||ee)&&(c.polygonStart(),Y&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),ee&&YU(d,o,K,s,c),c.polygonEnd()),u=c,d=A=x=null}function W(){k.point=J,A&&A.push(x=[]),D=!0,L=!1,C=P=NaN}function X(){d&&(J(_,S),w&&L&&h.rejoin(),d.push(h.result())),k.point=U,L&&u.lineEnd()}function J(K,Y){var ee=r(K,Y);if(A&&x.push([K,Y]),D)_=K,S=Y,w=ee,D=!1,ee&&(u.lineStart(),u.point(K,Y));else if(ee&&L)u.point(K,Y);else{var se=[C=Math.max(R2,Math.min(dy,C)),P=Math.max(R2,Math.min(dy,P))],fe=[K=Math.max(R2,Math.min(dy,K)),Y=Math.max(R2,Math.min(dy,Y))];Yae(se,fe,i,e,t,n)?(L||(u.lineStart(),u.point(se[0],se[1])),u.point(fe[0],fe[1]),ee||u.lineEnd(),B=!1):ee&&(u.lineStart(),u.point(K,Y),B=!1)}C=K,P=Y,L=ee}return k}}var q4,W4,k_,O_,Lg={sphere:Oa,point:Oa,lineStart:Qae,lineEnd:Oa,polygonStart:Oa,polygonEnd:Oa};function Qae(){Lg.point=Kae,Lg.lineEnd=Zae}function Zae(){Lg.point=Lg.lineEnd=Oa}function Kae(i,e){i*=Jn,e*=Jn,W4=i,k_=jn(e),O_=li(e),Lg.point=Jae}function Jae(i,e){i*=Jn,e*=Jn;var t=jn(e),n=li(e),r=Ar(i-W4),s=li(r),a=jn(r),o=n*a,l=O_*t-k_*n*s,c=k_*t+O_*n*s;q4.add(ql(Dh(o*o+l*l),c)),W4=i,k_=t,O_=n}function eoe(i){return q4=new Mh,HS(i,Lg),+q4}var j4=[null,null],toe={type:"LineString",coordinates:j4};function ud(i,e){return j4[0]=i,j4[1]=e,eoe(toe)}var r7={Feature:function(i,e){return Dw(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)if(Dw(t[n].geometry,e))return!0;return!1}},s7={Sphere:function(){return!0},Point:function(i,e){return a7(i.coordinates,e)},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(a7(t[n],e))return!0;return!1},LineString:function(i,e){return o7(i.coordinates,e)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(o7(t[n],e))return!0;return!1},Polygon:function(i,e){return l7(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(l7(t[n],e))return!0;return!1},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)if(Dw(t[n],e))return!0;return!1}};function Dw(i,e){return i&&s7.hasOwnProperty(i.type)?s7[i.type](i,e):!1}function a7(i,e){return ud(i,e)===0}function o7(i,e){for(var t,n,r,s=0,a=i.length;s<a;s++){if(n=ud(i[s],e),n===0||s>0&&(r=ud(i[s],i[s-1]),r>0&&t<=r&&n<=r&&(t+n-r)*(1-Math.pow((t-n)/r,2))<xw*r))return!0;t=n}return!1}function l7(i,e){return!!$U(i.map(noe),ZU(e))}function noe(i){return i=i.map(ZU),i.pop(),i}function ZU(i){return[i[0]*Jn,i[1]*Jn]}function ioe(i,e){return(i&&r7.hasOwnProperty(i.type)?r7[i.type]:Dw)(i,e)}function c7(i,e,t){var n=I0(i,e-_i,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function u7(i,e,t){var n=I0(i,e-_i,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function roe(){var i,e,t,n,r,s,a,o,l=10,c=l,u=90,h=360,d,A,x,_,S=2.5;function w(){return{type:"MultiLineString",coordinates:C()}}function C(){return I0(T2(n/u)*u,t,u).map(x).concat(I0(T2(o/h)*h,a,h).map(_)).concat(I0(T2(e/l)*l,i,l).filter(function(P){return Ar(P%u)>_i}).map(d)).concat(I0(T2(s/c)*c,r,c).filter(function(P){return Ar(P%h)>_i}).map(A))}return w.lines=function(){return C().map(function(P){return{type:"LineString",coordinates:P}})},w.outline=function(){return{type:"Polygon",coordinates:[x(n).concat(_(a).slice(1),x(t).reverse().slice(1),_(o).reverse().slice(1))]}},w.extent=function(P){return arguments.length?w.extentMajor(P).extentMinor(P):w.extentMinor()},w.extentMajor=function(P){return arguments.length?(n=+P[0][0],t=+P[1][0],o=+P[0][1],a=+P[1][1],n>t&&(P=n,n=t,t=P),o>a&&(P=o,o=a,a=P),w.precision(S)):[[n,o],[t,a]]},w.extentMinor=function(P){return arguments.length?(e=+P[0][0],i=+P[1][0],s=+P[0][1],r=+P[1][1],e>i&&(P=e,e=i,i=P),s>r&&(P=s,s=r,r=P),w.precision(S)):[[e,s],[i,r]]},w.step=function(P){return arguments.length?w.stepMajor(P).stepMinor(P):w.stepMinor()},w.stepMajor=function(P){return arguments.length?(u=+P[0],h=+P[1],w):[u,h]},w.stepMinor=function(P){return arguments.length?(l=+P[0],c=+P[1],w):[l,c]},w.precision=function(P){return arguments.length?(S=+P,d=c7(s,r,90),A=u7(e,i,S),x=c7(o,a,90),_=u7(n,t,S),w):S},w.extentMajor([[-180,-90+_i],[180,90-_i]]).extentMinor([[-180,-80-_i],[180,80+_i]])}function soe(){return roe()()}function W6(i,e){var t=i[0]*Jn,n=i[1]*Jn,r=e[0]*Jn,s=e[1]*Jn,a=li(n),o=jn(n),l=li(s),c=jn(s),u=a*li(t),h=a*jn(t),d=l*li(r),A=l*jn(r),x=2*kh(Dh(GO(s-n)+a*l*GO(r-t))),_=jn(x),S=x?function(w){var C=jn(w*=x)/_,P=jn(x-w)/_,L=P*u+C*d,D=P*h+C*A,B=P*o+C*c;return[ql(D,L)*ns,ql(B,Dh(L*L+D*D))*ns]}:function(){return[t*ns,n*ns]};return S.distance=x,S}const h7=i=>i;var Dg=1/0,kw=Dg,fx=-Dg,Ow=fx,f7={point:aoe,lineStart:Oa,lineEnd:Oa,polygonStart:Oa,polygonEnd:Oa,result:function(){var i=[[Dg,kw],[fx,Ow]];return fx=Ow=-(kw=Dg=1/0),i}};function aoe(i,e){i<Dg&&(Dg=i),i>fx&&(fx=i),e<kw&&(kw=e),e>Ow&&(Ow=e)}function j6(i){return function(e){var t=new X4;for(var n in i)t[n]=i[n];return t.stream=e,t}}function X4(){}X4.prototype={constructor:X4,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function X6(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),HS(t,i.stream(f7)),e(f7.result()),n!=null&&i.clipExtent(n),i}function KU(i,e,t){return X6(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(s-a*(n[1][1]+n[0][1]))/2;i.scale(150*a).translate([o,l])},t)}function ooe(i,e,t){return KU(i,[[0,0],e],t)}function loe(i,e,t){return X6(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),a=(r-s*(n[1][0]+n[0][0]))/2,o=-s*n[0][1];i.scale(150*s).translate([a,o])},t)}function coe(i,e,t){return X6(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),a=-s*n[0][0],o=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([a,o])},t)}var d7=16,uoe=li(30*Jn);function p7(i,e){return+e?foe(i,e):hoe(i)}function hoe(i){return j6({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function foe(i,e){function t(n,r,s,a,o,l,c,u,h,d,A,x,_,S){var w=c-n,C=u-r,P=w*w+C*C;if(P>4*e&&_--){var L=a+d,D=o+A,B=l+x,k=Dh(L*L+D*D+B*B),U=kh(B/=k),F=Ar(Ar(B)-1)<_i||Ar(s-h)<_i?(s+h)/2:ql(D,L),z=i(F,U),V=z[0],W=z[1],X=V-n,J=W-r,K=C*X-w*J;(K*K/P>e||Ar((w*X+C*J)/P-.5)>.3||a*d+o*A+l*x<uoe)&&(t(n,r,s,a,o,l,V,W,F,L/=k,D/=k,B,_,S),S.point(V,W),t(V,W,F,L,D,B,c,u,h,d,A,x,_,S))}}return function(n){var r,s,a,o,l,c,u,h,d,A,x,_,S={point:w,lineStart:C,lineEnd:L,polygonStart:function(){n.polygonStart(),S.lineStart=D},polygonEnd:function(){n.polygonEnd(),S.lineStart=C}};function w(U,F){U=i(U,F),n.point(U[0],U[1])}function C(){h=NaN,S.point=P,n.lineStart()}function P(U,F){var z=Xp([U,F]),V=i(U,F);t(h,d,u,A,x,_,h=V[0],d=V[1],u=U,A=z[0],x=z[1],_=z[2],d7,n),n.point(h,d)}function L(){S.point=w,n.lineEnd()}function D(){C(),S.point=B,S.lineEnd=k}function B(U,F){P(r=U,F),s=h,a=d,o=A,l=x,c=_,S.point=P}function k(){t(h,d,u,A,x,_,s,a,r,o,l,c,d7,n),S.lineEnd=L,L()}return S}}var doe=j6({point:function(i,e){this.stream.point(i*Jn,e*Jn)}});function poe(i){return j6({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function Aoe(i,e,t,n,r){function s(a,o){return a*=n,o*=r,[e+i*a,t-i*o]}return s.invert=function(a,o){return[(a-e)/i*n,(t-o)/i*r]},s}function A7(i,e,t,n,r,s){if(!s)return Aoe(i,e,t,n,r);var a=li(s),o=jn(s),l=a*i,c=o*i,u=a/i,h=o/i,d=(o*t-a*e)/i,A=(o*e+a*t)/i;function x(_,S){return _*=n,S*=r,[l*_-c*S+e,t-c*_-l*S]}return x.invert=function(_,S){return[n*(u*_-h*S+d),r*(A-h*_-u*S)]},x}function goe(i){return moe(function(){return i})()}function moe(i){var e,t=150,n=480,r=250,s=0,a=0,o=0,l=0,c=0,u,h=0,d=1,A=1,x=null,_=i7,S=null,w,C,P,L=h7,D=.5,B,k,U,F,z;function V(K){return U(K[0]*Jn,K[1]*Jn)}function W(K){return K=U.invert(K[0],K[1]),K&&[K[0]*ns,K[1]*ns]}V.stream=function(K){return F&&z===K?F:F=doe(poe(u)(_(B(L(z=K)))))},V.preclip=function(K){return arguments.length?(_=K,x=void 0,J()):_},V.postclip=function(K){return arguments.length?(L=K,S=w=C=P=null,J()):L},V.clipAngle=function(K){return arguments.length?(_=+K?Xae(x=K*Jn):(x=null,i7),J()):x*ns},V.clipExtent=function(K){return arguments.length?(L=K==null?(S=w=C=P=null,h7):$ae(S=+K[0][0],w=+K[0][1],C=+K[1][0],P=+K[1][1]),J()):S==null?null:[[S,w],[C,P]]},V.scale=function(K){return arguments.length?(t=+K,X()):t},V.translate=function(K){return arguments.length?(n=+K[0],r=+K[1],X()):[n,r]},V.center=function(K){return arguments.length?(s=K[0]%360*Jn,a=K[1]%360*Jn,X()):[s*ns,a*ns]},V.rotate=function(K){return arguments.length?(o=K[0]%360*Jn,l=K[1]%360*Jn,c=K.length>2?K[2]%360*Jn:0,X()):[o*ns,l*ns,c*ns]},V.angle=function(K){return arguments.length?(h=K%360*Jn,X()):h*ns},V.reflectX=function(K){return arguments.length?(d=K?-1:1,X()):d<0},V.reflectY=function(K){return arguments.length?(A=K?-1:1,X()):A<0},V.precision=function(K){return arguments.length?(B=p7(k,D=K*K),J()):Dh(D)},V.fitExtent=function(K,Y){return KU(V,K,Y)},V.fitSize=function(K,Y){return ooe(V,K,Y)},V.fitWidth=function(K,Y){return loe(V,K,Y)},V.fitHeight=function(K,Y){return coe(V,K,Y)};function X(){var K=A7(t,0,0,d,A,h).apply(null,e(s,a)),Y=A7(t,n-K[0],r-K[1],d,A,h);return u=jU(o,l,c),k=V4(e,Y),U=V4(u,k),B=p7(k,D),J()}function J(){return F=z=null,V}return function(){return e=i.apply(this,arguments),V.invert=e.invert&&W,X()}}function voe(i){return function(e,t){var n=Dh(e*e+t*t),r=i(n),s=jn(r),a=li(r);return[ql(e*s,n*a),kh(n&&t*s/n)]}}function Y6(i,e){return[i,Tae(Eae((bo+e)/2))]}Y6.invert=function(i,e){return[i,2*H6(Sae(e))-bo]};function JU(i,e){var t=li(e),n=1+li(i)*t;return[t*jn(i)/n,jn(e)/n]}JU.invert=voe(function(i){return 2*H6(i)});function yoe(){return goe(JU).scale(250).clipAngle(142)}function Y4(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function xoe(i){if(Array.isArray(i))return i}function boe(i){if(Array.isArray(i))return Y4(i)}function Ey(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function _oe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function woe(i,e,t){return e=Iw(e),Doe(i,tz()?Reflect.construct(e,[],Iw(i).constructor):e.apply(i,t))}function ez(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Soe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(i,e){return i.get(Ey(i,e))}function Of(i,e,t){ez(i,e),e.set(i,t)}function If(i,e,t){return i.set(Ey(i,e),t),t}function Toe(i,e){ez(i,e),e.add(i)}function Moe(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,iz(n.key),n)}}function Eoe(i,e,t){return Moe(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function h0(i,e,t){return(e=iz(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Iw(i){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Iw(i)}function Coe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&$4(i,e)}function tz(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tz=function(){return!!i})()}function Roe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Poe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function Noe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Loe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Doe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _oe(i)}function $4(i,e){return $4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},$4(i,e)}function I_(i,e){return xoe(i)||Poe(i,e)||rz(i,e)||Noe()}function nz(i){return boe(i)||Roe(i)||rz(i)||Loe()}function koe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function iz(i){var e=koe(i,"string");return typeof e=="symbol"?e:e+""}function rz(i,e){if(i){if(typeof i=="string")return Y4(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Y4(i,e):void 0}}var sz=function(e){e instanceof Array?e.forEach(sz):(e.map&&e.map.dispose(),e.dispose())},az=function(e){e.geometry&&e.geometry.dispose(),e.material&&sz(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(az)},g7=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),az(t)}};function oz(i,e,t){var n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return{x:t*Math.sin(n)*Math.cos(r),y:t*Math.cos(n),z:t*Math.sin(n)*Math.sin(r)}}function Ooe(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),a=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-a*180/Math.PI-(a<-Math.PI/2?360:0),r}}function Xd(i){return i*Math.PI/180}var lz=function(e){return 1-(Y6(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},yE=function(e){return Math.max(0,Math.min(1,lz(e)))},m7=function(e){return .5-Y6.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},Ioe=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=Lh().domain([1,0]).range([t,n]).clamp(!0),s=Lh().domain([yE(t),yE(n)]).range([1,0]).clamp(!0),a=function(h){return s(yE(r(h)))},o=e.array,l=0,c=o.length;l<c;l+=2)o[l+1]=a(o[l+1]);e.needsUpdate=!0},v7=function(e,t,n,r){var s=Math.pow(2,e),a=Math.max(0,Math.min(s-1,Math.floor((n+180)*s/360))),o=(90-r)/180;t&&(o=Math.max(0,Math.min(1,lz(o))));var l=Math.floor(o*s);return[a,l]},Q4=function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,o=[],l=Math.pow(2,e),c=360/l,u=180/l,h=s===void 0?l-1:s,d=a===void 0?l-1:a,A=n,x=Math.min(l-1,h);A<=x;A++)for(var _=r,S=Math.min(l-1,d);_<=S;_++){var w=_,C=u;if(t){w=_===0?_:m7(_/l)*l;var P=_+1===l?_+1:m7((_+1)/l)*l;C=(P-w)*180/l}var L=-180+(A+.5)*c,D=90-(w*180/l+C/2),B=C;o.push({x:A,y:_,lng:L,lat:D,latLen:B})}return o},Boe=6,Foe=7,Uoe=3,zoe=90,ru=new WeakMap,Wf=new WeakMap,xE=new WeakMap,P2=new WeakMap,Nl=new WeakMap,Bw=new WeakMap,J0=new WeakMap,Yd=new WeakMap,N2=new WeakSet,Goe=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.tileUrl,a=r.minLevel,o=a===void 0?0:a,l=r.maxLevel,c=l===void 0?17:l,u=r.mercatorProjection,h=u===void 0?!0:u;return Soe(this,e),n=woe(this,e),Toe(n,N2),Of(n,ru,void 0),Of(n,Wf,void 0),Of(n,xE,void 0),Of(n,P2,void 0),Of(n,Nl,{}),Of(n,Bw,void 0),Of(n,J0,void 0),Of(n,Yd,void 0),h0(n,"minLevel",void 0),h0(n,"maxLevel",void 0),h0(n,"thresholds",nz(new Array(30)).map(function(d,A){return 8/Math.pow(2,A)})),h0(n,"curvatureResolution",5),h0(n,"tileMargin",0),h0(n,"clearTiles",function(){Object.values(xi(Nl,n)).forEach(function(d){d.forEach(function(A){A.obj&&(n.remove(A.obj),g7(A.obj),delete A.obj)})}),If(Nl,n,{})}),If(ru,n,t),n.tileUrl=s,If(Wf,n,h),n.minLevel=o,n.maxLevel=c,n.level=0,n.add(If(Yd,n,new zi(new Lu(xi(ru,n)*.99,180,90),new Il({color:0})))),xi(Yd,n).visible=!1,xi(Yd,n).material.polygonOffset=!0,xi(Yd,n).material.polygonOffsetUnits=3,xi(Yd,n).material.polygonOffsetFactor=1,n}return Coe(e,i),Eoe(e,[{key:"tileUrl",get:function(){return xi(xE,this)},set:function(n){If(xE,this,n),this.updatePov(xi(J0,this))}},{key:"level",get:function(){return xi(P2,this)},set:function(n){var r=this;xi(Nl,this)[n]||Ey(N2,this,Voe).call(this,n);var s=xi(P2,this);if(If(P2,this,n),!(n===s||s===void 0)){if(xi(Yd,this).visible=n>0,xi(Nl,this)[n].forEach(function(o){return o.obj&&(o.obj.material.depthWrite=!0)}),s<n&&xi(Nl,this)[s].forEach(function(o){return o.obj&&(o.obj.material.depthWrite=!1)}),s>n)for(var a=n+1;a<=s;a++)xi(Nl,this)[a]&&xi(Nl,this)[a].forEach(function(o){o.obj&&(r.remove(o.obj),g7(o.obj),delete o.obj)});Ey(N2,this,y7).call(this)}}},{key:"updatePov",value:function(n){var r=this;if(!(!n||!(n instanceof Zx))){If(J0,this,n);var s;if(If(Bw,this,function(u){if(!u.hullPnts){var h=360/Math.pow(2,r.level),d=u.lng,A=u.lat,x=u.latLen,_=d-h/2,S=d+h/2,w=A-x/2,C=A+x/2;u.hullPnts=[[A,d],[w,_],[C,_],[w,S],[C,S]].map(function(P){var L=I_(P,2),D=L[0],B=L[1];return oz(D,B,xi(ru,r))}).map(function(P){var L=P.x,D=P.y,B=P.z;return new pe(L,D,B)})}return s||(s=new am,n.updateMatrix(),n.updateMatrixWorld(),s.setFromProjectionMatrix(new Un().multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))),u.hullPnts.some(function(P){return s.containsPoint(P.clone().applyMatrix4(r.matrixWorld))})}),this.tileUrl){var a=n.position.clone(),o=a.distanceTo(this.getWorldPosition(new pe)),l=(o-xi(ru,this))/xi(ru,this),c=this.thresholds.findIndex(function(u){return u&&u<=l});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,c<0?this.thresholds.length:c)),Ey(N2,this,y7).call(this)}}}}])}(yo);function Voe(i){var e=this;if(i>Foe){xi(Nl,this)[i]=[];return}var t=xi(Nl,this)[i]=Q4(i,xi(Wf,this));t.forEach(function(n){return n.centroid=oz(n.lat,n.lng,xi(ru,e))}),t.octree=xU().x(function(n){return n.centroid.x}).y(function(n){return n.centroid.y}).z(function(n){return n.centroid.z}).addAll(t)}function y7(){var i=this;if(!(!this.tileUrl||this.level===void 0||!xi(Nl,this).hasOwnProperty(this.level))&&!(!xi(Bw,this)&&this.level>Boe)){var e=xi(Nl,this)[this.level];if(xi(J0,this)){var t=this.worldToLocal(xi(J0,this).position.clone());if(e.octree){var n,r=this.worldToLocal(xi(J0,this).position.clone()),s=(r.length()-xi(ru,this))*Uoe;e=(n=e.octree).findAllWithinRadius.apply(n,nz(r).concat([s]))}else{var a=Ooe(t),o=(a.r/xi(ru,this)-1)*zoe,l=o/Math.cos(Xd(a.lat)),c=[a.lng-l,a.lng+l],u=[a.lat+o,a.lat-o],h=v7(this.level,xi(Wf,this),c[0],u[0]),d=I_(h,2),A=d[0],x=d[1],_=v7(this.level,xi(Wf,this),c[1],u[1]),S=I_(_,2),w=S[0],C=S[1];!e.record&&(e.record={});var P=e.record;if(!P.hasOwnProperty("".concat(Math.round((A+w)/2),"_").concat(Math.round((x+C)/2))))e=Q4(this.level,xi(Wf,this),A,x,w,C).map(function(U){var F="".concat(U.x,"_").concat(U.y);return P.hasOwnProperty(F)?P[F]:(P[F]=U,e.push(U),U)});else{for(var L=[],D=A;D<=w;D++)for(var B=x;B<=C;B++){var k="".concat(D,"_").concat(B);P.hasOwnProperty(k)||(P[k]=Q4(this.level,xi(Wf,this),D,B,D,B)[0],e.push(P[k])),L.push(P[k])}e=L}}}e.filter(function(U){return!U.obj}).filter(xi(Bw,this)||function(){return!0}).forEach(function(U){var F=U.x,z=U.y,V=U.lng,W=U.lat,X=U.latLen,J=360/Math.pow(2,i.level);if(!U.obj){var K=J*(1-i.tileMargin),Y=X*(1-i.tileMargin),ee=Xd(V),se=Xd(-W),fe=new zi(new Lu(xi(ru,i),Math.ceil(K/i.curvatureResolution),Math.ceil(Y/i.curvatureResolution),Xd(90-K/2)+ee,Xd(K),Xd(90-Y/2)+se,Xd(Y)),new Wh);if(xi(Wf,i)){var ne=[W+X/2,W-X/2].map(function(_e){return .5-_e/180}),he=I_(ne,2),Te=he[0],Pe=he[1];Ioe(fe.geometry.attributes.uv,Te,Pe)}U.obj=fe}U.loading||(U.loading=!0,new D6().load(i.tileUrl(F,z,i.level),function(_e){var Ie=U.obj;Ie&&(_e.colorSpace=ma,Ie.material.map=_e,Ie.material.color=null,Ie.material.needsUpdate=!0,i.add(Ie)),U.loading=!1}))})}}function Hoe(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=cz(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c;if(n&&(s=Yoe(i,e,s,t)),i.length>80*t){o=1/0,l=1/0;let u=-1/0,h=-1/0;for(let d=t;d<r;d+=t){const A=i[d],x=i[d+1];A<o&&(o=A),x<l&&(l=x),A>u&&(u=A),x>h&&(h=x)}c=Math.max(u-o,h-l),c=c!==0?32767/c:0}return dx(s,a,t,o,l,c,0),a}function cz(i,e,t,n,r){let s;if(r===sle(i,e,t,n)>0)for(let a=e;a<t;a+=n)s=x7(a/n|0,i[a],i[a+1],s);else for(let a=t-n;a>=e;a-=n)s=x7(a/n|0,i[a],i[a+1],s);return s&&kg(s,s.next)&&(Ax(s),s=s.next),s}function Yp(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(kg(t,t.next)||Yr(t.prev,t,t.next)===0)){if(Ax(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function dx(i,e,t,n,r,s,a){if(!i)return;!a&&s&&Joe(i,n,r,s);let o=i;for(;i.prev!==i.next;){const l=i.prev,c=i.next;if(s?Woe(i,n,r,s):qoe(i)){e.push(l.i,i.i,c.i),Ax(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=joe(Yp(i),e),dx(i,e,t,n,r,s,2)):a===2&&Xoe(i,e,t,n,r,s):dx(Yp(i),e,t,n,r,s,1);break}}}function qoe(i){const e=i.prev,t=i,n=i.next;if(Yr(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,u=Math.min(r,s,a),h=Math.min(o,l,c),d=Math.max(r,s,a),A=Math.max(o,l,c);let x=n.next;for(;x!==e;){if(x.x>=u&&x.x<=d&&x.y>=h&&x.y<=A&&py(r,o,s,l,a,c,x.x,x.y)&&Yr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function Woe(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Yr(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,A=Math.min(o,l,c),x=Math.min(u,h,d),_=Math.max(o,l,c),S=Math.max(u,h,d),w=Z4(A,x,e,t,n),C=Z4(_,S,e,t,n);let P=i.prevZ,L=i.nextZ;for(;P&&P.z>=w&&L&&L.z<=C;){if(P.x>=A&&P.x<=_&&P.y>=x&&P.y<=S&&P!==r&&P!==a&&py(o,u,l,h,c,d,P.x,P.y)&&Yr(P.prev,P,P.next)>=0||(P=P.prevZ,L.x>=A&&L.x<=_&&L.y>=x&&L.y<=S&&L!==r&&L!==a&&py(o,u,l,h,c,d,L.x,L.y)&&Yr(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;P&&P.z>=w;){if(P.x>=A&&P.x<=_&&P.y>=x&&P.y<=S&&P!==r&&P!==a&&py(o,u,l,h,c,d,P.x,P.y)&&Yr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;L&&L.z<=C;){if(L.x>=A&&L.x<=_&&L.y>=x&&L.y<=S&&L!==r&&L!==a&&py(o,u,l,h,c,d,L.x,L.y)&&Yr(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function joe(i,e){let t=i;do{const n=t.prev,r=t.next.next;!kg(n,r)&&hz(n,t,t.next,r)&&px(n,r)&&px(r,n)&&(e.push(n.i,t.i,r.i),Ax(t),Ax(t.next),t=i=r),t=t.next}while(t!==i);return Yp(t)}function Xoe(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&nle(a,o)){let l=fz(a,o);a=Yp(a,a.next),l=Yp(l,l.next),dx(a,e,t,n,r,s,0),dx(l,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function Yoe(i,e,t,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,l=s<a-1?e[s+1]*n:i.length,c=cz(i,o,l,n,!1);c===c.next&&(c.steiner=!0),r.push(tle(c))}r.sort($oe);for(let s=0;s<r.length;s++)t=Qoe(r[s],t);return t}function $oe(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function Qoe(i,e){const t=Zoe(i,e);if(!t)return e;const n=fz(t,i);return Yp(n,n.next),Yp(t,t.next)}function Zoe(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,a;if(kg(i,t))return t;do{if(kg(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>s&&(s=h,a=t.x<t.next.x?t:t.next,h===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&uz(r<c?n:s,r,l,c,r<c?s:n,r,t.x,t.y)){const h=Math.abs(r-t.y)/(n-t.x);px(t,i)&&(h<u||h===u&&(t.x>a.x||t.x===a.x&&Koe(a,t)))&&(a=t,u=h)}t=t.next}while(t!==o);return a}function Koe(i,e){return Yr(i.prev,i,e.prev)<0&&Yr(e.next,i,i.next)<0}function Joe(i,e,t,n){let r=i;do r.z===0&&(r.z=Z4(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,ele(r)}function ele(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=a}s.nextZ=null,t*=2}while(e>1);return i}function Z4(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function tle(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function uz(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function py(i,e,t,n,r,s,a,o){return!(i===a&&e===o)&&uz(i,e,t,n,r,s,a,o)}function nle(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!ile(i,e)&&(px(i,e)&&px(e,i)&&rle(i,e)&&(Yr(i.prev,i,e.prev)||Yr(i,e.prev,e))||kg(i,e)&&Yr(i.prev,i,i.next)>0&&Yr(e.prev,e,e.next)>0)}function Yr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function kg(i,e){return i.x===e.x&&i.y===e.y}function hz(i,e,t,n){const r=D2(Yr(i,e,t)),s=D2(Yr(i,e,n)),a=D2(Yr(t,n,i)),o=D2(Yr(t,n,e));return!!(r!==s&&a!==o||r===0&&L2(i,t,e)||s===0&&L2(i,n,e)||a===0&&L2(t,i,n)||o===0&&L2(t,e,n))}function L2(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function D2(i){return i>0?1:i<0?-1:0}function ile(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&hz(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function px(i,e){return Yr(i.prev,i,i.next)<0?Yr(i,e,i.next)>=0&&Yr(i,i.prev,e)>=0:Yr(i,e,i.prev)<0||Yr(i,i.next,e)<0}function rle(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function fz(i,e){const t=K4(i.i,i.x,i.y),n=K4(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function x7(i,e,t,n){const r=K4(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Ax(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function K4(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sle(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}function Fw(i){const e=[],t=[],n=i[0][0].length;let r=0,s=0;for(const a of i){for(const o of a)for(let l=0;l<n;l++)e.push(o[l]);s&&(r+=s,t.push(r)),s=a.length}return{vertices:e,holes:t,dimensions:n}}function J4(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function ale(i){if(Array.isArray(i))return i}function ole(i){if(Array.isArray(i))return J4(i)}function lle(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function cle(i,e,t){return e=Uw(e),vle(i,dz()?Reflect.construct(e,[],Uw(i).constructor):e.apply(i,t))}function ule(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function hle(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function fle(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=$6(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw s}}}}function Uw(i){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uw(i)}function dle(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&eR(i,e)}function dz(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dz=function(){return!!i})()}function ple(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Ale(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function gle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vle(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lle(i)}function eR(i,e){return eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},eR(i,e)}function Dv(i,e){return ale(i)||Ale(i,e)||$6(i,e)||gle()}function yle(i){return ole(i)||ple(i)||$6(i)||mle()}function $6(i,e){if(i){if(typeof i=="string")return J4(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?J4(i,e):void 0}}var b7=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],r=null;return e.forEach(function(s){if(r){var a=ud(s,r)*180/Math.PI;if(a>t)for(var o=W6(r,s),l=r.length>2||s.length>2?hx(r[2]||0,s[2]||0):null,c=l?function(d){return[].concat(yle(o(d)),[l(d)])}:o,u=1/Math.ceil(a/t),h=u;h<1;)n.push(c(h)),h+=u}n.push(r=s)}),n},tR=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:lr,Float32BufferAttribute:ki},xle=new tR.BufferGeometry().setAttribute?"setAttribute":"addAttribute",pz=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;ule(this,e),n=cle(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:r,resolution:s};var a=({Point:u,MultiPoint:h,LineString:d,MultiLineString:A,Polygon:x,MultiPolygon:_}[t.type]||function(){return[]})(t.coordinates,r),o=[],l=[],c=0;a.forEach(function(S){var w=o.length;kv({indices:o,vertices:l},S),n.addGroup(w,o.length-w,c++)}),o.length&&n.setIndex(o),l.length&&n[xle]("position",new tR.Float32BufferAttribute(l,3));function u(S,w){var C=bE(S[1],S[0],w+(S[2]||0)),P=[];return[{vertices:C,indices:P}]}function h(S,w){var C={vertices:[],indices:[]};return S.map(function(P){return u(P,w)}).forEach(function(P){var L=Dv(P,1),D=L[0];kv(C,D)}),[C]}function d(S,w){for(var C=b7(S,s).map(function(U){var F=Dv(U,3),z=F[0],V=F[1],W=F[2],X=W===void 0?0:W;return bE(V,z,w+X)}),P=Fw([C]),L=P.vertices,D=Math.round(L.length/3),B=[],k=1;k<D;k++)B.push(k-1,k);return[{vertices:L,indices:B}]}function A(S,w){var C={vertices:[],indices:[]};return S.map(function(P){return d(P,w)}).forEach(function(P){var L=Dv(P,1),D=L[0];kv(C,D)}),[C]}function x(S,w){for(var C=S.map(function(K){return b7(K,s).map(function(Y){var ee=Dv(Y,3),se=ee[0],fe=ee[1],ne=ee[2],he=ne===void 0?0:ne;return bE(fe,se,w+he)})}),P=Fw(C),L=P.vertices,D=P.holes,B=D[0]||1/0,k=L.slice(0,B*3),U=L.slice(B*3),F=new Set(D),z=Math.round(L.length/3),V=[],W=[],X=1;X<z;X++)F.has(X)||(X<B?V.push(X-1,X):W.push(X-1-B,X-B));var J=[{indices:V,vertices:k}];return D.length&&J.push({indices:W,vertices:U}),J}function _(S,w){var C={vertices:[],indices:[]},P={vertices:[],indices:[]};S.map(function(D){return x(D,w)}).forEach(function(D){var B=Dv(D,2),k=B[0],U=B[1];kv(C,k),U&&kv(P,U)});var L=[C];return P.vertices.length&&L.push(P),L}return n}return dle(e,i),hle(e)}(tR.BufferGeometry);function kv(i,e){var t=Math.round(i.vertices.length/3);_7(i.vertices,e.vertices),_7(i.indices,e.indices.map(function(n){return n+t}))}function _7(i,e){var t=fle(e),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;i.push(r)}}catch(s){t.e(s)}finally{t.f()}}function bE(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function ble(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(a){if(a.normalized||a.isInterleavedBufferAttribute){const o=new Float32Array(a.count*a.itemSize);for(let l=0,c=0;l<a.count;l++)o[c++]=a.getX(l),o[c++]=a.getY(l),a.itemSize>2&&(o[c++]=a.getZ(l));return o}return a.array instanceof Float32Array?a.array:new Float32Array(a.array)}const r=i.index?i.toNonIndexed():i,s=e.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(t)for(let a=3;a<s.length;a+=4)s[a]*=-1;return r.setAttribute("tangent",new Vr(s,4)),i!==r&&i.copy(r),i}function _le(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},a={},o=i[0].morphTargetsRelative,l=new lr;let c=0;for(let u=0;u<i.length;++u){const h=i[u];let d=0;if(t!==(h.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const A in h.attributes){if(!n.has(A))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+A+'" attribute exists among all geometries, or in none of them.'),null;s[A]===void 0&&(s[A]=[]),s[A].push(h.attributes[A]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(o!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const A in h.morphAttributes){if(!r.has(A))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;a[A]===void 0&&(a[A]=[]),a[A].push(h.morphAttributes[A])}if(e){let A;if(t)A=h.index.count;else if(h.attributes.position!==void 0)A=h.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,A,u),c+=A}}if(t){let u=0;const h=[];for(let d=0;d<i.length;++d){const A=i[d].index;for(let x=0;x<A.count;++x)h.push(A.getX(x)+u);u+=i[d].attributes.position.count}l.setIndex(h)}for(const u in s){const h=nR(s[u]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,h)}for(const u in a){const h=a[u][0].length;if(h===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let d=0;d<h;++d){const A=[];for(let _=0;_<a[u].length;++_)A.push(a[u][_][d]);const x=nR(A);if(!x)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(x)}}return l}function nR(i){let e,t,n,r=-1,s=0;for(let c=0;c<i.length;++c){const u=i[c];if(e===void 0&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=u.itemSize),t!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=u.normalized),n!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=u.gpuType),r!==u.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=u.count*t}const a=new e(s),o=new Vr(a,t,n);let l=0;for(let c=0;c<i.length;++c){const u=i[c];if(u.isInterleavedBufferAttribute){const h=l/t;for(let d=0,A=u.count;d<A;d++)for(let x=0;x<t;x++){const _=u.getComponent(d,x);o.setComponent(d+h,x,_)}}else a.set(u.array,l);l+=u.count*t}return r!==void 0&&(o.gpuType=r),o}function wle(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?zw(i):i.isInstancedBufferAttribute?new nd().copy(i):new Vr().copy(i)}function Sle(i){let e,t=0,n=0;for(let c=0,u=i.length;c<u;++c){const h=i[c];if(e===void 0&&(e=h.array.constructor),e!==h.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=h.array.length,n+=h.itemSize}const r=new T6(new e(t),n);let s=0;const a=[],o=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let c=0,u=i.length;c<u;c++){const h=i[c],d=h.itemSize,A=h.count,x=new cu(r,d,s,h.normalized);a.push(x),s+=d;for(let _=0;_<A;_++)for(let S=0;S<d;S++)x[l[S]](_,h[o[S]](_))}return a}function zw(i){const e=i.data.array.constructor,t=i.count,n=i.itemSize,r=i.normalized,s=new e(t*n);let a;i.isInstancedInterleavedBufferAttribute?a=new nd(s,n,r,i.meshPerAttribute):a=new Vr(s,n,r);for(let o=0;o<t;o++)a.setX(o,i.getX(o)),n>=2&&a.setY(o,i.getY(o)),n>=3&&a.setZ(o,i.getZ(o)),n>=4&&a.setW(o,i.getW(o));return a}function Tle(i){const e=i.attributes,t=i.morphTargets,n=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,zw(s)),e[r]=n.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,zw(s)),t[r]=n.get(s))}}function Mle(i){let e=0;for(const n in i.attributes){const r=i.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function Ele(i,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=i.getIndex(),r=i.getAttribute("position"),s=n?n.count:r.count;let a=0;const o=Object.keys(i.attributes),l={},c={},u=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let C=0,P=o.length;C<P;C++){const L=o[C],D=i.attributes[L];l[L]=new D.constructor(new D.array.constructor(D.count*D.itemSize),D.itemSize,D.normalized);const B=i.morphAttributes[L];B&&(c[L]||(c[L]=[]),B.forEach((k,U)=>{const F=new k.array.constructor(k.count*k.itemSize);c[L][U]=new k.constructor(F,k.itemSize,k.normalized)}))}const A=e*.5,x=Math.log10(1/e),_=Math.pow(10,x),S=A*_;for(let C=0;C<s;C++){const P=n?n.getX(C):C;let L="";for(let D=0,B=o.length;D<B;D++){const k=o[D],U=i.getAttribute(k),F=U.itemSize;for(let z=0;z<F;z++)L+=`${~~(U[h[z]](P)*_+S)},`}if(L in t)u.push(t[L]);else{for(let D=0,B=o.length;D<B;D++){const k=o[D],U=i.getAttribute(k),F=i.morphAttributes[k],z=U.itemSize,V=l[k],W=c[k];for(let X=0;X<z;X++){const J=h[X],K=d[X];if(V[K](a,U[J](P)),F)for(let Y=0,ee=F.length;Y<ee;Y++)W[Y][K](a,F[Y][J](P))}}t[L]=a,u.push(a),a++}}const w=i.clone();for(const C in i.attributes){const P=l[C];if(w.setAttribute(C,new P.constructor(P.array.slice(0,a*P.itemSize),P.itemSize,P.normalized)),C in c)for(let L=0;L<c[C].length;L++){const D=c[C][L];w.morphAttributes[C][L]=new D.constructor(D.array.slice(0,a*D.itemSize),D.itemSize,D.normalized)}}return w.setIndex(u),w}function Cle(i,e){if(e===CZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===ak||e===RZ){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===ak)for(let a=1;a<=n;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function Rle(i){const e=new pe,t=new pe,n=new pe,r=new pe,s=new pe,a=new pe,o=new pe,l=new pe,c=new pe;function u(fe,ne,he,Te,Pe,_e,Ie,Ve){e.fromBufferAttribute(ne,Pe),t.fromBufferAttribute(ne,_e),n.fromBufferAttribute(ne,Ie);const $e=fe.morphTargetInfluences;if(he&&$e){o.set(0,0,0),l.set(0,0,0),c.set(0,0,0);for(let Je=0,vt=he.length;Je<vt;Je++){const pt=$e[Je],Vt=he[Je];pt!==0&&(r.fromBufferAttribute(Vt,Pe),s.fromBufferAttribute(Vt,_e),a.fromBufferAttribute(Vt,Ie),Te?(o.addScaledVector(r,pt),l.addScaledVector(s,pt),c.addScaledVector(a,pt)):(o.addScaledVector(r.sub(e),pt),l.addScaledVector(s.sub(t),pt),c.addScaledVector(a.sub(n),pt)))}e.add(o),t.add(l),n.add(c)}fe.isSkinnedMesh&&(fe.applyBoneTransform(Pe,e),fe.applyBoneTransform(_e,t),fe.applyBoneTransform(Ie,n)),Ve[Pe*3+0]=e.x,Ve[Pe*3+1]=e.y,Ve[Pe*3+2]=e.z,Ve[_e*3+0]=t.x,Ve[_e*3+1]=t.y,Ve[_e*3+2]=t.z,Ve[Ie*3+0]=n.x,Ve[Ie*3+1]=n.y,Ve[Ie*3+2]=n.z}const h=i.geometry,d=i.material;let A,x,_;const S=h.index,w=h.attributes.position,C=h.morphAttributes.position,P=h.morphTargetsRelative,L=h.attributes.normal,D=h.morphAttributes.position,B=h.groups,k=h.drawRange;let U,F,z,V,W,X,J;const K=new Float32Array(w.count*w.itemSize),Y=new Float32Array(L.count*L.itemSize);if(S!==null)if(Array.isArray(d))for(U=0,z=B.length;U<z;U++)for(W=B[U],X=Math.max(W.start,k.start),J=Math.min(W.start+W.count,k.start+k.count),F=X,V=J;F<V;F+=3)A=S.getX(F),x=S.getX(F+1),_=S.getX(F+2),u(i,w,C,P,A,x,_,K),u(i,L,D,P,A,x,_,Y);else for(X=Math.max(0,k.start),J=Math.min(S.count,k.start+k.count),U=X,z=J;U<z;U+=3)A=S.getX(U),x=S.getX(U+1),_=S.getX(U+2),u(i,w,C,P,A,x,_,K),u(i,L,D,P,A,x,_,Y);else if(Array.isArray(d))for(U=0,z=B.length;U<z;U++)for(W=B[U],X=Math.max(W.start,k.start),J=Math.min(W.start+W.count,k.start+k.count),F=X,V=J;F<V;F+=3)A=F,x=F+1,_=F+2,u(i,w,C,P,A,x,_,K),u(i,L,D,P,A,x,_,Y);else for(X=Math.max(0,k.start),J=Math.min(w.count,k.start+k.count),U=X,z=J;U<z;U+=3)A=U,x=U+1,_=U+2,u(i,w,C,P,A,x,_,K),u(i,L,D,P,A,x,_,Y);const ee=new ki(K,3),se=new ki(Y,3);return{positionAttribute:w,normalAttribute:L,morphedPositionAttribute:ee,morphedNormalAttribute:se}}function Ple(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((a,o)=>a.materialIndex!==o.materialIndex?a.materialIndex-o.materialIndex:a.start-o.start),i.getIndex()===null){const a=i.getAttribute("position"),o=[];for(let l=0;l<a.count;l+=3)o.push(l,l+1,l+2);i.setIndex(o)}const t=i.getIndex(),n=[];for(let a=0;a<e.length;a++){const o=e[a],l=o.start,c=l+o.count;for(let u=l;u<c;u++)n.push(t.getX(u))}i.dispose(),i.setIndex(n);let r=0;for(let a=0;a<e.length;a++){const o=e[a];o.start=r,r+=o.count}let s=e[0];i.groups=[s];for(let a=1;a<e.length;a++){const o=e[a];s.materialIndex===o.materialIndex?s.count+=o.count:(s=o,i.groups.push(s))}return i}function Nle(i,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,r=[new pe,new pe,new pe],s=new pe,a=new pe,o=new pe,l=new pe;function c(_){const S=~~(_.x*n),w=~~(_.y*n),C=~~(_.z*n);return`${S},${w},${C}`}const u=i.index?i.toNonIndexed():i,h=u.attributes.position,d={};for(let _=0,S=h.count/3;_<S;_++){const w=3*_,C=r[0].fromBufferAttribute(h,w+0),P=r[1].fromBufferAttribute(h,w+1),L=r[2].fromBufferAttribute(h,w+2);s.subVectors(L,P),a.subVectors(C,P);const D=new pe().crossVectors(s,a).normalize();for(let B=0;B<3;B++){const k=r[B],U=c(k);U in d||(d[U]=[]),d[U].push(D)}}const A=new Float32Array(h.count*3),x=new Vr(A,3,!1);for(let _=0,S=h.count/3;_<S;_++){const w=3*_,C=r[0].fromBufferAttribute(h,w+0),P=r[1].fromBufferAttribute(h,w+1),L=r[2].fromBufferAttribute(h,w+2);s.subVectors(L,P),a.subVectors(C,P),o.crossVectors(s,a).normalize();for(let D=0;D<3;D++){const B=r[D],k=c(B),U=d[k];l.set(0,0,0);for(let F=0,z=U.length;F<z;F++){const V=U[F];o.dot(V)>t&&l.add(V)}l.normalize(),x.setXYZ(w+D,l.x,l.y,l.z)}}return u.setAttribute("normal",x),u}const Q6=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:ble,computeMorphedAttributes:Rle,deepCloneAttribute:wle,deinterleaveAttribute:zw,deinterleaveGeometry:Tle,estimateBytesUsed:Mle,interleaveAttributes:Sle,mergeAttributes:nR,mergeGeometries:_le,mergeGroups:Ple,mergeVertices:Ele,toCreasedNormals:Nle,toTrianglesDrawMode:Cle},Symbol.toStringTag,{value:"Module"}));var Tt=function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}};function Gw(i){"@babel/helpers - typeof";return Gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gw(i)}var Lle=/^\s+/,Dle=/\s+$/;function Rn(i,e){if(i=i||"",e=e||{},i instanceof Rn)return i;if(!(this instanceof Rn))return new Rn(i,e);var t=kle(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Rn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,s,a,o;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=Az(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=S7(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=S7(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=w7(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=w7(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return T7(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Fle(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(zr(this._r,255)*100)+"%",g:Math.round(zr(this._g,255)*100)+"%",b:Math.round(zr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(zr(this._r,255)*100)+"%, "+Math.round(zr(this._g,255)*100)+"%, "+Math.round(zr(this._b,255)*100)+"%)":"rgba("+Math.round(zr(this._r,255)*100)+"%, "+Math.round(zr(this._g,255)*100)+"%, "+Math.round(zr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Qle[T7(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+M7(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=Rn(e);n="#"+M7(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Rn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Vle,arguments)},brighten:function(){return this._applyModification(Hle,arguments)},darken:function(){return this._applyModification(qle,arguments)},desaturate:function(){return this._applyModification(Ule,arguments)},saturate:function(){return this._applyModification(zle,arguments)},greyscale:function(){return this._applyModification(Gle,arguments)},spin:function(){return this._applyModification(Wle,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Yle,arguments)},complement:function(){return this._applyCombination(jle,arguments)},monochromatic:function(){return this._applyCombination($le,arguments)},splitcomplement:function(){return this._applyCombination(Xle,arguments)},triad:function(){return this._applyCombination(E7,[3])},tetrad:function(){return this._applyCombination(E7,[4])}};Rn.fromRatio=function(i,e){if(Gw(i)=="object"){var t={};for(var n in i)i.hasOwnProperty(n)&&(n==="a"?t[n]=i[n]:t[n]=Ay(i[n]));i=t}return Rn(i,e)};function kle(i){var e={r:0,g:0,b:0},t=1,n=null,r=null,s=null,a=!1,o=!1;return typeof i=="string"&&(i=ece(i)),Gw(i)=="object"&&(ph(i.r)&&ph(i.g)&&ph(i.b)?(e=Ole(i.r,i.g,i.b),a=!0,o=String(i.r).substr(-1)==="%"?"prgb":"rgb"):ph(i.h)&&ph(i.s)&&ph(i.v)?(n=Ay(i.s),r=Ay(i.v),e=Ble(i.h,n,r),a=!0,o="hsv"):ph(i.h)&&ph(i.s)&&ph(i.l)&&(n=Ay(i.s),s=Ay(i.l),e=Ile(i.h,n,s),a=!0,o="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=Az(t),{ok:a,format:i.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function Ole(i,e,t){return{r:zr(i,255)*255,g:zr(e,255)*255,b:zr(t,255)*255}}function w7(i,e,t){i=zr(i,255),e=zr(e,255),t=zr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,a,o=(n+r)/2;if(n==r)s=a=0;else{var l=n-r;switch(a=o>.5?l/(2-n-r):l/(n+r),n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function Ile(i,e,t){var n,r,s;i=zr(i,360),e=zr(e,100),t=zr(t,100);function a(c,u,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(u-c)*6*h:h<1/2?u:h<2/3?c+(u-c)*(2/3-h)*6:c}if(e===0)n=r=s=t;else{var o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;n=a(l,o,i+1/3),r=a(l,o,i),s=a(l,o,i-1/3)}return{r:n*255,g:r*255,b:s*255}}function S7(i,e,t){i=zr(i,255),e=zr(e,255),t=zr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,a,o=n,l=n-r;if(a=n===0?0:l/n,n==r)s=0;else{switch(n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function Ble(i,e,t){i=zr(i,360)*6,e=zr(e,100),t=zr(t,100);var n=Math.floor(i),r=i-n,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=n%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],h=[s,s,o,t,t,a][l];return{r:c*255,g:u*255,b:h*255}}function T7(i,e,t,n){var r=[wc(Math.round(i).toString(16)),wc(Math.round(e).toString(16)),wc(Math.round(t).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Fle(i,e,t,n,r){var s=[wc(Math.round(i).toString(16)),wc(Math.round(e).toString(16)),wc(Math.round(t).toString(16)),wc(gz(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function M7(i,e,t,n){var r=[wc(gz(n)),wc(Math.round(i).toString(16)),wc(Math.round(e).toString(16)),wc(Math.round(t).toString(16))];return r.join("")}Rn.equals=function(i,e){return!i||!e?!1:Rn(i).toRgbString()==Rn(e).toRgbString()};Rn.random=function(){return Rn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Ule(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.s-=e/100,t.s=qS(t.s),Rn(t)}function zle(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.s+=e/100,t.s=qS(t.s),Rn(t)}function Gle(i){return Rn(i).desaturate(100)}function Vle(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.l+=e/100,t.l=qS(t.l),Rn(t)}function Hle(i,e){e=e===0?0:e||10;var t=Rn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Rn(t)}function qle(i,e){e=e===0?0:e||10;var t=Rn(i).toHsl();return t.l-=e/100,t.l=qS(t.l),Rn(t)}function Wle(i,e){var t=Rn(i).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Rn(t)}function jle(i){var e=Rn(i).toHsl();return e.h=(e.h+180)%360,Rn(e)}function E7(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Rn(i).toHsl(),n=[Rn(i)],r=360/e,s=1;s<e;s++)n.push(Rn({h:(t.h+s*r)%360,s:t.s,l:t.l}));return n}function Xle(i){var e=Rn(i).toHsl(),t=e.h;return[Rn(i),Rn({h:(t+72)%360,s:e.s,l:e.l}),Rn({h:(t+216)%360,s:e.s,l:e.l})]}function Yle(i,e,t){e=e||6,t=t||30;var n=Rn(i).toHsl(),r=360/t,s=[Rn(i)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(Rn(n));return s}function $le(i,e){e=e||6;for(var t=Rn(i).toHsv(),n=t.h,r=t.s,s=t.v,a=[],o=1/e;e--;)a.push(Rn({h:n,s:r,v:s})),s=(s+o)%1;return a}Rn.mix=function(i,e,t){t=t===0?0:t||50;var n=Rn(i).toRgb(),r=Rn(e).toRgb(),s=t/100,a={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return Rn(a)};Rn.readability=function(i,e){var t=Rn(i),n=Rn(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};Rn.isReadable=function(i,e,t){var n=Rn.readability(i,e),r,s;switch(s=!1,r=tce(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};Rn.mostReadable=function(i,e,t){var n=null,r=0,s,a,o,l;t=t||{},a=t.includeFallbackColors,o=t.level,l=t.size;for(var c=0;c<e.length;c++)s=Rn.readability(i,e[c]),s>r&&(r=s,n=Rn(e[c]));return Rn.isReadable(i,n,{level:o,size:l})||!a?n:(t.includeFallbackColors=!1,Rn.mostReadable(i,["#fff","#000"],t))};var iR=Rn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Qle=Rn.hexNames=Zle(iR);function Zle(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function Az(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function zr(i,e){Kle(i)&&(i="100%");var t=Jle(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function qS(i){return Math.min(1,Math.max(0,i))}function Yo(i){return parseInt(i,16)}function Kle(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function Jle(i){return typeof i=="string"&&i.indexOf("%")!=-1}function wc(i){return i.length==1?"0"+i:""+i}function Ay(i){return i<=1&&(i=i*100+"%"),i}function gz(i){return Math.round(parseFloat(i)*255).toString(16)}function C7(i){return Yo(i)/255}var Ac=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ph(i){return!!Ac.CSS_UNIT.exec(i)}function ece(i){i=i.replace(Lle,"").replace(Dle,"").toLowerCase();var e=!1;if(iR[i])i=iR[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Ac.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=Ac.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ac.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=Ac.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ac.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=Ac.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ac.hex8.exec(i))?{r:Yo(t[1]),g:Yo(t[2]),b:Yo(t[3]),a:C7(t[4]),format:e?"name":"hex8"}:(t=Ac.hex6.exec(i))?{r:Yo(t[1]),g:Yo(t[2]),b:Yo(t[3]),format:e?"name":"hex"}:(t=Ac.hex4.exec(i))?{r:Yo(t[1]+""+t[1]),g:Yo(t[2]+""+t[2]),b:Yo(t[3]+""+t[3]),a:C7(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Ac.hex3.exec(i))?{r:Yo(t[1]+""+t[1]),g:Yo(t[2]+""+t[2]),b:Yo(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function tce(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function rR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function nce(i){if(Array.isArray(i))return i}function ice(i){if(Array.isArray(i))return rR(i)}function mz(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function rce(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sce(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Na(i,e){return i.get(mz(i,e))}function f0(i,e,t){rce(i,e),e.set(i,t)}function k2(i,e,t){return i.set(mz(i,e),t),t}function ace(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Ace(n.key),n)}}function oce(i,e,t){return e&&ace(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function lce(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function cce(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function uce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fce(i,e){return nce(i)||cce(i,e)||vz(i,e)||uce()}function dce(i){return ice(i)||lce(i)||vz(i)||hce()}function pce(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Ace(i){var e=pce(i,"string");return typeof e=="symbol"?e:e+""}function vz(i,e){if(i){if(typeof i=="string")return rR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?rR(i,e):void 0}}var d0=new WeakMap,Ov=new WeakMap,p0=new WeakMap,_E=new WeakMap,wE=new WeakMap,SE=new WeakMap,gce=function(){function i(){sce(this,i),f0(this,d0,new Map),f0(this,Ov,new Map),f0(this,p0,function(e){return e}),f0(this,_E,function(){return{}}),f0(this,wE,function(){}),f0(this,SE,function(){})}return oce(i,[{key:"getObj",value:function(t){return Na(d0,this).get(Na(p0,this).call(this,t))}},{key:"getData",value:function(t){return Na(Ov,this).get(t)}},{key:"entries",value:function(){return dce(Na(Ov,this).entries()).map(function(t){var n=fce(t,2),r=n[0],s=n[1];return[s,r]})}},{key:"id",value:function(t){return k2(p0,this,Tt(t)),this}},{key:"onCreateObj",value:function(t){return k2(_E,this,t),this}},{key:"onUpdateObj",value:function(t){return k2(wE,this,t),this}},{key:"onRemoveObj",value:function(t){return k2(SE,this,t),this}},{key:"digest",value:function(t){var n=this;t.filter(function(s){return!Na(d0,n).has(Na(p0,n).call(n,s))}).forEach(function(s){var a=Na(_E,n).call(n,s);Na(d0,n).set(Na(p0,n).call(n,s),a),Na(Ov,n).set(a,s)});var r=new Map(t.map(function(s){return[Na(p0,n).call(n,s),s]}));return Na(d0,this).forEach(function(s,a){r.has(a)?Na(wE,n).call(n,s,r.get(a)):(Na(SE,n).call(n,s,a),Na(d0,n).delete(a),Na(Ov,n).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}(),B_={exports:{}},mce=B_.exports,R7;function vce(){return R7||(R7=1,function(i,e){(function(t,n){i.exports=n()})(mce,function(){return function(t){function n(s){if(r[s])return r[s].exports;var a=r[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){var s=r(1),a=function(){function o(l,c,u){l===void 0&&(l=NaN),c===void 0&&(c=NaN),u===void 0&&(u=!1),this._minFPS=c,this._maxFPS=l,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,u||this.resume()}return o.prototype.updateOnce=function(l){l(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},o.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},o.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},o.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(o.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timeScale",{get:function(){return this._timeScale},set:function(l){this._timeScale!==l&&(this._timeScale=l)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),o.prototype.animateOnce=function(){var l=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return l.onFrame()})},o.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},o.prototype.update=function(l,c){c===void 0&&(c=!0),this._currentTick++,this._currentTime+=l,this._tickDeltaTime=l,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),c&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},o.prototype.getTimer=function(){return Date.now()},o}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},function(t,n,r){(function(s,a){t.exports=a()})(this,function(){return function(s){function a(l){if(o[l])return o[l].exports;var c=o[l]={exports:{},id:l,loaded:!1};return s[l].call(c.exports,c,c.exports,a),c.loaded=!0,c.exports}var o={};return a.m=s,a.c=o,a.p="",a(0)}([function(s,a){var o=function(){function l(){this.functions=[]}return l.prototype.add=function(c){return this.functions.indexOf(c)===-1&&(this.functions.push(c),!0)},l.prototype.remove=function(c){var u=this.functions.indexOf(c);return u>-1&&(this.functions.splice(u,1),!0)},l.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},l.prototype.dispatch=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var h=this.functions.concat();h.forEach(function(d){d.apply(void 0,c)})},Object.defineProperty(l.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),l}();Object.defineProperty(a,"__esModule",{value:!0}),a.default=o}])})}])})}(B_)),B_.exports}var yce=vce();const Og=jx(yce),Eh=11102230246251565e-32,La=134217729,xce=(3+8*Eh)*Eh;function TE(i,e,t,n,r){let s,a,o,l,c=e[0],u=n[0],h=0,d=0;u>c==u>-c?(s=c,c=e[++h]):(s=u,u=n[++d]);let A=0;if(h<i&&d<t)for(u>c==u>-c?(a=c+s,o=s-(a-c),c=e[++h]):(a=u+s,o=s-(a-u),u=n[++d]),s=a,o!==0&&(r[A++]=o);h<i&&d<t;)u>c==u>-c?(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=e[++h]):(a=s+u,l=a-s,o=s-(a-l)+(u-l),u=n[++d]),s=a,o!==0&&(r[A++]=o);for(;h<i;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=e[++h],s=a,o!==0&&(r[A++]=o);for(;d<t;)a=s+u,l=a-s,o=s-(a-l)+(u-l),u=n[++d],s=a,o!==0&&(r[A++]=o);return(s!==0||A===0)&&(r[A++]=s),A}function bce(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function i1(i){return new Float64Array(i)}const _ce=(3+16*Eh)*Eh,wce=(2+12*Eh)*Eh,Sce=(9+64*Eh)*Eh*Eh,A0=i1(4),P7=i1(8),N7=i1(12),L7=i1(16),Wa=i1(4);function Tce(i,e,t,n,r,s,a){let o,l,c,u,h,d,A,x,_,S,w,C,P,L,D,B,k,U;const F=i-r,z=t-r,V=e-s,W=n-s;L=F*W,d=La*F,A=d-(d-F),x=F-A,d=La*W,_=d-(d-W),S=W-_,D=x*S-(L-A*_-x*_-A*S),B=V*z,d=La*V,A=d-(d-V),x=V-A,d=La*z,_=d-(d-z),S=z-_,k=x*S-(B-A*_-x*_-A*S),w=D-k,h=D-w,A0[0]=D-(w+h)+(h-k),C=L+w,h=C-L,P=L-(C-h)+(w-h),w=P-B,h=P-w,A0[1]=P-(w+h)+(h-B),U=C+w,h=U-C,A0[2]=C-(U-h)+(w-h),A0[3]=U;let X=bce(4,A0),J=wce*a;if(X>=J||-X>=J||(h=i-F,o=i-(F+h)+(h-r),h=t-z,c=t-(z+h)+(h-r),h=e-V,l=e-(V+h)+(h-s),h=n-W,u=n-(W+h)+(h-s),o===0&&l===0&&c===0&&u===0)||(J=Sce*a+xce*Math.abs(X),X+=F*u+W*o-(V*c+z*l),X>=J||-X>=J))return X;L=o*W,d=La*o,A=d-(d-o),x=o-A,d=La*W,_=d-(d-W),S=W-_,D=x*S-(L-A*_-x*_-A*S),B=l*z,d=La*l,A=d-(d-l),x=l-A,d=La*z,_=d-(d-z),S=z-_,k=x*S-(B-A*_-x*_-A*S),w=D-k,h=D-w,Wa[0]=D-(w+h)+(h-k),C=L+w,h=C-L,P=L-(C-h)+(w-h),w=P-B,h=P-w,Wa[1]=P-(w+h)+(h-B),U=C+w,h=U-C,Wa[2]=C-(U-h)+(w-h),Wa[3]=U;const K=TE(4,A0,4,Wa,P7);L=F*u,d=La*F,A=d-(d-F),x=F-A,d=La*u,_=d-(d-u),S=u-_,D=x*S-(L-A*_-x*_-A*S),B=V*c,d=La*V,A=d-(d-V),x=V-A,d=La*c,_=d-(d-c),S=c-_,k=x*S-(B-A*_-x*_-A*S),w=D-k,h=D-w,Wa[0]=D-(w+h)+(h-k),C=L+w,h=C-L,P=L-(C-h)+(w-h),w=P-B,h=P-w,Wa[1]=P-(w+h)+(h-B),U=C+w,h=U-C,Wa[2]=C-(U-h)+(w-h),Wa[3]=U;const Y=TE(K,P7,4,Wa,N7);L=o*u,d=La*o,A=d-(d-o),x=o-A,d=La*u,_=d-(d-u),S=u-_,D=x*S-(L-A*_-x*_-A*S),B=l*c,d=La*l,A=d-(d-l),x=l-A,d=La*c,_=d-(d-c),S=c-_,k=x*S-(B-A*_-x*_-A*S),w=D-k,h=D-w,Wa[0]=D-(w+h)+(h-k),C=L+w,h=C-L,P=L-(C-h)+(w-h),w=P-B,h=P-w,Wa[1]=P-(w+h)+(h-B),U=C+w,h=U-C,Wa[2]=C-(U-h)+(w-h),Wa[3]=U;const ee=TE(Y,N7,4,Wa,L7);return L7[ee-1]}function gy(i,e,t,n,r,s){const a=(e-s)*(t-r),o=(i-r)*(n-s),l=a-o,c=Math.abs(a+o);return Math.abs(l)>=_ce*c?l:-Tce(i,e,t,n,r,s,c)}const D7=Math.pow(2,-52),O2=new Uint32Array(512);class gx{static from(e,t=Pce,n=Nce){const r=e.length,s=new Float64Array(r*2);for(let a=0;a<r;a++){const o=e[a];s[2*a]=t(o),s[2*a+1]=n(o)}return new gx(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:s}=this,a=e.length>>1;let o=1/0,l=1/0,c=-1/0,u=-1/0;for(let F=0;F<a;F++){const z=e[2*F],V=e[2*F+1];z<o&&(o=z),V<l&&(l=V),z>c&&(c=z),V>u&&(u=V),this._ids[F]=F}const h=(o+c)/2,d=(l+u)/2;let A,x,_;for(let F=0,z=1/0;F<a;F++){const V=ME(h,d,e[2*F],e[2*F+1]);V<z&&(A=F,z=V)}const S=e[2*A],w=e[2*A+1];for(let F=0,z=1/0;F<a;F++){if(F===A)continue;const V=ME(S,w,e[2*F],e[2*F+1]);V<z&&V>0&&(x=F,z=V)}let C=e[2*x],P=e[2*x+1],L=1/0;for(let F=0;F<a;F++){if(F===A||F===x)continue;const z=Cce(S,w,C,P,e[2*F],e[2*F+1]);z<L&&(_=F,L=z)}let D=e[2*_],B=e[2*_+1];if(L===1/0){for(let V=0;V<a;V++)this._dists[V]=e[2*V]-e[0]||e[2*V+1]-e[1];F0(this._ids,this._dists,0,a-1);const F=new Uint32Array(a);let z=0;for(let V=0,W=-1/0;V<a;V++){const X=this._ids[V],J=this._dists[X];J>W&&(F[z++]=X,W=J)}this.hull=F.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(gy(S,w,C,P,D,B)<0){const F=x,z=C,V=P;x=_,C=D,P=B,_=F,D=z,B=V}const k=Rce(S,w,C,P,D,B);this._cx=k.x,this._cy=k.y;for(let F=0;F<a;F++)this._dists[F]=ME(e[2*F],e[2*F+1],k.x,k.y);F0(this._ids,this._dists,0,a-1),this._hullStart=A;let U=3;n[A]=t[_]=x,n[x]=t[A]=_,n[_]=t[x]=A,r[A]=0,r[x]=1,r[_]=2,s.fill(-1),s[this._hashKey(S,w)]=A,s[this._hashKey(C,P)]=x,s[this._hashKey(D,B)]=_,this.trianglesLen=0,this._addTriangle(A,x,_,-1,-1,-1);for(let F=0,z,V;F<this._ids.length;F++){const W=this._ids[F],X=e[2*W],J=e[2*W+1];if(F>0&&Math.abs(X-z)<=D7&&Math.abs(J-V)<=D7||(z=X,V=J,W===A||W===x||W===_))continue;let K=0;for(let ne=0,he=this._hashKey(X,J);ne<this._hashSize&&(K=s[(he+ne)%this._hashSize],!(K!==-1&&K!==n[K]));ne++);K=t[K];let Y=K,ee;for(;ee=n[Y],gy(X,J,e[2*Y],e[2*Y+1],e[2*ee],e[2*ee+1])>=0;)if(Y=ee,Y===K){Y=-1;break}if(Y===-1)continue;let se=this._addTriangle(Y,W,n[Y],-1,-1,r[Y]);r[W]=this._legalize(se+2),r[Y]=se,U++;let fe=n[Y];for(;ee=n[fe],gy(X,J,e[2*fe],e[2*fe+1],e[2*ee],e[2*ee+1])<0;)se=this._addTriangle(fe,W,ee,r[W],-1,r[fe]),r[W]=this._legalize(se+2),n[fe]=fe,U--,fe=ee;if(Y===K)for(;ee=t[Y],gy(X,J,e[2*ee],e[2*ee+1],e[2*Y],e[2*Y+1])<0;)se=this._addTriangle(ee,W,Y,-1,r[Y],r[ee]),this._legalize(se+2),r[ee]=se,n[Y]=Y,U--,Y=ee;this._hullStart=t[W]=Y,n[Y]=t[fe]=W,n[W]=fe,s[this._hashKey(X,J)]=W,s[this._hashKey(e[2*Y],e[2*Y+1])]=Y}this.hull=new Uint32Array(U);for(let F=0,z=this._hullStart;F<U;F++)this.hull[F]=z,z=n[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(Mce(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let s=0,a=0;for(;;){const o=n[e],l=e-e%3;if(a=l+(e+2)%3,o===-1){if(s===0)break;e=O2[--s];continue}const c=o-o%3,u=l+(e+1)%3,h=c+(o+2)%3,d=t[a],A=t[e],x=t[u],_=t[h];if(Ece(r[2*d],r[2*d+1],r[2*A],r[2*A+1],r[2*x],r[2*x+1],r[2*_],r[2*_+1])){t[e]=_,t[o]=d;const w=n[h];if(w===-1){let P=this._hullStart;do{if(this._hullTri[P]===h){this._hullTri[P]=e;break}P=this._hullPrev[P]}while(P!==this._hullStart)}this._link(e,w),this._link(o,n[a]),this._link(a,h);const C=c+(o+1)%3;s<O2.length&&(O2[s++]=C)}else{if(s===0)break;e=O2[--s]}}return a}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,s,a){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function Mce(i,e){const t=i/(Math.abs(i)+Math.abs(e));return(e>0?3-t:1+t)/4}function ME(i,e,t,n){const r=i-t,s=e-n;return r*r+s*s}function Ece(i,e,t,n,r,s,a,o){const l=i-a,c=e-o,u=t-a,h=n-o,d=r-a,A=s-o,x=l*l+c*c,_=u*u+h*h,S=d*d+A*A;return l*(h*S-_*A)-c*(u*S-_*d)+x*(u*A-h*d)<0}function Cce(i,e,t,n,r,s){const a=t-i,o=n-e,l=r-i,c=s-e,u=a*a+o*o,h=l*l+c*c,d=.5/(a*c-o*l),A=(c*u-o*h)*d,x=(a*h-l*u)*d;return A*A+x*x}function Rce(i,e,t,n,r,s){const a=t-i,o=n-e,l=r-i,c=s-e,u=a*a+o*o,h=l*l+c*c,d=.5/(a*c-o*l),A=i+(c*u-o*h)*d,x=e+(a*h-l*u)*d;return{x:A,y:x}}function F0(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const s=i[r],a=e[s];let o=r-1;for(;o>=t&&e[i[o]]>a;)i[o+1]=i[o--];i[o+1]=s}else{const r=t+n>>1;let s=t+1,a=n;Iv(i,r,s),e[i[t]]>e[i[n]]&&Iv(i,t,n),e[i[s]]>e[i[n]]&&Iv(i,s,n),e[i[t]]>e[i[s]]&&Iv(i,t,s);const o=i[s],l=e[o];for(;;){do s++;while(e[i[s]]<l);do a--;while(e[i[a]]>l);if(a<s)break;Iv(i,s,a)}i[t+1]=i[a],i[a]=o,n-s+1>=a-t?(F0(i,e,s,n),F0(i,e,t,a-1)):(F0(i,e,t,a-1),F0(i,e,s,n))}}function Iv(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function Pce(i){return i[0]}function Nce(i){return i[1]}function Lce(i,e){var t,n,r=0,s,a,o,l,c,u,h,d=i[0],A=i[1],x=e.length;for(t=0;t<x;t++){n=0;var _=e[t],S=_.length-1;if(u=_[0],u[0]!==_[S][0]&&u[1]!==_[S][1])throw new Error("First and last coordinates in a ring must be the same");for(a=u[0]-d,o=u[1]-A,n;n<S;n++){if(h=_[n+1],l=h[0]-d,c=h[1]-A,o===0&&c===0){if(l<=0&&a>=0||a<=0&&l>=0)return 0}else if(c>=0&&o<=0||c<=0&&o>=0){if(s=gy(a,l,o,c,0,0),s===0)return 0;(s>0&&c>0&&o<=0||s<0&&c<=0&&o>0)&&r++}u=h,o=c,a=l}}return r%2!==0}function Dce(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kce(i){return i.type==="Feature"?i.geometry:i}function Oce(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=Dce(i),r=kce(e),s=r.type,a=e.bbox;let o=r.coordinates;if(a&&Ice(n,a)===!1)return!1;s==="Polygon"&&(o=[o]);let l=!1;for(var c=0;c<o.length;++c){const u=Lce(n,o[c]);if(u===0)return!t.ignoreBoundary;u&&(l=!0)}return l}function Ice(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}var Bce=Oce;const k7=1e-6;class _p{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const r=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>k7||Math.abs(this._y1-s)>k7)&&(this._+="L"+r+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class sR{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class Fce{constructor(e,[t,n,r,s]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let s,a;const o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let _=0,S=0,w=n.length,C,P;_<w;_+=3,S+=2){const L=n[_]*2,D=n[_+1]*2,B=n[_+2]*2,k=e[L],U=e[L+1],F=e[D],z=e[D+1],V=e[B],W=e[B+1],X=F-k,J=z-U,K=V-k,Y=W-U,ee=(X*Y-J*K)*2;if(Math.abs(ee)<1e-9){if(s===void 0){s=a=0;for(const fe of t)s+=e[fe*2],a+=e[fe*2+1];s/=t.length,a/=t.length}const se=1e9*Math.sign((s-k)*Y-(a-U)*K);C=(k+V)/2-se*Y,P=(U+W)/2+se*K}else{const se=1/ee,fe=X*X+J*J,ne=K*K+Y*Y;C=k+(Y*fe-J*ne)*se,P=U+(X*ne-K*fe)*se}o[S]=C,o[S+1]=P}let l=t[t.length-1],c,u=l*4,h,d=e[2*l],A,x=e[2*l+1];r.fill(0);for(let _=0;_<t.length;++_)l=t[_],c=u,h=d,A=x,u=l*4,d=e[2*l],x=e[2*l+1],r[c+2]=r[u]=A-x,r[c+3]=r[u+1]=d-h}render(e){const t=e==null?e=new _p:void 0,{delaunay:{halfedges:n,inedges:r,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let u=0,h=n.length;u<h;++u){const d=n[u];if(d<u)continue;const A=Math.floor(u/3)*2,x=Math.floor(d/3)*2,_=a[A],S=a[A+1],w=a[x],C=a[x+1];this._renderSegment(_,S,w,C,e)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const h=Math.floor(r[c]/3)*2,d=a[h],A=a[h+1],x=l*4,_=this._project(d,A,o[x+2],o[x+3]);_&&this._renderSegment(d,A,_[0],_[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new _p:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new _p:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&t.lineTo(r[a],r[a+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new sR;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,s){let a;const o=this._regioncode(e,t),l=this._regioncode(n,r);o===0&&l===0?(s.moveTo(e,t),s.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let s=0,a=t.length;s<a;s+=2)for(let o=0,l=r.length;o<l;o+=2)if(t[s]===r[o]&&t[s+1]===r[o+1]&&t[(s+2)%a]===r[(o+l-2)%l]&&t[(s+3)%a]===r[(o+l-1)%l]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:s}}=this,a=n[e];if(a===-1)return null;const o=[];let l=a;do{const c=Math.floor(l/3);if(o.push(t[c*2],t[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==a&&l!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r=null,s,a,o=t[n-2],l=t[n-1],c,u=this._regioncode(o,l),h,d=0;for(let A=0;A<n;A+=2)if(s=o,a=l,o=t[A],l=t[A+1],c=u,u=this._regioncode(o,l),c===0&&u===0)h=d,d=0,r?r.push(o,l):r=[o,l];else{let x,_,S,w,C;if(c===0){if((x=this._clipSegment(s,a,o,l,c,u))===null)continue;[_,S,w,C]=x}else{if((x=this._clipSegment(o,l,s,a,u,c))===null)continue;[w,C,_,S]=x,h=d,d=this._edgecode(_,S),h&&d&&this._edge(e,h,d,r,r.length),r?r.push(_,S):r=[_,S]}h=d,d=this._edgecode(w,C),h&&d&&this._edge(e,h,d,r,r.length),r?r.push(w,C):r=[w,C]}if(r)h=d,d=this._edgecode(r[0],r[1]),h&&d&&this._edge(e,h,d,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,s,a){const o=s<a;for(o&&([e,t,n,r,s,a]=[n,r,e,t,a,s]);;){if(s===0&&a===0)return o?[n,r,e,t]:[e,t,n,r];if(s&a)return null;let l,c,u=s||a;u&8?(l=e+(n-e)*(this.ymax-t)/(r-t),c=this.ymax):u&4?(l=e+(n-e)*(this.ymin-t)/(r-t),c=this.ymin):u&2?(c=t+(r-t)*(this.xmax-e)/(n-e),l=this.xmax):(c=t+(r-t)*(this.xmin-e)/(n-e),l=this.xmin),s?(e=l,t=c,s=this._regioncode(e,t)):(n=l,r=c,a=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,s,a){let o=Array.from(t),l;if((l=this._project(o[0],o[1],n,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(e,o))for(let c=0,u=o.length,h,d=this._edgecode(o[u-2],o[u-1]);c<u;c+=2)h=d,d=this._edgecode(o[c],o[c+1]),h&&d&&(c=this._edge(e,h,d,o,c),u=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,n,r,s){for(;t!==n;){let a,o;switch(t){case 5:t=4;continue;case 4:t=6,a=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,a=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,a=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,a=this.xmin,o=this.ymin;break}(r[s]!==a||r[s+1]!==o)&&this.contains(e,a,o)&&(r.splice(s,0,a,o),s+=2)}return s}_project(e,t,n,r){let s=1/0,a,o,l;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<s&&(l=this.ymin,o=e+(s=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<s&&(l=this.ymax,o=e+(s=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<s&&(o=this.xmax,l=t+(s=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<s&&(o=this.xmin,l=t+(s=a)*r)}return[o,l]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const Uce=2*Math.PI,g0=Math.pow;function zce(i){return i[0]}function Gce(i){return i[1]}function Vce(i){const{triangles:e,coords:t}=i;for(let n=0;n<e.length;n+=3){const r=2*e[n],s=2*e[n+1],a=2*e[n+2];if((t[a]-t[r])*(t[s+1]-t[r+1])-(t[s]-t[r])*(t[a+1]-t[r+1])>1e-10)return!1}return!0}function Hce(i,e,t){return[i+Math.sin(i+e)*t,e+Math.cos(i-e)*t]}class Z6{static from(e,t=zce,n=Gce,r){return new Z6("length"in e?qce(e,t,n,r):Float64Array.from(Wce(e,t,n,r)))}constructor(e){this._delaunator=new gx(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&Vce(e)){this.collinear=Int32Array.from({length:t.length/2},(d,A)=>A).sort((d,A)=>t[2*d]-t[2*A]||t[2*d+1]-t[2*A+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[t[2*l],t[2*l+1],t[2*c],t[2*c+1]],h=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,A=t.length/2;d<A;++d){const x=Hce(t[2*d],t[2*d+1],h);t[2*d]=x[0],t[2*d+1]=x[1]}this._delaunator=new gx(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,c=n.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(n[l]===-1||a[u]===-1)&&(a[u]=l)}for(let l=0,c=r.length;l<c;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new Fce(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:s,triangles:a,collinear:o}=this;if(o){const h=o.indexOf(e);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=t[e];if(l===-1)return;let c=l,u=-1;do{if(yield u=a[c],c=c%3===2?c-2:c+1,a[c]!==e)return;if(c=s[c],c===-1){const h=n[(r[e]+1)%n.length];h!==u&&(yield h);return}}while(c!==l)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const r=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==r;)n=s;return s}_step(e,t,n){const{inedges:r,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:c}=this;if(r[e]===-1||!c.length)return(e+1)%(c.length>>1);let u=e,h=g0(t-c[e*2],2)+g0(n-c[e*2+1],2);const d=r[e];let A=d;do{let x=l[A];const _=g0(t-c[x*2],2)+g0(n-c[x*2+1],2);if(_<h&&(h=_,u=x),A=A%3===2?A-2:A+1,l[A]!==e)break;if(A=o[A],A===-1){if(A=s[(a[e]+1)%s.length],A!==x&&g0(t-c[A*2],2)+g0(n-c[A*2+1],2)<h)return A;break}}while(A!==d);return u}render(e){const t=e==null?e=new _p:void 0,{points:n,halfedges:r,triangles:s}=this;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l<a)continue;const c=s[a]*2,u=s[l]*2;e.moveTo(n[c],n[c+1]),e.lineTo(n[u],n[u+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new _p:void 0,{points:r}=this;for(let s=0,a=r.length;s<a;s+=2){const o=r[s],l=r[s+1];e.moveTo(o+t,l),e.arc(o,l,t,0,Uce)}return n&&n.value()}renderHull(e){const t=e==null?e=new _p:void 0,{hull:n,points:r}=this,s=n[0]*2,a=n.length;e.moveTo(r[s],r[s+1]);for(let o=1;o<a;++o){const l=2*n[o];e.lineTo(r[l],r[l+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new sR;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new _p:void 0,{points:r,triangles:s}=this,a=s[e*=3]*2,o=s[e+1]*2,l=s[e+2]*2;return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[l],r[l+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new sR;return this.renderTriangle(e,t),t.value()}}function qce(i,e,t,n){const r=i.length,s=new Float64Array(r*2);for(let a=0;a<r;++a){const o=i[a];s[a*2]=e.call(n,o,a,i),s[a*2+1]=t.call(n,o,a,i)}return s}function*Wce(i,e,t,n){let r=0;for(const s of i)yield e.call(n,s,r,i),yield t.call(n,s,r,i),++r}const K6=Math.PI,O7=K6/2,I7=180/K6,B7=K6/180,jce=Math.atan2,F7=Math.cos,Xce=Math.max,Yce=Math.min,U7=Math.sin,$ce=Math.sign||function(i){return i>0?1:i<0?-1:0},yz=Math.sqrt;function Qce(i){return i>1?O7:i<-1?-O7:Math.asin(i)}function xz(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Zo(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function Vw(i,e){return[i[0]+e[0],i[1]+e[1],i[2]+e[2]]}function Hw(i){var e=yz(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return[i[0]/e,i[1]/e,i[2]/e]}function J6(i){return[jce(i[1],i[0])*I7,Qce(Xce(-1,Yce(1,i[2])))*I7]}function pu(i){const e=i[0]*B7,t=i[1]*B7,n=F7(t);return[n*F7(e),n*U7(e),U7(t)]}function e8(i){return i=i.map(e=>pu(e)),xz(i[0],Zo(i[2],i[1]))}function Zce(i){const e=Jce(i),t=tue(e),n=eue(t,i),r=iue(t,i.length),s=Kce(r,i),a=nue(t,i),{polygons:o,centers:l}=rue(a,t,i),c=sue(o),u=oue(t,i),h=aue(n,t);return{delaunay:e,edges:n,triangles:t,centers:l,neighbors:r,polygons:o,mesh:c,hull:u,urquhart:h,find:s}}function Kce(i,e){function t(n,r){let s=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return s*s+a*a+o*o}return function(r,s,a){a===void 0&&(a=0);let o,l,c=a;const u=pu([r,s]);do o=a,a=null,l=t(u,pu(e[o])),i[o].forEach(h=>{let d=t(u,pu(e[h]));if(d<l){l=d,a=h,c=h;return}});while(a!==null);return c}}function Jce(i){if(i.length<2)return{};let e=0;for(;isNaN(i[e][0]+i[e][1])&&e++<i.length;);const t=zae(i[e]),n=yoe().translate([0,0]).scale(1).rotate(t.invert([180,0]));i=i.map(n);const r=[];let s=1;for(let h=0,d=i.length;h<d;h++){let A=i[h][0]**2+i[h][1]**2;!isFinite(A)||A>1e32?r.push(h):A>s&&(s=A)}const a=1e6*yz(s);r.forEach(h=>i[h]=[a,0]),i.push([0,a]),i.push([-a,0]),i.push([0,-a]);const o=Z6.from(i);o.projection=n;const{triangles:l,halfedges:c,inedges:u}=o;for(let h=0,d=c.length;h<d;h++)if(c[h]<0){const A=h%3==2?h-2:h+1,x=h%3==0?h+2:h-1,_=c[A],S=c[x];c[_]=S,c[S]=_,c[A]=c[x]=-1,l[h]=l[A]=l[x]=e,u[l[_]]=_%3==0?_+2:_-1,u[l[S]]=S%3==0?S+2:S-1,h+=2-h%3}else l[h]>i.length-3-1&&(l[h]=e);return o}function eue(i,e){const t=new Set;return e.length===2?[[0,1]]:(i.forEach(n=>{if(n[0]!==n[1]&&!(e8(n.map(r=>e[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,t.add(pw([n[r],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function tue(i){const{triangles:e}=i;if(!e)return[];const t=[];for(let n=0,r=e.length/3;n<r;n++){const s=e[3*n],a=e[3*n+1],o=e[3*n+2];s!==a&&a!==o&&t.push([s,o,a])}return t}function nue(i,e){return i.map(t=>{const n=t.map(s=>e[s]).map(pu),r=Vw(Vw(Zo(n[1],n[0]),Zo(n[2],n[1])),Zo(n[0],n[2]));return J6(Hw(r))})}function iue(i,e){const t=[];return i.forEach(n=>{for(let r=0;r<3;r++){const s=n[r],a=n[(r+1)%3];t[s]=t[s]||[],t[s].push(a)}}),i.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function rue(i,e,t){const n=[],r=i.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:r};if(t.length===2){const o=pu(t[0]),l=pu(t[1]),c=Hw(Vw(o,l)),u=Hw(Zo(o,l)),h=Zo(c,u),d=[c,Zo(c,h),Zo(Zo(c,h),h),Zo(Zo(Zo(c,h),h),h)].map(J6).map(a);return n.push(d),n.push(d.slice().reverse()),{polygons:n,centers:r}}}e.forEach((o,l)=>{for(let c=0;c<3;c++){const u=o[c],h=o[(c+1)%3],d=o[(c+2)%3];n[u]=n[u]||[],n[u].push([h,d,l,[u,h,d]])}});const s=n.map(o=>{const l=[o[0][2]];let c=o[0][1];for(let u=1;u<o.length;u++)for(let h=0;h<o.length;h++)if(o[h][0]==c){c=o[h][1],l.push(o[h][2]);break}if(l.length>2)return l;if(l.length==2){const u=z7(t[o[0][3][0]],t[o[0][3][1]],r[l[0]]),h=z7(t[o[0][3][2]],t[o[0][3][0]],r[l[0]]),d=a(u),A=a(h);return[l[0],A,l[1],d]}});function a(o){let l=-1;return r.slice(e.length,1/0).forEach((c,u)=>{c[0]===o[0]&&c[1]===o[1]&&(l=u+e.length)}),l<0&&(l=r.length,r.push(o)),l}return{polygons:s,centers:r}}function z7(i,e,t){i=pu(i),e=pu(e),t=pu(t);const n=$ce(xz(Zo(e,i),t));return J6(Hw(Vw(i,e)).map(r=>n*r))}function sue(i){const e=[];return i.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let r of t)r>n&&e.push([n,r]),n=r}),e}function aue(i,e){return function(t){const n=new Map,r=new Map;return i.forEach((s,a)=>{const o=s.join("-");n.set(o,t[a]),r.set(o,!0)}),e.forEach(s=>{let a=0,o=-1;for(let l=0;l<3;l++){let c=pw([s[l],s[(l+1)%3]]).join("-");n.get(c)>a&&(a=n.get(c),o=c)}r.set(o,!1)}),i.map(s=>r.get(s.join("-")))}}function oue(i,e){const t=new Set,n=[];i.map(o=>{if(!(e8(o.map(l=>e[l>e.length?0:l]))>1e-12))for(let l=0;l<3;l++){let c=[o[l],o[(l+1)%3]],u=`${c[0]}-${c[1]}`;t.has(u)?t.delete(u):t.add(`${c[1]}-${c[0]}`)}});const r=new Map;let s;if(t.forEach(o=>{o=o.split("-").map(Number),r.set(o[0],o[1]),s=o[0]}),s===void 0)return n;let a=s;do{n.push(a);let o=r.get(a);r.set(a,-1),a=o}while(a>-1&&a!==s);return n}function lue(i){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(r=>[e._vx(r),e._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));e.points=n.map(r=>[r[0],r[1]]),e.valid=n.map(r=>r[2]),e.delaunay=Zce(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return ZO(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return ZO(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((r,s)=>n.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(a=>e.delaunay.centers[a])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,r)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[r],n)).filter(n=>e8(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>ud(e.points[s[0]],e.points[s[1]])),r=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,a)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[a],urquhart:!!r[a]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:r}=e.delaunay,s=[];for(const a of r)if(a)for(let o=a.length,l=a[o-1],c=a[0],u=0;u<o;l=c,c=a[++u])c>l&&s.push([n[l],n[c]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,r){if(e._found=e.delaunay.find(t,n,e._found),!r||ud([t,n],e.points[e._found])<r)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,r=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>r[s]),r[n[0]]]]}},i?e(i):e}function aR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function cue(i){if(Array.isArray(i))return i}function uue(i){if(Array.isArray(i))return aR(i)}function hue(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fue(i,e,t){return e=qw(e),xue(i,bz()?Reflect.construct(e,[],qw(i).constructor):e.apply(i,t))}function due(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function pue(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function qw(i){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qw(i)}function Aue(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&oR(i,e)}function bz(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bz=function(){return!!i})()}function gue(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mue(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function vue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xue(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hue(i)}function oR(i,e){return oR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},oR(i,e)}function su(i,e){return cue(i)||mue(i,e)||_z(i,e)||vue()}function EE(i){return uue(i)||gue(i)||_z(i)||yue()}function _z(i,e){if(i){if(typeof i=="string")return aR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?aR(i,e):void 0}}function bue(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,r=_ue(i,n),s=lx(r),a=wue(i,n),o=[].concat(EE(s),EE(a)),l={type:"Polygon",coordinates:i},c=VU(l),u=su(c,2),h=su(u[0],2),d=h[0],A=h[1],x=su(u[1],2),_=x[0],S=x[1],w=d>_||S>=89||A<=-89,C=[];if(w){var P=lue(o).triangles(),L=new Map(o.map(function(ee,se){var fe=su(ee,2),ne=fe[0],he=fe[1];return["".concat(ne,"-").concat(he),se]}));P.features.forEach(function(ee){var se,fe=ee.geometry.coordinates[0].slice(0,3).reverse(),ne=[];if(fe.forEach(function(Te){var Pe=su(Te,2),_e=Pe[0],Ie=Pe[1],Ve="".concat(_e,"-").concat(Ie);L.has(Ve)&&ne.push(L.get(Ve))}),ne.length===3){if(ne.some(function(Te){return Te<s.length})){var he=ee.properties.circumcenter;if(!lR(he,l,w))return}(se=C).push.apply(se,ne)}})}else if(a.length)for(var F=gx.from(o),z=function(se){var fe,ne=[2,1,0].map(function(Pe){return F.triangles[se+Pe]}),he=ne.map(function(Pe){return o[Pe]});if(ne.some(function(Pe){return Pe<s.length})){var Te=[0,1].map(function(Pe){return Dse(he,function(_e){return _e[Pe]})});if(!lR(Te,l,w))return 1}(fe=C).push.apply(fe,EE(ne))},V=0,W=F.triangles.length;V<W;V+=3)z(V);else{var D=Fw(r),B=D.vertices,k=D.holes,U=k===void 0?[]:k;C=Hoe(B,U,2)}var X=Lh(pw(o,function(ee){return ee[0]}),[0,1]),J=Lh(pw(o,function(ee){return ee[1]}),[0,1]),K=o.map(function(ee){var se=su(ee,2),fe=se[0],ne=se[1];return[X(fe),J(ne)]}),Y={points:o,indices:C,uvs:K};return{contour:r,triangles:Y}}function _ue(i,e){return i.map(function(t){var n=[],r;return t.forEach(function(s){if(r){var a=ud(s,r)*180/Math.PI;if(a>e)for(var o=W6(r,s),l=1/Math.ceil(a/e),c=l;c<1;)n.push(o(c)),c+=l}n.push(r=s)}),n})}function wue(i,e){var t={type:"Polygon",coordinates:i},n=VU(t),r=su(n,2),s=su(r[0],2),a=s[0],o=s[1],l=su(r[1],2),c=l[0],u=l[1];if(Math.min(Math.abs(c-a),Math.abs(u-o))<e)return[];var h=a>c||u>=89||o<=-89;return Sue(e,{minLng:a,maxLng:c,minLat:o,maxLat:u}).filter(function(d){return lR(d,t,h)})}function Sue(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,r=e.minLat,s=e.maxLat,a=Math.round(Math.pow(360/i,2)/Math.PI),o=(1+Math.sqrt(5))/2,l=function(w){return w/o*360%360-180},c=function(w){return Math.acos(2*w/a-1)/Math.PI*180-90},u=function(w){return a*(Math.cos((w+90)*Math.PI/180)+1)/2},h=[s!==void 0?Math.ceil(u(s)):0,r!==void 0?Math.floor(u(r)):a-1],d=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(S){return S<=n}:n===void 0?function(S){return S>=t}:n>=t?function(S){return S>=t&&S<=n}:function(S){return S>=t||S<=n},A=[],x=h[0];x<=h[1];x++){var _=l(x);d(_)&&A.push([_,c(x)])}return A}function lR(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?ioe(e,i):Bce(i,e)}var F_=window.THREE?window.THREE:{BufferGeometry:lr,Float32BufferAttribute:ki},G7=new F_.BufferGeometry().setAttribute?"setAttribute":"addAttribute",t8=function(i){function e(t,n,r,s,a,o,l){var c;due(this,e),c=fue(this,e),c.type="ConicPolygonGeometry",c.parameters={polygonGeoJson:t,bottomHeight:n,topHeight:r,closedBottom:s,closedTop:a,includeSides:o,curvatureResolution:l},n=n||0,r=r||1,s=s!==void 0?s:!0,a=a!==void 0?a:!0,o=o!==void 0?o:!0,l=l||5;var u=bue(t,{resolution:l}),h=u.contour,d=u.triangles,A=lx(d.uvs),x=[],_=[],S=[],w=0,C=function(k){var U=Math.round(x.length/3),F=S.length;x=x.concat(k.vertices),_=_.concat(k.uvs),S=S.concat(U?k.indices.map(function(z){return z+U}):k.indices),c.addGroup(F,S.length-F,w++)};o&&C(L()),s&&C(D(n,!1)),a&&C(D(r,!0)),c.setIndex(S),c[G7]("position",new F_.Float32BufferAttribute(x,3)),c[G7]("uv",new F_.Float32BufferAttribute(_,2)),c.computeVertexNormals();function P(B,k){var U=typeof k=="function"?k:function(){return k},F=B.map(function(z){return z.map(function(V){var W=su(V,2),X=W[0],J=W[1];return Tue(J,X,U(X,J))})});return Fw(F)}function L(){for(var B=P(h,n),k=B.vertices,U=B.holes,F=P(h,r),z=F.vertices,V=lx([z,k]),W=Math.round(z.length/3),X=new Set(U),J=0,K=[],Y=0;Y<W;Y++){var ee=Y+1;if(ee===W)ee=J;else if(X.has(ee)){var se=ee;ee=J,J=se}K.push(Y,Y+W,ee+W),K.push(ee+W,ee,Y)}for(var fe=[],ne=1;ne>=0;ne--)for(var he=0;he<W;he+=1)fe.push(he/(W-1),ne);return{indices:K,vertices:V,uvs:fe}}function D(B){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:k?d.indices:d.indices.slice().reverse(),vertices:P([d.points],B).vertices,uvs:A}}return c}return Aue(e,i),pue(e)}(F_.BufferGeometry);function Tue(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function cR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Mue(i){if(Array.isArray(i))return i}function Eue(i){if(Array.isArray(i))return cR(i)}function Cue(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Rue(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function Pue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lue(i,e){if(i==null)return{};var t,n,r=Due(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function Due(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function kue(i,e){return Mue(i)||Rue(i,e)||wz(i,e)||Pue()}function Oue(i){return Eue(i)||Cue(i)||wz(i)||Nue()}function Iue(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Bue(i){var e=Iue(i,"string");return typeof e=="symbol"?e:e+""}function wz(i,e){if(i){if(typeof i=="string")return cR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cR(i,e):void 0}}var Fue=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(o){return{keyAccessor:o,isProp:!(o instanceof Function)}}),s=i.reduce(function(o,l){var c=o,u=l;return r.forEach(function(h,d){var A=h.keyAccessor,x=h.isProp,_;if(x){var S=u,w=S[A],C=Lue(S,[A].map(Bue));_=w,u=C}else _=A(u,d);d+1<r.length?(c.hasOwnProperty(_)||(c[_]={}),c=c[_]):t?(c.hasOwnProperty(_)||(c[_]=[]),c[_].push(u)):c[_]=u}),o},{});t instanceof Function&&function o(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===r.length?Object.keys(l).forEach(function(u){return l[u]=t(l[u])}):Object.values(l).forEach(function(u){return o(u,c+1)})}(s);var a=s;return n&&(a=[],function o(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===r.length?a.push({keys:c,vals:l}):Object.entries(l).forEach(function(u){var h=kue(u,2),d=h[0],A=h[1];return o(A,[].concat(Oue(c),[d]))})}(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a},Ri=function(i){i=i||{};var e=typeof i<"u"?i:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r="";function s(qe){return e.locateFile?e.locateFile(qe,r):r+qe}var a;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",a=function(st,St,ft){var m=new XMLHttpRequest;m.open("GET",st,!0),m.responseType="arraybuffer",m.onload=function(){if(m.status==200||m.status==0&&m.response){St(m.response);return}var xn=mn(st);if(xn){St(xn.buffer);return}ft()},m.onerror=ft,m.send(null)};var o=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var c=0,u=function(qe){c=qe},h=function(){return c},d=8;function A(qe,st,St,ft){switch(St=St||"i8",St.charAt(St.length-1)==="*"&&(St="i32"),St){case"i1":W[qe>>0]=st;break;case"i8":W[qe>>0]=st;break;case"i16":J[qe>>1]=st;break;case"i32":K[qe>>2]=st;break;case"i64":He=[st>>>0,(oe=st,+jt(oe)>=1?oe>0?(gt(+Dt(oe/4294967296),4294967295)|0)>>>0:~~+de((oe-+(~~oe>>>0))/4294967296)>>>0:0)],K[qe>>2]=He[0],K[qe+4>>2]=He[1];break;case"float":Y[qe>>2]=st;break;case"double":ee[qe>>3]=st;break;default:Gi("invalid type for setValue: "+St)}}function x(qe,st,St){switch(st=st||"i8",st.charAt(st.length-1)==="*"&&(st="i32"),st){case"i1":return W[qe>>0];case"i8":return W[qe>>0];case"i16":return J[qe>>1];case"i32":return K[qe>>2];case"i64":return K[qe>>2];case"float":return Y[qe>>2];case"double":return ee[qe>>3];default:Gi("invalid type for getValue: "+st)}return null}var _=!1;function S(qe,st){qe||Gi("Assertion failed: "+st)}function w(qe){var st=e["_"+qe];return S(st,"Cannot call unknown function "+qe+", make sure it is exported"),st}function C(qe,st,St,ft,m){var ie={string:function(hn){var Ps=0;if(hn!=null&&hn!==0){var Ql=(hn.length<<2)+1;Ps=Mt(Ql),U(hn,Ps,Ql)}return Ps},array:function(hn){var Ps=Mt(hn.length);return F(hn,Ps),Ps}};function xn(hn){return st==="string"?B(hn):st==="boolean"?!!hn:hn}var Gn=w(qe),mi=[],wn=0;if(ft)for(var Zn=0;Zn<ft.length;Zn++){var Rs=ie[St[Zn]];Rs?(wn===0&&(wn=Ot()),mi[Zn]=Rs(ft[Zn])):mi[Zn]=ft[Zn]}var ni=Gn.apply(null,mi);return ni=xn(ni),wn!==0&&en(wn),ni}function P(qe,st,St,ft){St=St||[];var m=St.every(function(xn){return xn==="number"}),ie=st!=="string";return ie&&m&&!ft?w(qe):function(){return C(qe,st,St,arguments)}}var L=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function D(qe,st,St){for(var ft=st+St,m=st;qe[m]&&!(m>=ft);)++m;if(m-st>16&&qe.subarray&&L)return L.decode(qe.subarray(st,m));for(var ie="";st<m;){var xn=qe[st++];if(!(xn&128)){ie+=String.fromCharCode(xn);continue}var Gn=qe[st++]&63;if((xn&224)==192){ie+=String.fromCharCode((xn&31)<<6|Gn);continue}var mi=qe[st++]&63;if((xn&240)==224?xn=(xn&15)<<12|Gn<<6|mi:xn=(xn&7)<<18|Gn<<12|mi<<6|qe[st++]&63,xn<65536)ie+=String.fromCharCode(xn);else{var wn=xn-65536;ie+=String.fromCharCode(55296|wn>>10,56320|wn&1023)}}return ie}function B(qe,st){return qe?D(X,qe,st):""}function k(qe,st,St,ft){if(!(ft>0))return 0;for(var m=St,ie=St+ft-1,xn=0;xn<qe.length;++xn){var Gn=qe.charCodeAt(xn);if(Gn>=55296&&Gn<=57343){var mi=qe.charCodeAt(++xn);Gn=65536+((Gn&1023)<<10)|mi&1023}if(Gn<=127){if(St>=ie)break;st[St++]=Gn}else if(Gn<=2047){if(St+1>=ie)break;st[St++]=192|Gn>>6,st[St++]=128|Gn&63}else if(Gn<=65535){if(St+2>=ie)break;st[St++]=224|Gn>>12,st[St++]=128|Gn>>6&63,st[St++]=128|Gn&63}else{if(St+3>=ie)break;st[St++]=240|Gn>>18,st[St++]=128|Gn>>12&63,st[St++]=128|Gn>>6&63,st[St++]=128|Gn&63}}return st[St]=0,St-m}function U(qe,st,St){return k(qe,X,st,St)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function F(qe,st){W.set(qe,st)}function z(qe,st){return qe%st>0&&(qe+=st-qe%st),qe}var V,W,X,J,K,Y,ee;function se(qe){V=qe,e.HEAP8=W=new Int8Array(qe),e.HEAP16=J=new Int16Array(qe),e.HEAP32=K=new Int32Array(qe),e.HEAPU8=X=new Uint8Array(qe),e.HEAPU16=new Uint16Array(qe),e.HEAPU32=new Uint32Array(qe),e.HEAPF32=Y=new Float32Array(qe),e.HEAPF64=ee=new Float64Array(qe)}var fe=5271520,ne=28608,he=e.TOTAL_MEMORY||33554432;e.buffer?V=e.buffer:V=new ArrayBuffer(he),he=V.byteLength,se(V),K[ne>>2]=fe;function Te(qe){for(;qe.length>0;){var st=qe.shift();if(typeof st=="function"){st();continue}var St=st.func;typeof St=="number"?st.arg===void 0?e.dynCall_v(St):e.dynCall_vi(St,st.arg):St(st.arg===void 0?null:st.arg)}}var Pe=[],_e=[],Ie=[],Ve=[];function $e(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Vt(e.preRun.shift());Te(Pe)}function Je(){Te(_e)}function vt(){Te(Ie)}function pt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)fn(e.postRun.shift());Te(Ve)}function Vt(qe){Pe.unshift(qe)}function fn(qe){Ve.unshift(qe)}var jt=Math.abs,de=Math.ceil,Dt=Math.floor,gt=Math.min,Ct=0,at=null;function Yt(qe){Ct++,e.monitorRunDependencies&&e.monitorRunDependencies(Ct)}function Rt(qe){if(Ct--,e.monitorRunDependencies&&e.monitorRunDependencies(Ct),Ct==0&&at){var st=at;at=null,st()}}e.preloadedImages={},e.preloadedAudios={};var kt=null,an="data:application/octet-stream;base64,";function be(qe){return String.prototype.startsWith?qe.startsWith(an):qe.indexOf(an)===0}var oe,He;kt="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var tt=28624;function ct(qe,st,St,ft){Gi("Assertion failed: "+B(qe)+", at: "+[st?B(st):"unknown filename",St,ft?B(ft):"unknown function"])}function et(){return W.length}function Xt(qe,st,St){X.set(X.subarray(st,st+St),qe)}function Gt(qe){return e.___errno_location&&(K[e.___errno_location()>>2]=qe),qe}function ln(qe){Gi("OOM")}function dn(qe){try{var st=new ArrayBuffer(qe);return st.byteLength!=qe?void 0:(new Int8Array(st).set(W),Ht(st),se(st),1)}catch{}}function _t(qe){var st=et(),St=16777216,ft=2147483648-St;if(qe>ft)return!1;for(var m=16777216,ie=Math.max(st,m);ie<qe;)ie<=536870912?ie=z(2*ie,St):ie=Math.min(z((3*ie+2147483648)/4,St),ft);var xn=dn(ie);return!!xn}var Zt=typeof atob=="function"?atob:function(qe){var st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",St="",ft,m,ie,xn,Gn,mi,wn,Zn=0;qe=qe.replace(/[^A-Za-z0-9\+\/\=]/g,"");do xn=st.indexOf(qe.charAt(Zn++)),Gn=st.indexOf(qe.charAt(Zn++)),mi=st.indexOf(qe.charAt(Zn++)),wn=st.indexOf(qe.charAt(Zn++)),ft=xn<<2|Gn>>4,m=(Gn&15)<<4|mi>>2,ie=(mi&3)<<6|wn,St=St+String.fromCharCode(ft),mi!==64&&(St=St+String.fromCharCode(m)),wn!==64&&(St=St+String.fromCharCode(ie));while(Zn<qe.length);return St};function yn(qe){try{for(var st=Zt(qe),St=new Uint8Array(st.length),ft=0;ft<st.length;++ft)St[ft]=st.charCodeAt(ft);return St}catch{throw new Error("Converting base64 string to bytes failed.")}}function mn(qe){if(be(qe))return yn(qe.slice(an.length))}var zt={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},zn={b:u,c:h,d:ct,e:Gt,f:et,g:Xt,h:_t,i:ln,o:tt,p:ne},Ae=function(qe,st,St){"almost asm";var ft=new qe.Int8Array(St),m=new qe.Int32Array(St);new qe.Uint8Array(St),new qe.Float32Array(St);var ie=new qe.Float64Array(St),xn=st.o|0,Gn=st.p|0,mi=qe.Math.floor,wn=qe.Math.abs,Zn=qe.Math.sqrt,Rs=qe.Math.pow,ni=qe.Math.cos,hn=qe.Math.sin,Ps=qe.Math.tan,Ql=qe.Math.acos,hs=qe.Math.asin,ue=qe.Math.atan,Oe=qe.Math.atan2,Qe=qe.Math.ceil,Ye=qe.Math.imul,Ue=qe.Math.min,It=qe.Math.max,Ut=qe.Math.clz32,dt=st.b,ae=st.c,Lt=st.d,Nn=st.e,bn=st.f,di=st.g,Ii=st.h,cr=st.i,re=28640;function wi(g){return ft=new Int8Array(g),m=new Int32Array(g),ie=new Float64Array(g),St=g,!0}function Dn(g){g=g|0;var v=0;return v=re,re=re+g|0,re=re+15&-16,v|0}function Ir(){return re|0}function Pi(g){g=g|0,re=g}function Ws(g,v){g=g|0,re=g}function Uc(g,v){g=g|0,v=v|0;var y=0,T=0,M=0;return(g|0)<0?(v=2,v|0):(g|0)>13780509?(v=_A(15,v)|0,v|0):(y=((g|0)<0)<<31>>31,M=qr(g|0,y|0,3,0)|0,T=ae()|0,y=Qt(g|0,y|0,1,0)|0,y=qr(M|0,T|0,y|0,ae()|0)|0,y=Qt(y|0,ae()|0,1,0)|0,g=ae()|0,m[v>>2]=y,m[v+4>>2]=g,v=0,v|0)}function tr(g,v,y,T){return g=g|0,v=v|0,y=y|0,T=T|0,dl(g,v,y,T,0)|0}function dl(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0;if(G=re,re=re+16|0,N=G,!(Qi(g,v,y,T,M)|0))return T=0,re=G,T|0;do if((y|0)>=0){if((y|0)>13780509){if(R=_A(15,N)|0,R|0)break;O=N,N=m[O>>2]|0,O=m[O+4>>2]|0}else R=((y|0)<0)<<31>>31,q=qr(y|0,R|0,3,0)|0,O=ae()|0,R=Qt(y|0,R|0,1,0)|0,R=qr(q|0,O|0,R|0,ae()|0)|0,R=Qt(R|0,ae()|0,1,0)|0,O=ae()|0,m[N>>2]=R,m[N+4>>2]=O,N=R;if(Sl(T|0,0,N<<3|0)|0,M|0){Sl(M|0,0,N<<2|0)|0,R=wr(g,v,y,T,M,N,O,0)|0;break}R=lo(N,4)|0,R?(q=wr(g,v,y,T,R,N,O,0)|0,kn(R),R=q):R=13}else R=2;while(!1);return q=R,re=G,q|0}function Qi(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0;if(Me=re,re=re+16|0,ge=Me,me=Me+8|0,xe=ge,m[xe>>2]=g,m[xe+4>>2]=v,(y|0)<0)return me=2,re=Me,me|0;if(R=T,m[R>>2]=g,m[R+4>>2]=v,R=(M|0)!=0,R&&(m[M>>2]=0),Ni(g,v)|0)return me=9,re=Me,me|0;m[me>>2]=0;e:do if((y|0)>=1)if(R)for(Q=1,q=0,le=0,xe=1,R=g;;){if(!(q|le)){if(R=vi(R,v,4,me,ge)|0,R|0)break e;if(v=ge,R=m[v>>2]|0,v=m[v+4>>2]|0,Ni(R,v)|0){R=9;break e}}if(R=vi(R,v,m[26800+(le<<2)>>2]|0,me,ge)|0,R|0)break e;if(v=ge,R=m[v>>2]|0,v=m[v+4>>2]|0,g=T+(Q<<3)|0,m[g>>2]=R,m[g+4>>2]=v,m[M+(Q<<2)>>2]=xe,g=q+1|0,N=(g|0)==(xe|0),O=le+1|0,G=(O|0)==6,Ni(R,v)|0){R=9;break e}if(xe=xe+(G&N&1)|0,(xe|0)>(y|0)){R=0;break}else Q=Q+1|0,q=N?0:g,le=N?G?0:O:le}else for(Q=1,q=0,le=0,xe=1,R=g;;){if(!(q|le)){if(R=vi(R,v,4,me,ge)|0,R|0)break e;if(v=ge,R=m[v>>2]|0,v=m[v+4>>2]|0,Ni(R,v)|0){R=9;break e}}if(R=vi(R,v,m[26800+(le<<2)>>2]|0,me,ge)|0,R|0)break e;if(v=ge,R=m[v>>2]|0,v=m[v+4>>2]|0,g=T+(Q<<3)|0,m[g>>2]=R,m[g+4>>2]=v,g=q+1|0,N=(g|0)==(xe|0),O=le+1|0,G=(O|0)==6,Ni(R,v)|0){R=9;break e}if(xe=xe+(G&N&1)|0,(xe|0)>(y|0)){R=0;break}else Q=Q+1|0,q=N?0:g,le=N?G?0:O:le}else R=0;while(!1);return me=R,re=Me,me|0}function wr(g,v,y,T,M,R,N,O){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,R=R|0,N=N|0,O=O|0;var G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0;if(Me=re,re=re+16|0,ge=Me+8|0,me=Me,G=Ju(g|0,v|0,R|0,N|0)|0,Q=ae()|0,le=T+(G<<3)|0,De=le,je=m[De>>2]|0,De=m[De+4>>2]|0,q=(je|0)==(g|0)&(De|0)==(v|0),!((je|0)==0&(De|0)==0|q))do G=Qt(G|0,Q|0,1,0)|0,G=ff(G|0,ae()|0,R|0,N|0)|0,Q=ae()|0,le=T+(G<<3)|0,je=le,De=m[je>>2]|0,je=m[je+4>>2]|0,q=(De|0)==(g|0)&(je|0)==(v|0);while(!((De|0)==0&(je|0)==0|q));if(G=M+(G<<2)|0,q&&(m[G>>2]|0)<=(O|0)||(je=le,m[je>>2]=g,m[je+4>>2]=v,m[G>>2]=O,(O|0)>=(y|0)))return je=0,re=Me,je|0;switch(q=O+1|0,m[ge>>2]=0,G=vi(g,v,2,ge,me)|0,G|0){case 9:{xe=9;break}case 0:{G=me,G=wr(m[G>>2]|0,m[G+4>>2]|0,y,T,M,R,N,q)|0,G||(xe=9);break}}e:do if((xe|0)==9){switch(m[ge>>2]=0,G=vi(g,v,3,ge,me)|0,G|0){case 9:break;case 0:{if(G=me,G=wr(m[G>>2]|0,m[G+4>>2]|0,y,T,M,R,N,q)|0,G|0)break e;break}default:break e}switch(m[ge>>2]=0,G=vi(g,v,1,ge,me)|0,G|0){case 9:break;case 0:{if(G=me,G=wr(m[G>>2]|0,m[G+4>>2]|0,y,T,M,R,N,q)|0,G|0)break e;break}default:break e}switch(m[ge>>2]=0,G=vi(g,v,5,ge,me)|0,G|0){case 9:break;case 0:{if(G=me,G=wr(m[G>>2]|0,m[G+4>>2]|0,y,T,M,R,N,q)|0,G|0)break e;break}default:break e}switch(m[ge>>2]=0,G=vi(g,v,4,ge,me)|0,G|0){case 9:break;case 0:{if(G=me,G=wr(m[G>>2]|0,m[G+4>>2]|0,y,T,M,R,N,q)|0,G|0)break e;break}default:break e}switch(m[ge>>2]=0,G=vi(g,v,6,ge,me)|0,G|0){case 9:break;case 0:{if(G=me,G=wr(m[G>>2]|0,m[G+4>>2]|0,y,T,M,R,N,q)|0,G|0)break e;break}default:break e}return je=0,re=Me,je|0}while(!1);return je=G,re=Me,je|0}function vi(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0;if(y>>>0>6)return M=1,M|0;if(le=(m[T>>2]|0)%6|0,m[T>>2]=le,(le|0)>0){R=0;do y=Gu(y)|0,R=R+1|0;while((R|0)<(m[T>>2]|0))}if(le=bt(g|0,v|0,45)|0,ae()|0,Q=le&127,Q>>>0>121)return M=5,M|0;G=sa(g,v)|0,R=bt(g|0,v|0,52)|0,ae()|0,R=R&15;e:do if(!R)q=8;else{for(;;){if(N=(15-R|0)*3|0,O=bt(g|0,v|0,N|0)|0,ae()|0,O=O&7,(O|0)==7){v=5;break}if(me=(ro(R)|0)==0,R=R+-1|0,xe=Pt(7,0,N|0)|0,v=v&~(ae()|0),ge=Pt(m[(me?432:16)+(O*28|0)+(y<<2)>>2]|0,0,N|0)|0,N=ae()|0,y=m[(me?640:224)+(O*28|0)+(y<<2)>>2]|0,g=ge|g&~xe,v=N|v,!y){y=0;break e}if(!R){q=8;break e}}return v|0}while(!1);(q|0)==8&&(me=m[848+(Q*28|0)+(y<<2)>>2]|0,ge=Pt(me|0,0,45)|0,g=ge|g,v=ae()|0|v&-1040385,y=m[4272+(Q*28|0)+(y<<2)>>2]|0,(me&127|0)==127&&(me=Pt(m[848+(Q*28|0)+20>>2]|0,0,45)|0,v=ae()|0|v&-1040385,y=m[4272+(Q*28|0)+20>>2]|0,g=zc(me|g,v)|0,v=ae()|0,m[T>>2]=(m[T>>2]|0)+1)),O=bt(g|0,v|0,45)|0,ae()|0,O=O&127;e:do if(vr(O)|0){t:do if((sa(g,v)|0)==1){if((Q|0)!=(O|0))if(Iu(O,m[7696+(Q*28|0)>>2]|0)|0){g=Bm(g,v)|0,N=1,v=ae()|0;break}else Lt(27795,26864,436,26872);switch(G|0){case 3:{g=zc(g,v)|0,v=ae()|0,m[T>>2]=(m[T>>2]|0)+1,N=0;break t}case 5:{g=Bm(g,v)|0,v=ae()|0,m[T>>2]=(m[T>>2]|0)+5,N=0;break t}case 0:return me=9,me|0;default:return me=1,me|0}}else N=0;while(!1);if((y|0)>0){R=0;do g=yA(g,v)|0,v=ae()|0,R=R+1|0;while((R|0)!=(y|0))}if((Q|0)!=(O|0)){if(!(Sm(O)|0)){if((N|0)!=0|(sa(g,v)|0)!=5)break;m[T>>2]=(m[T>>2]|0)+1;break}switch(le&127){case 8:case 118:break e}(sa(g,v)|0)!=3&&(m[T>>2]=(m[T>>2]|0)+1)}}else if((y|0)>0){R=0;do g=zc(g,v)|0,v=ae()|0,R=R+1|0;while((R|0)!=(y|0))}while(!1);return m[T>>2]=((m[T>>2]|0)+y|0)%6|0,me=M,m[me>>2]=g,m[me+4>>2]=v,me=0,me|0}function Zr(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0;for(O=re,re=re+16|0,R=O,N=O+8|0,M=(Ni(g,v)|0)==0,M=M?1:2;;){if(m[N>>2]=0,q=(vi(g,v,M,N,R)|0)==0,G=R,q&((m[G>>2]|0)==(y|0)?(m[G+4>>2]|0)==(T|0):0)){g=4;break}if(M=M+1|0,M>>>0>=7){M=7,g=4;break}}return(g|0)==4?(re=O,M|0):0}function Ns(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0;if(me=re,re=re+16|0,xe=me,ge=me+8|0,le=xe,m[le>>2]=g,m[le+4>>2]=v,!y)return ge=T,m[ge>>2]=g,m[ge+4>>2]=v,ge=0,re=me,ge|0;m[ge>>2]=0;e:do if(Ni(g,v)|0)g=9;else{if(R=(y|0)>0,R){M=0,le=g;do{if(g=vi(le,v,4,ge,xe)|0,g|0)break e;if(v=xe,le=m[v>>2]|0,v=m[v+4>>2]|0,M=M+1|0,Ni(le,v)|0){g=9;break e}}while((M|0)<(y|0));if(Q=T,m[Q>>2]=le,m[Q+4>>2]=v,Q=y+-1|0,R){q=0,g=1;do{if(M=26800+(q<<2)|0,(q|0)==5)for(N=m[M>>2]|0,R=0,M=g;;){if(g=xe,g=vi(m[g>>2]|0,m[g+4>>2]|0,N,ge,xe)|0,g|0)break e;if((R|0)!=(Q|0))if(G=xe,O=m[G>>2]|0,G=m[G+4>>2]|0,g=T+(M<<3)|0,m[g>>2]=O,m[g+4>>2]=G,!(Ni(O,G)|0))g=M+1|0;else{g=9;break e}else g=M;if(R=R+1|0,(R|0)>=(y|0))break;M=g}else for(N=xe,G=m[M>>2]|0,O=0,M=g,R=m[N>>2]|0,N=m[N+4>>2]|0;;){if(g=vi(R,N,G,ge,xe)|0,g|0)break e;if(N=xe,R=m[N>>2]|0,N=m[N+4>>2]|0,g=T+(M<<3)|0,m[g>>2]=R,m[g+4>>2]=N,g=M+1|0,Ni(R,N)|0){g=9;break e}if(O=O+1|0,(O|0)>=(y|0))break;M=g}q=q+1|0}while(q>>>0<6);g=xe,N=le,M=m[g>>2]|0,R=v,g=m[g+4>>2]|0}else N=le,M=le,R=v,g=v}else N=T,m[N>>2]=g,m[N+4>>2]=v,N=g,M=g,R=v,g=v;g=(N|0)==(M|0)&(R|0)==(g|0)?0:9}while(!1);return ge=g,re=me,ge|0}function pl(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0;if(O=re,re=re+48|0,M=O+16|0,R=O+8|0,N=O,y=js(y)|0,y|0)return N=y,re=O,N|0;if(q=g,G=m[q+4>>2]|0,y=R,m[y>>2]=m[q>>2],m[y+4>>2]=G,Ha(R,M),y=Rd(M,v,N)|0,!y){if(v=m[R>>2]|0,R=m[g+8>>2]|0,(R|0)>0){M=m[g+12>>2]|0,y=0;do v=(m[M+(y<<3)>>2]|0)+v|0,y=y+1|0;while((y|0)<(R|0))}y=N,M=m[y>>2]|0,y=m[y+4>>2]|0,R=((v|0)<0)<<31>>31,(y|0)<(R|0)|(y|0)==(R|0)&M>>>0<v>>>0?(y=N,m[y>>2]=v,m[y+4>>2]=R,y=R):v=M,G=Qt(v|0,y|0,12,0)|0,q=ae()|0,y=N,m[y>>2]=G,m[y+4>>2]=q,y=T,m[y>>2]=G,m[y+4>>2]=q,y=0}return q=y,re=O,q|0}function Al(g,v,y,T,M,R,N){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,R=R|0,N=N|0;var O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0,cn=0,ii=0,_n=0,sn=0,Et=0,Hn=0,Ci=0,Xn=0,In=0,Ds=0,kA=0;if(Ci=re,re=re+64|0,_n=Ci+48|0,sn=Ci+32|0,Et=Ci+24|0,Nt=Ci+8|0,nn=Ci,G=m[g>>2]|0,(G|0)<=0)return Hn=0,re=Ci,Hn|0;for(wt=g+4|0,$t=_n+8|0,cn=sn+8|0,ii=Nt+8|0,O=0,Be=0;;){q=m[wt>>2]|0,ze=q+(Be<<4)|0,m[_n>>2]=m[ze>>2],m[_n+4>>2]=m[ze+4>>2],m[_n+8>>2]=m[ze+8>>2],m[_n+12>>2]=m[ze+12>>2],(Be|0)==(G+-1|0)?(m[sn>>2]=m[q>>2],m[sn+4>>2]=m[q+4>>2],m[sn+8>>2]=m[q+8>>2],m[sn+12>>2]=m[q+12>>2]):(ze=q+(Be+1<<4)|0,m[sn>>2]=m[ze>>2],m[sn+4>>2]=m[ze+4>>2],m[sn+8>>2]=m[ze+8>>2],m[sn+12>>2]=m[ze+12>>2]),G=B1(_n,sn,T,Et)|0;e:do if(G)q=0,O=G;else if(G=Et,q=m[G>>2]|0,G=m[G+4>>2]|0,(G|0)>0|(G|0)==0&q>>>0>0){je=0,ze=0;t:for(;;){if(In=1/(+(q>>>0)+4294967296*+(G|0)),kA=+ie[_n>>3],G=fs(q|0,G|0,je|0,ze|0)|0,Ds=+(G>>>0)+4294967296*+(ae()|0),Xn=+(je>>>0)+4294967296*+(ze|0),ie[Nt>>3]=In*(kA*Ds)+In*(+ie[sn>>3]*Xn),ie[ii>>3]=In*(+ie[$t>>3]*Ds)+In*(+ie[cn>>3]*Xn),G=Fm(Nt,T,nn)|0,G|0){O=G;break}De=nn,Me=m[De>>2]|0,De=m[De+4>>2]|0,xe=Ju(Me|0,De|0,v|0,y|0)|0,Q=ae()|0,G=N+(xe<<3)|0,le=G,q=m[le>>2]|0,le=m[le+4>>2]|0;n:do if((q|0)==0&(le|0)==0)Ee=G,Hn=16;else for(ge=0,me=0;;){if((ge|0)>(y|0)|(ge|0)==(y|0)&me>>>0>v>>>0){O=1;break t}if((q|0)==(Me|0)&(le|0)==(De|0))break n;if(G=Qt(xe|0,Q|0,1,0)|0,xe=ff(G|0,ae()|0,v|0,y|0)|0,Q=ae()|0,me=Qt(me|0,ge|0,1,0)|0,ge=ae()|0,G=N+(xe<<3)|0,le=G,q=m[le>>2]|0,le=m[le+4>>2]|0,(q|0)==0&(le|0)==0){Ee=G,Hn=16;break}}while(!1);if((Hn|0)==16&&(Hn=0,!((Me|0)==0&(De|0)==0))&&(me=Ee,m[me>>2]=Me,m[me+4>>2]=De,me=R+(m[M>>2]<<3)|0,m[me>>2]=Me,m[me+4>>2]=De,me=M,me=Qt(m[me>>2]|0,m[me+4>>2]|0,1,0)|0,Me=ae()|0,De=M,m[De>>2]=me,m[De+4>>2]=Me),je=Qt(je|0,ze|0,1,0)|0,ze=ae()|0,G=Et,q=m[G>>2]|0,G=m[G+4>>2]|0,!((G|0)>(ze|0)|(G|0)==(ze|0)&q>>>0>je>>>0)){q=1;break e}}q=0}else q=1;while(!1);if(Be=Be+1|0,!q){Hn=21;break}if(G=m[g>>2]|0,(Be|0)>=(G|0)){O=0,Hn=21;break}}return(Hn|0)==21?(re=Ci,O|0):0}function k1(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0,cn=0,ii=0,_n=0,sn=0,Et=0,Hn=0,Ci=0,Xn=0,In=0,Ds=0;if(Ds=re,re=re+112|0,Hn=Ds+80|0,G=Ds+72|0,Ci=Ds,Xn=Ds+56|0,M=js(y)|0,M|0)return In=M,re=Ds,In|0;if(q=g+8|0,In=_l((m[q>>2]<<5)+32|0)|0,!In)return In=13,re=Ds,In|0;if(tc(g,In),M=js(y)|0,!M){if(sn=g,Et=m[sn+4>>2]|0,M=G,m[M>>2]=m[sn>>2],m[M+4>>2]=Et,Ha(G,Hn),M=Rd(Hn,v,Ci)|0,M)sn=0,Et=0;else{if(M=m[G>>2]|0,R=m[q>>2]|0,(R|0)>0){N=m[g+12>>2]|0,y=0;do M=(m[N+(y<<3)>>2]|0)+M|0,y=y+1|0;while((y|0)!=(R|0));y=M}else y=M;M=Ci,R=m[M>>2]|0,M=m[M+4>>2]|0,N=((y|0)<0)<<31>>31,(M|0)<(N|0)|(M|0)==(N|0)&R>>>0<y>>>0?(M=Ci,m[M>>2]=y,m[M+4>>2]=N,M=N):y=R,sn=Qt(y|0,M|0,12,0)|0,Et=ae()|0,M=Ci,m[M>>2]=sn,m[M+4>>2]=Et,M=0}if(!M){if(y=lo(sn,8)|0,!y)return kn(In),In=13,re=Ds,In|0;if(O=lo(sn,8)|0,!O)return kn(In),kn(y),In=13,re=Ds,In|0;ii=Hn,m[ii>>2]=0,m[ii+4>>2]=0,ii=g,_n=m[ii+4>>2]|0,M=G,m[M>>2]=m[ii>>2],m[M+4>>2]=_n,M=Al(G,sn,Et,v,Hn,y,O)|0;e:do if(M)kn(y),kn(O),kn(In);else{t:do if((m[q>>2]|0)>0){for(N=g+12|0,R=0;M=Al((m[N>>2]|0)+(R<<3)|0,sn,Et,v,Hn,y,O)|0,R=R+1|0,!(M|0);)if((R|0)>=(m[q>>2]|0))break t;kn(y),kn(O),kn(In);break e}while(!1);(Et|0)>0|(Et|0)==0&sn>>>0>0&&Sl(O|0,0,sn<<3|0)|0,_n=Hn,ii=m[_n+4>>2]|0;t:do if((ii|0)>0|(ii|0)==0&(m[_n>>2]|0)>>>0>0){wt=y,$t=O,cn=y,ii=O,_n=y,M=y,Ee=y,Nt=O,nn=O,y=O;n:for(;;){for(De=0,je=0,ze=0,Be=0,R=0,N=0;;){O=Ci,G=O+56|0;do m[O>>2]=0,O=O+4|0;while((O|0)<(G|0));if(v=wt+(De<<3)|0,q=m[v>>2]|0,v=m[v+4>>2]|0,Qi(q,v,1,Ci,0)|0){O=Ci,G=O+56|0;do m[O>>2]=0,O=O+4|0;while((O|0)<(G|0));O=lo(7,4)|0,O|0&&(wr(q,v,1,Ci,O,7,0,0)|0,kn(O))}for(Me=0;;){me=Ci+(Me<<3)|0,ge=m[me>>2]|0,me=m[me+4>>2]|0;i:do if((ge|0)==0&(me|0)==0)O=R,G=N;else{if(Q=Ju(ge|0,me|0,sn|0,Et|0)|0,q=ae()|0,O=T+(Q<<3)|0,v=O,G=m[v>>2]|0,v=m[v+4>>2]|0,!((G|0)==0&(v|0)==0)){le=0,xe=0;do{if((le|0)>(Et|0)|(le|0)==(Et|0)&xe>>>0>sn>>>0)break n;if((G|0)==(ge|0)&(v|0)==(me|0)){O=R,G=N;break i}O=Qt(Q|0,q|0,1,0)|0,Q=ff(O|0,ae()|0,sn|0,Et|0)|0,q=ae()|0,xe=Qt(xe|0,le|0,1,0)|0,le=ae()|0,O=T+(Q<<3)|0,v=O,G=m[v>>2]|0,v=m[v+4>>2]|0}while(!((G|0)==0&(v|0)==0))}if((ge|0)==0&(me|0)==0){O=R,G=N;break}Gc(ge,me,Xn)|0,Bo(g,In,Xn)|0&&(xe=Qt(R|0,N|0,1,0)|0,N=ae()|0,le=O,m[le>>2]=ge,m[le+4>>2]=me,R=$t+(R<<3)|0,m[R>>2]=ge,m[R+4>>2]=me,R=xe),O=R,G=N}while(!1);if(Me=Me+1|0,Me>>>0>=7)break;R=O,N=G}if(De=Qt(De|0,je|0,1,0)|0,je=ae()|0,ze=Qt(ze|0,Be|0,1,0)|0,Be=ae()|0,N=Hn,R=m[N>>2]|0,N=m[N+4>>2]|0,(Be|0)<(N|0)|(Be|0)==(N|0)&ze>>>0<R>>>0)R=O,N=G;else break}if((N|0)>0|(N|0)==0&R>>>0>0){R=0,N=0;do Be=wt+(R<<3)|0,m[Be>>2]=0,m[Be+4>>2]=0,R=Qt(R|0,N|0,1,0)|0,N=ae()|0,Be=Hn,ze=m[Be+4>>2]|0;while((N|0)<(ze|0)|((N|0)==(ze|0)?R>>>0<(m[Be>>2]|0)>>>0:0))}if(Be=Hn,m[Be>>2]=O,m[Be+4>>2]=G,(G|0)>0|(G|0)==0&O>>>0>0)Me=y,De=nn,je=_n,ze=Nt,Be=$t,y=Ee,nn=M,Nt=cn,Ee=Me,M=De,_n=ii,ii=je,cn=ze,$t=wt,wt=Be;else break t}kn(cn),kn(ii),kn(In),M=1;break e}else M=O;while(!1);kn(In),kn(y),kn(M),M=0}while(!1);return In=M,re=Ds,In|0}}return kn(In),In=M,re=Ds,In|0}function O1(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(Q=re,re=re+176|0,G=Q,(v|0)<1)return bl(y,0,0),q=0,re=Q,q|0;for(O=g,O=bt(m[O>>2]|0,m[O+4>>2]|0,52)|0,ae()|0,bl(y,(v|0)>6?v:6,O&15),O=0;T=g+(O<<3)|0,T=qu(m[T>>2]|0,m[T+4>>2]|0,G)|0,!(T|0);){if(T=m[G>>2]|0,(T|0)>0){N=0;do R=G+8+(N<<4)|0,N=N+1|0,T=G+8+(((N|0)%(T|0)|0)<<4)|0,M=Zu(y,T,R)|0,M?cf(y,M)|0:PA(y,R,T)|0,T=m[G>>2]|0;while((N|0)<(T|0))}if(O=O+1|0,(O|0)>=(v|0)){T=0,q=13;break}}return(q|0)==13?(re=Q,T|0):(CA(y),q=T,re=Q,q|0)}function wm(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0;if(R=re,re=re+32|0,T=R,M=R+16|0,g=O1(g,v,M)|0,g|0)return y=g,re=R,y|0;if(m[y>>2]=0,m[y+4>>2]=0,m[y+8>>2]=0,g=RA(M)|0,g|0)do{v=SA(y)|0;do TA(v,g)|0,N=g+16|0,m[T>>2]=m[N>>2],m[T+4>>2]=m[N+4>>2],m[T+8>>2]=m[N+8>>2],m[T+12>>2]=m[N+12>>2],cf(M,g)|0,g=Xs(M,T)|0;while((g|0)!=0);g=RA(M)|0}while((g|0)!=0);return CA(M),g=af(y)|0,g?(MA(y),N=g,re=R,N|0):(N=0,re=R,N|0)}function vr(g){return g=g|0,g>>>0>121?(g=0,g|0):(g=m[7696+(g*28|0)+16>>2]|0,g|0)}function Sm(g){return g=g|0,(g|0)==4|(g|0)==117|0}function wd(g){return g=g|0,m[11120+((m[g>>2]|0)*216|0)+((m[g+4>>2]|0)*72|0)+((m[g+8>>2]|0)*24|0)+(m[g+12>>2]<<3)>>2]|0}function Tm(g){return g=g|0,m[11120+((m[g>>2]|0)*216|0)+((m[g+4>>2]|0)*72|0)+((m[g+8>>2]|0)*24|0)+(m[g+12>>2]<<3)+4>>2]|0}function Mm(g,v){g=g|0,v=v|0,g=7696+(g*28|0)|0,m[v>>2]=m[g>>2],m[v+4>>2]=m[g+4>>2],m[v+8>>2]=m[g+8>>2],m[v+12>>2]=m[g+12>>2]}function Kh(g,v){g=g|0,v=v|0;var y=0,T=0;if(v>>>0>20)return v=-1,v|0;do if((m[11120+(v*216|0)>>2]|0)!=(g|0))if((m[11120+(v*216|0)+8>>2]|0)!=(g|0))if((m[11120+(v*216|0)+16>>2]|0)!=(g|0))if((m[11120+(v*216|0)+24>>2]|0)!=(g|0))if((m[11120+(v*216|0)+32>>2]|0)!=(g|0))if((m[11120+(v*216|0)+40>>2]|0)!=(g|0))if((m[11120+(v*216|0)+48>>2]|0)!=(g|0))if((m[11120+(v*216|0)+56>>2]|0)!=(g|0))if((m[11120+(v*216|0)+64>>2]|0)!=(g|0))if((m[11120+(v*216|0)+72>>2]|0)!=(g|0))if((m[11120+(v*216|0)+80>>2]|0)!=(g|0))if((m[11120+(v*216|0)+88>>2]|0)!=(g|0))if((m[11120+(v*216|0)+96>>2]|0)!=(g|0))if((m[11120+(v*216|0)+104>>2]|0)!=(g|0))if((m[11120+(v*216|0)+112>>2]|0)!=(g|0))if((m[11120+(v*216|0)+120>>2]|0)!=(g|0))if((m[11120+(v*216|0)+128>>2]|0)!=(g|0))if((m[11120+(v*216|0)+136>>2]|0)==(g|0))g=2,y=1,T=2;else{if((m[11120+(v*216|0)+144>>2]|0)==(g|0)){g=0,y=2,T=0;break}if((m[11120+(v*216|0)+152>>2]|0)==(g|0)){g=0,y=2,T=1;break}if((m[11120+(v*216|0)+160>>2]|0)==(g|0)){g=0,y=2,T=2;break}if((m[11120+(v*216|0)+168>>2]|0)==(g|0)){g=1,y=2,T=0;break}if((m[11120+(v*216|0)+176>>2]|0)==(g|0)){g=1,y=2,T=1;break}if((m[11120+(v*216|0)+184>>2]|0)==(g|0)){g=1,y=2,T=2;break}if((m[11120+(v*216|0)+192>>2]|0)==(g|0)){g=2,y=2,T=0;break}if((m[11120+(v*216|0)+200>>2]|0)==(g|0)){g=2,y=2,T=1;break}if((m[11120+(v*216|0)+208>>2]|0)==(g|0)){g=2,y=2,T=2;break}else g=-1;return g|0}else g=2,y=1,T=1;else g=2,y=1,T=0;else g=1,y=1,T=2;else g=1,y=1,T=1;else g=1,y=1,T=0;else g=0,y=1,T=2;else g=0,y=1,T=1;else g=0,y=1,T=0;else g=2,y=0,T=2;else g=2,y=0,T=1;else g=2,y=0,T=0;else g=1,y=0,T=2;else g=1,y=0,T=1;else g=1,y=0,T=0;else g=0,y=0,T=2;else g=0,y=0,T=1;else g=0,y=0,T=0;while(!1);return v=m[11120+(v*216|0)+(y*72|0)+(g*24|0)+(T<<3)+4>>2]|0,v|0}function Iu(g,v){return g=g|0,v=v|0,(m[7696+(g*28|0)+20>>2]|0)==(v|0)?(v=1,v|0):(v=(m[7696+(g*28|0)+24>>2]|0)==(v|0),v|0)}function hA(g,v){return g=g|0,v=v|0,m[848+(g*28|0)+(v<<2)>>2]|0}function Sd(g,v){return g=g|0,v=v|0,(m[848+(g*28|0)>>2]|0)==(v|0)?(v=0,v|0):(m[848+(g*28|0)+4>>2]|0)==(v|0)?(v=1,v|0):(m[848+(g*28|0)+8>>2]|0)==(v|0)?(v=2,v|0):(m[848+(g*28|0)+12>>2]|0)==(v|0)?(v=3,v|0):(m[848+(g*28|0)+16>>2]|0)==(v|0)?(v=4,v|0):(m[848+(g*28|0)+20>>2]|0)==(v|0)?(v=5,v|0):((m[848+(g*28|0)+24>>2]|0)==(v|0)?6:7)|0}function I1(){return 122}function Td(g){g=g|0;var v=0,y=0,T=0;v=0;do Pt(v|0,0,45)|0,T=ae()|0|134225919,y=g+(v<<3)|0,m[y>>2]=-1,m[y+4>>2]=T,v=v+1|0;while((v|0)!=122);return 0}function Zl(g){g=g|0;var v=0,y=0,T=0;return T=+ie[g+16>>3],y=+ie[g+24>>3],v=T-y,+(T<y?v+6.283185307179586:v)}function fA(g){return g=g|0,+ie[g+16>>3]<+ie[g+24>>3]|0}function Md(g){return g=g|0,+(+ie[g>>3]-+ie[g+8>>3])}function gl(g,v){g=g|0,v=v|0;var y=0,T=0,M=0;return y=+ie[v>>3],!(y>=+ie[g+8>>3])||!(y<=+ie[g>>3])?(v=0,v|0):(T=+ie[g+16>>3],y=+ie[g+24>>3],M=+ie[v+8>>3],v=M>=y,g=M<=T&1,T<y?v&&(g=1):v||(g=0),v=(g|0)!=0,v|0)}function Ed(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;return+ie[g>>3]<+ie[v+8>>3]||+ie[g+8>>3]>+ie[v>>3]?(T=0,T|0):(R=+ie[g+16>>3],y=g+24|0,Q=+ie[y>>3],N=R<Q,T=v+16|0,q=+ie[T>>3],M=v+24|0,G=+ie[M>>3],O=q<G,v=Q-q<G-R,g=N?O|v?1:2:0,v=O?N?1:v?2:1:0,R=+oa(R,g),R<+oa(+ie[M>>3],v)||(Q=+oa(+ie[y>>3],g),Q>+oa(+ie[T>>3],v))?(O=0,O|0):(O=1,O|0))}function dA(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0;R=+ie[g+16>>3],G=+ie[g+24>>3],g=R<G,O=+ie[v+16>>3],N=+ie[v+24>>3],M=O<N,v=G-O<N-R,m[y>>2]=g?M|v?1:2:0,m[T>>2]=M?g?1:v?2:1:0}function Em(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;return+ie[g>>3]<+ie[v>>3]||+ie[g+8>>3]>+ie[v+8>>3]?(T=0,T|0):(T=g+16|0,G=+ie[T>>3],R=+ie[g+24>>3],N=G<R,y=v+16|0,Q=+ie[y>>3],M=v+24|0,q=+ie[M>>3],O=Q<q,v=R-Q<q-G,g=N?O|v?1:2:0,v=O?N?1:v?2:1:0,R=+oa(R,g),R<=+oa(+ie[M>>3],v)?(Q=+oa(+ie[T>>3],g),O=Q>=+oa(+ie[y>>3],v),O|0):(O=0,O|0))}function Cd(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0;M=re,re=re+176|0,T=M,m[T>>2]=4,O=+ie[v>>3],ie[T+8>>3]=O,R=+ie[v+16>>3],ie[T+16>>3]=R,ie[T+24>>3]=O,O=+ie[v+24>>3],ie[T+32>>3]=O,N=+ie[v+8>>3],ie[T+40>>3]=N,ie[T+48>>3]=O,ie[T+56>>3]=N,ie[T+64>>3]=R,v=T+72|0,y=v+96|0;do m[v>>2]=0,v=v+4|0;while((v|0)<(y|0));eh(g|0,T|0,168)|0,re=M}function Rd(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0;me=re,re=re+288|0,Q=me+264|0,le=me+96|0,q=me,O=q,G=O+96|0;do m[O>>2]=0,O=O+4|0;while((O|0)<(G|0));return v=Gm(v,q)|0,v|0?(ge=v,re=me,ge|0):(G=q,q=m[G>>2]|0,G=m[G+4>>2]|0,Gc(q,G,Q)|0,qu(q,G,le)|0,N=+Oo(Q,le+8|0),ie[Q>>3]=+ie[g>>3],G=Q+8|0,ie[G>>3]=+ie[g+16>>3],ie[le>>3]=+ie[g+8>>3],q=le+8|0,ie[q>>3]=+ie[g+24>>3],M=+Oo(Q,le),De=+ie[G>>3]-+ie[q>>3],R=+wn(+De),Me=+ie[Q>>3]-+ie[le>>3],T=+wn(+Me),!(De==0|Me==0)&&(De=+Od(+R,+T),De=+Qe(+(M*M/+Id(+(De/+Id(+R,+T)),3)/(N*(N*2.59807621135)*.8))),ie[xn>>3]=De,xe=~~De>>>0,ge=+wn(De)>=1?De>0?~~+Ue(+mi(De/4294967296),4294967295)>>>0:~~+Qe((De-+(~~De>>>0))/4294967296)>>>0:0,(m[xn+4>>2]&2146435072|0)!=2146435072)?(le=(xe|0)==0&(ge|0)==0,v=y,m[v>>2]=le?1:xe,m[v+4>>2]=le?0:ge,v=0):v=1,ge=v,re=me,ge|0)}function B1(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0;q=re,re=re+288|0,N=q+264|0,O=q+96|0,G=q,M=G,R=M+96|0;do m[M>>2]=0,M=M+4|0;while((M|0)<(R|0));return y=Gm(y,G)|0,y|0?(T=y,re=q,T|0):(y=G,M=m[y>>2]|0,y=m[y+4>>2]|0,Gc(M,y,N)|0,qu(M,y,O)|0,Q=+Oo(N,O+8|0),Q=+Qe(+(+Oo(g,v)/(Q*2))),ie[xn>>3]=Q,y=~~Q>>>0,M=+wn(Q)>=1?Q>0?~~+Ue(+mi(Q/4294967296),4294967295)>>>0:~~+Qe((Q-+(~~Q>>>0))/4294967296)>>>0:0,(m[xn+4>>2]&2146435072|0)==2146435072?(T=1,re=q,T|0):(G=(y|0)==0&(M|0)==0,m[T>>2]=G?1:y,m[T+4>>2]=G?0:M,T=0,re=q,T|0))}function Ma(g,v){g=g|0,v=+v;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;R=g+16|0,N=+ie[R>>3],y=g+24|0,M=+ie[y>>3],T=N-M,T=N<M?T+6.283185307179586:T,q=+ie[g>>3],O=g+8|0,G=+ie[O>>3],Q=q-G,T=(T*v-T)*.5,v=(Q*v-Q)*.5,q=q+v,ie[g>>3]=q>1.5707963267948966?1.5707963267948966:q,v=G-v,ie[O>>3]=v<-1.5707963267948966?-1.5707963267948966:v,v=N+T,v=v>3.141592653589793?v+-6.283185307179586:v,ie[R>>3]=v<-3.141592653589793?v+6.283185307179586:v,v=M-T,v=v>3.141592653589793?v+-6.283185307179586:v,ie[y>>3]=v<-3.141592653589793?v+6.283185307179586:v}function Bu(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0,m[g>>2]=v,m[g+4>>2]=y,m[g+8>>2]=T}function pA(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0;le=v+8|0,m[le>>2]=0,G=+ie[g>>3],N=+wn(+G),q=+ie[g+8>>3],O=+wn(+q)*1.1547005383792515,N=N+O*.5,y=~~N,g=~~O,N=N-+(y|0),O=O-+(g|0);do if(N<.5)if(N<.3333333333333333)if(m[v>>2]=y,O<(N+1)*.5){m[v+4>>2]=g;break}else{g=g+1|0,m[v+4>>2]=g;break}else if(xe=1-N,g=(!(O<xe)&1)+g|0,m[v+4>>2]=g,xe<=O&O<N*2){y=y+1|0,m[v>>2]=y;break}else{m[v>>2]=y;break}else{if(!(N<.6666666666666666))if(y=y+1|0,m[v>>2]=y,O<N*.5){m[v+4>>2]=g;break}else{g=g+1|0,m[v+4>>2]=g;break}if(O<1-N){if(m[v+4>>2]=g,N*2+-1<O){m[v>>2]=y;break}}else g=g+1|0,m[v+4>>2]=g;y=y+1|0,m[v>>2]=y}while(!1);do if(G<0)if(g&1){Q=(g+1|0)/2|0,Q=fs(y|0,((y|0)<0)<<31>>31|0,Q|0,((Q|0)<0)<<31>>31|0)|0,y=~~(+(y|0)-((+(Q>>>0)+4294967296*+(ae()|0))*2+1)),m[v>>2]=y;break}else{Q=(g|0)/2|0,Q=fs(y|0,((y|0)<0)<<31>>31|0,Q|0,((Q|0)<0)<<31>>31|0)|0,y=~~(+(y|0)-(+(Q>>>0)+4294967296*+(ae()|0))*2),m[v>>2]=y;break}while(!1);Q=v+4|0,q<0&&(y=y-((g<<1|1|0)/2|0)|0,m[v>>2]=y,g=0-g|0,m[Q>>2]=g),T=g-y|0,(y|0)<0?(M=0-y|0,m[Q>>2]=T,m[le>>2]=M,m[v>>2]=0,g=T,y=0):M=0,(g|0)<0&&(y=y-g|0,m[v>>2]=y,M=M-g|0,m[le>>2]=M,m[Q>>2]=0,g=0),R=y-M|0,T=g-M|0,(M|0)<0&&(m[v>>2]=R,m[Q>>2]=T,m[le>>2]=0,g=T,y=R,M=0),T=(g|0)<(y|0)?g:y,T=(M|0)<(T|0)?M:T,!((T|0)<=0)&&(m[v>>2]=y-T,m[Q>>2]=g-T,m[le>>2]=M-T)}function Kr(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0;v=m[g>>2]|0,N=g+4|0,y=m[N>>2]|0,(v|0)<0&&(y=y-v|0,m[N>>2]=y,R=g+8|0,m[R>>2]=(m[R>>2]|0)-v,m[g>>2]=0,v=0),(y|0)<0?(v=v-y|0,m[g>>2]=v,R=g+8|0,M=(m[R>>2]|0)-y|0,m[R>>2]=M,m[N>>2]=0,y=0):(M=g+8|0,R=M,M=m[M>>2]|0),(M|0)<0&&(v=v-M|0,m[g>>2]=v,y=y-M|0,m[N>>2]=y,m[R>>2]=0,M=0),T=(y|0)<(v|0)?y:v,T=(M|0)<(T|0)?M:T,!((T|0)<=0)&&(m[g>>2]=v-T,m[N>>2]=y-T,m[R>>2]=M-T)}function Fu(g,v){g=g|0,v=v|0;var y=0,T=0;T=m[g+8>>2]|0,y=+((m[g+4>>2]|0)-T|0),ie[v>>3]=+((m[g>>2]|0)-T|0)-y*.5,ie[v+8>>3]=y*.8660254037844386}function Ls(g,v,y){g=g|0,v=v|0,y=y|0,m[y>>2]=(m[v>>2]|0)+(m[g>>2]|0),m[y+4>>2]=(m[v+4>>2]|0)+(m[g+4>>2]|0),m[y+8>>2]=(m[v+8>>2]|0)+(m[g+8>>2]|0)}function Pd(g,v,y){g=g|0,v=v|0,y=y|0,m[y>>2]=(m[g>>2]|0)-(m[v>>2]|0),m[y+4>>2]=(m[g+4>>2]|0)-(m[v+4>>2]|0),m[y+8>>2]=(m[g+8>>2]|0)-(m[v+8>>2]|0)}function Jh(g,v){g=g|0,v=v|0;var y=0,T=0;y=Ye(m[g>>2]|0,v)|0,m[g>>2]=y,y=g+4|0,T=Ye(m[y>>2]|0,v)|0,m[y>>2]=T,g=g+8|0,v=Ye(m[g>>2]|0,v)|0,m[g>>2]=v}function Uu(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;N=m[g>>2]|0,O=(N|0)<0,T=(m[g+4>>2]|0)-(O?N:0)|0,R=(T|0)<0,M=(R?0-T|0:0)+((m[g+8>>2]|0)-(O?N:0))|0,y=(M|0)<0,g=y?0:M,v=(R?0:T)-(y?M:0)|0,M=(O?0:N)-(R?T:0)-(y?M:0)|0,y=(v|0)<(M|0)?v:M,y=(g|0)<(y|0)?g:y,T=(y|0)>0,g=g-(T?y:0)|0,v=v-(T?y:0)|0;e:do switch(M-(T?y:0)|0){case 0:switch(v|0){case 0:return O=(g|0)==0?0:(g|0)==1?1:7,O|0;case 1:return O=(g|0)==0?2:(g|0)==1?3:7,O|0;default:break e}case 1:switch(v|0){case 0:return O=(g|0)==0?4:(g|0)==1?5:7,O|0;case 1:{if(!g)g=6;else break e;return g|0}default:break e}}while(!1);return O=7,O|0}function F1(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0;if(G=g+8|0,N=m[G>>2]|0,O=(m[g>>2]|0)-N|0,q=g+4|0,N=(m[q>>2]|0)-N|0,O>>>0>715827881|N>>>0>715827881){if(T=(O|0)>0,M=2147483647-O|0,R=-2147483648-O|0,(T?(M|0)<(O|0):(R|0)>(O|0))||(y=O<<1,T?(2147483647-y|0)<(O|0):(-2147483648-y|0)>(O|0))||((N|0)>0?(2147483647-N|0)<(N|0):(-2147483648-N|0)>(N|0))||(v=O*3|0,y=N<<1,(T?(M|0)<(y|0):(R|0)>(y|0))||((O|0)>-1?(v|-2147483648|0)>=(N|0):(v^-2147483648|0)<(N|0))))return q=1,q|0}else y=N<<1,v=O*3|0;return T=rc(+(v-N|0)*.14285714285714285)|0,m[g>>2]=T,M=rc(+(y+O|0)*.14285714285714285)|0,m[q>>2]=M,m[G>>2]=0,y=(M|0)<(T|0),v=y?T:M,y=y?M:T,(y|0)<0&&(((y|0)==-2147483648||((v|0)>0?(2147483647-v|0)<(y|0):(-2147483648-v|0)>(y|0)))&&Lt(27795,26892,354,26903),((v|0)>-1?(v|-2147483648|0)>=(y|0):(v^-2147483648|0)<(y|0))&&Lt(27795,26892,354,26903)),v=M-T|0,(T|0)<0?(y=0-T|0,m[q>>2]=v,m[G>>2]=y,m[g>>2]=0,T=0):(v=M,y=0),(v|0)<0&&(T=T-v|0,m[g>>2]=T,y=y-v|0,m[G>>2]=y,m[q>>2]=0,v=0),R=T-y|0,M=v-y|0,(y|0)<0?(m[g>>2]=R,m[q>>2]=M,m[G>>2]=0,v=M,M=R,y=0):M=T,T=(v|0)<(M|0)?v:M,T=(y|0)<(T|0)?y:T,(T|0)<=0?(q=0,q|0):(m[g>>2]=M-T,m[q>>2]=v-T,m[G>>2]=y-T,q=0,q|0)}function jT(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0;if(N=g+8|0,M=m[N>>2]|0,R=(m[g>>2]|0)-M|0,O=g+4|0,M=(m[O>>2]|0)-M|0,R>>>0>715827881|M>>>0>715827881){if(y=(R|0)>0,(y?(2147483647-R|0)<(R|0):(-2147483648-R|0)>(R|0))||(v=R<<1,T=(M|0)>0,T?(2147483647-M|0)<(M|0):(-2147483648-M|0)>(M|0)))return O=1,O|0;if(G=M<<1,(T?(2147483647-G|0)<(M|0):(-2147483648-G|0)>(M|0))||(y?(2147483647-v|0)<(M|0):(-2147483648-v|0)>(M|0))||(y=M*3|0,(M|0)>-1?(y|-2147483648|0)>=(R|0):(y^-2147483648|0)<(R|0)))return G=1,G|0}else y=M*3|0,v=R<<1;return T=rc(+(v+M|0)*.14285714285714285)|0,m[g>>2]=T,M=rc(+(y-R|0)*.14285714285714285)|0,m[O>>2]=M,m[N>>2]=0,y=(M|0)<(T|0),v=y?T:M,y=y?M:T,(y|0)<0&&(((y|0)==-2147483648||((v|0)>0?(2147483647-v|0)<(y|0):(-2147483648-v|0)>(y|0)))&&Lt(27795,26892,402,26917),((v|0)>-1?(v|-2147483648|0)>=(y|0):(v^-2147483648|0)<(y|0))&&Lt(27795,26892,402,26917)),v=M-T|0,(T|0)<0?(y=0-T|0,m[O>>2]=v,m[N>>2]=y,m[g>>2]=0,T=0):(v=M,y=0),(v|0)<0&&(T=T-v|0,m[g>>2]=T,y=y-v|0,m[N>>2]=y,m[O>>2]=0,v=0),R=T-y|0,M=v-y|0,(y|0)<0?(m[g>>2]=R,m[O>>2]=M,m[N>>2]=0,v=M,M=R,y=0):M=T,T=(v|0)<(M|0)?v:M,T=(y|0)<(T|0)?y:T,(T|0)<=0?(G=0,G|0):(m[g>>2]=M-T,m[O>>2]=v-T,m[N>>2]=y-T,G=0,G|0)}function XT(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;N=g+8|0,y=m[N>>2]|0,v=(m[g>>2]|0)-y|0,O=g+4|0,y=(m[O>>2]|0)-y|0,T=rc(+((v*3|0)-y|0)*.14285714285714285)|0,m[g>>2]=T,v=rc(+((y<<1)+v|0)*.14285714285714285)|0,m[O>>2]=v,m[N>>2]=0,y=v-T|0,(T|0)<0?(R=0-T|0,m[O>>2]=y,m[N>>2]=R,m[g>>2]=0,v=y,T=0,y=R):y=0,(v|0)<0&&(T=T-v|0,m[g>>2]=T,y=y-v|0,m[N>>2]=y,m[O>>2]=0,v=0),R=T-y|0,M=v-y|0,(y|0)<0?(m[g>>2]=R,m[O>>2]=M,m[N>>2]=0,v=M,M=R,y=0):M=T,T=(v|0)<(M|0)?v:M,T=(y|0)<(T|0)?y:T,!((T|0)<=0)&&(m[g>>2]=M-T,m[O>>2]=v-T,m[N>>2]=y-T)}function U1(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;N=g+8|0,y=m[N>>2]|0,v=(m[g>>2]|0)-y|0,O=g+4|0,y=(m[O>>2]|0)-y|0,T=rc(+((v<<1)+y|0)*.14285714285714285)|0,m[g>>2]=T,v=rc(+((y*3|0)-v|0)*.14285714285714285)|0,m[O>>2]=v,m[N>>2]=0,y=v-T|0,(T|0)<0?(R=0-T|0,m[O>>2]=y,m[N>>2]=R,m[g>>2]=0,v=y,T=0,y=R):y=0,(v|0)<0&&(T=T-v|0,m[g>>2]=T,y=y-v|0,m[N>>2]=y,m[O>>2]=0,v=0),R=T-y|0,M=v-y|0,(y|0)<0?(m[g>>2]=R,m[O>>2]=M,m[N>>2]=0,v=M,M=R,y=0):M=T,T=(v|0)<(M|0)?v:M,T=(y|0)<(T|0)?y:T,!((T|0)<=0)&&(m[g>>2]=M-T,m[O>>2]=v-T,m[N>>2]=y-T)}function ef(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;v=m[g>>2]|0,N=g+4|0,y=m[N>>2]|0,O=g+8|0,T=m[O>>2]|0,M=y+(v*3|0)|0,m[g>>2]=M,y=T+(y*3|0)|0,m[N>>2]=y,v=(T*3|0)+v|0,m[O>>2]=v,T=y-M|0,(M|0)<0?(v=v-M|0,m[N>>2]=T,m[O>>2]=v,m[g>>2]=0,y=T,T=0):T=M,(y|0)<0&&(T=T-y|0,m[g>>2]=T,v=v-y|0,m[O>>2]=v,m[N>>2]=0,y=0),R=T-v|0,M=y-v|0,(v|0)<0?(m[g>>2]=R,m[N>>2]=M,m[O>>2]=0,T=R,v=0):M=y,y=(M|0)<(T|0)?M:T,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=T-y,m[N>>2]=M-y,m[O>>2]=v-y)}function zu(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;M=m[g>>2]|0,N=g+4|0,v=m[N>>2]|0,O=g+8|0,y=m[O>>2]|0,T=(v*3|0)+M|0,M=y+(M*3|0)|0,m[g>>2]=M,m[N>>2]=T,v=(y*3|0)+v|0,m[O>>2]=v,y=T-M|0,(M|0)<0?(v=v-M|0,m[N>>2]=y,m[O>>2]=v,m[g>>2]=0,M=0):y=T,(y|0)<0&&(M=M-y|0,m[g>>2]=M,v=v-y|0,m[O>>2]=v,m[N>>2]=0,y=0),R=M-v|0,T=y-v|0,(v|0)<0?(m[g>>2]=R,m[N>>2]=T,m[O>>2]=0,M=R,v=0):T=y,y=(T|0)<(M|0)?T:M,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=M-y,m[N>>2]=T-y,m[O>>2]=v-y)}function z1(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0;(v+-1|0)>>>0>=6||(M=(m[15440+(v*12|0)>>2]|0)+(m[g>>2]|0)|0,m[g>>2]=M,O=g+4|0,T=(m[15440+(v*12|0)+4>>2]|0)+(m[O>>2]|0)|0,m[O>>2]=T,N=g+8|0,v=(m[15440+(v*12|0)+8>>2]|0)+(m[N>>2]|0)|0,m[N>>2]=v,y=T-M|0,(M|0)<0?(v=v-M|0,m[O>>2]=y,m[N>>2]=v,m[g>>2]=0,T=0):(y=T,T=M),(y|0)<0&&(T=T-y|0,m[g>>2]=T,v=v-y|0,m[N>>2]=v,m[O>>2]=0,y=0),R=T-v|0,M=y-v|0,(v|0)<0?(m[g>>2]=R,m[O>>2]=M,m[N>>2]=0,T=R,v=0):M=y,y=(M|0)<(T|0)?M:T,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=T-y,m[O>>2]=M-y,m[N>>2]=v-y))}function G1(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;M=m[g>>2]|0,N=g+4|0,v=m[N>>2]|0,O=g+8|0,y=m[O>>2]|0,T=v+M|0,M=y+M|0,m[g>>2]=M,m[N>>2]=T,v=y+v|0,m[O>>2]=v,y=T-M|0,(M|0)<0?(v=v-M|0,m[N>>2]=y,m[O>>2]=v,m[g>>2]=0,T=0):(y=T,T=M),(y|0)<0&&(T=T-y|0,m[g>>2]=T,v=v-y|0,m[O>>2]=v,m[N>>2]=0,y=0),R=T-v|0,M=y-v|0,(v|0)<0?(m[g>>2]=R,m[N>>2]=M,m[O>>2]=0,T=R,v=0):M=y,y=(M|0)<(T|0)?M:T,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=T-y,m[N>>2]=M-y,m[O>>2]=v-y)}function AA(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;v=m[g>>2]|0,N=g+4|0,T=m[N>>2]|0,O=g+8|0,y=m[O>>2]|0,M=T+v|0,m[g>>2]=M,T=y+T|0,m[N>>2]=T,v=y+v|0,m[O>>2]=v,y=T-M|0,(M|0)<0?(v=v-M|0,m[N>>2]=y,m[O>>2]=v,m[g>>2]=0,T=0):(y=T,T=M),(y|0)<0&&(T=T-y|0,m[g>>2]=T,v=v-y|0,m[O>>2]=v,m[N>>2]=0,y=0),R=T-v|0,M=y-v|0,(v|0)<0?(m[g>>2]=R,m[N>>2]=M,m[O>>2]=0,T=R,v=0):M=y,y=(M|0)<(T|0)?M:T,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=T-y,m[N>>2]=M-y,m[O>>2]=v-y)}function Gu(g){switch(g=g|0,g|0){case 1:{g=5;break}case 5:{g=4;break}case 4:{g=6;break}case 6:{g=2;break}case 2:{g=3;break}case 3:{g=1;break}}return g|0}function Kl(g){switch(g=g|0,g|0){case 1:{g=3;break}case 3:{g=2;break}case 2:{g=6;break}case 6:{g=4;break}case 4:{g=5;break}case 5:{g=1;break}}return g|0}function V1(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;v=m[g>>2]|0,N=g+4|0,y=m[N>>2]|0,O=g+8|0,T=m[O>>2]|0,M=y+(v<<1)|0,m[g>>2]=M,y=T+(y<<1)|0,m[N>>2]=y,v=(T<<1)+v|0,m[O>>2]=v,T=y-M|0,(M|0)<0?(v=v-M|0,m[N>>2]=T,m[O>>2]=v,m[g>>2]=0,y=T,T=0):T=M,(y|0)<0&&(T=T-y|0,m[g>>2]=T,v=v-y|0,m[O>>2]=v,m[N>>2]=0,y=0),R=T-v|0,M=y-v|0,(v|0)<0?(m[g>>2]=R,m[N>>2]=M,m[O>>2]=0,T=R,v=0):M=y,y=(M|0)<(T|0)?M:T,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=T-y,m[N>>2]=M-y,m[O>>2]=v-y)}function H1(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;M=m[g>>2]|0,N=g+4|0,v=m[N>>2]|0,O=g+8|0,y=m[O>>2]|0,T=(v<<1)+M|0,M=y+(M<<1)|0,m[g>>2]=M,m[N>>2]=T,v=(y<<1)+v|0,m[O>>2]=v,y=T-M|0,(M|0)<0?(v=v-M|0,m[N>>2]=y,m[O>>2]=v,m[g>>2]=0,M=0):y=T,(y|0)<0&&(M=M-y|0,m[g>>2]=M,v=v-y|0,m[O>>2]=v,m[N>>2]=0,y=0),R=M-v|0,T=y-v|0,(v|0)<0?(m[g>>2]=R,m[N>>2]=T,m[O>>2]=0,M=R,v=0):T=y,y=(T|0)<(M|0)?T:M,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(m[g>>2]=M-y,m[N>>2]=T-y,m[O>>2]=v-y)}function Cm(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0;return N=(m[g>>2]|0)-(m[v>>2]|0)|0,O=(N|0)<0,T=(m[g+4>>2]|0)-(m[v+4>>2]|0)-(O?N:0)|0,R=(T|0)<0,M=(O?0-N|0:0)+(m[g+8>>2]|0)-(m[v+8>>2]|0)+(R?0-T|0:0)|0,g=(M|0)<0,v=g?0:M,y=(R?0:T)-(g?M:0)|0,M=(O?0:N)-(R?T:0)-(g?M:0)|0,g=(y|0)<(M|0)?y:M,g=(v|0)<(g|0)?v:g,T=(g|0)>0,v=v-(T?g:0)|0,y=y-(T?g:0)|0,g=M-(T?g:0)|0,g=(g|0)>-1?g:0-g|0,y=(y|0)>-1?y:0-y|0,v=(v|0)>-1?v:0-v|0,v=(y|0)>(v|0)?y:v,((g|0)>(v|0)?g:v)|0}function YT(g,v){g=g|0,v=v|0;var y=0;y=m[g+8>>2]|0,m[v>>2]=(m[g>>2]|0)-y,m[v+4>>2]=(m[g+4>>2]|0)-y}function Rm(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0;return T=m[g>>2]|0,m[v>>2]=T,M=m[g+4>>2]|0,N=v+4|0,m[N>>2]=M,O=v+8|0,m[O>>2]=0,y=(M|0)<(T|0),g=y?T:M,y=y?M:T,(y|0)<0&&((y|0)==-2147483648||((g|0)>0?(2147483647-g|0)<(y|0):(-2147483648-g|0)>(y|0))||((g|0)>-1?(g|-2147483648|0)>=(y|0):(g^-2147483648|0)<(y|0)))?(v=1,v|0):(g=M-T|0,(T|0)<0?(y=0-T|0,m[N>>2]=g,m[O>>2]=y,m[v>>2]=0,T=0):(g=M,y=0),(g|0)<0&&(T=T-g|0,m[v>>2]=T,y=y-g|0,m[O>>2]=y,m[N>>2]=0,g=0),R=T-y|0,M=g-y|0,(y|0)<0?(m[v>>2]=R,m[N>>2]=M,m[O>>2]=0,g=M,M=R,y=0):M=T,T=(g|0)<(M|0)?g:M,T=(y|0)<(T|0)?y:T,(T|0)<=0?(v=0,v|0):(m[v>>2]=M-T,m[N>>2]=g-T,m[O>>2]=y-T,v=0,v|0))}function q1(g){g=g|0;var v=0,y=0,T=0,M=0;v=g+8|0,M=m[v>>2]|0,y=M-(m[g>>2]|0)|0,m[g>>2]=y,T=g+4|0,g=(m[T>>2]|0)-M|0,m[T>>2]=g,m[v>>2]=0-(g+y)}function $T(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;y=m[g>>2]|0,v=0-y|0,m[g>>2]=v,N=g+8|0,m[N>>2]=0,O=g+4|0,T=m[O>>2]|0,M=T+y|0,(y|0)>0?(m[O>>2]=M,m[N>>2]=y,m[g>>2]=0,v=0,T=M):y=0,(T|0)<0?(R=v-T|0,m[g>>2]=R,y=y-T|0,m[N>>2]=y,m[O>>2]=0,M=R-y|0,v=0-y|0,(y|0)<0?(m[g>>2]=M,m[O>>2]=v,m[N>>2]=0,T=v,y=0):(T=0,M=R)):M=v,v=(T|0)<(M|0)?T:M,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(m[g>>2]=M-v,m[O>>2]=T-v,m[N>>2]=y-v)}function QT(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0;if(le=re,re=re+64|0,Q=le,O=le+56|0,!(!0&(v&2013265920|0)==134217728&(!0&(T&2013265920|0)==134217728)))return M=5,re=le,M|0;if((g|0)==(y|0)&(v|0)==(T|0))return m[M>>2]=0,M=0,re=le,M|0;if(N=bt(g|0,v|0,52)|0,ae()|0,N=N&15,q=bt(y|0,T|0,52)|0,ae()|0,(N|0)!=(q&15|0))return M=12,re=le,M|0;if(R=N+-1|0,N>>>0>1){vA(g,v,R,Q)|0,vA(y,T,R,O)|0,q=Q,G=m[q>>2]|0,q=m[q+4>>2]|0;e:do if((G|0)==(m[O>>2]|0)&&(q|0)==(m[O+4>>2]|0)){N=(N^15)*3|0,R=bt(g|0,v|0,N|0)|0,ae()|0,R=R&7,N=bt(y|0,T|0,N|0)|0,ae()|0,N=N&7;do if((R|0)==0|(N|0)==0)m[M>>2]=1,R=0;else if((R|0)==7)R=5;else{if((R|0)==1|(N|0)==1&&Ni(G,q)|0){R=5;break}if((m[15536+(R<<2)>>2]|0)!=(N|0)&&(m[15568+(R<<2)>>2]|0)!=(N|0))break e;m[M>>2]=1,R=0}while(!1);return M=R,re=le,M|0}while(!1)}R=Q,N=R+56|0;do m[R>>2]=0,R=R+4|0;while((R|0)<(N|0));return tr(g,v,1,Q)|0,v=Q,!((m[v>>2]|0)==(y|0)&&(m[v+4>>2]|0)==(T|0))&&(v=Q+8|0,!((m[v>>2]|0)==(y|0)&&(m[v+4>>2]|0)==(T|0)))&&(v=Q+16|0,!((m[v>>2]|0)==(y|0)&&(m[v+4>>2]|0)==(T|0)))&&(v=Q+24|0,!((m[v>>2]|0)==(y|0)&&(m[v+4>>2]|0)==(T|0)))&&(v=Q+32|0,!((m[v>>2]|0)==(y|0)&&(m[v+4>>2]|0)==(T|0)))&&(v=Q+40|0,!((m[v>>2]|0)==(y|0)&&(m[v+4>>2]|0)==(T|0)))?(R=Q+48|0,R=((m[R>>2]|0)==(y|0)?(m[R+4>>2]|0)==(T|0):0)&1):R=1,m[M>>2]=R,M=0,re=le,M|0}function W1(g,v,y,T,M){return g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,y=Zr(g,v,y,T)|0,(y|0)==7?(M=11,M|0):(T=Pt(y|0,0,56)|0,v=v&-2130706433|(ae()|0)|268435456,m[M>>2]=g|T,m[M+4>>2]=v,M=0,M|0)}function ZT(g,v,y){return g=g|0,v=v|0,y=y|0,!0&(v&2013265920|0)==268435456?(m[y>>2]=g,m[y+4>>2]=v&-2130706433|134217728,y=0,y|0):(y=6,y|0)}function KT(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;return M=re,re=re+16|0,T=M,m[T>>2]=0,!0&(v&2013265920|0)==268435456?(R=bt(g|0,v|0,56)|0,ae()|0,T=vi(g,v&-2130706433|134217728,R&7,T,y)|0,re=M,T|0):(T=6,re=M,T|0)}function JT(g,v){g=g|0,v=v|0;var y=0;switch(y=bt(g|0,v|0,56)|0,ae()|0,y&7){case 0:case 7:return y=0,y|0}return y=v&-2130706433|134217728,!(!0&(v&2013265920|0)==268435456)||!0&(v&117440512|0)==16777216&(Ni(g,y)|0)!=0?(y=0,y|0):(y=Dm(g,y)|0,y|0)}function e3(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0;return M=re,re=re+16|0,T=M,!0&(v&2013265920|0)==268435456?(R=v&-2130706433|134217728,N=y,m[N>>2]=g,m[N+4>>2]=R,m[T>>2]=0,v=bt(g|0,v|0,56)|0,ae()|0,T=vi(g,R,v&7,T,y+8|0)|0,re=M,T|0):(T=6,re=M,T|0)}function t3(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0;return M=(Ni(g,v)|0)==0,v=v&-2130706433,T=y,m[T>>2]=M?g:0,m[T+4>>2]=M?v|285212672:0,T=y+8|0,m[T>>2]=g,m[T+4>>2]=v|301989888,T=y+16|0,m[T>>2]=g,m[T+4>>2]=v|318767104,T=y+24|0,m[T>>2]=g,m[T+4>>2]=v|335544320,T=y+32|0,m[T>>2]=g,m[T+4>>2]=v|352321536,y=y+40|0,m[y>>2]=g,m[y+4>>2]=v|369098752,0}function gA(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0;return N=re,re=re+16|0,M=N,R=v&-2130706433|134217728,!0&(v&2013265920|0)==268435456?(T=bt(g|0,v|0,56)|0,ae()|0,T=ab(g,R,T&7)|0,(T|0)==-1?(m[y>>2]=0,R=6,re=N,R|0):(ml(g,R,M)|0&&Lt(27795,26932,282,26947),v=bt(g|0,v|0,52)|0,ae()|0,v=v&15,Ni(g,R)|0?Pm(M,v,T,2,y):mA(M,v,T,2,y),R=0,re=N,R|0)):(R=6,re=N,R|0)}function n3(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0;T=re,re=re+16|0,M=T,i3(g,v,y,M),pA(M,y+4|0),re=T}function i3(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0;if(O=re,re=re+16|0,G=O,r3(g,y,G),R=+Ql(+(1-+ie[G>>3]*.5)),R<1e-16){m[T>>2]=0,m[T+4>>2]=0,m[T+8>>2]=0,m[T+12>>2]=0,re=O;return}if(G=m[y>>2]|0,M=+ie[15920+(G*24|0)>>3],M=+Do(M-+Do(+eb(15600+(G<<4)|0,g))),ro(v)|0?N=+Do(M+-.3334731722518321):N=M,M=+Ps(+R)*2.618033988749896,(v|0)>0){g=0;do M=M*2.6457513110645907,g=g+1|0;while((g|0)!=(v|0))}R=+ni(+N)*M,ie[T>>3]=R,N=+hn(+N)*M,ie[T+8>>3]=N,re=O}function r3(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;if(R=re,re=re+32|0,M=R,kd(g,M),m[v>>2]=0,ie[y>>3]=5,T=+Sr(16400,M),T<+ie[y>>3]&&(m[v>>2]=0,ie[y>>3]=T),T=+Sr(16424,M),T<+ie[y>>3]&&(m[v>>2]=1,ie[y>>3]=T),T=+Sr(16448,M),T<+ie[y>>3]&&(m[v>>2]=2,ie[y>>3]=T),T=+Sr(16472,M),T<+ie[y>>3]&&(m[v>>2]=3,ie[y>>3]=T),T=+Sr(16496,M),T<+ie[y>>3]&&(m[v>>2]=4,ie[y>>3]=T),T=+Sr(16520,M),T<+ie[y>>3]&&(m[v>>2]=5,ie[y>>3]=T),T=+Sr(16544,M),T<+ie[y>>3]&&(m[v>>2]=6,ie[y>>3]=T),T=+Sr(16568,M),T<+ie[y>>3]&&(m[v>>2]=7,ie[y>>3]=T),T=+Sr(16592,M),T<+ie[y>>3]&&(m[v>>2]=8,ie[y>>3]=T),T=+Sr(16616,M),T<+ie[y>>3]&&(m[v>>2]=9,ie[y>>3]=T),T=+Sr(16640,M),T<+ie[y>>3]&&(m[v>>2]=10,ie[y>>3]=T),T=+Sr(16664,M),T<+ie[y>>3]&&(m[v>>2]=11,ie[y>>3]=T),T=+Sr(16688,M),T<+ie[y>>3]&&(m[v>>2]=12,ie[y>>3]=T),T=+Sr(16712,M),T<+ie[y>>3]&&(m[v>>2]=13,ie[y>>3]=T),T=+Sr(16736,M),T<+ie[y>>3]&&(m[v>>2]=14,ie[y>>3]=T),T=+Sr(16760,M),T<+ie[y>>3]&&(m[v>>2]=15,ie[y>>3]=T),T=+Sr(16784,M),T<+ie[y>>3]&&(m[v>>2]=16,ie[y>>3]=T),T=+Sr(16808,M),T<+ie[y>>3]&&(m[v>>2]=17,ie[y>>3]=T),T=+Sr(16832,M),T<+ie[y>>3]&&(m[v>>2]=18,ie[y>>3]=T),T=+Sr(16856,M),!(T<+ie[y>>3])){re=R;return}m[v>>2]=19,ie[y>>3]=T,re=R}function Vu(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0;if(R=+$u(g),R<1e-16){v=15600+(v<<4)|0,m[M>>2]=m[v>>2],m[M+4>>2]=m[v+4>>2],m[M+8>>2]=m[v+8>>2],m[M+12>>2]=m[v+12>>2];return}if(N=+Oe(+ +ie[g+8>>3],+ +ie[g>>3]),(y|0)>0){g=0;do R=R*.37796447300922725,g=g+1|0;while((g|0)!=(y|0))}O=R*.3333333333333333,T?(y=(ro(y)|0)==0,R=+ue(+((y?O:O*.37796447300922725)*.381966011250105))):(R=+ue(+(R*.381966011250105)),ro(y)|0&&(N=+Do(N+.3334731722518321))),tb(15600+(v<<4)|0,+Do(+ie[15920+(v*24|0)>>3]-N),R,M)}function Nd(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0;T=re,re=re+16|0,M=T,Fu(g+4|0,M),Vu(M,m[g>>2]|0,v,0,y),re=T}function Pm(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0,cn=0,ii=0,_n=0,sn=0,Et=0,Hn=0,Ci=0,Xn=0;if(Hn=re,re=re+272|0,R=Hn+256|0,ze=Hn+240|0,_n=Hn,sn=Hn+224|0,Et=Hn+208|0,Be=Hn+176|0,Ee=Hn+160|0,Nt=Hn+192|0,nn=Hn+144|0,wt=Hn+128|0,$t=Hn+112|0,cn=Hn+96|0,ii=Hn+80|0,m[R>>2]=v,m[ze>>2]=m[g>>2],m[ze+4>>2]=m[g+4>>2],m[ze+8>>2]=m[g+8>>2],m[ze+12>>2]=m[g+12>>2],Nm(ze,R,_n),m[M>>2]=0,ze=T+y+((T|0)==5&1)|0,(ze|0)<=(y|0)){re=Hn;return}G=m[R>>2]|0,q=sn+4|0,Q=Be+4|0,le=y+5|0,xe=16880+(G<<2)|0,ge=16960+(G<<2)|0,me=wt+8|0,Me=$t+8|0,De=cn+8|0,je=Et+4|0,O=y;e:for(;;){N=_n+(((O|0)%5|0)<<4)|0,m[Et>>2]=m[N>>2],m[Et+4>>2]=m[N+4>>2],m[Et+8>>2]=m[N+8>>2],m[Et+12>>2]=m[N+12>>2];do;while((Hu(Et,G,0,1)|0)==2);if((O|0)>(y|0)&(ro(v)|0)!=0){if(m[Be>>2]=m[Et>>2],m[Be+4>>2]=m[Et+4>>2],m[Be+8>>2]=m[Et+8>>2],m[Be+12>>2]=m[Et+12>>2],Fu(q,Ee),T=m[Be>>2]|0,R=m[17040+(T*80|0)+(m[sn>>2]<<2)>>2]|0,m[Be>>2]=m[18640+(T*80|0)+(R*20|0)>>2],N=m[18640+(T*80|0)+(R*20|0)+16>>2]|0,(N|0)>0){g=0;do G1(Q),g=g+1|0;while((g|0)<(N|0))}switch(N=18640+(T*80|0)+(R*20|0)+4|0,m[Nt>>2]=m[N>>2],m[Nt+4>>2]=m[N+4>>2],m[Nt+8>>2]=m[N+8>>2],Jh(Nt,(m[xe>>2]|0)*3|0),Ls(Q,Nt,Q),Kr(Q),Fu(Q,nn),Ci=+(m[ge>>2]|0),ie[wt>>3]=Ci*3,ie[me>>3]=0,Xn=Ci*-1.5,ie[$t>>3]=Xn,ie[Me>>3]=Ci*2.598076211353316,ie[cn>>3]=Xn,ie[De>>3]=Ci*-2.598076211353316,m[17040+((m[Be>>2]|0)*80|0)+(m[Et>>2]<<2)>>2]|0){case 1:{g=$t,T=wt;break}case 3:{g=cn,T=$t;break}case 2:{g=wt,T=cn;break}default:{g=12;break e}}Zm(Ee,nn,T,g,ii),Vu(ii,m[Be>>2]|0,G,1,M+8+(m[M>>2]<<4)|0),m[M>>2]=(m[M>>2]|0)+1}if((O|0)<(le|0)&&(Fu(je,Be),Vu(Be,m[Et>>2]|0,G,1,M+8+(m[M>>2]<<4)|0),m[M>>2]=(m[M>>2]|0)+1),m[sn>>2]=m[Et>>2],m[sn+4>>2]=m[Et+4>>2],m[sn+8>>2]=m[Et+8>>2],m[sn+12>>2]=m[Et+12>>2],O=O+1|0,(O|0)>=(ze|0)){g=3;break}}if((g|0)==3){re=Hn;return}else(g|0)==12&&Lt(26970,27017,572,27027)}function Nm(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0;G=re,re=re+128|0,T=G+64|0,M=G,R=T,N=20240,O=R+60|0;do m[R>>2]=m[N>>2],R=R+4|0,N=N+4|0;while((R|0)<(O|0));R=M,N=20304,O=R+60|0;do m[R>>2]=m[N>>2],R=R+4|0,N=N+4|0;while((R|0)<(O|0));O=(ro(m[v>>2]|0)|0)==0,T=O?T:M,M=g+4|0,V1(M),H1(M),ro(m[v>>2]|0)|0&&(zu(M),m[v>>2]=(m[v>>2]|0)+1),m[y>>2]=m[g>>2],v=y+4|0,Ls(M,T,v),Kr(v),m[y+16>>2]=m[g>>2],v=y+20|0,Ls(M,T+12|0,v),Kr(v),m[y+32>>2]=m[g>>2],v=y+36|0,Ls(M,T+24|0,v),Kr(v),m[y+48>>2]=m[g>>2],v=y+52|0,Ls(M,T+36|0,v),Kr(v),m[y+64>>2]=m[g>>2],y=y+68|0,Ls(M,T+48|0,y),Kr(y),re=G}function Hu(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0;if(me=re,re=re+32|0,xe=me+12|0,O=me,ge=g+4|0,le=m[16960+(v<<2)>>2]|0,Q=(T|0)!=0,le=Q?le*3|0:le,M=m[ge>>2]|0,q=g+8|0,N=m[q>>2]|0,Q){if(R=g+12|0,T=m[R>>2]|0,M=N+M+T|0,(M|0)==(le|0))return ge=1,re=me,ge|0;G=R}else G=g+12|0,T=m[G>>2]|0,M=N+M+T|0;if((M|0)<=(le|0))return ge=0,re=me,ge|0;do if((T|0)>0){if(T=m[g>>2]|0,(N|0)>0){R=18640+(T*80|0)+60|0,T=g;break}T=18640+(T*80|0)+40|0,y?(Bu(xe,le,0,0),Pd(ge,xe,O),AA(O),Ls(O,xe,ge),R=T,T=g):(R=T,T=g)}else R=18640+((m[g>>2]|0)*80|0)+20|0,T=g;while(!1);if(m[T>>2]=m[R>>2],M=R+16|0,(m[M>>2]|0)>0){T=0;do G1(ge),T=T+1|0;while((T|0)<(m[M>>2]|0))}return g=R+4|0,m[xe>>2]=m[g>>2],m[xe+4>>2]=m[g+4>>2],m[xe+8>>2]=m[g+8>>2],v=m[16880+(v<<2)>>2]|0,Jh(xe,Q?v*3|0:v),Ls(ge,xe,ge),Kr(ge),Q?T=((m[q>>2]|0)+(m[ge>>2]|0)+(m[G>>2]|0)|0)==(le|0)?1:2:T=2,ge=T,re=me,ge|0}function j1(g,v){g=g|0,v=v|0;var y=0;do y=Hu(g,v,0,1)|0;while((y|0)==2);return y|0}function mA(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0,cn=0,ii=0,_n=0;if(cn=re,re=re+240|0,R=cn+224|0,Nt=cn+208|0,nn=cn,wt=cn+192|0,$t=cn+176|0,De=cn+160|0,je=cn+144|0,ze=cn+128|0,Be=cn+112|0,Ee=cn+96|0,m[R>>2]=v,m[Nt>>2]=m[g>>2],m[Nt+4>>2]=m[g+4>>2],m[Nt+8>>2]=m[g+8>>2],m[Nt+12>>2]=m[g+12>>2],Lm(Nt,R,nn),m[M>>2]=0,Me=T+y+((T|0)==6&1)|0,(Me|0)<=(y|0)){re=cn;return}G=m[R>>2]|0,q=y+6|0,Q=16960+(G<<2)|0,le=je+8|0,xe=ze+8|0,ge=Be+8|0,me=wt+4|0,N=0,O=y,T=-1;e:for(;;){if(R=(O|0)%6|0,g=nn+(R<<4)|0,m[wt>>2]=m[g>>2],m[wt+4>>2]=m[g+4>>2],m[wt+8>>2]=m[g+8>>2],m[wt+12>>2]=m[g+12>>2],g=N,N=Hu(wt,G,0,1)|0,(O|0)>(y|0)&(ro(v)|0)!=0&&(g|0)!=1&&(m[wt>>2]|0)!=(T|0)){switch(Fu(nn+(((R+5|0)%6|0)<<4)+4|0,$t),Fu(nn+(R<<4)+4|0,De),ii=+(m[Q>>2]|0),ie[je>>3]=ii*3,ie[le>>3]=0,_n=ii*-1.5,ie[ze>>3]=_n,ie[xe>>3]=ii*2.598076211353316,ie[Be>>3]=_n,ie[ge>>3]=ii*-2.598076211353316,R=m[Nt>>2]|0,m[17040+(R*80|0)+(((T|0)==(R|0)?m[wt>>2]|0:T)<<2)>>2]|0){case 1:{g=ze,T=je;break}case 3:{g=Be,T=ze;break}case 2:{g=je,T=Be;break}default:{g=8;break e}}Zm($t,De,T,g,Ee),!(Km($t,Ee)|0)&&!(Km(De,Ee)|0)&&(Vu(Ee,m[Nt>>2]|0,G,1,M+8+(m[M>>2]<<4)|0),m[M>>2]=(m[M>>2]|0)+1)}if((O|0)<(q|0)&&(Fu(me,$t),Vu($t,m[wt>>2]|0,G,1,M+8+(m[M>>2]<<4)|0),m[M>>2]=(m[M>>2]|0)+1),O=O+1|0,(O|0)>=(Me|0)){g=3;break}else T=m[wt>>2]|0}if((g|0)==3){re=cn;return}else(g|0)==8&&Lt(27054,27017,737,27099)}function Lm(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0;G=re,re=re+160|0,T=G+80|0,M=G,R=T,N=20368,O=R+72|0;do m[R>>2]=m[N>>2],R=R+4|0,N=N+4|0;while((R|0)<(O|0));R=M,N=20448,O=R+72|0;do m[R>>2]=m[N>>2],R=R+4|0,N=N+4|0;while((R|0)<(O|0));O=(ro(m[v>>2]|0)|0)==0,T=O?T:M,M=g+4|0,V1(M),H1(M),ro(m[v>>2]|0)|0&&(zu(M),m[v>>2]=(m[v>>2]|0)+1),m[y>>2]=m[g>>2],v=y+4|0,Ls(M,T,v),Kr(v),m[y+16>>2]=m[g>>2],v=y+20|0,Ls(M,T+12|0,v),Kr(v),m[y+32>>2]=m[g>>2],v=y+36|0,Ls(M,T+24|0,v),Kr(v),m[y+48>>2]=m[g>>2],v=y+52|0,Ls(M,T+36|0,v),Kr(v),m[y+64>>2]=m[g>>2],v=y+68|0,Ls(M,T+48|0,v),Kr(v),m[y+80>>2]=m[g>>2],y=y+84|0,Ls(M,T+60|0,y),Kr(y),re=G}function tf(g,v){return g=g|0,v=v|0,v=bt(g|0,v|0,52)|0,ae()|0,v&15|0}function X1(g,v){return g=g|0,v=v|0,v=bt(g|0,v|0,45)|0,ae()|0,v&127|0}function Dm(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0;return!(!0&(v&-16777216|0)==134217728)||(T=bt(g|0,v|0,52)|0,ae()|0,T=T&15,y=bt(g|0,v|0,45)|0,ae()|0,y=y&127,y>>>0>121)?(g=0,g|0):(N=(T^15)*3|0,M=bt(g|0,v|0,N|0)|0,N=Pt(M|0,ae()|0,N|0)|0,M=ae()|0,R=fs(-1227133514,-1171,N|0,M|0)|0,!((N&613566756&R|0)==0&(M&4681&(ae()|0)|0)==0)||(N=(T*3|0)+19|0,R=Pt(~g|0,~v|0,N|0)|0,N=bt(R|0,ae()|0,N|0)|0,!((T|0)==15|(N|0)==0&(ae()|0)==0))?(N=0,N|0):!(ft[20528+y>>0]|0)||(v=v&8191,(g|0)==0&(v|0)==0)?(N=1,N|0):(N=LA(g|0,v|0)|0,ae()|0,((63-N|0)%3|0|0)!=0|0))}function km(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0;if(M=Pt(v|0,0,52)|0,R=ae()|0,y=Pt(y|0,0,45)|0,y=R|(ae()|0)|134225919,(v|0)<1){R=-1,T=y,v=g,m[v>>2]=R,g=g+4|0,m[g>>2]=T;return}for(R=1,M=-1;N=(15-R|0)*3|0,O=Pt(7,0,N|0)|0,y=y&~(ae()|0),N=Pt(T|0,0,N|0)|0,M=M&~O|N,y=y|(ae()|0),(R|0)!=(v|0);)R=R+1|0;O=g,N=O,m[N>>2]=M,O=O+4|0,m[O>>2]=y}function vA(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0;if(R=bt(g|0,v|0,52)|0,ae()|0,R=R&15,y>>>0>15)return T=4,T|0;if((R|0)<(y|0))return T=12,T|0;if((R|0)==(y|0))return m[T>>2]=g,m[T+4>>2]=v,T=0,T|0;if(M=Pt(y|0,0,52)|0,M=M|g,g=ae()|0|v&-15728641,(R|0)>(y|0))do v=Pt(7,0,(14-y|0)*3|0)|0,y=y+1|0,M=v|M,g=ae()|0|g;while((y|0)<(R|0));return m[T>>2]=M,m[T+4>>2]=g,T=0,T|0}function nf(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0;if(R=bt(g|0,v|0,52)|0,ae()|0,R=R&15,!((y|0)<16&(R|0)<=(y|0)))return T=4,T|0;M=y-R|0,y=bt(g|0,v|0,45)|0,ae()|0;e:do if(!(vr(y&127)|0))y=Io(7,0,M,((M|0)<0)<<31>>31)|0,M=ae()|0;else{t:do if(R|0){for(y=1;N=Pt(7,0,(15-y|0)*3|0)|0,!!((N&g|0)==0&((ae()|0)&v|0)==0);)if(y>>>0<R>>>0)y=y+1|0;else break t;y=Io(7,0,M,((M|0)<0)<<31>>31)|0,M=ae()|0;break e}while(!1);y=Io(7,0,M,((M|0)<0)<<31>>31)|0,y=qr(y|0,ae()|0,5,0)|0,y=Qt(y|0,ae()|0,-5,-1)|0,y=wl(y|0,ae()|0,6,0)|0,y=Qt(y|0,ae()|0,1,0)|0,M=ae()|0}while(!1);return N=T,m[N>>2]=y,m[N+4>>2]=M,N=0,N|0}function Ni(g,v){g=g|0,v=v|0;var y=0,T=0,M=0;if(M=bt(g|0,v|0,45)|0,ae()|0,!(vr(M&127)|0))return M=0,M|0;M=bt(g|0,v|0,52)|0,ae()|0,M=M&15;e:do if(!M)y=0;else for(T=1;;){if(y=bt(g|0,v|0,(15-T|0)*3|0)|0,ae()|0,y=y&7,y|0)break e;if(T>>>0<M>>>0)T=T+1|0;else{y=0;break}}while(!1);return M=(y|0)==0&1,M|0}function Ld(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0;if(N=re,re=re+16|0,R=N,Wu(R,g,v,y),v=R,g=m[v>>2]|0,v=m[v+4>>2]|0,(g|0)==0&(v|0)==0)return re=N,0;M=0,y=0;do O=T+(M<<3)|0,m[O>>2]=g,m[O+4>>2]=v,M=Qt(M|0,y|0,1,0)|0,y=ae()|0,bA(R),O=R,g=m[O>>2]|0,v=m[O+4>>2]|0;while(!((g|0)==0&(v|0)==0));return re=N,0}function Y1(g,v,y,T){return g=g|0,v=v|0,y=y|0,T=T|0,(T|0)<(y|0)?(y=v,T=g,dt(y|0),T|0):(y=Pt(-1,-1,((T-y|0)*3|0)+3|0)|0,T=Pt(~y|0,~(ae()|0)|0,(15-T|0)*3|0)|0,y=~(ae()|0)&v,T=~T&g,dt(y|0),T|0)}function Dd(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0;return M=bt(g|0,v|0,52)|0,ae()|0,M=M&15,(y|0)<16&(M|0)<=(y|0)?((M|0)<(y|0)&&(M=Pt(-1,-1,((y+-1-M|0)*3|0)+3|0)|0,M=Pt(~M|0,~(ae()|0)|0,(15-y|0)*3|0)|0,v=~(ae()|0)&v,g=~M&g),M=Pt(y|0,0,52)|0,y=v&-15728641|(ae()|0),m[T>>2]=g|M,m[T+4>>2]=y,T=0,T|0):(T=4,T|0)}function $1(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0,cn=0,ii=0,_n=0,sn=0,Et=0;if((y|0)==0&(T|0)==0)return Et=0,Et|0;if(M=g,R=m[M>>2]|0,M=m[M+4>>2]|0,!0&(M&15728640|0)==0){if(!((T|0)>0|(T|0)==0&y>>>0>0)||(Et=v,m[Et>>2]=R,m[Et+4>>2]=M,(y|0)==1&(T|0)==0))return Et=0,Et|0;M=1,R=0;do _n=g+(M<<3)|0,sn=m[_n+4>>2]|0,Et=v+(M<<3)|0,m[Et>>2]=m[_n>>2],m[Et+4>>2]=sn,M=Qt(M|0,R|0,1,0)|0,R=ae()|0;while((R|0)<(T|0)|(R|0)==(T|0)&M>>>0<y>>>0);return M=0,M|0}if(ii=y<<3,sn=_l(ii)|0,!sn)return Et=13,Et|0;if(eh(sn|0,g|0,ii|0)|0,_n=lo(y,8)|0,!_n)return kn(sn),Et=13,Et|0;e:for(;;){M=sn,q=m[M>>2]|0,M=m[M+4>>2]|0,$t=bt(q|0,M|0,52)|0,ae()|0,$t=$t&15,cn=$t+-1|0,wt=($t|0)!=0,nn=(T|0)>0|(T|0)==0&y>>>0>0;t:do if(wt&nn){if(ze=Pt(cn|0,0,52)|0,Be=ae()|0,cn>>>0>15){if(!((q|0)==0&(M|0)==0)){Et=16;break e}for(R=0,g=0;;){if(R=Qt(R|0,g|0,1,0)|0,g=ae()|0,!((g|0)<(T|0)|(g|0)==(T|0)&R>>>0<y>>>0))break t;if(N=sn+(R<<3)|0,Nt=m[N>>2]|0,N=m[N+4>>2]|0,!((Nt|0)==0&(N|0)==0)){M=N,Et=16;break e}}}for(O=q,g=M,R=0,N=0;;){if(!((O|0)==0&(g|0)==0)){if(!(!0&(g&117440512|0)==0)){Et=21;break e}if(Q=bt(O|0,g|0,52)|0,ae()|0,Q=Q&15,(Q|0)<(cn|0)){M=12,Et=27;break e}if((Q|0)!=(cn|0)&&(O=O|ze,g=g&-15728641|Be,Q>>>0>=$t>>>0)){G=cn;do Nt=Pt(7,0,(14-G|0)*3|0)|0,G=G+1|0,O=Nt|O,g=ae()|0|g;while(G>>>0<Q>>>0)}if(xe=Ju(O|0,g|0,y|0,T|0)|0,ge=ae()|0,G=_n+(xe<<3)|0,Q=G,le=m[Q>>2]|0,Q=m[Q+4>>2]|0,!((le|0)==0&(Q|0)==0)){De=0,je=0;do{if((De|0)>(T|0)|(De|0)==(T|0)&je>>>0>y>>>0){Et=31;break e}if((le|0)==(O|0)&(Q&-117440513|0)==(g|0)){me=bt(le|0,Q|0,56)|0,ae()|0,me=me&7,Me=me+1|0,Nt=bt(le|0,Q|0,45)|0,ae()|0;n:do if(!(vr(Nt&127)|0))Q=7;else{if(le=bt(le|0,Q|0,52)|0,ae()|0,le=le&15,!le){Q=6;break}for(Q=1;;){if(Nt=Pt(7,0,(15-Q|0)*3|0)|0,!((Nt&O|0)==0&((ae()|0)&g|0)==0)){Q=7;break n}if(Q>>>0<le>>>0)Q=Q+1|0;else{Q=6;break}}}while(!1);if((me+2|0)>>>0>Q>>>0){Et=41;break e}Nt=Pt(Me|0,0,56)|0,g=ae()|0|g&-117440513,Ee=G,m[Ee>>2]=0,m[Ee+4>>2]=0,O=Nt|O}else xe=Qt(xe|0,ge|0,1,0)|0,xe=ff(xe|0,ae()|0,y|0,T|0)|0,ge=ae()|0;je=Qt(je|0,De|0,1,0)|0,De=ae()|0,G=_n+(xe<<3)|0,Q=G,le=m[Q>>2]|0,Q=m[Q+4>>2]|0}while(!((le|0)==0&(Q|0)==0))}Nt=G,m[Nt>>2]=O,m[Nt+4>>2]=g}if(R=Qt(R|0,N|0,1,0)|0,N=ae()|0,!((N|0)<(T|0)|(N|0)==(T|0)&R>>>0<y>>>0))break t;g=sn+(R<<3)|0,O=m[g>>2]|0,g=m[g+4>>2]|0}}while(!1);if(Nt=Qt(y|0,T|0,5,0)|0,Ee=ae()|0,Ee>>>0<0|(Ee|0)==0&Nt>>>0<11){Et=85;break}if(Nt=wl(y|0,T|0,6,0)|0,ae()|0,Nt=lo(Nt,8)|0,!Nt){Et=48;break}do if(nn){for(Me=0,g=0,me=0,De=0;;){if(Q=_n+(Me<<3)|0,N=Q,R=m[N>>2]|0,N=m[N+4>>2]|0,(R|0)==0&(N|0)==0)Ee=me;else{le=bt(R|0,N|0,56)|0,ae()|0,le=le&7,O=le+1|0,xe=N&-117440513,Ee=bt(R|0,N|0,45)|0,ae()|0;t:do if(vr(Ee&127)|0){if(ge=bt(R|0,N|0,52)|0,ae()|0,ge=ge&15,ge|0)for(G=1;;){if(Ee=Pt(7,0,(15-G|0)*3|0)|0,!((R&Ee|0)==0&(xe&(ae()|0)|0)==0))break t;if(G>>>0<ge>>>0)G=G+1|0;else break}N=Pt(O|0,0,56)|0,R=N|R,N=ae()|0|xe,O=Q,m[O>>2]=R,m[O+4>>2]=N,O=le+2|0}while(!1);(O|0)==7?(Ee=Nt+(g<<3)|0,m[Ee>>2]=R,m[Ee+4>>2]=N&-117440513,g=Qt(g|0,me|0,1,0)|0,Ee=ae()|0):Ee=me}if(Me=Qt(Me|0,De|0,1,0)|0,De=ae()|0,(De|0)<(T|0)|(De|0)==(T|0)&Me>>>0<y>>>0)me=Ee;else break}if(nn){if(je=cn>>>0>15,ze=Pt(cn|0,0,52)|0,Be=ae()|0,!wt){for(R=0,G=0,O=0,N=0;(q|0)==0&(M|0)==0||(cn=v+(R<<3)|0,m[cn>>2]=q,m[cn+4>>2]=M,R=Qt(R|0,G|0,1,0)|0,G=ae()|0),O=Qt(O|0,N|0,1,0)|0,N=ae()|0,!!((N|0)<(T|0)|(N|0)==(T|0)&O>>>0<y>>>0);)M=sn+(O<<3)|0,q=m[M>>2]|0,M=m[M+4>>2]|0;M=Ee;break}for(R=0,G=0,N=0,O=0;;){do if(!((q|0)==0&(M|0)==0)){if(ge=bt(q|0,M|0,52)|0,ae()|0,ge=ge&15,je|(ge|0)<(cn|0)){Et=80;break e}if((ge|0)!=(cn|0)){if(Q=q|ze,le=M&-15728641|Be,ge>>>0>=$t>>>0){xe=cn;do wt=Pt(7,0,(14-xe|0)*3|0)|0,xe=xe+1|0,Q=wt|Q,le=ae()|0|le;while(xe>>>0<ge>>>0)}}else Q=q,le=M;me=Ju(Q|0,le|0,y|0,T|0)|0,xe=0,ge=0,De=ae()|0;do{if((xe|0)>(T|0)|(xe|0)==(T|0)&ge>>>0>y>>>0){Et=81;break e}if(wt=_n+(me<<3)|0,Me=m[wt+4>>2]|0,(Me&-117440513|0)==(le|0)&&(m[wt>>2]|0)==(Q|0)){Et=65;break}wt=Qt(me|0,De|0,1,0)|0,me=ff(wt|0,ae()|0,y|0,T|0)|0,De=ae()|0,ge=Qt(ge|0,xe|0,1,0)|0,xe=ae()|0,wt=_n+(me<<3)|0}while(!((m[wt>>2]|0)==(Q|0)&&(m[wt+4>>2]|0)==(le|0)));if((Et|0)==65&&(Et=0,!0&(Me&117440512|0)==100663296))break;wt=v+(R<<3)|0,m[wt>>2]=q,m[wt+4>>2]=M,R=Qt(R|0,G|0,1,0)|0,G=ae()|0}while(!1);if(N=Qt(N|0,O|0,1,0)|0,O=ae()|0,!((O|0)<(T|0)|(O|0)==(T|0)&N>>>0<y>>>0))break;M=sn+(N<<3)|0,q=m[M>>2]|0,M=m[M+4>>2]|0}M=Ee}else R=0,M=Ee}else R=0,g=0,M=0;while(!1);if(Sl(_n|0,0,ii|0)|0,eh(sn|0,Nt|0,g<<3|0)|0,kn(Nt),(g|0)==0&(M|0)==0){Et=89;break}else v=v+(R<<3)|0,T=M,y=g}if((Et|0)==16)!0&(M&117440512|0)==0?(M=4,Et=27):Et=21;else if((Et|0)==31)Lt(27795,27122,529,27132);else{if((Et|0)==41)return kn(sn),kn(_n),Et=10,Et|0;if((Et|0)==48)return kn(sn),kn(_n),Et=13,Et|0;(Et|0)==80?Lt(27795,27122,620,27132):(Et|0)==81?Lt(27795,27122,632,27132):(Et|0)==85&&(eh(v|0,sn|0,y<<3|0)|0,Et=89)}return(Et|0)==21?(kn(sn),kn(_n),Et=5,Et|0):(Et|0)==27?(kn(sn),kn(_n),Et=M,Et|0):(Et|0)==89?(kn(sn),kn(_n),Et=0,Et|0):0}function Q1(g,v,y,T,M,R,N){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,R=R|0,N=N|0;var O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0;if(Me=re,re=re+16|0,me=Me,!((y|0)>0|(y|0)==0&v>>>0>0))return me=0,re=Me,me|0;if((N|0)>=16)return me=12,re=Me,me|0;xe=0,ge=0,le=0,O=0;e:for(;;){if(q=g+(xe<<3)|0,G=m[q>>2]|0,q=m[q+4>>2]|0,Q=bt(G|0,q|0,52)|0,ae()|0,(Q&15|0)>(N|0)){O=12,G=11;break}if(Wu(me,G,q,N),Q=me,q=m[Q>>2]|0,Q=m[Q+4>>2]|0,(q|0)==0&(Q|0)==0)G=le;else{G=le;do{if(!((O|0)<(R|0)|(O|0)==(R|0)&G>>>0<M>>>0)){G=10;break e}le=T+(G<<3)|0,m[le>>2]=q,m[le+4>>2]=Q,G=Qt(G|0,O|0,1,0)|0,O=ae()|0,bA(me),le=me,q=m[le>>2]|0,Q=m[le+4>>2]|0}while(!((q|0)==0&(Q|0)==0))}if(xe=Qt(xe|0,ge|0,1,0)|0,ge=ae()|0,(ge|0)<(y|0)|(ge|0)==(y|0)&xe>>>0<v>>>0)le=G;else{O=0,G=11;break}}return(G|0)==10?(me=14,re=Me,me|0):(G|0)==11?(re=Me,O|0):0}function Om(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0;xe=re,re=re+16|0,le=xe;e:do if((y|0)>0|(y|0)==0&v>>>0>0){for(q=0,N=0,R=0,Q=0;;){if(G=g+(q<<3)|0,O=m[G>>2]|0,G=m[G+4>>2]|0,!((O|0)==0&(G|0)==0)&&(G=(nf(O,G,T,le)|0)==0,O=le,N=Qt(m[O>>2]|0,m[O+4>>2]|0,N|0,R|0)|0,R=ae()|0,!G)){R=12;break}if(q=Qt(q|0,Q|0,1,0)|0,Q=ae()|0,!((Q|0)<(y|0)|(Q|0)==(y|0)&q>>>0<v>>>0))break e}return re=xe,R|0}else N=0,R=0;while(!1);return m[M>>2]=N,m[M+4>>2]=R,M=0,re=xe,M|0}function Im(g,v){return g=g|0,v=v|0,v=bt(g|0,v|0,52)|0,ae()|0,v&1|0}function sa(g,v){g=g|0,v=v|0;var y=0,T=0,M=0;if(M=bt(g|0,v|0,52)|0,ae()|0,M=M&15,!M)return M=0,M|0;for(T=1;;){if(y=bt(g|0,v|0,(15-T|0)*3|0)|0,ae()|0,y=y&7,y|0){T=5;break}if(T>>>0<M>>>0)T=T+1|0;else{y=0,T=5;break}}return(T|0)==5?y|0:0}function yA(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0;if(G=bt(g|0,v|0,52)|0,ae()|0,G=G&15,!G)return O=v,G=g,dt(O|0),G|0;for(O=1,y=0;;){R=(15-O|0)*3|0,T=Pt(7,0,R|0)|0,M=ae()|0,N=bt(g|0,v|0,R|0)|0,ae()|0,R=Pt(Gu(N&7)|0,0,R|0)|0,N=ae()|0,g=R|g&~T,v=N|v&~M;e:do if(!y)if((R&T|0)==0&(N&M|0)==0)y=0;else if(T=bt(g|0,v|0,52)|0,ae()|0,T=T&15,!T)y=1;else{y=1;t:for(;;){switch(N=bt(g|0,v|0,(15-y|0)*3|0)|0,ae()|0,N&7){case 1:break t;case 0:break;default:{y=1;break e}}if(y>>>0<T>>>0)y=y+1|0;else{y=1;break e}}for(y=1;;)if(N=(15-y|0)*3|0,M=bt(g|0,v|0,N|0)|0,ae()|0,R=Pt(7,0,N|0)|0,v=v&~(ae()|0),N=Pt(Gu(M&7)|0,0,N|0)|0,g=g&~R|N,v=v|(ae()|0),y>>>0<T>>>0)y=y+1|0;else{y=1;break}}while(!1);if(O>>>0<G>>>0)O=O+1|0;else break}return dt(v|0),g|0}function zc(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0;if(T=bt(g|0,v|0,52)|0,ae()|0,T=T&15,!T)return y=v,T=g,dt(y|0),T|0;for(y=1;R=(15-y|0)*3|0,N=bt(g|0,v|0,R|0)|0,ae()|0,M=Pt(7,0,R|0)|0,v=v&~(ae()|0),R=Pt(Gu(N&7)|0,0,R|0)|0,g=R|g&~M,v=ae()|0|v,y>>>0<T>>>0;)y=y+1|0;return dt(v|0),g|0}function s3(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0;if(G=bt(g|0,v|0,52)|0,ae()|0,G=G&15,!G)return O=v,G=g,dt(O|0),G|0;for(O=1,y=0;;){R=(15-O|0)*3|0,T=Pt(7,0,R|0)|0,M=ae()|0,N=bt(g|0,v|0,R|0)|0,ae()|0,R=Pt(Kl(N&7)|0,0,R|0)|0,N=ae()|0,g=R|g&~T,v=N|v&~M;e:do if(!y)if((R&T|0)==0&(N&M|0)==0)y=0;else if(T=bt(g|0,v|0,52)|0,ae()|0,T=T&15,!T)y=1;else{y=1;t:for(;;){switch(N=bt(g|0,v|0,(15-y|0)*3|0)|0,ae()|0,N&7){case 1:break t;case 0:break;default:{y=1;break e}}if(y>>>0<T>>>0)y=y+1|0;else{y=1;break e}}for(y=1;;)if(M=(15-y|0)*3|0,R=Pt(7,0,M|0)|0,N=v&~(ae()|0),v=bt(g|0,v|0,M|0)|0,ae()|0,v=Pt(Kl(v&7)|0,0,M|0)|0,g=g&~R|v,v=N|(ae()|0),y>>>0<T>>>0)y=y+1|0;else{y=1;break}}while(!1);if(O>>>0<G>>>0)O=O+1|0;else break}return dt(v|0),g|0}function Bm(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0;if(T=bt(g|0,v|0,52)|0,ae()|0,T=T&15,!T)return y=v,T=g,dt(y|0),T|0;for(y=1;N=(15-y|0)*3|0,R=Pt(7,0,N|0)|0,M=v&~(ae()|0),v=bt(g|0,v|0,N|0)|0,ae()|0,v=Pt(Kl(v&7)|0,0,N|0)|0,g=v|g&~R,v=ae()|0|M,y>>>0<T>>>0;)y=y+1|0;return dt(v|0),g|0}function a3(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(G=re,re=re+64|0,O=G+40|0,T=G+24|0,M=G+12|0,R=G,Pt(v|0,0,52)|0,y=ae()|0|134225919,!v)return(m[g+4>>2]|0)>2||(m[g+8>>2]|0)>2||(m[g+12>>2]|0)>2?(N=0,O=0,dt(N|0),re=G,O|0):(Pt(wd(g)|0,0,45)|0,N=ae()|0|y,O=-1,dt(N|0),re=G,O|0);if(m[O>>2]=m[g>>2],m[O+4>>2]=m[g+4>>2],m[O+8>>2]=m[g+8>>2],m[O+12>>2]=m[g+12>>2],N=O+4|0,(v|0)>0)for(g=-1;m[T>>2]=m[N>>2],m[T+4>>2]=m[N+4>>2],m[T+8>>2]=m[N+8>>2],v&1?(XT(N),m[M>>2]=m[N>>2],m[M+4>>2]=m[N+4>>2],m[M+8>>2]=m[N+8>>2],ef(M)):(U1(N),m[M>>2]=m[N>>2],m[M+4>>2]=m[N+4>>2],m[M+8>>2]=m[N+8>>2],zu(M)),Pd(T,M,R),Kr(R),Q=(15-v|0)*3|0,q=Pt(7,0,Q|0)|0,y=y&~(ae()|0),Q=Pt(Uu(R)|0,0,Q|0)|0,g=Q|g&~q,y=ae()|0|y,(v|0)>1;)v=v+-1|0;else g=-1;e:do if((m[N>>2]|0)<=2&&(m[O+8>>2]|0)<=2&&(m[O+12>>2]|0)<=2){if(T=wd(O)|0,v=Pt(T|0,0,45)|0,v=v|g,g=ae()|0|y&-1040385,R=Tm(O)|0,!(vr(T)|0)){if((R|0)<=0)break;for(M=0;;){if(T=bt(v|0,g|0,52)|0,ae()|0,T=T&15,T)for(y=1;Q=(15-y|0)*3|0,O=bt(v|0,g|0,Q|0)|0,ae()|0,q=Pt(7,0,Q|0)|0,g=g&~(ae()|0),Q=Pt(Gu(O&7)|0,0,Q|0)|0,v=v&~q|Q,g=g|(ae()|0),y>>>0<T>>>0;)y=y+1|0;if(M=M+1|0,(M|0)==(R|0))break e}}M=bt(v|0,g|0,52)|0,ae()|0,M=M&15;t:do if(M){y=1;n:for(;;){switch(Q=bt(v|0,g|0,(15-y|0)*3|0)|0,ae()|0,Q&7){case 1:break n;case 0:break;default:break t}if(y>>>0<M>>>0)y=y+1|0;else break t}if(Iu(T,m[O>>2]|0)|0)for(y=1;O=(15-y|0)*3|0,q=Pt(7,0,O|0)|0,Q=g&~(ae()|0),g=bt(v|0,g|0,O|0)|0,ae()|0,g=Pt(Kl(g&7)|0,0,O|0)|0,v=v&~q|g,g=Q|(ae()|0),y>>>0<M>>>0;)y=y+1|0;else for(y=1;Q=(15-y|0)*3|0,O=bt(v|0,g|0,Q|0)|0,ae()|0,q=Pt(7,0,Q|0)|0,g=g&~(ae()|0),Q=Pt(Gu(O&7)|0,0,Q|0)|0,v=v&~q|Q,g=g|(ae()|0),y>>>0<M>>>0;)y=y+1|0}while(!1);if((R|0)>0){y=0;do v=yA(v,g)|0,g=ae()|0,y=y+1|0;while((y|0)!=(R|0))}}else v=0,g=0;while(!1);return q=g,Q=v,dt(q|0),re=G,Q|0}function ro(g){return g=g|0,(g|0)%2|0|0}function Fm(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0;return M=re,re=re+16|0,T=M,v>>>0>15?(T=4,re=M,T|0):(m[g+4>>2]&2146435072|0)==2146435072||(m[g+8+4>>2]&2146435072|0)==2146435072?(T=3,re=M,T|0):(n3(g,v,T),v=a3(T,v)|0,T=ae()|0,m[y>>2]=v,m[y+4>>2]=T,(v|0)==0&(T|0)==0&&Lt(27795,27122,959,27145),T=0,re=M,T|0)}function aa(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0;if(M=y+4|0,R=bt(g|0,v|0,52)|0,ae()|0,R=R&15,N=bt(g|0,v|0,45)|0,ae()|0,T=(R|0)==0,vr(N&127)|0){if(T)return N=1,N|0;T=1}else{if(T)return N=0,N|0;(m[M>>2]|0)==0&&(m[y+8>>2]|0)==0?T=(m[y+12>>2]|0)!=0&1:T=1}for(y=1;y&1?ef(M):zu(M),N=bt(g|0,v|0,(15-y|0)*3|0)|0,ae()|0,z1(M,N&7),y>>>0<R>>>0;)y=y+1|0;return T|0}function ml(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(Q=re,re=re+16|0,G=Q,q=bt(g|0,v|0,45)|0,ae()|0,q=q&127,q>>>0>121)return m[y>>2]=0,m[y+4>>2]=0,m[y+8>>2]=0,m[y+12>>2]=0,q=5,re=Q,q|0;e:do if((vr(q)|0)!=0&&(R=bt(g|0,v|0,52)|0,ae()|0,R=R&15,(R|0)!=0)){T=1;t:for(;;){switch(O=bt(g|0,v|0,(15-T|0)*3|0)|0,ae()|0,O&7){case 5:break t;case 0:break;default:{T=v;break e}}if(T>>>0<R>>>0)T=T+1|0;else{T=v;break e}}for(M=1,T=v;v=(15-M|0)*3|0,N=Pt(7,0,v|0)|0,O=T&~(ae()|0),T=bt(g|0,T|0,v|0)|0,ae()|0,T=Pt(Kl(T&7)|0,0,v|0)|0,g=g&~N|T,T=O|(ae()|0),M>>>0<R>>>0;)M=M+1|0}else T=v;while(!1);if(O=7696+(q*28|0)|0,m[y>>2]=m[O>>2],m[y+4>>2]=m[O+4>>2],m[y+8>>2]=m[O+8>>2],m[y+12>>2]=m[O+12>>2],!(aa(g,T,y)|0))return q=0,re=Q,q|0;if(N=y+4|0,m[G>>2]=m[N>>2],m[G+4>>2]=m[N+4>>2],m[G+8>>2]=m[N+8>>2],R=bt(g|0,T|0,52)|0,ae()|0,O=R&15,R&1?(zu(N),R=O+1|0):R=O,!(vr(q)|0))T=0;else{e:do if(!O)T=0;else for(v=1;;){if(M=bt(g|0,T|0,(15-v|0)*3|0)|0,ae()|0,M=M&7,M|0){T=M;break e}if(v>>>0<O>>>0)v=v+1|0;else{T=0;break}}while(!1);T=(T|0)==4&1}if(!(Hu(y,R,T,0)|0))(R|0)!=(O|0)&&(m[N>>2]=m[G>>2],m[N+4>>2]=m[G+4>>2],m[N+8>>2]=m[G+8>>2]);else{if(vr(q)|0)do;while((Hu(y,R,0,0)|0)!=0);(R|0)!=(O|0)&&U1(N)}return q=0,re=Q,q|0}function Gc(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;return R=re,re=re+16|0,T=R,M=ml(g,v,T)|0,M|0?(re=R,M|0):(M=bt(g|0,v|0,52)|0,ae()|0,Nd(T,M&15,y),M=0,re=R,M|0)}function qu(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0;if(N=re,re=re+16|0,R=N,T=ml(g,v,R)|0,T|0)return R=T,re=N,R|0;T=bt(g|0,v|0,45)|0,ae()|0,T=(vr(T&127)|0)==0,M=bt(g|0,v|0,52)|0,ae()|0,M=M&15;e:do if(!T){if(M|0)for(T=1;;){if(O=Pt(7,0,(15-T|0)*3|0)|0,!((O&g|0)==0&((ae()|0)&v|0)==0))break e;if(T>>>0<M>>>0)T=T+1|0;else break}return Pm(R,M,0,5,y),O=0,re=N,O|0}while(!1);return mA(R,M,0,6,y),O=0,re=N,O|0}function Z1(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;if(M=bt(g|0,v|0,45)|0,ae()|0,!(vr(M&127)|0))return M=2,m[y>>2]=M,0;if(M=bt(g|0,v|0,52)|0,ae()|0,M=M&15,!M)return M=5,m[y>>2]=M,0;for(T=1;;){if(R=Pt(7,0,(15-T|0)*3|0)|0,!((R&g|0)==0&((ae()|0)&v|0)==0)){T=2,g=6;break}if(T>>>0<M>>>0)T=T+1|0;else{T=5,g=6;break}}return(g|0)==6&&(m[y>>2]=T),0}function Um(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0;le=re,re=re+128|0,q=le+112|0,R=le+96|0,Q=le,M=bt(g|0,v|0,52)|0,ae()|0,O=M&15,m[q>>2]=O,N=bt(g|0,v|0,45)|0,ae()|0,N=N&127;e:do if(vr(N)|0){if(O|0)for(T=1;;){if(G=Pt(7,0,(15-T|0)*3|0)|0,!((G&g|0)==0&((ae()|0)&v|0)==0)){M=0;break e}if(T>>>0<O>>>0)T=T+1|0;else break}if(M&1)M=1;else return G=Pt(O+1|0,0,52)|0,Q=ae()|0|v&-15728641,q=Pt(7,0,(14-O|0)*3|0)|0,Q=Um((G|g)&~q,Q&~(ae()|0),y)|0,re=le,Q|0}else M=0;while(!1);if(T=ml(g,v,R)|0,!T){M?(Nm(R,q,Q),G=5):(Lm(R,q,Q),G=6);e:do if(vr(N)|0)if(!O)g=5;else for(T=1;;){if(N=Pt(7,0,(15-T|0)*3|0)|0,!((N&g|0)==0&((ae()|0)&v|0)==0)){g=2;break e}if(T>>>0<O>>>0)T=T+1|0;else{g=5;break}}else g=2;while(!1);Sl(y|0,-1,g<<2|0)|0;e:do if(M)for(R=0;;){if(N=Q+(R<<4)|0,j1(N,m[q>>2]|0)|0,N=m[N>>2]|0,O=m[y>>2]|0,(O|0)==-1|(O|0)==(N|0))T=y;else{M=0;do{if(M=M+1|0,M>>>0>=g>>>0){T=1;break e}T=y+(M<<2)|0,O=m[T>>2]|0}while(!((O|0)==-1|(O|0)==(N|0)))}if(m[T>>2]=N,R=R+1|0,R>>>0>=G>>>0){T=0;break}}else for(R=0;;){if(N=Q+(R<<4)|0,Hu(N,m[q>>2]|0,0,1)|0,N=m[N>>2]|0,O=m[y>>2]|0,(O|0)==-1|(O|0)==(N|0))T=y;else{M=0;do{if(M=M+1|0,M>>>0>=g>>>0){T=1;break e}T=y+(M<<2)|0,O=m[T>>2]|0}while(!((O|0)==-1|(O|0)==(N|0)))}if(m[T>>2]=N,R=R+1|0,R>>>0>=G>>>0){T=0;break}}while(!1)}return Q=T,re=le,Q|0}function zm(){return 12}function Gm(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0;if(g>>>0>15)return O=4,O|0;if(Pt(g|0,0,52)|0,O=ae()|0|134225919,!g){y=0,T=0;do vr(T)|0&&(Pt(T|0,0,45)|0,N=O|(ae()|0),g=v+(y<<3)|0,m[g>>2]=-1,m[g+4>>2]=N,y=y+1|0),T=T+1|0;while((T|0)!=122);return y=0,y|0}y=0,N=0;do{if(vr(N)|0){for(Pt(N|0,0,45)|0,T=1,M=-1,R=O|(ae()|0);G=Pt(7,0,(15-T|0)*3|0)|0,M=M&~G,R=R&~(ae()|0),(T|0)!=(g|0);)T=T+1|0;G=v+(y<<3)|0,m[G>>2]=M,m[G+4>>2]=R,y=y+1|0}N=N+1|0}while((N|0)!=122);return y=0,y|0}function rf(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0;if(ze=re,re=re+16|0,De=ze,je=bt(g|0,v|0,52)|0,ae()|0,je=je&15,y>>>0>15)return je=4,re=ze,je|0;if((je|0)<(y|0))return je=12,re=ze,je|0;if((je|0)!=(y|0))if(R=Pt(y|0,0,52)|0,R=R|g,O=ae()|0|v&-15728641,(je|0)>(y|0)){G=y;do Me=Pt(7,0,(14-G|0)*3|0)|0,G=G+1|0,R=Me|R,O=ae()|0|O;while((G|0)<(je|0));Me=R}else Me=R;else Me=g,O=v;me=bt(Me|0,O|0,45)|0,ae()|0;e:do if(vr(me&127)|0){if(G=bt(Me|0,O|0,52)|0,ae()|0,G=G&15,G|0)for(R=1;;){if(me=Pt(7,0,(15-R|0)*3|0)|0,!((me&Me|0)==0&((ae()|0)&O|0)==0)){q=33;break e}if(R>>>0<G>>>0)R=R+1|0;else break}if(me=T,m[me>>2]=0,m[me+4>>2]=0,(je|0)>(y|0)){for(me=v&-15728641,ge=je;;){if(xe=ge,ge=ge+-1|0,ge>>>0>15|(je|0)<(ge|0)){q=19;break}if((je|0)!=(ge|0))if(R=Pt(ge|0,0,52)|0,R=R|g,G=ae()|0|me,(je|0)<(xe|0))le=R;else{q=ge;do le=Pt(7,0,(14-q|0)*3|0)|0,q=q+1|0,R=le|R,G=ae()|0|G;while((q|0)<(je|0));le=R}else le=g,G=v;if(Q=bt(le|0,G|0,45)|0,ae()|0,!(vr(Q&127)|0))R=0;else{Q=bt(le|0,G|0,52)|0,ae()|0,Q=Q&15;t:do if(!Q)R=0;else for(q=1;;){if(R=bt(le|0,G|0,(15-q|0)*3|0)|0,ae()|0,R=R&7,R|0)break t;if(q>>>0<Q>>>0)q=q+1|0;else{R=0;break}}while(!1);R=(R|0)==0&1}if(G=bt(g|0,v|0,(15-xe|0)*3|0)|0,ae()|0,G=G&7,(G|0)==7){M=5,q=42;break}if(R=(R|0)!=0,(G|0)==1&R){M=5,q=42;break}if(le=G+(((G|0)!=0&R)<<31>>31)|0,le|0&&(q=je-xe|0,q=Io(7,0,q,((q|0)<0)<<31>>31)|0,Q=ae()|0,R?(R=qr(q|0,Q|0,5,0)|0,R=Qt(R|0,ae()|0,-5,-1)|0,R=wl(R|0,ae()|0,6,0)|0,R=Qt(R|0,ae()|0,1,0)|0,G=ae()|0):(R=q,G=Q),xe=le+-1|0,xe=qr(q|0,Q|0,xe|0,((xe|0)<0)<<31>>31|0)|0,xe=Qt(R|0,G|0,xe|0,ae()|0)|0,le=ae()|0,Q=T,Q=Qt(xe|0,le|0,m[Q>>2]|0,m[Q+4>>2]|0)|0,le=ae()|0,xe=T,m[xe>>2]=Q,m[xe+4>>2]=le),(ge|0)<=(y|0)){q=37;break}}if((q|0)==19)Lt(27795,27122,1276,27158);else if((q|0)==37){N=T,M=m[N+4>>2]|0,N=m[N>>2]|0;break}else if((q|0)==42)return re=ze,M|0}else M=0,N=0}else q=33;while(!1);e:do if((q|0)==33)if(me=T,m[me>>2]=0,m[me+4>>2]=0,(je|0)>(y|0)){for(R=je;;){if(M=bt(g|0,v|0,(15-R|0)*3|0)|0,ae()|0,M=M&7,(M|0)==7){M=5;break}if(N=je-R|0,N=Io(7,0,N,((N|0)<0)<<31>>31)|0,M=qr(N|0,ae()|0,M|0,0)|0,N=ae()|0,me=T,N=Qt(m[me>>2]|0,m[me+4>>2]|0,M|0,N|0)|0,M=ae()|0,me=T,m[me>>2]=N,m[me+4>>2]=M,R=R+-1|0,(R|0)<=(y|0))break e}return re=ze,M|0}else M=0,N=0;while(!1);return nf(Me,O,je,De)|0&&Lt(27795,27122,1236,27173),je=De,De=m[je+4>>2]|0,((M|0)>-1|(M|0)==-1&N>>>0>4294967295)&((De|0)>(M|0)|((De|0)==(M|0)?(m[je>>2]|0)>>>0>N>>>0:0))?(je=0,re=ze,je|0):(Lt(27795,27122,1316,27158),0)}function Vm(g,v,y,T,M,R){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,R=R|0;var N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0;if(le=re,re=re+16|0,N=le,M>>>0>15)return R=4,re=le,R|0;if(O=bt(y|0,T|0,52)|0,ae()|0,O=O&15,(O|0)>(M|0))return R=12,re=le,R|0;if(nf(y,T,M,N)|0&&Lt(27795,27122,1236,27173),Q=N,q=m[Q+4>>2]|0,!(((v|0)>-1|(v|0)==-1&g>>>0>4294967295)&((q|0)>(v|0)|((q|0)==(v|0)?(m[Q>>2]|0)>>>0>g>>>0:0))))return R=2,re=le,R|0;Q=M-O|0,M=Pt(M|0,0,52)|0,G=ae()|0|T&-15728641,q=R,m[q>>2]=M|y,m[q+4>>2]=G,q=bt(y|0,T|0,45)|0,ae()|0;e:do if(vr(q&127)|0){if(O|0)for(N=1;;){if(q=Pt(7,0,(15-N|0)*3|0)|0,!((q&y|0)==0&((ae()|0)&T|0)==0))break e;if(N>>>0<O>>>0)N=N+1|0;else break}if((Q|0)<1)return R=0,re=le,R|0;for(q=O^15,T=-1,G=1,N=1;;){O=Q-G|0,O=Io(7,0,O,((O|0)<0)<<31>>31)|0,y=ae()|0;do if(N)if(N=qr(O|0,y|0,5,0)|0,N=Qt(N|0,ae()|0,-5,-1)|0,N=wl(N|0,ae()|0,6,0)|0,M=ae()|0,(v|0)>(M|0)|(v|0)==(M|0)&g>>>0>N>>>0){v=Qt(g|0,v|0,-1,-1)|0,v=fs(v|0,ae()|0,N|0,M|0)|0,N=ae()|0,xe=R,me=m[xe>>2]|0,xe=m[xe+4>>2]|0,Me=(q+T|0)*3|0,ge=Pt(7,0,Me|0)|0,xe=xe&~(ae()|0),T=wl(v|0,N|0,O|0,y|0)|0,g=ae()|0,M=Qt(T|0,g|0,2,0)|0,Me=Pt(M|0,ae()|0,Me|0)|0,xe=ae()|0|xe,M=R,m[M>>2]=Me|me&~ge,m[M+4>>2]=xe,g=qr(T|0,g|0,O|0,y|0)|0,g=fs(v|0,N|0,g|0,ae()|0)|0,N=0,v=ae()|0;break}else{Me=R,ge=m[Me>>2]|0,Me=m[Me+4>>2]|0,me=Pt(7,0,(q+T|0)*3|0)|0,Me=Me&~(ae()|0),N=R,m[N>>2]=ge&~me,m[N+4>>2]=Me,N=1;break}else ge=R,M=m[ge>>2]|0,ge=m[ge+4>>2]|0,T=(q+T|0)*3|0,xe=Pt(7,0,T|0)|0,ge=ge&~(ae()|0),Me=wl(g|0,v|0,O|0,y|0)|0,N=ae()|0,T=Pt(Me|0,N|0,T|0)|0,ge=ae()|0|ge,me=R,m[me>>2]=T|M&~xe,m[me+4>>2]=ge,N=qr(Me|0,N|0,O|0,y|0)|0,g=fs(g|0,v|0,N|0,ae()|0)|0,N=0,v=ae()|0;while(!1);if((Q|0)>(G|0))T=~G,G=G+1|0;else{v=0;break}}return re=le,v|0}while(!1);if((Q|0)<1)return Me=0,re=le,Me|0;for(M=O^15,N=1;;)if(me=Q-N|0,me=Io(7,0,me,((me|0)<0)<<31>>31)|0,Me=ae()|0,G=R,y=m[G>>2]|0,G=m[G+4>>2]|0,O=(M-N|0)*3|0,T=Pt(7,0,O|0)|0,G=G&~(ae()|0),xe=wl(g|0,v|0,me|0,Me|0)|0,ge=ae()|0,O=Pt(xe|0,ge|0,O|0)|0,G=ae()|0|G,q=R,m[q>>2]=O|y&~T,m[q+4>>2]=G,Me=qr(xe|0,ge|0,me|0,Me|0)|0,g=fs(g|0,v|0,Me|0,ae()|0)|0,v=ae()|0,(Q|0)<=(N|0)){v=0;break}else N=N+1|0;return re=le,v|0}function Wu(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0;M=bt(v|0,y|0,52)|0,ae()|0,M=M&15,(v|0)==0&(y|0)==0|((T|0)>15|(M|0)>(T|0))?(R=-1,v=-1,y=0,M=0):(v=Y1(v,y,M+1|0,T)|0,N=(ae()|0)&-15728641,y=Pt(T|0,0,52)|0,y=v|y,N=N|(ae()|0),v=(Ni(y,N)|0)==0,R=M,v=v?-1:T,M=N),N=g,m[N>>2]=y,m[N+4>>2]=M,m[g+8>>2]=R,m[g+12>>2]=v}function xA(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0;if(M=bt(g|0,v|0,52)|0,ae()|0,M=M&15,R=T+8|0,m[R>>2]=M,(g|0)==0&(v|0)==0|((y|0)>15|(M|0)>(y|0))){y=T,m[y>>2]=0,m[y+4>>2]=0,m[R>>2]=-1,m[T+12>>2]=-1;return}if(g=Y1(g,v,M+1|0,y)|0,R=(ae()|0)&-15728641,M=Pt(y|0,0,52)|0,M=g|M,R=R|(ae()|0),g=T,m[g>>2]=M,m[g+4>>2]=R,g=T+12|0,Ni(M,R)|0){m[g>>2]=y;return}else{m[g>>2]=-1;return}}function bA(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0;if(y=g,v=m[y>>2]|0,y=m[y+4>>2]|0,!((v|0)==0&(y|0)==0)&&(T=bt(v|0,y|0,52)|0,ae()|0,T=T&15,O=Pt(1,0,(T^15)*3|0)|0,v=Qt(O|0,ae()|0,v|0,y|0)|0,y=ae()|0,O=g,m[O>>2]=v,m[O+4>>2]=y,O=g+8|0,N=m[O>>2]|0,!((T|0)<(N|0)))){for(G=g+12|0,R=T;;){if((R|0)==(N|0)){T=5;break}if(q=(R|0)==(m[G>>2]|0),M=(15-R|0)*3|0,T=bt(v|0,y|0,M|0)|0,ae()|0,T=T&7,q&((T|0)==1&!0)){T=7;break}if(!((T|0)==7&!0)){T=10;break}if(q=Pt(1,0,M|0)|0,v=Qt(v|0,y|0,q|0,ae()|0)|0,y=ae()|0,q=g,m[q>>2]=v,m[q+4>>2]=y,(R|0)>(N|0))R=R+-1|0;else{T=10;break}}if((T|0)==5){q=g,m[q>>2]=0,m[q+4>>2]=0,m[O>>2]=-1,m[G>>2]=-1;return}else if((T|0)==7){N=Pt(1,0,M|0)|0,N=Qt(v|0,y|0,N|0,ae()|0)|0,O=ae()|0,q=g,m[q>>2]=N,m[q+4>>2]=O,m[G>>2]=R+-1;return}else if((T|0)==10)return}}function Do(g){g=+g;var v=0;return v=g<0?g+6.283185307179586:g,+(g>=6.283185307179586?v+-6.283185307179586:v)}function ko(g,v){return g=g|0,v=v|0,+wn(+(+ie[g>>3]-+ie[v>>3]))<17453292519943298e-27?(v=+wn(+(+ie[g+8>>3]-+ie[v+8>>3]))<17453292519943298e-27,v|0):(v=0,v|0)}function oa(g,v){switch(g=+g,v=v|0,v|0){case 1:{g=g<0?g+6.283185307179586:g;break}case 2:{g=g>0?g+-6.283185307179586:g;break}}return+g}function K1(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0;return M=+ie[v>>3],T=+ie[g>>3],R=+hn(+((M-T)*.5)),y=+hn(+((+ie[v+8>>3]-+ie[g+8>>3])*.5)),y=R*R+y*(+ni(+M)*+ni(+T)*y),+(+Oe(+ +Zn(+y),+ +Zn(+(1-y)))*2)}function Oo(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0;return M=+ie[v>>3],T=+ie[g>>3],R=+hn(+((M-T)*.5)),y=+hn(+((+ie[v+8>>3]-+ie[g+8>>3])*.5)),y=R*R+y*(+ni(+M)*+ni(+T)*y),+(+Oe(+ +Zn(+y),+ +Zn(+(1-y)))*2*6371.007180918475)}function J1(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0;return M=+ie[v>>3],T=+ie[g>>3],R=+hn(+((M-T)*.5)),y=+hn(+((+ie[v+8>>3]-+ie[g+8>>3])*.5)),y=R*R+y*(+ni(+M)*+ni(+T)*y),+(+Oe(+ +Zn(+y),+ +Zn(+(1-y)))*2*6371.007180918475*1e3)}function eb(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0;return R=+ie[v>>3],T=+ni(+R),M=+ie[v+8>>3]-+ie[g+8>>3],N=T*+hn(+M),y=+ie[g>>3],+ +Oe(+N,+(+hn(+R)*+ni(+y)-+ni(+M)*(T*+hn(+y))))}function tb(g,v,y,T){g=g|0,v=+v,y=+y,T=T|0;var M=0,R=0,N=0,O=0;if(y<1e-16){m[T>>2]=m[g>>2],m[T+4>>2]=m[g+4>>2],m[T+8>>2]=m[g+8>>2],m[T+12>>2]=m[g+12>>2];return}R=v<0?v+6.283185307179586:v,R=v>=6.283185307179586?R+-6.283185307179586:R;do if(R<1e-16)v=+ie[g>>3]+y,ie[T>>3]=v,M=T;else{if(M=+wn(+(R+-3.141592653589793))<1e-16,v=+ie[g>>3],M){v=v-y,ie[T>>3]=v,M=T;break}if(N=+ni(+y),y=+hn(+y),v=N*+hn(+v)+ +ni(+R)*(y*+ni(+v)),v=v>1?1:v,v=+hs(+(v<-1?-1:v)),ie[T>>3]=v,+wn(+(v+-1.5707963267948966))<1e-16){ie[T>>3]=1.5707963267948966,ie[T+8>>3]=0;return}if(+wn(+(v+1.5707963267948966))<1e-16){ie[T>>3]=-1.5707963267948966,ie[T+8>>3]=0;return}if(O=1/+ni(+v),R=y*+hn(+R)*O,y=+ie[g>>3],v=O*((N-+hn(+v)*+hn(+y))/+ni(+y)),N=R>1?1:R,v=v>1?1:v,v=+ie[g+8>>3]+ +Oe(+(N<-1?-1:N),+(v<-1?-1:v)),v>3.141592653589793)do v=v+-6.283185307179586;while(v>3.141592653589793);if(v<-3.141592653589793)do v=v+6.283185307179586;while(v<-3.141592653589793);ie[T+8>>3]=v;return}while(!1);if(+wn(+(v+-1.5707963267948966))<1e-16){ie[M>>3]=1.5707963267948966,ie[T+8>>3]=0;return}if(+wn(+(v+1.5707963267948966))<1e-16){ie[M>>3]=-1.5707963267948966,ie[T+8>>3]=0;return}if(v=+ie[g+8>>3],v>3.141592653589793)do v=v+-6.283185307179586;while(v>3.141592653589793);if(v<-3.141592653589793)do v=v+6.283185307179586;while(v<-3.141592653589793);ie[T+8>>3]=v}function nb(g,v){return g=g|0,v=v|0,g>>>0>15?(v=4,v|0):(ie[v>>3]=+ie[20656+(g<<3)>>3],v=0,v|0)}function o3(g,v){return g=g|0,v=v|0,g>>>0>15?(v=4,v|0):(ie[v>>3]=+ie[20784+(g<<3)>>3],v=0,v|0)}function l3(g,v){return g=g|0,v=v|0,g>>>0>15?(v=4,v|0):(ie[v>>3]=+ie[20912+(g<<3)>>3],v=0,v|0)}function ib(g,v){return g=g|0,v=v|0,g>>>0>15?(v=4,v|0):(ie[v>>3]=+ie[21040+(g<<3)>>3],v=0,v|0)}function _A(g,v){g=g|0,v=v|0;var y=0;return g>>>0>15?(v=4,v|0):(y=Io(7,0,g,((g|0)<0)<<31>>31)|0,y=qr(y|0,ae()|0,120,0)|0,g=ae()|0,m[v>>2]=y|2,m[v+4>>2]=g,v=0,v|0)}function wA(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0;return xe=+ie[v>>3],Q=+ie[g>>3],G=+hn(+((xe-Q)*.5)),R=+ie[v+8>>3],q=+ie[g+8>>3],N=+hn(+((R-q)*.5)),O=+ni(+Q),le=+ni(+xe),N=G*G+N*(le*O*N),N=+Oe(+ +Zn(+N),+ +Zn(+(1-N)))*2,G=+ie[y>>3],xe=+hn(+((G-xe)*.5)),T=+ie[y+8>>3],R=+hn(+((T-R)*.5)),M=+ni(+G),R=xe*xe+R*(le*M*R),R=+Oe(+ +Zn(+R),+ +Zn(+(1-R)))*2,G=+hn(+((Q-G)*.5)),T=+hn(+((q-T)*.5)),T=G*G+T*(O*M*T),T=+Oe(+ +Zn(+T),+ +Zn(+(1-T)))*2,M=(N+R+T)*.5,+(+ue(+ +Zn(+(+Ps(+(M*.5))*+Ps(+((M-N)*.5))*+Ps(+((M-R)*.5))*+Ps(+((M-T)*.5)))))*4)}function Ga(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0;if(O=re,re=re+192|0,R=O+168|0,N=O,M=Gc(g,v,R)|0,M|0)return y=M,re=O,y|0;if(qu(g,v,N)|0&&Lt(27795,27190,415,27199),v=m[N>>2]|0,(v|0)>0){if(T=+wA(N+8|0,N+8+(((v|0)!=1&1)<<4)|0,R)+0,(v|0)!=1){g=1;do M=g,g=g+1|0,T=T+ +wA(N+8+(M<<4)|0,N+8+(((g|0)%(v|0)|0)<<4)|0,R);while((g|0)<(v|0))}}else T=0;return ie[y>>3]=T,y=0,re=O,y|0}function rb(g,v,y){return g=g|0,v=v|0,y=y|0,g=Ga(g,v,y)|0,g|0||(ie[y>>3]=+ie[y>>3]*6371.007180918475*6371.007180918475),g|0}function so(g,v,y){return g=g|0,v=v|0,y=y|0,g=Ga(g,v,y)|0,g|0||(ie[y>>3]=+ie[y>>3]*6371.007180918475*6371.007180918475*1e3*1e3),g|0}function ao(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(O=re,re=re+176|0,N=O,g=gA(g,v,N)|0,g|0)return N=g,re=O,N|0;if(ie[y>>3]=0,g=m[N>>2]|0,(g|0)<=1)return N=0,re=O,N|0;v=g+-1|0,g=0,T=+ie[N+8>>3],M=+ie[N+16>>3],R=0;do g=g+1|0,q=T,T=+ie[N+8+(g<<4)>>3],Q=+hn(+((T-q)*.5)),G=M,M=+ie[N+8+(g<<4)+8>>3],G=+hn(+((M-G)*.5)),G=Q*Q+G*(+ni(+T)*+ni(+q)*G),R=R+ +Oe(+ +Zn(+G),+ +Zn(+(1-G)))*2;while((g|0)<(v|0));return ie[y>>3]=R,N=0,re=O,N|0}function sf(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(O=re,re=re+176|0,N=O,g=gA(g,v,N)|0,g|0)return N=g,R=+ie[y>>3],R=R*6371.007180918475,ie[y>>3]=R,re=O,N|0;if(ie[y>>3]=0,g=m[N>>2]|0,(g|0)<=1)return N=0,R=0,R=R*6371.007180918475,ie[y>>3]=R,re=O,N|0;v=g+-1|0,g=0,T=+ie[N+8>>3],M=+ie[N+16>>3],R=0;do g=g+1|0,q=T,T=+ie[N+8+(g<<4)>>3],Q=+hn(+((T-q)*.5)),G=M,M=+ie[N+8+(g<<4)+8>>3],G=+hn(+((M-G)*.5)),G=Q*Q+G*(+ni(+q)*+ni(+T)*G),R=R+ +Oe(+ +Zn(+G),+ +Zn(+(1-G)))*2;while((g|0)!=(v|0));return ie[y>>3]=R,N=0,Q=R,Q=Q*6371.007180918475,ie[y>>3]=Q,re=O,N|0}function Hm(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(O=re,re=re+176|0,N=O,g=gA(g,v,N)|0,g|0)return N=g,R=+ie[y>>3],R=R*6371.007180918475,R=R*1e3,ie[y>>3]=R,re=O,N|0;if(ie[y>>3]=0,g=m[N>>2]|0,(g|0)<=1)return N=0,R=0,R=R*6371.007180918475,R=R*1e3,ie[y>>3]=R,re=O,N|0;v=g+-1|0,g=0,T=+ie[N+8>>3],M=+ie[N+16>>3],R=0;do g=g+1|0,q=T,T=+ie[N+8+(g<<4)>>3],Q=+hn(+((T-q)*.5)),G=M,M=+ie[N+8+(g<<4)+8>>3],G=+hn(+((M-G)*.5)),G=Q*Q+G*(+ni(+q)*+ni(+T)*G),R=R+ +Oe(+ +Zn(+G),+ +Zn(+(1-G)))*2;while((g|0)!=(v|0));return ie[y>>3]=R,N=0,Q=R,Q=Q*6371.007180918475,Q=Q*1e3,ie[y>>3]=Q,re=O,N|0}function SA(g){g=g|0;var v=0,y=0,T=0;return v=lo(1,12)|0,v||Lt(27280,27235,49,27293),y=g+4|0,T=m[y>>2]|0,T|0?(T=T+8|0,m[T>>2]=v,m[y>>2]=v,v|0):(m[g>>2]|0&&Lt(27310,27235,61,27333),T=g,m[T>>2]=v,m[y>>2]=v,v|0)}function TA(g,v){g=g|0,v=v|0;var y=0,T=0;return T=_l(24)|0,T||Lt(27347,27235,78,27361),m[T>>2]=m[v>>2],m[T+4>>2]=m[v+4>>2],m[T+8>>2]=m[v+8>>2],m[T+12>>2]=m[v+12>>2],m[T+16>>2]=0,v=g+4|0,y=m[v>>2]|0,y|0?(m[y+16>>2]=T,m[v>>2]=T,T|0):(m[g>>2]|0&&Lt(27376,27235,82,27361),m[g>>2]=T,m[v>>2]=T,T|0)}function MA(g){g=g|0;var v=0,y=0,T=0,M=0;if(g)for(T=1;;){if(v=m[g>>2]|0,v|0)do{if(y=m[v>>2]|0,y|0)do M=y,y=m[y+16>>2]|0,kn(M);while((y|0)!=0);M=v,v=m[v+8>>2]|0,kn(M)}while((v|0)!=0);if(v=g,g=m[g+8>>2]|0,T||kn(v),g)T=0;else break}}function af(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0,cn=0,ii=0,_n=0,sn=0,Et=0,Hn=0,Ci=0,Xn=0;if(M=g+8|0,m[M>>2]|0)return Xn=1,Xn|0;if(T=m[g>>2]|0,!T)return Xn=0,Xn|0;v=T,y=0;do y=y+1|0,v=m[v+8>>2]|0;while((v|0)!=0);if(y>>>0<2)return Xn=0,Xn|0;Hn=_l(y<<2)|0,Hn||Lt(27396,27235,317,27415),Et=_l(y<<5)|0,Et||Lt(27437,27235,321,27415),m[g>>2]=0,nn=g+4|0,m[nn>>2]=0,m[M>>2]=0,y=0,sn=0,Nt=0,le=0;e:for(;;){if(Q=m[T>>2]|0,Q){R=0,N=Q;do{if(G=+ie[N+8>>3],v=N,N=m[N+16>>2]|0,q=(N|0)==0,M=q?Q:N,O=+ie[M+8>>3],+wn(+(G-O))>3.141592653589793){Xn=14;break}R=R+(O-G)*(+ie[v>>3]+ +ie[M>>3])}while(!q);if((Xn|0)==14){Xn=0,R=0,v=Q;do Ee=+ie[v+8>>3],_n=v+16|0,ii=m[_n>>2]|0,ii=(ii|0)==0?Q:ii,Be=+ie[ii+8>>3],R=R+(+ie[v>>3]+ +ie[ii>>3])*((Be<0?Be+6.283185307179586:Be)-(Ee<0?Ee+6.283185307179586:Ee)),v=m[((v|0)==0?T:_n)>>2]|0;while((v|0)!=0)}R>0?(m[Hn+(sn<<2)>>2]=T,sn=sn+1|0,M=Nt,v=le):Xn=19}else Xn=19;if((Xn|0)==19){Xn=0;do if(y){if(v=y+8|0,m[v>>2]|0){Xn=21;break e}if(y=lo(1,12)|0,!y){Xn=23;break e}m[v>>2]=y,M=y+4|0,N=y,v=le}else if(le){M=nn,N=le+8|0,v=T,y=g;break}else if(m[g>>2]|0){Xn=27;break e}else{M=nn,N=g,v=T,y=g;break}while(!1);if(m[N>>2]=T,m[M>>2]=T,N=Et+(Nt<<5)|0,q=m[T>>2]|0,q){for(Q=Et+(Nt<<5)+8|0,ie[Q>>3]=17976931348623157e292,le=Et+(Nt<<5)+24|0,ie[le>>3]=17976931348623157e292,ie[N>>3]=-17976931348623157e292,xe=Et+(Nt<<5)+16|0,ie[xe>>3]=-17976931348623157e292,je=17976931348623157e292,ze=-17976931348623157e292,M=0,ge=q,G=17976931348623157e292,Me=17976931348623157e292,De=-17976931348623157e292,O=-17976931348623157e292;R=+ie[ge>>3],Ee=+ie[ge+8>>3],ge=m[ge+16>>2]|0,me=(ge|0)==0,Be=+ie[(me?q:ge)+8>>3],R<G&&(ie[Q>>3]=R,G=R),Ee<Me&&(ie[le>>3]=Ee,Me=Ee),R>De?ie[N>>3]=R:R=De,Ee>O&&(ie[xe>>3]=Ee,O=Ee),je=Ee>0&Ee<je?Ee:je,ze=Ee<0&Ee>ze?Ee:ze,M=M|+wn(+(Ee-Be))>3.141592653589793,!me;)De=R;M&&(ie[xe>>3]=ze,ie[le>>3]=je)}else m[N>>2]=0,m[N+4>>2]=0,m[N+8>>2]=0,m[N+12>>2]=0,m[N+16>>2]=0,m[N+20>>2]=0,m[N+24>>2]=0,m[N+28>>2]=0;M=Nt+1|0}if(_n=T+8|0,T=m[_n>>2]|0,m[_n>>2]=0,T)Nt=M,le=v;else{Xn=45;break}}if((Xn|0)==21)Lt(27213,27235,35,27247);else if((Xn|0)==23)Lt(27267,27235,37,27247);else if((Xn|0)==27)Lt(27310,27235,61,27333);else if((Xn|0)==45){e:do if((sn|0)>0){for(_n=(M|0)==0,cn=M<<2,ii=(g|0)==0,$t=0,v=0;;){if(wt=m[Hn+($t<<2)>>2]|0,_n)Xn=73;else{if(Nt=_l(cn)|0,!Nt){Xn=50;break}if(nn=_l(cn)|0,!nn){Xn=52;break}t:do if(ii)y=0;else{for(M=0,y=0,N=g;T=Et+(M<<5)|0,qm(m[N>>2]|0,T,m[wt>>2]|0)|0?(m[Nt+(y<<2)>>2]=N,m[nn+(y<<2)>>2]=T,me=y+1|0):me=y,N=m[N+8>>2]|0,N;)M=M+1|0,y=me;if((me|0)>0)if(T=m[Nt>>2]|0,(me|0)==1)y=T;else for(xe=0,ge=-1,y=T,le=T;;){for(q=m[le>>2]|0,T=0,N=0;M=m[m[Nt+(N<<2)>>2]>>2]|0,(M|0)==(q|0)?Q=T:Q=T+((qm(M,m[nn+(N<<2)>>2]|0,m[q>>2]|0)|0)&1)|0,N=N+1|0,(N|0)!=(me|0);)T=Q;if(M=(Q|0)>(ge|0),y=M?le:y,T=xe+1|0,(T|0)==(me|0))break t;xe=T,ge=M?Q:ge,le=m[Nt+(T<<2)>>2]|0}else y=0}while(!1);if(kn(Nt),kn(nn),y){if(M=y+4|0,T=m[M>>2]|0,T)y=T+8|0;else if(m[y>>2]|0){Xn=70;break}m[y>>2]=wt,m[M>>2]=wt}else Xn=73}if((Xn|0)==73){if(Xn=0,v=m[wt>>2]|0,v|0)do nn=v,v=m[v+16>>2]|0,kn(nn);while((v|0)!=0);kn(wt),v=1}if($t=$t+1|0,($t|0)>=(sn|0)){Ci=v;break e}}(Xn|0)==50?Lt(27452,27235,249,27471):(Xn|0)==52?Lt(27490,27235,252,27471):(Xn|0)==70&&Lt(27310,27235,61,27333)}else Ci=0;while(!1);return kn(Hn),kn(Et),Xn=Ci,Xn|0}return 0}function qm(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(!(gl(v,y)|0)||(v=fA(v)|0,T=+ie[y>>3],M=+ie[y+8>>3],M=v&M<0?M+6.283185307179586:M,g=m[g>>2]|0,!g))return g=0,g|0;if(v){v=0,q=M,y=g;e:for(;;){for(;N=+ie[y>>3],M=+ie[y+8>>3],y=y+16|0,Q=m[y>>2]|0,Q=(Q|0)==0?g:Q,R=+ie[Q>>3],O=+ie[Q+8>>3],N>R?(G=N,N=O):(G=R,R=N,N=M,M=O),T=T==R|T==G?T+2220446049250313e-31:T,!!(T<R|T>G);)if(y=m[y>>2]|0,!y){y=22;break e}if(O=N<0?N+6.283185307179586:N,N=M<0?M+6.283185307179586:M,q=O==q|N==q?q+-2220446049250313e-31:q,G=O+(N-O)*((T-R)/(G-R)),(G<0?G+6.283185307179586:G)>q&&(v=v^1),y=m[y>>2]|0,!y){y=22;break}}if((y|0)==22)return v|0}else{v=0,q=M,y=g;e:for(;;){for(;N=+ie[y>>3],M=+ie[y+8>>3],y=y+16|0,Q=m[y>>2]|0,Q=(Q|0)==0?g:Q,R=+ie[Q>>3],O=+ie[Q+8>>3],N>R?(G=N,N=O):(G=R,R=N,N=M,M=O),T=T==R|T==G?T+2220446049250313e-31:T,!!(T<R|T>G);)if(y=m[y>>2]|0,!y){y=22;break e}if(q=N==q|M==q?q+-2220446049250313e-31:q,N+(M-N)*((T-R)/(G-R))>q&&(v=v^1),y=m[y>>2]|0,!y){y=22;break}}if((y|0)==22)return v|0}return 0}function oo(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0;if(ze=re,re=re+32|0,je=ze+16|0,De=ze,R=bt(g|0,v|0,52)|0,ae()|0,R=R&15,ge=bt(y|0,T|0,52)|0,ae()|0,(R|0)!=(ge&15|0))return je=12,re=ze,je|0;if(q=bt(g|0,v|0,45)|0,ae()|0,q=q&127,Q=bt(y|0,T|0,45)|0,ae()|0,Q=Q&127,q>>>0>121|Q>>>0>121)return je=5,re=ze,je|0;if(ge=(q|0)!=(Q|0),ge){if(O=Sd(q,Q)|0,(O|0)==7)return je=1,re=ze,je|0;G=Sd(Q,q)|0,(G|0)==7?Lt(27514,27538,161,27548):(me=O,N=G)}else me=0,N=0;le=vr(q)|0,xe=vr(Q)|0,m[je>>2]=0,m[je+4>>2]=0,m[je+8>>2]=0,m[je+12>>2]=0;do if(me){if(Q=m[4272+(q*28|0)+(me<<2)>>2]|0,O=(Q|0)>0,xe)if(O){q=0,G=y,O=T;do G=s3(G,O)|0,O=ae()|0,N=Kl(N)|0,(N|0)==1&&(N=Kl(1)|0),q=q+1|0;while((q|0)!=(Q|0));Q=N,q=G,G=O}else Q=N,q=y,G=T;else if(O){q=0,G=y,O=T;do G=Bm(G,O)|0,O=ae()|0,N=Kl(N)|0,q=q+1|0;while((q|0)!=(Q|0));Q=N,q=G,G=O}else Q=N,q=y,G=T;if(aa(q,G,je)|0,ge||Lt(27563,27538,191,27548),O=(le|0)!=0,N=(xe|0)!=0,O&N&&Lt(27590,27538,192,27548),O){if(N=sa(g,v)|0,(N|0)==7){R=5;break}if(ft[22e3+(N*7|0)+me>>0]|0){R=1;break}G=m[21168+(N*28|0)+(me<<2)>>2]|0,q=G}else if(N){if(N=sa(q,G)|0,(N|0)==7){R=5;break}if(ft[22e3+(N*7|0)+Q>>0]|0){R=1;break}q=0,G=m[21168+(Q*28|0)+(N<<2)>>2]|0}else q=0,G=0;if((q|G|0)<0)R=5;else{if((G|0)>0){O=je+4|0,N=0;do AA(O),N=N+1|0;while((N|0)!=(G|0))}if(m[De>>2]=0,m[De+4>>2]=0,m[De+8>>2]=0,z1(De,me),R|0)for(;ro(R)|0?ef(De):zu(De),(R|0)>1;)R=R+-1|0;if((q|0)>0){R=0;do AA(De),R=R+1|0;while((R|0)!=(q|0))}Me=je+4|0,Ls(Me,De,Me),Kr(Me),Me=51}}else if(aa(y,T,je)|0,(le|0)!=0&(xe|0)!=0)if((Q|0)!=(q|0)&&Lt(27621,27538,261,27548),N=sa(g,v)|0,R=sa(y,T)|0,(N|0)==7|(R|0)==7)R=5;else if(ft[22e3+(N*7|0)+R>>0]|0)R=1;else if(N=m[21168+(N*28|0)+(R<<2)>>2]|0,(N|0)>0){O=je+4|0,R=0;do AA(O),R=R+1|0;while((R|0)!=(N|0));Me=51}else Me=51;else Me=51;while(!1);return(Me|0)==51&&(R=je+4|0,m[M>>2]=m[R>>2],m[M+4>>2]=m[R+4>>2],m[M+8>>2]=m[R+8>>2],R=0),je=R,re=ze,je|0}function ju(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0;if(Me=re,re=re+48|0,q=Me+36|0,N=Me+24|0,O=Me+12|0,G=Me,M=bt(g|0,v|0,52)|0,ae()|0,M=M&15,xe=bt(g|0,v|0,45)|0,ae()|0,xe=xe&127,xe>>>0>121)return T=5,re=Me,T|0;if(Q=vr(xe)|0,Pt(M|0,0,52)|0,De=ae()|0|134225919,R=T,m[R>>2]=-1,m[R+4>>2]=De,!M)return M=Uu(y)|0,(M|0)==7||(M=hA(xe,M)|0,(M|0)==127)?(De=1,re=Me,De|0):(ge=Pt(M|0,0,45)|0,me=ae()|0,xe=T,me=m[xe+4>>2]&-1040385|me,De=T,m[De>>2]=m[xe>>2]|ge,m[De+4>>2]=me,De=0,re=Me,De|0);for(m[q>>2]=m[y>>2],m[q+4>>2]=m[y+4>>2],m[q+8>>2]=m[y+8>>2],y=M;;){if(R=y,y=y+-1|0,m[N>>2]=m[q>>2],m[N+4>>2]=m[q+4>>2],m[N+8>>2]=m[q+8>>2],ro(R)|0){if(M=F1(q)|0,M|0){y=13;break}m[O>>2]=m[q>>2],m[O+4>>2]=m[q+4>>2],m[O+8>>2]=m[q+8>>2],ef(O)}else{if(M=jT(q)|0,M|0){y=13;break}m[O>>2]=m[q>>2],m[O+4>>2]=m[q+4>>2],m[O+8>>2]=m[q+8>>2],zu(O)}if(Pd(N,O,G),Kr(G),M=T,ze=m[M>>2]|0,M=m[M+4>>2]|0,Be=(15-R|0)*3|0,je=Pt(7,0,Be|0)|0,M=M&~(ae()|0),Be=Pt(Uu(G)|0,0,Be|0)|0,M=ae()|0|M,De=T,m[De>>2]=Be|ze&~je,m[De+4>>2]=M,(R|0)<=1){y=14;break}}e:do if((y|0)!=13&&(y|0)==14)if((m[q>>2]|0)<=1&&(m[q+4>>2]|0)<=1&&(m[q+8>>2]|0)<=1){y=Uu(q)|0,M=hA(xe,y)|0,(M|0)==127?G=0:G=vr(M)|0;t:do if(y){if(Q){if(M=sa(g,v)|0,(M|0)==7){M=5;break e}if(R=m[21376+(M*28|0)+(y<<2)>>2]|0,(R|0)>0){M=y,y=0;do M=Gu(M)|0,y=y+1|0;while((y|0)!=(R|0))}else M=y;if((M|0)==1){M=9;break e}y=hA(xe,M)|0,(y|0)==127&&Lt(27648,27538,411,27678),vr(y)|0?Lt(27693,27538,412,27678):(me=y,ge=R,le=M)}else me=M,ge=0,le=y;if(O=m[4272+(xe*28|0)+(le<<2)>>2]|0,(O|0)<=-1&&Lt(27724,27538,419,27678),!G){if((ge|0)<0){M=5;break e}if(ge|0){R=T,M=0,y=m[R>>2]|0,R=m[R+4>>2]|0;do y=zc(y,R)|0,R=ae()|0,Be=T,m[Be>>2]=y,m[Be+4>>2]=R,M=M+1|0;while((M|0)<(ge|0))}if((O|0)<=0){M=me,y=58;break}for(R=T,M=0,y=m[R>>2]|0,R=m[R+4>>2]|0;;)if(y=zc(y,R)|0,R=ae()|0,Be=T,m[Be>>2]=y,m[Be+4>>2]=R,M=M+1|0,(M|0)==(O|0)){M=me,y=58;break t}}if(N=Sd(me,xe)|0,(N|0)==7&&Lt(27514,27538,428,27678),M=T,y=m[M>>2]|0,M=m[M+4>>2]|0,(O|0)>0){R=0;do y=zc(y,M)|0,M=ae()|0,Be=T,m[Be>>2]=y,m[Be+4>>2]=M,R=R+1|0;while((R|0)!=(O|0))}if(M=sa(y,M)|0,(M|0)==7&&Lt(27795,27538,440,27678),y=Sm(me)|0,y=m[(y?21792:21584)+(N*28|0)+(M<<2)>>2]|0,(y|0)<0&&Lt(27795,27538,454,27678),!y)M=me,y=58;else{N=T,M=0,R=m[N>>2]|0,N=m[N+4>>2]|0;do R=yA(R,N)|0,N=ae()|0,Be=T,m[Be>>2]=R,m[Be+4>>2]=N,M=M+1|0;while((M|0)<(y|0));M=me,y=58}}else if((Q|0)!=0&(G|0)!=0){if(y=sa(g,v)|0,R=T,R=sa(m[R>>2]|0,m[R+4>>2]|0)|0,(y|0)==7|(R|0)==7){M=5;break e}if(R=m[21376+(y*28|0)+(R<<2)>>2]|0,(R|0)<0){M=5;break e}if(!R)y=59;else{O=T,y=0,N=m[O>>2]|0,O=m[O+4>>2]|0;do N=zc(N,O)|0,O=ae()|0,Be=T,m[Be>>2]=N,m[Be+4>>2]=O,y=y+1|0;while((y|0)<(R|0));y=58}}else y=58;while(!1);if((y|0)==58&&G&&(y=59),(y|0)==59&&(Be=T,(sa(m[Be>>2]|0,m[Be+4>>2]|0)|0)==1)){M=9;break}Be=T,je=m[Be>>2]|0,Be=m[Be+4>>2]&-1040385,ze=Pt(M|0,0,45)|0,Be=Be|(ae()|0),M=T,m[M>>2]=je|ze,m[M+4>>2]=Be,M=0}else M=1;while(!1);return Be=M,re=Me,Be|0}function c3(g,v,y,T,M,R){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,R=R|0;var N=0,O=0;return O=re,re=re+16|0,N=O,M?g=15:(g=oo(g,v,y,T,N)|0,g||(YT(N,R),g=0)),re=O,g|0}function Va(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0;return N=re,re=re+16|0,R=N,T?y=15:(y=Rm(y,R)|0,y||(y=ju(g,v,R,M)|0)),re=N,y|0}function Wm(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0;return G=re,re=re+32|0,N=G+12|0,O=G,R=oo(g,v,g,v,N)|0,R|0?(O=R,re=G,O|0):(g=oo(g,v,y,T,O)|0,g|0?(O=g,re=G,O|0):(N=Cm(N,O)|0,O=M,m[O>>2]=N,m[O+4>>2]=((N|0)<0)<<31>>31,O=0,re=G,O|0))}function Jl(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0;return G=re,re=re+32|0,N=G+12|0,O=G,R=oo(g,v,g,v,N)|0,!R&&(R=oo(g,v,y,T,O)|0,!R)?(T=Cm(N,O)|0,T=Qt(T|0,((T|0)<0)<<31>>31|0,1,0)|0,N=ae()|0,O=M,m[O>>2]=T,m[O+4>>2]=N,O=0,re=G,O|0):(O=R,re=G,O|0)}function sb(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0;if(wt=re,re=re+48|0,Nt=wt+24|0,N=wt+12|0,nn=wt,R=oo(g,v,g,v,Nt)|0,!R&&(R=oo(g,v,y,T,N)|0,!R)){Be=Cm(Nt,N)|0,Ee=((Be|0)<0)<<31>>31,m[Nt>>2]=0,m[Nt+4>>2]=0,m[Nt+8>>2]=0,m[N>>2]=0,m[N+4>>2]=0,m[N+8>>2]=0,oo(g,v,g,v,Nt)|0&&Lt(27795,27538,692,27747),oo(g,v,y,T,N)|0&&Lt(27795,27538,697,27747),q1(Nt),q1(N),Q=(Be|0)==0?0:1/+(Be|0),y=m[Nt>>2]|0,Me=Q*+((m[N>>2]|0)-y|0),De=Nt+4|0,T=m[De>>2]|0,je=Q*+((m[N+4>>2]|0)-T|0),ze=Nt+8|0,R=m[ze>>2]|0,Q=Q*+((m[N+8>>2]|0)-R|0),m[nn>>2]=y,le=nn+4|0,m[le>>2]=T,xe=nn+8|0,m[xe>>2]=R;e:do if((Be|0)<0)R=0;else for(ge=0,me=0;;){G=+(me>>>0)+4294967296*+(ge|0),$t=Me*G+ +(y|0),O=je*G+ +(T|0),G=Q*G+ +(R|0),y=~~+qc(+$t),N=~~+qc(+O),R=~~+qc(+G),$t=+wn(+(+(y|0)-$t)),O=+wn(+(+(N|0)-O)),G=+wn(+(+(R|0)-G));do if($t>O&$t>G)y=0-(N+R)|0,T=N;else if(q=0-y|0,O>G){T=q-R|0;break}else{T=N,R=q-N|0;break}while(!1);if(m[nn>>2]=y,m[le>>2]=T,m[xe>>2]=R,$T(nn),R=ju(g,v,nn,M+(me<<3)|0)|0,R|0)break e;if(!((ge|0)<(Ee|0)|(ge|0)==(Ee|0)&me>>>0<Be>>>0)){R=0;break e}y=Qt(me|0,ge|0,1,0)|0,T=ae()|0,ge=T,me=y,y=m[Nt>>2]|0,T=m[De>>2]|0,R=m[ze>>2]|0}while(!1);return nn=R,re=wt,nn|0}return nn=R,re=wt,nn|0}function Io(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0;if((y|0)==0&(T|0)==0)return M=0,R=1,dt(M|0),R|0;R=g,M=v,g=1,v=0;do N=(y&1|0)==0&!0,g=qr((N?1:R)|0,(N?0:M)|0,g|0,v|0)|0,v=ae()|0,y=ob(y|0,T|0,1)|0,T=ae()|0,R=qr(R|0,M|0,R|0,M|0)|0,M=ae()|0;while(!((y|0)==0&(T|0)==0));return dt(v|0),g|0}function ec(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0;O=re,re=re+16|0,R=O,N=bt(g|0,v|0,52)|0,ae()|0,N=N&15;do if(N){if(M=Gc(g,v,R)|0,!M){q=+ie[R>>3],G=1/+ni(+q),Q=+ie[25968+(N<<3)>>3],ie[y>>3]=q+Q,ie[y+8>>3]=q-Q,q=+ie[R+8>>3],G=Q*G,ie[y+16>>3]=G+q,ie[y+24>>3]=q-G;break}return N=M,re=O,N|0}else{if(M=bt(g|0,v|0,45)|0,ae()|0,M=M&127,M>>>0>121)return N=5,re=O,N|0;R=22064+(M<<5)|0,m[y>>2]=m[R>>2],m[y+4>>2]=m[R+4>>2],m[y+8>>2]=m[R+8>>2],m[y+12>>2]=m[R+12>>2],m[y+16>>2]=m[R+16>>2],m[y+20>>2]=m[R+20>>2],m[y+24>>2]=m[R+24>>2],m[y+28>>2]=m[R+28>>2];break}while(!1);return Ma(y,T?1.4:1.1),T=26096+(N<<3)|0,(m[T>>2]|0)==(g|0)&&(m[T+4>>2]|0)==(v|0)&&(ie[y>>3]=1.5707963267948966),N=26224+(N<<3)|0,(m[N>>2]|0)==(g|0)&&(m[N+4>>2]|0)==(v|0)&&(ie[y+8>>3]=-1.5707963267948966),+ie[y>>3]!=1.5707963267948966&&+ie[y+8>>3]!=-1.5707963267948966?(N=0,re=O,N|0):(ie[y+16>>3]=3.141592653589793,ie[y+24>>3]=-3.141592653589793,N=0,re=O,N|0)}function jm(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0;q=re,re=re+48|0,N=q+32|0,R=q+40|0,O=q,km(N,0,0,0),G=m[N>>2]|0,N=m[N+4>>2]|0;do if(y>>>0<=15){if(M=js(T)|0,M|0){T=O,m[T>>2]=0,m[T+4>>2]=0,m[O+8>>2]=M,m[O+12>>2]=-1,T=O+16|0,G=O+29|0,m[T>>2]=0,m[T+4>>2]=0,m[T+8>>2]=0,ft[T+12>>0]=0,ft[G>>0]=ft[R>>0]|0,ft[G+1>>0]=ft[R+1>>0]|0,ft[G+2>>0]=ft[R+2>>0]|0;break}if(M=lo((m[v+8>>2]|0)+1|0,32)|0,M){tc(v,M),Q=O,m[Q>>2]=G,m[Q+4>>2]=N,m[O+8>>2]=0,m[O+12>>2]=y,m[O+16>>2]=T,m[O+20>>2]=v,m[O+24>>2]=M,ft[O+28>>0]=0,G=O+29|0,ft[G>>0]=ft[R>>0]|0,ft[G+1>>0]=ft[R+1>>0]|0,ft[G+2>>0]=ft[R+2>>0]|0;break}else{T=O,m[T>>2]=0,m[T+4>>2]=0,m[O+8>>2]=13,m[O+12>>2]=-1,T=O+16|0,G=O+29|0,m[T>>2]=0,m[T+4>>2]=0,m[T+8>>2]=0,ft[T+12>>0]=0,ft[G>>0]=ft[R>>0]|0,ft[G+1>>0]=ft[R+1>>0]|0,ft[G+2>>0]=ft[R+2>>0]|0;break}}else G=O,m[G>>2]=0,m[G+4>>2]=0,m[O+8>>2]=4,m[O+12>>2]=-1,G=O+16|0,Q=O+29|0,m[G>>2]=0,m[G+4>>2]=0,m[G+8>>2]=0,ft[G+12>>0]=0,ft[Q>>0]=ft[R>>0]|0,ft[Q+1>>0]=ft[R+1>>0]|0,ft[Q+2>>0]=ft[R+2>>0]|0;while(!1);of(O),m[g>>2]=m[O>>2],m[g+4>>2]=m[O+4>>2],m[g+8>>2]=m[O+8>>2],m[g+12>>2]=m[O+12>>2],m[g+16>>2]=m[O+16>>2],m[g+20>>2]=m[O+20>>2],m[g+24>>2]=m[O+24>>2],m[g+28>>2]=m[O+28>>2],re=q}function of(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0;if(Ee=re,re=re+336|0,ge=Ee+168|0,me=Ee,T=g,y=m[T>>2]|0,T=m[T+4>>2]|0,(y|0)==0&(T|0)==0){re=Ee;return}if(v=g+28|0,ft[v>>0]|0?(y=Xu(y,T)|0,T=ae()|0):ft[v>>0]=1,Be=g+20|0,!(m[m[Be>>2]>>2]|0)){v=g+24|0,y=m[v>>2]|0,y|0&&kn(y),ze=g,m[ze>>2]=0,m[ze+4>>2]=0,m[g+8>>2]=0,m[Be>>2]=0,m[g+12>>2]=-1,m[g+16>>2]=0,m[v>>2]=0,re=Ee;return}ze=g+16|0,v=m[ze>>2]|0,M=v&15;e:do if((y|0)==0&(T|0)==0)je=g+24|0;else{Me=g+12|0,le=(M|0)==3,Q=v&255,G=(M|1|0)==3,xe=g+24|0,q=(M+-1|0)>>>0<3,N=(M|2|0)==3,O=me+8|0;t:for(;;){if(R=bt(y|0,T|0,52)|0,ae()|0,R=R&15,(R|0)==(m[Me>>2]|0)){switch(Q&15){case 0:case 2:case 3:{if(M=Gc(y,T,ge)|0,M|0){De=15;break t}if(Bo(m[Be>>2]|0,m[xe>>2]|0,ge)|0){De=19;break t}break}}if(G&&(M=m[(m[Be>>2]|0)+4>>2]|0,m[ge>>2]=m[M>>2],m[ge+4>>2]=m[M+4>>2],m[ge+8>>2]=m[M+8>>2],m[ge+12>>2]=m[M+12>>2],gl(26832,ge)|0)){if(Fm(m[(m[Be>>2]|0)+4>>2]|0,R,me)|0){De=25;break}if(M=me,(m[M>>2]|0)==(y|0)&&(m[M+4>>2]|0)==(T|0)){De=29;break}}if(q){if(M=qu(y,T,ge)|0,M|0){De=32;break}if(ec(y,T,me,0)|0){De=36;break}if(N&&vl(m[Be>>2]|0,m[xe>>2]|0,ge,me)|0){De=42;break}if(G&&Xm(m[Be>>2]|0,m[xe>>2]|0,ge,me)|0){De=42;break}}if(le){if(v=ec(y,T,ge,1)|0,M=m[xe>>2]|0,v|0){De=45;break}if(Ed(M,ge)|0){if(Cd(me,ge),Em(ge,m[xe>>2]|0)|0){De=53;break}if(Bo(m[Be>>2]|0,m[xe>>2]|0,O)|0){De=53;break}if(Xm(m[Be>>2]|0,m[xe>>2]|0,me,ge)|0){De=53;break}}}}do if((R|0)<(m[Me>>2]|0)){if(v=ec(y,T,ge,1)|0,M=m[xe>>2]|0,v|0){De=58;break t}if(!(Ed(M,ge)|0)){De=73;break}if(Em(m[xe>>2]|0,ge)|0&&(Cd(me,ge),vl(m[Be>>2]|0,m[xe>>2]|0,me,ge)|0)){De=65;break t}if(y=Dd(y,T,R+1|0,me)|0,y|0){De=67;break t}T=me,y=m[T>>2]|0,T=m[T+4>>2]|0}else De=73;while(!1);if((De|0)==73&&(De=0,y=Xu(y,T)|0,T=ae()|0),(y|0)==0&(T|0)==0){je=xe;break e}}switch(De|0){case 15:{v=m[xe>>2]|0,v|0&&kn(v),De=g,m[De>>2]=0,m[De+4>>2]=0,m[Be>>2]=0,m[Me>>2]=-1,m[ze>>2]=0,m[xe>>2]=0,m[g+8>>2]=M,De=20;break}case 19:{m[g>>2]=y,m[g+4>>2]=T,De=20;break}case 25:{Lt(27795,27761,470,27772);break}case 29:{m[g>>2]=y,m[g+4>>2]=T,re=Ee;return}case 32:{v=m[xe>>2]|0,v|0&&kn(v),je=g,m[je>>2]=0,m[je+4>>2]=0,m[Be>>2]=0,m[Me>>2]=-1,m[ze>>2]=0,m[xe>>2]=0,m[g+8>>2]=M,re=Ee;return}case 36:{Lt(27795,27761,493,27772);break}case 42:{m[g>>2]=y,m[g+4>>2]=T,re=Ee;return}case 45:{M|0&&kn(M),De=g,m[De>>2]=0,m[De+4>>2]=0,m[Be>>2]=0,m[Me>>2]=-1,m[ze>>2]=0,m[xe>>2]=0,m[g+8>>2]=v,De=55;break}case 53:{m[g>>2]=y,m[g+4>>2]=T,De=55;break}case 58:{M|0&&kn(M),De=g,m[De>>2]=0,m[De+4>>2]=0,m[Be>>2]=0,m[Me>>2]=-1,m[ze>>2]=0,m[xe>>2]=0,m[g+8>>2]=v,De=71;break}case 65:{m[g>>2]=y,m[g+4>>2]=T,De=71;break}case 67:{v=m[xe>>2]|0,v|0&&kn(v),je=g,m[je>>2]=0,m[je+4>>2]=0,m[Be>>2]=0,m[Me>>2]=-1,m[ze>>2]=0,m[xe>>2]=0,m[g+8>>2]=y,re=Ee;return}}if((De|0)==20){re=Ee;return}else if((De|0)==55){re=Ee;return}else if((De|0)==71){re=Ee;return}}while(!1);v=m[je>>2]|0,v|0&&kn(v),De=g,m[De>>2]=0,m[De+4>>2]=0,m[g+8>>2]=0,m[Be>>2]=0,m[g+12>>2]=-1,m[ze>>2]=0,m[je>>2]=0,re=Ee}function Xu(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0;le=re,re=re+16|0,Q=le,T=bt(g|0,v|0,52)|0,ae()|0,T=T&15,y=bt(g|0,v|0,45)|0,ae()|0;do if(T){for(;y=Pt(T+4095|0,0,52)|0,M=ae()|0|v&-15728641,R=(15-T|0)*3|0,N=Pt(7,0,R|0)|0,O=ae()|0,y=y|g|N,M=M|O,G=bt(g|0,v|0,R|0)|0,ae()|0,G=G&7,T=T+-1|0,!(G>>>0<6);)if(T)v=M,g=y;else{q=4;break}if((q|0)==4){y=bt(y|0,M|0,45)|0,ae()|0;break}return Q=(G|0)==0&(Ni(y,M)|0)!=0,Q=Pt((Q?2:1)+G|0,0,R|0)|0,q=ae()|0|v&~O,Q=Q|g&~N,dt(q|0),re=le,Q|0}while(!1);return y=y&127,y>>>0>120?(q=0,Q=0,dt(q|0),re=le,Q|0):(km(Q,0,y+1|0,0),q=m[Q+4>>2]|0,Q=m[Q>>2]|0,dt(q|0),re=le,Q|0)}function lf(g,v,y,T,M,R){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0,R=R|0;var N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0;De=re,re=re+160|0,le=De+80|0,O=De+64|0,xe=De+112|0,Me=De,jm(le,g,v,y),q=le,Wu(O,m[q>>2]|0,m[q+4>>2]|0,v),q=O,G=m[q>>2]|0,q=m[q+4>>2]|0,N=m[le+8>>2]|0,ge=xe+4|0,m[ge>>2]=m[le>>2],m[ge+4>>2]=m[le+4>>2],m[ge+8>>2]=m[le+8>>2],m[ge+12>>2]=m[le+12>>2],m[ge+16>>2]=m[le+16>>2],m[ge+20>>2]=m[le+20>>2],m[ge+24>>2]=m[le+24>>2],m[ge+28>>2]=m[le+28>>2],ge=Me,m[ge>>2]=G,m[ge+4>>2]=q,ge=Me+8|0,m[ge>>2]=N,g=Me+12|0,v=xe,y=g+36|0;do m[g>>2]=m[v>>2],g=g+4|0,v=v+4|0;while((g|0)<(y|0));if(xe=Me+48|0,m[xe>>2]=m[O>>2],m[xe+4>>2]=m[O+4>>2],m[xe+8>>2]=m[O+8>>2],m[xe+12>>2]=m[O+12>>2],(G|0)==0&(q|0)==0)return Me=N,re=De,Me|0;y=Me+16|0,Q=Me+24|0,le=Me+28|0,N=0,O=0,v=G,g=q;do{if(!((N|0)<(M|0)|(N|0)==(M|0)&O>>>0<T>>>0)){me=4;break}if(q=O,O=Qt(O|0,N|0,1,0)|0,N=ae()|0,q=R+(q<<3)|0,m[q>>2]=v,m[q+4>>2]=g,bA(xe),g=xe,v=m[g>>2]|0,g=m[g+4>>2]|0,(v|0)==0&(g|0)==0){if(of(y),v=y,g=m[v>>2]|0,v=m[v+4>>2]|0,(g|0)==0&(v|0)==0){me=10;break}xA(g,v,m[le>>2]|0,xe),g=xe,v=m[g>>2]|0,g=m[g+4>>2]|0}q=Me,m[q>>2]=v,m[q+4>>2]=g}while(!((v|0)==0&(g|0)==0));return(me|0)==4?(g=Me+40|0,v=m[g>>2]|0,v|0&&kn(v),me=Me+16|0,m[me>>2]=0,m[me+4>>2]=0,m[Q>>2]=0,m[Me+36>>2]=0,m[le>>2]=-1,m[Me+32>>2]=0,m[g>>2]=0,xA(0,0,0,xe),m[Me>>2]=0,m[Me+4>>2]=0,m[ge>>2]=0,Me=14,re=De,Me|0):((me|0)==10&&(m[Me>>2]=0,m[Me+4>>2]=0,m[ge>>2]=m[Q>>2]),Me=m[ge>>2]|0,re=De,Me|0)}function EA(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0;if(le=re,re=re+48|0,G=le+32|0,O=le+40|0,q=le,!(m[g>>2]|0))return Q=T,m[Q>>2]=0,m[Q+4>>2]=0,Q=0,re=le,Q|0;km(G,0,0,0),N=G,M=m[N>>2]|0,N=m[N+4>>2]|0;do if(v>>>0>15)Q=q,m[Q>>2]=0,m[Q+4>>2]=0,m[q+8>>2]=4,m[q+12>>2]=-1,Q=q+16|0,y=q+29|0,m[Q>>2]=0,m[Q+4>>2]=0,m[Q+8>>2]=0,ft[Q+12>>0]=0,ft[y>>0]=ft[O>>0]|0,ft[y+1>>0]=ft[O+1>>0]|0,ft[y+2>>0]=ft[O+2>>0]|0,y=4,Q=9;else{if(y=js(y)|0,y|0){G=q,m[G>>2]=0,m[G+4>>2]=0,m[q+8>>2]=y,m[q+12>>2]=-1,G=q+16|0,Q=q+29|0,m[G>>2]=0,m[G+4>>2]=0,m[G+8>>2]=0,ft[G+12>>0]=0,ft[Q>>0]=ft[O>>0]|0,ft[Q+1>>0]=ft[O+1>>0]|0,ft[Q+2>>0]=ft[O+2>>0]|0,Q=9;break}if(y=lo((m[g+8>>2]|0)+1|0,32)|0,!y){Q=q,m[Q>>2]=0,m[Q+4>>2]=0,m[q+8>>2]=13,m[q+12>>2]=-1,Q=q+16|0,y=q+29|0,m[Q>>2]=0,m[Q+4>>2]=0,m[Q+8>>2]=0,ft[Q+12>>0]=0,ft[y>>0]=ft[O>>0]|0,ft[y+1>>0]=ft[O+1>>0]|0,ft[y+2>>0]=ft[O+2>>0]|0,y=13,Q=9;break}tc(g,y),ge=q,m[ge>>2]=M,m[ge+4>>2]=N,N=q+8|0,m[N>>2]=0,m[q+12>>2]=v,m[q+20>>2]=g,m[q+24>>2]=y,ft[q+28>>0]=0,M=q+29|0,ft[M>>0]=ft[O>>0]|0,ft[M+1>>0]=ft[O+1>>0]|0,ft[M+2>>0]=ft[O+2>>0]|0,m[q+16>>2]=3,xe=+Md(y),xe=xe*+Zl(y),R=+wn(+ +ie[y>>3]),R=xe/+ni(+ +Id(+R,+ +wn(+ +ie[y+8>>3])))*6371.007180918475*6371.007180918475,M=q+12|0,y=m[M>>2]|0;e:do if((y|0)>0)do{if(nb(y+-1|0,G)|0,!(R/+ie[G>>3]>10))break e;ge=m[M>>2]|0,y=ge+-1|0,m[M>>2]=y}while((ge|0)>1);while(!1);if(of(q),M=T,m[M>>2]=0,m[M+4>>2]=0,M=q,y=m[M>>2]|0,M=m[M+4>>2]|0,!((y|0)==0&(M|0)==0))do nf(y,M,v,G)|0,O=G,g=T,O=Qt(m[g>>2]|0,m[g+4>>2]|0,m[O>>2]|0,m[O+4>>2]|0)|0,g=ae()|0,ge=T,m[ge>>2]=O,m[ge+4>>2]=g,of(q),ge=q,y=m[ge>>2]|0,M=m[ge+4>>2]|0;while(!((y|0)==0&(M|0)==0));y=m[N>>2]|0}while(!1);return ge=y,re=le,ge|0}function Vc(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0;if(!(gl(v,y)|0)||(v=fA(v)|0,T=+ie[y>>3],M=+ie[y+8>>3],M=v&M<0?M+6.283185307179586:M,xe=m[g>>2]|0,(xe|0)<=0))return xe=0,xe|0;if(le=m[g+4>>2]|0,v){v=0,Q=M,y=-1,g=0;e:for(;;){for(q=g;N=+ie[le+(q<<4)>>3],M=+ie[le+(q<<4)+8>>3],g=(y+2|0)%(xe|0)|0,R=+ie[le+(g<<4)>>3],O=+ie[le+(g<<4)+8>>3],N>R?(G=N,N=O):(G=R,R=N,N=M,M=O),T=T==R|T==G?T+2220446049250313e-31:T,!!(T<R|T>G);)if(y=q+1|0,(y|0)>=(xe|0)){y=22;break e}else g=q,q=y,y=g;if(O=N<0?N+6.283185307179586:N,N=M<0?M+6.283185307179586:M,Q=O==Q|N==Q?Q+-2220446049250313e-31:Q,G=O+(N-O)*((T-R)/(G-R)),(G<0?G+6.283185307179586:G)>Q&&(v=v^1),g=q+1|0,(g|0)>=(xe|0)){y=22;break}else y=q}if((y|0)==22)return v|0}else{v=0,Q=M,y=-1,g=0;e:for(;;){for(q=g;N=+ie[le+(q<<4)>>3],M=+ie[le+(q<<4)+8>>3],g=(y+2|0)%(xe|0)|0,R=+ie[le+(g<<4)>>3],O=+ie[le+(g<<4)+8>>3],N>R?(G=N,N=O):(G=R,R=N,N=M,M=O),T=T==R|T==G?T+2220446049250313e-31:T,!!(T<R|T>G);)if(y=q+1|0,(y|0)>=(xe|0)){y=22;break e}else g=q,q=y,y=g;if(Q=N==Q|M==Q?Q+-2220446049250313e-31:Q,N+(M-N)*((T-R)/(G-R))>Q&&(v=v^1),g=q+1|0,(g|0)>=(xe|0)){y=22;break}else y=q}if((y|0)==22)return v|0}return 0}function Ha(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0;if(me=m[g>>2]|0,!me){m[v>>2]=0,m[v+4>>2]=0,m[v+8>>2]=0,m[v+12>>2]=0,m[v+16>>2]=0,m[v+20>>2]=0,m[v+24>>2]=0,m[v+28>>2]=0;return}if(Me=v+8|0,ie[Me>>3]=17976931348623157e292,De=v+24|0,ie[De>>3]=17976931348623157e292,ie[v>>3]=-17976931348623157e292,je=v+16|0,ie[je>>3]=-17976931348623157e292,!((me|0)<=0)){for(xe=m[g+4>>2]|0,q=17976931348623157e292,Q=-17976931348623157e292,le=0,g=-1,R=17976931348623157e292,N=17976931348623157e292,G=-17976931348623157e292,T=-17976931348623157e292,ge=0;y=+ie[xe+(ge<<4)>>3],O=+ie[xe+(ge<<4)+8>>3],g=g+2|0,M=+ie[xe+(((g|0)==(me|0)?0:g)<<4)+8>>3],y<R&&(ie[Me>>3]=y,R=y),O<N&&(ie[De>>3]=O,N=O),y>G?ie[v>>3]=y:y=G,O>T&&(ie[je>>3]=O,T=O),q=O>0&O<q?O:q,Q=O<0&O>Q?O:Q,le=le|+wn(+(O-M))>3.141592653589793,g=ge+1|0,(g|0)!=(me|0);)ze=ge,G=y,ge=g,g=ze;le&&(ie[je>>3]=Q,ie[De>>3]=q)}}function js(g){return g=g|0,(g>>>0<4?0:15)|0}function tc(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0;if(me=m[g>>2]|0,me){if(Me=v+8|0,ie[Me>>3]=17976931348623157e292,De=v+24|0,ie[De>>3]=17976931348623157e292,ie[v>>3]=-17976931348623157e292,je=v+16|0,ie[je>>3]=-17976931348623157e292,(me|0)>0){for(M=m[g+4>>2]|0,xe=17976931348623157e292,ge=-17976931348623157e292,T=0,y=-1,G=17976931348623157e292,q=17976931348623157e292,le=-17976931348623157e292,N=-17976931348623157e292,ze=0;R=+ie[M+(ze<<4)>>3],Q=+ie[M+(ze<<4)+8>>3],nn=y+2|0,O=+ie[M+(((nn|0)==(me|0)?0:nn)<<4)+8>>3],R<G&&(ie[Me>>3]=R,G=R),Q<q&&(ie[De>>3]=Q,q=Q),R>le?ie[v>>3]=R:R=le,Q>N&&(ie[je>>3]=Q,N=Q),xe=Q>0&Q<xe?Q:xe,ge=Q<0&Q>ge?Q:ge,T=T|+wn(+(Q-O))>3.141592653589793,y=ze+1|0,(y|0)!=(me|0);)nn=ze,le=R,ze=y,y=nn;T&&(ie[je>>3]=ge,ie[De>>3]=xe)}}else m[v>>2]=0,m[v+4>>2]=0,m[v+8>>2]=0,m[v+12>>2]=0,m[v+16>>2]=0,m[v+20>>2]=0,m[v+24>>2]=0,m[v+28>>2]=0;if(nn=g+8|0,y=m[nn>>2]|0,!((y|0)<=0)){Nt=g+12|0,Ee=0;do if(M=m[Nt>>2]|0,T=Ee,Ee=Ee+1|0,De=v+(Ee<<5)|0,je=m[M+(T<<3)>>2]|0,je){if(ze=v+(Ee<<5)+8|0,ie[ze>>3]=17976931348623157e292,g=v+(Ee<<5)+24|0,ie[g>>3]=17976931348623157e292,ie[De>>3]=-17976931348623157e292,Be=v+(Ee<<5)+16|0,ie[Be>>3]=-17976931348623157e292,(je|0)>0){for(me=m[M+(T<<3)+4>>2]|0,xe=17976931348623157e292,ge=-17976931348623157e292,M=0,T=-1,Me=0,G=17976931348623157e292,q=17976931348623157e292,Q=-17976931348623157e292,N=-17976931348623157e292;R=+ie[me+(Me<<4)>>3],le=+ie[me+(Me<<4)+8>>3],T=T+2|0,O=+ie[me+(((T|0)==(je|0)?0:T)<<4)+8>>3],R<G&&(ie[ze>>3]=R,G=R),le<q&&(ie[g>>3]=le,q=le),R>Q?ie[De>>3]=R:R=Q,le>N&&(ie[Be>>3]=le,N=le),xe=le>0&le<xe?le:xe,ge=le<0&le>ge?le:ge,M=M|+wn(+(le-O))>3.141592653589793,T=Me+1|0,(T|0)!=(je|0);)wt=Me,Me=T,Q=R,T=wt;M&&(ie[Be>>3]=ge,ie[g>>3]=xe)}}else m[De>>2]=0,m[De+4>>2]=0,m[De+8>>2]=0,m[De+12>>2]=0,m[De+16>>2]=0,m[De+20>>2]=0,m[De+24>>2]=0,m[De+28>>2]=0,y=m[nn>>2]|0;while((Ee|0)<(y|0))}}function Bo(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;if(!(Vc(g,v,y)|0))return M=0,M|0;if(M=g+8|0,(m[M>>2]|0)<=0)return M=1,M|0;for(T=g+12|0,g=0;;){if(R=g,g=g+1|0,Vc((m[T>>2]|0)+(R<<3)|0,v+(g<<5)|0,y)|0){g=0,T=6;break}if((g|0)>=(m[M>>2]|0)){g=1,T=6;break}}return(T|0)==6?g|0:0}function vl(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0;if(q=re,re=re+16|0,O=q,N=y+8|0,!(Vc(g,v,N)|0))return G=0,re=q,G|0;G=g+8|0;e:do if((m[G>>2]|0)>0){for(R=g+12|0,M=0;;){if(Q=M,M=M+1|0,Vc((m[R>>2]|0)+(Q<<3)|0,v+(M<<5)|0,N)|0){M=0;break}if((M|0)>=(m[G>>2]|0))break e}return re=q,M|0}while(!1);if(yl(g,v,y,T)|0)return Q=0,re=q,Q|0;m[O>>2]=m[y>>2],m[O+4>>2]=N,M=m[G>>2]|0;e:do if((M|0)>0)for(g=g+12|0,N=0,R=M;;){if(M=m[g>>2]|0,(m[M+(N<<3)>>2]|0)>0){if(Vc(O,T,m[M+(N<<3)+4>>2]|0)|0){M=0;break e}if(M=N+1|0,yl((m[g>>2]|0)+(N<<3)|0,v+(M<<5)|0,y,T)|0){M=0;break e}R=m[G>>2]|0}else M=N+1|0;if((M|0)<(R|0))N=M;else{M=1;break}}else M=1;while(!1);return Q=M,re=q,Q|0}function yl(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0,nn=0,wt=0,$t=0;if(nn=re,re=re+176|0,ze=nn+172|0,M=nn+168|0,Be=nn,!(Ed(v,T)|0))return g=0,re=nn,g|0;if(dA(v,T,ze,M),eh(Be|0,y|0,168)|0,(m[y>>2]|0)>0){v=0;do wt=Be+8+(v<<4)+8|0,je=+oa(+ie[wt>>3],m[M>>2]|0),ie[wt>>3]=je,v=v+1|0;while((v|0)<(m[y>>2]|0))}Me=+ie[T>>3],De=+ie[T+8>>3],je=+oa(+ie[T+16>>3],m[M>>2]|0),ge=+oa(+ie[T+24>>3],m[M>>2]|0);e:do if((m[g>>2]|0)>0){if(T=g+4|0,M=m[Be>>2]|0,(M|0)<=0){for(v=0;;)if(v=v+1|0,(v|0)>=(m[g>>2]|0)){v=0;break e}}for(y=0;;){if(v=m[T>>2]|0,xe=+ie[v+(y<<4)>>3],me=+oa(+ie[v+(y<<4)+8>>3],m[ze>>2]|0),v=m[T>>2]|0,y=y+1|0,wt=(y|0)%(m[g>>2]|0)|0,R=+ie[v+(wt<<4)>>3],N=+oa(+ie[v+(wt<<4)+8>>3],m[ze>>2]|0),!(xe>=Me)|!(R>=Me)&&!(xe<=De)|!(R<=De)&&!(me<=ge)|!(N<=ge)&&!(me>=je)|!(N>=je)){le=R-xe,q=N-me,v=0;do if($t=v,v=v+1|0,wt=(v|0)==(M|0)?0:v,R=+ie[Be+8+($t<<4)+8>>3],N=+ie[Be+8+(wt<<4)+8>>3]-R,O=+ie[Be+8+($t<<4)>>3],G=+ie[Be+8+(wt<<4)>>3]-O,Q=le*N-q*G,Q!=0&&(Ee=me-R,Nt=xe-O,G=(Ee*G-N*Nt)/Q,!(G<0|G>1))&&(Q=(le*Ee-q*Nt)/Q,Q>=0&Q<=1)){v=1;break e}while((v|0)<(M|0))}if((y|0)>=(m[g>>2]|0)){v=0;break}}}else v=0;while(!1);return $t=v,re=nn,$t|0}function Xm(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0;if(yl(g,v,y,T)|0)return R=1,R|0;if(R=g+8|0,(m[R>>2]|0)<=0)return R=0,R|0;for(M=g+12|0,g=0;;){if(N=g,g=g+1|0,yl((m[M>>2]|0)+(N<<3)|0,v+(g<<5)|0,y,T)|0){g=1,M=6;break}if((g|0)>=(m[R>>2]|0)){g=0,M=6;break}}return(M|0)==6?g|0:0}function Ym(){return 8}function $m(){return 16}function la(){return 168}function Br(){return 8}function Bi(){return 16}function Yu(){return 12}function xl(){return 8}function Qm(g){return g=g|0,+(+((m[g>>2]|0)>>>0)+4294967296*+(m[g+4>>2]|0))}function $u(g){g=g|0;var v=0,y=0;return y=+ie[g>>3],v=+ie[g+8>>3],+ +Zn(+(y*y+v*v))}function Zm(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0;q=+ie[g>>3],G=+ie[v>>3]-q,O=+ie[g+8>>3],N=+ie[v+8>>3]-O,le=+ie[y>>3],R=+ie[T>>3]-le,xe=+ie[y+8>>3],Q=+ie[T+8>>3]-xe,R=(R*(O-xe)-(q-le)*Q)/(G*Q-N*R),ie[M>>3]=q+G*R,ie[M+8>>3]=O+N*R}function Km(g,v){return g=g|0,v=v|0,+wn(+(+ie[g>>3]-+ie[v>>3]))<11920928955078125e-23?(v=+wn(+(+ie[g+8>>3]-+ie[v+8>>3]))<11920928955078125e-23,v|0):(v=0,v|0)}function Sr(g,v){g=g|0,v=v|0;var y=0,T=0,M=0;return M=+ie[g>>3]-+ie[v>>3],T=+ie[g+8>>3]-+ie[v+8>>3],y=+ie[g+16>>3]-+ie[v+16>>3],+(M*M+T*T+y*y)}function kd(g,v){g=g|0,v=v|0;var y=0,T=0,M=0;y=+ie[g>>3],T=+ni(+y),y=+hn(+y),ie[v+16>>3]=y,y=+ie[g+8>>3],M=T*+ni(+y),ie[v>>3]=M,y=T*+hn(+y),ie[v+8>>3]=y}function ab(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;if(R=re,re=re+16|0,M=R,T=Ni(g,v)|0,(y+-1|0)>>>0>5||(T=(T|0)!=0,(y|0)==1&T))return M=-1,re=R,M|0;do if(nc(g,v,M)|0)T=-1;else if(T){T=((m[26352+(y<<2)>>2]|0)+5-(m[M>>2]|0)|0)%5|0;break}else{T=((m[26384+(y<<2)>>2]|0)+6-(m[M>>2]|0)|0)%6|0;break}while(!1);return M=T,re=R,M|0}function nc(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0,q=0;if(q=re,re=re+32|0,N=q+16|0,O=q,T=ml(g,v,N)|0,T|0)return y=T,re=q,y|0;R=X1(g,v)|0,G=sa(g,v)|0,Mm(R,O),T=Kh(R,m[N>>2]|0)|0;e:do if(vr(R)|0){do switch(R|0){case 4:{g=0;break}case 14:{g=1;break}case 24:{g=2;break}case 38:{g=3;break}case 49:{g=4;break}case 58:{g=5;break}case 63:{g=6;break}case 72:{g=7;break}case 83:{g=8;break}case 97:{g=9;break}case 107:{g=10;break}case 117:{g=11;break}default:{T=1;break e}}while(!1);if(M=m[26416+(g*24|0)+8>>2]|0,v=m[26416+(g*24|0)+16>>2]|0,g=m[N>>2]|0,(g|0)!=(m[O>>2]|0)&&(O=Sm(R)|0,g=m[N>>2]|0,O|(g|0)==(v|0)&&(T=(T+1|0)%6|0)),(G|0)==3&(g|0)==(v|0)){T=(T+5|0)%6|0,M=22;break}(G|0)==5&(g|0)==(M|0)&&(T=(T+1|0)%6|0),M=22}else M=22;while(!1);return(M|0)==22&&(m[y>>2]=T,T=0),y=T,re=q,y|0}function Ea(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0;if(Be=re,re=re+32|0,ze=Be+24|0,De=Be+20|0,me=Be+8|0,ge=Be+16|0,xe=Be,G=(Ni(g,v)|0)==0,G=G?6:5,Q=bt(g|0,v|0,52)|0,ae()|0,Q=Q&15,G>>>0<=y>>>0)return T=2,re=Be,T|0;le=(Q|0)==0,!le&&(Me=Pt(7,0,(Q^15)*3|0)|0,(Me&g|0)==0&((ae()|0)&v|0)==0)?M=y:R=4;e:do if((R|0)==4){if(M=(Ni(g,v)|0)!=0,((M?4:5)|0)<(y|0)||nc(g,v,ze)|0||(R=(m[ze>>2]|0)+y|0,M?M=26704+(((R|0)%5|0)<<2)|0:M=26736+(((R|0)%6|0)<<2)|0,Me=m[M>>2]|0,(Me|0)==7))return T=1,re=Be,T|0;m[De>>2]=0,M=vi(g,v,Me,De,me)|0;do if(!M){if(O=me,q=m[O>>2]|0,O=m[O+4>>2]|0,N=O>>>0<v>>>0|(O|0)==(v|0)&q>>>0<g>>>0,R=N?q:g,N=N?O:v,!le&&(le=Pt(7,0,(Q^15)*3|0)|0,(q&le|0)==0&(O&(ae()|0)|0)==0))M=y;else{if(O=(y+-1+G|0)%(G|0)|0,M=Ni(g,v)|0,(O|0)<0&&Lt(27795,27797,246,27806),G=(M|0)!=0,((G?4:5)|0)<(O|0)&&Lt(27795,27797,246,27806),nc(g,v,ze)|0&&Lt(27795,27797,246,27806),M=(m[ze>>2]|0)+O|0,G?M=26704+(((M|0)%5|0)<<2)|0:M=26736+(((M|0)%6|0)<<2)|0,O=m[M>>2]|0,(O|0)==7&&Lt(27795,27797,246,27806),m[ge>>2]=0,M=vi(g,v,O,ge,xe)|0,M|0)break;q=xe,G=m[q>>2]|0,q=m[q+4>>2]|0;do if(q>>>0<N>>>0|(q|0)==(N|0)&G>>>0<R>>>0){if(Ni(G,q)|0?R=Zr(G,q,g,v)|0:R=m[26800+((((m[ge>>2]|0)+(m[26768+(O<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,M=Ni(G,q)|0,(R+-1|0)>>>0>5){M=-1,R=G,N=q;break}if(M=(M|0)!=0,(R|0)==1&M){M=-1,R=G,N=q;break}do if(nc(G,q,ze)|0)M=-1;else if(M){M=((m[26352+(R<<2)>>2]|0)+5-(m[ze>>2]|0)|0)%5|0;break}else{M=((m[26384+(R<<2)>>2]|0)+6-(m[ze>>2]|0)|0)%6|0;break}while(!1);R=G,N=q}else M=y;while(!1);O=me,q=m[O>>2]|0,O=m[O+4>>2]|0}if((R|0)==(q|0)&(N|0)==(O|0)){if(G=(Ni(q,O)|0)!=0,G?g=Zr(q,O,g,v)|0:g=m[26800+((((m[De>>2]|0)+(m[26768+(Me<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,M=Ni(q,O)|0,(g+-1|0)>>>0<=5&&(je=(M|0)!=0,!((g|0)==1&je)))do if(nc(q,O,ze)|0)M=-1;else if(je){M=((m[26352+(g<<2)>>2]|0)+5-(m[ze>>2]|0)|0)%5|0;break}else{M=((m[26384+(g<<2)>>2]|0)+6-(m[ze>>2]|0)|0)%6|0;break}while(!1);else M=-1;M=M+1|0,M=(M|0)==6|G&(M|0)==5?0:M}v=N,g=R;break e}while(!1);return T=M,re=Be,T|0}while(!1);return je=Pt(M|0,0,56)|0,ze=ae()|0|v&-2130706433|536870912,m[T>>2]=je|g,m[T+4>>2]=ze,T=0,re=Be,T|0}function Qu(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;return R=(Ni(g,v)|0)==0,T=Ea(g,v,0,y)|0,M=(T|0)==0,R?!M||(T=Ea(g,v,1,y+8|0)|0,T|0)||(T=Ea(g,v,2,y+16|0)|0,T|0)||(T=Ea(g,v,3,y+24|0)|0,T|0)||(T=Ea(g,v,4,y+32|0)|0,T)?(R=T,R|0):Ea(g,v,5,y+40|0)|0:!M||(T=Ea(g,v,1,y+8|0)|0,T|0)||(T=Ea(g,v,2,y+16|0)|0,T|0)||(T=Ea(g,v,3,y+24|0)|0,T|0)||(T=Ea(g,v,4,y+32|0)|0,T|0)?(R=T,R|0):(R=y+40|0,m[R>>2]=0,m[R+4>>2]=0,R=0,R|0)}function ic(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0,O=0,G=0;return G=re,re=re+192|0,M=G,R=G+168|0,N=bt(g|0,v|0,56)|0,ae()|0,N=N&7,O=v&-2130706433|134217728,T=ml(g,O,R)|0,T|0?(O=T,re=G,O|0):(v=bt(g|0,v|0,52)|0,ae()|0,v=v&15,Ni(g,O)|0?Pm(R,v,N,1,M):mA(R,v,N,1,M),O=M+8|0,m[y>>2]=m[O>>2],m[y+4>>2]=m[O+4>>2],m[y+8>>2]=m[O+8>>2],m[y+12>>2]=m[O+12>>2],O=0,re=G,O|0)}function Hc(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0;return M=re,re=re+16|0,y=M,!(!0&(v&2013265920|0)==536870912)||(T=v&-2130706433|134217728,!(Dm(g,T)|0))?(T=0,re=M,T|0):(R=bt(g|0,v|0,56)|0,ae()|0,R=(Ea(g,T,R&7,y)|0)==0,T=y,T=R&((m[T>>2]|0)==(g|0)?(m[T+4>>2]|0)==(v|0):0)&1,re=M,T|0)}function bl(g,v,y){g=g|0,v=v|0,y=y|0;var T=0;(v|0)>0?(T=lo(v,4)|0,m[g>>2]=T,T||Lt(27819,27842,40,27856)):m[g>>2]=0,m[g+4>>2]=v,m[g+8>>2]=0,m[g+12>>2]=y}function CA(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0;M=g+4|0,R=g+12|0,N=g+8|0;e:for(;;){for(y=m[M>>2]|0,v=0;;){if((v|0)>=(y|0))break e;if(T=m[g>>2]|0,O=m[T+(v<<2)>>2]|0,!O)v=v+1|0;else break}v=T+(~~(+wn(+(+Rs(10,+ +(15-(m[R>>2]|0)|0))*(+ie[O>>3]+ +ie[O+8>>3])))%+(y|0))>>>0<<2)|0,y=m[v>>2]|0;t:do if(y|0){if(T=O+32|0,(y|0)==(O|0))m[v>>2]=m[T>>2];else{if(y=y+32|0,v=m[y>>2]|0,!v)break;for(;(v|0)!=(O|0);)if(y=v+32|0,v=m[y>>2]|0,!v)break t;m[y>>2]=m[T>>2]}kn(O),m[N>>2]=(m[N>>2]|0)+-1}while(!1)}kn(m[g>>2]|0)}function RA(g){g=g|0;var v=0,y=0,T=0;for(T=m[g+4>>2]|0,y=0;;){if((y|0)>=(T|0)){v=0,y=4;break}if(v=m[(m[g>>2]|0)+(y<<2)>>2]|0,!v)y=y+1|0;else{y=4;break}}return(y|0)==4?v|0:0}function cf(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0;if(y=~~(+wn(+(+Rs(10,+ +(15-(m[g+12>>2]|0)|0))*(+ie[v>>3]+ +ie[v+8>>3])))%+(m[g+4>>2]|0))>>>0,y=(m[g>>2]|0)+(y<<2)|0,T=m[y>>2]|0,!T)return R=1,R|0;R=v+32|0;do if((T|0)!=(v|0)){if(y=m[T+32>>2]|0,!y)return R=1,R|0;for(M=y;;){if((M|0)==(v|0)){M=8;break}if(y=m[M+32>>2]|0,y)T=M,M=y;else{y=1,M=10;break}}if((M|0)==8){m[T+32>>2]=m[R>>2];break}else if((M|0)==10)return y|0}else m[y>>2]=m[R>>2];while(!1);return kn(v),R=g+8|0,m[R>>2]=(m[R>>2]|0)+-1,R=0,R|0}function PA(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0;R=_l(40)|0,R||Lt(27872,27842,98,27885),m[R>>2]=m[v>>2],m[R+4>>2]=m[v+4>>2],m[R+8>>2]=m[v+8>>2],m[R+12>>2]=m[v+12>>2],M=R+16|0,m[M>>2]=m[y>>2],m[M+4>>2]=m[y+4>>2],m[M+8>>2]=m[y+8>>2],m[M+12>>2]=m[y+12>>2],m[R+32>>2]=0,M=~~(+wn(+(+Rs(10,+ +(15-(m[g+12>>2]|0)|0))*(+ie[v>>3]+ +ie[v+8>>3])))%+(m[g+4>>2]|0))>>>0,M=(m[g>>2]|0)+(M<<2)|0,T=m[M>>2]|0;do if(!T)m[M>>2]=R;else{for(;!(ko(T,v)|0&&ko(T+16|0,y)|0);)if(M=m[T+32>>2]|0,T=(M|0)==0?T:M,!(m[T+32>>2]|0)){N=10;break}if((N|0)==10){m[T+32>>2]=R;break}return kn(R),N=T,N|0}while(!1);return N=g+8|0,m[N>>2]=(m[N>>2]|0)+1,N=R,N|0}function Zu(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0;if(M=~~(+wn(+(+Rs(10,+ +(15-(m[g+12>>2]|0)|0))*(+ie[v>>3]+ +ie[v+8>>3])))%+(m[g+4>>2]|0))>>>0,M=m[(m[g>>2]|0)+(M<<2)>>2]|0,!M)return y=0,y|0;if(!y){for(g=M;;){if(ko(g,v)|0){T=10;break}if(g=m[g+32>>2]|0,!g){g=0,T=10;break}}if((T|0)==10)return g|0}for(g=M;;){if(ko(g,v)|0&&ko(g+16|0,y)|0){T=10;break}if(g=m[g+32>>2]|0,!g){g=0,T=10;break}}return(T|0)==10?g|0:0}function Xs(g,v){g=g|0,v=v|0;var y=0;if(y=~~(+wn(+(+Rs(10,+ +(15-(m[g+12>>2]|0)|0))*(+ie[v>>3]+ +ie[v+8>>3])))%+(m[g+4>>2]|0))>>>0,g=m[(m[g>>2]|0)+(y<<2)>>2]|0,!g)return y=0,y|0;for(;;){if(ko(g,v)|0){v=5;break}if(g=m[g+32>>2]|0,!g){g=0,v=5;break}}return(v|0)==5?g|0:0}function NA(){return 27904}function rc(g){return g=+g,~~+DA(+g)|0}function _l(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0,Me=0,De=0,je=0,ze=0,Be=0,Ee=0,Nt=0;Nt=re,re=re+16|0,xe=Nt;do if(g>>>0<245){if(q=g>>>0<11?16:g+11&-8,g=q>>>3,le=m[6977]|0,y=le>>>g,y&3|0)return v=(y&1^1)+g|0,g=27948+(v<<1<<2)|0,y=g+8|0,T=m[y>>2]|0,M=T+8|0,R=m[M>>2]|0,(R|0)==(g|0)?m[6977]=le&~(1<<v):(m[R+12>>2]=g,m[y>>2]=R),Ee=v<<3,m[T+4>>2]=Ee|3,Ee=T+Ee+4|0,m[Ee>>2]=m[Ee>>2]|1,Ee=M,re=Nt,Ee|0;if(Q=m[6979]|0,q>>>0>Q>>>0){if(y|0)return v=2<<g,v=y<<g&(v|0-v),v=(v&0-v)+-1|0,O=v>>>12&16,v=v>>>O,y=v>>>5&8,v=v>>>y,R=v>>>2&4,v=v>>>R,g=v>>>1&2,v=v>>>g,T=v>>>1&1,T=(y|O|R|g|T)+(v>>>T)|0,v=27948+(T<<1<<2)|0,g=v+8|0,R=m[g>>2]|0,O=R+8|0,y=m[O>>2]|0,(y|0)==(v|0)?(g=le&~(1<<T),m[6977]=g):(m[y+12>>2]=v,m[g>>2]=y,g=le),Ee=T<<3,N=Ee-q|0,m[R+4>>2]=q|3,M=R+q|0,m[M+4>>2]=N|1,m[R+Ee>>2]=N,Q|0&&(T=m[6982]|0,v=Q>>>3,y=27948+(v<<1<<2)|0,v=1<<v,g&v?(g=y+8|0,v=m[g>>2]|0):(m[6977]=g|v,v=y,g=y+8|0),m[g>>2]=T,m[v+12>>2]=T,m[T+8>>2]=v,m[T+12>>2]=y),m[6979]=N,m[6982]=M,Ee=O,re=Nt,Ee|0;if(R=m[6978]|0,R){for(y=(R&0-R)+-1|0,M=y>>>12&16,y=y>>>M,T=y>>>5&8,y=y>>>T,N=y>>>2&4,y=y>>>N,O=y>>>1&2,y=y>>>O,G=y>>>1&1,G=m[28212+((T|M|N|O|G)+(y>>>G)<<2)>>2]|0,y=G,O=G,G=(m[G+4>>2]&-8)-q|0;g=m[y+16>>2]|0,!(!g&&(g=m[y+20>>2]|0,!g));)N=(m[g+4>>2]&-8)-q|0,M=N>>>0<G>>>0,y=g,O=M?g:O,G=M?N:G;if(N=O+q|0,N>>>0>O>>>0){M=m[O+24>>2]|0,v=m[O+12>>2]|0;do if((v|0)==(O|0)){if(g=O+20|0,v=m[g>>2]|0,!v&&(g=O+16|0,v=m[g>>2]|0,!v)){y=0;break}for(;;)if(T=v+20|0,y=m[T>>2]|0,y)v=y,g=T;else if(T=v+16|0,y=m[T>>2]|0,y)v=y,g=T;else break;m[g>>2]=0,y=v}else y=m[O+8>>2]|0,m[y+12>>2]=v,m[v+8>>2]=y,y=v;while(!1);do if(M|0){if(v=m[O+28>>2]|0,g=28212+(v<<2)|0,(O|0)==(m[g>>2]|0)){if(m[g>>2]=y,!y){m[6978]=R&~(1<<v);break}}else if(Ee=M+16|0,m[((m[Ee>>2]|0)==(O|0)?Ee:M+20|0)>>2]=y,!y)break;m[y+24>>2]=M,v=m[O+16>>2]|0,v|0&&(m[y+16>>2]=v,m[v+24>>2]=y),v=m[O+20>>2]|0,v|0&&(m[y+20>>2]=v,m[v+24>>2]=y)}while(!1);return G>>>0<16?(Ee=G+q|0,m[O+4>>2]=Ee|3,Ee=O+Ee+4|0,m[Ee>>2]=m[Ee>>2]|1):(m[O+4>>2]=q|3,m[N+4>>2]=G|1,m[N+G>>2]=G,Q|0&&(T=m[6982]|0,v=Q>>>3,y=27948+(v<<1<<2)|0,v=1<<v,v&le?(g=y+8|0,v=m[g>>2]|0):(m[6977]=v|le,v=y,g=y+8|0),m[g>>2]=T,m[v+12>>2]=T,m[T+8>>2]=v,m[T+12>>2]=y),m[6979]=G,m[6982]=N),Ee=O+8|0,re=Nt,Ee|0}else le=q}else le=q}else le=q}else if(g>>>0<=4294967231)if(g=g+11|0,q=g&-8,T=m[6978]|0,T){M=0-q|0,g=g>>>8,g?q>>>0>16777215?G=31:(le=(g+1048320|0)>>>16&8,Me=g<<le,O=(Me+520192|0)>>>16&4,Me=Me<<O,G=(Me+245760|0)>>>16&2,G=14-(O|le|G)+(Me<<G>>>15)|0,G=q>>>(G+7|0)&1|G<<1):G=0,y=m[28212+(G<<2)>>2]|0;e:do if(!y)y=0,g=0,Me=61;else for(g=0,O=q<<((G|0)==31?0:25-(G>>>1)|0),R=0;;){if(N=(m[y+4>>2]&-8)-q|0,N>>>0<M>>>0)if(N)g=y,M=N;else{g=y,M=0,Me=65;break e}if(Me=m[y+20>>2]|0,y=m[y+16+(O>>>31<<2)>>2]|0,R=(Me|0)==0|(Me|0)==(y|0)?R:Me,y)O=O<<1;else{y=R,Me=61;break}}while(!1);if((Me|0)==61){if((y|0)==0&(g|0)==0){if(g=2<<G,g=(g|0-g)&T,!g){le=q;break}le=(g&0-g)+-1|0,N=le>>>12&16,le=le>>>N,R=le>>>5&8,le=le>>>R,O=le>>>2&4,le=le>>>O,G=le>>>1&2,le=le>>>G,y=le>>>1&1,g=0,y=m[28212+((R|N|O|G|y)+(le>>>y)<<2)>>2]|0}y?Me=65:(O=g,N=M)}if((Me|0)==65)for(R=y;;)if(le=(m[R+4>>2]&-8)-q|0,y=le>>>0<M>>>0,M=y?le:M,g=y?R:g,y=m[R+16>>2]|0,y||(y=m[R+20>>2]|0),y)R=y;else{O=g,N=M;break}if((O|0)!=0&&N>>>0<((m[6979]|0)-q|0)>>>0&&(Q=O+q|0,Q>>>0>O>>>0)){R=m[O+24>>2]|0,v=m[O+12>>2]|0;do if((v|0)==(O|0)){if(g=O+20|0,v=m[g>>2]|0,!v&&(g=O+16|0,v=m[g>>2]|0,!v)){v=0;break}for(;;)if(M=v+20|0,y=m[M>>2]|0,y)v=y,g=M;else if(M=v+16|0,y=m[M>>2]|0,y)v=y,g=M;else break;m[g>>2]=0}else Ee=m[O+8>>2]|0,m[Ee+12>>2]=v,m[v+8>>2]=Ee;while(!1);do if(R){if(g=m[O+28>>2]|0,y=28212+(g<<2)|0,(O|0)==(m[y>>2]|0)){if(m[y>>2]=v,!v){T=T&~(1<<g),m[6978]=T;break}}else if(Ee=R+16|0,m[((m[Ee>>2]|0)==(O|0)?Ee:R+20|0)>>2]=v,!v)break;m[v+24>>2]=R,g=m[O+16>>2]|0,g|0&&(m[v+16>>2]=g,m[g+24>>2]=v),g=m[O+20>>2]|0,g&&(m[v+20>>2]=g,m[g+24>>2]=v)}while(!1);e:do if(N>>>0<16)Ee=N+q|0,m[O+4>>2]=Ee|3,Ee=O+Ee+4|0,m[Ee>>2]=m[Ee>>2]|1;else{if(m[O+4>>2]=q|3,m[Q+4>>2]=N|1,m[Q+N>>2]=N,v=N>>>3,N>>>0<256){y=27948+(v<<1<<2)|0,g=m[6977]|0,v=1<<v,g&v?(g=y+8|0,v=m[g>>2]|0):(m[6977]=g|v,v=y,g=y+8|0),m[g>>2]=Q,m[v+12>>2]=Q,m[Q+8>>2]=v,m[Q+12>>2]=y;break}if(v=N>>>8,v?N>>>0>16777215?y=31:(Be=(v+1048320|0)>>>16&8,Ee=v<<Be,ze=(Ee+520192|0)>>>16&4,Ee=Ee<<ze,y=(Ee+245760|0)>>>16&2,y=14-(ze|Be|y)+(Ee<<y>>>15)|0,y=N>>>(y+7|0)&1|y<<1):y=0,v=28212+(y<<2)|0,m[Q+28>>2]=y,g=Q+16|0,m[g+4>>2]=0,m[g>>2]=0,g=1<<y,!(T&g)){m[6978]=T|g,m[v>>2]=Q,m[Q+24>>2]=v,m[Q+12>>2]=Q,m[Q+8>>2]=Q;break}v=m[v>>2]|0;t:do if((m[v+4>>2]&-8|0)!=(N|0)){for(T=N<<((y|0)==31?0:25-(y>>>1)|0);y=v+16+(T>>>31<<2)|0,g=m[y>>2]|0,!!g;)if((m[g+4>>2]&-8|0)==(N|0)){v=g;break t}else T=T<<1,v=g;m[y>>2]=Q,m[Q+24>>2]=v,m[Q+12>>2]=Q,m[Q+8>>2]=Q;break e}while(!1);Be=v+8|0,Ee=m[Be>>2]|0,m[Ee+12>>2]=Q,m[Be>>2]=Q,m[Q+8>>2]=Ee,m[Q+12>>2]=v,m[Q+24>>2]=0}while(!1);return Ee=O+8|0,re=Nt,Ee|0}else le=q}else le=q;else le=-1;while(!1);if(y=m[6979]|0,y>>>0>=le>>>0)return v=y-le|0,g=m[6982]|0,v>>>0>15?(Ee=g+le|0,m[6982]=Ee,m[6979]=v,m[Ee+4>>2]=v|1,m[g+y>>2]=v,m[g+4>>2]=le|3):(m[6979]=0,m[6982]=0,m[g+4>>2]=y|3,Ee=g+y+4|0,m[Ee>>2]=m[Ee>>2]|1),Ee=g+8|0,re=Nt,Ee|0;if(N=m[6980]|0,N>>>0>le>>>0)return ze=N-le|0,m[6980]=ze,Ee=m[6983]|0,Be=Ee+le|0,m[6983]=Be,m[Be+4>>2]=ze|1,m[Ee+4>>2]=le|3,Ee=Ee+8|0,re=Nt,Ee|0;if(m[7095]|0?g=m[7097]|0:(m[7097]=4096,m[7096]=4096,m[7098]=-1,m[7099]=-1,m[7100]=0,m[7088]=0,m[7095]=xe&-16^1431655768,g=4096),O=le+48|0,G=le+47|0,R=g+G|0,M=0-g|0,q=R&M,q>>>0<=le>>>0||(g=m[7087]|0,g|0&&(Q=m[7085]|0,xe=Q+q|0,xe>>>0<=Q>>>0|xe>>>0>g>>>0)))return Ee=0,re=Nt,Ee|0;e:do if(m[7088]&4)v=0,Me=143;else{y=m[6983]|0;t:do if(y){for(T=28356;xe=m[T>>2]|0,!(xe>>>0<=y>>>0&&(xe+(m[T+4>>2]|0)|0)>>>0>y>>>0);)if(g=m[T+8>>2]|0,g)T=g;else{Me=128;break t}if(v=R-N&M,v>>>0<2147483647)if(g=sc(v|0)|0,(g|0)==((m[T>>2]|0)+(m[T+4>>2]|0)|0)){if((g|0)!=-1){N=v,R=g,Me=145;break e}}else T=g,Me=136;else v=0}else Me=128;while(!1);do if((Me|0)==128)if(y=sc(0)|0,(y|0)!=-1&&(v=y,ge=m[7096]|0,me=ge+-1|0,v=((me&v|0)==0?0:(me+v&0-ge)-v|0)+q|0,ge=m[7085]|0,me=v+ge|0,v>>>0>le>>>0&v>>>0<2147483647)){if(xe=m[7087]|0,xe|0&&me>>>0<=ge>>>0|me>>>0>xe>>>0){v=0;break}if(g=sc(v|0)|0,(g|0)==(y|0)){N=v,R=y,Me=145;break e}else T=g,Me=136}else v=0;while(!1);do if((Me|0)==136){if(y=0-v|0,!(O>>>0>v>>>0&(v>>>0<2147483647&(T|0)!=-1)))if((T|0)==-1){v=0;break}else{N=v,R=T,Me=145;break e}if(g=m[7097]|0,g=G-v+g&0-g,g>>>0>=2147483647){N=v,R=T,Me=145;break e}if((sc(g|0)|0)==-1){sc(y|0)|0,v=0;break}else{N=g+v|0,R=T,Me=145;break e}}while(!1);m[7088]=m[7088]|4,Me=143}while(!1);if((Me|0)==143&&q>>>0<2147483647&&(ze=sc(q|0)|0,me=sc(0)|0,De=me-ze|0,je=De>>>0>(le+40|0)>>>0,!((ze|0)==-1|je^1|ze>>>0<me>>>0&((ze|0)!=-1&(me|0)!=-1)^1))&&(N=je?De:v,R=ze,Me=145),(Me|0)==145){v=(m[7085]|0)+N|0,m[7085]=v,v>>>0>(m[7086]|0)>>>0&&(m[7086]=v),G=m[6983]|0;e:do if(G){for(v=28356;;){if(g=m[v>>2]|0,y=m[v+4>>2]|0,(R|0)==(g+y|0)){Me=154;break}if(T=m[v+8>>2]|0,T)v=T;else break}if((Me|0)==154&&(Be=v+4|0,(m[v+12>>2]&8|0)==0)&&R>>>0>G>>>0&g>>>0<=G>>>0){m[Be>>2]=y+N,Ee=(m[6980]|0)+N|0,ze=G+8|0,ze=(ze&7|0)==0?0:0-ze&7,Be=G+ze|0,ze=Ee-ze|0,m[6983]=Be,m[6980]=ze,m[Be+4>>2]=ze|1,m[G+Ee+4>>2]=40,m[6984]=m[7099];break}for(R>>>0<(m[6981]|0)>>>0&&(m[6981]=R),y=R+N|0,v=28356;;){if((m[v>>2]|0)==(y|0)){Me=162;break}if(g=m[v+8>>2]|0,g)v=g;else break}if((Me|0)==162&&(m[v+12>>2]&8|0)==0){m[v>>2]=R,Q=v+4|0,m[Q>>2]=(m[Q>>2]|0)+N,Q=R+8|0,Q=R+((Q&7|0)==0?0:0-Q&7)|0,v=y+8|0,v=y+((v&7|0)==0?0:0-v&7)|0,q=Q+le|0,O=v-Q-le|0,m[Q+4>>2]=le|3;t:do if((G|0)==(v|0))Ee=(m[6980]|0)+O|0,m[6980]=Ee,m[6983]=q,m[q+4>>2]=Ee|1;else{if((m[6982]|0)==(v|0)){Ee=(m[6979]|0)+O|0,m[6979]=Ee,m[6982]=q,m[q+4>>2]=Ee|1,m[q+Ee>>2]=Ee;break}if(g=m[v+4>>2]|0,(g&3|0)==1){N=g&-8,T=g>>>3;n:do if(g>>>0<256)if(g=m[v+8>>2]|0,y=m[v+12>>2]|0,(y|0)==(g|0)){m[6977]=m[6977]&~(1<<T);break}else{m[g+12>>2]=y,m[y+8>>2]=g;break}else{R=m[v+24>>2]|0,g=m[v+12>>2]|0;do if((g|0)==(v|0)){if(y=v+16|0,T=y+4|0,g=m[T>>2]|0,g)y=T;else if(g=m[y>>2]|0,!g){g=0;break}for(;;)if(M=g+20|0,T=m[M>>2]|0,T)g=T,y=M;else if(M=g+16|0,T=m[M>>2]|0,T)g=T,y=M;else break;m[y>>2]=0}else Ee=m[v+8>>2]|0,m[Ee+12>>2]=g,m[g+8>>2]=Ee;while(!1);if(!R)break;y=m[v+28>>2]|0,T=28212+(y<<2)|0;do if((m[T>>2]|0)!=(v|0)){if(Ee=R+16|0,m[((m[Ee>>2]|0)==(v|0)?Ee:R+20|0)>>2]=g,!g)break n}else{if(m[T>>2]=g,g|0)break;m[6978]=m[6978]&~(1<<y);break n}while(!1);if(m[g+24>>2]=R,y=v+16|0,T=m[y>>2]|0,T|0&&(m[g+16>>2]=T,m[T+24>>2]=g),y=m[y+4>>2]|0,!y)break;m[g+20>>2]=y,m[y+24>>2]=g}while(!1);v=v+N|0,M=N+O|0}else M=O;if(v=v+4|0,m[v>>2]=m[v>>2]&-2,m[q+4>>2]=M|1,m[q+M>>2]=M,v=M>>>3,M>>>0<256){y=27948+(v<<1<<2)|0,g=m[6977]|0,v=1<<v,g&v?(g=y+8|0,v=m[g>>2]|0):(m[6977]=g|v,v=y,g=y+8|0),m[g>>2]=q,m[v+12>>2]=q,m[q+8>>2]=v,m[q+12>>2]=y;break}v=M>>>8;do if(!v)T=0;else{if(M>>>0>16777215){T=31;break}Be=(v+1048320|0)>>>16&8,Ee=v<<Be,ze=(Ee+520192|0)>>>16&4,Ee=Ee<<ze,T=(Ee+245760|0)>>>16&2,T=14-(ze|Be|T)+(Ee<<T>>>15)|0,T=M>>>(T+7|0)&1|T<<1}while(!1);if(v=28212+(T<<2)|0,m[q+28>>2]=T,g=q+16|0,m[g+4>>2]=0,m[g>>2]=0,g=m[6978]|0,y=1<<T,!(g&y)){m[6978]=g|y,m[v>>2]=q,m[q+24>>2]=v,m[q+12>>2]=q,m[q+8>>2]=q;break}v=m[v>>2]|0;n:do if((m[v+4>>2]&-8|0)!=(M|0)){for(T=M<<((T|0)==31?0:25-(T>>>1)|0);y=v+16+(T>>>31<<2)|0,g=m[y>>2]|0,!!g;)if((m[g+4>>2]&-8|0)==(M|0)){v=g;break n}else T=T<<1,v=g;m[y>>2]=q,m[q+24>>2]=v,m[q+12>>2]=q,m[q+8>>2]=q;break t}while(!1);Be=v+8|0,Ee=m[Be>>2]|0,m[Ee+12>>2]=q,m[Be>>2]=q,m[q+8>>2]=Ee,m[q+12>>2]=v,m[q+24>>2]=0}while(!1);return Ee=Q+8|0,re=Nt,Ee|0}for(v=28356;g=m[v>>2]|0,!(g>>>0<=G>>>0&&(Ee=g+(m[v+4>>2]|0)|0,Ee>>>0>G>>>0));)v=m[v+8>>2]|0;M=Ee+-47|0,g=M+8|0,g=M+((g&7|0)==0?0:0-g&7)|0,M=G+16|0,g=g>>>0<M>>>0?G:g,v=g+8|0,y=N+-40|0,ze=R+8|0,ze=(ze&7|0)==0?0:0-ze&7,Be=R+ze|0,ze=y-ze|0,m[6983]=Be,m[6980]=ze,m[Be+4>>2]=ze|1,m[R+y+4>>2]=40,m[6984]=m[7099],y=g+4|0,m[y>>2]=27,m[v>>2]=m[7089],m[v+4>>2]=m[7090],m[v+8>>2]=m[7091],m[v+12>>2]=m[7092],m[7089]=R,m[7090]=N,m[7092]=0,m[7091]=v,v=g+24|0;do Be=v,v=v+4|0,m[v>>2]=7;while((Be+8|0)>>>0<Ee>>>0);if((g|0)!=(G|0)){if(R=g-G|0,m[y>>2]=m[y>>2]&-2,m[G+4>>2]=R|1,m[g>>2]=R,v=R>>>3,R>>>0<256){y=27948+(v<<1<<2)|0,g=m[6977]|0,v=1<<v,g&v?(g=y+8|0,v=m[g>>2]|0):(m[6977]=g|v,v=y,g=y+8|0),m[g>>2]=G,m[v+12>>2]=G,m[G+8>>2]=v,m[G+12>>2]=y;break}if(v=R>>>8,v?R>>>0>16777215?T=31:(Be=(v+1048320|0)>>>16&8,Ee=v<<Be,ze=(Ee+520192|0)>>>16&4,Ee=Ee<<ze,T=(Ee+245760|0)>>>16&2,T=14-(ze|Be|T)+(Ee<<T>>>15)|0,T=R>>>(T+7|0)&1|T<<1):T=0,y=28212+(T<<2)|0,m[G+28>>2]=T,m[G+20>>2]=0,m[M>>2]=0,v=m[6978]|0,g=1<<T,!(v&g)){m[6978]=v|g,m[y>>2]=G,m[G+24>>2]=y,m[G+12>>2]=G,m[G+8>>2]=G;break}v=m[y>>2]|0;t:do if((m[v+4>>2]&-8|0)!=(R|0)){for(T=R<<((T|0)==31?0:25-(T>>>1)|0);y=v+16+(T>>>31<<2)|0,g=m[y>>2]|0,!!g;)if((m[g+4>>2]&-8|0)==(R|0)){v=g;break t}else T=T<<1,v=g;m[y>>2]=G,m[G+24>>2]=v,m[G+12>>2]=G,m[G+8>>2]=G;break e}while(!1);Be=v+8|0,Ee=m[Be>>2]|0,m[Ee+12>>2]=G,m[Be>>2]=G,m[G+8>>2]=Ee,m[G+12>>2]=v,m[G+24>>2]=0}}else Ee=m[6981]|0,(Ee|0)==0|R>>>0<Ee>>>0&&(m[6981]=R),m[7089]=R,m[7090]=N,m[7092]=0,m[6986]=m[7095],m[6985]=-1,m[6990]=27948,m[6989]=27948,m[6992]=27956,m[6991]=27956,m[6994]=27964,m[6993]=27964,m[6996]=27972,m[6995]=27972,m[6998]=27980,m[6997]=27980,m[7e3]=27988,m[6999]=27988,m[7002]=27996,m[7001]=27996,m[7004]=28004,m[7003]=28004,m[7006]=28012,m[7005]=28012,m[7008]=28020,m[7007]=28020,m[7010]=28028,m[7009]=28028,m[7012]=28036,m[7011]=28036,m[7014]=28044,m[7013]=28044,m[7016]=28052,m[7015]=28052,m[7018]=28060,m[7017]=28060,m[7020]=28068,m[7019]=28068,m[7022]=28076,m[7021]=28076,m[7024]=28084,m[7023]=28084,m[7026]=28092,m[7025]=28092,m[7028]=28100,m[7027]=28100,m[7030]=28108,m[7029]=28108,m[7032]=28116,m[7031]=28116,m[7034]=28124,m[7033]=28124,m[7036]=28132,m[7035]=28132,m[7038]=28140,m[7037]=28140,m[7040]=28148,m[7039]=28148,m[7042]=28156,m[7041]=28156,m[7044]=28164,m[7043]=28164,m[7046]=28172,m[7045]=28172,m[7048]=28180,m[7047]=28180,m[7050]=28188,m[7049]=28188,m[7052]=28196,m[7051]=28196,Ee=N+-40|0,ze=R+8|0,ze=(ze&7|0)==0?0:0-ze&7,Be=R+ze|0,ze=Ee-ze|0,m[6983]=Be,m[6980]=ze,m[Be+4>>2]=ze|1,m[R+Ee+4>>2]=40,m[6984]=m[7099];while(!1);if(v=m[6980]|0,v>>>0>le>>>0)return ze=v-le|0,m[6980]=ze,Ee=m[6983]|0,Be=Ee+le|0,m[6983]=Be,m[Be+4>>2]=ze|1,m[Ee+4>>2]=le|3,Ee=Ee+8|0,re=Nt,Ee|0}return Ee=NA()|0,m[Ee>>2]=12,Ee=0,re=Nt,Ee|0}function kn(g){g=g|0;var v=0,y=0,T=0,M=0,R=0,N=0,O=0,G=0;if(g){y=g+-8|0,M=m[6981]|0,g=m[g+-4>>2]|0,v=g&-8,G=y+v|0;do if(g&1)O=y,N=y;else{if(T=m[y>>2]|0,!(g&3)||(N=y+(0-T)|0,R=T+v|0,N>>>0<M>>>0))return;if((m[6982]|0)==(N|0)){if(g=G+4|0,v=m[g>>2]|0,(v&3|0)!=3){O=N,v=R;break}m[6979]=R,m[g>>2]=v&-2,m[N+4>>2]=R|1,m[N+R>>2]=R;return}if(y=T>>>3,T>>>0<256)if(g=m[N+8>>2]|0,v=m[N+12>>2]|0,(v|0)==(g|0)){m[6977]=m[6977]&~(1<<y),O=N,v=R;break}else{m[g+12>>2]=v,m[v+8>>2]=g,O=N,v=R;break}M=m[N+24>>2]|0,g=m[N+12>>2]|0;do if((g|0)==(N|0)){if(v=N+16|0,y=v+4|0,g=m[y>>2]|0,g)v=y;else if(g=m[v>>2]|0,!g){g=0;break}for(;;)if(T=g+20|0,y=m[T>>2]|0,y)g=y,v=T;else if(T=g+16|0,y=m[T>>2]|0,y)g=y,v=T;else break;m[v>>2]=0}else O=m[N+8>>2]|0,m[O+12>>2]=g,m[g+8>>2]=O;while(!1);if(M){if(v=m[N+28>>2]|0,y=28212+(v<<2)|0,(m[y>>2]|0)==(N|0)){if(m[y>>2]=g,!g){m[6978]=m[6978]&~(1<<v),O=N,v=R;break}}else if(O=M+16|0,m[((m[O>>2]|0)==(N|0)?O:M+20|0)>>2]=g,!g){O=N,v=R;break}m[g+24>>2]=M,v=N+16|0,y=m[v>>2]|0,y|0&&(m[g+16>>2]=y,m[y+24>>2]=g),v=m[v+4>>2]|0,v?(m[g+20>>2]=v,m[v+24>>2]=g,O=N,v=R):(O=N,v=R)}else O=N,v=R}while(!1);if(!(N>>>0>=G>>>0)&&(g=G+4|0,T=m[g>>2]|0,!!(T&1))){if(T&2)m[g>>2]=T&-2,m[O+4>>2]=v|1,m[N+v>>2]=v,M=v;else{if((m[6983]|0)==(G|0)){if(G=(m[6980]|0)+v|0,m[6980]=G,m[6983]=O,m[O+4>>2]=G|1,(O|0)!=(m[6982]|0))return;m[6982]=0,m[6979]=0;return}if((m[6982]|0)==(G|0)){G=(m[6979]|0)+v|0,m[6979]=G,m[6982]=N,m[O+4>>2]=G|1,m[N+G>>2]=G;return}M=(T&-8)+v|0,y=T>>>3;do if(T>>>0<256)if(v=m[G+8>>2]|0,g=m[G+12>>2]|0,(g|0)==(v|0)){m[6977]=m[6977]&~(1<<y);break}else{m[v+12>>2]=g,m[g+8>>2]=v;break}else{R=m[G+24>>2]|0,g=m[G+12>>2]|0;do if((g|0)==(G|0)){if(v=G+16|0,y=v+4|0,g=m[y>>2]|0,g)v=y;else if(g=m[v>>2]|0,!g){y=0;break}for(;;)if(T=g+20|0,y=m[T>>2]|0,y)g=y,v=T;else if(T=g+16|0,y=m[T>>2]|0,y)g=y,v=T;else break;m[v>>2]=0,y=g}else y=m[G+8>>2]|0,m[y+12>>2]=g,m[g+8>>2]=y,y=g;while(!1);if(R|0){if(g=m[G+28>>2]|0,v=28212+(g<<2)|0,(m[v>>2]|0)==(G|0)){if(m[v>>2]=y,!y){m[6978]=m[6978]&~(1<<g);break}}else if(T=R+16|0,m[((m[T>>2]|0)==(G|0)?T:R+20|0)>>2]=y,!y)break;m[y+24>>2]=R,g=G+16|0,v=m[g>>2]|0,v|0&&(m[y+16>>2]=v,m[v+24>>2]=y),g=m[g+4>>2]|0,g|0&&(m[y+20>>2]=g,m[g+24>>2]=y)}}while(!1);if(m[O+4>>2]=M|1,m[N+M>>2]=M,(O|0)==(m[6982]|0)){m[6979]=M;return}}if(g=M>>>3,M>>>0<256){y=27948+(g<<1<<2)|0,v=m[6977]|0,g=1<<g,v&g?(v=y+8|0,g=m[v>>2]|0):(m[6977]=v|g,g=y,v=y+8|0),m[v>>2]=O,m[g+12>>2]=O,m[O+8>>2]=g,m[O+12>>2]=y;return}g=M>>>8,g?M>>>0>16777215?T=31:(N=(g+1048320|0)>>>16&8,G=g<<N,R=(G+520192|0)>>>16&4,G=G<<R,T=(G+245760|0)>>>16&2,T=14-(R|N|T)+(G<<T>>>15)|0,T=M>>>(T+7|0)&1|T<<1):T=0,g=28212+(T<<2)|0,m[O+28>>2]=T,m[O+20>>2]=0,m[O+16>>2]=0,v=m[6978]|0,y=1<<T;e:do if(!(v&y))m[6978]=v|y,m[g>>2]=O,m[O+24>>2]=g,m[O+12>>2]=O,m[O+8>>2]=O;else{g=m[g>>2]|0;t:do if((m[g+4>>2]&-8|0)!=(M|0)){for(T=M<<((T|0)==31?0:25-(T>>>1)|0);y=g+16+(T>>>31<<2)|0,v=m[y>>2]|0,!!v;)if((m[v+4>>2]&-8|0)==(M|0)){g=v;break t}else T=T<<1,g=v;m[y>>2]=O,m[O+24>>2]=g,m[O+12>>2]=O,m[O+8>>2]=O;break e}while(!1);N=g+8|0,G=m[N>>2]|0,m[G+12>>2]=O,m[N>>2]=O,m[O+8>>2]=G,m[O+12>>2]=g,m[O+24>>2]=0}while(!1);if(G=(m[6985]|0)+-1|0,m[6985]=G,!(G|0)){for(g=28364;g=m[g>>2]|0,g;)g=g+8|0;m[6985]=-1}}}}function lo(g,v){g=g|0,v=v|0;var y=0;return g?(y=Ye(v,g)|0,(v|g)>>>0>65535&&(y=((y>>>0)/(g>>>0)|0|0)==(v|0)?y:-1)):y=0,g=_l(y)|0,!g||!(m[g+-4>>2]&3)||Sl(g|0,0,y|0)|0,g|0}function Qt(g,v,y,T){return g=g|0,v=v|0,y=y|0,T=T|0,y=g+y>>>0,dt(v+T+(y>>>0<g>>>0|0)>>>0|0),y|0|0}function fs(g,v,y,T){return g=g|0,v=v|0,y=y|0,T=T|0,T=v-T-(y>>>0>g>>>0|0)>>>0,dt(T|0),g-y>>>0|0|0}function uf(g){return g=g|0,(g?31-(Ut(g^g-1)|0)|0:32)|0}function Ku(g,v,y,T,M){g=g|0,v=v|0,y=y|0,T=T|0,M=M|0;var R=0,N=0,O=0,G=0,q=0,Q=0,le=0,xe=0,ge=0,me=0;if(Q=g,G=v,q=G,N=y,xe=T,O=xe,!q)return R=(M|0)!=0,O?R?(m[M>>2]=g|0,m[M+4>>2]=v&0,xe=0,M=0,dt(xe|0),M|0):(xe=0,M=0,dt(xe|0),M|0):(R&&(m[M>>2]=(Q>>>0)%(N>>>0),m[M+4>>2]=0),xe=0,M=(Q>>>0)/(N>>>0)>>>0,dt(xe|0),M|0);R=(O|0)==0;do if(N){if(!R){if(R=(Ut(O|0)|0)-(Ut(q|0)|0)|0,R>>>0<=31){le=R+1|0,O=31-R|0,v=R-31>>31,N=le,g=Q>>>(le>>>0)&v|q<<O,v=q>>>(le>>>0)&v,R=0,O=Q<<O;break}return M?(m[M>>2]=g|0,m[M+4>>2]=G|v&0,xe=0,M=0,dt(xe|0),M|0):(xe=0,M=0,dt(xe|0),M|0)}if(R=N-1|0,R&N|0){O=(Ut(N|0)|0)+33-(Ut(q|0)|0)|0,me=64-O|0,le=32-O|0,G=le>>31,ge=O-32|0,v=ge>>31,N=O,g=le-1>>31&q>>>(ge>>>0)|(q<<le|Q>>>(O>>>0))&v,v=v&q>>>(O>>>0),R=Q<<me&G,O=(q<<me|Q>>>(ge>>>0))&G|Q<<le&O-33>>31;break}return M|0&&(m[M>>2]=R&Q,m[M+4>>2]=0),(N|0)==1?(ge=G|v&0,me=g|0|0,dt(ge|0),me|0):(me=uf(N|0)|0,ge=q>>>(me>>>0)|0,me=q<<32-me|Q>>>(me>>>0)|0,dt(ge|0),me|0)}else{if(R)return M|0&&(m[M>>2]=(q>>>0)%(N>>>0),m[M+4>>2]=0),ge=0,me=(q>>>0)/(N>>>0)>>>0,dt(ge|0),me|0;if(!Q)return M|0&&(m[M>>2]=0,m[M+4>>2]=(q>>>0)%(O>>>0)),ge=0,me=(q>>>0)/(O>>>0)>>>0,dt(ge|0),me|0;if(R=O-1|0,!(R&O))return M|0&&(m[M>>2]=g|0,m[M+4>>2]=R&q|v&0),ge=0,me=q>>>((uf(O|0)|0)>>>0),dt(ge|0),me|0;if(R=(Ut(O|0)|0)-(Ut(q|0)|0)|0,R>>>0<=30){v=R+1|0,O=31-R|0,N=v,g=q<<O|Q>>>(v>>>0),v=q>>>(v>>>0),R=0,O=Q<<O;break}return M?(m[M>>2]=g|0,m[M+4>>2]=G|v&0,ge=0,me=0,dt(ge|0),me|0):(ge=0,me=0,dt(ge|0),me|0)}while(!1);if(!N)q=O,G=0,O=0;else{le=y|0|0,Q=xe|T&0,q=Qt(le|0,Q|0,-1,-1)|0,y=ae()|0,G=O,O=0;do T=G,G=R>>>31|G<<1,R=O|R<<1,T=g<<1|T>>>31|0,xe=g>>>31|v<<1|0,fs(q|0,y|0,T|0,xe|0)|0,me=ae()|0,ge=me>>31|((me|0)<0?-1:0)<<1,O=ge&1,g=fs(T|0,xe|0,ge&le|0,(((me|0)<0?-1:0)>>31|((me|0)<0?-1:0)<<1)&Q|0)|0,v=ae()|0,N=N-1|0;while((N|0)!=0);q=G,G=0}return N=0,M|0&&(m[M>>2]=g,m[M+4>>2]=v),ge=(R|0)>>>31|(q|N)<<1|(N<<1|R>>>31)&0|G,me=(R<<1|0)&-2|O,dt(ge|0),me|0}function wl(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0;return q=v>>31|((v|0)<0?-1:0)<<1,G=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,R=T>>31|((T|0)<0?-1:0)<<1,M=((T|0)<0?-1:0)>>31|((T|0)<0?-1:0)<<1,O=fs(q^g|0,G^v|0,q|0,G|0)|0,N=ae()|0,g=R^q,v=M^G,fs((Ku(O,N,fs(R^y|0,M^T|0,R|0,M|0)|0,ae()|0,0)|0)^g|0,(ae()|0)^v|0,g|0,v|0)|0}function hf(g,v){g=g|0,v=v|0;var y=0,T=0,M=0,R=0;return R=g&65535,M=v&65535,y=Ye(M,R)|0,T=g>>>16,g=(y>>>16)+(Ye(M,T)|0)|0,M=v>>>16,v=Ye(M,R)|0,dt((g>>>16)+(Ye(M,T)|0)+(((g&65535)+v|0)>>>16)|0),g+v<<16|y&65535|0|0}function qr(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0;return M=g,R=y,y=hf(M,R)|0,g=ae()|0,dt((Ye(v,R)|0)+(Ye(T,M)|0)+g|g&0|0),y|0|0|0}function ff(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0,N=0,O=0,G=0,q=0;return M=re,re=re+16|0,O=M|0,N=v>>31|((v|0)<0?-1:0)<<1,R=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,q=T>>31|((T|0)<0?-1:0)<<1,G=((T|0)<0?-1:0)>>31|((T|0)<0?-1:0)<<1,g=fs(N^g|0,R^v|0,N|0,R|0)|0,v=ae()|0,Ku(g,v,fs(q^y|0,G^T|0,q|0,G|0)|0,ae()|0,O)|0,T=fs(m[O>>2]^N|0,m[O+4>>2]^R|0,N|0,R|0)|0,y=ae()|0,re=M,dt(y|0),T|0}function Ju(g,v,y,T){g=g|0,v=v|0,y=y|0,T=T|0;var M=0,R=0;return R=re,re=re+16|0,M=R|0,Ku(g,v,y,T,M)|0,re=R,dt(m[M+4>>2]|0),m[M>>2]|0|0}function ob(g,v,y){return g=g|0,v=v|0,y=y|0,(y|0)<32?(dt(v>>y|0),g>>>y|(v&(1<<y)-1)<<32-y):(dt(((v|0)<0?-1:0)|0),v>>y-32|0)}function bt(g,v,y){return g=g|0,v=v|0,y=y|0,(y|0)<32?(dt(v>>>y|0),g>>>y|(v&(1<<y)-1)<<32-y):(dt(0),v>>>y-32|0)}function Pt(g,v,y){return g=g|0,v=v|0,y=y|0,(y|0)<32?(dt(v<<y|(g&(1<<y)-1<<32-y)>>>32-y|0),g<<y):(dt(g<<y-32|0),0)}function LA(g,v,y){return g=g|0,v=v|0,v=Ut(v)|0,(v|0)==32&&(v=v+(Ut(g)|0)|0),dt(0),v|0}function Od(g,v){return g=+g,v=+v,g!=g?+v:v!=v?+g:+It(+g,+v)}function Id(g,v){return g=+g,v=+v,g!=g?+v:v!=v?+g:+Ue(+g,+v)}function qc(g){return g=+g,g>=0?+mi(g+.5):+Qe(g-.5)}function eh(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0;if((y|0)>=8192)return di(g|0,v|0,y|0)|0,g|0;if(R=g|0,M=g+y|0,(g&3)==(v&3)){for(;g&3;){if(!y)return R|0;ft[g>>0]=ft[v>>0]|0,g=g+1|0,v=v+1|0,y=y-1|0}for(y=M&-4|0,T=y-64|0;(g|0)<=(T|0);)m[g>>2]=m[v>>2],m[g+4>>2]=m[v+4>>2],m[g+8>>2]=m[v+8>>2],m[g+12>>2]=m[v+12>>2],m[g+16>>2]=m[v+16>>2],m[g+20>>2]=m[v+20>>2],m[g+24>>2]=m[v+24>>2],m[g+28>>2]=m[v+28>>2],m[g+32>>2]=m[v+32>>2],m[g+36>>2]=m[v+36>>2],m[g+40>>2]=m[v+40>>2],m[g+44>>2]=m[v+44>>2],m[g+48>>2]=m[v+48>>2],m[g+52>>2]=m[v+52>>2],m[g+56>>2]=m[v+56>>2],m[g+60>>2]=m[v+60>>2],g=g+64|0,v=v+64|0;for(;(g|0)<(y|0);)m[g>>2]=m[v>>2],g=g+4|0,v=v+4|0}else for(y=M-4|0;(g|0)<(y|0);)ft[g>>0]=ft[v>>0]|0,ft[g+1>>0]=ft[v+1>>0]|0,ft[g+2>>0]=ft[v+2>>0]|0,ft[g+3>>0]=ft[v+3>>0]|0,g=g+4|0,v=v+4|0;for(;(g|0)<(M|0);)ft[g>>0]=ft[v>>0]|0,g=g+1|0,v=v+1|0;return R|0}function Sl(g,v,y){g=g|0,v=v|0,y=y|0;var T=0,M=0,R=0,N=0;if(R=g+y|0,v=v&255,(y|0)>=67){for(;g&3;)ft[g>>0]=v,g=g+1|0;for(T=R&-4|0,N=v|v<<8|v<<16|v<<24,M=T-64|0;(g|0)<=(M|0);)m[g>>2]=N,m[g+4>>2]=N,m[g+8>>2]=N,m[g+12>>2]=N,m[g+16>>2]=N,m[g+20>>2]=N,m[g+24>>2]=N,m[g+28>>2]=N,m[g+32>>2]=N,m[g+36>>2]=N,m[g+40>>2]=N,m[g+44>>2]=N,m[g+48>>2]=N,m[g+52>>2]=N,m[g+56>>2]=N,m[g+60>>2]=N,g=g+64|0;for(;(g|0)<(T|0);)m[g>>2]=N,g=g+4|0}for(;(g|0)<(R|0);)ft[g>>0]=v,g=g+1|0;return R-y|0}function DA(g){return g=+g,g>=0?+mi(g+.5):+Qe(g-.5)}function sc(g){g=g|0;var v=0,y=0,T=0;return T=bn()|0,y=m[Gn>>2]|0,v=y+g|0,(g|0)>0&(v|0)<(y|0)|(v|0)<0?(cr(v|0)|0,Nn(12),-1):(v|0)>(T|0)&&!(Ii(v|0)|0)?(Nn(12),-1):(m[Gn>>2]=v,y|0)}return{___divdi3:wl,___muldi3:qr,___remdi3:ff,___uremdi3:Ju,_areNeighborCells:QT,_bitshift64Ashr:ob,_bitshift64Lshr:bt,_bitshift64Shl:Pt,_calloc:lo,_cellAreaKm2:rb,_cellAreaM2:so,_cellAreaRads2:Ga,_cellToBoundary:qu,_cellToCenterChild:Dd,_cellToChildPos:rf,_cellToChildren:Ld,_cellToChildrenSize:nf,_cellToLatLng:Gc,_cellToLocalIj:c3,_cellToParent:vA,_cellToVertex:Ea,_cellToVertexes:Qu,_cellsToDirectedEdge:W1,_cellsToLinkedMultiPolygon:wm,_childPosToCell:Vm,_compactCells:$1,_destroyLinkedMultiPolygon:MA,_directedEdgeToBoundary:gA,_directedEdgeToCells:e3,_edgeLengthKm:sf,_edgeLengthM:Hm,_edgeLengthRads:ao,_emscripten_replace_memory:wi,_free:kn,_getBaseCellNumber:X1,_getDirectedEdgeDestination:KT,_getDirectedEdgeOrigin:ZT,_getHexagonAreaAvgKm2:nb,_getHexagonAreaAvgM2:o3,_getHexagonEdgeLengthAvgKm:l3,_getHexagonEdgeLengthAvgM:ib,_getIcosahedronFaces:Um,_getNumCells:_A,_getPentagons:Gm,_getRes0Cells:Td,_getResolution:tf,_greatCircleDistanceKm:Oo,_greatCircleDistanceM:J1,_greatCircleDistanceRads:K1,_gridDisk:tr,_gridDiskDistances:dl,_gridDistance:Wm,_gridPathCells:sb,_gridPathCellsSize:Jl,_gridRingUnsafe:Ns,_i64Add:Qt,_i64Subtract:fs,_isPentagon:Ni,_isResClassIII:Im,_isValidCell:Dm,_isValidDirectedEdge:JT,_isValidVertex:Hc,_latLngToCell:Fm,_llvm_ctlz_i64:LA,_llvm_maxnum_f64:Od,_llvm_minnum_f64:Id,_llvm_round_f64:qc,_localIjToCell:Va,_malloc:_l,_maxFaceCount:Z1,_maxGridDiskSize:Uc,_maxPolygonToCellsSize:pl,_maxPolygonToCellsSizeExperimental:EA,_memcpy:eh,_memset:Sl,_originToDirectedEdges:t3,_pentagonCount:zm,_polygonToCells:k1,_polygonToCellsExperimental:lf,_readInt64AsDoubleFromPointer:Qm,_res0CellCount:I1,_round:DA,_sbrk:sc,_sizeOfCellBoundary:la,_sizeOfCoordIJ:xl,_sizeOfGeoLoop:Br,_sizeOfGeoPolygon:Bi,_sizeOfH3Index:Ym,_sizeOfLatLng:$m,_sizeOfLinkedGeoPolygon:Yu,_uncompactCells:Q1,_uncompactCellsSize:Om,_vertexToLatLng:ic,establishStackSpace:Ws,stackAlloc:Dn,stackRestore:Pi,stackSave:Ir}}(zt,zn,V);e.___divdi3=Ae.___divdi3,e.___muldi3=Ae.___muldi3,e.___remdi3=Ae.___remdi3,e.___uremdi3=Ae.___uremdi3,e._areNeighborCells=Ae._areNeighborCells,e._bitshift64Ashr=Ae._bitshift64Ashr,e._bitshift64Lshr=Ae._bitshift64Lshr,e._bitshift64Shl=Ae._bitshift64Shl,e._calloc=Ae._calloc,e._cellAreaKm2=Ae._cellAreaKm2,e._cellAreaM2=Ae._cellAreaM2,e._cellAreaRads2=Ae._cellAreaRads2,e._cellToBoundary=Ae._cellToBoundary,e._cellToCenterChild=Ae._cellToCenterChild,e._cellToChildPos=Ae._cellToChildPos,e._cellToChildren=Ae._cellToChildren,e._cellToChildrenSize=Ae._cellToChildrenSize,e._cellToLatLng=Ae._cellToLatLng,e._cellToLocalIj=Ae._cellToLocalIj,e._cellToParent=Ae._cellToParent,e._cellToVertex=Ae._cellToVertex,e._cellToVertexes=Ae._cellToVertexes,e._cellsToDirectedEdge=Ae._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Ae._cellsToLinkedMultiPolygon,e._childPosToCell=Ae._childPosToCell,e._compactCells=Ae._compactCells,e._destroyLinkedMultiPolygon=Ae._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Ae._directedEdgeToBoundary,e._directedEdgeToCells=Ae._directedEdgeToCells,e._edgeLengthKm=Ae._edgeLengthKm,e._edgeLengthM=Ae._edgeLengthM,e._edgeLengthRads=Ae._edgeLengthRads;var Ht=e._emscripten_replace_memory=Ae._emscripten_replace_memory;e._free=Ae._free,e._getBaseCellNumber=Ae._getBaseCellNumber,e._getDirectedEdgeDestination=Ae._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Ae._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Ae._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Ae._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Ae._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Ae._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Ae._getIcosahedronFaces,e._getNumCells=Ae._getNumCells,e._getPentagons=Ae._getPentagons,e._getRes0Cells=Ae._getRes0Cells,e._getResolution=Ae._getResolution,e._greatCircleDistanceKm=Ae._greatCircleDistanceKm,e._greatCircleDistanceM=Ae._greatCircleDistanceM,e._greatCircleDistanceRads=Ae._greatCircleDistanceRads,e._gridDisk=Ae._gridDisk,e._gridDiskDistances=Ae._gridDiskDistances,e._gridDistance=Ae._gridDistance,e._gridPathCells=Ae._gridPathCells,e._gridPathCellsSize=Ae._gridPathCellsSize,e._gridRingUnsafe=Ae._gridRingUnsafe,e._i64Add=Ae._i64Add,e._i64Subtract=Ae._i64Subtract,e._isPentagon=Ae._isPentagon,e._isResClassIII=Ae._isResClassIII,e._isValidCell=Ae._isValidCell,e._isValidDirectedEdge=Ae._isValidDirectedEdge,e._isValidVertex=Ae._isValidVertex,e._latLngToCell=Ae._latLngToCell,e._llvm_ctlz_i64=Ae._llvm_ctlz_i64,e._llvm_maxnum_f64=Ae._llvm_maxnum_f64,e._llvm_minnum_f64=Ae._llvm_minnum_f64,e._llvm_round_f64=Ae._llvm_round_f64,e._localIjToCell=Ae._localIjToCell,e._malloc=Ae._malloc,e._maxFaceCount=Ae._maxFaceCount,e._maxGridDiskSize=Ae._maxGridDiskSize,e._maxPolygonToCellsSize=Ae._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=Ae._maxPolygonToCellsSizeExperimental,e._memcpy=Ae._memcpy,e._memset=Ae._memset,e._originToDirectedEdges=Ae._originToDirectedEdges,e._pentagonCount=Ae._pentagonCount,e._polygonToCells=Ae._polygonToCells,e._polygonToCellsExperimental=Ae._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=Ae._readInt64AsDoubleFromPointer,e._res0CellCount=Ae._res0CellCount,e._round=Ae._round,e._sbrk=Ae._sbrk,e._sizeOfCellBoundary=Ae._sizeOfCellBoundary,e._sizeOfCoordIJ=Ae._sizeOfCoordIJ,e._sizeOfGeoLoop=Ae._sizeOfGeoLoop,e._sizeOfGeoPolygon=Ae._sizeOfGeoPolygon,e._sizeOfH3Index=Ae._sizeOfH3Index,e._sizeOfLatLng=Ae._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Ae._sizeOfLinkedGeoPolygon,e._uncompactCells=Ae._uncompactCells,e._uncompactCellsSize=Ae._uncompactCellsSize,e._vertexToLatLng=Ae._vertexToLatLng,e.establishStackSpace=Ae.establishStackSpace;var Mt=e.stackAlloc=Ae.stackAlloc,en=e.stackRestore=Ae.stackRestore,Ot=e.stackSave=Ae.stackSave;if(e.asm=Ae,e.cwrap=P,e.setValue=A,e.getValue=x,kt){be(kt)||(kt=s(kt));{Yt();var ht=function(qe){qe.byteLength&&(qe=new Uint8Array(qe)),X.set(qe,d),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Rt()},tn=function(){a(kt,ht,function(){throw"could not load memory initializer "+kt})},Ln=mn(kt);if(Ln)ht(Ln.buffer);else if(e.memoryInitializerRequest){var Ei=function(){var qe=e.memoryInitializerRequest,st=qe.response;if(qe.status!==200&&qe.status!==0){var St=mn(e.memoryInitializerRequestURL);if(St)st=St.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+qe.status+", retrying "+kt),tn();return}}ht(st)};e.memoryInitializerRequest.response?setTimeout(Ei,0):e.memoryInitializerRequest.addEventListener("load",Ei)}else tn()}}var fi;at=function qe(){fi||Or(),fi||(at=qe)};function Or(qe){if(Ct>0||($e(),Ct>0))return;function st(){fi||(fi=!0,!_&&(Je(),vt(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),pt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),st()},1)):st()}e.run=Or;function Gi(qe){throw e.onAbort&&e.onAbort(qe),qe+="",o(qe),l(qe),_=!0,"abort("+qe+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Gi,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Or(),i}(typeof Ri=="object"?Ri:{}),Qn="number",Fn=Qn,Bv=Qn,Yn=Qn,$n=Qn,Ks=Qn,on=Qn,Uue=[["sizeOfH3Index",Qn],["sizeOfLatLng",Qn],["sizeOfCellBoundary",Qn],["sizeOfGeoLoop",Qn],["sizeOfGeoPolygon",Qn],["sizeOfLinkedGeoPolygon",Qn],["sizeOfCoordIJ",Qn],["readInt64AsDoubleFromPointer",Qn],["isValidCell",Bv,[Yn,$n]],["latLngToCell",Fn,[Qn,Qn,Ks,on]],["cellToLatLng",Fn,[Yn,$n,on]],["cellToBoundary",Fn,[Yn,$n,on]],["maxGridDiskSize",Fn,[Qn,on]],["gridDisk",Fn,[Yn,$n,Qn,on]],["gridDiskDistances",Fn,[Yn,$n,Qn,on,on]],["gridRingUnsafe",Fn,[Yn,$n,Qn,on]],["maxPolygonToCellsSize",Fn,[on,Ks,Qn,on]],["polygonToCells",Fn,[on,Ks,Qn,on]],["maxPolygonToCellsSizeExperimental",Fn,[on,Ks,Qn,on]],["polygonToCellsExperimental",Fn,[on,Ks,Qn,Qn,Qn,on]],["cellsToLinkedMultiPolygon",Fn,[on,Qn,on]],["destroyLinkedMultiPolygon",null,[on]],["compactCells",Fn,[on,on,Qn,Qn]],["uncompactCells",Fn,[on,Qn,Qn,on,Qn,Ks]],["uncompactCellsSize",Fn,[on,Qn,Qn,Ks,on]],["isPentagon",Bv,[Yn,$n]],["isResClassIII",Bv,[Yn,$n]],["getBaseCellNumber",Qn,[Yn,$n]],["getResolution",Qn,[Yn,$n]],["maxFaceCount",Fn,[Yn,$n,on]],["getIcosahedronFaces",Fn,[Yn,$n,on]],["cellToParent",Fn,[Yn,$n,Ks,on]],["cellToChildren",Fn,[Yn,$n,Ks,on]],["cellToCenterChild",Fn,[Yn,$n,Ks,on]],["cellToChildrenSize",Fn,[Yn,$n,Ks,on]],["cellToChildPos",Fn,[Yn,$n,Ks,on]],["childPosToCell",Fn,[Qn,Qn,Yn,$n,Ks,on]],["areNeighborCells",Fn,[Yn,$n,Yn,$n,on]],["cellsToDirectedEdge",Fn,[Yn,$n,Yn,$n,on]],["getDirectedEdgeOrigin",Fn,[Yn,$n,on]],["getDirectedEdgeDestination",Fn,[Yn,$n,on]],["isValidDirectedEdge",Bv,[Yn,$n]],["directedEdgeToCells",Fn,[Yn,$n,on]],["originToDirectedEdges",Fn,[Yn,$n,on]],["directedEdgeToBoundary",Fn,[Yn,$n,on]],["gridDistance",Fn,[Yn,$n,Yn,$n,on]],["gridPathCells",Fn,[Yn,$n,Yn,$n,on]],["gridPathCellsSize",Fn,[Yn,$n,Yn,$n,on]],["cellToLocalIj",Fn,[Yn,$n,Yn,$n,Qn,on]],["localIjToCell",Fn,[Yn,$n,on,Qn,on]],["getHexagonAreaAvgM2",Fn,[Ks,on]],["getHexagonAreaAvgKm2",Fn,[Ks,on]],["getHexagonEdgeLengthAvgM",Fn,[Ks,on]],["getHexagonEdgeLengthAvgKm",Fn,[Ks,on]],["greatCircleDistanceM",Qn,[on,on]],["greatCircleDistanceKm",Qn,[on,on]],["greatCircleDistanceRads",Qn,[on,on]],["cellAreaM2",Fn,[Yn,$n,on]],["cellAreaKm2",Fn,[Yn,$n,on]],["cellAreaRads2",Fn,[Yn,$n,on]],["edgeLengthM",Fn,[Yn,$n,on]],["edgeLengthKm",Fn,[Yn,$n,on]],["edgeLengthRads",Fn,[Yn,$n,on]],["getNumCells",Fn,[Ks,on]],["getRes0Cells",Fn,[on]],["res0CellCount",Qn],["getPentagons",Fn,[Qn,on]],["pentagonCount",Qn],["cellToVertex",Fn,[Yn,$n,Qn,on]],["cellToVertexes",Fn,[Yn,$n,on]],["vertexToLatLng",Fn,[Yn,$n,on]],["isValidVertex",Bv,[Yn,$n]]],zue=0,Gue=1,Vue=2,Hue=3,Sz=4,que=5,Wue=6,jue=7,Xue=8,Yue=9,$ue=10,Que=11,Zue=12,Kue=13,Jue=14,ehe=15,Sa={};Sa[zue]="Success";Sa[Gue]="The operation failed but a more specific error is not available";Sa[Vue]="Argument was outside of acceptable range";Sa[Hue]="Latitude or longitude arguments were outside of acceptable range";Sa[Sz]="Resolution argument was outside of acceptable range";Sa[que]="Cell argument was not valid";Sa[Wue]="Directed edge argument was not valid";Sa[jue]="Undirected edge argument was not valid";Sa[Xue]="Vertex argument was not valid";Sa[Yue]="Pentagon distortion was encountered";Sa[$ue]="Duplicate input";Sa[Que]="Cell arguments were not neighbors";Sa[Zue]="Cell arguments had incompatible resolutions";Sa[Kue]="Memory allocation failed";Sa[Jue]="Bounds of provided memory were insufficient";Sa[ehe]="Mode or flags argument was not valid";var the=1e3,Tz=1001,Mz=1002,WS={};WS[the]="Unknown unit";WS[Tz]="Array length out of bounds";WS[Mz]="Got unexpected null value for H3 index";var nhe="Unknown error";function Ez(i,e,t){var n=t&&"value"in t,r=new Error((i[e]||nhe)+" (code: "+e+(n?", value: "+t.value:"")+")");return r.code=e,r}function Cz(i,e){var t=arguments.length===2?{value:e}:{};return Ez(Sa,i,t)}function Rz(i,e){var t=arguments.length===2?{value:e}:{};return Ez(WS,i,t)}function mx(i){if(i!==0)throw Cz(i)}var Co={};Uue.forEach(function(e){Co[e[0]]=Ri.cwrap.apply(Ri,e)});var U0=16,vx=4,Ig=8,ihe=8,Ww=Co.sizeOfH3Index(),n8=Co.sizeOfLatLng(),rhe=Co.sizeOfCellBoundary(),she=Co.sizeOfGeoPolygon(),Cy=Co.sizeOfGeoLoop();Co.sizeOfLinkedGeoPolygon();Co.sizeOfCoordIJ();function ahe(i){if(typeof i!="number"||i<0||i>15||Math.floor(i)!==i)throw Cz(Sz,i);return i}function ohe(i){if(!i)throw Rz(Mz);return i}var lhe=Math.pow(2,32)-1;function che(i){if(i>lhe)throw Rz(Tz,i);return i}var uhe=/[^0-9a-fA-F]/;function Pz(i){if(Array.isArray(i)&&i.length===2&&Number.isInteger(i[0])&&Number.isInteger(i[1]))return i;if(typeof i!="string"||uhe.test(i))return[0,0];var e=parseInt(i.substring(0,i.length-8),U0),t=parseInt(i.substring(i.length-8),U0);return[t,e]}function V7(i){if(i>=0)return i.toString(U0);i=i&2147483647;var e=Nz(8,i.toString(U0)),t=(parseInt(e[0],U0)+8).toString(U0);return e=t+e.substring(1),e}function hhe(i,e){return V7(e)+Nz(8,V7(i))}function Nz(i,e){for(var t=i-e.length,n="",r=0;r<t;r++)n+="0";return n=n+e,n}function H7(i,e,t){for(var n=i.length,r=Ri._calloc(n,n8),s=t?1:0,a=t?0:1,o=0;o<n*2;o+=2)Ri.HEAPF64.set([i[o/2][s],i[o/2][a]].map(Oz),r/Ig+o);return Ri.HEAPU32.set([n,r],e/vx),e}function fhe(i,e){var t=i.length-1,n=Ri._calloc(she),r=0,s=r+Cy,a=s+vx;H7(i[0],n+r,e);var o;if(t>0){o=Ri._calloc(t,Cy);for(var l=0;l<t;l++)H7(i[l+1],o+Cy*l,e)}return Ri.setValue(n+s,t,"i32"),Ri.setValue(n+a,o,"i32"),n}function dhe(i){var e=0,t=e+Cy,n=t+vx,r=vx;Ri._free(Ri.getValue(i+e+r,"i8*"));var s=Ri.getValue(i+t,"i32");if(s>0){for(var a=Ri.getValue(i+n,"i32"),o=0;o<s;o++)Ri._free(Ri.getValue(a+Cy*o+r,"i8*"));Ri._free(a)}Ri._free(i)}function Lz(i,e){e===void 0&&(e=0);var t=Ri.getValue(i+Ww*e,"i32"),n=Ri.getValue(i+Ww*e+vx,"i32");return n?hhe(t,n):null}function phe(i){return Co.readInt64AsDoubleFromPointer(i)}function Ahe(i,e){for(var t=[],n=0;n<e;n++){var r=Lz(i,n);r!==null&&t.push(r)}return t}function jw(i){return xhe(Ri.getValue(i,"double"))}function ghe(i){return[jw(i),jw(i+Ig)]}function mhe(i){return[jw(i+Ig),jw(i)]}function vhe(i,e,t){for(var n=Ri.getValue(i,"i32"),r=i+Ig,s=[],a=mhe,o=0;o<n*2;o+=2)s.push(a(r+Ig*o));return s.push(s[0]),s}function yhe(i,e,t){var n=Ri._malloc(n8);Ri.HEAPF64.set([i,e].map(Oz),n/Ig);var r=Ri._malloc(Ww);try{return mx(Co.latLngToCell(n,t,r)),ohe(Lz(r))}finally{Ri._free(r),Ri._free(n)}}function Dz(i){var e=Ri._malloc(n8),t=Pz(i),n=t[0],r=t[1];try{return mx(Co.cellToLatLng(n,r,e)),ghe(e)}finally{Ri._free(e)}}function kz(i,e){var t=Ri._malloc(rhe),n=Pz(i),r=n[0],s=n[1];try{return mx(Co.cellToBoundary(r,s,t)),vhe(t,e,e)}finally{Ri._free(t)}}function q7(i,e,t){if(ahe(e),t=!!t,i.length===0||i[0].length===0)return[];var n=typeof i[0][0]=="number"?[i]:i,r=fhe(n,t),s=Ri._malloc(ihe);try{mx(Co.maxPolygonToCellsSize(r,e,0,s));var a=che(phe(s)),o=Ri._calloc(a,Ww);try{return mx(Co.polygonToCells(r,e,0,o)),Ahe(o,a)}finally{Ri._free(o)}}finally{Ri._free(s),dhe(r)}}function Oz(i){return i*Math.PI/180}function xhe(i){return i*180/Math.PI}function bhe(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _he=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class whe{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=_he,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const t=e.getMRT();return t!==null&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:r,object:s}=e;if(t={material:this.getMaterialData(r),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:a,height:o}=e.context;t.bufferWidth=a,t.bufferHeight=o}this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const r=e[n];t[n]={version:r.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.overrideNodes.modelViewMatrix!==null||e.renderer.overrideNodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const r=e[n];r!=null&&(typeof r=="object"&&r.clone!==void 0?r.isTexture===!0?t[n]={id:r.id,version:r.version}:t[n]=r.clone():t[n]=r)}return t}equals(e){const{object:t,material:n,geometry:r}=e,s=this.getRenderObjectData(e);if(s.worldMatrix.equals(t.matrixWorld)!==!0)return s.worldMatrix.copy(t.matrixWorld),!1;const a=s.material;for(const _ in a){const S=a[_],w=n[_];if(S.equals!==void 0){if(S.equals(w)===!1)return S.copy(w),!1}else if(w.isTexture===!0){if(S.id!==w.id||S.version!==w.version)return S.id=w.id,S.version=w.version,!1}else if(S!==w)return a[_]=w,!1}if(a.transmission>0){const{width:_,height:S}=e.context;if(s.bufferWidth!==_||s.bufferHeight!==S)return s.bufferWidth=_,s.bufferHeight=S,!1}const o=s.geometry,l=r.attributes,c=o.attributes,u=Object.keys(c),h=Object.keys(l);if(o.id!==r.id)return o.id=r.id,!1;if(u.length!==h.length)return s.geometry.attributes=this.getAttributesData(l),!1;for(const _ of u){const S=c[_],w=l[_];if(w===void 0)return delete c[_],!1;if(S.version!==w.version)return S.version=w.version,!1}const d=r.index,A=o.indexVersion,x=d?d.version:null;if(A!==x)return o.indexVersion=x,!1;if(o.drawRange.start!==r.drawRange.start||o.drawRange.count!==r.drawRange.count)return o.drawRange.start=r.drawRange.start,o.drawRange.count=r.drawRange.count,!1;if(s.morphTargetInfluences){let _=!1;for(let S=0;S<s.morphTargetInfluences.length;S++)s.morphTargetInfluences[S]!==t.morphTargetInfluences[S]&&(_=!0);if(_)return!0}return s.center&&s.center.equals(t.center)===!1?(s.center.copy(t.center),!0):(e.bundle!==null&&(s.version=e.bundle.version),!0)}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const r=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return r||s?!1:this.equals(e)!==!0}}function yx(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let r=0,s;r<i.length;r++)s=i[r],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const Iz=i=>yx(i),jS=i=>yx(i),Xw=(...i)=>yx(i);function Bz(i,e=!1){const t=[];i.isNode===!0&&(t.push(i.id),i=i.getSelf());for(const{property:n,childNode:r}of Yw(i))t.push(yx(n.slice(0,-4)),r.getCacheKey(e));return yx(t)}function*Yw(i,e=!1){for(const t in i){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let r=0;r<n.length;r++){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(typeof n=="object")for(const r in n){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}}}const She=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),W7=new WeakMap;function Fz(i){return She.get(i)}function $w(i){if(/[iu]?vec\d/.test(i))return i.startsWith("ivec")?Int32Array:i.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(i)||/float/.test(i))return Float32Array;if(/uint/.test(i))return Uint32Array;if(/int/.test(i))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${i}`)}function Uz(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 9;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function The(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 12;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function Mhe(i){if(/float|int|uint/.test(i))return 4;if(/vec2/.test(i))return 8;if(/vec3/.test(i)||/vec4/.test(i))return 16;if(/mat2/.test(i))return 8;if(/mat3/.test(i))return 48;if(/mat4/.test(i))return 64;console.error("THREE.TSL: Unsupported type:",i)}function Qf(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function zz(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new un(...e):t==="vec2"?new lt(...e):t==="vec3"?new pe(...e):t==="vec4"?new Cn(...e):t==="mat2"?new zS(...e):t==="mat3"?new Kn(...e):t==="mat4"?new Un(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?Hz(e[0]):null}function Gz(i){let e=W7.get(i);return e===void 0&&(e={},W7.set(i,e)),e}function Vz(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function Hz(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}const my={VERTEX:"vertex",FRAGMENT:"fragment"},ai={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},Ehe={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},Ia={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},qz=["fragment","vertex"],uR=["setup","analyze","generate"],hR=[...qz,"compute"],iA=["x","y","z","w"],Che={analyze:"setup",generate:"analyze"};let Rhe=0,Pn=class extends Nu{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=ai.NONE,this.updateBeforeType=ai.NONE,this.updateAfterType=ai.NONE,this.uuid=Eg.generateUUID(),this.version=0,this.global=!1,this.parents=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:Rhe++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,ai.FRAME)}onRenderUpdate(e){return this.onUpdate(e,ai.RENDER)}onObjectUpdate(e){return this.onUpdate(e,ai.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of Yw(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=Xw(Bz(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())t["node"+n++]=r;return t.outputNode||null}analyze(e,t=null){const n=e.increaseUsage(this);if(this.parents===!0){const r=e.getDataFromNode(this,"any");r.stages=r.stages||{},r.stages[e.shaderStage]=r.stages[e.shaderStage]||[],r.stages[e.shaderStage].push(t)}if(n===1){const r=e.getNodeProperties(this);for(const s of Object.values(r))s&&s.isNode===!0&&s.build(e,this)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);const r=e.getDataFromNode(this);r.buildStages=r.buildStages||{},r.buildStages[e.buildStage]=!0;const s=Che[e.buildStage];if(s&&r.buildStages[s]!==!0){const l=e.getBuildStage();e.setBuildStage(s),this.build(e),e.setBuildStage(l)}e.addNode(this),e.addChain(this);let a=null;const o=e.getBuildStage();if(o==="setup"){this.updateReference(e);const l=e.getNodeProperties(this);if(l.initialized!==!0){l.initialized=!0,l.outputNode=this.setup(e)||l.outputNode||null;for(const c of Object.values(l))if(c&&c.isNode===!0){if(c.parents===!0){const u=e.getNodeProperties(c);u.parents=u.parents||[],u.parents.push(this)}c.build(e)}}a=l.outputNode}else if(o==="analyze")this.analyze(e,t);else if(o==="generate")if(this.generate.length===1){const c=this.getNodeType(e),u=e.getDataFromNode(this);a=u.snippet,a===void 0?u.generated===void 0?(u.generated=!0,a=this.generate(e)||"",u.snippet=a):(console.warn("THREE.Node: Recursion detected.",this),a=""):u.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,c,t)}else a=this.generate(e,t)||"";return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return Yw(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:r,index:s,childNode:a}of t)s!==void 0?(n[r]===void 0&&(n[r]=Number.isInteger(s)?[]:{}),n[r][s]=a.toJSON(e.meta).uuid):n[r]=a.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const r=[];for(const s of e.inputNodes[n])r.push(t[s]);this[n]=r}else if(typeof e.inputNodes[n]=="object"){const r={};for(const s in e.inputNodes[n]){const a=e.inputNodes[n][s];r[s]=t[a]}this[n]=r}else{const r=e.inputNodes[n];this[n]=t[r]}}}toJSON(e){const{uuid:t,type:n}=this,r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},r!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}if(r){const o=a(e.textures),l=a(e.images),c=a(e.nodes);o.length>0&&(s.textures=o),l.length>0&&(s.images=l),c.length>0&&(s.nodes=c)}return s}};class rA extends Pn{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),r=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${r} ]`}}class Wz extends Pn{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const r of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(r))&&(n=r);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,r=this.getNodeType(e),s=n.build(e,r);return e.format(s,r,t)}}class us extends Pn{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const r=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,r,t);if(r!=="void"&&t!=="void"&&this.hasDependencies(e)){const a=super.build(e,r),o=e.getVarFromNode(this,null,r),l=e.getPropertyName(o);return e.addLineFlowCode(`${l} = ${a}`,this),s.snippet=a,s.propertyName=l,e.format(s.propertyName,r,t)}}return super.build(e,t)}}class Phe extends us{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),r=e.getTypeLength(n),s=this.nodes,a=e.getComponentType(n),o=[];let l=0;for(const u of s){if(l>=r){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let h=u.getNodeType(e),d=e.getTypeLength(h),A;l+d>r&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),d=r-l,h=e.getTypeFromLength(d)),l+=d,A=u.build(e,h);const x=e.getComponentType(h);x!==a&&(A=e.format(A,x,a)),o.push(A)}const c=`${e.getType(n)}( ${o.join(", ")} )`;return e.format(c,n,t)}}const Nhe=iA.join("");class fR extends Pn{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(iA.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,r=e.getTypeLength(n.getNodeType(e));let s=null;if(r>1){let a=null;this.getVectorLength()>=r&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=n.build(e,a);this.components.length===r&&this.components===Nhe.slice(0,this.components.length)?s=e.format(l,a,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class Lhe extends us{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:r}=this,s=this.getNodeType(e),a=e.getComponentType(r.getNodeType(e)),o=e.getTypeFromLength(n.length,a),l=r.build(e,o),c=t.build(e,s),u=e.getTypeLength(s),h=[];for(let d=0;d<u;d++){const A=iA[d];A===n[0]?(h.push(l),d+=n.length-1):h.push(c+"."+A)}return`${e.getType(s)}( ${h.join(", ")} )`}}class Dhe extends us{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,r=this.getNodeType(e),s=n.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+s,this);const l=e.getTypeLength(r),c=[];let u=0;for(let h=0;h<l;h++){const d=iA[h];d===t[u]?(c.push("1.0 - "+(o+"."+d)),u++):c.push(o+"."+d)}return`${e.getType(r)}( ${c.join(", ")} )`}}class i8 extends Pn{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Qf(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Qf(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=Vz(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?zz(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const j7=/float|u?int/;class Fc extends i8{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return j7.test(n)&&j7.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class khe extends Pn{static get type(){return"MemberNode"}constructor(e,t){super(),this.node=e,this.property=t,this.isMemberNode=!0}getNodeType(e){return this.node.getMemberType(e,this.property)}generate(e){return this.node.build(e)+"."+this.property}}let $p=null;const z0=new Map;function it(i,e){if(z0.has(i)){console.warn(`THREE.TSL: Redefinition of method chaining '${i}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${i} is not a function`);z0.set(i,e)}const jz=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),X7=i=>jz(i).split("").sort().join(""),Xz={setup(i,e){const t=e.shift();return i(r1(t),...e)},get(i,e,t){if(typeof e=="string"&&i[e]===void 0){if(i.isStackNode!==!0&&e==="assign")return(...n)=>($p.assign(t,...n),t);if(z0.has(e)){const n=z0.get(e);return i.isStackNode?(...r)=>t.add(n(...r)):(...r)=>n(t,...r)}else{if(e==="self")return i;if(e.endsWith("Assign")&&z0.has(e.slice(0,e.length-6))){const n=z0.get(e.slice(0,e.length-6));return i.isStackNode?(...r)=>t.assign(r[0],n(...r)):(...r)=>t.assign(n(t,...r))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=jz(e),rt(new fR(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=X7(e.slice(3).toLowerCase()),n=>rt(new Lhe(i,e,rt(n)));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=X7(e.slice(4).toLowerCase()),()=>rt(new Dhe(rt(i),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),rt(new fR(i,e));if(/^\d+$/.test(e)===!0)return rt(new rA(t,new Fc(Number(e),"uint")));if(/^get$/.test(e)===!0)return n=>rt(new khe(t,n))}}}return Reflect.get(i,e,t)},set(i,e,t,n){return typeof e=="string"&&i[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(n[e].assign(t),!0):Reflect.set(i,e,t,n)}},CE=new WeakMap,Y7=new WeakMap,Ohe=function(i,e=null){const t=Qf(i);if(t==="node"){let n=CE.get(i);return n===void 0&&(n=new Proxy(i,Xz),CE.set(i,n),CE.set(n,n)),n}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return rt(dR(i,e));if(t==="shader")return ke(i)}return i},Ihe=function(i,e=null){for(const t in i)i[t]=rt(i[t],e);return i},Bhe=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=rt(i[n],e);return i},Fhe=function(i,e=null,t=null,n=null){const r=u=>rt(n!==null?Object.assign(u,n):u);let s,a=e,o,l;function c(u){let h;return a?h=/[a-z]/i.test(a)?a+"()":a:h=i.type,o!==void 0&&u.length<o?(console.error(`THREE.TSL: "${h}" parameter length is less than minimum required.`),u.concat(new Array(o-u.length).fill(0))):l!==void 0&&u.length>l?(console.error(`THREE.TSL: "${h}" parameter length exceeds limit.`),u.slice(0,l)):u}return e===null?s=(...u)=>r(new i(...Dp(c(u)))):t!==null?(t=rt(t),s=(...u)=>r(new i(e,...Dp(c(u)),t))):s=(...u)=>r(new i(e,...Dp(c(u)))),s.setParameterLength=(...u)=>(u.length===1?o=l=u[0]:u.length===2&&([o,l]=u),s),s.setName=u=>(a=u,s),s},Uhe=function(i,...e){return rt(new i(...Dp(e)))};class zhe extends Pn{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,inputNodes:n}=this,r=e.getNodeProperties(t),s=t.namespace&&t.namespace===e.namespace?e.getNamespace("once"):"once";if(r[s])return r[s];let a=null;if(t.layout){let o=Y7.get(e.constructor);o===void 0&&(o=new WeakMap,Y7.set(e.constructor,o));let l=o.get(t);l===void 0&&(l=rt(e.buildFunctionNode(t)),o.set(t,l)),e.addInclude(l),a=rt(l.call(n))}else{const o=t.jsFunc,l=n!==null||o.length>1?o(n||[],e):o(e);a=rt(l)}return t.once&&(r[s]=a),a}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const t=e.getNodeProperties(this),n=e.getOutputNamespace();return t[n]=t[n]||this.setupOutput(e),t[n]}build(e,t=null){let n=null;const r=e.getBuildStage(),s=e.getNodeProperties(this),a=e.getOutputNamespace(),o=this.getOutputNode(e);if(r==="setup"){const l=e.getNamespace("initialized");s[l]!==!0&&(s[l]=!0,s[a]=this.getOutputNode(e),s[a].build(e)),n=s[a]}else r==="analyze"?o.build(e,t):r==="generate"&&(n=o.build(e,t)||"");return n}}class Ghe extends Pn{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1,this.namespace=null}setLayout(e){return this.layout=e,this}call(e=null){return r1(e),rt(new zhe(this,e))}setup(){return this.call()}}const Vhe=[!1,!0],Hhe=[0,1,2,3],qhe=[-1,-2],Yz=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],r8=new Map;for(const i of Vhe)r8.set(i,new Fc(i));const s8=new Map;for(const i of Hhe)s8.set(i,new Fc(i,"uint"));const a8=new Map([...s8].map(i=>new Fc(i.value,"int")));for(const i of qhe)a8.set(i,new Fc(i,"int"));const XS=new Map([...a8].map(i=>new Fc(i.value)));for(const i of Yz)XS.set(i,new Fc(i));for(const i of Yz)XS.set(-i,new Fc(-i));const YS={bool:r8,uint:s8,ints:a8,float:XS},$7=new Map([...r8,...XS]),dR=(i,e)=>$7.has(i)?$7.get(i):i.isNode===!0?i:new Fc(i,e),Whe=i=>{try{return i.getNodeType()}catch{return}},Cs=function(i,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(r=>typeof r!="object"))&&(t=[zz(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return rt(e.get(t[0]));if(t.length===1){const r=dR(t[0],i);return Whe(r)===i?rt(r):rt(new Wz(r,i))}const n=t.map(r=>dR(r));return rt(new Phe(n,i))}},xx=i=>typeof i=="object"&&i!==null?i.value:i,$z=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function G0(i,e){return new Proxy(new Ghe(i,e),Xz)}const rt=(i,e=null)=>Ohe(i,e),r1=(i,e=null)=>new Ihe(i,e),Dp=(i,e=null)=>new Bhe(i,e),ot=(...i)=>new Fhe(...i),Ft=(...i)=>new Uhe(...i);let jhe=0;const ke=(i,e=null)=>{let t=null;e!==null&&(typeof e=="object"?t=e.return:(typeof e=="string"?t=e:console.error("THREE.TSL: Invalid layout type."),e=null));const n=new G0(i,t),r=(...s)=>{let a;r1(s),s[0]&&(s[0].isNode||Object.getPrototypeOf(s[0])!==Object.prototype)?a=[...s]:a=s[0];const l=n.call(a);return t==="void"&&l.toStack(),l};if(r.shaderNode=n,r.id=n.id,r.getNodeType=(...s)=>n.getNodeType(...s),r.getCacheKey=(...s)=>n.getCacheKey(...s),r.setLayout=s=>(n.setLayout(s),r),r.once=(s=null)=>(n.once=!0,n.namespace=s,r),e!==null){if(typeof e.inputs!="object"){const s={name:"fn"+jhe++,type:t,inputs:[]};for(const a in e)a!=="return"&&s.inputs.push({name:a,type:e[a]});e=s}r.setLayout(e)}return r},bx=i=>{$p=i},o8=()=>$p,ti=(...i)=>$p.If(...i),Xhe=(...i)=>$p.Switch(...i);function $S(i){return $p&&$p.add(i),i}it("toStack",$S);const Qz=new Cs("color"),ve=new Cs("float",YS.float),Se=new Cs("int",YS.ints),Wt=new Cs("uint",YS.uint),wu=new Cs("bool",YS.bool),mt=new Cs("vec2"),Is=new Cs("ivec2"),Zz=new Cs("uvec2"),Kz=new Cs("bvec2"),Re=new Cs("vec3"),Jz=new Cs("ivec3"),cm=new Cs("uvec3"),l8=new Cs("bvec3"),An=new Cs("vec4"),eG=new Cs("ivec4"),tG=new Cs("uvec4"),nG=new Cs("bvec4"),QS=new Cs("mat2"),za=new Cs("mat3"),kp=new Cs("mat4"),Yhe=(i="")=>rt(new Fc(i,"string")),$he=i=>rt(new Fc(i,"ArrayBuffer"));it("toColor",Qz);it("toFloat",ve);it("toInt",Se);it("toUint",Wt);it("toBool",wu);it("toVec2",mt);it("toIVec2",Is);it("toUVec2",Zz);it("toBVec2",Kz);it("toVec3",Re);it("toIVec3",Jz);it("toUVec3",cm);it("toBVec3",l8);it("toVec4",An);it("toIVec4",eG);it("toUVec4",tG);it("toBVec4",nG);it("toMat2",QS);it("toMat3",za);it("toMat4",kp);const iG=ot(rA).setParameterLength(2),rG=(i,e)=>rt(new Wz(rt(i),e)),Qhe=(i,e)=>rt(new fR(rt(i),e));it("element",iG);it("convert",rG);const Zhe=i=>(console.warn("THREE.TSL: append() has been renamed to Stack()."),$S(i));it("append",i=>(console.warn("THREE.TSL: .append() has been renamed to .toStack()."),$S(i)));const Khe=(...i)=>(console.warn("THREE.TSL: tslFn() has been renamed to Fn()."),ke(...i));class $i extends Pn{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0,this.global=!0}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const um=(i,e)=>rt(new $i(i,e)),_x=(i,e)=>rt(new $i(i,e,!0)),Ui=Ft($i,"vec4","DiffuseColor"),pR=Ft($i,"vec3","EmissiveColor"),au=Ft($i,"float","Roughness"),wx=Ft($i,"float","Metalness"),Qw=Ft($i,"float","Clearcoat"),Sx=Ft($i,"float","ClearcoatRoughness"),wp=Ft($i,"vec3","Sheen"),ZS=Ft($i,"float","SheenRoughness"),KS=Ft($i,"float","Iridescence"),c8=Ft($i,"float","IridescenceIOR"),u8=Ft($i,"float","IridescenceThickness"),Zw=Ft($i,"float","AlphaT"),qf=Ft($i,"float","Anisotropy"),Ry=Ft($i,"vec3","AnisotropyT"),Op=Ft($i,"vec3","AnisotropyB"),Ao=Ft($i,"color","SpecularColor"),Tx=Ft($i,"float","SpecularF90"),Kw=Ft($i,"float","Shininess"),eg=Ft($i,"vec4","Output"),U_=Ft($i,"float","dashSize"),AR=Ft($i,"float","gapSize"),Jhe=Ft($i,"float","pointWidth"),Py=Ft($i,"float","IOR"),Jw=Ft($i,"float","Transmission"),h8=Ft($i,"float","Thickness"),f8=Ft($i,"float","AttenuationDistance"),d8=Ft($i,"color","AttenuationColor"),p8=Ft($i,"float","Dispersion");class sG extends Pn{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const aG=i=>new sG(i),JS=(i,e=0)=>new sG(i,!0,e),oG=JS("frame"),En=JS("render"),A8=aG("object");class s1 extends i8{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=A8}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate(r=>{const s=e(r,n);s!==void 0&&(this.value=s)},t)}generate(e,t){const n=this.getNodeType(e),r=this.getUniformHash(e);let s=e.getNodeFromHash(r);s===void 0&&(e.setHashNode(this,r),s=this);const a=s.getInputType(e),o=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.label),l=e.getPropertyName(o);return e.context.label!==void 0&&delete e.context.label,e.format(l,n,t)}}const gn=(i,e)=>{const t=$z(e||i),n=i&&i.isNode===!0?i.node&&i.node.value||i.value:i;return rt(new s1(n,t))};class Q7 extends us{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const lG=(...i)=>{let e;if(i.length===1){const t=i[0];e=new Q7(null,t.length,t)}else{const t=i[0],n=i[1];e=new Q7(t,n)}return rt(e)};it("toArray",(i,e)=>lG(Array(e).fill(i)));class efe extends us{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return iA.join("").slice(0,n)!==t.components}return!1}setup(e){const{targetNode:t,sourceNode:n}=this,r=e.getNodeProperties(this);r.sourceNode=n,r.targetNode=t.context({assign:!0})}generate(e,t){const{targetNode:n,sourceNode:r}=e.getNodeProperties(this),s=this.needsSplitAssign(e),a=n.getNodeType(e),o=n.build(e),l=r.build(e,a),c=r.getNodeType(e),u=e.getDataFromNode(this);let h;if(u.initialized===!0)t!=="void"&&(h=o);else if(s){const d=e.getVarFromNode(this,null,a),A=e.getPropertyName(d);e.addLineFlowCode(`${A} = ${l}`,this);const x=n.node,S=x.node.context({assign:!0}).build(e);for(let w=0;w<x.components.length;w++){const C=x.components[w];e.addLineFlowCode(`${S}.${C} = ${A}[ ${w} ]`,this)}t!=="void"&&(h=o)}else h=`${o} = ${l}`,(t==="void"||c==="void")&&(e.addLineFlowCode(h,this),t!=="void"&&(h=o));return u.initialized=!0,e.format(h,a,t)}}const cG=ot(efe).setParameterLength(2);it("assign",cG);class tfe extends us{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,r=n.getInputs(e),s=this.parameters,a=(l,c)=>{const u=c.type,h=u==="pointer";let d;return h?d="&"+l.build(e):d=l.build(e,u),d};if(Array.isArray(s)){if(s.length>r.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=r.length;else if(s.length<r.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<r.length;)s.push(ve(0));for(let l=0;l<s.length;l++)t.push(a(s[l],r[l]))}else for(const l of r){const c=s[l.name];c!==void 0?t.push(a(c,l)):(console.error(`THREE.TSL: Input '${l.name}' not found in 'Fn()'.`),t.push(a(ve(0),l)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const uG=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Dp(e):r1(e[0]),rt(new tfe(rt(i),e)));it("call",uG);const nfe={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class Hr extends us{static get type(){return"OperatorNode"}constructor(e,t,n,...r){if(super(),r.length>0){let s=new Hr(e,t,n);for(let a=0;a<r.length-1;a++)s=new Hr(e,s,r[a]);t=s,n=r[r.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(nfe[this.op],t)}getNodeType(e){const t=this.op,n=this.aNode,r=this.bNode,s=n.getNodeType(e),a=r?r.getNodeType(e):null;if(s==="void"||a==="void")return"void";if(t==="%")return s;if(t==="~"||t==="&"||t==="|"||t==="^"||t===">>"||t==="<<")return e.getIntegerType(s);if(t==="!"||t==="&&"||t==="||"||t==="^^")return"bool";if(t==="=="||t==="!="||t==="<"||t===">"||t==="<="||t===">="){const o=Math.max(e.getTypeLength(s),e.getTypeLength(a));return o>1?`bvec${o}`:"bool"}else{if(e.isMatrix(s)){if(a==="float")return s;if(e.isVector(a))return e.getVectorFromMatrix(s);if(e.isMatrix(a))return s}else if(e.isMatrix(a)){if(s==="float")return a;if(e.isVector(s))return e.getVectorFromMatrix(a)}return e.getTypeLength(a)>e.getTypeLength(s)?a:s}}generate(e,t){const n=this.op,{aNode:r,bNode:s}=this,a=this.getNodeType(e);let o=null,l=null;a!=="void"?(o=r.getNodeType(e),l=s?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(o)?l=o:e.isVector(l)?o=l:o!==l&&(o=l="float"):n===">>"||n==="<<"?(o=a,l=e.changeComponentType(l,"uint")):n==="%"?(o=a,l=e.isInteger(o)&&e.isInteger(l)?l:o):e.isMatrix(o)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(o):e.isMatrix(l)||(o=l=a):e.isMatrix(l)?o==="float"?o="float":e.isVector(o)?o=e.getVectorFromMatrix(l):o=l=a:o=l=a):o=l=a;const c=r.build(e,o),u=s?s.build(e,l):null,h=e.getFunctionOperator(n);if(t!=="void"){const d=e.renderer.coordinateSystem===eo;if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">=")return d?e.isVector(o)?e.format(`${this.getOperatorMethod(e,t)}( ${c}, ${u} )`,a,t):e.format(`( ${c} ${n} ${u} )`,a,t):e.format(`( ${c} ${n} ${u} )`,a,t);if(n==="%")return e.isInteger(l)?e.format(`( ${c} % ${u} )`,a,t):e.format(`${this.getOperatorMethod(e,a)}( ${c}, ${u} )`,a,t);if(n==="!"||n==="~")return e.format(`(${n}${c})`,o,t);if(h)return e.format(`${h}( ${c}, ${u} )`,a,t);if(e.isMatrix(o)&&l==="float")return e.format(`( ${u} ${n} ${c} )`,a,t);if(o==="float"&&e.isMatrix(l))return e.format(`${c} ${n} ${u}`,a,t);{let A=`( ${c} ${n} ${u} )`;return!d&&a==="bool"&&e.isVector(o)&&e.isVector(l)&&(A=`all${A}`),e.format(A,a,t)}}else if(o!=="void")return h?e.format(`${h}( ${c}, ${u} )`,a,t):e.isMatrix(o)&&l==="float"?e.format(`${u} ${n} ${c}`,a,t):e.format(`${c} ${n} ${u}`,a,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const ms=ot(Hr,"+").setParameterLength(2,1/0).setName("add"),Mi=ot(Hr,"-").setParameterLength(2,1/0).setName("sub"),ei=ot(Hr,"*").setParameterLength(2,1/0).setName("mul"),Wl=ot(Hr,"/").setParameterLength(2,1/0).setName("div"),a1=ot(Hr,"%").setParameterLength(2).setName("mod"),g8=ot(Hr,"==").setParameterLength(2).setName("equal"),hG=ot(Hr,"!=").setParameterLength(2).setName("notEqual"),fG=ot(Hr,"<").setParameterLength(2).setName("lessThan"),m8=ot(Hr,">").setParameterLength(2).setName("greaterThan"),dG=ot(Hr,"<=").setParameterLength(2).setName("lessThanEqual"),pG=ot(Hr,">=").setParameterLength(2).setName("greaterThanEqual"),AG=ot(Hr,"&&").setParameterLength(2,1/0).setName("and"),gG=ot(Hr,"||").setParameterLength(2,1/0).setName("or"),mG=ot(Hr,"!").setParameterLength(1).setName("not"),vG=ot(Hr,"^^").setParameterLength(2).setName("xor"),yG=ot(Hr,"&").setParameterLength(2).setName("bitAnd"),xG=ot(Hr,"~").setParameterLength(2).setName("bitNot"),bG=ot(Hr,"|").setParameterLength(2).setName("bitOr"),_G=ot(Hr,"^").setParameterLength(2).setName("bitXor"),wG=ot(Hr,"<<").setParameterLength(2).setName("shiftLeft"),SG=ot(Hr,">>").setParameterLength(2).setName("shiftRight"),TG=ke(([i])=>(i.addAssign(1),i)),MG=ke(([i])=>(i.subAssign(1),i)),EG=ke(([i])=>{const e=Se(i).toConst();return i.addAssign(1),e}),CG=ke(([i])=>{const e=Se(i).toConst();return i.subAssign(1),e});it("add",ms);it("sub",Mi);it("mul",ei);it("div",Wl);it("mod",a1);it("equal",g8);it("notEqual",hG);it("lessThan",fG);it("greaterThan",m8);it("lessThanEqual",dG);it("greaterThanEqual",pG);it("and",AG);it("or",gG);it("not",mG);it("xor",vG);it("bitAnd",yG);it("bitNot",xG);it("bitOr",bG);it("bitXor",_G);it("shiftLeft",wG);it("shiftRight",SG);it("incrementBefore",TG);it("decrementBefore",MG);it("increment",EG);it("decrement",CG);const RG=(i,e)=>(console.warn('THREE.TSL: "remainder()" is deprecated. Use "mod( int( ... ) )" instead.'),a1(i,e)),PG=(i,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),a1(Se(i),Se(e)));it("remainder",RG);it("modInt",PG);class Ge extends us{static get type(){return"MathNode"}constructor(e,t,n=null,r=null){if(super(),(e===Ge.MAX||e===Ge.MIN)&&arguments.length>3){let s=new Ge(e,t,n);for(let a=2;a<arguments.length-1;a++)s=new Ge(e,s,arguments[a]);t=s,n=arguments[arguments.length-1],r=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=r,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(n)?0:e.getTypeLength(n),o=e.isMatrix(r)?0:e.getTypeLength(r);return s>a&&s>o?t:a>o?n:o>s?r:t}getNodeType(e){const t=this.method;return t===Ge.LENGTH||t===Ge.DISTANCE||t===Ge.DOT?"float":t===Ge.CROSS?"vec3":t===Ge.ALL||t===Ge.ANY?"bool":t===Ge.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:t,bNode:n,method:r}=this;let s=null;if(r===Ge.ONE_MINUS)s=Mi(1,t);else if(r===Ge.RECIPROCAL)s=Wl(1,t);else if(r===Ge.DIFFERENCE)s=_r(Mi(t,n));else if(r===Ge.TRANSFORM_DIRECTION){let a=t,o=n;e.isMatrix(a.getNodeType(e))?o=An(Re(o),0):a=An(Re(a),0);const l=ei(a,o).xyz;s=Bh(l)}return s!==null?s:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let r=this.method;const s=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.coordinateSystem;if(r===Ge.NEGATE)return e.format("( - "+o.build(e,a)+" )",s,t);{const h=[];return r===Ge.CROSS?h.push(o.build(e,s),l.build(e,s)):u===eo&&r===Ge.STEP?h.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":a),l.build(e,a)):u===eo&&(r===Ge.MIN||r===Ge.MAX)?h.push(o.build(e,a),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":a)):r===Ge.REFRACT?h.push(o.build(e,a),l.build(e,a),c.build(e,"float")):r===Ge.MIX?h.push(o.build(e,a),l.build(e,a),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":a)):(u===bu&&r===Ge.ATAN&&l!==null&&(r="atan2"),e.shaderStage!=="fragment"&&(r===Ge.DFDX||r===Ge.DFDY)&&(console.warn(`THREE.TSL: '${r}' is not supported in the ${e.shaderStage} stage.`),r="/*"+r+"*/"),h.push(o.build(e,a)),l!==null&&h.push(l.build(e,a)),c!==null&&h.push(c.build(e,a))),e.format(`${e.getMethod(r,s)}( ${h.join(", ")} )`,s,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Ge.ALL="all";Ge.ANY="any";Ge.RADIANS="radians";Ge.DEGREES="degrees";Ge.EXP="exp";Ge.EXP2="exp2";Ge.LOG="log";Ge.LOG2="log2";Ge.SQRT="sqrt";Ge.INVERSE_SQRT="inversesqrt";Ge.FLOOR="floor";Ge.CEIL="ceil";Ge.NORMALIZE="normalize";Ge.FRACT="fract";Ge.SIN="sin";Ge.COS="cos";Ge.TAN="tan";Ge.ASIN="asin";Ge.ACOS="acos";Ge.ATAN="atan";Ge.ABS="abs";Ge.SIGN="sign";Ge.LENGTH="length";Ge.NEGATE="negate";Ge.ONE_MINUS="oneMinus";Ge.DFDX="dFdx";Ge.DFDY="dFdy";Ge.ROUND="round";Ge.RECIPROCAL="reciprocal";Ge.TRUNC="trunc";Ge.FWIDTH="fwidth";Ge.TRANSPOSE="transpose";Ge.BITCAST="bitcast";Ge.EQUALS="equals";Ge.MIN="min";Ge.MAX="max";Ge.STEP="step";Ge.REFLECT="reflect";Ge.DISTANCE="distance";Ge.DIFFERENCE="difference";Ge.DOT="dot";Ge.CROSS="cross";Ge.POW="pow";Ge.TRANSFORM_DIRECTION="transformDirection";Ge.MIX="mix";Ge.CLAMP="clamp";Ge.REFRACT="refract";Ge.SMOOTHSTEP="smoothstep";Ge.FACEFORWARD="faceforward";const NG=ve(1e-6),ife=ve(1e6),eS=ve(Math.PI),rfe=ve(Math.PI*2),LG=ot(Ge,Ge.ALL).setParameterLength(1),DG=ot(Ge,Ge.ANY).setParameterLength(1),kG=ot(Ge,Ge.RADIANS).setParameterLength(1),OG=ot(Ge,Ge.DEGREES).setParameterLength(1),v8=ot(Ge,Ge.EXP).setParameterLength(1),Bg=ot(Ge,Ge.EXP2).setParameterLength(1),eT=ot(Ge,Ge.LOG).setParameterLength(1),Au=ot(Ge,Ge.LOG2).setParameterLength(1),Du=ot(Ge,Ge.SQRT).setParameterLength(1),y8=ot(Ge,Ge.INVERSE_SQRT).setParameterLength(1),gu=ot(Ge,Ge.FLOOR).setParameterLength(1),tT=ot(Ge,Ge.CEIL).setParameterLength(1),Bh=ot(Ge,Ge.NORMALIZE).setParameterLength(1),jh=ot(Ge,Ge.FRACT).setParameterLength(1),el=ot(Ge,Ge.SIN).setParameterLength(1),mh=ot(Ge,Ge.COS).setParameterLength(1),IG=ot(Ge,Ge.TAN).setParameterLength(1),BG=ot(Ge,Ge.ASIN).setParameterLength(1),x8=ot(Ge,Ge.ACOS).setParameterLength(1),b8=ot(Ge,Ge.ATAN).setParameterLength(1,2),_r=ot(Ge,Ge.ABS).setParameterLength(1),Mx=ot(Ge,Ge.SIGN).setParameterLength(1),mu=ot(Ge,Ge.LENGTH).setParameterLength(1),FG=ot(Ge,Ge.NEGATE).setParameterLength(1),UG=ot(Ge,Ge.ONE_MINUS).setParameterLength(1),_8=ot(Ge,Ge.DFDX).setParameterLength(1),w8=ot(Ge,Ge.DFDY).setParameterLength(1),zG=ot(Ge,Ge.ROUND).setParameterLength(1),GG=ot(Ge,Ge.RECIPROCAL).setParameterLength(1),S8=ot(Ge,Ge.TRUNC).setParameterLength(1),VG=ot(Ge,Ge.FWIDTH).setParameterLength(1),HG=ot(Ge,Ge.TRANSPOSE).setParameterLength(1),sfe=ot(Ge,Ge.BITCAST).setParameterLength(2),qG=(i,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),g8(i,e)),Ro=ot(Ge,Ge.MIN).setParameterLength(2,1/0),Qr=ot(Ge,Ge.MAX).setParameterLength(2,1/0),nT=ot(Ge,Ge.STEP).setParameterLength(2),WG=ot(Ge,Ge.REFLECT).setParameterLength(2),jG=ot(Ge,Ge.DISTANCE).setParameterLength(2),XG=ot(Ge,Ge.DIFFERENCE).setParameterLength(2),md=ot(Ge,Ge.DOT).setParameterLength(2),iT=ot(Ge,Ge.CROSS).setParameterLength(2),Sc=ot(Ge,Ge.POW).setParameterLength(2),T8=ot(Ge,Ge.POW,2).setParameterLength(1),YG=ot(Ge,Ge.POW,3).setParameterLength(1),$G=ot(Ge,Ge.POW,4).setParameterLength(1),QG=ot(Ge,Ge.TRANSFORM_DIRECTION).setParameterLength(2),ZG=i=>ei(Mx(i),Sc(_r(i),1/3)),M8=i=>md(i,i),Xi=ot(Ge,Ge.MIX).setParameterLength(3),Su=(i,e=0,t=1)=>rt(new Ge(Ge.CLAMP,rt(i),rt(e),rt(t))),E8=i=>Su(i),C8=ot(Ge,Ge.REFRACT).setParameterLength(3),Tu=ot(Ge,Ge.SMOOTHSTEP).setParameterLength(3),R8=ot(Ge,Ge.FACEFORWARD).setParameterLength(3),KG=ke(([i])=>{const n=43758.5453,r=md(i.xy,mt(12.9898,78.233)),s=a1(r,eS);return jh(el(s).mul(n))}),JG=(i,e,t)=>Xi(e,t,i),eV=(i,e,t)=>Tu(e,t,i),tV=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),b8(i,e)),afe=R8,ofe=y8;it("all",LG);it("any",DG);it("equals",qG);it("radians",kG);it("degrees",OG);it("exp",v8);it("exp2",Bg);it("log",eT);it("log2",Au);it("sqrt",Du);it("inverseSqrt",y8);it("floor",gu);it("ceil",tT);it("normalize",Bh);it("fract",jh);it("sin",el);it("cos",mh);it("tan",IG);it("asin",BG);it("acos",x8);it("atan",b8);it("abs",_r);it("sign",Mx);it("length",mu);it("lengthSq",M8);it("negate",FG);it("oneMinus",UG);it("dFdx",_8);it("dFdy",w8);it("round",zG);it("reciprocal",GG);it("trunc",S8);it("fwidth",VG);it("atan2",tV);it("min",Ro);it("max",Qr);it("step",nT);it("reflect",WG);it("distance",jG);it("dot",md);it("cross",iT);it("pow",Sc);it("pow2",T8);it("pow3",YG);it("pow4",$G);it("transformDirection",QG);it("mix",JG);it("clamp",Su);it("refract",C8);it("smoothstep",eV);it("faceForward",R8);it("difference",XG);it("saturate",E8);it("cbrt",ZG);it("transpose",HG);it("rand",KG);class lfe extends Pn{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return this.setup(e),this.getNodeType(e);const r=t.getNodeType(e);if(n!==null){const s=n.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(r))return s}return r}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,r!==null&&(e.getDataFromNode(r).parentNodeBlock=s);const a=e.getNodeProperties(this);a.condNode=t,a.ifNode=n.context({nodeBlock:n}),a.elseNode=r?r.context({nodeBlock:r}):null}generate(e,t){const n=this.getNodeType(e),r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{condNode:s,ifNode:a,elseNode:o}=e.getNodeProperties(this),l=e.currentFunctionNode,c=t!=="void",u=c?um(n).build(e):"";r.nodeProperty=u;const h=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${h} ) {

`).addFlowTab();let d=a.build(e,n);if(d&&(c?d=u+" = "+d+";":(d="return "+d+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),d="// "+d))),e.removeFlowTab().addFlowCode(e.tab+"	"+d+`

`+e.tab+"}"),o!==null){e.addFlowCode(` else {

`).addFlowTab();let A=o.build(e,n);A&&(c?A=u+" = "+A+";":(A="return "+A+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),A="// "+A))),e.removeFlowTab().addFlowCode(e.tab+"	"+A+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,n,t)}}const Fs=ot(lfe).setParameterLength(2,3);it("select",Fs);const nV=(...i)=>(console.warn("THREE.TSL: cond() has been renamed to select()."),Fs(...i));it("cond",nV);class iV extends Pn{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e,t);return e.setContext(n),r}}const rT=ot(iV).setParameterLength(1,2),rV=(i,e)=>rT(i,{label:e});it("context",rT);it("label",rV);class z_ extends Pn{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n,this.parents=!0}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:n,readOnly:r}=this,{renderer:s}=e,a=s.backend.isWebGPUBackend===!0;let o=!1,l=!1;r&&(o=e.isDeterministic(t),l=a?r:o);const c=e.getVectorType(this.getNodeType(e)),u=t.build(e,c),h=e.getVarFromNode(this,n,c,void 0,l),d=e.getPropertyName(h);let A=d;if(l)if(a)A=o?`const ${d}`:`let ${d}`;else{const x=e.getArrayCount(t);A=`const ${e.getVar(h.type,d,x)}`}return e.addLineFlowCode(`${A} = ${u}`,this),d}}const P8=ot(z_),sV=(i,e=null)=>P8(i,e).toStack(),aV=(i,e=null)=>P8(i,e,!0).toStack();it("toVar",sV);it("toConst",aV);const oV=i=>(console.warn('TSL: "temp( node )" is deprecated. Use "Var( node )" or "node.toVar()" instead.'),P8(i));it("temp",oV);class cfe extends Pn{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const r=this.name,s=this.getNodeType(e),a=this.interpolationType,o=this.interpolationSampling;t.varying=n=e.getVaryingFromNode(this,r,s,a,o),t.node=this.node}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(my.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(my.VERTEX,this.node)}generate(e){const t=e.getNodeProperties(this),n=this.setupVarying(e);if(t.propertyName===void 0){const r=this.getNodeType(e),s=e.getPropertyName(n,my.VERTEX);e.flowNodeFromShaderStage(my.VERTEX,this.node,r,s),t.propertyName=s}return e.getPropertyName(n)}}const ul=ot(cfe).setParameterLength(1,2),lV=i=>ul(i);it("toVarying",ul);it("toVertexStage",lV);it("varying",(...i)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),ul(...i)));it("vertexStage",(...i)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),ul(...i)));const cV=ke(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return Xi(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),uV=ke(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return Xi(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),N8="WorkingColorSpace",ufe="OutputColorSpace";class L8 extends us{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===N8?qn.workingColorSpace:t===ufe?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),r=this.resolveColorSpace(e,this.target);let s=t;return qn.enabled===!1||n===r||!n||!r||(qn.getTransfer(n)===rn&&(s=An(cV(s.rgb),s.a)),qn.getPrimaries(n)!==qn.getPrimaries(r)&&(s=An(za(qn._getMatrix(new Kn,n,r)).mul(s.rgb),s.a)),qn.getTransfer(r)===rn&&(s=An(uV(s.rgb),s.a))),s}}const hV=(i,e)=>rt(new L8(rt(i),N8,e)),sT=(i,e)=>rt(new L8(rt(i),e,N8)),hfe=(i,e,t)=>rt(new L8(rt(i),e,t));it("workingToColorSpace",hV);it("colorSpaceToWorking",sT);let ffe=class extends rA{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}};class fV extends Pn{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=ai.OBJECT}setGroup(e){return this.group=e,this}element(e){return rt(new ffe(this,rt(e)))}setNodeType(e){const t=gn(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const dfe=(i,e,t)=>rt(new fV(i,e,t));class pfe extends fV{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(En)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const dV=(i,e,t=null)=>rt(new pfe(i,e,t));class Afe extends us{static get type(){return"ToneMappingNode"}constructor(e,t=AV,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return Xw(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===Mo)return t;let r=null;const s=e.renderer.library.getToneMappingFunction(n);return s!==null?r=An(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}const pV=(i,e,t)=>rt(new Afe(i,rt(e),rt(t))),AV=dV("toneMappingExposure","float");it("toneMapping",(i,e,t)=>pV(e,t,i));class gfe extends i8{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=r,this.usage=lw,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),s=this.bufferStride||r,a=this.bufferOffset,o=n.isInterleavedBuffer===!0?n:new T6(n,s),l=new cu(o,r,a);o.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=r,s=r):s=ul(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const o1=(i,e=null,t=0,n=0)=>rt(new gfe(i,e,t,n)),gV=(i,e=null,t=0,n=0)=>o1(i,e,t,n).setUsage(k0),tS=(i,e=null,t=0,n=0)=>o1(i,e,t,n).setInstanced(!0),gR=(i,e=null,t=0,n=0)=>gV(i,e,t,n).setInstanced(!0);it("toAttribute",i=>o1(i.value));class mfe extends Pn{static get type(){return"ComputeNode"}constructor(e,t,n=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=n,this.dispatchCount=0,this.version=1,this.name="",this.updateBeforeType=ai.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}label(e){return this.name=e,this}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let n=t[0];for(let r=1;r<t.length;r++)n*=t[r];this.dispatchCount=Math.ceil(e/n)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.build(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const r=this.computeNode.build(e,"void");r!==""&&e.addLineFlowCode(r,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,t)}}}const mV=(i,e,t)=>rt(new mfe(rt(i),e,t));it("compute",mV);class vfe extends Pn{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const r=this.node.getNodeType(e);return e.setCache(t),r}build(e,...t){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const s=this.node.build(e,...t);return e.setCache(n),s}}const Ny=(i,e)=>rt(new vfe(rt(i),e)),vV=(i,e)=>i.context({namespace:e});it("cache",Ny);class yfe extends Pn{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const yV=ot(yfe).setParameterLength(2);it("bypass",yV);class xV extends Pn{static get type(){return"RemapNode"}constructor(e,t,n,r=ve(0),s=ve(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=r,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:r,outHighNode:s,doClamp:a}=this;let o=e.sub(t).div(n.sub(t));return a===!0&&(o=o.clamp()),o.mul(s.sub(r)).add(r)}}const bV=ot(xV,null,null,{doClamp:!1}).setParameterLength(3,5),_V=ot(xV).setParameterLength(3,5);it("remap",bV);it("remapClamp",_V);class G_ extends Pn{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),r=this.snippet;if(n==="void")e.addLineFlowCode(r,this);else return e.format(r,n,t)}}const Fh=ot(G_).setParameterLength(1,2),wV=i=>(i?Fs(i,Fh("discard")):Fh("discard")).toStack(),xfe=()=>Fh("return").toStack();it("discard",wV);class bfe extends us{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||Mo,r=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Za;return n!==Mo&&(t=t.toneMapping(n)),r!==Za&&r!==qn.workingColorSpace&&(t=t.workingToColorSpace(r)),t}}const SV=(i,e=null,t=null)=>rt(new bfe(rt(i),e,t));it("renderOutput",SV);class _fe extends us{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e),r="--- TSL debug - "+e.shaderStage+" shader ---",s="-".repeat(r.length);let a="";return a+="// #"+r+`#
`,a+=e.flow.code.replace(/^\t/mg,"")+`
`,a+="/* ... */ "+n+` /* ... */
`,a+="// #"+s+`#
`,t!==null?t(e,a):console.log(a),n}}const TV=(i,e=null)=>rt(new _fe(rt(i),e));it("debug",TV);function wfe(i){console.warn("THREE.TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",i)}class MV extends Pn{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),a=e.getTypeFromAttribute(s),o=e.getAttribute(t,a);return e.shaderStage==="vertex"?e.format(o.name,a,n):ul(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Uh=(i,e=null)=>rt(new MV(i,e)),kr=(i=0)=>Uh("uv"+(i>0?i:""),"vec2");class Sfe extends Pn{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),r=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${r} )`,this.getNodeType(e),t)}}const id=ot(Sfe).setParameterLength(1,2);class Tfe extends s1{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=ai.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:r,height:s}=n;this.value=Math.log2(Math.max(r,s))}}}const EV=ot(Tfe).setParameterLength(1),D8=new Ts;class Mu extends s1{static get type(){return"TextureNode"}constructor(e=D8,t=null,n=null,r=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=r,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=ai.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===br?"uvec4":this.value.type===na?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return kr(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=gn(this.value.matrix)),this._matrixUniform.mul(Re(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?ai.OBJECT:ai.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(Se(id(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this,e)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,n,r,s,a,o,l){const c=this.value;let u;return r?u=e.generateTextureLevel(c,t,n,r,a):s?u=e.generateTextureBias(c,t,n,s,a):l?u=e.generateTextureGrad(c,t,n,l,a):o?u=e.generateTextureCompare(c,t,n,o,a):this.sampler===!1?u=e.generateTextureLoad(c,t,n,a):u=e.generateTexture(c,t,n,a),u}generate(e,t){const n=this.value,r=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(t))return s+"_sampler";if(e.isReference(t))return s;{const a=e.getDataFromNode(this);let o=a.propertyName;if(o===void 0){const{uvNode:u,levelNode:h,biasNode:d,compareNode:A,depthNode:x,gradNode:_}=r,S=this.generateUV(e,u),w=h?h.build(e,"float"):null,C=d?d.build(e,"float"):null,P=x?x.build(e,"int"):null,L=A?A.build(e,"float"):null,D=_?[_[0].build(e,"vec2"),_[1].build(e,"vec2")]:null,B=e.getVarFromNode(this);o=e.getPropertyName(B);const k=this.generateSnippet(e,s,S,w,C,P,L,D);e.addLineFlowCode(`${o} = ${k}`,this),a.snippet=k,a.propertyName=o}let l=o;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(l=sT(Fh(l,c),n.colorSpace).setup(e).build(e,c)),e.format(l,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=rt(e),t.referenceNode=this.getSelf(),rt(t)}blur(e){const t=this.clone();t.biasNode=rt(e).mul(EV(t)),t.referenceNode=this.getSelf();const n=t.value;return t.generateMipmaps===!1&&(n&&n.generateMipmaps===!1||n.minFilter===Er||n.magFilter===Er)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),rt(t)}level(e){const t=this.clone();return t.levelNode=rt(e),t.referenceNode=this.getSelf(),rt(t)}size(e){return id(this,e)}bias(e){const t=this.clone();return t.biasNode=rt(e),t.referenceNode=this.getSelf(),rt(t)}compare(e){const t=this.clone();return t.compareNode=rt(e),t.referenceNode=this.getSelf(),rt(t)}grad(e,t){const n=this.clone();return n.gradNode=[rt(e),rt(t)],n.referenceNode=this.getSelf(),rt(n)}depth(e){const t=this.clone();return t.depthNode=rt(e),t.referenceNode=this.getSelf(),rt(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e}}const Mfe=ot(Mu).setParameterLength(1,4).setName("texture"),gi=(i=D8,e=null,t=null,n=null)=>{let r;return i&&i.isTextureNode===!0?(r=rt(i.clone()),r.referenceNode=i.getSelf(),e!==null&&(r.uvNode=rt(e)),t!==null&&(r.levelNode=rt(t)),n!==null&&(r.biasNode=rt(n))):r=Mfe(i,e,t,n),r},Efe=(i=D8)=>gi(i),ts=(...i)=>gi(...i).setSampler(!1),Cfe=i=>(i.isNode===!0?i:gi(i)).convert("sampler"),Rfe=i=>(i.isNode===!0?i:gi(i)).convert("samplerComparison");class k8 extends s1{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const l1=(i,e,t)=>rt(new k8(i,e,t));class Pfe extends rA{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),r=this.node.getPaddedType();return e.format(t,r,n)}}class CV extends k8{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?Qf(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=ai.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let r=0;r<e.length;r++){const s=r*4;t[s]=e[r]}else if(n==="color")for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.r,t[s+1]=a.g,t[s+2]=a.b||0}else if(n==="mat2")for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+3]=a.elements[3]}else if(n==="mat3")for(let r=0;r<e.length;r++){const s=r*16,a=e[r];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+4]=a.elements[3],t[s+5]=a.elements[4],t[s+6]=a.elements[5],t[s+8]=a.elements[6],t[s+9]=a.elements[7],t[s+10]=a.elements[8],t[s+15]=1}else if(n==="mat4")for(let r=0;r<e.length;r++){const s=r*16,a=e[r];for(let o=0;o<a.elements.length;o++)t[s+o]=a.elements[o]}else for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.x,t[s+1]=a.y,t[s+2]=a.z||0,t[s+3]=a.w||0}}setup(e){const t=this.array.length,n=this.elementType;let r=Float32Array;const s=this.paddedType,a=e.getTypeLength(s);return n.charAt(0)==="i"&&(r=Int32Array),n.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*a),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return rt(new Pfe(this,rt(e)))}}const Bl=(i,e)=>rt(new CV(i,e)),Nfe=(i,e)=>(console.warn("THREE.TSL: uniforms() has been renamed to uniformArray()."),rt(new CV(i,e)));class Lfe extends Pn{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const c1=ot(Lfe).setParameterLength(1),aT=gn(0,"uint").label("u_cameraIndex").setGroup(JS("cameraIndex")).toVarying("v_cameraIndex"),jf=gn("float").label("cameraNear").setGroup(En).onRenderUpdate(({camera:i})=>i.near),Xf=gn("float").label("cameraFar").setGroup(En).onRenderUpdate(({camera:i})=>i.far),sA=ke(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrix);e=Bl(t).setGroup(En).label("cameraProjectionMatrices").element(i.isMultiViewCamera?c1("gl_ViewID_OVR"):aT).toVar("cameraProjectionMatrix")}else e=gn("mat4").label("cameraProjectionMatrix").setGroup(En).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),Dfe=ke(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrixInverse);e=Bl(t).setGroup(En).label("cameraProjectionMatricesInverse").element(i.isMultiViewCamera?c1("gl_ViewID_OVR"):aT).toVar("cameraProjectionMatrixInverse")}else e=gn("mat4").label("cameraProjectionMatrixInverse").setGroup(En).onRenderUpdate(({camera:t})=>t.projectionMatrixInverse);return e}).once()(),No=ke(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.matrixWorldInverse);e=Bl(t).setGroup(En).label("cameraViewMatrices").element(i.isMultiViewCamera?c1("gl_ViewID_OVR"):aT).toVar("cameraViewMatrix")}else e=gn("mat4").label("cameraViewMatrix").setGroup(En).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),kfe=gn("mat4").label("cameraWorldMatrix").setGroup(En).onRenderUpdate(({camera:i})=>i.matrixWorld),Ofe=gn("mat3").label("cameraNormalMatrix").setGroup(En).onRenderUpdate(({camera:i})=>i.normalMatrix),RV=gn(new pe).label("cameraPosition").setGroup(En).onRenderUpdate(({camera:i},e)=>e.value.setFromMatrixPosition(i.matrixWorld)),Z7=new Ad;class bi extends Pn{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=ai.OBJECT,this.uniformNode=new s1(null)}getNodeType(){const e=this.scope;if(e===bi.WORLD_MATRIX)return"mat4";if(e===bi.POSITION||e===bi.VIEW_POSITION||e===bi.DIRECTION||e===bi.SCALE)return"vec3";if(e===bi.RADIUS)return"float"}update(e){const t=this.object3d,n=this.uniformNode,r=this.scope;if(r===bi.WORLD_MATRIX)n.value=t.matrixWorld;else if(r===bi.POSITION)n.value=n.value||new pe,n.value.setFromMatrixPosition(t.matrixWorld);else if(r===bi.SCALE)n.value=n.value||new pe,n.value.setFromMatrixScale(t.matrixWorld);else if(r===bi.DIRECTION)n.value=n.value||new pe,t.getWorldDirection(n.value);else if(r===bi.VIEW_POSITION){const s=e.camera;n.value=n.value||new pe,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}else if(r===bi.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),Z7.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),n.value=Z7.radius}}generate(e){const t=this.scope;return t===bi.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===bi.POSITION||t===bi.VIEW_POSITION||t===bi.DIRECTION||t===bi.SCALE?this.uniformNode.nodeType="vec3":t===bi.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}bi.WORLD_MATRIX="worldMatrix";bi.POSITION="position";bi.SCALE="scale";bi.VIEW_POSITION="viewPosition";bi.DIRECTION="direction";bi.RADIUS="radius";const Ife=ot(bi,bi.DIRECTION).setParameterLength(1),Bfe=ot(bi,bi.WORLD_MATRIX).setParameterLength(1),PV=ot(bi,bi.POSITION).setParameterLength(1),Ffe=ot(bi,bi.SCALE).setParameterLength(1),Ufe=ot(bi,bi.VIEW_POSITION).setParameterLength(1),zfe=ot(bi,bi.RADIUS).setParameterLength(1);class jl extends bi{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const Gfe=Ft(jl,jl.DIRECTION),Fl=Ft(jl,jl.WORLD_MATRIX),Vfe=Ft(jl,jl.POSITION),Hfe=Ft(jl,jl.SCALE),qfe=Ft(jl,jl.VIEW_POSITION),Wfe=Ft(jl,jl.RADIUS),NV=gn(new Kn).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),jfe=gn(new Un).onObjectUpdate(({object:i},e)=>e.value.copy(i.matrixWorld).invert()),aA=ke(i=>i.renderer.overrideNodes.modelViewMatrix||LV).once()().toVar("modelViewMatrix"),LV=No.mul(Fl),mR=ke(i=>(i.context.isHighPrecisionModelViewMatrix=!0,gn("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),vR=ke(i=>{const e=i.context.isHighPrecisionModelViewMatrix;return gn("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),u1=Uh("position","vec3"),rs=u1.toVarying("positionLocal"),nS=u1.toVarying("positionPrevious"),Ch=ke(i=>Fl.mul(rs).xyz.toVarying(i.getNamespace("v_positionWorld")),"vec3").once("POSITION")(),O8=ke(i=>rs.transformDirection(Fl).toVarying(i.getNamespace("v_positionWorldDirection")).normalize().toVar("positionWorldDirection"),"vec3").once("POSITION")(),As=ke(i=>i.context.setupPositionView().toVarying(i.getNamespace("v_positionView")),"vec3").once("POSITION")(),Rr=As.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class Xfe extends Pn{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:n}=e;return t.coordinateSystem===eo&&n.side===sr?"false":e.getFrontFacing()}}const DV=Ft(Xfe),h1=ve(DV).mul(2).sub(1),oT=Uh("normal","vec3"),Po=ke(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),Re(0,1,0)):oT,"vec3").once()().toVar("normalLocal"),kV=As.dFdx().cross(As.dFdy()).normalize().toVar("normalFlat"),Oc=ke(i=>{let e;return i.material.flatShading===!0?e=kV:e=ul(I8(Po),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),f1=ke(i=>{let e=Oc.transformDirection(No);return i.material.flatShading!==!0&&(e=ul(e,"v_normalWorld")),e},"vec3").once()().normalize().toVar("normalWorld"),is=ke(i=>{let e=i.context.setupNormal().context({getUV:null});return i.material.flatShading!==!0&&(e=e.mul(h1)),e},"vec3").once()().toVar("transformedNormalView"),lT=is.transformDirection(No).toVar("transformedNormalWorld"),V0=ke(i=>{let e=i.context.setupClearcoatNormal().context({getUV:null});return i.material.flatShading!==!0&&(e=e.mul(h1)),e},"vec3").once()().toVar("transformedClearcoatNormalView"),OV=ke(([i,e=Fl])=>{const t=za(e),n=i.div(Re(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),I8=ke(([i],e)=>{const t=e.renderer.overrideNodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=NV.mul(i);return No.transformDirection(n)}),K7=new ba,RE=new Un,IV=gn(0).onReference(({material:i})=>i).onObjectUpdate(({material:i})=>i.refractionRatio),V_=gn(1).onReference(({material:i})=>i).onObjectUpdate(function({material:i,scene:e}){return i.envMap?i.envMapIntensity:e.environmentIntensity}),B8=gn(new Un).onReference(function(i){return i.material}).onObjectUpdate(function({material:i,scene:e}){const t=e.environment!==null&&i.envMap===null?e.environmentRotation:i.envMapRotation;return t?(K7.copy(t),RE.makeRotationFromEuler(K7)):RE.identity(),RE}),BV=Rr.negate().reflect(is),FV=Rr.negate().refract(is,IV),UV=BV.transformDirection(No).toVar("reflectVector"),zV=FV.transformDirection(No).toVar("reflectVector"),GV=new Kx;class Yfe extends Mu{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,r=null){super(e,t,n,r),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===yu?UV:e.mapping===xu?zV:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Re(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===bu||!n.isRenderTargetTexture)&&(t=Re(t.x.negate(),t.yz)),B8.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const F8=ot(Yfe).setParameterLength(1,4).setName("cubeTexture"),Fg=(i=GV,e=null,t=null,n=null)=>{let r;return i&&i.isCubeTextureNode===!0?(r=rt(i.clone()),r.referenceNode=i.getSelf(),e!==null&&(r.uvNode=rt(e)),t!==null&&(r.levelNode=rt(t)),n!==null&&(r.biasNode=rt(n))):r=F8(i,e,t,n),r},$fe=(i=GV)=>F8(i);class Qfe extends rA{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}}class cT extends Pn{static get type(){return"ReferenceNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=ai.OBJECT}element(e){return rt(new Qfe(this,rt(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=l1(null,e,this.count):Array.isArray(this.getValueFromReference())?t=Bl(null,e):e==="texture"?t=gi(null):e==="cubeTexture"?t=Fg(null):t=gn(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const fr=(i,e,t)=>rt(new cT(i,e,t)),yR=(i,e,t,n)=>rt(new cT(i,e,n,t));class Zfe extends cT{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const xh=(i,e,t=null)=>rt(new Zfe(i,e,t)),uT=ke(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),Uh("tangent","vec4")))(),d1=uT.xyz.toVar("tangentLocal"),p1=aA.mul(An(d1,0)).xyz.toVarying("v_tangentView").normalize().toVar("tangentView"),VV=p1.transformDirection(No).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),U8=p1.toVar("transformedTangentView"),Kfe=U8.transformDirection(No).normalize().toVar("transformedTangentWorld"),A1=ke(([i,e],t)=>{let n=i.mul(uT.w).xyz;return t.material.flatShading!==!0&&(n=ul(n,e)),n}).once(),Jfe=A1(oT.cross(uT),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),ede=A1(Po.cross(d1),"v_bitangentLocal").normalize().toVar("bitangentLocal"),HV=A1(Oc.cross(p1),"v_bitangentView").normalize().toVar("bitangentView"),tde=A1(f1.cross(VV),"v_bitangentWorld").normalize().toVar("bitangentWorld"),qV=A1(is.cross(U8),"v_transformedBitangentView").normalize().toVar("transformedBitangentView"),nde=qV.transformDirection(No).normalize().toVar("transformedBitangentWorld"),Sp=za(p1,HV,Oc),WV=Rr.mul(Sp),ide=(i,e)=>i.sub(WV.mul(e)),jV=(()=>{let i=Op.cross(Rr);return i=i.cross(Op).normalize(),i=Xi(i,is,qf.mul(au.oneMinus()).oneMinus().pow2().pow2()).normalize(),i})(),rde=ke(i=>{const{eye_pos:e,surf_norm:t,mapN:n,uv:r}=i,s=e.dFdx(),a=e.dFdy(),o=r.dFdx(),l=r.dFdy(),c=t,u=a.cross(c),h=c.cross(s),d=u.mul(o.x).add(h.mul(l.x)),A=u.mul(o.y).add(h.mul(l.y)),x=d.dot(d).max(A.dot(A)),_=h1.mul(x.inverseSqrt());return ms(d.mul(n.x,_),A.mul(n.y,_),c.mul(n.z)).normalize()});class sde extends us{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Nh}setup(e){const{normalMapType:t,scaleNode:n}=this;let r=this.node.mul(2).sub(1);n!==null&&(r=Re(r.xy.mul(n),r.z));let s=null;return t===zF?s=I8(r):t===Nh&&(e.hasGeometryAttribute("tangent")===!0?s=Sp.mul(r).normalize():s=rde({eye_pos:As,surf_norm:Oc,mapN:r,uv:kr()})),s}}const xR=ot(sde).setParameterLength(1,2),ade=ke(({textureNode:i,bumpScale:e})=>{const t=r=>i.cache().context({getUV:s=>r(s.uvNode||kr()),forceUVContext:!0}),n=ve(t(r=>r));return mt(ve(t(r=>r.add(r.dFdx()))).sub(n),ve(t(r=>r.add(r.dFdy()))).sub(n)).mul(e)}),ode=ke(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,r=e.dFdx().normalize(),s=e.dFdy().normalize(),a=t,o=s.cross(a),l=a.cross(r),c=r.dot(o).mul(h1),u=c.sign().mul(n.x.mul(o).add(n.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class lde extends us{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=ade({textureNode:this.textureNode,bumpScale:e});return ode({surf_pos:As,surf_norm:Oc,dHdxy:t})}}const XV=ot(lde).setParameterLength(1,2),J7=new Map;class nt extends Pn{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=J7.get(e);return n===void 0&&(n=xh(e,t),J7.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let r=null;if(n===nt.COLOR){const s=t.color!==void 0?this.getColor(n):Re();t.map&&t.map.isTexture===!0?r=s.mul(this.getTexture("map")):r=s}else if(n===nt.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?r=s.mul(this.getTexture("alpha")):r=s}else if(n===nt.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?r=this.getTexture("specular").r:r=ve(1);else if(n===nt.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s}else if(n===nt.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?r=s.mul(this.getTexture(n).rgb):r=s}else if(n===nt.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).g):r=s}else if(n===nt.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?r=s.mul(this.getTexture(n).b):r=s}else if(n===nt.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?r=a.mul(this.getTexture(n)):r=a}else if(n===nt.NORMAL)t.normalMap?(r=xR(this.getTexture("normal"),this.getCache("normalScale","vec2")),r.normalMapType=t.normalMapType):t.bumpMap?r=XV(this.getTexture("bump").r,this.getFloat("bumpScale")):r=Oc;else if(n===nt.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===nt.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===nt.CLEARCOAT_NORMAL)t.clearcoatNormalMap?r=xR(this.getTexture(n),this.getCache(n+"Scale","vec2")):r=Oc;else if(n===nt.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?r=s.mul(this.getTexture("sheenColor").rgb):r=s}else if(n===nt.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s,r=r.clamp(.07,1)}else if(n===nt.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);r=QS(N0.x,N0.y,N0.y.negate(),N0.x).mul(s.rg.mul(2).sub(mt(1)).normalize().mul(s.b))}else r=N0;else if(n===nt.IRIDESCENCE_THICKNESS){const s=fr("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const a=fr("0","float",t.iridescenceThicknessRange);r=s.sub(a).mul(this.getTexture(n).g).add(a)}else r=s}else if(n===nt.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?r=s.mul(this.getTexture(n).r):r=s}else if(n===nt.THICKNESS){const s=this.getFloat(n);t.thicknessMap?r=s.mul(this.getTexture(n).g):r=s}else if(n===nt.IOR)r=this.getFloat(n);else if(n===nt.LIGHT_MAP)r=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===nt.AO)r=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(n===nt.LINE_DASH_OFFSET)r=t.dashOffset?this.getFloat(n):ve(0);else{const s=this.getNodeType(e);r=this.getCache(n,s)}return r}}nt.ALPHA_TEST="alphaTest";nt.COLOR="color";nt.OPACITY="opacity";nt.SHININESS="shininess";nt.SPECULAR="specular";nt.SPECULAR_STRENGTH="specularStrength";nt.SPECULAR_INTENSITY="specularIntensity";nt.SPECULAR_COLOR="specularColor";nt.REFLECTIVITY="reflectivity";nt.ROUGHNESS="roughness";nt.METALNESS="metalness";nt.NORMAL="normal";nt.CLEARCOAT="clearcoat";nt.CLEARCOAT_ROUGHNESS="clearcoatRoughness";nt.CLEARCOAT_NORMAL="clearcoatNormal";nt.EMISSIVE="emissive";nt.ROTATION="rotation";nt.SHEEN="sheen";nt.SHEEN_ROUGHNESS="sheenRoughness";nt.ANISOTROPY="anisotropy";nt.IRIDESCENCE="iridescence";nt.IRIDESCENCE_IOR="iridescenceIOR";nt.IRIDESCENCE_THICKNESS="iridescenceThickness";nt.IOR="ior";nt.TRANSMISSION="transmission";nt.THICKNESS="thickness";nt.ATTENUATION_DISTANCE="attenuationDistance";nt.ATTENUATION_COLOR="attenuationColor";nt.LINE_SCALE="scale";nt.LINE_DASH_SIZE="dashSize";nt.LINE_GAP_SIZE="gapSize";nt.LINE_WIDTH="linewidth";nt.LINE_DASH_OFFSET="dashOffset";nt.POINT_SIZE="size";nt.DISPERSION="dispersion";nt.LIGHT_MAP="light";nt.AO="ao";const YV=Ft(nt,nt.ALPHA_TEST),$V=Ft(nt,nt.COLOR),QV=Ft(nt,nt.SHININESS),ZV=Ft(nt,nt.EMISSIVE),z8=Ft(nt,nt.OPACITY),KV=Ft(nt,nt.SPECULAR),bR=Ft(nt,nt.SPECULAR_INTENSITY),JV=Ft(nt,nt.SPECULAR_COLOR),Ly=Ft(nt,nt.SPECULAR_STRENGTH),H_=Ft(nt,nt.REFLECTIVITY),eH=Ft(nt,nt.ROUGHNESS),tH=Ft(nt,nt.METALNESS),nH=Ft(nt,nt.NORMAL),iH=Ft(nt,nt.CLEARCOAT),rH=Ft(nt,nt.CLEARCOAT_ROUGHNESS),sH=Ft(nt,nt.CLEARCOAT_NORMAL),aH=Ft(nt,nt.ROTATION),oH=Ft(nt,nt.SHEEN),lH=Ft(nt,nt.SHEEN_ROUGHNESS),cH=Ft(nt,nt.ANISOTROPY),uH=Ft(nt,nt.IRIDESCENCE),hH=Ft(nt,nt.IRIDESCENCE_IOR),fH=Ft(nt,nt.IRIDESCENCE_THICKNESS),dH=Ft(nt,nt.TRANSMISSION),pH=Ft(nt,nt.THICKNESS),AH=Ft(nt,nt.IOR),gH=Ft(nt,nt.ATTENUATION_DISTANCE),mH=Ft(nt,nt.ATTENUATION_COLOR),vH=Ft(nt,nt.LINE_SCALE),yH=Ft(nt,nt.LINE_DASH_SIZE),xH=Ft(nt,nt.LINE_GAP_SIZE),cde=Ft(nt,nt.LINE_WIDTH),bH=Ft(nt,nt.LINE_DASH_OFFSET),_H=Ft(nt,nt.POINT_SIZE),wH=Ft(nt,nt.DISPERSION),G8=Ft(nt,nt.LIGHT_MAP),SH=Ft(nt,nt.AO),N0=gn(new lt).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),V8=ke(i=>i.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class Pr extends Pn{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let r;if(n===Pr.VERTEX)r=e.getVertexIndex();else if(n===Pr.INSTANCE)r=e.getInstanceIndex();else if(n===Pr.DRAW)r=e.getDrawIndex();else if(n===Pr.INVOCATION_LOCAL)r=e.getInvocationLocalIndex();else if(n===Pr.INVOCATION_SUBGROUP)r=e.getInvocationSubgroupIndex();else if(n===Pr.SUBGROUP)r=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=r:s=ul(this).build(e,t),s}}Pr.VERTEX="vertex";Pr.INSTANCE="instance";Pr.SUBGROUP="subgroup";Pr.INVOCATION_LOCAL="invocationLocal";Pr.INVOCATION_SUBGROUP="invocationSubgroup";Pr.DRAW="draw";const TH=Ft(Pr,Pr.VERTEX),rd=Ft(Pr,Pr.INSTANCE),ude=Ft(Pr,Pr.SUBGROUP),hde=Ft(Pr,Pr.INVOCATION_SUBGROUP),fde=Ft(Pr,Pr.INVOCATION_LOCAL),MH=Ft(Pr,Pr.DRAW);class EH extends Pn{static get type(){return"InstanceNode"}constructor(e,t,n=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=ai.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:t,instanceMatrix:n,instanceColor:r}=this;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(t<=1e3)s=l1(n.array,"mat4",Math.max(t,1)).element(rd);else{const l=new fw(n.array,16,1);this.buffer=l;const c=n.usage===k0?gR:tS,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];s=kp(...u)}this.instanceMatrixNode=s}if(r&&a===null){const l=new nd(r.array,3),c=r.usage===k0?gR:tS;this.bufferColor=l,a=Re(c(l,"vec3",3,0)),this.instanceColorNode=a}const o=s.mul(rs).xyz;if(rs.assign(o),e.hasGeometryAttribute("normal")){const l=OV(Po,s);Po.assign(l)}this.instanceColorNode!==null&&_x("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==k0&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==k0&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const dde=ot(EH).setParameterLength(2,3);class pde extends EH{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:r}=e;super(t,n,r),this.instancedMesh=e}}const CH=ot(pde).setParameterLength(1);class Ade extends Pn{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=rd:this.batchingIdNode=MH);const n=ke(([x])=>{const _=Se(id(ts(this.batchMesh._indirectTexture),0).x),S=Se(x).mod(_),w=Se(x).div(_);return ts(this.batchMesh._indirectTexture,Is(S,w)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(Se(this.batchingIdNode)),r=this.batchMesh._matricesTexture,s=Se(id(ts(r),0).x),a=ve(n).mul(4).toInt().toVar(),o=a.mod(s),l=a.div(s),c=kp(ts(r,Is(o,l)),ts(r,Is(o.add(1),l)),ts(r,Is(o.add(2),l)),ts(r,Is(o.add(3),l))),u=this.batchMesh._colorsTexture;if(u!==null){const _=ke(([S])=>{const w=Se(id(ts(u),0).x),C=S,P=C.mod(w),L=C.div(w);return ts(u,Is(P,L)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);_x("vec3","vBatchColor").assign(_)}const h=za(c);rs.assign(c.mul(rs));const d=Po.div(Re(h[0].dot(h[0]),h[1].dot(h[1]),h[2].dot(h[2]))),A=h.mul(d).xyz;Po.assign(A),e.hasGeometryAttribute("tangent")&&d1.mulAssign(h)}}const RH=ot(Ade).setParameterLength(1);class gde extends rA{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const r=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&r!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}const mde=ot(gde).setParameterLength(2);class vde extends k8{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let r,s=null;t&&t.isStruct?(r="struct",s=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(n=e.count)):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(r=Fz(e.itemSize),n=e.count):r=t,super(e,r,n),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=Ia.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return mde(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(Ia.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=o1(this.value),this._varying=ul(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return this.structTypeNode!==null?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),r=n.build(e);return e.registerTransform(r,t),r}}const Ip=(i,e=null,t=0)=>rt(new vde(i,e,t)),yde=(i,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),Ip(i,e,t).setPBO(!0)),eI=new WeakMap;class PH extends Pn{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=ai.OBJECT,this.skinIndexNode=Uh("skinIndex","uvec4"),this.skinWeightNode=Uh("skinWeight","vec4"),this.bindMatrixNode=fr("bindMatrix","mat4"),this.bindMatrixInverseNode=fr("bindMatrixInverse","mat4"),this.boneMatricesNode=yR("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=rs,this.toPositionNode=rs,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(n.x),l=e.element(n.y),c=e.element(n.z),u=e.element(n.w),h=s.mul(t),d=ms(o.mul(r.x).mul(h),l.mul(r.y).mul(h),c.mul(r.z).mul(h),u.mul(r.w).mul(h));return a.mul(d).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=Po){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(n.x),l=e.element(n.y),c=e.element(n.z),u=e.element(n.w);let h=ms(r.x.mul(o),r.y.mul(l),r.z.mul(c),r.w.mul(u));return h=a.mul(h).mul(s),h.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=yR("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,nS)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||Gz(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&nS.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();Po.assign(n),e.hasGeometryAttribute("tangent")&&d1.assign(n)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;eI.get(t)!==e.frameId&&(eI.set(t,e.frameId),this.previousBoneMatricesNode!==null&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}const NH=i=>rt(new PH(i)),xde=(i,e=null)=>{const t=new PH(i);return t.positionNode=Ip(new nd(i.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(rd).toVar(),t.skinIndexNode=Ip(new nd(new Uint32Array(i.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(rd).toVar(),t.skinWeightNode=Ip(new nd(i.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(rd).toVar(),t.bindMatrixNode=gn(i.bindMatrix,"mat4"),t.bindMatrixInverseNode=gn(i.bindMatrixInverse,"mat4"),t.boneMatricesNode=l1(i.skeleton.boneMatrices,"mat4",i.skeleton.bones.length),t.toPositionNode=e,rt(t)};class bde extends Pn{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let a=0,o=this.params.length-1;a<o;a++){const l=this.params[a],c=l.isNode!==!0&&l.name||this.getVarName(a),u=l.isNode!==!0&&l.type||"int";n[c]=Fh(c,u)}const r=e.addStack();t.returnsNode=this.params[this.params.length-1](n,e),t.stackNode=r;const s=this.params[0];return s.isNode!==!0&&typeof s.update=="function"&&(t.updateNode=ke(this.params[0].update)(n)),e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,r=t.stackNode;for(let o=0,l=n.length-1;o<l;o++){const c=n[o];let u=!1,h=null,d=null,A=null,x=null,_=null,S=null;c.isNode?c.getNodeType(e)==="bool"?(u=!0,x="bool",d=c.build(e,x)):(x="int",A=this.getVarName(o),h="0",d=c.build(e,x),_="<"):(x=c.type||"int",A=c.name||this.getVarName(o),h=c.start,d=c.end,_=c.condition,S=c.update,typeof h=="number"?h=e.generateConst(x,h):h&&h.isNode&&(h=h.build(e,x)),typeof d=="number"?d=e.generateConst(x,d):d&&d.isNode&&(d=d.build(e,x)),h!==void 0&&d===void 0?(h=h+" - 1",d="0",_=">="):d!==void 0&&h===void 0&&(h="0",_="<"),_===void 0&&(Number(h)>Number(d)?_=">=":_="<"));let w;if(u)w=`while ( ${d} )`;else{const C={start:h,end:d},P=C.start,L=C.end;let D;const B=()=>_.includes("<")?"+=":"-=";if(S!=null)switch(typeof S){case"function":D=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":D=A+" "+B()+" "+e.generateConst(x,S);break;case"string":D=A+" "+S;break;default:S.isNode?D=A+" "+B()+" "+S.build(e):(console.error("THREE.TSL: 'Loop( { update: ... } )' is not a function, string or number."),D="break /* invalid update */")}else x==="int"||x==="uint"?S=_.includes("<")?"++":"--":S=B()+" 1.",D=A+" "+S;const k=e.getVar(x,A)+" = "+P,U=A+" "+_+" "+L;w=`for ( ${k}; ${U}; ${D} )`}e.addFlowCode((o===0?`
`:"")+e.tab+w+` {

`).addFlowTab()}const s=r.build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let o=0,l=this.params.length-1;o<l;o++)e.addFlowCode((o===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const Yi=(...i)=>rt(new bde(Dp(i,"int"))).toStack(),_de=()=>Fh("continue").toStack(),LH=()=>Fh("break").toStack(),wde=(...i)=>(console.warn("THREE.TSL: loop() has been renamed to Loop()."),Yi(...i)),PE=new WeakMap,jo=new Cn,tI=ke(({bufferMap:i,influence:e,stride:t,width:n,depth:r,offset:s})=>{const a=Se(TH).mul(t).add(s),o=a.div(n),l=a.sub(o.mul(n));return ts(i,Is(l,o)).depth(r).xyz.mul(e)});function Sde(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,r=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,s=r!==void 0?r.length:0;let a=PE.get(i);if(a===void 0||a.count!==s){let C=function(){S.dispose(),PE.delete(i),i.removeEventListener("dispose",C)};var o=C;a!==void 0&&a.texture.dispose();const l=i.morphAttributes.position||[],c=i.morphAttributes.normal||[],u=i.morphAttributes.color||[];let h=0;e===!0&&(h=1),t===!0&&(h=2),n===!0&&(h=3);let d=i.attributes.position.count*h,A=1;const x=4096;d>x&&(A=Math.ceil(d/x),d=x);const _=new Float32Array(d*A*4*s),S=new b6(_,d,A,s);S.type=ps,S.needsUpdate=!0;const w=h*4;for(let P=0;P<s;P++){const L=l[P],D=c[P],B=u[P],k=d*A*4*P;for(let U=0;U<L.count;U++){const F=U*w;e===!0&&(jo.fromBufferAttribute(L,U),_[k+F+0]=jo.x,_[k+F+1]=jo.y,_[k+F+2]=jo.z,_[k+F+3]=0),t===!0&&(jo.fromBufferAttribute(D,U),_[k+F+4]=jo.x,_[k+F+5]=jo.y,_[k+F+6]=jo.z,_[k+F+7]=0),n===!0&&(jo.fromBufferAttribute(B,U),_[k+F+8]=jo.x,_[k+F+9]=jo.y,_[k+F+10]=jo.z,_[k+F+11]=B.itemSize===4?jo.w:1)}}a={count:s,texture:S,stride:h,size:new lt(d,A)},PE.set(i,a),i.addEventListener("dispose",C)}return a}class Tde extends Pn{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=gn(1),this.updateType=ai.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,r=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,a=s!==void 0?s.length:0,{texture:o,stride:l,size:c}=Sde(t);n===!0&&rs.mulAssign(this.morphBaseInfluence),r===!0&&Po.mulAssign(this.morphBaseInfluence);const u=Se(c.width);Yi(a,({i:h})=>{const d=ve(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?d.assign(ts(this.mesh.morphTexture,Is(Se(h).add(1),Se(rd))).r):d.assign(fr("morphTargetInfluences","float").element(h).toVar()),ti(d.notEqual(0),()=>{n===!0&&rs.addAssign(tI({bufferMap:o,influence:d,stride:l,width:u,depth:h,offset:Se(0)})),r===!0&&Po.addAssign(tI({bufferMap:o,influence:d,stride:l,width:u,depth:h,offset:Se(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const DH=ot(Tde).setParameterLength(1);class hm extends Pn{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class Mde extends hm{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class Ede extends iV{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,r=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=r,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=Re().toVar("directDiffuse"),r=Re().toVar("directSpecular"),s=Re().toVar("indirectDiffuse"),a=Re().toVar("indirectSpecular"),o={directDiffuse:n,directSpecular:r,indirectDiffuse:s,indirectSpecular:a};return{radiance:Re().toVar("radiance"),irradiance:Re().toVar("irradiance"),iblIrradiance:Re().toVar("iblIrradiance"),ambientOcclusion:ve(1).toVar("ambientOcclusion"),reflectedLight:o,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const kH=ot(Ede);class Cde extends hm{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let Fv,Uv;class bs extends Pn{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===bs.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=ai.NONE;return(this.scope===bs.SIZE||this.scope===bs.VIEWPORT)&&(e=ai.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===bs.VIEWPORT?t!==null?Uv.copy(t.viewport):(e.getViewport(Uv),Uv.multiplyScalar(e.getPixelRatio())):t!==null?(Fv.width=t.width,Fv.height=t.height):e.getDrawingBufferSize(Fv)}setup(){const e=this.scope;let t=null;return e===bs.SIZE?t=gn(Fv||(Fv=new lt)):e===bs.VIEWPORT?t=gn(Uv||(Uv=new Cn)):t=mt(g1.div(Ex)),t}generate(e){if(this.scope===bs.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(Ex).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}bs.COORDINATE="coordinate";bs.VIEWPORT="viewport";bs.SIZE="size";bs.UV="uv";const Rc=Ft(bs,bs.UV),Ex=Ft(bs,bs.SIZE),g1=Ft(bs,bs.COORDINATE),tg=Ft(bs,bs.VIEWPORT),OH=tg.zw,IH=g1.sub(tg.xy),Rde=IH.div(OH),Pde=ke(()=>(console.warn('THREE.TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),Ex),"vec2").once()(),Nde=ke(()=>(console.warn('THREE.TSL: "viewportTopLeft" is deprecated. Use "screenUV" instead.'),Rc),"vec2").once()(),Lde=ke(()=>(console.warn('THREE.TSL: "viewportBottomLeft" is deprecated. Use "screenUV.flipY()" instead.'),Rc.flipY()),"vec2").once()(),zv=new lt;class hT extends Mu{static get type(){return"ViewportTextureNode"}constructor(e=Rc,t=null,n=null){n===null&&(n=new YF,n.minFilter=vo),super(n,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=ai.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(zv);const n=this.value;(n.image.width!==zv.width||n.image.height!==zv.height)&&(n.image.width=zv.width,n.image.height=zv.height,n.needsUpdate=!0);const r=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=r}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const Dde=ot(hT).setParameterLength(0,3),H8=ot(hT,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let NE=null;class kde extends hT{static get type(){return"ViewportDepthTextureNode"}constructor(e=Rc,t=null){NE===null&&(NE=new sl),super(e,t,NE)}}const q8=ot(kde).setParameterLength(0,2);class _o extends Pn{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===_o.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let r=null;if(t===_o.DEPTH_BASE)n!==null&&(r=FH().assign(n));else if(t===_o.DEPTH)e.isPerspectiveCamera?r=BH(As.z,jf,Xf):r=ng(As.z,jf,Xf);else if(t===_o.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=W8(n,jf,Xf);r=ng(s,jf,Xf)}else r=n;else r=ng(As.z,jf,Xf);return r}}_o.DEPTH_BASE="depthBase";_o.DEPTH="depth";_o.LINEAR_DEPTH="linearDepth";const ng=(i,e,t)=>i.add(e).div(e.sub(t)),Ode=(i,e,t)=>e.sub(t).mul(i).sub(e),BH=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),W8=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),j8=(i,e,t)=>{e=e.max(1e-6).toVar();const n=Au(i.negate().div(e)),r=Au(t.div(e));return n.div(r)},Ide=(i,e,t)=>{const n=i.mul(eT(t.div(e)));return ve(Math.E).pow(n).mul(e).negate()},FH=ot(_o,_o.DEPTH_BASE),X8=Ft(_o,_o.DEPTH),iS=ot(_o,_o.LINEAR_DEPTH).setParameterLength(0,1),Bde=iS(q8());X8.assign=i=>FH(i);class Vl extends Pn{static get type(){return"ClippingNode"}constructor(e=Vl.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:r}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Vl.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,r):this.scope===Vl.HARDWARE?this.setupHardwareClipping(r,e):this.setupDefault(n,r)}setupAlphaToCoverage(e,t){return ke(()=>{const n=ve().toVar("distanceToPlane"),r=ve().toVar("distanceToGradient"),s=ve(1).toVar("clipOpacity"),a=t.length;if(this.hardwareClipping===!1&&a>0){const l=Bl(t);Yi(a,({i:c})=>{const u=l.element(c);n.assign(As.dot(u.xyz).negate().add(u.w)),r.assign(n.fwidth().div(2)),s.mulAssign(Tu(r.negate(),r,n))})}const o=e.length;if(o>0){const l=Bl(e),c=ve(1).toVar("intersectionClipOpacity");Yi(o,({i:u})=>{const h=l.element(u);n.assign(As.dot(h.xyz).negate().add(h.w)),r.assign(n.fwidth().div(2)),c.mulAssign(Tu(r.negate(),r,n).oneMinus())}),s.mulAssign(c.oneMinus())}Ui.a.mulAssign(s),Ui.a.equal(0).discard()})()}setupDefault(e,t){return ke(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const s=Bl(t);Yi(n,({i:a})=>{const o=s.element(a);As.dot(o.xyz).greaterThan(o.w).discard()})}const r=e.length;if(r>0){const s=Bl(e),a=wu(!0).toVar("clipped");Yi(r,({i:o})=>{const l=s.element(o);a.assign(As.dot(l.xyz).greaterThan(l.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),ke(()=>{const r=Bl(e),s=c1(t.getClipDistance());Yi(n,({i:a})=>{const o=r.element(a),l=As.dot(o.xyz).sub(o.w).negate();s.element(a).assign(l)})})()}}Vl.ALPHA_TO_COVERAGE="alphaToCoverage";Vl.DEFAULT="default";Vl.HARDWARE="hardware";const Fde=()=>rt(new Vl),Ude=()=>rt(new Vl(Vl.ALPHA_TO_COVERAGE)),zde=()=>rt(new Vl(Vl.HARDWARE)),Gde=.05,nI=ke(([i])=>jh(ei(1e4,el(ei(17,i.x).add(ei(.1,i.y)))).mul(ms(.1,_r(el(ei(13,i.y).add(i.x))))))),iI=ke(([i])=>nI(mt(nI(i.xy),i.z))),Vde=ke(([i])=>{const e=Qr(mu(_8(i.xyz)),mu(w8(i.xyz))),t=ve(1).div(ve(Gde).mul(e)).toVar("pixScale"),n=mt(Bg(gu(Au(t))),Bg(tT(Au(t)))),r=mt(iI(gu(n.x.mul(i.xyz))),iI(gu(n.y.mul(i.xyz)))),s=jh(Au(t)),a=ms(ei(s.oneMinus(),r.x),ei(s,r.y)),o=Ro(s,s.oneMinus()),l=Re(a.mul(a).div(ei(2,o).mul(Mi(1,o))),a.sub(ei(.5,o)).div(Mi(1,o)),Mi(1,Mi(1,a).mul(Mi(1,a)).div(ei(2,o).mul(Mi(1,o))))),c=a.lessThan(o.oneMinus()).select(a.lessThan(o).select(l.x,l.y),l.z);return Su(c,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class Hde extends MV{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let r;return n===!0?r=super.generate(e):r=e.generateConst(this.nodeType,new Cn(1,1,1,1)),r}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const UH=(i=0)=>rt(new Hde(i));class cs extends Fa{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{console.warn('THREE.NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}customProgramCacheKey(){return this.type+Bz(this)}build(e){this.setup(e)}setupObserver(e){return new whe(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const r=this.setupVertex(e),s=this.vertexNode||r;e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);o!==null&&e.stack.add(o);const c=An(l,Ui.a).max(0);a=this.setupOutput(e,c),eg.assign(a);const u=this.outputNode!==null;if(u&&(a=this.outputNode),n!==null){const h=t.getMRT(),d=this.mrtNode;h!==null?(u&&eg.assign(a),a=h,d!==null&&(a=h.merge(d))):d!==null&&(a=d)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=An(l)),a=this.setupOutput(e,l)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let r=null;if(t.length>0||n.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?r=Ude():e.stack.add(Fde())}return r}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(zde()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let r=this.depthNode;if(r===null){const s=t.getMRT();s&&s.has("depth")?r=s.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?r=j8(As.z,jf,Xf):r=ng(As.z,jf,Xf))}r!==null&&X8.assign(r).toStack()}setupPositionView(){return aA.mul(rs).xyz}setupModelViewProjection(){return sA.mul(As)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),V8}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&DH(t).toStack(),t.isSkinnedMesh===!0&&NH(t).toStack(),this.displacementMap){const r=xh("displacementMap","texture"),s=xh("displacementScale","float"),a=xh("displacementBias","float");rs.addAssign(Po.normalize().mul(r.x.mul(s).add(a)))}return t.isBatchedMesh&&RH(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&CH(t).toStack(),this.positionNode!==null&&rs.assign(vV(this.positionNode,"POSITION")),rs}setupDiffuseColor({object:e,geometry:t}){this.maskNode!==null&&wu(this.maskNode).not().discard();let n=this.colorNode?An(this.colorNode):$V;this.vertexColors===!0&&t.hasAttribute("color")&&(n=n.mul(UH())),e.instanceColor&&(n=_x("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=_x("vec3","vBatchColor").mul(n)),Ui.assign(n);const r=this.opacityNode?ve(this.opacityNode):z8;Ui.a.assign(Ui.a.mul(r));let s=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(s=this.alphaTestNode!==null?ve(this.alphaTestNode):YV,Ui.a.lessThanEqual(s).discard()),this.alphaHash===!0&&Ui.a.lessThan(Vde(rs)).discard(),this.transparent===!1&&this.blending===to&&this.alphaToCoverage===!1?Ui.a.assign(1):s===null&&Ui.a.lessThanEqual(0).discard()}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Re(0):Ui.rgb}setupNormal(){return this.normalNode?Re(this.normalNode):nH}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?xh("envMap","cubeTexture"):xh("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Cde(G8)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:SH;t.push(new Mde(a))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:r,emissiveNode:s}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(o&&o.getScope().hasLights){const c=this.setupLightingModel(e)||null;l=kH(o,c,n,r)}else n!==null&&(l=Re(r!==null?Xi(l,n,r):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(pR.assign(Re(s||ZV)),l=l.add(pR)),l}setupFog(e,t){const n=e.fogNode;return n&&(eg.assign(t),t=An(n)),t}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),t}setDefaultValues(e){for(const n in e){const r=e[n];this[n]===void 0&&(this[n]=r,r&&r.clone&&(this[n]=r.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=Fa.prototype.toJSON.call(this,e),r=Yw(this);n.inputNodes={};for(const{property:a,childNode:o}of r)n.inputNodes[a]=o.toJSON(e).uuid;function s(a){const o=[];for(const l in a){const c=a[l];delete c.metadata,o.push(c)}return o}if(t){const a=s(e.textures),o=s(e.images),l=s(e.nodes);a.length>0&&(n.textures=a),o.length>0&&(n.images=o),l.length>0&&(n.nodes=l)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const qde=new om;class Wde extends cs{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(qde),this.setValues(e)}}const jde=new _J;class Xde extends cs{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(jde),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?ve(this.offsetNode):bH,t=this.dashScaleNode?ve(this.dashScaleNode):vH,n=this.dashSizeNode?ve(this.dashSizeNode):yH,r=this.gapSizeNode?ve(this.gapSizeNode):xH;U_.assign(n),AR.assign(r);const s=ul(Uh("lineDistance").mul(t));(e?s.add(e):s).mod(U_.add(AR)).greaterThan(U_).discard()}}let LE=null;class Yde extends hT{static get type(){return"ViewportSharedTextureNode"}constructor(e=Rc,t=null){LE===null&&(LE=new YF),super(e,t,LE)}updateReference(){return this}}const $de=ot(Yde).setParameterLength(0,2),zH=i=>rt(i).mul(.5).add(.5),Qde=i=>rt(i).mul(2).sub(1),Zde=new vJ;class Kde extends cs{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(Zde),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?ve(this.opacityNode):z8;Ui.assign(sT(An(zH(is),e),ma))}}class Jde extends us{static get type(){return"EquirectUVNode"}constructor(e=O8){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan(e.x).mul(1/(Math.PI*2)).add(.5),n=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return mt(t,n)}}const Y8=ot(Jde).setParameterLength(0,1);class GH extends jF{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new gd(5,5,5),a=Y8(O8),o=new cs;o.colorNode=gi(t,a,0),o.side=sr,o.blending=To;const l=new zi(s,o),c=new IS;c.add(l),t.minFilter===vo&&(t.minFilter=Bs);const u=new WF(1,10,this),h=e.getMRT();return e.setMRT(null),u.update(e,c),e.setMRT(h),t.minFilter=n,t.currentGenerateMipmaps=r,l.geometry.dispose(),l.material.dispose(),this}}const Dy=new WeakMap;class epe extends us{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Fg(null);const t=new Kx;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=ai.RENDER}updateBefore(e){const{renderer:t,material:n}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const s=r.isTextureNode?r.value:n[r.property];if(s&&s.isTexture){const a=s.mapping;if(a===lg||a===cg){if(Dy.has(s)){const o=Dy.get(s);rI(o,s.mapping),this._cubeTexture=o}else{const o=s.image;if(tpe(o)){const l=new GH(o.height);l.fromEquirectangularTexture(t,s),rI(l.texture,s.mapping),this._cubeTexture=l.texture,Dy.set(s,l.texture),s.addEventListener("dispose",VH)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function tpe(i){return i==null?!1:i.height>0}function VH(i){const e=i.target;e.removeEventListener("dispose",VH);const t=Dy.get(e);t!==void 0&&(Dy.delete(e),t.dispose())}function rI(i,e){e===lg?i.mapping=yu:e===cg&&(i.mapping=xu)}const HH=ot(epe).setParameterLength(1);class $8 extends hm{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=HH(this.envNode)}}class npe extends hm{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=ve(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class fT{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class qH extends fT{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,n=e.reflectedLight,r=e.irradianceLightMap;n.indirectDiffuse.assign(An(0)),r?n.indirectDiffuse.addAssign(r):n.indirectDiffuse.addAssign(An(1,1,1,0)),n.indirectDiffuse.mulAssign(t),n.indirectDiffuse.mulAssign(Ui.rgb)}finish(e){const{material:t,context:n}=e,r=n.outgoingLight,s=e.context.environment;if(s)switch(t.combine){case Xx:r.rgb.assign(Xi(r.rgb,r.rgb.mul(s.rgb),Ly.mul(H_)));break;case LF:r.rgb.assign(Xi(r.rgb,s.rgb,Ly.mul(H_)));break;case DF:r.rgb.addAssign(s.rgb.mul(Ly.mul(H_)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const ipe=new Il;class rpe extends cs{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(ipe),this.setValues(e)}setupNormal(){return Oc}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new $8(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new npe(G8)),t}setupOutgoingLight(){return Ui.rgb}setupLightingModel(){return new qH}}const Ug=ke(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),Qp=ke(i=>i.diffuseColor.mul(1/Math.PI)),spe=()=>ve(.25),ape=ke(({dotNH:i})=>Kw.mul(ve(.5)).add(1).mul(ve(1/Math.PI)).mul(i.pow(Kw))),ope=ke(({lightDirection:i})=>{const e=i.add(Rr).normalize(),t=is.dot(e).clamp(),n=Rr.dot(e).clamp(),r=Ug({f0:Ao,f90:1,dotVH:n}),s=spe(),a=ape({dotNH:t});return r.mul(s).mul(a)});class WH extends qH{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=is.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(Qp({diffuseColor:Ui.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(ope({lightDirection:e})).mul(Ly))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(Qp({diffuseColor:Ui}))),r.indirectDiffuse.mulAssign(t)}}const lpe=new Wh;class cpe extends cs{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(lpe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new $8(t):null}setupLightingModel(){return new WH(!1)}}const upe=new aU;class hpe extends cs{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(upe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new $8(t):null}setupLightingModel(){return new WH}setupVariants(){const e=(this.shininessNode?ve(this.shininessNode):QV).max(1e-4);Kw.assign(e);const t=this.specularNode||KV;Ao.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const jH=ke(i=>{if(i.geometry.hasAttribute("normal")===!1)return ve(0);const e=Oc.dFdx().abs().max(Oc.dFdy().abs());return e.x.max(e.y).max(e.z)}),Q8=ke(i=>{const{roughness:e}=i,t=jH();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),XH=ke(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),r=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return Wl(.5,r.add(s).max(NG))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),fpe=ke(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:r,dotBL:s,dotNV:a,dotNL:o})=>{const l=o.mul(Re(i.mul(t),e.mul(n),a).length()),c=a.mul(Re(i.mul(r),e.mul(s),o).length());return Wl(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),YH=ke(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),dpe=ve(1/Math.PI),ppe=ke(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:r})=>{const s=i.mul(e),a=Re(e.mul(n),i.mul(r),s.mul(t)),o=a.dot(a),l=s.div(o);return dpe.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),_R=ke(i=>{const{lightDirection:e,f0:t,f90:n,roughness:r,f:s,USE_IRIDESCENCE:a,USE_ANISOTROPY:o}=i,l=i.normalView||is,c=r.pow2(),u=e.add(Rr).normalize(),h=l.dot(e).clamp(),d=l.dot(Rr).clamp(),A=l.dot(u).clamp(),x=Rr.dot(u).clamp();let _=Ug({f0:t,f90:n,dotVH:x}),S,w;if(xx(a)&&(_=KS.mix(_,s)),xx(o)){const C=Ry.dot(e),P=Ry.dot(Rr),L=Ry.dot(u),D=Op.dot(e),B=Op.dot(Rr),k=Op.dot(u);S=fpe({alphaT:Zw,alphaB:c,dotTV:P,dotBV:B,dotTL:C,dotBL:D,dotNV:d,dotNL:h}),w=ppe({alphaT:Zw,alphaB:c,dotNH:A,dotTH:L,dotBH:k})}else S=XH({alpha:c,dotNL:h,dotNV:d}),w=YH({alpha:c,dotNH:A});return _.mul(S).mul(w)}),Z8=ke(({roughness:i,dotNV:e})=>{const t=An(-1,-.0275,-.572,.022),n=An(1,.0425,1.04,-.04),r=i.mul(t).add(n),s=r.x.mul(r.x).min(e.mul(-9.28).exp2()).mul(r.x).add(r.y);return mt(-1.04,1.04).mul(s).add(r.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),$H=ke(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:r}=i,s=Z8({dotNV:e,roughness:r});return t.mul(s.x).add(n.mul(s.y))}),QH=ke(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),r=n.mul(n),s=n.mul(r,r).clamp(0,.9999);return i.sub(Re(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),Ape=ke(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=ve(1).div(t),s=e.pow2().oneMinus().max(.0078125);return ve(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),gpe=ke(({dotNV:i,dotNL:e})=>ve(1).div(ve(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),mpe=ke(({lightDirection:i})=>{const e=i.add(Rr).normalize(),t=is.dot(i).clamp(),n=is.dot(Rr).clamp(),r=is.dot(e).clamp(),s=Ape({roughness:ZS,dotNH:r}),a=gpe({dotNV:n,dotNL:t});return wp.mul(s).mul(a)}),vpe=ke(({N:i,V:e,roughness:t})=>{const s=.0078125,a=i.dot(e).saturate(),o=mt(t,a.oneMinus().sqrt());return o.assign(o.mul(.984375).add(s)),o}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),ype=ke(({f:i})=>{const e=i.length();return Qr(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),I2=ke(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),r=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),a=r.div(s),o=t.greaterThan(0).select(a,Qr(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return i.cross(e).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),sI=ke(({N:i,V:e,P:t,mInv:n,p0:r,p1:s,p2:a,p3:o})=>{const l=s.sub(r).toVar(),c=o.sub(r).toVar(),u=l.cross(c),h=Re().toVar();return ti(u.dot(t.sub(r)).greaterThanEqual(0),()=>{const d=e.sub(i.mul(e.dot(i))).normalize(),A=i.cross(d).negate(),x=n.mul(za(d,A,i).transpose()).toVar(),_=x.mul(r.sub(t)).normalize().toVar(),S=x.mul(s.sub(t)).normalize().toVar(),w=x.mul(a.sub(t)).normalize().toVar(),C=x.mul(o.sub(t)).normalize().toVar(),P=Re(0).toVar();P.addAssign(I2({v1:_,v2:S})),P.addAssign(I2({v1:S,v2:w})),P.addAssign(I2({v1:w,v2:C})),P.addAssign(I2({v1:C,v2:_})),h.assign(Re(ype({f:P})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),dT=1/6,ZH=i=>ei(dT,ei(i,ei(i,i.negate().add(3)).sub(3)).add(1)),wR=i=>ei(dT,ei(i,ei(i,ei(3,i).sub(6))).add(4)),KH=i=>ei(dT,ei(i,ei(i,ei(-3,i).add(3)).add(3)).add(1)),SR=i=>ei(dT,Sc(i,3)),aI=i=>ZH(i).add(wR(i)),oI=i=>KH(i).add(SR(i)),lI=i=>ms(-1,wR(i).div(ZH(i).add(wR(i)))),cI=i=>ms(1,SR(i).div(KH(i).add(SR(i)))),uI=(i,e,t)=>{const n=i.uvNode,r=ei(n,e.zw).add(.5),s=gu(r),a=jh(r),o=aI(a.x),l=oI(a.x),c=lI(a.x),u=cI(a.x),h=lI(a.y),d=cI(a.y),A=mt(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),x=mt(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),_=mt(s.x.add(c),s.y.add(d)).sub(.5).mul(e.xy),S=mt(s.x.add(u),s.y.add(d)).sub(.5).mul(e.xy),w=aI(a.y).mul(ms(o.mul(i.sample(A).level(t)),l.mul(i.sample(x).level(t)))),C=oI(a.y).mul(ms(o.mul(i.sample(_).level(t)),l.mul(i.sample(S).level(t))));return w.add(C)},JH=ke(([i,e=ve(3)])=>{const t=mt(i.size(Se(e))),n=mt(i.size(Se(e.add(1)))),r=Wl(1,t),s=Wl(1,n),a=uI(i,An(r,t),gu(e)),o=uI(i,An(s,n),tT(e));return jh(e).mix(a,o)}),hI=ke(([i,e,t,n,r])=>{const s=Re(C8(e.negate(),Bh(i),Wl(1,n))),a=Re(mu(r[0].xyz),mu(r[1].xyz),mu(r[2].xyz));return Bh(s).mul(t.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),xpe=ke(([i,e])=>i.mul(Su(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),bpe=H8(),_pe=H8(),fI=ke(([i,e,t],{material:n})=>{const s=(n.side===sr?bpe:_pe).sample(i),a=Au(Ex.x).mul(xpe(e,t));return JH(s,a)}),dI=ke(([i,e,t])=>(ti(t.notEqual(0),()=>{const n=eT(e).negate().div(t);return v8(n.negate().mul(i))}),Re(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),wpe=ke(([i,e,t,n,r,s,a,o,l,c,u,h,d,A,x])=>{let _,S;if(x){_=An().toVar(),S=Re().toVar();const D=u.sub(1).mul(x.mul(.025)),B=Re(u.sub(D),u,u.add(D));Yi({start:0,end:3},({i:k})=>{const U=B.element(k),F=hI(i,e,h,U,o),z=a.add(F),V=c.mul(l.mul(An(z,1))),W=mt(V.xy.div(V.w)).toVar();W.addAssign(1),W.divAssign(2),W.assign(mt(W.x,W.y.oneMinus()));const X=fI(W,t,U);_.element(k).assign(X.element(k)),_.a.addAssign(X.a),S.element(k).assign(n.element(k).mul(dI(mu(F),d,A).element(k)))}),_.a.divAssign(3)}else{const D=hI(i,e,h,u,o),B=a.add(D),k=c.mul(l.mul(An(B,1))),U=mt(k.xy.div(k.w)).toVar();U.addAssign(1),U.divAssign(2),U.assign(mt(U.x,U.y.oneMinus())),_=fI(U,t,u),S=n.mul(dI(mu(D),d,A))}const w=S.rgb.mul(_.rgb),C=i.dot(e).clamp(),P=Re($H({dotNV:C,specularColor:r,specularF90:s,roughness:t})),L=S.r.add(S.g,S.b).div(3);return An(P.oneMinus().mul(w),_.a.oneMinus().mul(L).oneMinus())}),Spe=za(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),Tpe=i=>{const e=i.sqrt();return Re(1).add(e).div(Re(1).sub(e))},pI=(i,e)=>i.sub(e).div(i.add(e)).pow2(),Mpe=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=Re(54856e-17,44201e-17,52481e-17),r=Re(1681e3,1795300,2208400),s=Re(43278e5,93046e5,66121e5),a=ve(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let o=n.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return o=Re(o.x.add(a),o.y,o.z).div(10685e-11),Spe.mul(o)},Epe=ke(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:r})=>{const s=Xi(i,e,Tu(0,.03,n)),o=i.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();ti(o.lessThan(0),()=>Re(1));const l=o.sqrt(),c=pI(s,i),u=Ug({f0:c,f90:1,dotVH:t}),h=u.oneMinus(),d=s.lessThan(i).select(Math.PI,0),A=ve(Math.PI).sub(d),x=Tpe(r.clamp(0,.9999)),_=pI(x,s.toVec3()),S=Ug({f0:_,f90:1,dotVH:l}),w=Re(x.x.lessThan(s).select(Math.PI,0),x.y.lessThan(s).select(Math.PI,0),x.z.lessThan(s).select(Math.PI,0)),C=s.mul(n,l,2),P=Re(A).add(w),L=u.mul(S).clamp(1e-5,.9999),D=L.sqrt(),B=h.pow2().mul(S).div(Re(1).sub(L)),U=u.add(B).toVar(),F=B.sub(h).toVar();return Yi({start:1,end:2,condition:"<=",name:"m"},({m:z})=>{F.mulAssign(D);const V=Mpe(ve(z).mul(C),ve(z).mul(P)).mul(2);U.addAssign(F.mul(V))}),U.max(Re(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),Cpe=ke(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),r=t.pow2(),s=Fs(t.lessThan(.25),ve(-339.2).mul(r).add(ve(161.4).mul(t)).sub(25.9),ve(-8.48).mul(r).add(ve(14.3).mul(t)).sub(9.95)),a=Fs(t.lessThan(.25),ve(44).mul(r).sub(ve(23.7).mul(t)).add(3.26),ve(1.97).mul(r).sub(ve(3.27).mul(t)).add(.72));return Fs(t.lessThan(.25),0,ve(.1).mul(t).sub(.025)).add(s.mul(n).add(a).exp()).mul(1/Math.PI).saturate()}),DE=Re(.04),kE=ve(1);class eq extends fT{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=r,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Re().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Re().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Re().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Re().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Re().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=is.dot(Rr).clamp();this.iridescenceFresnel=Epe({outsideIOR:ve(1),eta2:c8,cosTheta1:t,thinFilmThickness:u8,baseF0:Ao}),this.iridescenceF0=QH({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=Ch,n=RV.sub(Ch).normalize(),r=lT,s=e.context;s.backdrop=wpe(r,n,au,Ui,Ao,Tx,t,Fl,No,sA,Py,h8,d8,f8,this.dispersion?p8:null),s.backdropAlpha=Jw,Ui.a.mulAssign(Xi(1,s.backdrop.a,Jw))}super.start(e)}computeMultiscattering(e,t,n){const r=is.dot(Rr).clamp(),s=Z8({roughness:au,dotNV:r}),o=(this.iridescenceF0?KS.mix(Ao,this.iridescenceF0):Ao).mul(s.x).add(n.mul(s.y)),c=s.x.add(s.y).oneMinus(),u=Ao.add(Ao.oneMinus().mul(.047619)),h=o.mul(u).div(c.mul(u).oneMinus());e.addAssign(o),t.addAssign(h.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=is.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(mpe({lightDirection:e}))),this.clearcoat===!0){const o=V0.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(o.mul(_R({lightDirection:e,f0:DE,f90:kE,roughness:Sx,normalView:V0})))}n.directDiffuse.addAssign(s.mul(Qp({diffuseColor:Ui.rgb}))),n.directSpecular.addAssign(s.mul(_R({lightDirection:e,f0:Ao,f90:1,roughness:au,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:r,reflectedLight:s,ltc_1:a,ltc_2:o}){const l=t.add(n).sub(r),c=t.sub(n).sub(r),u=t.sub(n).add(r),h=t.add(n).add(r),d=is,A=Rr,x=As.toVar(),_=vpe({N:d,V:A,roughness:au}),S=a.sample(_).toVar(),w=o.sample(_).toVar(),C=za(Re(S.x,0,S.y),Re(0,1,0),Re(S.z,0,S.w)).toVar(),P=Ao.mul(w.x).add(Ao.oneMinus().mul(w.y)).toVar();s.directSpecular.addAssign(e.mul(P).mul(sI({N:d,V:A,P:x,mInv:C,p0:l,p1:c,p2:u,p3:h}))),s.directDiffuse.addAssign(e.mul(Ui).mul(sI({N:d,V:A,P:x,mInv:za(1,0,0,0,1,0,0,0,1),p0:l,p1:c,p2:u,p3:h})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:n}=e.context;n.indirectDiffuse.addAssign(t.mul(Qp({diffuseColor:Ui})))}indirectSpecular(e){const{radiance:t,iblIrradiance:n,reflectedLight:r}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(n.mul(wp,Cpe({normal:is,viewDir:Rr,roughness:ZS}))),this.clearcoat===!0){const u=V0.dot(Rr).clamp(),h=$H({dotNV:u,specularColor:DE,specularF90:kE,roughness:Sx});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(h))}const s=Re().toVar("singleScattering"),a=Re().toVar("multiScattering"),o=n.mul(1/Math.PI);this.computeMultiscattering(s,a,Tx);const l=s.add(a),c=Ui.mul(l.r.max(l.g).max(l.b).oneMinus());r.indirectSpecular.addAssign(t.mul(s)),r.indirectSpecular.addAssign(a.mul(o)),r.indirectDiffuse.addAssign(c.mul(o))}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:n}=e.context,s=is.dot(Rr).clamp().add(t),a=au.mul(-16).oneMinus().negate().exp2(),o=t.sub(s.pow(a).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(o)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=V0.dot(Rr).clamp(),r=Ug({dotVH:n,f0:DE,f90:kE}),s=t.mul(Qw.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(Qw));t.assign(s)}if(this.sheen===!0){const n=wp.r.max(wp.g).max(wp.b).mul(.157).oneMinus(),r=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}const AI=ve(1),TR=ve(-2),B2=ve(.8),OE=ve(-1),F2=ve(.4),IE=ve(2),U2=ve(.305),BE=ve(3),gI=ve(.21),Rpe=ve(4),mI=ve(4),Ppe=ve(16),Npe=ke(([i])=>{const e=Re(_r(i)).toVar(),t=ve(-1).toVar();return ti(e.x.greaterThan(e.z),()=>{ti(e.x.greaterThan(e.y),()=>{t.assign(Fs(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign(Fs(i.y.greaterThan(0),1,4))})}).Else(()=>{ti(e.z.greaterThan(e.y),()=>{t.assign(Fs(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign(Fs(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),Lpe=ke(([i,e])=>{const t=mt().toVar();return ti(e.equal(0),()=>{t.assign(mt(i.z,i.y).div(_r(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(mt(i.x.negate(),i.z.negate()).div(_r(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(mt(i.x.negate(),i.y).div(_r(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(mt(i.z.negate(),i.y).div(_r(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(mt(i.x.negate(),i.z).div(_r(i.y)))}).Else(()=>{t.assign(mt(i.x,i.y).div(_r(i.z)))}),ei(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),Dpe=ke(([i])=>{const e=ve(0).toVar();return ti(i.greaterThanEqual(B2),()=>{e.assign(AI.sub(i).mul(OE.sub(TR)).div(AI.sub(B2)).add(TR))}).ElseIf(i.greaterThanEqual(F2),()=>{e.assign(B2.sub(i).mul(IE.sub(OE)).div(B2.sub(F2)).add(OE))}).ElseIf(i.greaterThanEqual(U2),()=>{e.assign(F2.sub(i).mul(BE.sub(IE)).div(F2.sub(U2)).add(IE))}).ElseIf(i.greaterThanEqual(gI),()=>{e.assign(U2.sub(i).mul(Rpe.sub(BE)).div(U2.sub(gI)).add(BE))}).Else(()=>{e.assign(ve(-2).mul(Au(ei(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),tq=ke(([i,e])=>{const t=i.toVar();t.assign(ei(2,t).sub(1));const n=Re(t,1).toVar();return ti(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),nq=ke(([i,e,t,n,r,s])=>{const a=ve(t),o=Re(e),l=Su(Dpe(a),TR,s),c=jh(l),u=gu(l),h=Re(MR(i,o,u,n,r,s)).toVar();return ti(c.notEqual(0),()=>{const d=Re(MR(i,o,u.add(1),n,r,s)).toVar();h.assign(Xi(h,d,c))}),h}),MR=ke(([i,e,t,n,r,s])=>{const a=ve(t).toVar(),o=Re(e),l=ve(Npe(o)).toVar(),c=ve(Qr(mI.sub(a),0)).toVar();a.assign(Qr(a,mI));const u=ve(Bg(a)).toVar(),h=mt(Lpe(o,l).mul(u.sub(2)).add(1)).toVar();return ti(l.greaterThan(2),()=>{h.y.addAssign(u),l.subAssign(3)}),h.x.addAssign(l.mul(u)),h.x.addAssign(c.mul(ei(3,Ppe))),h.y.addAssign(ei(4,Bg(s).sub(u))),h.x.mulAssign(n),h.y.mulAssign(r),i.sample(h).grad(mt(),mt())}),FE=ke(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:r,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=mh(n),c=t.mul(l).add(r.cross(t).mul(el(n))).add(r.mul(r.dot(t).mul(l.oneMinus())));return MR(i,c,e,s,a,o)}),iq=ke(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:r,samples:s,dTheta:a,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})=>{const d=Re(Fs(e,t,iT(t,n))).toVar();ti(d.equal(Re(0)),()=>{d.assign(Re(n.z,0,n.x.negate()))}),d.assign(Bh(d));const A=Re().toVar();return A.addAssign(r.element(0).mul(FE({theta:0,axis:d,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),Yi({start:Se(1),end:i},({i:x})=>{ti(x.greaterThanEqual(s),()=>{LH()});const _=ve(a.mul(ve(x))).toVar();A.addAssign(r.element(x).mul(FE({theta:_.mul(-1),axis:d,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),A.addAssign(r.element(x).mul(FE({theta:_,axis:d,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})))}),An(A,1)}),H0=4,vI=[.125,.215,.35,.446,.526,.582],dp=20,UE=new e1(-1,1,1,-1,0,1),kpe=new ia(90,1),yI=new un;let zE=null,GE=0,VE=0;const op=(1+Math.sqrt(5))/2,m0=1/op,xI=[new pe(-op,m0,0),new pe(op,m0,0),new pe(-m0,0,op),new pe(m0,0,op),new pe(0,op,-m0),new pe(0,op,m0),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)],Ope=new pe,rq=new WeakMap,Ipe=[3,1,5,0,4,2],HE=tq(kr(),Uh("faceIndex")).normalize(),K8=Re(HE.x,HE.y,HE.z);class Bpe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,r=100,s={}){const{size:a=256,position:o=Ope,renderTarget:l=null}=s;if(this._setSize(a),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const u=l||this._allocateTarget();return s.renderTarget=u,this.fromSceneAsync(e,t,n,r,s),u}zE=this._renderer.getRenderTarget(),GE=this._renderer.getActiveCubeFace(),VE=this._renderer.getActiveMipmapLevel();const c=l||this._allocateTarget();return c.depthBuffer=!0,this._init(c),this._sceneToCubeUV(e,n,r,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}async fromSceneAsync(e,t=0,n=.1,r=100,s={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,r,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_I(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wI(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===yu||e.mapping===xu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zE,GE,VE),e.scissorTest=!1,z2(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),zE=this._renderer.getRenderTarget(),GE=this._renderer.getActiveCubeFace(),VE=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTarget();return this._init(n),this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize;return bI(e,t)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bI(e.width,e.height);const{_lodMax:t}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=Fpe(t)),this._blurMaterial=Upe(t,e.width,e.height)}}async _compileMaterial(e){const t=new zi(this._lodPlanes[0],e);await this._renderer.compile(t,UE)}_sceneToCubeUV(e,t,n,r,s){const a=kpe;a.near=t,a.far=n;const o=[1,1,1,1,-1,1],l=[1,-1,1,-1,1,-1],c=this._renderer,u=c.autoClear;c.getClearColor(yI),c.autoClear=!1;let h=this._backgroundBox;if(h===null){const x=new Il({name:"PMREM.Background",side:sr,depthWrite:!1,depthTest:!1});h=new zi(new gd,x)}let d=!1;const A=e.background;A?A.isColor&&(h.material.color.copy(A),e.background=null,d=!0):(h.material.color.copy(yI),d=!0),c.setRenderTarget(r),c.clear(),d&&c.render(h,a);for(let x=0;x<6;x++){const _=x%3;_===0?(a.up.set(0,o[x],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x+l[x],s.y,s.z)):_===1?(a.up.set(0,0,o[x]),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y+l[x],s.z)):(a.up.set(0,o[x],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y,s.z+l[x]));const S=this._cubeSize;z2(r,_*S,x>2?S:0,S,S),c.render(e,a)}c.autoClear=u,e.background=A}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===yu||e.mapping===xu;r?this._cubemapMaterial===null&&(this._cubemapMaterial=_I(e)):this._equirectMaterial===null&&(this._equirectMaterial=wI(e));const s=r?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const o=this._cubeSize;z2(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,UE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=xI[(r-s-1)%xI.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=this._lodMeshes[r];h.material=c;const d=rq.get(c),A=this._sizeLods[n]-1,x=isFinite(s)?Math.PI/(2*A):2*Math.PI/(2*dp-1),_=s/x,S=isFinite(s)?1+Math.floor(u*_):dp;S>dp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${dp}`);const w=[];let C=0;for(let k=0;k<dp;++k){const U=k/_,F=Math.exp(-U*U/2);w.push(F),k===0?C+=F:k<S&&(C+=2*F)}for(let k=0;k<w.length;k++)w[k]=w[k]/C;e.texture.frame=(e.texture.frame||0)+1,d.envMap.value=e.texture,d.samples.value=S,d.weights.array=w,d.latitudinal.value=a==="latitudinal"?1:0,o&&(d.poleAxis.value=o);const{_lodMax:P}=this;d.dTheta.value=x,d.mipInt.value=P-n;const L=this._sizeLods[r],D=3*L*(r>P-H0?r-P+H0:0),B=4*(this._cubeSize-L);z2(t,D,B,3*L,2*L),l.setRenderTarget(t),l.render(h,UE)}}function Fpe(i){const e=[],t=[],n=[],r=[];let s=i;const a=i-H0+1+vI.length;for(let o=0;o<a;o++){const l=Math.pow(2,s);t.push(l);let c=1/l;o>i-H0?c=vI[o-i+H0-1]:o===0&&(c=0),n.push(c);const u=1/(l-2),h=-u,d=1+u,A=[h,h,d,h,d,d,h,h,d,d,h,d],x=6,_=6,S=3,w=2,C=1,P=new Float32Array(S*_*x),L=new Float32Array(w*_*x),D=new Float32Array(C*_*x);for(let k=0;k<x;k++){const U=k%3*2/3-1,F=k>2?0:-1,z=[U,F,0,U+2/3,F,0,U+2/3,F+1,0,U,F,0,U+2/3,F+1,0,U,F+1,0],V=Ipe[k];P.set(z,S*_*V),L.set(A,w*_*V);const W=[V,V,V,V,V,V];D.set(W,C*_*V)}const B=new lr;B.setAttribute("position",new Vr(P,S)),B.setAttribute("uv",new Vr(L,w)),B.setAttribute("faceIndex",new Vr(D,C)),e.push(B),r.push(new zi(B,null)),s>H0&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:r}}function bI(i,e){const t={magFilter:Bs,minFilter:Bs,generateMipmaps:!1,type:Ss,format:ss,colorSpace:Cc},n=new Hh(i,e,t);return n.texture.mapping=Gp,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function z2(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function J8(i){const e=new cs;return e.depthTest=!1,e.depthWrite=!1,e.blending=To,e.name=`PMREM_${i}`,e}function Upe(i,e,t){const n=Bl(new Array(dp).fill(0)),r=gn(new pe(0,1,0)),s=gn(0),a=ve(dp),o=gn(0),l=gn(1),c=gi(null),u=gn(0),h=ve(1/e),d=ve(1/t),A=ve(i),x={n:a,latitudinal:o,weights:n,poleAxis:r,outputDirection:K8,dTheta:s,samples:l,envMap:c,mipInt:u,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:A},_=J8("blur");return _.fragmentNode=iq({...x,latitudinal:o.equal(1)}),rq.set(_,x),_}function _I(i){const e=J8("cubemap");return e.fragmentNode=Fg(i,K8),e}function wI(i){const e=J8("equirect");return e.fragmentNode=gi(i,Y8(K8),0),e}const SI=new WeakMap;function zpe(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function Gpe(i,e,t){const n=Vpe(e);let r=n.get(i);if((r!==void 0?r.pmremVersion:-1)!==i.pmremVersion){const a=i.image;if(i.isCubeTexture)if(qpe(a))r=t.fromCubemap(i,r);else return null;else if(Wpe(a))r=t.fromEquirectangular(i,r);else return null;r.pmremVersion=i.pmremVersion,n.set(i,r)}return r.texture}function Vpe(i){let e=SI.get(i);return e===void 0&&(e=new WeakMap,SI.set(i,e)),e}class Hpe extends us{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const r=new Ts;r.isRenderTargetTexture=!0,this._texture=gi(r),this._width=gn(0),this._height=gn(0),this._maxMip=gn(0),this.updateBeforeType=ai.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=zpe(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const n=t?t.pmremVersion:-1,r=this._value;n!==r.pmremVersion&&(r.isPMREMTexture===!0?t=r:t=Gpe(r,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new Bpe(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this)),t=B8.mul(Re(t.x,t.y.negate(),t.z));let n=this.levelNode;return n===null&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),nq(this._texture,t,n,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function qpe(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function Wpe(i){return i==null?!1:i.height>0}const eP=ot(Hpe).setParameterLength(1,3),TI=new WeakMap;class jpe extends hm{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const h=n.isTextureNode?n.value:t[n.property];let d=TI.get(h);d===void 0&&(d=eP(h),TI.set(h,d)),n=d}const s=t.useAnisotropy===!0||t.anisotropy>0?jV:is,a=n.context(MI(au,s)).mul(V_),o=n.context(Xpe(lT)).mul(Math.PI).mul(V_),l=Ny(a),c=Ny(o);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(c);const u=e.context.lightingModel.clearcoatRadiance;if(u){const h=n.context(MI(Sx,V0)).mul(V_),d=Ny(h);u.addAssign(d)}}}const MI=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=Rr.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection(No)),t),getTextureLevel:()=>i}},Xpe=i=>({getUV:()=>i,getTextureLevel:()=>ve(1)}),Ype=new sU;class sq extends cs{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(Ype),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new jpe(t):null}setupLightingModel(){return new eq}setupSpecular(){const e=Xi(Re(.04),Ui.rgb,wx);Ao.assign(e),Tx.assign(1)}setupVariants(){const e=this.metalnessNode?ve(this.metalnessNode):tH;wx.assign(e);let t=this.roughnessNode?ve(this.roughnessNode):eH;t=Q8({roughness:t}),au.assign(t),this.setupSpecular(),Ui.assign(An(Ui.rgb.mul(e.oneMinus()),Ui.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const $pe=new gJ;class Qpe extends sq{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues($pe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?ve(this.iorNode):AH;Py.assign(e),Ao.assign(Xi(Ro(T8(Py.sub(1).div(Py.add(1))).mul(JV),Re(1)).mul(bR),Ui.rgb,wx)),Tx.assign(Xi(bR,1,wx))}setupLightingModel(){return new eq(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?ve(this.clearcoatNode):iH,n=this.clearcoatRoughnessNode?ve(this.clearcoatRoughnessNode):rH;Qw.assign(t),Sx.assign(Q8({roughness:n}))}if(this.useSheen){const t=this.sheenNode?Re(this.sheenNode):oH,n=this.sheenRoughnessNode?ve(this.sheenRoughnessNode):lH;wp.assign(t),ZS.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?ve(this.iridescenceNode):uH,n=this.iridescenceIORNode?ve(this.iridescenceIORNode):hH,r=this.iridescenceThicknessNode?ve(this.iridescenceThicknessNode):fH;KS.assign(t),c8.assign(n),u8.assign(r)}if(this.useAnisotropy){const t=(this.anisotropyNode?mt(this.anisotropyNode):cH).toVar();qf.assign(t.length()),ti(qf.equal(0),()=>{t.assign(mt(1,0))}).Else(()=>{t.divAssign(mt(qf)),qf.assign(qf.saturate())}),Zw.assign(qf.pow2().mix(au.pow2(),1)),Ry.assign(Sp[0].mul(t.x).add(Sp[1].mul(t.y))),Op.assign(Sp[1].mul(t.x).sub(Sp[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?ve(this.transmissionNode):dH,n=this.thicknessNode?ve(this.thicknessNode):pH,r=this.attenuationDistanceNode?ve(this.attenuationDistanceNode):gH,s=this.attenuationColorNode?Re(this.attenuationColorNode):mH;if(Jw.assign(t),h8.assign(n),f8.assign(r),d8.assign(s),this.useDispersion){const a=this.dispersionNode?ve(this.dispersionNode):wH;p8.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Re(this.clearcoatNormalNode):sH}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const Zpe=ke(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),r=mt(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=xh("gradientMap","texture").context({getUV:()=>r});return Re(s.r)}else{const s=r.fwidth().mul(.5);return Xi(Re(.7),Re(1),Tu(ve(.7).sub(s.x),ve(.7).add(s.x),r.x))}});class Kpe extends fT{direct({lightDirection:e,lightColor:t,reflectedLight:n},r){const s=Zpe({normal:oT,lightDirection:e,builder:r}).mul(t);n.directDiffuse.addAssign(s.mul(Qp({diffuseColor:Ui.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(Qp({diffuseColor:Ui}))),r.indirectDiffuse.mulAssign(t)}}const Jpe=new mJ;class eAe extends cs{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Jpe),this.setValues(e)}setupLightingModel(){return new Kpe}}class tAe extends us{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Re(Rr.z,0,Rr.x.negate()).normalize(),t=Rr.cross(e);return mt(e.dot(is),t.dot(is)).mul(.495).add(.5)}}const aq=Ft(tAe),nAe=new bJ;class iAe extends cs{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(nAe),this.setValues(e)}setupVariants(e){const t=aq;let n;e.material.matcap?n=xh("matcap","texture").context({getUV:()=>t}):n=Re(Xi(.2,.8,t.y)),Ui.rgb.mulAssign(n.rgb)}}class rAe extends us{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),a=t.sin();return QS(s,a,a.negate(),s).mul(n)}else{const s=t,a=kp(An(1,0,0,0),An(0,mh(s.x),el(s.x).negate(),0),An(0,el(s.x),mh(s.x),0),An(0,0,0,1)),o=kp(An(mh(s.y),0,el(s.y),0),An(0,1,0,0),An(el(s.y).negate(),0,mh(s.y),0),An(0,0,0,1)),l=kp(An(mh(s.z),el(s.z).negate(),0,0),An(el(s.z),mh(s.z),0,0),An(0,0,1,0),An(0,0,0,1));return a.mul(o).mul(l).mul(An(n,1)).xyz}}}const pT=ot(rAe).setParameterLength(2),sAe=new LK;class oq extends cs{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(sAe),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,r=this.sizeAttenuation,{positionNode:s,rotationNode:a,scaleNode:o}=this,l=aA.mul(Re(s||0));let c=mt(Fl[0].xyz.length(),Fl[1].xyz.length());if(o!==null&&(c=c.mul(mt(o))),r===!1)if(n.isPerspectiveCamera)c=c.mul(l.z.negate());else{const A=ve(2).div(sA.element(1).element(1));c=c.mul(A.mul(2))}let u=u1.xy;if(t.center&&t.center.isVector2===!0){const A=dfe("center","vec2",t);u=u.sub(A.sub(.5))}u=u.mul(c);const h=ve(a||aH),d=pT(u,h);return An(l.xy.add(d),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const aAe=new E6;class oAe extends oq{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(aAe),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return aA.mul(Re(e||rs)).xyz}setupVertex(e){const t=super.setupVertex(e);if(e.material.isNodeMaterial!==!0)return t;const{rotationNode:n,scaleNode:r,sizeNode:s}=this,a=u1.xy.toVar(),o=tg.z.div(tg.w);if(n&&n.isNode){const c=ve(n);a.assign(pT(a,c))}let l=s!==null?mt(s):_H;return this.sizeAttenuation===!0&&(l=l.mul(l.div(As.z.negate()))),r&&r.isNode&&(l=l.mul(mt(r))),a.mulAssign(l.mul(2)),a.assign(a.div(tg.z)),a.y.assign(a.y.mul(o)),a.assign(a.mul(t.w)),t.addAssign(An(a,0,0)),t}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}class lAe extends fT{constructor(){super(),this.shadowNode=ve(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){Ui.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Ui.rgb)}}const cAe=new AJ;class uAe extends cs{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(cAe),this.setValues(e)}setupLightingModel(){return new lAe}}um("vec3");um("vec3");um("vec3");class hAe{constructor(e,t){this.nodes=e,this.info=t,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class Ic{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let r=0;r<e.length-1;r++){const s=e[r];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let fAe=0;function dAe(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const r in n)if(n[r]!==void 0){const s=n[r];s&&typeof s.get=="function"&&e.push(r)}t=Object.getPrototypeOf(t)}return e}class pAe{constructor(e,t,n,r,s,a,o,l,c,u){this.id=fAe++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=r,this.material=s,this.scene=a,this.camera=o,this.lightsNode=l,this.context=c,this.geometry=r.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=u,this.clippingContextCacheKey=u!==null?u.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],r=new Set;for(const s of e){const a=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);if(a===void 0)continue;n.push(a);const o=a.isInterleavedBufferAttribute?a.data:a;r.add(o)}return this.attributes=n,this.vertexBuffers=Array.from(r.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:r,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),l=o!==null;let c=1;if(n.isInstancedBufferGeometry===!0?c=n.instanceCount:e.count!==void 0&&(c=Math.max(0,e.count)),c===0)return null;if(a.instanceCount=c,e.isBatchedMesh===!0)return a;let u=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(u=2);let h=s.start*u,d=(s.start+s.count)*u;r!==null&&(h=Math.max(h,r.start*u),d=Math.min(d,(r.start+r.count)*u));const A=n.attributes.position;let x=1/0;l?x=o.count:A!=null&&(x=A.count),h=Math.max(h,0),d=Math.min(d,x);const _=d-h;return _<0||_===1/0?null:(a.vertexCount=_,a.firstVertex=h,a)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const r=e.attributes[n];t+=n+",",r.data&&(t+=r.data.stride+","),r.offset&&(t+=r.offset+","),r.itemSize&&(t+=r.itemSize+","),r.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const r=e.morphAttributes[n];t+="morph-"+n+",";for(let s=0,a=r.length;s<a;s++){const o=r[s];t+=o.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let n=t.customProgramCacheKey();for(const r of dAe(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(r))continue;const s=t[r];let a;if(s!==null){const o=typeof s;o==="number"?a=s!==0?"1":"0":o==="object"?(a="{",s.isTexture&&(a+=s.mapping),a+="}"):a=String(s)}else a=String(s);n+=a+","}return n+=this.clippingContextCacheKey+",",e.geometry&&(n+=this.getGeometryCacheKey()),e.skeleton&&(n+=e.skeleton.bones.length+","),e.isBatchedMesh&&(n+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(n+=e._colorsTexture.uuid+",")),e.count>1&&(n+=e.uuid+","),n+=e.receiveShadow+",",Iz(n)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=Xw(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=Xw(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const $d=[];class AAe{constructor(e,t,n,r,s,a){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=r,this.bindings=s,this.info=a,this.chainMaps={}}get(e,t,n,r,s,a,o,l){const c=this.getChainMap(l);$d[0]=e,$d[1]=t,$d[2]=a,$d[3]=s;let u=c.get($d);return u===void 0?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,s,a,o,l),c.set($d,u)):(u.updateClipping(o),u.needsGeometryUpdate&&u.setGeometry(e.geometry),(u.version!==t.version||u.needsUpdate)&&(u.initialCacheKey!==u.getCacheKey()?(u.dispose(),u=this.get(e,t,n,r,s,a,o,l)):u.version=t.version)),$d.length=0,u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new Ic)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,r,s,a,o,l,c,u,h){const d=this.getChainMap(h),A=new pAe(e,t,n,r,s,a,o,l,c,u);return A.onDispose=()=>{this.pipelines.delete(A),this.bindings.delete(A),this.nodes.delete(A),d.delete(A.getChainArray())},A}}class vd{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Ul={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Yf=16,gAe=211,mAe=212;class vAe extends vd{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===Ul.VERTEX?this.backend.createAttribute(e):t===Ul.INDEX?this.backend.createIndexAttribute(e):t===Ul.STORAGE?this.backend.createStorageAttribute(e):t===Ul.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const r=this._getBufferAttribute(e);(n.version<r.version||r.usage===k0)&&(this.backend.updateAttribute(e),n.version=r.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function lq(i){return i.index!==null?i.index.version:i.attributes.position.version}function EI(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const s=t.array;for(let a=0,o=s.length;a<o;a+=3){const l=s[a+0],c=s[a+1],u=s[a+2];e.push(l,c,c,u,u,l)}}else{const s=n.array;for(let a=0,o=s.length/3-1;a<o;a+=3){const l=a+0,c=a+1,u=a+2;e.push(l,c,c,u,u,l)}}const r=new(y6(e)?S6:w6)(e,1);return r.version=lq(i),r}class yAe extends vd{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const r=()=>{this.info.memory.geometries--;const s=t.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of a)this.attributes.delete(l);const o=this.wireframes.get(t);o!==void 0&&this.attributes.delete(o),t.removeEventListener("dispose",r)};t.addEventListener("dispose",r)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,Ul.STORAGE):this.updateAttribute(s,Ul.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,Ul.INDEX);const r=e.geometry.indirect;r!==null&&this.updateAttribute(r,Ul.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let r=t.index;if(n.wireframe===!0){const s=this.wireframes;let a=s.get(t);a===void 0?(a=EI(t),s.set(t,a)):a.version!==lq(t)&&(this.attributes.delete(a),a=EI(t),s.set(t,a)),r=a}return r}}class xAe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class cq{constructor(e){this.cacheKey=e,this.usedTimes=0}}class bAe extends cq{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class _Ae extends cq{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let wAe=0;class qE{constructor(e,t,n,r=null,s=null){this.id=wAe++,this.code=e,this.stage=t,this.name=n,this.transforms=r,this.attributes=s,this.usedTimes=0}}class SAe extends vd{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,r=this.get(e);if(this._needsComputeUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let o=this.programs.compute.get(a.computeShader);o===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),o=new qE(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),n.createProgram(o));const l=this._getComputeCacheKey(e,o);let c=this.caches.get(l);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getComputePipeline(e,o,l,t)),c.usedTimes++,o.usedTimes++,r.version=e.version,r.pipeline=c}return r.pipeline}getForRender(e,t=null){const{backend:n}=this,r=this.get(e);if(this._needsRenderUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState(),o=e.material?e.material.name:"";let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new qE(a.vertexShader,"vertex",o),this.programs.vertex.set(a.vertexShader,l),n.createProgram(l));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new qE(a.fragmentShader,"fragment",o),this.programs.fragment.set(a.fragmentShader,c),n.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let h=this.caches.get(u);h===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),h=this._getRenderPipeline(e,l,c,u,t)):e.pipeline=h,h.usedTimes++,l.usedTimes++,c.usedTimes++,r.pipeline=h}return r.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,r){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new _Ae(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,r)),s}_getRenderPipeline(e,t,n,r,s){r=r||this._getRenderCacheKey(e,t,n);let a=this.caches.get(r);return a===void 0&&(a=new bAe(r,t,n),this.caches.set(r,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class TAe extends vd{constructor(e,t,n,r,s,a){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=r,this.nodes=t,this.info=a,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,r=n.isIndirectStorageBufferAttribute?Ul.INDIRECT:Ul.STORAGE;this.attributes.update(n,r)}}_update(e,t){const{backend:n}=this;let r=!1,s=!0,a=0,o=0;for(const l of e.bindings)if(!(l.isNodeUniformsGroup&&this.nodes.updateGroup(l)===!1)){if(l.isStorageBuffer){const c=l.attribute,u=c.isIndirectStorageBufferAttribute?Ul.INDIRECT:Ul.STORAGE;this.attributes.update(c,u)}if(l.isUniformBuffer)l.update()&&n.updateBinding(l);else if(l.isSampler)l.update();else if(l.isSampledTexture){const c=this.textures.get(l.texture);l.needsBindingsUpdate(c.generation)&&(r=!0);const u=l.update(),h=l.texture;u&&this.textures.updateTexture(h);const d=n.get(h);if(d.externalTexture!==void 0||c.isDefaultTexture?s=!1:(a=a*10+h.id,o+=h.version),n.isWebGPUBackend===!0&&d.texture===void 0&&d.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",l,u,h,l.textureNode.value,r),this.textures.updateTexture(h),r=!0),h.isStorageTexture===!0){const A=this.get(h);l.store===!0?A.needsMipmap=!0:this.textures.needsMipmaps(h)&&A.needsMipmap===!0&&(this.backend.generateMipmaps(h),A.needsMipmap=!1)}}}r===!0&&this.backend.updateBindings(e,t,s?a:0,o)}}function MAe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?i.z-e.z:i.id-e.id}function CI(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function RI(i){return(i.transmission>0||i.transmissionNode)&&i.side===ws&&i.forceSinglePass===!1}class EAe{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,r,s,a,o){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:s,group:a,clippingContext:o},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.groupOrder=r,l.renderOrder=e.renderOrder,l.z=s,l.group=a,l.clippingContext=o),this.renderItemsIndex++,l}push(e,t,n,r,s,a,o){const l=this.getNextRenderItem(e,t,n,r,s,a,o);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(RI(n)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,t,n,r,s,a,o){const l=this.getNextRenderItem(e,t,n,r,s,a,o);n.transparent===!0||n.transmission>0?(RI(n)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||MAe),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||CI),this.transparent.length>1&&this.transparent.sort(t||CI)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const Gv=[];class CAe{constructor(e){this.lighting=e,this.lists=new Ic}get(e,t){const n=this.lists;Gv[0]=e,Gv[1]=t;let r=n.get(Gv);return r===void 0&&(r=new EAe(this.lighting,e,t),n.set(Gv,r)),Gv.length=0,r}dispose(){this.lists=new Ic}}let RAe=0;class PAe{constructor(){this.id=RAe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Cn,this.scissor=!1,this.scissorValue=new Cn,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return uq(this)}}function uq(i){const{textures:e,activeCubeFace:t}=i,n=[t];for(const r of e)n.push(r.id);return jS(n)}const Vv=[],NAe=new IS,LAe=new Zx;class DAe{constructor(){this.chainMaps={}}get(e,t,n=null){Vv[0]=e,Vv[1]=t;let r;if(n===null)r="default";else{const o=n.texture.format;r=`${n.textures.length}:${o}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(r);let a=s.get(Vv);return a===void 0&&(a=new PAe,s.set(Vv,a)),Vv.length=0,n!==null&&(a.sampleCount=n.samples===0?1:n.samples),a}getForClear(e=null){return this.get(NAe,LAe,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new Ic)}dispose(){this.chainMaps={}}}const kAe=new pe;class OAe extends vd{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),r=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),a=e.textures,o=this.getSize(a[0]),l=o.width>>t,c=o.height>>t;let u=e.depthTexture||s[t];const h=e.depthBuffer===!0||e.stencilBuffer===!0;let d=!1;u===void 0&&h&&(u=new sl,u.format=e.stencilBuffer?il:nl,u.type=e.stencilBuffer?tl:br,u.image.width=l,u.image.height=c,u.image.depth=o.depth,u.isArrayTexture=e.multiview===!0&&o.depth>1,s[t]=u),(n.width!==o.width||o.height!==n.height)&&(d=!0,u&&(u.needsUpdate=!0,u.image.width=l,u.image.height=c,u.image.depth=u.isArrayTexture?u.image.depth:1)),n.width=o.width,n.height=o.height,n.textures=a,n.depthTexture=u||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==r&&(d=!0,u&&(u.needsUpdate=!0),n.sampleCount=r);const A={sampleCount:r};if(e.isXRRenderTarget!==!0){for(let x=0;x<a.length;x++){const _=a[x];d&&(_.needsUpdate=!0),this.updateTexture(_,A)}u&&this.updateTexture(u,A)}if(n.initialized!==!0){n.initialized=!0;const x=()=>{e.removeEventListener("dispose",x);for(let _=0;_<a.length;_++)this._destroyTexture(a[_]);u&&this._destroyTexture(u),this.delete(e)};e.addEventListener("dispose",x)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const r=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(r&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const c=this.renderer.getRenderTarget();c?e.type=c.texture.type:e.type=$r}const{width:a,height:o,depth:l}=this.getSize(e);if(t.width=a,t.height=o,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,a,o):1,r||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const u=e.image;if(u===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(u.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const h=[];for(const d of e.images)h.push(d);t.images=h}else t.image=u;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e)};e.addEventListener("dispose",c)}n.version=e.version}getSize(e,t=kAe){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let r;return e.isCompressedTexture?e.mipmaps?r=e.mipmaps.length:r=1:r=Math.floor(Math.log2(Math.max(t,n)))+1,r}needsMipmaps(e){return e.isCompressedTexture===!0||e.generateMipmaps}_destroyTexture(e){this.has(e)===!0&&(this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e),this.info.memory.textures--)}}class tP extends un{constructor(e,t,n,r=1){super(e,t,n),this.a=r}set(e,t,n,r=1){return this.a=r,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class hq extends $i{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const IAe=(i,e)=>rt(new hq(i,e));class BAe extends Pn{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.outputNode?this.outputNode.getMemberType(e,t):"void"}add(e){return this.nodes.push(e),this}If(e,t){const n=new G0(t);return this._currentCond=Fs(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new G0(t),r=Fs(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new G0(e),this}Switch(e){return this._expressionNode=rt(e),this}Case(...e){const t=[];if(e.length>=2)for(let o=0;o<e.length-1;o++)t.push(this._expressionNode.equal(rt(e[o])));else throw new Error("TSL: Invalid parameter length. Case() requires at least two parameters.");const n=e[e.length-1],r=new G0(n);let s=t[0];for(let o=1;o<t.length;o++)s=s.or(t[o]);const a=Fs(s,r);return this._currentCond===null?(this._currentCond=a,this.add(this._currentCond)):(this._currentCond.elseNode=a,this._currentCond=a,this)}Default(e){return this.Else(e),this}build(e,...t){const n=o8();bx(this);const r=e.buildStage;for(const s of this.nodes)if(r==="setup")s.build(e);else if(r==="analyze")s.build(e,this);else if(r==="generate"){const a=e.getDataFromNode(s,"any").stages,o=a&&a[e.shaderStage];if(s.isVarNode&&o&&o.length===1&&o[0]&&o[0].isStackNode)continue;s.build(e,"void")}return bx(n),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}else(...e){return console.warn("THREE.TSL: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("THREE.TSL: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const q_=ot(BAe).setParameterLength(0,1);function FAe(i){return Object.entries(i).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class UAe extends Pn{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=FAe(e),this.name=t,this.isStructLayoutNode=!0}getLength(){const t=Float32Array.BYTES_PER_ELEMENT;let n=0;for(const r of this.membersLayout){const s=r.type,a=The(s)*t,o=Mhe(s),l=n%8,c=l%o,u=l+c;n+=c,u!==0&&8-u<a&&(n+=8-u),n+=a}return Math.ceil(n/8)*8/t}getMemberType(e,t){const n=this.membersLayout.find(r=>r.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.addInclude(this)}generate(e){return this.getNodeType(e)}}class zAe extends Pn{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structLayoutNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structLayoutNode.getNodeType(e)}getMemberType(e,t){return this.structLayoutNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,r=e.getPropertyName(t);return e.addLineFlowCode(`${r} = ${e.generateStruct(n,this.structLayoutNode.membersLayout,this.values)}`,this),t.name}}const GAe=(i,e=null)=>{const t=new UAe(i,e),n=(...r)=>{let s=null;if(r.length>0)if(r[0].isNode){s={};const a=Object.keys(i);for(let o=0;o<r.length;o++)s[a[o]]=r[o]}else s=r[0];return rt(new zAe(t,s))};return n.layout=t,n.isStruct=!0,n};class fq extends Pn{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,r=[];for(let s=0;s<n.length;s++){const a="m"+s,o=n[s].getNodeType(e);r.push({name:a,type:o,index:s})}t.membersLayout=r,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,r=t!==""?t+".":"";for(let s=0;s<n.length;s++){const a=n[s].build(e);e.addLineFlowCode(`${r}m${s} = ${a}`,this)}return t}}const VAe=ot(fq);function dq(i,e){for(let t=0;t<i.length;t++)if(i[t].name===e)return t;return-1}class HAe extends fq{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return pq(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),r=[],s=n.textures;for(const a in t){const o=dq(s,a);r[o]=An(t[a])}return this.members=r,super.setup(e)}}const pq=ot(HAe),qAe=ke(([i])=>{const e=i.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),ER=(i,e)=>Sc(ei(4,i.mul(Mi(1,i))),e),WAe=(i,e)=>i.lessThan(.5)?ER(i.mul(2),e).div(2):Mi(1,ER(ei(Mi(1,i),2),e).div(2)),jAe=(i,e,t)=>Sc(Wl(Sc(i,e),ms(Sc(i,e),Sc(Mi(1,i),t))),1/e),XAe=(i,e)=>el(eS.mul(e.mul(i).sub(1))).div(eS.mul(e.mul(i).sub(1))),vh=ke(([i])=>i.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),YAe=ke(([i])=>Re(vh(i.z.add(vh(i.y.mul(1)))),vh(i.z.add(vh(i.x.mul(1)))),vh(i.y.add(vh(i.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),$Ae=ke(([i,e,t])=>{const n=Re(i).toVar(),r=ve(1.4).toVar(),s=ve(0).toVar(),a=Re(n).toVar();return Yi({start:ve(0),end:ve(3),type:"float",condition:"<="},()=>{const o=Re(YAe(a.mul(2))).toVar();n.addAssign(o.add(t.mul(ve(.1).mul(e)))),a.mulAssign(1.8),r.mulAssign(1.5),n.mulAssign(1.2);const l=ve(vh(n.z.add(vh(n.x.add(vh(n.y)))))).toVar();s.addAssign(l.div(r)),a.addAssign(.14)}),s}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class QAe extends Pn{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let r=null,s=-1;for(const a of this.functionNodes){const l=a.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const c=l.inputs;if(t.length===c.length){let u=0;for(let h=0;h<t.length;h++){const d=t[h],A=c[h];d.getNodeType(e)===A.type?u++:u=0}u>s&&(r=a,s=u)}}this._candidateFnCall=n=r(...t)}return n}}const ZAe=ot(QAe),Ta=i=>(...e)=>ZAe(i,...e),oA=gn(0).setGroup(En).onRenderUpdate(i=>i.time),Aq=gn(0).setGroup(En).onRenderUpdate(i=>i.deltaTime),KAe=gn(0,"uint").setGroup(En).onRenderUpdate(i=>i.frameId),JAe=(i=1)=>(console.warn('TSL: timerLocal() is deprecated. Use "time" instead.'),oA.mul(i)),e0e=(i=1)=>(console.warn('TSL: timerGlobal() is deprecated. Use "time" instead.'),oA.mul(i)),t0e=(i=1)=>(console.warn('TSL: timerDelta() is deprecated. Use "deltaTime" instead.'),Aq.mul(i)),n0e=(i=oA)=>i.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),i0e=(i=oA)=>i.fract().round(),r0e=(i=oA)=>i.add(.5).fract().mul(2).sub(1).abs(),s0e=(i=oA)=>i.fract(),a0e=ke(([i,e,t=mt(.5)])=>pT(i.sub(t),e).add(t)),o0e=ke(([i,e,t=mt(.5)])=>{const n=i.sub(t),r=n.dot(n),a=r.mul(r).mul(e);return i.add(n.mul(a))}),l0e=ke(({position:i=null,horizontal:e=!0,vertical:t=!1})=>{let n;i!==null?(n=Fl.toVar(),n[3][0]=i.x,n[3][1]=i.y,n[3][2]=i.z):n=Fl;const r=No.mul(n);return xx(e)&&(r[0][0]=Fl[0].length(),r[0][1]=0,r[0][2]=0),xx(t)&&(r[1][0]=0,r[1][1]=Fl[1].length(),r[1][2]=0),r[2][0]=0,r[2][1]=0,r[2][2]=1,sA.mul(r).mul(rs)}),c0e=ke(([i=null])=>{const e=iS();return iS(q8(i)).sub(e).lessThan(0).select(Rc,i)});class u0e extends Pn{static get type(){return"SpriteSheetUVNode"}constructor(e,t=kr(),n=ve(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:r,height:s}=n,a=e.mod(r.mul(s)).floor(),o=a.mod(r),l=s.sub(a.add(1).div(r).ceil()),c=n.reciprocal(),u=mt(o,l);return t.add(u).mul(c)}}const h0e=ot(u0e).setParameterLength(3);class f0e extends Pn{static get type(){return"TriplanarTexturesNode"}constructor(e,t=null,n=null,r=ve(1),s=rs,a=Po){super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=n,this.scaleNode=r,this.positionNode=s,this.normalNode=a}setup(){const{textureXNode:e,textureYNode:t,textureZNode:n,scaleNode:r,positionNode:s,normalNode:a}=this;let o=a.abs().normalize();o=o.div(o.dot(Re(1)));const l=s.yz.mul(r),c=s.zx.mul(r),u=s.xy.mul(r),h=e.value,d=t!==null?t.value:h,A=n!==null?n.value:h,x=gi(h,l).mul(o.x),_=gi(d,c).mul(o.y),S=gi(A,u).mul(o.z);return ms(x,_,S)}}const gq=ot(f0e).setParameterLength(1,6),d0e=(...i)=>gq(...i),v0=new iu,Qd=new pe,y0=new pe,WE=new pe,Hv=new Un,G2=new pe(0,0,-1),Zc=new Cn,qv=new pe,V2=new pe,Wv=new Cn,H2=new lt,rS=new Hh,p0e=Rc.flipX();rS.depthTexture=new sl(1,1);let q2=!1;class nP extends Mu{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||rS.texture,p0e),this._reflectorBaseNode=e.reflector||new A0e(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=rt(new nP({defaultTexture:rS.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e._reflectorBaseNode=this._reflectorBaseNode,e}dispose(){super.dispose(),this._reflectorBaseNode.dispose()}}class A0e extends Pn{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new Lr,resolution:r=1,generateMipmaps:s=!1,bounces:a=!0,depth:o=!1}=t;this.textureNode=e,this.target=n,this.resolution=r,this.generateMipmaps=s,this.bounces=a,this.depth=o,this.updateBeforeType=a?ai.RENDER:ai.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new Map,this.forceUpdate=!1,this.hasOutput=!1}_updateResolution(e,t){const n=this.resolution;t.getDrawingBufferSize(H2),e.setSize(Math.round(H2.width*n),Math.round(H2.height*n))}setup(e){return this._updateResolution(rS,e.renderer),super.setup(e)}dispose(){super.dispose();for(const e of this.renderTargets.values())e.dispose()}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new Hh(0,0,{type:Ss}),this.generateMipmaps===!0&&(t.texture.minFilter=MZ,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new sl),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&q2)return!1;q2=!0;const{scene:t,camera:n,renderer:r,material:s}=e,{target:a}=this,o=this.getVirtualCamera(n),l=this.getRenderTarget(o);r.getDrawingBufferSize(H2),this._updateResolution(l,r),y0.setFromMatrixPosition(a.matrixWorld),WE.setFromMatrixPosition(n.matrixWorld),Hv.extractRotation(a.matrixWorld),Qd.set(0,0,1),Qd.applyMatrix4(Hv),qv.subVectors(y0,WE);const c=qv.dot(Qd)>0;let u=!1;if(c===!0&&this.forceUpdate===!1){if(this.hasOutput===!1){q2=!1;return}u=!0}qv.reflect(Qd).negate(),qv.add(y0),Hv.extractRotation(n.matrixWorld),G2.set(0,0,-1),G2.applyMatrix4(Hv),G2.add(WE),V2.subVectors(y0,G2),V2.reflect(Qd).negate(),V2.add(y0),o.coordinateSystem=n.coordinateSystem,o.position.copy(qv),o.up.set(0,1,0),o.up.applyMatrix4(Hv),o.up.reflect(Qd),o.lookAt(V2),o.near=n.near,o.far=n.far,o.updateMatrixWorld(),o.projectionMatrix.copy(n.projectionMatrix),v0.setFromNormalAndCoplanarPoint(Qd,y0),v0.applyMatrix4(o.matrixWorldInverse),Zc.set(v0.normal.x,v0.normal.y,v0.normal.z,v0.constant);const h=o.projectionMatrix;Wv.x=(Math.sign(Zc.x)+h.elements[8])/h.elements[0],Wv.y=(Math.sign(Zc.y)+h.elements[9])/h.elements[5],Wv.z=-1,Wv.w=(1+h.elements[10])/h.elements[14],Zc.multiplyScalar(1/Zc.dot(Wv));const d=0;h.elements[2]=Zc.x,h.elements[6]=Zc.y,h.elements[10]=r.coordinateSystem===bu?Zc.z-d:Zc.z+1-d,h.elements[14]=Zc.w,this.textureNode.value=l.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=l.depthTexture),s.visible=!1;const A=r.getRenderTarget(),x=r.getMRT(),_=r.autoClear;r.setMRT(null),r.setRenderTarget(l),r.autoClear=!0,u?(r.clear(),this.hasOutput=!1):(r.render(t,o),this.hasOutput=!0),r.setMRT(x),r.setRenderTarget(A),r.autoClear=_,s.visible=!0,q2=!1,this.forceUpdate=!1}}const g0e=i=>rt(new nP(i)),jE=new e1(-1,1,1,-1,0,1);class m0e extends lr{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new ki([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ki(t,2))}}const v0e=new m0e;class AT extends zi{constructor(e=null){super(v0e,e),this.camera=jE,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,jE)}render(e){e.render(this,jE)}}const y0e=new lt;class x0e extends Mu{static get type(){return"RTTNode"}constructor(e,t=null,n=null,r={type:Ss}){const s=new Hh(t,n,r);super(s.texture,kr()),this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=s,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new AT(new cs),this.updateBeforeType=ai.RENDER}get autoSize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,r=t*this.pixelRatio;this.renderTarget.setSize(n,r),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoSize===!0){this.pixelRatio=e.getPixelRatio();const n=e.getSize(y0e);this.setSize(n.width,n.height)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new Mu(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const mq=(i,...e)=>rt(new x0e(rt(i),...e)),b0e=(i,...e)=>i.isTextureNode?i:i.isPassNode?i.getTextureNode():mq(i,...e),L0=ke(([i,e,t],n)=>{let r;n.renderer.coordinateSystem===bu?(i=mt(i.x,i.y.oneMinus()).mul(2).sub(1),r=An(Re(i,e),1)):r=An(Re(i.x,i.y.oneMinus(),e).mul(2).sub(1),1);const s=An(t.mul(r));return s.xyz.div(s.w)}),_0e=ke(([i,e])=>{const t=e.mul(An(i,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return mt(n.x,n.y.oneMinus())}),w0e=ke(([i,e,t])=>{const n=id(ts(e)),r=Is(i.mul(n)).toVar(),s=ts(e,r).toVar(),a=ts(e,r.sub(Is(2,0))).toVar(),o=ts(e,r.sub(Is(1,0))).toVar(),l=ts(e,r.add(Is(1,0))).toVar(),c=ts(e,r.add(Is(2,0))).toVar(),u=ts(e,r.add(Is(0,2))).toVar(),h=ts(e,r.add(Is(0,1))).toVar(),d=ts(e,r.sub(Is(0,1))).toVar(),A=ts(e,r.sub(Is(0,2))).toVar(),x=_r(Mi(ve(2).mul(o).sub(a),s)).toVar(),_=_r(Mi(ve(2).mul(l).sub(c),s)).toVar(),S=_r(Mi(ve(2).mul(h).sub(u),s)).toVar(),w=_r(Mi(ve(2).mul(d).sub(A),s)).toVar(),C=L0(i,s,t).toVar(),P=x.lessThan(_).select(C.sub(L0(i.sub(mt(ve(1).div(n.x),0)),o,t)),C.negate().add(L0(i.add(mt(ve(1).div(n.x),0)),l,t))),L=S.lessThan(w).select(C.sub(L0(i.add(mt(0,ve(1).div(n.y))),h,t)),C.negate().add(L0(i.sub(mt(0,ve(1).div(n.y))),d,t)));return Bh(iT(P,L))});class W_ extends nd{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageInstancedBufferAttribute=!0}}class S0e extends Vr{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageBufferAttribute=!0}}const T0e=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=$w("float")):(t=Uz(e),n=$w(e));const r=new S0e(i,t,n);return Ip(r,e,i)},M0e=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=$w("float")):(t=Uz(e),n=$w(e));const r=new W_(i,t,n);return Ip(r,e,i)};class E0e extends Pn{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const C0e=Ft(E0e),jv=new ba,XE=new Un;class wo extends Pn{static get type(){return"SceneNode"}constructor(e=wo.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let r;return t===wo.BACKGROUND_BLURRINESS?r=fr("backgroundBlurriness","float",n):t===wo.BACKGROUND_INTENSITY?r=fr("backgroundIntensity","float",n):t===wo.BACKGROUND_ROTATION?r=gn("mat4").label("backgroundRotation").setGroup(En).onRenderUpdate(()=>{const s=n.background;return s!==null&&s.isTexture&&s.mapping!==l6?(jv.copy(n.backgroundRotation),jv.x*=-1,jv.y*=-1,jv.z*=-1,XE.makeRotationFromEuler(jv)):XE.identity(),XE}):console.error("THREE.SceneNode: Unknown scope:",t),r}}wo.BACKGROUND_BLURRINESS="backgroundBlurriness";wo.BACKGROUND_INTENSITY="backgroundIntensity";wo.BACKGROUND_ROTATION="backgroundRotation";const vq=Ft(wo,wo.BACKGROUND_BLURRINESS),CR=Ft(wo,wo.BACKGROUND_INTENSITY),yq=Ft(wo,wo.BACKGROUND_ROTATION);class R0e extends Mu{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=Ia.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);return t.storeNode=this.storeNode,t}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(Ia.READ_WRITE)}toReadOnly(){return this.setAccess(Ia.READ_ONLY)}toWriteOnly(){return this.setAccess(Ia.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:r,depthNode:s}=t,a=super.generate(e,"property"),o=n.build(e,"uvec2"),l=r.build(e,"vec4"),c=s?s.build(e,"int"):null,u=e.generateTextureStore(e,a,o,c,l);e.addLineFlowCode(u,this)}clone(){const e=super.clone();return e.storeNode=this.storeNode,e}}const xq=ot(R0e).setParameterLength(1,3),P0e=(i,e,t)=>{const n=xq(i,e,t);return t!==null&&n.toStack(),n},N0e=ke(({texture:i,uv:e})=>{const n=Re().toVar();return ti(e.x.lessThan(1e-4),()=>{n.assign(Re(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(Re(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(Re(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(Re(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(Re(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(Re(0,0,-1))}).Else(()=>{const s=i.sample(e.add(Re(-.01,0,0))).r.sub(i.sample(e.add(Re(.01,0,0))).r),a=i.sample(e.add(Re(0,-.01,0))).r.sub(i.sample(e.add(Re(0,.01,0))).r),o=i.sample(e.add(Re(0,0,-.01))).r.sub(i.sample(e.add(Re(0,0,.01))).r);n.assign(Re(s,a,o))}),n.normalize()});class L0e extends Mu{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return Re(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(Se(id(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}normal(e){return N0e({texture:this,uv:e})}}const bq=ot(L0e).setParameterLength(1,3);class D0e extends cT{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const k0e=(i,e,t)=>rt(new D0e(i,e,t)),PI=new WeakMap;class O0e extends us{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=ai.OBJECT,this.updateAfterType=ai.OBJECT,this.previousModelWorldMatrix=gn(new Un),this.previousProjectionMatrix=gn(new Un).setGroup(En),this.previousCameraViewMatrix=gn(new Un)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const r=NI(n);this.previousModelWorldMatrix.value.copy(r);const s=_q(t);s.frameId!==e&&(s.frameId=e,s.previousProjectionMatrix===void 0?(s.previousProjectionMatrix=new Un,s.previousCameraViewMatrix=new Un,s.currentProjectionMatrix=new Un,s.currentCameraViewMatrix=new Un,s.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(s.previousProjectionMatrix.copy(s.currentProjectionMatrix),s.previousCameraViewMatrix.copy(s.currentCameraViewMatrix)),s.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(s.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(s.previousCameraViewMatrix))}updateAfter({object:e}){NI(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?sA:gn(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(aA).mul(rs),r=this.previousProjectionMatrix.mul(t).mul(nS),s=n.xy.div(n.w),a=r.xy.div(r.w);return Mi(s,a)}}function _q(i){let e=PI.get(i);return e===void 0&&(e={},PI.set(i,e)),e}function NI(i,e=0){const t=_q(i);let n=t[e];return n===void 0&&(t[e]=n=new Un,t[e].copy(i.matrixWorld)),n}const I0e=Ft(O0e),wq=ke(([i,e])=>Ro(1,i.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Sq=ke(([i,e])=>Ro(i.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Tq=ke(([i,e])=>i.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Mq=ke(([i,e])=>Xi(i.mul(2).mul(e),i.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),nT(.5,i))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),B0e=ke(([i,e])=>{const t=e.a.add(i.a.mul(e.a.oneMinus()));return An(e.rgb.mul(e.a).add(i.rgb.mul(i.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),F0e=ke(([i])=>An(i.rgb.mul(i.a),i.a),{color:"vec4",return:"vec4"}),U0e=ke(([i])=>(ti(i.a.equal(0),()=>An(0)),An(i.rgb.div(i.a),i.a)),{color:"vec4",return:"vec4"}),z0e=(...i)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),wq(i)),G0e=(...i)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),Sq(i)),V0e=(...i)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),Tq(i)),H0e=(...i)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),Mq(i)),q0e=ke(([i])=>iP(i.rgb)),W0e=ke(([i,e=ve(1)])=>e.mix(iP(i.rgb),i.rgb)),j0e=ke(([i,e=ve(1)])=>{const t=ms(i.r,i.g,i.b).div(3),n=i.r.max(i.g.max(i.b)),r=n.sub(t).mul(e).mul(-3);return Xi(i.rgb,n,r)}),X0e=ke(([i,e=ve(1)])=>{const t=Re(.57735,.57735,.57735),n=e.cos();return Re(i.rgb.mul(n).add(t.cross(i.rgb).mul(e.sin()).add(t.mul(md(t,i.rgb).mul(n.oneMinus())))))}),iP=(i,e=Re(qn.getLuminanceCoefficients(new pe)))=>md(i,e),Y0e=ke(([i,e=Re(1),t=Re(0),n=Re(1),r=ve(1),s=Re(qn.getLuminanceCoefficients(new pe,Cc))])=>{const a=i.rgb.dot(Re(s)),o=Qr(i.rgb.mul(e).add(t),0).toVar(),l=o.pow(n).toVar();return ti(o.r.greaterThan(0),()=>{o.r.assign(l.r)}),ti(o.g.greaterThan(0),()=>{o.g.assign(l.g)}),ti(o.b.greaterThan(0),()=>{o.b.assign(l.b)}),o.assign(a.add(o.sub(a).mul(r))),An(o.rgb,i.a)});class $0e extends us{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const Q0e=ot($0e).setParameterLength(2),W2=new lt;class Eq extends Mu{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class LI extends Eq{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class Eu extends us{static get type(){return"PassNode"}constructor(e,t,n,r={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=r,this._pixelRatio=1,this._width=1,this._height=1;const s=new sl;s.isRenderTargetTexture=!0,s.name="depth";const a=new Hh(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ss,...r});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=gn(0),this._cameraFar=gn(0),this._mrt=null,this._layers=null,this._resolution=1,this.isPassNode=!0,this.updateBeforeType=ai.FRAME,this.global=!0}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=rt(new LI(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=rt(new LI(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=W8(this.getTextureNode(e),n,r)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=ng(s,n,r)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.texture.type=e.getColorBufferType(),this.scope===Eu.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let r,s;const a=t.getOutputRenderTarget();a&&a.isXRRenderTarget===!0?(s=1,r=t.xr.getCamera(),t.xr.updateCamera(r),W2.set(a.width,a.height)):(r=this.camera,s=t.getPixelRatio(),t.getSize(W2)),this._pixelRatio=s,this.setSize(W2.width,W2.height);const o=t.getRenderTarget(),l=t.getMRT(),c=r.layers.mask;this._cameraNear.value=r.near,this._cameraFar.value=r.far,this._layers!==null&&(r.layers.mask=this._layers.mask);for(const u in this._previousTextures)this.toggleTexture(u);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(o),t.setMRT(l),r.layers.mask=c}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,r=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}Eu.COLOR="color";Eu.DEPTH="depth";const Z0e=(i,e,t)=>rt(new Eu(Eu.COLOR,i,e,t)),K0e=(i,e)=>rt(new Eq(i,e)),J0e=(i,e,t)=>rt(new Eu(Eu.DEPTH,i,e,t));class ege extends Eu{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,r,s){super(Eu.COLOR,e,t),this.colorNode=n,this.thicknessNode=r,this.alphaNode=s,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((r,s,a,o,l,c,u,h)=>{if((l.isMeshToonMaterial||l.isMeshToonNodeMaterial)&&l.wireframe===!1){const d=this._getOutlineMaterial(l);t.renderObject(r,s,a,o,d,c,u,h)}t.renderObject(r,s,a,o,l,c,u,h)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new cs;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=sr;const t=Po.negate(),n=sA.mul(aA),r=ve(1),s=n.mul(An(rs,1)),a=n.mul(An(rs.add(t),1)),o=Bh(s.sub(a));return e.vertexNode=s.add(o.mul(this.thicknessNode).mul(s.w).mul(r)),e.colorNode=An(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const tge=(i,e,t=new un(0,0,0),n=.003,r=1)=>rt(new ege(i,e,rt(t),rt(n),rt(r))),Cq=ke(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Rq=ke(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Pq=ke(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),nge=ke(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),Nq=ke(([i,e])=>{const t=za(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=za(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=nge(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),ige=za(Re(1.6605,-.1246,-.0182),Re(-.5876,1.1329,-.1006),Re(-.0728,-.0083,1.1187)),rge=za(Re(.6274,.0691,.0164),Re(.3293,.9195,.088),Re(.0433,.0113,.8956)),sge=ke(([i])=>{const e=Re(i).toVar(),t=Re(e.mul(e)).toVar(),n=Re(t.mul(t)).toVar();return ve(15.5).mul(n.mul(t)).sub(ei(40.14,n.mul(e))).add(ei(31.96,n).sub(ei(6.868,t.mul(e))).add(ei(.4298,t).add(ei(.1191,e).sub(.00232))))}),Lq=ke(([i,e])=>{const t=Re(i).toVar(),n=za(Re(.856627153315983,.137318972929847,.11189821299995),Re(.0951212405381588,.761241990602591,.0767994186031903),Re(.0482516061458583,.101439036467562,.811302368396859)),r=za(Re(1.1271005818144368,-.1413297634984383,-.14132976349843826),Re(-.11060664309660323,1.157823702216272,-.11060664309660294),Re(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=ve(-12.47393),a=ve(4.026069);return t.mulAssign(e),t.assign(rge.mul(t)),t.assign(n.mul(t)),t.assign(Qr(t,1e-10)),t.assign(Au(t)),t.assign(t.sub(s).div(a.sub(s))),t.assign(Su(t,0,1)),t.assign(sge(t)),t.assign(r.mul(t)),t.assign(Sc(Qr(Re(0),t),Re(2.2))),t.assign(ige.mul(t)),t.assign(Su(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Dq=ke(([i,e])=>{const t=ve(.76),n=ve(.15);i=i.mul(e);const r=Ro(i.r,Ro(i.g,i.b)),s=Fs(r.lessThan(.08),r.sub(ei(6.25,r.mul(r))),.04);i.subAssign(s);const a=Qr(i.r,Qr(i.g,i.b));ti(a.lessThan(t),()=>i);const o=Mi(1,t),l=Mi(1,o.mul(o).div(a.add(o.sub(t))));i.mulAssign(l.div(a));const c=Mi(1,Wl(1,n.mul(a.sub(l)).add(1)));return Xi(i,Re(l),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class xs extends Pn{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=n}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const r of t)r.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const gT=ot(xs).setParameterLength(1,3),age=(i,e)=>gT(i,e,"js"),oge=(i,e)=>gT(i,e,"wgsl"),lge=(i,e)=>gT(i,e,"glsl");class kq extends xs{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),r=n.name,s=n.type,a=e.getCodeFromNode(this,s);r!==""&&(a.name=r);const o=e.getPropertyName(a),l=this.getNodeFunction(e).getCode(o);return a.code=l+`
`,t==="property"?o:e.format(`${o}()`,s,t)}}const Oq=(i,e=[],t="")=>{for(let s=0;s<e.length;s++){const a=e[s];typeof a=="function"&&(e[s]=a.functionNode)}const n=rt(new kq(i,e,t)),r=(...s)=>n.call(...s);return r.functionNode=n,r},cge=(i,e)=>Oq(i,e,"glsl"),uge=(i,e)=>Oq(i,e,"wgsl");class hge extends Pn{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new Nu,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:ve()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=Vz(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=Hz(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const j_=ot(hge).setParameterLength(1);class Iq extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const r=t(...n);return this.set(e,r),r}}}class fge{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const X_=new Iq;class dge extends Pn{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new Iq,this._output=j_(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=j_(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=j_(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r(...t)}async callAsync(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r.constructor.name==="AsyncFunction"?await r(...t):r(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,u)=>this.setOutput(c,u),n=new fge(this),r=X_.get("THREE"),s=X_.get("TSL"),a=this.getMethod(),o=[n,this._local,X_,e,t,r,s];this._object=a(...o);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const c of l.elements){const u=c.id||c.name;c.inputType&&(this.getParameter(u)===void 0&&this.setParameter(u,null),this.getParameter(u).inputType=c.inputType),c.outputType&&(this.getOutput(u)===void 0&&this.setOutput(u,null),this.getOutput(u).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:ve()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),r="var "+n+`; var output = {};
`,s=`
return { ...output, `+n+" };",a=r+this.codeNode.code+s;return this._method=new Function(...e,a),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[Iz(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return jS(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const pge=ot(dge).setParameterLength(1,2);function Bq(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||As.z).negate()}const rP=ke(([i,e],t)=>{const n=Bq(t);return Tu(i,e,n)}),sP=ke(([i],e)=>{const t=Bq(e);return i.mul(i,t,t).negate().exp().oneMinus()}),Cx=ke(([i,e])=>An(e.toFloat().mix(eg.rgb,i.toVec3()),eg.a));function Age(i,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),Cx(i,rP(e,t))}function gge(i,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),Cx(i,sP(e))}let Zd=null,Kd=null;class mge extends Pn{static get type(){return"RangeNode"}constructor(e=ve(),t=ve()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(Qf(this.minNode.value)),n=e.getTypeLength(Qf(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const r=this.minNode.value,s=this.maxNode.value,a=e.getTypeLength(Qf(r)),o=e.getTypeLength(Qf(s));Zd=Zd||new Cn,Kd=Kd||new Cn,Zd.setScalar(0),Kd.setScalar(0),a===1?Zd.setScalar(r):r.isColor?Zd.set(r.r,r.g,r.b,1):Zd.set(r.x,r.y,r.z||0,r.w||0),o===1?Kd.setScalar(s):s.isColor?Kd.set(s.r,s.g,s.b,1):Kd.set(s.x,s.y,s.z||0,s.w||0);const l=4,c=l*t.count,u=new Float32Array(c);for(let d=0;d<c;d++){const A=d%l,x=Zd.getComponent(A),_=Kd.getComponent(A);u[d]=Eg.lerp(x,_,Math.random())}const h=this.getNodeType(e);if(t.count<=4096)n=l1(u,"vec4",t.count).element(rd).convert(h);else{const d=new nd(u,4);e.geometry.setAttribute("__range"+this.id,d),n=tS(d).convert(h)}}else n=ve(0);return n}}const vge=ot(mge).setParameterLength(2);class yge extends Pn{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),r=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,r,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(r))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const m1=(i,e)=>rt(new yge(i,e)),xge=m1("numWorkgroups","uvec3"),bge=m1("workgroupId","uvec3"),_ge=m1("globalId","uvec3"),wge=m1("localId","uvec3"),Sge=m1("subgroupSize","uint");class Tge extends Pn{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const aP=ot(Tge),Mge=()=>aP("workgroup").toStack(),Ege=()=>aP("storage").toStack(),Cge=()=>aP("texture").toStack();class Rge extends rA{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const r=e.context.assign;if(n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}class Pge extends Pn{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e}label(e){return this.name=e,this}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return rt(new Rge(this,e))}generate(e){return e.getScopedArray(this.name||`${this.scope}Array_${this.id}`,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const Nge=(i,e)=>rt(new Pge("Workgroup",i,e));class qs extends Pn{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=e.getNodeProperties(this),n=t.parents,r=this.method,s=this.getNodeType(e),a=this.getInputType(e),o=this.pointerNode,l=this.valueNode,c=[];c.push(`&${o.build(e,a)}`),l!==null&&c.push(l.build(e,a));const u=`${e.getMethod(r,s)}( ${c.join(", ")} )`;if(n.length===1&&n[0].isStackNode===!0)e.addLineFlowCode(u,this);else return t.constNode===void 0&&(t.constNode=Fh(u,s).toConst()),t.constNode.build(e)}}qs.ATOMIC_LOAD="atomicLoad";qs.ATOMIC_STORE="atomicStore";qs.ATOMIC_ADD="atomicAdd";qs.ATOMIC_SUB="atomicSub";qs.ATOMIC_MAX="atomicMax";qs.ATOMIC_MIN="atomicMin";qs.ATOMIC_AND="atomicAnd";qs.ATOMIC_OR="atomicOr";qs.ATOMIC_XOR="atomicXor";const Lge=ot(qs),ku=(i,e,t)=>Lge(i,e,t).toStack(),Dge=i=>ku(qs.ATOMIC_LOAD,i,null),kge=(i,e)=>ku(qs.ATOMIC_STORE,i,e),Oge=(i,e)=>ku(qs.ATOMIC_ADD,i,e),Ige=(i,e)=>ku(qs.ATOMIC_SUB,i,e),Bge=(i,e)=>ku(qs.ATOMIC_MAX,i,e),Fge=(i,e)=>ku(qs.ATOMIC_MIN,i,e),Uge=(i,e)=>ku(qs.ATOMIC_AND,i,e),zge=(i,e)=>ku(qs.ATOMIC_OR,i,e),Gge=(i,e)=>ku(qs.ATOMIC_XOR,i,e);let j2;function mT(i){j2=j2||new WeakMap;let e=j2.get(i);return e===void 0&&j2.set(i,e={}),e}function oP(i){const e=mT(i);return e.shadowMatrix||(e.shadowMatrix=gn("mat4").setGroup(En).onRenderUpdate(t=>((i.castShadow!==!0||t.renderer.shadowMap.enabled===!1)&&i.shadow.updateMatrices(i),i.shadow.matrix)))}function Fq(i,e=Ch){const t=oP(i).mul(e);return t.xyz.div(t.w)}function lP(i){const e=mT(i);return e.position||(e.position=gn(new pe).setGroup(En).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function Uq(i){const e=mT(i);return e.targetPosition||(e.targetPosition=gn(new pe).setGroup(En).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function cP(i){const e=mT(i);return e.viewPosition||(e.viewPosition=gn(new pe).setGroup(En).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new pe,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const uP=i=>No.transformDirection(lP(i).sub(Uq(i))),Vge=i=>i.sort((e,t)=>e.id-t.id),Hge=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},YE=new WeakMap,Xv=[];class hP extends Pn{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Re().toVar(),this.totalSpecularNode=Re().toVar(),this.outgoingLightNode=Re().toVar(),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let n=0;n<e.length;n++){const r=e[n];if(Xv.push(r.id),Xv.push(r.castShadow?1:0),r.isSpotLight===!0){const s=r.map!==null?r.map.id:-1,a=r.colorNode?r.colorNode.getCacheKey():-1;Xv.push(s,a)}}const t=jS(Xv);return Xv.length=0,t}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getSelf().getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getNodeProperties(this);for(const n of t.nodes)n.build(e);t.outputNode.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,r=Vge(this._lights),s=e.renderer.library;for(const a of r)if(a.isNode)t.push(rt(a));else{let o=null;if(n!==null&&(o=Hge(a.id,n)),o===null){const l=s.getLightNodeClass(a.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let c=null;YE.has(a)?c=YE.get(a):(c=rt(new l(a)),YE.set(a,c)),t.push(c)}}this._lightNodes=t}setupDirectLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.direct({...n,lightNode:t,reflectedLight:s},e)}setupDirectRectAreaLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.directRectArea({...n,lightNode:t,reflectedLight:s},e)}setupLights(e,t){for(const n of t)n.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let n=this.outgoingLightNode;const r=e.context,s=r.lightingModel,a=e.getNodeProperties(this);if(s){const{totalDiffuseNode:o,totalSpecularNode:l}=this;r.outgoingLight=n;const c=e.addStack();a.nodes=c.nodes,s.start(e);const{backdrop:u,backdropAlpha:h}=r,{directDiffuse:d,directSpecular:A,indirectDiffuse:x,indirectSpecular:_}=r.reflectedLight;let S=d.add(x);u!==null&&(h!==null?S=Re(h.mix(S,u)):S=Re(u),r.material.transparent=!0),o.assign(S),l.assign(A.add(_)),n.assign(o.add(l)),s.finish(e),n=n.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=t,n}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const qge=(i=[])=>rt(new hP).setLights(i);class Wge extends Pn{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=ai.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){fP.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||Ch)}}const fP=um("vec3","shadowPositionWorld");function jge(i,e={}){return e.toneMapping=i.toneMapping,e.toneMappingExposure=i.toneMappingExposure,e.outputColorSpace=i.outputColorSpace,e.renderTarget=i.getRenderTarget(),e.activeCubeFace=i.getActiveCubeFace(),e.activeMipmapLevel=i.getActiveMipmapLevel(),e.renderObjectFunction=i.getRenderObjectFunction(),e.pixelRatio=i.getPixelRatio(),e.mrt=i.getMRT(),e.clearColor=i.getClearColor(e.clearColor||new un),e.clearAlpha=i.getClearAlpha(),e.autoClear=i.autoClear,e.scissorTest=i.getScissorTest(),e}function Xge(i,e){return e=jge(i,e),i.setMRT(null),i.setRenderObjectFunction(null),i.setClearColor(0,1),i.autoClear=!0,e}function Yge(i,e){i.toneMapping=e.toneMapping,i.toneMappingExposure=e.toneMappingExposure,i.outputColorSpace=e.outputColorSpace,i.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),i.setRenderObjectFunction(e.renderObjectFunction),i.setPixelRatio(e.pixelRatio),i.setMRT(e.mrt),i.setClearColor(e.clearColor,e.clearAlpha),i.autoClear=e.autoClear,i.setScissorTest(e.scissorTest)}function $ge(i,e={}){return e.background=i.background,e.backgroundNode=i.backgroundNode,e.overrideMaterial=i.overrideMaterial,e}function Qge(i,e){return e=$ge(i,e),i.background=null,i.backgroundNode=null,i.overrideMaterial=null,e}function Zge(i,e){i.background=e.background,i.backgroundNode=e.backgroundNode,i.overrideMaterial=e.overrideMaterial}function Kge(i,e,t){return t=Xge(i,t),t=Qge(e,t),t}function Jge(i,e,t){Yge(i,t),Zge(e,t)}const DI=new WeakMap,zq=ke(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{let n=gi(i,e.xy).label("t_basic");return i.isArrayTexture&&(n=n.depth(t)),n.compare(e.z)}),Gq=ke(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const r=(S,w)=>{let C=gi(i,S);return i.isArrayTexture&&(C=C.depth(n)),C.compare(w)},s=fr("mapSize","vec2",t).setGroup(En),a=fr("radius","float",t).setGroup(En),o=mt(1).div(s),l=o.x.negate().mul(a),c=o.y.negate().mul(a),u=o.x.mul(a),h=o.y.mul(a),d=l.div(2),A=c.div(2),x=u.div(2),_=h.div(2);return ms(r(e.xy.add(mt(l,c)),e.z),r(e.xy.add(mt(0,c)),e.z),r(e.xy.add(mt(u,c)),e.z),r(e.xy.add(mt(d,A)),e.z),r(e.xy.add(mt(0,A)),e.z),r(e.xy.add(mt(x,A)),e.z),r(e.xy.add(mt(l,0)),e.z),r(e.xy.add(mt(d,0)),e.z),r(e.xy,e.z),r(e.xy.add(mt(x,0)),e.z),r(e.xy.add(mt(u,0)),e.z),r(e.xy.add(mt(d,_)),e.z),r(e.xy.add(mt(0,_)),e.z),r(e.xy.add(mt(x,_)),e.z),r(e.xy.add(mt(l,h)),e.z),r(e.xy.add(mt(0,h)),e.z),r(e.xy.add(mt(u,h)),e.z)).mul(1/17)}),Vq=ke(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const r=(h,d)=>{let A=gi(i,h);return i.isArrayTexture&&(A=A.depth(n)),A.compare(d)},s=fr("mapSize","vec2",t).setGroup(En),a=mt(1).div(s),o=a.x,l=a.y,c=e.xy,u=jh(c.mul(s).add(.5));return c.subAssign(u.mul(a)),ms(r(c,e.z),r(c.add(mt(o,0)),e.z),r(c.add(mt(0,l)),e.z),r(c.add(a),e.z),Xi(r(c.add(mt(o.negate(),0)),e.z),r(c.add(mt(o.mul(2),0)),e.z),u.x),Xi(r(c.add(mt(o.negate(),l)),e.z),r(c.add(mt(o.mul(2),l)),e.z),u.x),Xi(r(c.add(mt(0,l.negate())),e.z),r(c.add(mt(0,l.mul(2))),e.z),u.y),Xi(r(c.add(mt(o,l.negate())),e.z),r(c.add(mt(o,l.mul(2))),e.z),u.y),Xi(Xi(r(c.add(mt(o.negate(),l.negate())),e.z),r(c.add(mt(o.mul(2),l.negate())),e.z),u.x),Xi(r(c.add(mt(o.negate(),l.mul(2))),e.z),r(c.add(mt(o.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),Hq=ke(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{const n=ve(1).toVar();let r=gi(i).sample(e.xy);i.isArrayTexture&&(r=r.depth(t)),r=r.rg;const s=nT(e.z,r.x);return ti(s.notEqual(ve(1)),()=>{const a=e.z.sub(r.x),o=Qr(0,r.y.mul(r.y));let l=o.div(o.add(a.mul(a)));l=Su(Mi(l,.3).div(.95-.3)),n.assign(Su(Qr(s,l)))}),n}),eme=ke(([i,e,t])=>{let n=Ch.sub(i).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),tme=i=>{const e=i.shadow.camera,t=fr("near","float",e).setGroup(En),n=fr("far","float",e).setGroup(En),r=PV(i);return eme(r,t,n)},qq=i=>{let e=DI.get(i);if(e===void 0){const t=i.isPointLight?tme(i):null;e=new cs,e.colorNode=An(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,DI.set(i,e)}return e},kI=new Ic,x0=[],Wq=(i,e,t,n)=>{x0[0]=i,x0[1]=e;let r=kI.get(x0);return(r===void 0||r.shadowType!==t||r.useVelocity!==n)&&(r=(s,a,o,l,c,u,...h)=>{(s.castShadow===!0||s.receiveShadow&&t===$o)&&(n&&(Gz(s).useVelocity=!0),s.onBeforeShadow(i,s,o,e.camera,l,a.overrideMaterial,u),i.renderObject(s,a,o,l,c,u,...h),s.onAfterShadow(i,s,o,e.camera,l,a.overrideMaterial,u))},r.shadowType=t,r.useVelocity=n,kI.set(x0,r)),x0[0]=null,x0[1]=null,r},nme=ke(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:r})=>{const s=ve(0).toVar("meanVertical"),a=ve(0).toVar("squareMeanVertical"),o=i.lessThanEqual(ve(1)).select(ve(0),ve(2).div(i.sub(1))),l=i.lessThanEqual(ve(1)).select(ve(0),ve(-1));Yi({start:Se(0),end:Se(i),type:"int",condition:"<"},({i:u})=>{const h=l.add(ve(u).mul(o));let d=n.sample(ms(g1.xy,mt(0,h).mul(e)).div(t));n.value.isArrayTexture&&(d=d.depth(r)),d=d.x,s.addAssign(d),a.addAssign(d.mul(d))}),s.divAssign(i),a.divAssign(i);const c=Du(a.sub(s.mul(s)));return mt(s,c)}),ime=ke(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:r})=>{const s=ve(0).toVar("meanHorizontal"),a=ve(0).toVar("squareMeanHorizontal"),o=i.lessThanEqual(ve(1)).select(ve(0),ve(2).div(i.sub(1))),l=i.lessThanEqual(ve(1)).select(ve(0),ve(-1));Yi({start:Se(0),end:Se(i),type:"int",condition:"<"},({i:u})=>{const h=l.add(ve(u).mul(o));let d=n.sample(ms(g1.xy,mt(h,0).mul(e)).div(t));n.value.isArrayTexture&&(d=d.depth(r)),s.addAssign(d.x),a.addAssign(ms(d.y.mul(d.y),d.x.mul(d.x)))}),s.divAssign(i),a.divAssign(i);const c=Du(a.sub(s.mul(s)));return mt(s,c)}),rme=[zq,Gq,Vq,Hq];let $E;const X2=new AT;class jq extends Wge{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:r,shadow:s,depthLayer:a}){const o=r.x.greaterThanEqual(0).and(r.x.lessThanEqual(1)).and(r.y.greaterThanEqual(0)).and(r.y.lessThanEqual(1)).and(r.z.lessThanEqual(1)),l=t({depthTexture:n,shadowCoord:r,shadow:s,depthLayer:a});return o.select(l,ve(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:r}=e,s=fr("bias","float",n).setGroup(En);let a=t,o;if(n.camera.isOrthographicCamera||r.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),o=a.z,r.coordinateSystem===bu&&(o=o.mul(2).sub(1));else{const l=a.w;a=a.xy.div(l);const c=fr("near","float",n.camera).setGroup(En),u=fr("far","float",n.camera).setGroup(En);o=j8(l.negate(),c,u)}return a=Re(a.x,a.y.oneMinus(),o.add(s)),a}getShadowFilterFn(e){return rme[e]}setupRenderTarget(e,t){const n=new sl(e.mapSize.width,e.mapSize.height);n.name="ShadowDepthTexture",n.compareFunction=DS;const r=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return r.texture.name="ShadowMap",r.texture.type=e.mapType,r.depthTexture=n,{shadowMap:r,depthTexture:n}}setupShadow(e){const{renderer:t}=e,{light:n,shadow:r}=this,s=t.shadowMap.type,{depthTexture:a,shadowMap:o}=this.setupRenderTarget(r,e);if(r.camera.updateProjectionMatrix(),s===$o&&r.isPointLightShadow!==!0){a.compareFunction=null,o.depth>1?(o._vsmShadowMapVertical||(o._vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:wh,type:Ss,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=o._vsmShadowMapVertical,o._vsmShadowMapHorizontal||(o._vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:wh,type:Ss,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=o._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:wh,type:Ss,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:wh,type:Ss,depthBuffer:!1}));let w=gi(a);a.isArrayTexture&&(w=w.depth(this.depthLayer));let C=gi(this.vsmShadowMapVertical.texture);a.isArrayTexture&&(C=C.depth(this.depthLayer));const P=fr("blurSamples","float",r).setGroup(En),L=fr("radius","float",r).setGroup(En),D=fr("mapSize","vec2",r).setGroup(En);let B=this.vsmMaterialVertical||(this.vsmMaterialVertical=new cs);B.fragmentNode=nme({samples:P,radius:L,size:D,shadowPass:w,depthLayer:this.depthLayer}).context(e.getSharedContext()),B.name="VSMVertical",B=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new cs),B.fragmentNode=ime({samples:P,radius:L,size:D,shadowPass:C,depthLayer:this.depthLayer}).context(e.getSharedContext()),B.name="VSMHorizontal"}const l=fr("intensity","float",r).setGroup(En),c=fr("normalBias","float",r).setGroup(En),u=oP(n).mul(fP.add(lT.mul(c))),h=this.setupShadowCoord(e,u),d=r.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(d===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const A=s===$o&&r.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:a,x=this.setupShadowFilter(e,{filterFn:d,shadowTexture:o.texture,depthTexture:A,shadowCoord:h,shadow:r,depthLayer:this.depthLayer});let _=gi(o.texture,h);a.isArrayTexture&&(_=_.depth(this.depthLayer));const S=Xi(1,x.rgb.mix(_,1),l.mul(_.a)).toVar();return this.shadowMap=o,this.shadow.map=o,S}setup(e){if(e.renderer.shadowMap.enabled!==!1)return ke(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:a}=e;t.updateMatrices(r),n.setSize(t.mapSize.width,t.mapSize.height,n.depth),s.render(a,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:r}=this,{renderer:s,scene:a,camera:o}=e,l=s.shadowMap.type,c=t.depthTexture.version;this._depthVersionCached=c;const u=r.camera.layers.mask;(r.camera.layers.mask&4294967294)===0&&(r.camera.layers.mask=o.layers.mask);const h=s.getRenderObjectFunction(),d=s.getMRT(),A=d?d.has("velocity"):!1;$E=Kge(s,a,$E),a.overrideMaterial=qq(n),s.setRenderObjectFunction(Wq(s,r,l,A)),s.setClearColor(0,0),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(h),l===$o&&r.isPointLightShadow!==!0&&this.vsmPass(s),r.camera.layers.mask=u,Jge(s,a,$E)}vsmPass(e){const{shadow:t}=this,n=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,n),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,n),e.setRenderTarget(this.vsmShadowMapVertical),X2.material=this.vsmMaterialVertical,X2.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),X2.material=this.vsmMaterialHorizontal,X2.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;let n=t.needsUpdate||t.autoUpdate;n&&(this._cameraFrameId[e.camera]===e.frameId&&(n=!1),this._cameraFrameId[e.camera]=e.frameId),n&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const Xq=(i,e)=>rt(new jq(i,e)),sme=new un,gc=ke(([i,e])=>{const t=i.toVar(),n=_r(t),r=Wl(1,Qr(n.x,Qr(n.y,n.z)));n.mulAssign(r),t.mulAssign(r.mul(e.mul(2).oneMinus()));const s=mt(t.xy).toVar(),o=e.mul(1.5).oneMinus();return ti(n.z.greaterThanEqual(o),()=>{ti(t.z.greaterThan(0),()=>{s.x.assign(Mi(4,t.x))})}).ElseIf(n.x.greaterThanEqual(o),()=>{const l=Mx(t.x);s.x.assign(t.z.mul(l).add(l.mul(2)))}).ElseIf(n.y.greaterThanEqual(o),()=>{const l=Mx(t.y);s.x.assign(t.x.add(l.mul(2)).add(2)),s.y.assign(t.z.mul(l).sub(2))}),mt(.125,.25).mul(s).add(mt(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),Yq=ke(({depthTexture:i,bd3D:e,dp:t,texelSize:n})=>gi(i,gc(e,n.y)).compare(t)),$q=ke(({depthTexture:i,bd3D:e,dp:t,texelSize:n,shadow:r})=>{const s=fr("radius","float",r).setGroup(En),a=mt(-1,1).mul(s).mul(n.y);return gi(i,gc(e.add(a.xyy),n.y)).compare(t).add(gi(i,gc(e.add(a.yyy),n.y)).compare(t)).add(gi(i,gc(e.add(a.xyx),n.y)).compare(t)).add(gi(i,gc(e.add(a.yyx),n.y)).compare(t)).add(gi(i,gc(e,n.y)).compare(t)).add(gi(i,gc(e.add(a.xxy),n.y)).compare(t)).add(gi(i,gc(e.add(a.yxy),n.y)).compare(t)).add(gi(i,gc(e.add(a.xxx),n.y)).compare(t)).add(gi(i,gc(e.add(a.yxx),n.y)).compare(t)).mul(1/9)}),ame=ke(({filterFn:i,depthTexture:e,shadowCoord:t,shadow:n})=>{const r=t.xyz.toVar(),s=r.length(),a=gn("float").setGroup(En).onRenderUpdate(()=>n.camera.near),o=gn("float").setGroup(En).onRenderUpdate(()=>n.camera.far),l=fr("bias","float",n).setGroup(En),c=gn(n.mapSize).setGroup(En),u=ve(1).toVar();return ti(s.sub(o).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const h=s.sub(a).div(o.sub(a)).toVar();h.addAssign(l);const d=r.normalize(),A=mt(1).div(c.mul(mt(4,2)));u.assign(i({depthTexture:e,bd3D:d,dp:h,texelSize:A,shadow:n}))}),u}),OI=new Cn,b0=new lt,Yv=new lt;class ome extends jq{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===yZ?Yq:$q}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:a}){return ame({filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:a}=e,o=t.getFrameExtents();Yv.copy(t.mapSize),Yv.multiply(o),n.setSize(Yv.width,Yv.height),b0.copy(t.mapSize);const l=s.autoClear,c=s.getClearColor(sme),u=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha),s.clear();const h=t.getViewportCount();for(let d=0;d<h;d++){const A=t.getViewport(d),x=b0.x*A.x,_=Yv.y-b0.y-b0.y*A.y;OI.set(x,_,b0.x*A.z,b0.y*A.w),n.viewport.copy(OI),t.updateMatrices(r,d),s.render(a,t.camera)}s.autoClear=l,s.setClearColor(c,u)}}const Qq=(i,e)=>rt(new ome(i,e));class lA extends hm{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new un,this.colorNode=e&&e.colorNode||gn(this.color).setGroup(En),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=ai.FRAME}getHash(){return this.light.uuid}getLightVector(e){return cP(this.light).sub(e.context.positionView||As)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return Xq(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const r=this.light.shadow.shadowNode;let s;r!==void 0?s=rt(r):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=n=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),n=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),n&&e.lightsNode.setupDirectRectAreaLight(e,this,n)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const dP=ke(({lightDistance:i,cutoffDistance:e,decayExponent:t})=>{const n=i.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(n.mul(i.div(e).pow4().oneMinus().clamp().pow2()),n)}),Zq=({color:i,lightVector:e,cutoffDistance:t,decayExponent:n})=>{const r=e.normalize(),s=e.length(),a=dP({lightDistance:s,cutoffDistance:t,decayExponent:n}),o=i.mul(a);return{lightDirection:r,lightColor:o}};class lme extends lA{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=gn(0).setGroup(En),this.decayExponentNode=gn(2).setGroup(En)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return Qq(this.light)}setupDirect(e){return Zq({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}const cme=ke(([i=kr()])=>{const e=i.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),ume=ke(([i=kr()],{renderer:e,material:t})=>{const n=M8(i.mul(2).sub(1));let r;if(t.alphaToCoverage&&e.samples>1){const s=ve(n.fwidth()).toVar();r=Tu(s.oneMinus(),s.add(1),n).oneMinus()}else r=Fs(n.greaterThan(1),0,1);return r}),ky=ke(([i,e,t])=>{const n=ve(t).toVar(),r=ve(e).toVar(),s=wu(i).toVar();return Fs(s,r,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),sS=ke(([i,e])=>{const t=wu(e).toVar(),n=ve(i).toVar();return Fs(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),gs=ke(([i])=>{const e=ve(i).toVar();return Se(gu(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),Dr=ke(([i,e])=>{const t=ve(i).toVar();return e.assign(gs(t)),t.sub(ve(e))}),hme=ke(([i,e,t,n,r,s])=>{const a=ve(s).toVar(),o=ve(r).toVar(),l=ve(n).toVar(),c=ve(t).toVar(),u=ve(e).toVar(),h=ve(i).toVar(),d=ve(Mi(1,o)).toVar();return Mi(1,a).mul(h.mul(d).add(u.mul(o))).add(a.mul(c.mul(d).add(l.mul(o))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),fme=ke(([i,e,t,n,r,s])=>{const a=ve(s).toVar(),o=ve(r).toVar(),l=Re(n).toVar(),c=Re(t).toVar(),u=Re(e).toVar(),h=Re(i).toVar(),d=ve(Mi(1,o)).toVar();return Mi(1,a).mul(h.mul(d).add(u.mul(o))).add(a.mul(c.mul(d).add(l.mul(o))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),Kq=Ta([hme,fme]),dme=ke(([i,e,t,n,r,s,a,o,l,c,u])=>{const h=ve(u).toVar(),d=ve(c).toVar(),A=ve(l).toVar(),x=ve(o).toVar(),_=ve(a).toVar(),S=ve(s).toVar(),w=ve(r).toVar(),C=ve(n).toVar(),P=ve(t).toVar(),L=ve(e).toVar(),D=ve(i).toVar(),B=ve(Mi(1,A)).toVar(),k=ve(Mi(1,d)).toVar();return ve(Mi(1,h)).toVar().mul(k.mul(D.mul(B).add(L.mul(A))).add(d.mul(P.mul(B).add(C.mul(A))))).add(h.mul(k.mul(w.mul(B).add(S.mul(A))).add(d.mul(_.mul(B).add(x.mul(A))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),pme=ke(([i,e,t,n,r,s,a,o,l,c,u])=>{const h=ve(u).toVar(),d=ve(c).toVar(),A=ve(l).toVar(),x=Re(o).toVar(),_=Re(a).toVar(),S=Re(s).toVar(),w=Re(r).toVar(),C=Re(n).toVar(),P=Re(t).toVar(),L=Re(e).toVar(),D=Re(i).toVar(),B=ve(Mi(1,A)).toVar(),k=ve(Mi(1,d)).toVar();return ve(Mi(1,h)).toVar().mul(k.mul(D.mul(B).add(L.mul(A))).add(d.mul(P.mul(B).add(C.mul(A))))).add(h.mul(k.mul(w.mul(B).add(S.mul(A))).add(d.mul(_.mul(B).add(x.mul(A))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),Jq=Ta([dme,pme]),Ame=ke(([i,e,t])=>{const n=ve(t).toVar(),r=ve(e).toVar(),s=Wt(i).toVar(),a=Wt(s.bitAnd(Wt(7))).toVar(),o=ve(ky(a.lessThan(Wt(4)),r,n)).toVar(),l=ve(ei(2,ky(a.lessThan(Wt(4)),n,r))).toVar();return sS(o,wu(a.bitAnd(Wt(1)))).add(sS(l,wu(a.bitAnd(Wt(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),gme=ke(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=ve(e).toVar(),o=Wt(i).toVar(),l=Wt(o.bitAnd(Wt(15))).toVar(),c=ve(ky(l.lessThan(Wt(8)),a,s)).toVar(),u=ve(ky(l.lessThan(Wt(4)),s,ky(l.equal(Wt(12)).or(l.equal(Wt(14))),a,r))).toVar();return sS(c,wu(l.bitAnd(Wt(1)))).add(sS(u,wu(l.bitAnd(Wt(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),ea=Ta([Ame,gme]),mme=ke(([i,e,t])=>{const n=ve(t).toVar(),r=ve(e).toVar(),s=cm(i).toVar();return Re(ea(s.x,r,n),ea(s.y,r,n),ea(s.z,r,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),vme=ke(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=ve(e).toVar(),o=cm(i).toVar();return Re(ea(o.x,a,s,r),ea(o.y,a,s,r),ea(o.z,a,s,r))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),Ll=Ta([mme,vme]),yme=ke(([i])=>{const e=ve(i).toVar();return ei(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),xme=ke(([i])=>{const e=ve(i).toVar();return ei(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),bme=ke(([i])=>{const e=Re(i).toVar();return ei(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),eW=Ta([yme,bme]),_me=ke(([i])=>{const e=Re(i).toVar();return ei(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),tW=Ta([xme,_me]),Ko=ke(([i,e])=>{const t=Se(e).toVar(),n=Wt(i).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(Se(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),nW=ke(([i,e,t])=>{i.subAssign(t),i.bitXorAssign(Ko(t,Se(4))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(Ko(i,Se(6))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(Ko(e,Se(8))),e.addAssign(i),i.subAssign(t),i.bitXorAssign(Ko(t,Se(16))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(Ko(i,Se(19))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(Ko(e,Se(4))),e.addAssign(i)}),v1=ke(([i,e,t])=>{const n=Wt(t).toVar(),r=Wt(e).toVar(),s=Wt(i).toVar();return n.bitXorAssign(r),n.subAssign(Ko(r,Se(14))),s.bitXorAssign(n),s.subAssign(Ko(n,Se(11))),r.bitXorAssign(s),r.subAssign(Ko(s,Se(25))),n.bitXorAssign(r),n.subAssign(Ko(r,Se(16))),s.bitXorAssign(n),s.subAssign(Ko(n,Se(4))),r.bitXorAssign(s),r.subAssign(Ko(s,Se(14))),n.bitXorAssign(r),n.subAssign(Ko(r,Se(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),Ba=ke(([i])=>{const e=Wt(i).toVar();return ve(e).div(ve(Wt(Se(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),vu=ke(([i])=>{const e=ve(i).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),wme=ke(([i])=>{const e=Se(i).toVar(),t=Wt(Wt(1)).toVar(),n=Wt(Wt(Se(3735928559)).add(t.shiftLeft(Wt(2))).add(Wt(13))).toVar();return v1(n.add(Wt(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),Sme=ke(([i,e])=>{const t=Se(e).toVar(),n=Se(i).toVar(),r=Wt(Wt(2)).toVar(),s=Wt().toVar(),a=Wt().toVar(),o=Wt().toVar();return s.assign(a.assign(o.assign(Wt(Se(3735928559)).add(r.shiftLeft(Wt(2))).add(Wt(13))))),s.addAssign(Wt(n)),a.addAssign(Wt(t)),v1(s,a,o)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Tme=ke(([i,e,t])=>{const n=Se(t).toVar(),r=Se(e).toVar(),s=Se(i).toVar(),a=Wt(Wt(3)).toVar(),o=Wt().toVar(),l=Wt().toVar(),c=Wt().toVar();return o.assign(l.assign(c.assign(Wt(Se(3735928559)).add(a.shiftLeft(Wt(2))).add(Wt(13))))),o.addAssign(Wt(s)),l.addAssign(Wt(r)),c.addAssign(Wt(n)),v1(o,l,c)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Mme=ke(([i,e,t,n])=>{const r=Se(n).toVar(),s=Se(t).toVar(),a=Se(e).toVar(),o=Se(i).toVar(),l=Wt(Wt(4)).toVar(),c=Wt().toVar(),u=Wt().toVar(),h=Wt().toVar();return c.assign(u.assign(h.assign(Wt(Se(3735928559)).add(l.shiftLeft(Wt(2))).add(Wt(13))))),c.addAssign(Wt(o)),u.addAssign(Wt(a)),h.addAssign(Wt(s)),nW(c,u,h),c.addAssign(Wt(r)),v1(c,u,h)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),Eme=ke(([i,e,t,n,r])=>{const s=Se(r).toVar(),a=Se(n).toVar(),o=Se(t).toVar(),l=Se(e).toVar(),c=Se(i).toVar(),u=Wt(Wt(5)).toVar(),h=Wt().toVar(),d=Wt().toVar(),A=Wt().toVar();return h.assign(d.assign(A.assign(Wt(Se(3735928559)).add(u.shiftLeft(Wt(2))).add(Wt(13))))),h.addAssign(Wt(c)),d.addAssign(Wt(l)),A.addAssign(Wt(o)),nW(h,d,A),h.addAssign(Wt(a)),d.addAssign(Wt(s)),v1(h,d,A)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),er=Ta([wme,Sme,Tme,Mme,Eme]),Cme=ke(([i,e])=>{const t=Se(e).toVar(),n=Se(i).toVar(),r=Wt(er(n,t)).toVar(),s=cm().toVar();return s.x.assign(r.bitAnd(Se(255))),s.y.assign(r.shiftRight(Se(8)).bitAnd(Se(255))),s.z.assign(r.shiftRight(Se(16)).bitAnd(Se(255))),s}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Rme=ke(([i,e,t])=>{const n=Se(t).toVar(),r=Se(e).toVar(),s=Se(i).toVar(),a=Wt(er(s,r,n)).toVar(),o=cm().toVar();return o.x.assign(a.bitAnd(Se(255))),o.y.assign(a.shiftRight(Se(8)).bitAnd(Se(255))),o.z.assign(a.shiftRight(Se(16)).bitAnd(Se(255))),o}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Dl=Ta([Cme,Rme]),Pme=ke(([i])=>{const e=mt(i).toVar(),t=Se().toVar(),n=Se().toVar(),r=ve(Dr(e.x,t)).toVar(),s=ve(Dr(e.y,n)).toVar(),a=ve(vu(r)).toVar(),o=ve(vu(s)).toVar(),l=ve(Kq(ea(er(t,n),r,s),ea(er(t.add(Se(1)),n),r.sub(1),s),ea(er(t,n.add(Se(1))),r,s.sub(1)),ea(er(t.add(Se(1)),n.add(Se(1))),r.sub(1),s.sub(1)),a,o)).toVar();return eW(l)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),Nme=ke(([i])=>{const e=Re(i).toVar(),t=Se().toVar(),n=Se().toVar(),r=Se().toVar(),s=ve(Dr(e.x,t)).toVar(),a=ve(Dr(e.y,n)).toVar(),o=ve(Dr(e.z,r)).toVar(),l=ve(vu(s)).toVar(),c=ve(vu(a)).toVar(),u=ve(vu(o)).toVar(),h=ve(Jq(ea(er(t,n,r),s,a,o),ea(er(t.add(Se(1)),n,r),s.sub(1),a,o),ea(er(t,n.add(Se(1)),r),s,a.sub(1),o),ea(er(t.add(Se(1)),n.add(Se(1)),r),s.sub(1),a.sub(1),o),ea(er(t,n,r.add(Se(1))),s,a,o.sub(1)),ea(er(t.add(Se(1)),n,r.add(Se(1))),s.sub(1),a,o.sub(1)),ea(er(t,n.add(Se(1)),r.add(Se(1))),s,a.sub(1),o.sub(1)),ea(er(t.add(Se(1)),n.add(Se(1)),r.add(Se(1))),s.sub(1),a.sub(1),o.sub(1)),l,c,u)).toVar();return tW(h)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),pP=Ta([Pme,Nme]),Lme=ke(([i])=>{const e=mt(i).toVar(),t=Se().toVar(),n=Se().toVar(),r=ve(Dr(e.x,t)).toVar(),s=ve(Dr(e.y,n)).toVar(),a=ve(vu(r)).toVar(),o=ve(vu(s)).toVar(),l=Re(Kq(Ll(Dl(t,n),r,s),Ll(Dl(t.add(Se(1)),n),r.sub(1),s),Ll(Dl(t,n.add(Se(1))),r,s.sub(1)),Ll(Dl(t.add(Se(1)),n.add(Se(1))),r.sub(1),s.sub(1)),a,o)).toVar();return eW(l)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),Dme=ke(([i])=>{const e=Re(i).toVar(),t=Se().toVar(),n=Se().toVar(),r=Se().toVar(),s=ve(Dr(e.x,t)).toVar(),a=ve(Dr(e.y,n)).toVar(),o=ve(Dr(e.z,r)).toVar(),l=ve(vu(s)).toVar(),c=ve(vu(a)).toVar(),u=ve(vu(o)).toVar(),h=Re(Jq(Ll(Dl(t,n,r),s,a,o),Ll(Dl(t.add(Se(1)),n,r),s.sub(1),a,o),Ll(Dl(t,n.add(Se(1)),r),s,a.sub(1),o),Ll(Dl(t.add(Se(1)),n.add(Se(1)),r),s.sub(1),a.sub(1),o),Ll(Dl(t,n,r.add(Se(1))),s,a,o.sub(1)),Ll(Dl(t.add(Se(1)),n,r.add(Se(1))),s.sub(1),a,o.sub(1)),Ll(Dl(t,n.add(Se(1)),r.add(Se(1))),s,a.sub(1),o.sub(1)),Ll(Dl(t.add(Se(1)),n.add(Se(1)),r.add(Se(1))),s.sub(1),a.sub(1),o.sub(1)),l,c,u)).toVar();return tW(h)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),AP=Ta([Lme,Dme]),kme=ke(([i])=>{const e=ve(i).toVar(),t=Se(gs(e)).toVar();return Ba(er(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),Ome=ke(([i])=>{const e=mt(i).toVar(),t=Se(gs(e.x)).toVar(),n=Se(gs(e.y)).toVar();return Ba(er(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),Ime=ke(([i])=>{const e=Re(i).toVar(),t=Se(gs(e.x)).toVar(),n=Se(gs(e.y)).toVar(),r=Se(gs(e.z)).toVar();return Ba(er(t,n,r))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),Bme=ke(([i])=>{const e=An(i).toVar(),t=Se(gs(e.x)).toVar(),n=Se(gs(e.y)).toVar(),r=Se(gs(e.z)).toVar(),s=Se(gs(e.w)).toVar();return Ba(er(t,n,r,s))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),Fme=Ta([kme,Ome,Ime,Bme]),Ume=ke(([i])=>{const e=ve(i).toVar(),t=Se(gs(e)).toVar();return Re(Ba(er(t,Se(0))),Ba(er(t,Se(1))),Ba(er(t,Se(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),zme=ke(([i])=>{const e=mt(i).toVar(),t=Se(gs(e.x)).toVar(),n=Se(gs(e.y)).toVar();return Re(Ba(er(t,n,Se(0))),Ba(er(t,n,Se(1))),Ba(er(t,n,Se(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),Gme=ke(([i])=>{const e=Re(i).toVar(),t=Se(gs(e.x)).toVar(),n=Se(gs(e.y)).toVar(),r=Se(gs(e.z)).toVar();return Re(Ba(er(t,n,r,Se(0))),Ba(er(t,n,r,Se(1))),Ba(er(t,n,r,Se(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Vme=ke(([i])=>{const e=An(i).toVar(),t=Se(gs(e.x)).toVar(),n=Se(gs(e.y)).toVar(),r=Se(gs(e.z)).toVar(),s=Se(gs(e.w)).toVar();return Re(Ba(er(t,n,r,s,Se(0))),Ba(er(t,n,r,s,Se(1))),Ba(er(t,n,r,s,Se(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),iW=Ta([Ume,zme,Gme,Vme]),aS=ke(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=Se(e).toVar(),o=Re(i).toVar(),l=ve(0).toVar(),c=ve(1).toVar();return Yi(a,()=>{l.addAssign(c.mul(pP(o))),c.mulAssign(r),o.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),rW=ke(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=Se(e).toVar(),o=Re(i).toVar(),l=Re(0).toVar(),c=ve(1).toVar();return Yi(a,()=>{l.addAssign(c.mul(AP(o))),c.mulAssign(r),o.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Hme=ke(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=Se(e).toVar(),o=Re(i).toVar();return mt(aS(o,a,s,r),aS(o.add(Re(Se(19),Se(193),Se(17))),a,s,r))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),qme=ke(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=Se(e).toVar(),o=Re(i).toVar(),l=Re(rW(o,a,s,r)).toVar(),c=ve(aS(o.add(Re(Se(19),Se(193),Se(17))),a,s,r)).toVar();return An(l,c)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Wme=ke(([i,e,t,n,r,s,a])=>{const o=Se(a).toVar(),l=ve(s).toVar(),c=Se(r).toVar(),u=Se(n).toVar(),h=Se(t).toVar(),d=Se(e).toVar(),A=mt(i).toVar(),x=Re(iW(mt(d.add(u),h.add(c)))).toVar(),_=mt(x.x,x.y).toVar();_.subAssign(.5),_.mulAssign(l),_.addAssign(.5);const S=mt(mt(ve(d),ve(h)).add(_)).toVar(),w=mt(S.sub(A)).toVar();return ti(o.equal(Se(2)),()=>_r(w.x).add(_r(w.y))),ti(o.equal(Se(3)),()=>Qr(_r(w.x),_r(w.y))),md(w,w)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),jme=ke(([i,e,t,n,r,s,a,o,l])=>{const c=Se(l).toVar(),u=ve(o).toVar(),h=Se(a).toVar(),d=Se(s).toVar(),A=Se(r).toVar(),x=Se(n).toVar(),_=Se(t).toVar(),S=Se(e).toVar(),w=Re(i).toVar(),C=Re(iW(Re(S.add(A),_.add(d),x.add(h)))).toVar();C.subAssign(.5),C.mulAssign(u),C.addAssign(.5);const P=Re(Re(ve(S),ve(_),ve(x)).add(C)).toVar(),L=Re(P.sub(w)).toVar();return ti(c.equal(Se(2)),()=>_r(L.x).add(_r(L.y)).add(_r(L.z))),ti(c.equal(Se(3)),()=>Qr(_r(L.x),_r(L.y),_r(L.z))),md(L,L)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),fm=Ta([Wme,jme]),Xme=ke(([i,e,t])=>{const n=Se(t).toVar(),r=ve(e).toVar(),s=mt(i).toVar(),a=Se().toVar(),o=Se().toVar(),l=mt(Dr(s.x,a),Dr(s.y,o)).toVar(),c=ve(1e6).toVar();return Yi({start:-1,end:Se(1),name:"x",condition:"<="},({x:u})=>{Yi({start:-1,end:Se(1),name:"y",condition:"<="},({y:h})=>{const d=ve(fm(l,u,h,a,o,r,n)).toVar();c.assign(Ro(c,d))})}),ti(n.equal(Se(0)),()=>{c.assign(Du(c))}),c}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Yme=ke(([i,e,t])=>{const n=Se(t).toVar(),r=ve(e).toVar(),s=mt(i).toVar(),a=Se().toVar(),o=Se().toVar(),l=mt(Dr(s.x,a),Dr(s.y,o)).toVar(),c=mt(1e6,1e6).toVar();return Yi({start:-1,end:Se(1),name:"x",condition:"<="},({x:u})=>{Yi({start:-1,end:Se(1),name:"y",condition:"<="},({y:h})=>{const d=ve(fm(l,u,h,a,o,r,n)).toVar();ti(d.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(d)}).ElseIf(d.lessThan(c.y),()=>{c.y.assign(d)})})}),ti(n.equal(Se(0)),()=>{c.assign(Du(c))}),c}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),$me=ke(([i,e,t])=>{const n=Se(t).toVar(),r=ve(e).toVar(),s=mt(i).toVar(),a=Se().toVar(),o=Se().toVar(),l=mt(Dr(s.x,a),Dr(s.y,o)).toVar(),c=Re(1e6,1e6,1e6).toVar();return Yi({start:-1,end:Se(1),name:"x",condition:"<="},({x:u})=>{Yi({start:-1,end:Se(1),name:"y",condition:"<="},({y:h})=>{const d=ve(fm(l,u,h,a,o,r,n)).toVar();ti(d.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(d)}).ElseIf(d.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(d)}).ElseIf(d.lessThan(c.z),()=>{c.z.assign(d)})})}),ti(n.equal(Se(0)),()=>{c.assign(Du(c))}),c}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Qme=ke(([i,e,t])=>{const n=Se(t).toVar(),r=ve(e).toVar(),s=Re(i).toVar(),a=Se().toVar(),o=Se().toVar(),l=Se().toVar(),c=Re(Dr(s.x,a),Dr(s.y,o),Dr(s.z,l)).toVar(),u=ve(1e6).toVar();return Yi({start:-1,end:Se(1),name:"x",condition:"<="},({x:h})=>{Yi({start:-1,end:Se(1),name:"y",condition:"<="},({y:d})=>{Yi({start:-1,end:Se(1),name:"z",condition:"<="},({z:A})=>{const x=ve(fm(c,h,d,A,a,o,l,r,n)).toVar();u.assign(Ro(u,x))})})}),ti(n.equal(Se(0)),()=>{u.assign(Du(u))}),u}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Zme=Ta([Xme,Qme]),Kme=ke(([i,e,t])=>{const n=Se(t).toVar(),r=ve(e).toVar(),s=Re(i).toVar(),a=Se().toVar(),o=Se().toVar(),l=Se().toVar(),c=Re(Dr(s.x,a),Dr(s.y,o),Dr(s.z,l)).toVar(),u=mt(1e6,1e6).toVar();return Yi({start:-1,end:Se(1),name:"x",condition:"<="},({x:h})=>{Yi({start:-1,end:Se(1),name:"y",condition:"<="},({y:d})=>{Yi({start:-1,end:Se(1),name:"z",condition:"<="},({z:A})=>{const x=ve(fm(c,h,d,A,a,o,l,r,n)).toVar();ti(x.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(x)}).ElseIf(x.lessThan(u.y),()=>{u.y.assign(x)})})})}),ti(n.equal(Se(0)),()=>{u.assign(Du(u))}),u}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Jme=Ta([Yme,Kme]),eve=ke(([i,e,t])=>{const n=Se(t).toVar(),r=ve(e).toVar(),s=Re(i).toVar(),a=Se().toVar(),o=Se().toVar(),l=Se().toVar(),c=Re(Dr(s.x,a),Dr(s.y,o),Dr(s.z,l)).toVar(),u=Re(1e6,1e6,1e6).toVar();return Yi({start:-1,end:Se(1),name:"x",condition:"<="},({x:h})=>{Yi({start:-1,end:Se(1),name:"y",condition:"<="},({y:d})=>{Yi({start:-1,end:Se(1),name:"z",condition:"<="},({z:A})=>{const x=ve(fm(c,h,d,A,a,o,l,r,n)).toVar();ti(x.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(x)}).ElseIf(x.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(x)}).ElseIf(x.lessThan(u.z),()=>{u.z.assign(x)})})})}),ti(n.equal(Se(0)),()=>{u.assign(Du(u))}),u}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),tve=Ta([$me,eve]),nve=ke(([i])=>{const e=i.y,t=i.z,n=Re().toVar();return ti(e.lessThan(1e-4),()=>{n.assign(Re(t,t,t))}).Else(()=>{let r=i.x;r=r.sub(gu(r)).mul(6).toVar();const s=Se(S8(r)),a=r.sub(ve(s)),o=t.mul(e.oneMinus()),l=t.mul(e.mul(a).oneMinus()),c=t.mul(e.mul(a.oneMinus()).oneMinus());ti(s.equal(Se(0)),()=>{n.assign(Re(t,c,o))}).ElseIf(s.equal(Se(1)),()=>{n.assign(Re(l,t,o))}).ElseIf(s.equal(Se(2)),()=>{n.assign(Re(o,t,c))}).ElseIf(s.equal(Se(3)),()=>{n.assign(Re(o,l,t))}).ElseIf(s.equal(Se(4)),()=>{n.assign(Re(c,o,t))}).Else(()=>{n.assign(Re(t,o,l))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),ive=ke(([i])=>{const e=Re(i).toVar(),t=ve(e.x).toVar(),n=ve(e.y).toVar(),r=ve(e.z).toVar(),s=ve(Ro(t,Ro(n,r))).toVar(),a=ve(Qr(t,Qr(n,r))).toVar(),o=ve(a.sub(s)).toVar(),l=ve().toVar(),c=ve().toVar(),u=ve().toVar();return u.assign(a),ti(a.greaterThan(0),()=>{c.assign(o.div(a))}).Else(()=>{c.assign(0)}),ti(c.lessThanEqual(0),()=>{l.assign(0)}).Else(()=>{ti(t.greaterThanEqual(a),()=>{l.assign(n.sub(r).div(o))}).ElseIf(n.greaterThanEqual(a),()=>{l.assign(ms(2,r.sub(t).div(o)))}).Else(()=>{l.assign(ms(4,t.sub(n).div(o)))}),l.mulAssign(1/6),ti(l.lessThan(0),()=>{l.addAssign(1)})}),Re(l,c,u)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),rve=ke(([i])=>{const e=Re(i).toVar(),t=l8(m8(e,Re(.04045))).toVar(),n=Re(e.div(12.92)).toVar(),r=Re(Sc(Qr(e.add(Re(.055)),Re(0)).div(1.055),Re(2.4))).toVar();return Xi(n,r,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),sW=(i,e)=>{i=ve(i),e=ve(e);const t=mt(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return Tu(i.sub(t),i.add(t),e)},aW=(i,e,t,n)=>Xi(i,e,t[n].clamp()),sve=(i,e,t=kr())=>aW(i,e,t,"x"),ave=(i,e,t=kr())=>aW(i,e,t,"y"),oW=(i,e,t,n,r)=>Xi(i,e,sW(t,n[r])),ove=(i,e,t,n=kr())=>oW(i,e,t,n,"x"),lve=(i,e,t,n=kr())=>oW(i,e,t,n,"y"),cve=(i=1,e=0,t=kr())=>t.mul(i).add(e),uve=(i,e=1)=>(i=ve(i),i.abs().pow(e).mul(i.sign())),hve=(i,e=1,t=.5)=>ve(i).sub(t).mul(e).add(t),fve=(i=kr(),e=1,t=0)=>pP(i.convert("vec2|vec3")).mul(e).add(t),dve=(i=kr(),e=1,t=0)=>AP(i.convert("vec2|vec3")).mul(e).add(t),pve=(i=kr(),e=1,t=0)=>(i=i.convert("vec2|vec3"),An(AP(i),pP(i.add(mt(19,73)))).mul(e).add(t)),Ave=(i=kr(),e=1)=>Zme(i.convert("vec2|vec3"),e,Se(1)),gve=(i=kr(),e=1)=>Jme(i.convert("vec2|vec3"),e,Se(1)),mve=(i=kr(),e=1)=>tve(i.convert("vec2|vec3"),e,Se(1)),vve=(i=kr())=>Fme(i.convert("vec2|vec3")),yve=(i=kr(),e=3,t=2,n=.5,r=1)=>aS(i,Se(e),t,n).mul(r),xve=(i=kr(),e=3,t=2,n=.5,r=1)=>Hme(i,Se(e),t,n).mul(r),bve=(i=kr(),e=3,t=2,n=.5,r=1)=>rW(i,Se(e),t,n).mul(r),_ve=(i=kr(),e=3,t=2,n=.5,r=1)=>qme(i,Se(e),t,n).mul(r),wve=ke(([i,e,t])=>{const n=Bh(i).toVar(),r=Mi(ve(.5).mul(e.sub(t)),Ch).div(n).toVar(),s=Mi(ve(-.5).mul(e.sub(t)),Ch).div(n).toVar(),a=Re().toVar();a.x=n.x.greaterThan(ve(0)).select(r.x,s.x),a.y=n.y.greaterThan(ve(0)).select(r.y,s.y),a.z=n.z.greaterThan(ve(0)).select(r.z,s.z);const o=Ro(a.x,a.y,a.z).toVar();return Ch.add(n.mul(o)).toVar().sub(t)}),lW=ke(([i,e])=>{const t=i.x,n=i.y,r=i.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(r)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(6).mul(r.mul(r).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(8).mul(.429043).mul(ei(t,t).sub(ei(n,n)))),s});var $=Object.freeze({__proto__:null,BRDF_GGX:_R,BRDF_Lambert:Qp,BasicPointShadowFilter:Yq,BasicShadowFilter:zq,Break:LH,Const:aV,Continue:_de,DFGApprox:Z8,D_GGX:YH,Discard:wV,EPSILON:NG,F_Schlick:Ug,Fn:ke,INFINITY:ife,If:ti,Loop:Yi,NodeAccess:Ia,NodeShaderStage:my,NodeType:Ehe,NodeUpdateType:ai,PCFShadowFilter:Gq,PCFSoftShadowFilter:Vq,PI:eS,PI2:rfe,PointShadowFilter:$q,Return:xfe,Schlick_to_F0:QH,ScriptableNodeResources:X_,ShaderNode:G0,Stack:$S,Switch:Xhe,TBNViewMatrix:Sp,VSMShadowFilter:Hq,V_GGX_SmithCorrelated:XH,Var:sV,abs:_r,acesFilmicToneMapping:Nq,acos:x8,add:ms,addMethodChaining:it,addNodeElement:wfe,agxToneMapping:Lq,all:LG,alphaT:Zw,and:AG,anisotropy:qf,anisotropyB:Op,anisotropyT:Ry,any:DG,append:Zhe,array:lG,arrayBuffer:$he,asin:BG,assign:cG,atan:b8,atan2:tV,atomicAdd:Oge,atomicAnd:Uge,atomicFunc:ku,atomicLoad:Dge,atomicMax:Bge,atomicMin:Fge,atomicOr:zge,atomicStore:kge,atomicSub:Ige,atomicXor:Gge,attenuationColor:d8,attenuationDistance:f8,attribute:Uh,attributeArray:T0e,backgroundBlurriness:vq,backgroundIntensity:CR,backgroundRotation:yq,batch:RH,billboarding:l0e,bitAnd:yG,bitNot:xG,bitOr:bG,bitXor:_G,bitangentGeometry:Jfe,bitangentLocal:ede,bitangentView:HV,bitangentWorld:tde,bitcast:sfe,blendBurn:wq,blendColor:B0e,blendDodge:Sq,blendOverlay:Mq,blendScreen:Tq,blur:iq,bool:wu,buffer:l1,bufferAttribute:o1,bumpMap:XV,burn:z0e,bvec2:Kz,bvec3:l8,bvec4:nG,bypass:yV,cache:Ny,call:uG,cameraFar:Xf,cameraIndex:aT,cameraNear:jf,cameraNormalMatrix:Ofe,cameraPosition:RV,cameraProjectionMatrix:sA,cameraProjectionMatrixInverse:Dfe,cameraViewMatrix:No,cameraWorldMatrix:kfe,cbrt:ZG,cdl:Y0e,ceil:tT,checker:cme,cineonToneMapping:Pq,clamp:Su,clearcoat:Qw,clearcoatRoughness:Sx,code:gT,color:Qz,colorSpaceToWorking:sT,colorToDirection:Qde,compute:mV,computeSkinning:xde,cond:nV,context:rT,convert:rG,convertColorSpace:hfe,convertToTexture:b0e,cos:mh,cross:iT,cubeTexture:Fg,cubeTextureBase:F8,cubeToUV:gc,dFdx:_8,dFdy:w8,dashSize:U_,debug:TV,decrement:CG,decrementBefore:MG,defaultBuildStages:uR,defaultShaderStages:qz,defined:xx,degrees:OG,deltaTime:Aq,densityFog:gge,densityFogFactor:sP,depth:X8,depthPass:J0e,difference:XG,diffuseColor:Ui,directPointLight:Zq,directionToColor:zH,dispersion:p8,distance:jG,div:Wl,dodge:G0e,dot:md,drawIndex:MH,dynamicBufferAttribute:gV,element:iG,emissive:pR,equal:g8,equals:qG,equirectUV:Y8,exp:v8,exp2:Bg,expression:Fh,faceDirection:h1,faceForward:R8,faceforward:afe,float:ve,floor:gu,fog:Cx,fract:jh,frameGroup:oG,frameId:KAe,frontFacing:DV,fwidth:VG,gain:WAe,gapSize:AR,getConstNodeType:$z,getCurrentStack:o8,getDirection:tq,getDistanceAttenuation:dP,getGeometryRoughness:jH,getNormalFromDepth:w0e,getParallaxCorrectNormal:wve,getRoughness:Q8,getScreenPosition:_0e,getShIrradianceAt:lW,getShadowMaterial:qq,getShadowRenderObjectFunction:Wq,getTextureIndex:dq,getViewPosition:L0,globalId:_ge,glsl:lge,glslFn:cge,grayscale:q0e,greaterThan:m8,greaterThanEqual:pG,hash:qAe,highpModelNormalViewMatrix:vR,highpModelViewMatrix:mR,hue:X0e,increment:EG,incrementBefore:TG,instance:dde,instanceIndex:rd,instancedArray:M0e,instancedBufferAttribute:tS,instancedDynamicBufferAttribute:gR,instancedMesh:CH,int:Se,inverseSqrt:y8,inversesqrt:ofe,invocationLocalIndex:fde,invocationSubgroupIndex:hde,ior:Py,iridescence:KS,iridescenceIOR:c8,iridescenceThickness:u8,ivec2:Is,ivec3:Jz,ivec4:eG,js:age,label:rV,length:mu,lengthSq:M8,lessThan:fG,lessThanEqual:dG,lightPosition:lP,lightProjectionUV:Fq,lightShadowMatrix:oP,lightTargetDirection:uP,lightTargetPosition:Uq,lightViewPosition:cP,lightingContext:kH,lights:qge,linearDepth:iS,linearToneMapping:Cq,localId:wge,log:eT,log2:Au,logarithmicDepthToViewZ:Ide,loop:wde,luminance:iP,mat2:QS,mat3:za,mat4:kp,matcapUV:aq,materialAO:SH,materialAlphaTest:YV,materialAnisotropy:cH,materialAnisotropyVector:N0,materialAttenuationColor:mH,materialAttenuationDistance:gH,materialClearcoat:iH,materialClearcoatNormal:sH,materialClearcoatRoughness:rH,materialColor:$V,materialDispersion:wH,materialEmissive:ZV,materialEnvIntensity:V_,materialEnvRotation:B8,materialIOR:AH,materialIridescence:uH,materialIridescenceIOR:hH,materialIridescenceThickness:fH,materialLightMap:G8,materialLineDashOffset:bH,materialLineDashSize:yH,materialLineGapSize:xH,materialLineScale:vH,materialLineWidth:cde,materialMetalness:tH,materialNormal:nH,materialOpacity:z8,materialPointSize:_H,materialReference:xh,materialReflectivity:H_,materialRefractionRatio:IV,materialRotation:aH,materialRoughness:eH,materialSheen:oH,materialSheenRoughness:lH,materialShininess:QV,materialSpecular:KV,materialSpecularColor:JV,materialSpecularIntensity:bR,materialSpecularStrength:Ly,materialThickness:pH,materialTransmission:dH,max:Qr,maxMipLevel:EV,mediumpModelViewMatrix:LV,metalness:wx,min:Ro,mix:Xi,mixElement:JG,mod:a1,modInt:PG,modelDirection:Gfe,modelNormalMatrix:NV,modelPosition:Vfe,modelRadius:Wfe,modelScale:Hfe,modelViewMatrix:aA,modelViewPosition:qfe,modelViewProjection:V8,modelWorldMatrix:Fl,modelWorldMatrixInverse:jfe,morphReference:DH,mrt:pq,mul:ei,mx_aastep:sW,mx_cell_noise_float:vve,mx_contrast:hve,mx_fractal_noise_float:yve,mx_fractal_noise_vec2:xve,mx_fractal_noise_vec3:bve,mx_fractal_noise_vec4:_ve,mx_hsvtorgb:nve,mx_noise_float:fve,mx_noise_vec3:dve,mx_noise_vec4:pve,mx_ramplr:sve,mx_ramptb:ave,mx_rgbtohsv:ive,mx_safepower:uve,mx_splitlr:ove,mx_splittb:lve,mx_srgb_texture_to_lin_rec709:rve,mx_transform_uv:cve,mx_worley_noise_float:Ave,mx_worley_noise_vec2:gve,mx_worley_noise_vec3:mve,namespace:vV,negate:FG,neutralToneMapping:Dq,nodeArray:Dp,nodeImmutable:Ft,nodeObject:rt,nodeObjects:r1,nodeProxy:ot,normalFlat:kV,normalGeometry:oT,normalLocal:Po,normalMap:xR,normalView:Oc,normalWorld:f1,normalize:Bh,not:mG,notEqual:hG,numWorkgroups:xge,objectDirection:Ife,objectGroup:A8,objectPosition:PV,objectRadius:zfe,objectScale:Ffe,objectViewPosition:Ufe,objectWorldMatrix:Bfe,oneMinus:UG,or:gG,orthographicDepthToViewZ:Ode,oscSawtooth:s0e,oscSine:n0e,oscSquare:i0e,oscTriangle:r0e,output:eg,outputStruct:VAe,overlay:H0e,overloadingFn:Ta,parabola:ER,parallaxDirection:WV,parallaxUV:ide,parameter:IAe,pass:Z0e,passTexture:K0e,pcurve:jAe,perspectiveDepthToViewZ:W8,pmremTexture:eP,pointShadow:Qq,pointUV:C0e,pointWidth:Jhe,positionGeometry:u1,positionLocal:rs,positionPrevious:nS,positionView:As,positionViewDirection:Rr,positionWorld:Ch,positionWorldDirection:O8,posterize:Q0e,pow:Sc,pow2:T8,pow3:YG,pow4:$G,premult:F0e,property:um,radians:kG,rand:KG,range:vge,rangeFog:Age,rangeFogFactor:rP,reciprocal:GG,reference:fr,referenceBuffer:yR,reflect:WG,reflectVector:UV,reflectView:BV,reflector:g0e,refract:C8,refractVector:zV,refractView:FV,reinhardToneMapping:Rq,remainder:RG,remap:bV,remapClamp:_V,renderGroup:En,renderOutput:SV,rendererReference:dV,rotate:pT,rotateUV:a0e,roughness:au,round:zG,rtt:mq,sRGBTransferEOTF:cV,sRGBTransferOETF:uV,sampler:Cfe,samplerComparison:Rfe,saturate:E8,saturation:W0e,screen:V0e,screenCoordinate:g1,screenSize:Ex,screenUV:Rc,scriptable:pge,scriptableValue:j_,select:Fs,setCurrentStack:bx,shaderStages:hR,shadow:Xq,shadowPositionWorld:fP,shapeCircle:ume,sharedUniformGroup:JS,sheen:wp,sheenRoughness:ZS,shiftLeft:wG,shiftRight:SG,shininess:Kw,sign:Mx,sin:el,sinc:XAe,skinning:NH,smoothstep:Tu,smoothstepElement:eV,specularColor:Ao,specularF90:Tx,spherizeUV:o0e,split:Qhe,spritesheetUV:h0e,sqrt:Du,stack:q_,step:nT,storage:Ip,storageBarrier:Ege,storageObject:yde,storageTexture:xq,string:Yhe,struct:GAe,sub:Mi,subgroupIndex:ude,subgroupSize:Sge,tan:IG,tangentGeometry:uT,tangentLocal:d1,tangentView:p1,tangentWorld:VV,temp:oV,texture:gi,texture3D:bq,textureBarrier:Cge,textureBicubic:JH,textureCubeUV:nq,textureLoad:ts,textureSize:id,textureStore:P0e,thickness:h8,time:oA,timerDelta:t0e,timerGlobal:e0e,timerLocal:JAe,toneMapping:pV,toneMappingExposure:AV,toonOutlinePass:tge,transformDirection:QG,transformNormal:OV,transformNormalToView:I8,transformedBentNormalView:jV,transformedBitangentView:qV,transformedBitangentWorld:nde,transformedClearcoatNormalView:V0,transformedNormalView:is,transformedNormalWorld:lT,transformedTangentView:U8,transformedTangentWorld:Kfe,transmission:Jw,transpose:HG,triNoise3D:$Ae,triplanarTexture:d0e,triplanarTextures:gq,trunc:S8,tslFn:Khe,uint:Wt,uniform:gn,uniformArray:Bl,uniformCubeTexture:$fe,uniformGroup:aG,uniformTexture:Efe,uniforms:Nfe,unpremult:U0e,userData:k0e,uv:kr,uvec2:Zz,uvec3:cm,uvec4:tG,varying:ul,varyingProperty:_x,vec2:mt,vec3:Re,vec4:An,vectorComponents:iA,velocity:I0e,vertexColor:UH,vertexIndex:TH,vertexStage:lV,vibrance:j0e,viewZToLogarithmicDepth:j8,viewZToOrthographicDepth:ng,viewZToPerspectiveDepth:BH,viewport:tg,viewportBottomLeft:Lde,viewportCoordinate:IH,viewportDepthTexture:q8,viewportLinearDepth:Bde,viewportMipTexture:H8,viewportResolution:Pde,viewportSafeUV:c0e,viewportSharedTexture:$de,viewportSize:OH,viewportTexture:Dde,viewportTopLeft:Nde,viewportUV:Rde,wgsl:oge,wgslFn:uge,workgroupArray:Nge,workgroupBarrier:Mge,workgroupId:bge,workingToColorSpace:hV,xor:vG});const hc=new tP;class Sve extends vd{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const r=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)r._clearColor.getRGB(hc),hc.a=r._clearColor.a;else if(s.isColor===!0)s.getRGB(hc),hc.a=1,a=!0;else if(s.isNode===!0){const c=this.get(e),u=s;hc.copy(r._clearColor);let h=c.backgroundMesh;if(h===void 0){let S=function(){s.removeEventListener("dispose",S),h.material.dispose(),h.geometry.dispose()};var l=S;const A=rT(An(u).mul(CR),{getUV:()=>yq.mul(f1),getTextureLevel:()=>vq});let x=V8;x=x.setZ(x.w);const _=new cs;_.name="Background.material",_.side=sr,_.depthTest=!1,_.depthWrite=!1,_.allowOverride=!1,_.fog=!1,_.lights=!1,_.vertexNode=x,_.colorNode=A,c.backgroundMeshNode=A,c.backgroundMesh=h=new zi(new Lu(1,32,32),_),h.frustumCulled=!1,h.name="Background.mesh",h.onBeforeRender=function(w,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},s.addEventListener("dispose",S)}const d=u.getCacheKey();c.backgroundCacheKey!==d&&(c.backgroundMeshNode.node=An(u).mul(CR),c.backgroundMeshNode.needsUpdate=!0,h.material.needsUpdate=!0,c.backgroundCacheKey=d),t.unshift(h,h.geometry,h.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);const o=r.xr.getEnvironmentBlendMode();if(o==="additive"?hc.set(0,0,0,1):o==="alpha-blend"&&hc.set(0,0,0,0),r.autoClear===!0||a===!0){const c=n.clearColorValue;c.r=hc.r,c.g=hc.g,c.b=hc.b,c.a=hc.a,(r.backend.isWebGLBackend===!0||r.alpha===!0)&&(c.r*=c.a,c.g*=c.a,c.b*=c.a),n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=r.autoClearColor===!0,n.clearDepth=r.autoClearDepth===!0,n.clearStencil=r.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let Tve=0;class RR{constructor(e="",t=[],n=0,r=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=r,this.id=Tve++}}class Mve{constructor(e,t,n,r,s,a,o,l,c,u=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=u,this.nodeAttributes=r,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=o,this.updateAfterNodes=l,this.observer=c,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const r=new RR(t.name,[],t.index,t);e.push(r);for(const s of t.bindings)r.bindings.push(s.clone())}else e.push(t);return e}}class II{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class Eve{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class cW{constructor(e,t,n=!1,r=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=r}}class Cve extends cW{constructor(e,t,n=null,r=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=n,this.interpolationSampling=r}}class Rve{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let Pve=0;class QE{constructor(e=null){this.id=Pve++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class Nve{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class yd{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class Lve extends yd{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class Dve extends yd{constructor(e,t=new lt){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class kve extends yd{constructor(e,t=new pe){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class Ove extends yd{constructor(e,t=new Cn){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class Ive extends yd{constructor(e,t=new un){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class Bve extends yd{constructor(e,t=new zS){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class Fve extends yd{constructor(e,t=new Kn){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class Uve extends yd{constructor(e,t=new Un){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class zve extends Lve{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Gve extends Dve{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Vve extends kve{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Hve extends Ove{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class qve extends Ive{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Wve extends Bve{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class jve extends Fve{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Xve extends Uve{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const BI=new WeakMap,Yve=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),Y2=i=>/e/g.test(i)?String(i).replace(/\+/g,""):(i=Number(i),i+(i%1?"":".0"));class uW{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=q_(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new QE,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null}getBindGroupsCache(){let e=BI.get(this.renderer);return e===void 0&&(e=new Ic,BI.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new Hh(e,t,n)}createCubeRenderTarget(e,t){return new GH(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),r=[];let s=!0;for(const o of t)r.push(o),s=s&&o.groupNode.shared!==!0;let a;return s?(a=n.get(r),a===void 0&&(a=new RR(e,r,this.bindingsIndexes[e].group,r),n.set(r,a))):a=new RR(e,r,this.bindingsIndexes[e].group,r),a}getBindGroupArray(e,t){const n=this.bindings[t];let r=n[e];return r===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const r of hR)for(const s in n[r]){const a=n[r][s];(t[s]||(t[s]=[])).push(...a)}e=[];for(const r in t){const s=t[r],a=this._getBindGroup(r,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==ai.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==ai.NONE&&this.updateBeforeNodes.push(e.getSelf()),n!==ai.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Bs||e.magFilter===$0||e.magFilter===_h||e.magFilter===vo||e.minFilter===Bs||e.minFilter===$0||e.minFilter===_h||e.minFilter===vo}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new QE(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let r=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const a=n?n[s]:null;a!==null?r+=a.build(this,e):r+=this.generateConst(e),s<t-1&&(r+=", ")}return r+=" )",r}generateStruct(e,t,n=null){const r=[];for(const s of t){const{name:a,type:o}=s;n&&n[a]&&n[a].isNode?r.push(n[a].build(this,o)):r.push(this.generateConst(o))}return e+"( "+r.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new un:e==="vec2"?t=new lt:e==="vec3"?t=new pe:e==="vec4"&&(t=new Cn)),e==="float")return Y2(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${Y2(t.r)}, ${Y2(t.g)}, ${Y2(t.b)} )`;const n=this.getTypeLength(e),r=this.getComponentType(e),s=a=>this.generateConst(r,a);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4&&e!=="mat2")return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const r=new II(e,t);return this.registerDeclaration(r),n.push(r),r}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===na)return"int";if(t===br)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=Fz(e);const r=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),r+n}getTypeFromArray(e){return Yve.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,r=e.itemSize,s=e.normalized;let a;return!(e instanceof HF)&&s!==!0&&(a=this.getTypeFromArray(n)),this.getTypeFromLength(r,a)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=q_(this.stack),this.stacks.push(o8()||this.stack),bx(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,bx(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let r=n.getData(e);return r===void 0&&(r={},n.setData(e,r)),r[t]===void 0&&(r[t]={}),r[t]}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let r=n.bufferAttribute;if(r===void 0){const s=this.uniforms.index++;r=new II("nodeAttribute"+s,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}getStructTypeFromNode(e,t,n=null,r=this.shaderStage){const s=this.getDataFromNode(e,r,this.globalCache);let a=s.structType;if(a===void 0){const o=this.structs.index++;n===null&&(n="StructType"+o),a=new Nve(n,t),this.structs[r].push(a),s.structType=a}return a}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,r=null){const s=this.getDataFromNode(e,n,this.globalCache);let a=s.uniform;if(a===void 0){const o=this.uniforms.index++;a=new Eve(r||"nodeUniform"+o,t,e),this.uniforms[n].push(a),this.registerDeclaration(a),s.uniform=a}return a}getArrayCount(e){let t=null;return e.isArrayNode?t=e.count:e.isVarNode&&e.node.isArrayNode&&(t=e.node.count),t}getVarFromNode(e,t=null,n=e.getNodeType(this),r=this.shaderStage,s=!1){const a=this.getDataFromNode(e,r);let o=a.variable;if(o===void 0){const l=s?"_const":"_var",c=this.vars[r]||(this.vars[r]=[]),u=this.vars[l]||(this.vars[l]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+u,this.vars[l]++);const h=this.getArrayCount(e);o=new cW(t,n,s,h),s||c.push(o),this.registerDeclaration(o),a.variable=o}return o}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this),r=null,s=null){const a=this.getDataFromNode(e,"any");let o=a.varying;if(o===void 0){const l=this.varyings,c=l.length;t===null&&(t="nodeVarying"+c),o=new Cve(t,n,r,s),l.push(o),this.registerDeclaration(o),a.varying=o}return o}get namespace(){return this.context.namespace}getOutputNamespace(){return this.getNamespace("outputNode")}getNamespace(e=""){const t=this.namespace;let n;return t?n=e?t+"_"+e:t:n=e,n}registerDeclaration(e){const t=this.shaderStage,n=this.declarations[t]||(this.declarations[t]={}),r=this.getPropertyName(e);let s=1,a=r;for(;n[a]!==void 0;)a=r+"_"+s++;s>1&&(e.name=a,console.warn(`THREE.TSL: Declaration name '${r}' of '${e.type}' already in use. Renamed to '${a}'.`)),n[a]=e}getCodeFromNode(e,t,n=this.shaderStage){const r=this.getDataFromNode(e);let s=r.code;if(s===void 0){const a=this.codes[n]||(this.codes[n]=[]),o=a.length;s=new Rve("nodeCode"+o,t),a.push(s),r.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:r}=this.getDataFromNode(e);let s=!0,a=t;for(;a;){if(r.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const o of n)this.addLineFlowCode(o)}addLineFlowCodeBlock(e,t,n){const r=this.getDataFromNode(e),s=r.flowCodes||(r.flowCodes=[]),a=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);s.push(t),a.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new kq,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let a=0;const o=Object.values(this);return{next:()=>({value:o[a],done:a++>=o.length})}}};for(const a of t.inputs)n[a.name]=new hq(a.type,a.name);e.layout=null;const r=e.call(n),s=this.flowStagesNode(r,t.type);return e.layout=t,s}flowStagesNode(e,t=null){const n=this.flow,r=this.vars,s=this.declarations,a=this.cache,o=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.declarations={},this.cache=new QE,this.stack=q_();for(const u of uR)this.setBuildStage(u),c.result=e.build(this,t);return c.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.declarations=s,this.cache=a,this.stack=l,this.setBuildStage(o),c}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,t=null){const n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}flowNodeFromShaderStage(e,t,n=null,r=null){const s=this.tab,a=this.cache,o=this.shaderStage,l=this.context;this.setShaderStage(e);const c={...this.context};delete c.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=c;let u=null;if(this.buildStage==="generate"){const h=this.flowChildNode(t,n);r!==null&&(h.code+=`${this.tab+r} = ${h.result};
`),this.flowCode[e]=this.flowCode[e]+h.code,u=h}else u=t.build(this);return this.setShaderStage(o),this.cache=a,this.tab=s,this.context=l,u}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const r of n)t+=`${this.getVar(r.type,r.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const r of t)n+=r.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let r=n.library.fromMaterial(t);r===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),r=new cs),r.build(this)}else this.addFlow("compute",e);for(const r of uR){this.setBuildStage(r),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of hR){this.setShaderStage(s);const a=this.flowNodes[s];for(const o of a)r==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new zve(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new Gve(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new Vve(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new Hve(e);if(t==="color")return new qve(e);if(t==="mat2")return new Wve(e);if(t==="mat3")return new jve(e);if(t==="mat4")return new Xve(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const r=this.getTypeLength(t),s=this.getTypeLength(n);return r===16&&s===9?`${this.getType(n)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:r===9&&s===4?`${this.getType(n)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:r>4||s>4||s===0?e:r===s?`${this.getType(n)}( ${e} )`:r>s?(e=n==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,s)}`,this.format(e,this.getTypeFromLength(s,this.getComponentType(t)),n)):s===4&&r>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:r===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(r===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${nm} - Node System
`}*[Symbol.iterator](){}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}}class FI{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===ai.FRAME){const{frameMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&r.set(n,this.frameId)}else if(t===ai.RENDER){const{renderMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&r.set(n,this.renderId)}else t===ai.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===ai.FRAME){const{frameMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&r.set(n,this.frameId)}else if(t===ai.RENDER){const{renderMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&r.set(n,this.renderId)}else t===ai.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===ai.FRAME){const{frameMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.frameId&&e.update(this)!==!1&&r.set(n,this.frameId)}else if(t===ai.RENDER){const{renderMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.renderId&&e.update(this)!==!1&&r.set(n,this.renderId)}else t===ai.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class gP{constructor(e,t,n=null,r="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=r,this.isConst=s}}gP.isNodeFunctionInput=!0;class $ve extends lA{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:uP(this.light),lightColor:e}}}const ZE=new Un,$2=new Un;let $v=null;class Qve extends lA{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=gn(new pe).setGroup(En),this.halfWidth=gn(new pe).setGroup(En),this.updateType=ai.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;$2.identity(),ZE.copy(t.matrixWorld),ZE.premultiply(n),$2.extractRotation(ZE),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4($2),this.halfHeight.value.applyMatrix4($2)}setupDirectRectArea(e){let t,n;e.isAvailable("float32Filterable")?(t=gi($v.LTC_FLOAT_1),n=gi($v.LTC_FLOAT_2)):(t=gi($v.LTC_HALF_1),n=gi($v.LTC_HALF_2));const{colorNode:r,light:s}=this,a=cP(s);return{lightColor:r,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:n}}static setLTC(e){$v=e}}class mP extends lA{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=gn(0).setGroup(En),this.penumbraCosNode=gn(0).setGroup(En),this.cutoffDistanceNode=gn(0).setGroup(En),this.decayExponentNode=gn(0).setGroup(En),this.colorNode=gn(this.color).setGroup(En)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){const{coneCosNode:n,penumbraCosNode:r}=this;return Tu(n,r,t)}getLightCoord(e){const t=e.getNodeProperties(this);let n=t.projectionUV;return n===void 0&&(n=Fq(this.light,e.context.positionWorld),t.projectionUV=n),n}setupDirect(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:r,light:s}=this,a=this.getLightVector(e),o=a.normalize(),l=o.dot(uP(s)),c=this.getSpotAttenuation(e,l),u=a.length(),h=dP({lightDistance:u,cutoffDistance:n,decayExponent:r});let d=t.mul(c).mul(h),A,x;return s.colorNode?(x=this.getLightCoord(e),A=s.colorNode(x)):s.map&&(x=this.getLightCoord(e),A=gi(s.map,x.xy).onRenderUpdate(()=>s.map)),A&&(d=x.mul(2).sub(1).abs().lessThan(1).all().select(d.mul(A),d)),{lightColor:d,lightDirection:o}}}class Zve extends mP{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){const n=this.light.iesMap;let r=null;if(n&&n.isTexture===!0){const s=t.acos().mul(1/Math.PI);r=gi(n,mt(s,0),0).r}else r=super.getSpotAttenuation(t);return r}}const Kve=ke(([i,e])=>{const t=i.abs().sub(e);return mu(Qr(t,0)).add(Ro(Qr(t.x,t.y),0))});class Jve extends mP{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),t.aspect===null){let n=1;t.map!==null&&(n=t.map.width/t.map.height),t.shadow.aspect=n}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){const t=this.penumbraCosNode,n=this.getLightCoord(e),r=n.xyz.div(n.w),s=Kve(r.xy.sub(mt(.5)),mt(.5)),a=Wl(-1,Mi(1,x8(t)).sub(1));return E8(s.mul(-2).mul(a))}}class eye extends lA{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class tye extends lA{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=lP(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=gn(new un).setGroup(En)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:r}=this,a=f1.dot(r).mul(.5).add(.5),o=Xi(n,t,a);e.context.irradiance.addAssign(o)}}class nye extends lA{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new pe);this.lightProbe=Bl(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=lW(f1,this.lightProbe);e.context.irradiance.addAssign(t)}}class hW{parseFunction(){console.warn("Abstract function.")}}class vP{constructor(e,t,n="",r=""){this.type=e,this.inputs=t,this.name=n,this.precision=r}getCode(){console.warn("Abstract function.")}}vP.isNodeFunction=!0;const iye=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,rye=/[a-z_0-9]+/ig,UI="#pragma main",sye=i=>{i=i.trim();const e=i.indexOf(UI),t=e!==-1?i.slice(e+UI.length):i,n=t.match(iye);if(n!==null&&n.length===5){const r=n[4],s=[];let a=null;for(;(a=rye.exec(r))!==null;)s.push(a);const o=[];let l=0;for(;l<s.length;){const x=s[l][0]==="const";x===!0&&l++;let _=s[l][0];_==="in"||_==="out"||_==="inout"?l++:_="";const S=s[l++][0];let w=Number.parseInt(s[l][0]);Number.isNaN(w)===!1?l++:w=null;const C=s[l++][0];o.push(new gP(S,C,w,_,x))}const c=t.substring(n[0].length),u=n[3]!==void 0?n[3]:"",h=n[2],d=n[1]!==void 0?n[1]:"",A=e!==-1?i.slice(0,e):"";return{type:h,inputs:o,name:u,precision:d,inputsCode:r,blockCode:c,headerCode:A}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class aye extends vP{constructor(e){const{type:t,inputs:n,name:r,precision:s,inputsCode:a,blockCode:o,headerCode:l}=sye(e);super(t,n,r,s),this.inputsCode=a,this.blockCode=o,this.headerCode=l}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:r,inputsCode:s,headerCode:a,precision:o}=this;let l=`${r} ${e} ( ${s.trim()} )`;o!==""&&(l=`${o} ${l}`),t=a+l+n}else t="";return t}}class oye extends hW{parseFunction(e){return new aye(e)}}const zI=new WeakMap,Kc=[],Jd=[];class lye extends vd{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new FI,this.nodeBuilderCache=new Map,this.callHashCache=new Ic,this.groupsData=new Ic,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===A8.name)return!0;if(n===En.name){const s=this.get(e),a=this.nodeFrame.renderId;return s.renderId!==a?(s.renderId=a,!0):!1}if(n===oG.name){const s=this.get(e),a=this.nodeFrame.frameId;return s.frameId!==a?(s.frameId=a,!0):!1}Kc[0]=t,Kc[1]=e;let r=this.groupsData.get(Kc);return r===void 0&&this.groupsData.set(Kc,r={}),Kc.length=0,r.version!==t.version?(r.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:r}=this,s=this.getForRenderCacheKey(e);if(n=r.get(s),n===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&a.enableMultiview(),a.build(),n=this._createNodeBuilderState(a),r.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new Mve(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){Kc[0]=e,Kc[1]=t;const n=this.renderer.info.calls,r=this.callHashCache.get(Kc)||{};if(r.callId!==n){const s=this.getEnvironmentNode(e),a=this.getFogNode(e);t&&Jd.push(t.getCacheKey(!0)),s&&Jd.push(s.getCacheKey()),a&&Jd.push(a.getCacheKey()),Jd.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),Jd.push(this.renderer.shadowMap.enabled?1:0),r.callId=n,r.cacheKey=jS(Jd),this.callHashCache.set(Kc,r),Jd.length=0}return Kc.length=0,r.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const r=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||r){const s=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===lg||n.mapping===cg||n.mapping===Gp){if(e.backgroundBlurriness>0||n.mapping===Gp)return eP(n);{let a;return n.isCubeTexture===!0?a=Fg(n):a=gi(n),HH(a)}}else{if(n.isTexture===!0)return gi(n,Rc.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},r);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,r=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let a=s.get(t);return(a===void 0||r)&&(a=n(),s.set(t,a)),a}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const r=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const s=fr("color","color",n).setGroup(En),a=fr("density","float",n).setGroup(En);return Cx(s,sP(a))}else if(n.isFog){const s=fr("color","color",n).setGroup(En),a=fr("near","float",n).setGroup(En),o=fr("far","float",n).setGroup(En);return Cx(s,rP(a,o))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const r=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return Fg(n);if(n.isTexture===!0)return gi(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,r=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=n,a.camera=r,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return zI.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),r=e.isArrayTexture?bq(e,Re(Rc,c1("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):gi(e,Rc).renderOutput(t.toneMapping,t.currentColorSpace);return zI.set(e,n),r}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const r of n.updateNodes)t.updateNode(r)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const r of n.updateNodes)t.updateNode(r)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new FI,this.nodeBuilderCache=new Map,this.cacheLib={}}}const KE=new iu;class oS{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Kn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const r=e.length;for(let s=0;s<r;s++){KE.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=t[n+s],o=KE.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=KE.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const r=t.clippingPlanes,s=r.length;let a,o;if(this.clipIntersection?(a=this.intersectionPlanes,o=e.intersectionPlanes.length):(a=this.unionPlanes,o=e.unionPlanes.length),a.length!==o+s){a.length=o+s;for(let l=0;l<s;l++)a[o+l]=new Cn;n=!0}this.projectPlanes(r,a,o),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new oS(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class cye{constructor(e,t){this.bundleGroup=e,this.camera=t}}const Qv=[];class uye{constructor(){this.bundles=new Ic}get(e,t){const n=this.bundles;Qv[0]=e,Qv[1]=t;let r=n.get(Qv);return r===void 0&&(r=new cye(e,t),n.set(Qv,r)),Qv.length=0,r}dispose(){this.bundles=new Ic}}class fW{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const r in e)t[r]=e[r]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const hye=new hP,Zv=[];class fye extends Ic{constructor(){super()}createNode(e=[]){return new hP().setLights(e)}getNode(e,t){if(e.isQuadMesh)return hye;Zv[0]=e,Zv[1]=t;let n=this.get(Zv);return n===void 0&&(n=this.createNode(),this.set(Zv,n)),Zv.length=0,n}}class vy extends Hh{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this.hasExternalTextures=!1,this.autoAllocateDepthBuffer=!0}copy(e){return super.copy(e),this.hasExternalTextures=e.hasExternalTextures,this.autoAllocateDepthBuffer=e.autoAllocateDepthBuffer,this}}const GI=new pe,VI=new pe;class dye extends Nu{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new ia,this._cameraL.viewport=new Cn,this._cameraR=new ia,this._cameraR.viewport=new Cn,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new cU,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._supportsLayers=!1,this._frameBufferTargets=null,this._createXRLayer=yye.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new lt,this._onSessionEvent=gye.bind(this),this._onSessionEnd=mye.bind(this),this._onInputSourcesChange=vye.bind(this),this._onAnimationFrame=xye.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._useLayers=typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,n,r,s,a,o,l={}){const c=new Jx(e,t),u=new vy(s,a,{format:ss,type:$r,depthTexture:new sl(s,a,l.stencil?tl:br,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?il:nl),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});u.autoAllocateDepthBuffer=!0;const h=new Il({color:16777215,side:So});h.map=u.texture,h.map.offset.y=1,h.map.repeat.y=-1;const d=new zi(c,h);d.position.copy(n),d.quaternion.copy(r);const A={type:"quad",width:e,height:t,translation:n,quaternion:r,pixelwidth:s,pixelheight:a,plane:d,material:h,rendercall:o,renderTarget:u};if(this._layers.push(A),this._session!==null){A.plane.material=new Il({color:16777215,side:So}),A.plane.material.blending=Y0,A.plane.material.blendEquation=ka,A.plane.material.blendSrc=Ah,A.plane.material.blendDst=Ah,A.xrlayer=this._createXRLayer(A);const x=this._session.renderState.layers;x.unshift(A.xrlayer),this._session.updateRenderState({layers:x})}else u.isXRRenderTarget=!1;return d}createCylinderLayer(e,t,n,r,s,a,o,l,c={}){const u=new US(e,e,e*t/n,64,64,!0,Math.PI-t/2,t),h=new vy(a,o,{format:ss,type:$r,depthTexture:new sl(a,o,c.stencil?tl:br,void 0,void 0,void 0,void 0,void 0,void 0,c.stencil?il:nl),stencilBuffer:c.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});h.autoAllocateDepthBuffer=!0;const d=new Il({color:16777215,side:sr});d.map=h.texture,d.map.offset.y=1,d.map.repeat.y=-1;const A=new zi(u,d);A.position.copy(r),A.quaternion.copy(s);const x={type:"cylinder",radius:e,centralAngle:t,aspectratio:n,translation:r,quaternion:s,pixelwidth:a,pixelheight:o,plane:A,material:d,rendercall:l,renderTarget:h};if(this._layers.push(x),this._session!==null){x.plane.material=new Il({color:16777215,side:sr}),x.plane.material.blending=Y0,x.plane.material.blendEquation=ka,x.plane.material.blendSrc=Ah,x.plane.material.blendDst=Ah,x.xrlayer=this._createXRLayer(x);const _=this._session.renderState.layers;_.unshift(x.xrlayer),this._session.updateRenderState({layers:_})}else h.isXRRenderTarget=!1;return A}renderLayers(){const e=new pe,t=new kc,n=this._renderer,r=this.isPresenting,s=n.getOutputRenderTarget(),a=n._frameBufferTarget;this.isPresenting=!1;const o=new lt;n.getSize(o);const l=n._quad;for(const c of this._layers)if(c.renderTarget.isXRRenderTarget=this._session!==null,c.renderTarget.hasExternalTextures=c.renderTarget.isXRRenderTarget,c.renderTarget.isXRRenderTarget&&this._supportsLayers){c.xrlayer.transform=new XRRigidTransform(c.plane.getWorldPosition(e),c.plane.getWorldQuaternion(t));const u=this._glBinding.getSubImage(c.xrlayer,this._xrFrame);n.backend.setXRRenderTargetTextures(c.renderTarget,u.colorTexture,void 0),n._setXRLayerSize(c.renderTarget.width,c.renderTarget.height),n.setOutputRenderTarget(c.renderTarget),n.setRenderTarget(null),n._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:h,quad:d}=this._frameBufferTargets.get(c.renderTarget)||{frameBufferTarget:null,quad:null};h?(n._frameBufferTarget=h,n._quad=d):(n._quad=new AT(new cs),this._frameBufferTargets.set(c.renderTarget,{frameBufferTarget:n._getFrameBufferTarget(),quad:n._quad})),c.rendercall(),n._frameBufferTarget=null}else n.setRenderTarget(c.renderTarget),c.rendercall();n.setRenderTarget(null),n.setOutputRenderTarget(s),n._frameBufferTarget=a,n._setXRLayerSize(o.x,o.y),n._quad=l,this.isPresenting=r}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend;this._gl=t.getContext();const r=this._gl,s=r.getContextAttributes();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._useLayers===!0){let a=null,o=null,l=null;t.depth&&(l=t.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,a=t.stencil?il:nl,o=t.stencil?tl:br);const c={colorFormat:r.RGBA8,depthFormat:l,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(c.textureType="texture-array",this._useMultiview=!0);const u=new XRWebGLBinding(e,r),h=u.createProjectionLayer(c),d=[h];this._glBinding=u,this._glProjLayer=h,t.setPixelRatio(1),t._setXRLayerSize(h.textureWidth,h.textureHeight);const A=this._useMultiview?2:1,x=new sl(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,a,A);if(this._xrRenderTarget=new vy(h.textureWidth,h.textureHeight,{format:ss,type:$r,colorSpace:t.outputColorSpace,depthTexture:x,stencilBuffer:t.stencil,samples:s.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget.hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._supportsLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._supportsLayers)for(const _ of this._layers)_.plane.material=new Il({color:16777215,side:_.type==="cylinder"?sr:So}),_.plane.material.blending=Y0,_.plane.material.blendEquation=ka,_.plane.material.blendSrc=Ah,_.plane.material.blendDst=Ah,_.xrlayer=this._createXRLayer(_),d.unshift(_.xrlayer);e.updateRenderState({layers:d})}else{const a={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,r,a);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),t.setPixelRatio(1),t._setXRLayerSize(o.framebufferWidth,o.framebufferHeight),this._xrRenderTarget=new vy(o.framebufferWidth,o.framebufferHeight,{format:ss,type:$r,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:o.ignoreDepthValues===!1,resolveStencilBuffer:o.ignoreDepthValues===!1}),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,r=e.far,s=this._cameraXR,a=this._cameraL,o=this._cameraR;s.near=o.near=a.near=n,s.far=o.far=a.far=r,s.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),a.layers.mask=e.layers.mask|2,o.layers.mask=e.layers.mask|4,s.layers.mask=a.layers.mask|o.layers.mask;const l=e.parent,c=s.cameras;HI(s,l);for(let u=0;u<c.length;u++)HI(c[u],l);c.length===2?pye(s,a,o):s.projectionMatrix.copy(a.projectionMatrix),Aye(e,s,l)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new R_,this._controllers[e]=t),t}}function pye(i,e,t){GI.setFromMatrixPosition(e.matrixWorld),VI.setFromMatrixPosition(t.matrixWorld);const n=GI.distanceTo(VI),r=e.projectionMatrix.elements,s=t.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=a*u,A=a*h,x=n/(-u+h),_=x*-u;if(e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(_),i.translateZ(x),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert(),r[10]===-1)i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const S=a+x,w=o+x,C=d-_,P=A+(n-_),L=l*o/w*S,D=c*o/w*S;i.projectionMatrix.makePerspective(C,P,L,D,S,w),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}}function HI(i,e){e===null?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(e.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}function Aye(i,e,t){t===null?i.matrix.copy(e.matrixWorld):(i.matrix.copy(t.matrixWorld),i.matrix.invert(),i.matrix.multiply(e.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse),i.isPerspectiveCamera&&(i.fov=qp*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1)}function gye(i){const e=this._controllerInputSources.indexOf(i.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(i.inputSource,i.frame,n),t.dispatchEvent({type:i.type,data:i.inputSource})}}function mye(){const i=this._session,e=this._renderer;i.removeEventListener("select",this._onSessionEvent),i.removeEventListener("selectstart",this._onSessionEvent),i.removeEventListener("selectend",this._onSessionEvent),i.removeEventListener("squeeze",this._onSessionEvent),i.removeEventListener("squeezestart",this._onSessionEvent),i.removeEventListener("squeezeend",this._onSessionEvent),i.removeEventListener("end",this._onSessionEnd),i.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._supportsLayers===!0)for(const t of this._layers)t.renderTarget=new vy(t.pixelwidth,t.pixelheight,{format:ss,type:$r,depthTexture:new sl(t.pixelwidth,t.pixelheight,t.stencilBuffer?tl:br,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?il:nl),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,t.material.map.offset.y=1,t.material.map.repeat.y=-1,delete t.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function vye(i){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<i.removed.length;n++){const r=i.removed[n],s=t.indexOf(r);s>=0&&(t[s]=null,e[s].disconnect(r))}for(let n=0;n<i.added.length;n++){const r=i.added[n];let s=t.indexOf(r);if(s===-1){for(let o=0;o<e.length;o++)if(o>=t.length){t.push(r),s=o;break}else if(t[o]===null){t[o]=r,s=o;break}if(s===-1)break}const a=e[s];a&&a.connect(r)}}function yye(i){return i.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(i.translation,i.quaternion),width:i.width/2,height:i.height/2,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(i.translation,i.quaternion),radius:i.radius,centralAngle:i.centralAngle,aspectRatio:i.aspectRatio,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1})}function xye(i,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,r=n.backend,s=this._glBaseLayer,a=this.getReferenceSpace(),o=e.getViewerPose(a);if(this._xrFrame=e,o!==null){const l=o.views;this._glBaseLayer!==null&&r.setXRTarget(s.framebuffer);let c=!1;l.length!==t.cameras.length&&(t.cameras.length=0,c=!0);for(let u=0;u<l.length;u++){const h=l[u];let d;if(this._useLayers===!0){const x=this._glBinding.getViewSubImage(this._glProjLayer,h);d=x.viewport,u===0&&r.setXRRenderTargetTextures(this._xrRenderTarget,x.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:x.depthStencilTexture)}else d=s.getViewport(h);let A=this._cameras[u];A===void 0&&(A=new ia,A.layers.enable(u),A.viewport=new Cn,this._cameras[u]=A),A.matrix.fromArray(h.transform.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale),A.projectionMatrix.fromArray(h.projectionMatrix),A.projectionMatrixInverse.copy(A.projectionMatrix).invert(),A.viewport.set(d.x,d.y,d.width,d.height),u===0&&(t.matrix.copy(A.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),c===!0&&t.cameras.push(A)}n.setOutputRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const c=this._controllerInputSources[l],u=this._controllers[l];c!==null&&u!==void 0&&u.update(c,e,a)}this._currentAnimationLoop&&this._currentAnimationLoop(i,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const qI=new IS,Q2=new lt,JE=new Cn,eC=new am,tC=new M6,Z2=new Un,Bf=new Cn;class bye{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:r=!0,depth:s=!0,stencil:a=!1,antialias:o=!1,samples:l=0,getFallback:c=null,colorBufferType:u=Ss,multiview:h=!1}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||o===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=r,this.logarithmicDepthBuffer=n,this.outputColorSpace=ma,this.toneMapping=Mo,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new xAe,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new fW,this.lighting=new fye,this._getFallback=c,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Cn(0,0,this._width,this._height),this._scissor=new Cn(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new AT(new cs),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const d=this.alpha===!0?0:1;this._clearColor=new tP(0,0,0,d),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=u,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:Z5},this.xr=new dye(this,h),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(A,x,_)=>{await this.compileAsync(A,x);const S=this._renderLists.get(A,x),w=this._renderContexts.get(A,x,this._renderTarget),C=A.overrideMaterial||_.material,P=this._objects.get(_,C,A,x,S.lightsNode,w,w.clippingContext),{fragmentShader:L,vertexShader:D}=P.getNodeBuilderState();return{fragmentShader:L,vertexShader:D}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(r){if(this._getFallback!==null)try{this.backend=n=this._getFallback(r),await n.init(this)}catch(s){t(s);return}else{t(r);return}}this._nodes=new lye(this,n),this._animation=new hAe(this._nodes,this.info),this._attributes=new vAe(n),this._background=new Sve(this,this._nodes),this._geometries=new yAe(this._attributes,this.info),this._textures=new OAe(this,n,this.info),this._pipelines=new SAe(n,this._nodes),this._bindings=new TAe(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new AAe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new CAe(this.lighting),this._bundles=new uye,this._renderContexts=new DAe,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const r=this._nodes.nodeFrame,s=r.renderId,a=this._currentRenderContext,o=this._currentRenderObjectFunction,l=this._compilationPromises,c=e.isScene===!0?e:qI;n===null&&(n=e);const u=this._renderTarget,h=this._renderContexts.get(n,t,u),d=this._activeMipmapLevel,A=[];this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=A,r.renderId++,r.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new oS),h.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,u);const x=this._renderLists.get(e,t);if(x.begin(),this._projectObject(e,t,0,x,h.clippingContext),n!==e&&n.traverseVisible(function(P){P.isLight&&P.layers.test(t.layers)&&x.pushLight(P)}),x.finish(),u!==null){this._textures.updateRenderTarget(u,d);const P=this._textures.get(u);h.textures=P.textures,h.depthTexture=P.depthTexture}else h.textures=null,h.depthTexture=null;this._background.update(c,x,h);const _=x.opaque,S=x.transparent,w=x.transparentDoublePass,C=x.lightsNode;this.opaque===!0&&_.length>0&&this._renderObjects(_,t,c,C),this.transparent===!0&&S.length>0&&this._renderTransparents(S,w,t,c,C),r.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=o,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(A)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}set highPrecision(e){e===!0?(this.overrideNodes.modelViewMatrix=mR,this.overrideNodes.modelNormalViewMatrix=vR):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===mR&&this.overrideNodes.modelNormalViewMatrix===vR}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:r,camera:s,renderList:a}=e,o=this._currentRenderContext,l=this._bundles.get(r,s),c=this.backend.get(l);c.renderContexts===void 0&&(c.renderContexts=new Set);const u=r.version!==c.version,h=c.renderContexts.has(o)===!1||u;if(c.renderContexts.add(o),h){this.backend.beginBundle(o),(c.renderObjects===void 0||u)&&(c.renderObjects=[]),this._currentRenderBundle=l;const{transparentDoublePass:d,transparent:A,opaque:x}=a;this.opaque===!0&&x.length>0&&this._renderObjects(x,s,t,n),this.transparent===!0&&A.length>0&&this._renderTransparents(A,d,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(o,l),c.version=r.version}else{const{renderObjects:d}=c;for(let A=0,x=d.length;A<x;A++){const _=d[A];this._nodes.needsRefresh(_)&&(this._nodes.updateBefore(_),this._nodes.updateForRender(_),this._bindings.updateForRender(_),this._nodes.updateAfter(_))}}this.backend.addBundle(o,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this;if(e!==Mo===!1&&t!==Cc===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(Q2),{depth:o,stencil:l}=this;let c=this._frameBufferTarget;c===null&&(c=new Hh(s,a,{depthBuffer:o,stencilBuffer:l,type:this._colorBufferType,format:ss,colorSpace:Cc,generateMipmaps:!1,minFilter:Bs,magFilter:Bs,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c);const u=this.getOutputRenderTarget();return c.depthBuffer=o,c.stencilBuffer=l,u!==null?c.setSize(u.width,u.height,u.depth):c.setSize(s,a,1),c.viewport.copy(this._viewport),c.scissor.copy(this._scissor),c.viewport.multiplyScalar(this._pixelRatio),c.scissor.multiplyScalar(this._pixelRatio),c.scissorTest=this._scissorTest,c.multiview=u!==null?u.multiview:!1,c.resolveDepthBuffer=u!==null?u.resolveDepthBuffer:!0,c.autoAllocateDepthBuffer=u!==null?u.autoAllocateDepthBuffer:!1,c}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const r=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,c=e.isScene===!0?e:qI,u=this._renderTarget||this._outputRenderTarget,h=this._activeCubeFace,d=this._activeMipmapLevel;let A;r!==null?(A=r,this.setRenderTarget(A)):A=u;const x=this._renderContexts.get(e,t,A);this._currentRenderContext=x,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const _=this.coordinateSystem,S=this.xr;if(t.coordinateSystem!==_&&S.isPresenting===!1&&(t.coordinateSystem=_,t.updateProjectionMatrix(),t.isArrayCamera))for(const X of t.cameras)X.coordinateSystem=_,X.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),S.enabled===!0&&S.isPresenting===!0&&(S.cameraAutoUpdate===!0&&S.updateCamera(t),t=S.getCamera());let w=this._viewport,C=this._scissor,P=this._pixelRatio;A!==null&&(w=A.viewport,C=A.scissor,P=1),this.getDrawingBufferSize(Q2),JE.set(0,0,Q2.width,Q2.height);const L=w.minDepth===void 0?0:w.minDepth,D=w.maxDepth===void 0?1:w.maxDepth;x.viewportValue.copy(w).multiplyScalar(P).floor(),x.viewportValue.width>>=d,x.viewportValue.height>>=d,x.viewportValue.minDepth=L,x.viewportValue.maxDepth=D,x.viewport=x.viewportValue.equals(JE)===!1,x.scissorValue.copy(C).multiplyScalar(P).floor(),x.scissor=this._scissorTest&&x.scissorValue.equals(JE)===!1,x.scissorValue.width>>=d,x.scissorValue.height>>=d,x.clippingContext||(x.clippingContext=new oS),x.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,A);const B=t.isArrayCamera?tC:eC;t.isArrayCamera||(Z2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(Z2,_));const k=this._renderLists.get(e,t);if(k.begin(),this._projectObject(e,t,0,k,x.clippingContext),k.finish(),this.sortObjects===!0&&k.sort(this._opaqueSort,this._transparentSort),A!==null){this._textures.updateRenderTarget(A,d);const X=this._textures.get(A);x.textures=X.textures,x.depthTexture=X.depthTexture,x.width=X.width,x.height=X.height,x.renderTarget=A,x.depth=A.depthBuffer,x.stencil=A.stencilBuffer}else x.textures=null,x.depthTexture=null,x.width=this.domElement.width,x.height=this.domElement.height,x.depth=this.depth,x.stencil=this.stencil;x.width>>=d,x.height>>=d,x.activeCubeFace=h,x.activeMipmapLevel=d,x.occlusionQueryCount=k.occlusionQueryCount,this._background.update(c,k,x),x.camera=t,this.backend.beginRender(x);const{bundles:U,lightsNode:F,transparentDoublePass:z,transparent:V,opaque:W}=k;return U.length>0&&this._renderBundles(U,c,F),this.opaque===!0&&W.length>0&&this._renderObjects(W,t,c,F),this.transparent===!0&&V.length>0&&this._renderTransparents(V,z,t,c,F),this.backend.finishRender(x),s.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=l,r!==null&&(this.setRenderTarget(u,h,d),this._renderOutput(A)),c.onAfterRender(this,e,t,A),x}_setXRLayerSize(e,t){this._width=e,this._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const n=this.autoClear,r=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=n,this.xr.enabled=r}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setSize(e,t,n=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,r){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,r)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,r,s=0,a=1){const o=this._viewport;e.isVector4?o.copy(e):o.set(e,t,n,r),o.minDepth=s,o.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const r=this._renderTarget||this._getFrameBufferTarget();let s=null;if(r!==null){this._textures.updateRenderTarget(r);const a=this._textures.get(r);s=this._renderContexts.getForClear(r),s.textures=a.textures,s.depthTexture=a.depthTexture,s.width=a.width,s.height=a.height,s.renderTarget=r,s.depth=r.depthBuffer,s.stencil=r.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,n,s),r!==null&&this._renderTarget===null&&this._renderOutput(r)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:Mo}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:Cc}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()}),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const t=this._nodes.nodeFrame,n=t.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,t.renderId=this.info.calls;const r=this.backend,s=this._pipelines,a=this._bindings,o=this._nodes,l=Array.isArray(e)?e:[e];if(l[0]===void 0||l[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");r.beginCompute(e);for(const c of l){if(s.has(c)===!1){const d=()=>{c.removeEventListener("dispose",d),s.delete(c),a.delete(c),o.delete(c)};c.addEventListener("dispose",d);const A=c.onInitFunction;A!==null&&A.call(c,{renderer:this})}o.updateForCompute(c),a.updateForCompute(c);const u=a.getForCompute(c),h=s.getForCompute(c,u);r.compute(e,c,u,h)}r.finishCompute(e),t.renderId=n}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=Bf.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=Bf.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=Bf.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,r;n!==null?r=n.renderTarget:(r=this._renderTarget||this._getFrameBufferTarget(),r!==null&&(this._textures.updateRenderTarget(r),n=this._textures.get(r))),this._textures.updateTexture(e,{renderTarget:r}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,s,a)}async readRenderTargetPixelsAsync(e,t,n,r,s,a=0,o=0){return this.backend.copyTextureToBuffer(e.textures[a],t,n,r,s,o)}_projectObject(e,t,n,r,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){const l=t.isArrayCamera?tC:eC;if(!e.frustumCulled||l.intersectsSprite(e,t)){this.sortObjects===!0&&Bf.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Z2);const{geometry:c,material:u}=e;u.visible&&r.push(e,c,u,n,Bf.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const l=t.isArrayCamera?tC:eC;if(!e.frustumCulled||l.intersectsObject(e,t)){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),Bf.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Z2)),Array.isArray(u)){const h=c.groups;for(let d=0,A=h.length;d<A;d++){const x=h[d],_=u[x.materialIndex];_&&_.visible&&r.push(e,c,_,n,Bf.z,x,s)}}else u.visible&&r.push(e,c,u,n,Bf.z,null,s)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=r;r=this._renderLists.get(e,t),r.begin(),l.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}const o=e.children;for(let l=0,c=o.length;l<c;l++)this._projectObject(o[l],t,n,r,s)}_renderBundles(e,t,n){for(const r of e)this._renderBundle(r,t,n)}_renderTransparents(e,t,n,r,s){if(t.length>0){for(const{material:a}of t)a.side=sr;this._renderObjects(t,n,r,s,"backSide");for(const{material:a}of t)a.side=So;this._renderObjects(e,n,r,s);for(const{material:a}of t)a.side=ws}else this._renderObjects(e,n,r,s)}_renderObjects(e,t,n,r,s=null){for(let a=0,o=e.length;a<o;a++){const{object:l,geometry:c,material:u,group:h,clippingContext:d}=e[a];this._currentRenderObjectFunction(l,n,t,c,u,h,r,d,s)}}renderObject(e,t,n,r,s,a,o,l=null,c=null){let u,h,d;if(e.onBeforeRender(this,t,n,r,s,a),s.allowOverride===!0&&t.overrideMaterial!==null){const A=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(u=A.positionNode,A.positionNode=s.positionNode),A.alphaTest=s.alphaTest,A.alphaMap=s.alphaMap,A.transparent=s.transparent||s.transmission>0,A.isShadowPassMaterial&&(A.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(d=A.depthNode,A.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(h=A.colorNode,A.colorNode=s.castShadowNode),s.castShadowPositionNode&&s.castShadowPositionNode.isNode&&(u=A.positionNode,A.positionNode=s.castShadowPositionNode)),s=A}s.transparent===!0&&s.side===ws&&s.forceSinglePass===!1?(s.side=sr,this._handleObjectFunction(e,s,t,n,o,a,l,"backSide"),s.side=So,this._handleObjectFunction(e,s,t,n,o,a,l,c),s.side=ws):this._handleObjectFunction(e,s,t,n,o,a,l,c),u!==void 0&&(t.overrideMaterial.positionNode=u),d!==void 0&&(t.overrideMaterial.depthNode=d),h!==void 0&&(t.overrideMaterial.colorNode=h),e.onAfterRender(this,t,n,r,s,a)}_renderObjectDirect(e,t,n,r,s,a,o,l){const c=this._objects.get(e,t,n,r,s,this._currentRenderContext,o,l);c.drawRange=e.geometry.drawRange,c.group=a;const u=this._nodes.needsRefresh(c);u&&(this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c)),this._pipelines.updateForRender(c),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(c),c.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(c,this.info),u&&this._nodes.updateAfter(c)}_createObjectPipeline(e,t,n,r,s,a,o,l){const c=this._objects.get(e,t,n,r,s,this._currentRenderContext,o,l);c.drawRange=e.geometry.drawRange,c.group=a,this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class yP{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function _ye(i){return i+(Yf-i%Yf)%Yf}class dW extends yP{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return _ye(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class pW extends dW{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let wye=0;class AW extends pW{constructor(e,t){super("UniformBuffer_"+wye++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class Sye extends pW{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let t=0;for(let n=0,r=this.uniforms.length;n<r;n++){const s=this.uniforms[n],a=s.boundary,o=s.itemSize*e,l=t%Yf,c=l%a,u=l+c;t+=c,u!==0&&Yf-u<o&&(t+=Yf-u),s.offset=t/e,t+=o}return Math.ceil(t/Yf)*Yf}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s]!==r){const o=this._getBufferForType(a);o[s]=n[s]=r,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z||n[s+4]!==r.w){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,o[s+3]=n[s+3]=r.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.r||n[s+1]!==r.g||n[s+2]!==r.b){const a=this.buffer;a[s+0]=n[s+0]=r.r,a[s+1]=n[s+1]=r.g,a[s+2]=n[s+2]=r.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;if(n[s+0]!==r[0]||n[s+1]!==r[1]||n[s+2]!==r[2]||n[s+4]!==r[3]||n[s+5]!==r[4]||n[s+6]!==r[5]||n[s+8]!==r[6]||n[s+9]!==r[7]||n[s+10]!==r[8]){const a=this.buffer;a[s+0]=n[s+0]=r[0],a[s+1]=n[s+1]=r[1],a[s+2]=n[s+2]=r[2],a[s+4]=n[s+4]=r[3],a[s+5]=n[s+5]=r[4],a[s+6]=n[s+6]=r[5],a[s+8]=n[s+8]=r[6],a[s+9]=n[s+9]=r[7],a[s+10]=n[s+10]=r[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;return Mye(n,r,s)===!1&&(this.buffer.set(r,s),Tye(n,r,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function Tye(i,e,t){for(let n=0,r=e.length;n<r;n++)i[t+n]=e[n]}function Mye(i,e,t){for(let n=0,r=e.length;n<r;n++)if(i[t+n]!==e[n])return!1;return!0}let Eye=0;class gW extends Sye{constructor(e,t){super(e),this.id=Eye++,this.groupNode=t,this.isNodeUniformsGroup=!0}}let Cye=0;class Rye extends yP{constructor(e,t){super(e),this.id=Cye++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:t}=this;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class vT extends Rye{constructor(e,t,n,r=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=r}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class mW extends vT{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledCubeTexture=!0}}class vW extends vT{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledTexture3D=!0}}const Pye={textureDimensions:"textureSize",equals:"equal"},Nye={low:"lowp",medium:"mediump",high:"highp"},WI={swizzleAssign:!0,storageBuffer:!1},jI={perspective:"smooth",linear:"noperspective"},XI={centroid:"centroid","flat first":"flat","flat either":"flat"},YI=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class Lye extends uW{constructor(e,t){super(e,t,new oye),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Za}getMethod(e){return Pye[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const a of t.inputs)r.push(this.getType(a.type)+" "+a.name);return`${this.getType(t.type)} ${t.name}( ${r.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,r=t.count*t.itemSize,{itemSize:s}=t,a=t.array.constructor.name.toLowerCase().includes("int");let o=a?im:$x;s===2?o=a?rm:wh:s===3?o=a?EZ:Yx:s===4&&(o=a?sm:ss);const l={Float32Array:ps,Uint8Array:$r,Uint16Array:bc,Uint32Array:br,Int8Array:Cp,Int16Array:Rp,Int32Array:na,Uint8ClampedArray:$r},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/s))));let u=Math.ceil(r/s/c);c*u*s<r&&u++;const h=c*u*s,d=new n.constructor(h);d.set(n,0),t.array=d;const A=new DK(t.array,c,u,o,l[t.array.constructor.name]||ps);A.needsUpdate=!0,A.isPBOTexture=!0;const x=new Mu(A,null,null);x.setPrecision("high"),t.pboNode=x,t.pbo=x.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,r=t.value;if(this.renderer.backend.has(r)){const u=this.renderer.backend.get(r);u.pbo=r.pbo}const s=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label),a=this.getPropertyName(s);this.increaseUsage(n);const o=n.build(this,"uint"),l=this.getDataFromNode(e);let c=l.propertyName;if(c===void 0){const u=this.getVarFromNode(e);c=this.getPropertyName(u);const h=this.getDataFromNode(t);let d=h.propertySizeName;d===void 0&&(d=c+"Size",this.getVarFromNode(t,d,"uint"),this.addLineFlowCode(`${d} = uint( textureSize( ${a}, 0 ).x )`,e),h.propertySizeName=d);const{itemSize:A}=r,x="."+iA.join("").slice(0,A),_=`ivec2(${o} % ${d}, ${o} / ${d})`,S=this.generateTextureLoad(null,a,_,null,"0");let w="vec4";r.pbo.type===br?w="uvec4":r.pbo.type===na&&(w="ivec4"),this.addLineFlowCode(`${c} = ${w}(${S})${x}`,e),l.propertyName=c}return c}generateTextureLoad(e,t,n,r,s="0"){return r?`texelFetch( ${t}, ivec3( ${n}, ${r} ), ${s} )`:`texelFetch( ${t}, ${n}, ${s} )`}generateTexture(e,t,n,r){return e.isDepthTexture?(r&&(n=`vec4( ${n}, ${r} )`),`texture( ${t}, ${n} ).x`):(r&&(n=`vec3( ${n}, ${r} )`),`texture( ${t}, ${n} )`)}generateTextureLevel(e,t,n,r){return`textureLod( ${t}, ${n}, ${r} )`}generateTextureBias(e,t,n,r){return`texture( ${t}, ${n}, ${r} )`}generateTextureGrad(e,t,n,r){return`textureGrad( ${t}, ${n}, ${r[0]}, ${r[1]} )`}generateTextureCompare(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return s?`texture( ${t}, vec4( ${n}, ${s}, ${r} ) )`:`texture( ${t}, vec3( ${n}, ${r} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`${this.getVar(r.type,r.name,r.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],r={};for(const a of t){let o=null,l=!1;if(a.type==="texture"||a.type==="texture3D"){const u=a.node.value;let h="";(u.isDataTexture===!0||u.isData3DTexture===!0)&&(u.type===br?h="u":u.type===na&&(h="i")),a.type==="texture3D"&&u.isArrayTexture===!1?o=`${h}sampler3D ${a.name};`:u.compareFunction?u.isArrayTexture===!0?o=`sampler2DArrayShadow ${a.name};`:o=`sampler2DShadow ${a.name};`:u.isArrayTexture===!0||u.isDataArrayTexture===!0||u.isCompressedArrayTexture===!0?o=`${h}sampler2DArray ${a.name};`:o=`${h}sampler2D ${a.name};`}else if(a.type==="cubeTexture")o=`samplerCube ${a.name};`;else if(a.type==="buffer"){const u=a.node,h=this.getType(u.bufferType),d=u.bufferCount,A=d>0?d:"";o=`${u.name} {
	${h} ${a.name}[${A}];
};
`}else o=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,l=!0;const c=a.node.precision;if(c!==null&&(o=Nye[c]+" "+o),l){o="	"+o;const u=a.groupNode.name;(r[u]||(r[u]=[])).push(o)}else o="uniform "+o,n.push(o)}let s="";for(const a in r){const o=r[a];s+=this._getGLSLUniformStruct(e+"_"+a,o.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==na){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array;r instanceof Uint32Array||r instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let r=0;for(const s of n)t+=`layout( location = ${r++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],r=[];for(const s of n)if(s.output)for(const a of s.members)r.push(`layout( location = ${a.index} ) out ${a.type} ${a.name};`);else{let a="struct "+s.name+` {
`;a+=this.getStructMembers(s),a+=`
};
`,t.push(a)}return r.length===0&&r.push("layout( location = 0 ) out vec4 fragColor;"),`
`+r.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const r of n){e==="compute"&&(r.needsInterpolation=!0);const s=this.getType(r.type);if(r.needsInterpolation)if(r.interpolationType){const a=jI[r.interpolationType]||r.interpolationType,o=XI[r.interpolationSampling]||"";t+=`${a} ${o} out ${s} ${r.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}out ${s} ${r.name};
`}else t+=`${s} ${r.name};
`}else if(e==="fragment"){for(const r of n)if(r.needsInterpolation){const s=this.getType(r.type);if(r.interpolationType){const a=jI[r.interpolationType]||r.interpolationType,o=XI[r.interpolationSampling]||"";t+=`${a} ${o} in ${s} ${r.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}in ${s} ${r.name};
`}}}for(const r of this.builtins[e])t+=`${r};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,r)=>n*r,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const r=this.extensions[n]||(this.extensions[n]=new Map);r.has(e)===!1&&r.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const r=this.renderer.backend.extensions;this.object.isBatchedMesh&&r.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:r,behavior:s}of n.values())t.push(`#extension ${r} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=WI[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const r=this.renderer.backend.extensions;r.has(n)&&(r.get(n),t=!0)}WI[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const r=e[n],s=this.getPropertyName(r.attributeNode);s&&(t+=`${r.varyingName} = ${s};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${YI}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${YI}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const r=this.flowNodes[t],s=r[r.length-1];for(const o of r){const l=this.getFlowData(o),c=o.name;c&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${c}
	`),n+=`${l.code}
	`,o===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${l.result};`):t==="fragment"&&(o.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${l.result};`)))}const a=e[t];a.extensions=this.getExtensions(t),a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.vars=this.getVars(t),a.structs=this.getStructs(t),a.codes=this.getCodes(t),a.transforms=this.getTransforms(t),a.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),a=this.getDataFromNode(e,n,this.globalCache);let o=a.uniformGPU;if(o===void 0){const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,n);if(t==="texture")o=new vT(s.name,s.node,l),u.push(o);else if(t==="cubeTexture")o=new mW(s.name,s.node,l),u.push(o);else if(t==="texture3D")o=new vW(s.name,s.node,l),u.push(o);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const h=new AW(e,l);h.name=e.name,u.push(h),o=h}else{const h=this.uniformGroups[n]||(this.uniformGroups[n]={});let d=h[c];d===void 0&&(d=new gW(n+"_"+c,l),h[c]=d,u.push(d)),o=this.getNodeUniform(s,t),d.addUniform(o)}a.uniformGPU=o}return s}}let nC=null,_0=null;class yW{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){rl("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){rl(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return nC=nC||new lt,this.renderer.getDrawingBufferSize(nC)}setScissorTest(){}getClearColor(){const e=this.renderer;return _0=_0||new tP,e.getClearColor(_0),_0.getRGB(_0),_0}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:GF(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${nm} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let Dye=0;class kye{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class Oye{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:r}=n,s=e.array,a=e.usage||r.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,l=n.get(o);let c=l.bufferGPU;c===void 0&&(c=this._createBuffer(r,t,s,a),l.bufferGPU=c,l.bufferType=t,l.version=o.version);let u;if(s instanceof Float32Array)u=r.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?u=r.HALF_FLOAT:u=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)u=r.SHORT;else if(s instanceof Uint32Array)u=r.UNSIGNED_INT;else if(s instanceof Int32Array)u=r.INT;else if(s instanceof Int8Array)u=r.BYTE;else if(s instanceof Uint8Array)u=r.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)u=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let h={bufferGPU:c,bufferType:t,type:u,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:u===r.INT||u===r.UNSIGNED_INT||e.gpuType===na,id:Dye++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const d=this._createBuffer(r,t,s,a);h=new kye(h,d)}n.set(e,h)}updateAttribute(e){const t=this.backend,{gl:n}=t,r=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=t.get(s),o=a.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(o,a.bufferGPU),l.length===0)n.bufferSubData(o,0,r);else{for(let c=0,u=l.length;c<u;c++){const h=l[c];n.bufferSubData(o,h.start*r.BYTES_PER_ELEMENT,r,h.start,h.count)}s.clearUpdateRanges()}n.bindBuffer(o,null),a.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,r=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(r),a=e.array,o=a.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const l=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.bufferData(n.COPY_WRITE_BUFFER,o,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,o),await t.utils._clientWaitAsync();const c=new e.array.constructor(a.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,c),n.deleteBuffer(l),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,t,n,r){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,r),e.bindBuffer(t,null),s}}let iC,Kv;class Iye{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;iC={[ka]:e.FUNC_ADD,[K5]:e.FUNC_SUBTRACT,[J5]:e.FUNC_REVERSE_SUBTRACT},Kv={[Ah]:e.ZERO,[e6]:e.ONE,[t6]:e.SRC_COLOR,[Gy]:e.SRC_ALPHA,[o6]:e.SRC_ALPHA_SATURATE,[s6]:e.DST_COLOR,[i6]:e.DST_ALPHA,[n6]:e.ONE_MINUS_SRC_COLOR,[Vy]:e.ONE_MINUS_SRC_ALPHA,[a6]:e.ONE_MINUS_DST_COLOR,[r6]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new Cn().fromArray(t),this.currentViewport=new Cn().fromArray(n),this._tempVec4=new Cn}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==CF?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===g4?t.cullFace(t.BACK):e===RF?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,r,s,a,o,l){const{gl:c}=this;if(e===To){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==Y0){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==ka||this.currentBlendEquationAlpha!==ka)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=ka,this.currentBlendEquationAlpha=ka),l)switch(e){case to:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case sg:c.blendFunc(c.ONE,c.ONE);break;case ag:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case og:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case to:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case sg:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case ag:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case og:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,a=a||n,o=o||r,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(iC[t],iC[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||r!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||o!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(Kv[n],Kv[r],Kv[a],Kv[o]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case Hy:t.depthFunc(t.NEVER);break;case qy:t.depthFunc(t.ALWAYS);break;case Wy:t.depthFunc(t.LESS);break;case ld:t.depthFunc(t.LEQUAL);break;case jy:t.depthFunc(t.EQUAL);break;case Xy:t.depthFunc(t.GEQUAL);break;case Yy:t.depthFunc(t.GREATER);break;case $y:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentScissor.equals(s)===!1){const{gl:a}=this;a.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentViewport.equals(s)===!1){const{gl:a}=this;a.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:r}=this;e.side===ws?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let s=e.side===sr;t&&(s=!s),this.setFlipSided(s),e.blending===to&&e.transparent===!1?this.setBlending(To):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let l=0;l<8;l++)l<n?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,t,n){const{gl:r}=this;e?(this.enable(r.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const n=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(n.bindVertexArray(e),t!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:r}=this;return r[e]!==t?(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let r=[],s=!1;if(e.textures!==null){r=this.currentDrawbuffers.get(t),r===void 0&&(r=[],this.currentDrawbuffers.set(t,r));const a=e.textures;if(r.length!==a.length||r[0]!==n.COLOR_ATTACHMENT0){for(let o=0,l=a.length;o<l;o++)r[o]=n.COLOR_ATTACHMENT0+o;r.length=a.length,s=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,s=!0);s&&n.drawBuffers(r)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:r}=this;e===void 0&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:r,currentTextureSlot:s,currentBoundTextures:a,maxTextures:o}=this;n===void 0&&(s===null?n=r.TEXTURE0+o-1:n=s);let l=a[n];l===void 0&&(l={type:void 0,texture:void 0},a[n]=l),(l.type!==e||l.texture!==t)&&(s!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,n){const{gl:r}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,r=n[t];r!==void 0&&r.type!==void 0&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)}}class Bye{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=Za){const{gl:n,extensions:r}=this;let s;const a=qn.getTransfer(t);if(e===$r)return n.UNSIGNED_BYTE;if(e===PS)return n.UNSIGNED_SHORT_4_4_4_4;if(e===NS)return n.UNSIGNED_SHORT_5_5_5_1;if(e===LS)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===Cp)return n.BYTE;if(e===Rp)return n.SHORT;if(e===bc)return n.UNSIGNED_SHORT;if(e===na)return n.INT;if(e===br)return n.UNSIGNED_INT;if(e===ps)return n.FLOAT;if(e===Ss)return n.HALF_FLOAT;if(e===u6)return n.ALPHA;if(e===Yx)return n.RGB;if(e===ss)return n.RGBA;if(e===nl)return n.DEPTH_COMPONENT;if(e===il)return n.DEPTH_STENCIL;if(e===$x)return n.RED;if(e===im)return n.RED_INTEGER;if(e===wh)return n.RG;if(e===rm)return n.RG_INTEGER;if(e===sm)return n.RGBA_INTEGER;if(e===Pp||e===Jf||e===ed||e===td)if(a===rn)if(s=r.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===Pp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===Jf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===ed)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===td)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=r.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===Pp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Jf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ed)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===td)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===Qy||e===Zy||e===Ky||e===Jy)if(s=r.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===Qy)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Zy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ky)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Jy)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===ex||e===ug||e===hg)if(s=r.get("WEBGL_compressed_texture_etc"),s!==null){if(e===ex||e===ug)return a===rn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===hg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===fg||e===dg||e===pg||e===Ag||e===gg||e===mg||e===vg||e===yg||e===xg||e===bg||e===_g||e===wg||e===Sg||e===Tg)if(s=r.get("WEBGL_compressed_texture_astc"),s!==null){if(e===fg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===dg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===pg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Ag)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===gg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===mg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===vg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===yg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===xg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===bg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===_g)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===wg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Sg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Tg)return a===rn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===Np)if(s=r.get("EXT_texture_compression_bptc"),s!==null){if(e===Np)return a===rn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===h6||e===tx||e===nx||e===ix)if(s=r.get("EXT_texture_compression_rgtc"),s!==null){if(e===Np)return s.COMPRESSED_RED_RGTC1_EXT;if(e===tx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===nx)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===ix)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===tl?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,r)=>{function s(){const a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(t),r();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let $I=!1,K2,rC,QI;class Fye{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},$I===!1&&(this._init(),$I=!0)}_init(){const e=this.gl;K2={[Vp]:e.REPEAT,[lu]:e.CLAMP_TO_EDGE,[Hp]:e.MIRRORED_REPEAT},rC={[Er]:e.NEAREST,[c6]:e.NEAREST_MIPMAP_NEAREST,[_h]:e.NEAREST_MIPMAP_LINEAR,[Bs]:e.LINEAR,[$0]:e.LINEAR_MIPMAP_NEAREST,[vo]:e.LINEAR_MIPMAP_LINEAR},QI={[f6]:e.NEVER,[m6]:e.ALWAYS,[DS]:e.LESS,[kS]:e.LEQUAL,[d6]:e.EQUAL,[g6]:e.GEQUAL,[p6]:e.GREATER,[A6]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,r,s=!1){const{gl:a,extensions:o}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;if(t===a.RED&&(n===a.FLOAT&&(l=a.R32F),n===a.HALF_FLOAT&&(l=a.R16F),n===a.UNSIGNED_BYTE&&(l=a.R8),n===a.UNSIGNED_SHORT&&(l=a.R16),n===a.UNSIGNED_INT&&(l=a.R32UI),n===a.BYTE&&(l=a.R8I),n===a.SHORT&&(l=a.R16I),n===a.INT&&(l=a.R32I)),t===a.RED_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.R8UI),n===a.UNSIGNED_SHORT&&(l=a.R16UI),n===a.UNSIGNED_INT&&(l=a.R32UI),n===a.BYTE&&(l=a.R8I),n===a.SHORT&&(l=a.R16I),n===a.INT&&(l=a.R32I)),t===a.RG&&(n===a.FLOAT&&(l=a.RG32F),n===a.HALF_FLOAT&&(l=a.RG16F),n===a.UNSIGNED_BYTE&&(l=a.RG8),n===a.UNSIGNED_SHORT&&(l=a.RG16),n===a.UNSIGNED_INT&&(l=a.RG32UI),n===a.BYTE&&(l=a.RG8I),n===a.SHORT&&(l=a.RG16I),n===a.INT&&(l=a.RG32I)),t===a.RG_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RG8UI),n===a.UNSIGNED_SHORT&&(l=a.RG16UI),n===a.UNSIGNED_INT&&(l=a.RG32UI),n===a.BYTE&&(l=a.RG8I),n===a.SHORT&&(l=a.RG16I),n===a.INT&&(l=a.RG32I)),t===a.RGB){const c=s?Mg:qn.getTransfer(r);n===a.FLOAT&&(l=a.RGB32F),n===a.HALF_FLOAT&&(l=a.RGB16F),n===a.UNSIGNED_BYTE&&(l=a.RGB8),n===a.UNSIGNED_SHORT&&(l=a.RGB16),n===a.UNSIGNED_INT&&(l=a.RGB32UI),n===a.BYTE&&(l=a.RGB8I),n===a.SHORT&&(l=a.RGB16I),n===a.INT&&(l=a.RGB32I),n===a.UNSIGNED_BYTE&&(l=c===rn?a.SRGB8:a.RGB8),n===a.UNSIGNED_SHORT_5_6_5&&(l=a.RGB565),n===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1),n===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGB4),n===a.UNSIGNED_INT_5_9_9_9_REV&&(l=a.RGB9_E5)}if(t===a.RGB_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RGB8UI),n===a.UNSIGNED_SHORT&&(l=a.RGB16UI),n===a.UNSIGNED_INT&&(l=a.RGB32UI),n===a.BYTE&&(l=a.RGB8I),n===a.SHORT&&(l=a.RGB16I),n===a.INT&&(l=a.RGB32I)),t===a.RGBA){const c=s?Mg:qn.getTransfer(r);n===a.FLOAT&&(l=a.RGBA32F),n===a.HALF_FLOAT&&(l=a.RGBA16F),n===a.UNSIGNED_BYTE&&(l=a.RGBA8),n===a.UNSIGNED_SHORT&&(l=a.RGBA16),n===a.UNSIGNED_INT&&(l=a.RGBA32UI),n===a.BYTE&&(l=a.RGBA8I),n===a.SHORT&&(l=a.RGBA16I),n===a.INT&&(l=a.RGBA32I),n===a.UNSIGNED_BYTE&&(l=c===rn?a.SRGB8_ALPHA8:a.RGBA8),n===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGBA4),n===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1)}return t===a.RGBA_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RGBA8UI),n===a.UNSIGNED_SHORT&&(l=a.RGBA16UI),n===a.UNSIGNED_INT&&(l=a.RGBA32UI),n===a.BYTE&&(l=a.RGBA8I),n===a.SHORT&&(l=a.RGBA16I),n===a.INT&&(l=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(n===a.UNSIGNED_SHORT&&(l=a.DEPTH_COMPONENT16),n===a.UNSIGNED_INT&&(l=a.DEPTH_COMPONENT24),n===a.FLOAT&&(l=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&n===a.UNSIGNED_INT_24_8&&(l=a.DEPTH24_STENCIL8),(l===a.R16F||l===a.R32F||l===a.RG16F||l===a.RG32F||l===a.RGBA16F||l===a.RGBA32F)&&o.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:n,extensions:r,backend:s}=this,a=qn.getPrimaries(qn.workingColorSpace),o=t.colorSpace===Za?null:qn.getPrimaries(t.colorSpace),l=t.colorSpace===Za||a===o?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,l),n.texParameteri(e,n.TEXTURE_WRAP_S,K2[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,K2[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&(t.isArrayTexture||n.texParameteri(e,n.TEXTURE_WRAP_R,K2[t.wrapR])),n.texParameteri(e,n.TEXTURE_MAG_FILTER,rC[t.magFilter]);const c=t.mipmaps!==void 0&&t.mipmaps.length>0,u=t.minFilter===Bs&&c?vo:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,rC[u]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,QI[t.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Er||t.minFilter!==_h&&t.minFilter!==vo||t.type===ps&&r.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const h=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:r}=this,s=this.getGLTextureType(e);let a=r[s];a===void 0&&(a=t.createTexture(),n.state.bindTexture(s,a),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),r[s]=a),n.set(e,{textureGPU:a,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:r}=this,{levels:s,width:a,height:o,depth:l}=t,c=r.utils.convert(e.format,e.colorSpace),u=r.utils.convert(e.type),h=this.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),d=n.createTexture(),A=this.getGLTextureType(e);r.state.bindTexture(A,d),this.setTextureParameters(A,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,h,a,o,l):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,h,a,o,l):e.isVideoTexture||n.texStorage2D(A,s,h,a,o),r.set(e,{textureGPU:d,glTextureType:A,glFormat:c,glType:u,glInternalFormat:h})}copyBufferToTexture(e,t){const{gl:n,backend:r}=this,{textureGPU:s,glTextureType:a,glFormat:o,glType:l}=r.get(t),{width:c,height:u}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(a,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(a,0,0,0,c,u,o,l,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:r,height:s}=t,{textureGPU:a,glTextureType:o,glFormat:l,glType:c,glInternalFormat:u}=this.backend.get(e);if(!(e.isRenderTargetTexture||a===void 0))if(this.backend.state.bindTexture(o,a),this.setTextureParameters(o,e),e.isCompressedTexture){const h=e.mipmaps,d=t.image;for(let A=0;A<h.length;A++){const x=h[A];e.isCompressedArrayTexture?e.format!==n.RGBA?l!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,A,0,0,0,x.width,x.height,d.depth,l,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,A,0,0,0,x.width,x.height,d.depth,l,c,x.data):l!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,A,0,0,x.width,x.height,l,x.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=t.images;for(let d=0;d<6;d++){const A=ZI(h[d]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,0,0,r,s,l,c,A)}}else if(e.isDataArrayTexture||e.isArrayTexture){const h=t.image;n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,l,c,h.data)}else if(e.isData3DTexture){const h=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,l,c,h.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(o,0,u,l,c,t.image);else{const h=ZI(t.image);n.texSubImage2D(o,0,0,0,r,s,l,c,h)}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:r,glTextureType:s}=n.get(e);n.state.bindTexture(s,r),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(const s in r.framebuffers)t.deleteFramebuffer(r.framebuffers[s]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(let s=0;s<r.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(r.msaaRenderbuffers[s]);delete r.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:r,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(r),n.delete(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){const{gl:o,backend:l}=this,{state:c}=this.backend,{textureGPU:u,glTextureType:h,glType:d,glFormat:A}=l.get(t);c.bindTexture(h,u);let x,_,S,w,C,P,L,D,B;const k=e.isCompressedTexture?e.mipmaps[a]:e.image;if(n!==null)x=n.max.x-n.min.x,_=n.max.y-n.min.y,S=n.isBox3?n.max.z-n.min.z:1,w=n.min.x,C=n.min.y,P=n.isBox3?n.min.z:0;else{const J=Math.pow(2,-s);x=Math.floor(k.width*J),_=Math.floor(k.height*J),e.isDataArrayTexture||e.isArrayTexture?S=k.depth:e.isData3DTexture?S=Math.floor(k.depth*J):S=1,w=0,C=0,P=0}r!==null?(L=r.x,D=r.y,B=r.z):(L=0,D=0,B=0),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const U=o.getParameter(o.UNPACK_ROW_LENGTH),F=o.getParameter(o.UNPACK_IMAGE_HEIGHT),z=o.getParameter(o.UNPACK_SKIP_PIXELS),V=o.getParameter(o.UNPACK_SKIP_ROWS),W=o.getParameter(o.UNPACK_SKIP_IMAGES);o.pixelStorei(o.UNPACK_ROW_LENGTH,k.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,k.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,w),o.pixelStorei(o.UNPACK_SKIP_ROWS,C),o.pixelStorei(o.UNPACK_SKIP_IMAGES,P);const X=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const J=l.get(e),K=l.get(t),Y=l.get(J.renderTarget),ee=l.get(K.renderTarget),se=Y.framebuffers[J.cacheKey],fe=ee.framebuffers[K.cacheKey];c.bindFramebuffer(o.READ_FRAMEBUFFER,se),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,fe);let ne=o.COLOR_BUFFER_BIT;e.isDepthTexture&&(ne=o.DEPTH_BUFFER_BIT),o.blitFramebuffer(w,C,x,_,L,D,x,_,ne,o.NEAREST),c.bindFramebuffer(o.READ_FRAMEBUFFER,null),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else X?e.isDataTexture||e.isData3DTexture?o.texSubImage3D(h,a,L,D,B,x,_,S,A,d,k.data):t.isCompressedArrayTexture?o.compressedTexSubImage3D(h,a,L,D,B,x,_,S,A,k.data):o.texSubImage3D(h,a,L,D,B,x,_,S,A,d,k):e.isDataTexture?o.texSubImage2D(h,a,L,D,x,_,A,d,k.data):e.isCompressedTexture?o.compressedTexSubImage2D(h,a,L,D,k.width,k.height,A,k.data):o.texSubImage2D(h,a,L,D,x,_,A,d,k);o.pixelStorei(o.UNPACK_ROW_LENGTH,U),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,F),o.pixelStorei(o.UNPACK_SKIP_PIXELS,z),o.pixelStorei(o.UNPACK_SKIP_ROWS,V),o.pixelStorei(o.UNPACK_SKIP_IMAGES,W),a===0&&t.generateMipmaps&&o.generateMipmap(h),c.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:r}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:o,y:l,z:c,w:u}=n,h=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,d=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(h){const A=o!==0||l!==0;let x,_;if(e.isDepthTexture===!0?(x=r.DEPTH_BUFFER_BIT,_=r.DEPTH_ATTACHMENT,t.stencil&&(x|=r.STENCIL_BUFFER_BIT)):(x=r.COLOR_BUFFER_BIT,_=r.COLOR_ATTACHMENT0),A){const S=this.backend.get(t.renderTarget),w=S.framebuffers[t.getCacheKey()],C=S.msaaFrameBuffer;s.bindFramebuffer(r.DRAW_FRAMEBUFFER,w),s.bindFramebuffer(r.READ_FRAMEBUFFER,C);const P=d-l-u;r.blitFramebuffer(o,P,o+c,P+u,o,P,o+c,P+u,x,r.NEAREST),s.bindFramebuffer(r.READ_FRAMEBUFFER,w),s.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,P,c,u),s.unbindTexture()}else{const S=r.createFramebuffer();s.bindFramebuffer(r.DRAW_FRAMEBUFFER,S),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,_,r.TEXTURE_2D,a,0),r.blitFramebuffer(0,0,c,u,0,0,c,u,x,r.NEAREST),r.deleteFramebuffer(S)}}else s.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,d-u-l,c,u),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,r=!1){const{gl:s}=this,a=t.renderTarget,{depthTexture:o,depthBuffer:l,stencilBuffer:c,width:u,height:h}=a;if(s.bindRenderbuffer(s.RENDERBUFFER,e),l&&!c){let d=s.DEPTH_COMPONENT24;r===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,a.samples,d,u,h):n>0?(o&&o.isDepthTexture&&o.type===s.FLOAT&&(d=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,n,d,u,h)):s.renderbufferStorage(s.RENDERBUFFER,d,u,h),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else l&&c&&(n>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,s.DEPTH24_STENCIL8,u,h):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,u,h),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e))}async copyTextureToBuffer(e,t,n,r,s,a){const{backend:o,gl:l}=this,{textureGPU:c,glFormat:u,glType:h}=this.backend.get(e),d=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,d);const A=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+a:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,A,c,0);const x=this._getTypedArrayType(h),_=this._getBytesPerTexel(h,u),w=r*s*_,C=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,C),l.bufferData(l.PIXEL_PACK_BUFFER,w,l.STREAM_READ),l.readPixels(t,n,r,s,u,h,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await o.utils._clientWaitAsync();const P=new x(w/x.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,C),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,P),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(d),P}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let r=0;if(e===n.UNSIGNED_BYTE&&(r=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(r=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(r=4),t===n.RGBA)return r*4;if(t===n.RGB)return r*3;if(t===n.ALPHA)return r}}function ZI(i){return i.isDataTexture?i.image.data:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?i:i.data}class Uye{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class zye{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const KI={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class Gye{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:r,object:s,type:a,info:o,index:l}=this;l!==0?n.drawElements(r,t,a,e):n.drawArrays(r,e,t),o.update(s,t,1)}renderInstances(e,t,n){const{gl:r,mode:s,type:a,index:o,object:l,info:c}=this;n!==0&&(o!==0?r.drawElementsInstanced(s,t,a,e,n):r.drawArraysInstanced(s,e,t,n),c.update(l,t,n))}renderMultiDraw(e,t,n){const{extensions:r,mode:s,object:a,info:o}=this;if(n===0)return;const l=r.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<n;c++)this.render(e[c],t[c]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):l.multiDrawArraysWEBGL(s,e,0,t,0,n);let c=0;for(let u=0;u<n;u++)c+=t[u];o.update(a,c,1)}}renderMultiDrawInstances(e,t,n,r){const{extensions:s,mode:a,object:o,info:l}=this;if(n===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<n;u++)this.renderInstances(e[u],t[u],r[u]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,r,0,n):c.multiDrawArraysInstancedWEBGL(a,e,0,t,0,r,0,n);let u=0;for(let h=0;h<n;h++)u+=t[h]*r[h];l.update(o,u,1)}}}class xW{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class Vye extends xW{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let r=0;r<this.maxQueries;r++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return rl(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e.id,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(r){console.error("Error in beginQuery:",r),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[r,s]of this.queryStates)if(s==="ended"){const a=this.queries[r];e.push(this.resolveQuery(a))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((r,s)=>r+s,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,r=!1;const s=()=>{n&&(clearTimeout(n),n=null)},a=l=>{r||(r=!0,s(),t(l))},o=()=>{if(this.isDisposed){a(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){a(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(o,1);return}const u=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(u)/1e6)}catch(l){console.error("Error checking query:",l),t(this.lastValue)}};o()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}const JI=new lt;class eB extends yW{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},r=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function s(a){a.preventDefault();const o={api:"WebGL",message:a.statusMessage||"Unknown reason",reason:null,originalEvent:a};e.onDeviceLost(o)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=r,this.extensions=new Uye(this),this.capabilities=new zye(this),this.attributeUtils=new Oye(this),this.textureUtils=new Fye(this),this.bufferRenderer=new Gye(this),this.state=new Iye(this),this.utils=new Bye(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return eo}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,n=null){const r=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:r.RGBA8}),n!==null){const s=e.stencilBuffer?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer===!0&&e.multiview===!1&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e.autoAllocateDepthBuffer=!1}}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t]||(this.timestampQueryPool[t]=new Vye(this.gl,t,2048));const n=this.timestampQueryPool[t];n.allocateQueriesForContext(e)!==null&&n.beginQuery(e)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t].endQuery(e)}getContext(){return this.gl}beginRender(e){const{state:t}=this,n=this.get(e);if(e.viewport)this.updateViewport(e);else{const{width:s,height:a}=this.getDrawingBufferSize(JI);t.viewport(0,0,s,a)}if(e.scissor){const{x:s,y:a,width:o,height:l}=e.scissorValue;t.scissor(s,e.height-l-a,o,l)}this.initTimestampQuery(e),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const r=e.occlusionQueryCount;r>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(r),n.occlusionQueryObjects=new Array(r),n.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,r=this.get(e),s=r.previousContext;n.resetVertexState();const a=e.occlusionQueryCount;a>0&&(a>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const o=e.textures;if(o!==null)for(let l=0;l<o.length;l++){const c=o[l];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const l=this.get(e.renderTarget),{resolveDepthBuffer:c,samples:u}=e.renderTarget;if(u>0&&this._useMultisampledExtension(e.renderTarget)===!1){const h=l.framebuffers[e.getCacheKey()],d=t.COLOR_BUFFER_BIT,A=l.msaaFrameBuffer,x=e.textures;n.bindFramebuffer(t.READ_FRAMEBUFFER,A),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,h);for(let _=0;_<x.length;_++)if(e.scissor){const{x:S,y:w,width:C,height:P}=e.scissorValue,L=e.height-P-w;t.blitFramebuffer(S,L,S+C,L+P,S,L,S+C,L+P,d,t.NEAREST),this._supportsInvalidateFramebuffer===!0&&t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray,S,L,C,P)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,d,t.NEAREST),this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray)}else if(c===!1&&l.framebuffers){const h=l.framebuffers[e.getCacheKey()];n.bindFramebuffer(t.DRAW_FRAMEBUFFER,h),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,l.depthInvalidationArray)}}if(s!==null)if(this._setFramebuffer(s),s.viewport)this.updateViewport(s);else{const{width:l,height:c}=this.getDrawingBufferSize(JI);n.viewport(0,0,l,c)}this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet,{gl:a}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const o=()=>{let l=0;for(let c=0;c<n.length;c++){const u=n[c];u!==null&&a.getQueryParameter(u,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(u,a.QUERY_RESULT)===0&&s.add(r[c]),n[c]=null,a.deleteQuery(u),l++)}l<n.length?requestAnimationFrame(o):t.occluded=s};o()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:r,width:s,height:a}=e.viewportValue;t.viewport(n,e.height-a-r,s,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,n,r=null,s=!0){const{gl:a,renderer:o}=this;r===null&&(r={textures:null,clearColorValue:this.getClearColor()});let l=0;if(e&&(l|=a.COLOR_BUFFER_BIT),t&&(l|=a.DEPTH_BUFFER_BIT),n&&(l|=a.STENCIL_BUFFER_BIT),l!==0){let c;r.clearColorValue?c=r.clearColorValue:c=this.getClearColor();const u=o.getClearDepth(),h=o.getClearStencil();if(t&&this.state.setDepthMask(!0),r.textures===null)a.clearColor(c.r,c.g,c.b,c.a),a.clear(l);else{if(s&&this._setFramebuffer(r),e)for(let d=0;d<r.textures.length;d++)d===0?a.clearBufferfv(a.COLOR,d,[c.r,c.g,c.b,c.a]):a.clearBufferfv(a.COLOR,d,[0,0,0,1]);t&&n?a.clearBufferfi(a.DEPTH_STENCIL,0,u,h):t?a.clearBufferfv(a.DEPTH,0,[u]):n&&a.clearBufferiv(a.STENCIL,0,[h])}}}beginCompute(e){const{state:t,gl:n}=this;t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,n,r){const{state:s,gl:a}=this;this.discard===!1&&(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:o,transformBuffers:l,attributes:c}=this.get(r),u=this._getVaoKey(c),h=this.vaoCache[u];h===void 0?this._createVao(c):s.setVertexState(h),s.useProgram(o),this._bindUniforms(n);const d=this._getTransformFeedback(l);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,d),a.beginTransformFeedback(a.POINTS),c[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,t.count):a.drawArrays(a.POINTS,0,t.count),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(let A=0;A<l.length;A++){const x=l[A];x.pbo&&this.textureUtils.copyBufferToTexture(x.transformBuffer,x.pbo),x.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:t,pipeline:n,material:r,context:s,hardwareClippingPlanes:a}=e,{programGPU:o}=this.get(n),{gl:l,state:c}=this,u=this.get(s),h=e.getDrawParameters();if(h===null)return;this._bindUniforms(e.getBindings());const d=t.isMesh&&t.matrixWorld.determinant()<0;c.setMaterial(r,d,a),c.useProgram(o);const A=this.get(e);let x=A.staticVao;if(x===void 0||A.geometryId!==e.geometry.id){const k=this._getVaoKey(e.getAttributes());if(x=this.vaoCache[k],x===void 0){let U;({vaoGPU:x,staticVao:U}=this._createVao(e.getAttributes())),U&&(A.staticVao=x,A.geometryId=e.geometry.id)}}const _=e.getIndex(),S=_!==null?this.get(_).bufferGPU:null;c.setVertexState(x,S);const w=u.lastOcclusionObject;if(w!==t&&w!==void 0){if(w!==null&&w.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),u.occlusionQueryIndex++),t.occlusionTest===!0){const k=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,k),u.occlusionQueries[u.occlusionQueryIndex]=k,u.occlusionQueryObjects[u.occlusionQueryIndex]=t}u.lastOcclusionObject=t}const C=this.bufferRenderer;t.isPoints?C.mode=l.POINTS:t.isLineSegments?C.mode=l.LINES:t.isLine?C.mode=l.LINE_STRIP:t.isLineLoop?C.mode=l.LINE_LOOP:r.wireframe===!0?(c.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),C.mode=l.LINES):C.mode=l.TRIANGLES;const{vertexCount:P,instanceCount:L}=h;let{firstVertex:D}=h;if(C.object=t,_!==null){D*=_.array.BYTES_PER_ELEMENT;const k=this.get(_);C.index=_.count,C.type=k.type}else C.index=0;const B=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?(rl("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),C.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?C.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):rl("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):L>1?C.renderInstances(D,P,L):C.render(D,P)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const k=this.get(e.camera),U=e.camera.cameras,F=e.getBindingGroup("cameraIndex").bindings[0];if(k.indexesGPU===void 0||k.indexesGPU.length!==U.length){const K=new Uint32Array([0,0,0,0]),Y=[];for(let ee=0,se=U.length;ee<se;ee++){const fe=l.createBuffer();K[0]=ee,l.bindBuffer(l.UNIFORM_BUFFER,fe),l.bufferData(l.UNIFORM_BUFFER,K,l.STATIC_DRAW),Y.push(fe)}k.indexesGPU=Y}const z=this.get(F),V=this.renderer.getPixelRatio(),W=this._currentContext.renderTarget,X=this._isRenderCameraDepthArray(this._currentContext),J=this._currentContext.activeCubeFace;if(X){const K=this.get(W.depthTexture);if(K.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){K.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:Y}=W;for(let ee=0,se=U.length;ee<se;ee++)this.renderer._activeCubeFace=ee,this._currentContext.activeCubeFace=ee,this._setFramebuffer(this._currentContext),this.clear(!1,!0,Y,this._currentContext,!1);this.renderer._activeCubeFace=J,this._currentContext.activeCubeFace=J}}for(let K=0,Y=U.length;K<Y;K++){const ee=U[K];if(t.layers.test(ee.layers)){X&&(this.renderer._activeCubeFace=K,this._currentContext.activeCubeFace=K,this._setFramebuffer(this._currentContext));const se=ee.viewport;if(se!==void 0){const fe=se.x*V,ne=se.y*V,he=se.width*V,Te=se.height*V;c.viewport(Math.floor(fe),Math.floor(e.context.height-Te-ne),Math.floor(he),Math.floor(Te))}c.bindBufferBase(l.UNIFORM_BUFFER,z.index,k.indexesGPU[K]),B()}this._currentContext.activeCubeFace=J,this.renderer._activeCubeFace=J}}else B()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new Lye(e,t)}createProgram(e){const t=this.gl,{stage:n,code:r}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,r),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,r=e.pipeline,{fragmentProgram:s,vertexProgram:a}=r,o=n.createProgram(),l=this.get(s).shaderGPU,c=this.get(a).shaderGPU;if(n.attachShader(o,l),n.attachShader(o,c),n.linkProgram(o),this.set(r,{programGPU:o,fragmentShader:l,vertexShader:c}),t!==null&&this.parallel){const u=new Promise(h=>{const d=this.parallel,A=()=>{n.getProgramParameter(o,d.COMPLETION_STATUS_KHR)?(this._completeCompile(e,r),h()):requestAnimationFrame(A)};A()});t.push(u);return}this._completeCompile(e,r)}_handleSource(e,t){const n=e.split(`
`),r=[],s=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=s;o<a;o++){const l=o+1;r.push(`${l===t?">":" "} ${l}: ${n[o]}`)}return r.join(`
`)}_getShaderErrors(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(t),o)}else return s}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const r=this.gl,s=r.getProgramInfoLog(e).trim();if(r.getProgramParameter(e,r.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(r,e,n,t);else{const a=this._getShaderErrors(r,n,"vertex"),o=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+a+`
`+o)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,t){const{state:n,gl:r}=this,s=this.get(t),{programGPU:a,fragmentShader:o,vertexShader:l}=s;r.getProgramParameter(a,r.LINK_STATUS)===!1&&this._logProgramError(a,o,l),n.useProgram(a);const c=e.getBindings();this._setupBindings(c,a),this.set(t,{programGPU:a})}createComputePipeline(e,t){const{state:n,gl:r}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,o=r.createProgram(),l=this.get(s).shaderGPU,c=this.get(a).shaderGPU,u=a.transforms,h=[],d=[];for(let S=0;S<u.length;S++){const w=u[S];h.push(w.varyingName),d.push(w.attributeNode)}r.attachShader(o,l),r.attachShader(o,c),r.transformFeedbackVaryings(o,h,r.SEPARATE_ATTRIBS),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)===!1&&this._logProgramError(o,l,c),n.useProgram(o),this._setupBindings(t,o);const A=a.attributes,x=[],_=[];for(let S=0;S<A.length;S++){const w=A[S].node.attribute;x.push(w),this.has(w)||this.attributeUtils.createAttribute(w,r.ARRAY_BUFFER)}for(let S=0;S<d.length;S++){const w=d[S].attribute;this.has(w)||this.attributeUtils.createAttribute(w,r.ARRAY_BUFFER);const C=this.get(w);_.push(C)}this.set(e,{programGPU:o,transformBuffers:_,attributes:x})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,r=0;for(const s of t){this.set(s,{textures:r,uniformBuffers:n});for(const a of s.bindings)a.isUniformBuffer&&n++,a.isSampledTexture&&r++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let r=n.uniformBuffers,s=n.textures;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const o=a.buffer,l=t.createBuffer();t.bindBuffer(t.UNIFORM_BUFFER,l),t.bufferData(t.UNIFORM_BUFFER,o,t.DYNAMIC_DRAW),this.set(a,{index:r++,bufferGPU:l})}else if(a.isSampledTexture){const{textureGPU:o,glTextureType:l}=this.get(a.texture);this.set(a,{index:s++,textureGPU:o,glTextureType:l})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const r=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(KI).filter(r=>KI[r]===e),n=this.extensions;for(let r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){this.textureUtils.copyTextureToTexture(e,t,n,r,s,a)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let r=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:o,depthBuffer:l,stencilBuffer:c}=s,u=s.isWebGLCubeRenderTarget===!0,h=s.isRenderTarget3D===!0,d=s.depth>1,A=s.isXRRenderTarget===!0,x=A===!0&&s.hasExternalTextures===!0;let _=a.msaaFrameBuffer,S=a.depthRenderbuffer;const w=this.extensions.get("WEBGL_multisampled_render_to_texture"),C=this.extensions.get("OVR_multiview2"),P=this._useMultisampledExtension(s),L=uq(e);let D;if(u?(a.cubeFramebuffers||(a.cubeFramebuffers={}),D=a.cubeFramebuffers[L]):A&&x===!1?D=this._xrFramebuffer:(a.framebuffers||(a.framebuffers={}),D=a.framebuffers[L]),D===void 0){D=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,D);const B=e.textures,k=[];if(u){a.cubeFramebuffers[L]=D;const{textureGPU:F}=this.get(B[0]),z=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+z,F,0)}else{a.framebuffers[L]=D;for(let F=0;F<B.length;F++){const z=B[F],V=this.get(z);V.renderTarget=e.renderTarget,V.cacheKey=L;const W=t.COLOR_ATTACHMENT0+F;if(s.multiview)C.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,W,V.textureGPU,0,o,0,2);else if(h||d){const X=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,W,V.textureGPU,0,X)}else P?w.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,W,t.TEXTURE_2D,V.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,W,t.TEXTURE_2D,V.textureGPU,0)}n.drawBuffers(e,D)}const U=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s.autoAllocateDepthBuffer===!0){const F=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(F,e,0,P),a.xrDepthRenderbuffer=F,k.push(c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,F),t.framebufferRenderbuffer(t.FRAMEBUFFER,U,t.RENDERBUFFER,F)}else if(e.depthTexture!==null){k.push(c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);const F=this.get(e.depthTexture);if(F.renderTarget=e.renderTarget,F.cacheKey=L,s.multiview)C.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,U,F.textureGPU,0,o,0,2);else if(x&&P)w.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,U,t.TEXTURE_2D,F.textureGPU,0,o);else if(e.depthTexture.isArrayTexture){const z=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,U,F.textureGPU,0,z)}else t.framebufferTexture2D(t.FRAMEBUFFER,U,t.TEXTURE_2D,F.textureGPU,0)}a.depthInvalidationArray=k}else{if(this._isRenderCameraDepthArray(e)){n.bindFramebuffer(t.FRAMEBUFFER,D);const k=this.renderer._activeCubeFace,U=this.get(e.depthTexture),F=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,F,U.textureGPU,0,k)}if(A||P||s.multiview){n.bindFramebuffer(t.FRAMEBUFFER,D);const k=this.get(e.textures[0]);s.multiview?C.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,k.textureGPU,0,o,0,2):P?w.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,k.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,k.textureGPU,0);const U=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s.autoAllocateDepthBuffer===!0){const F=a.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,F),t.framebufferRenderbuffer(t.FRAMEBUFFER,U,t.RENDERBUFFER,F)}else{const F=this.get(e.depthTexture);s.multiview?C.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,U,F.textureGPU,0,o,0,2):P?w.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,U,t.TEXTURE_2D,F.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,U,t.TEXTURE_2D,F.textureGPU,0)}}}if(o>0&&P===!1&&!s.multiview){if(_===void 0){const B=[];_=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,_);const k=[],U=e.textures;for(let F=0;F<U.length;F++){if(k[F]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,k[F]),B.push(t.COLOR_ATTACHMENT0+F),l){const W=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;B.push(W)}const z=e.textures[F],V=this.get(z);t.renderbufferStorageMultisample(t.RENDERBUFFER,o,V.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+F,t.RENDERBUFFER,k[F])}if(a.msaaFrameBuffer=_,a.msaaRenderbuffers=k,S===void 0){S=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(S,e,o),a.depthRenderbuffer=S;const F=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;B.push(F)}a.invalidationArray=B}r=a.msaaFrameBuffer}else r=D}n.bindFramebuffer(t.FRAMEBUFFER,r)}_getVaoKey(e){let t="";for(let n=0;n<e.length;n++){const r=this.get(e[n]);t+=":"+r.id}return t}_createVao(e){const{gl:t}=this,n=t.createVertexArray();let r="",s=!0;t.bindVertexArray(n);for(let a=0;a<e.length;a++){const o=e[a],l=this.get(o);r+=":"+l.id,t.bindBuffer(t.ARRAY_BUFFER,l.bufferGPU),t.enableVertexAttribArray(a),(o.isStorageBufferAttribute||o.isStorageInstancedBufferAttribute)&&(s=!1);let c,u;o.isInterleavedBufferAttribute===!0?(c=o.data.stride*l.bytesPerElement,u=o.offset*l.bytesPerElement):(c=0,u=0),l.isInteger?t.vertexAttribIPointer(a,o.itemSize,l.type,c,u):t.vertexAttribPointer(a,o.itemSize,l.type,o.normalized,c,u),o.isInstancedBufferAttribute&&!o.isInterleavedBufferAttribute?t.vertexAttribDivisor(a,o.meshPerAttribute):o.isInterleavedBufferAttribute&&o.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(a,o.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),this.vaoCache[r]=n,{vaoGPU:n,staticVao:s}}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:r}=this;n=r.createTransformFeedback(),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const a=e[s];r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const r of e)for(const s of r.bindings){const o=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,l,o)}else if(s.isSampledTexture){const l=n.getUniformLocation(t,s.name);n.uniform1i(l,o)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const r of e)for(const s of r.bindings){const a=this.get(s),o=a.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,o,a.bufferGPU):s.isSampledTexture&&n.bindTexture(a.glTextureType,a.textureGPU,t.TEXTURE0+o)}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const q0={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},fa={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Xa={Store:"store"},qi={Load:"load",Clear:"clear"},sC={CCW:"ccw"},aC={None:"none",Front:"front",Back:"back"},zg={Uint16:"uint16",Uint32:"uint32"},Ce={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},oC={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},pp={Linear:"linear",Nearest:"nearest"},ri={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},ep={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},tB={None:0,All:15},Ff={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},lC={Storage:"storage",ReadOnlyStorage:"read-only-storage"},cC={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},nB={NonFiltering:"non-filtering",Comparison:"comparison"},tp={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},iB={TwoD:"2d",ThreeD:"3d"},ta={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},Hye={All:"all"},J2={Vertex:"vertex",Instance:"instance"},PR={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class qye extends yP{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}class Wye extends qye{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class jye extends dW{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let Xye=0;class Yye extends jye{constructor(e,t){super("StorageBuffer_"+Xye++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Ia.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class $ye extends vd{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:pp.Linear}),this.flipYSampler=e.createSampler({minFilter:pp.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:r})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:q0.TriangleStrip,stripIndexFormat:zg.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:q0.TriangleStrip,stripIndexFormat:zg.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const r=t.format,{width:s,height:a}=t.size,o=this.getTransferPipeline(r),l=this.getFlipYPipeline(r),c=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:r,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:ta.TwoD,baseArrayLayer:n}),h=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:ta.TwoD,baseArrayLayer:0}),d=this.device.createCommandEncoder({}),A=(x,_,S)=>{const w=x.getBindGroupLayout(0),C=this.device.createBindGroup({layout:w,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:_}]}),P=d.beginRenderPass({colorAttachments:[{view:S,loadOp:qi.Clear,storeOp:Xa.Store,clearValue:[0,0,0,0]}]});P.setPipeline(x),P.setBindGroup(0,C),P.draw(4,1,0,0),P.end()};A(o,u,h),A(l,h,u),this.device.queue.submit([d.finish()]),c.destroy()}generateMipmaps(e,t,n=0){const r=this.get(e);r.useCount===void 0&&(r.useCount=0,r.layers=[]);const s=r.layers[n]||this._mipmapCreateBundles(e,t,n),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,s),this.device.queue.submit([a.finish()]),r.useCount!==0&&(r.layers[n]=s),r.useCount++}_mipmapCreateBundles(e,t,n){const r=this.getTransferPipeline(t.format),s=r.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:ta.TwoD,baseArrayLayer:n});const o=[];for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:ta.TwoD,baseArrayLayer:n}),h={colorAttachments:[{view:u,loadOp:qi.Clear,storeOp:Xa.Store,clearValue:[0,0,0,0]}]},d=this.device.createRenderBundleEncoder({colorFormats:[t.format]});d.setPipeline(r),d.setBindGroup(0,c),d.draw(4,1,0,0),o.push({renderBundles:[d.finish()],passDescriptor:h}),a=u}return o}_mipmapRunBundles(e,t){const n=t.length;for(let r=0;r<n;r++){const s=t[r],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const Qye={[f6]:"never",[DS]:"less",[d6]:"equal",[kS]:"less-equal",[p6]:"greater",[g6]:"greater-equal",[m6]:"always",[A6]:"not-equal"},Zye=[0,1,3,2,4,5];class Kye{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new sl,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,r=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===pp.Linear&&s.minFilter===pp.Linear&&s.mipmapFilter===pp.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=Qye[e.compareFunction]),r.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=NR(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:a,depth:o,levels:l}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const c=this._getDimension(e),u=e.internalFormat||t.format||NR(e,n.device);r.format=u;const{samples:h,primarySamples:d,isMSAA:A}=n.utils.getTextureSampleData(e);let x=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(x|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(x|=GPUTextureUsage.RENDER_ATTACHMENT);const _={label:e.name,size:{width:s,height:a,depthOrArrayLayers:o},mipLevelCount:l,sampleCount:d,dimension:c,format:u,usage:x};if(e.isVideoTexture){const S=e.source.data,w=new VideoFrame(S);_.size.width=w.displayWidth,_.size.height=w.displayHeight,w.close(),r.externalTexture=S}else{if(u===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}e.isCubeTexture&&(_.textureBindingViewDimension=ta.Cube),r.texture=n.device.createTexture(_)}if(A){const S=Object.assign({},_);S.label=S.label+"-msaa",S.sampleCount=h,r.msaaTexture=n.device.createTexture(S)}r.initialized=!0,r.textureDescriptorGPU=_}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let r=0;r<n;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:r,height:s}=n.getDrawingBufferSize(),a=this.depthTexture,o=n.get(a).texture;let l,c;if(t?(l=il,c=tl):e&&(l=nl,c=br),o!==void 0){if(a.image.width===r&&a.image.height===s&&a.format===l&&a.type===c)return o;this.destroyTexture(a)}return a.name="depthBuffer",a.format=l,a.type=c,a.image.width=r,a.image.height=s,this.createTexture(a,{width:r,height:s}),n.get(a).texture}updateTexture(e,t){const n=this.backend.get(e),{textureDescriptorGPU:r}=n;if(!(e.isRenderTargetTexture||r===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,n.texture,r,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,n.texture,r,e.flipY,e.premultiplyAlpha);else if(e.isVideoTexture){const s=e.source.data;n.externalTexture=s}else this._copyImageToTexture(t.image,n.texture,r,0,e.flipY,e.premultiplyAlpha);n.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,n,r,s,a){const o=this.backend.device,l=this.backend.get(e),c=l.texture,u=l.textureDescriptorGPU.format,h=this._getBytesPerTexel(u);let d=r*h;d=Math.ceil(d/256)*256;const A=o.createBuffer({size:r*s*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),x=o.createCommandEncoder();x.copyTextureToBuffer({texture:c,origin:{x:t,y:n,z:a}},{buffer:A,bytesPerRow:d},{width:r,height:s});const _=this._getTypedArrayType(u);o.queue.submit([x.finish()]),await A.mapAsync(GPUMapMode.READ);const S=A.getMappedRange();return new _(S)}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Ts;n.minFilter=Er,n.magFilter=Er,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Kx;n.minFilter=Er,n.magFilter=Er,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const t={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),t)}return e}_copyCubeMapToTexture(e,t,n,r,s){for(let a=0;a<6;a++){const o=e[a],l=r===!0?Zye[a]:a;o.isDataTexture?this._copyBufferToTexture(o.image,t,n,l,r):this._copyImageToTexture(o,t,n,l,r,s)}}_copyImageToTexture(e,t,n,r,s,a){this.backend.device.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:0,origin:{x:0,y:0,z:r},premultipliedAlpha:a},{width:e.width,height:e.height,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new $ye(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,r,s,a=0){const o=this.backend.device,l=e.data,c=this._getBytesPerTexel(n.format),u=e.width*c;o.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},l,{offset:e.width*e.height*c*a,bytesPerRow:u},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_copyCompressedBufferToTexture(e,t,n){const r=this.backend.device,s=this._getBlockData(n.format),a=n.size.depthOrArrayLayers>1;for(let o=0;o<e.length;o++){const l=e[o],c=l.width,u=l.height,h=a?n.size.depthOrArrayLayers:1,d=Math.ceil(c/s.width)*s.byteLength,A=d*Math.ceil(u/s.height);for(let x=0;x<h;x++)r.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:x}},l.data,{offset:x*A,bytesPerRow:d,rowsPerImage:Math.ceil(u/s.height)},{width:Math.ceil(c/s.width)*s.width,height:Math.ceil(u/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===Ce.BC1RGBAUnorm||e===Ce.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===Ce.BC2RGBAUnorm||e===Ce.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Ce.BC3RGBAUnorm||e===Ce.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Ce.BC4RUnorm||e===Ce.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===Ce.BC5RGUnorm||e===Ce.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===Ce.BC6HRGBUFloat||e===Ce.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===Ce.BC7RGBAUnorm||e===Ce.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Ce.ETC2RGB8Unorm||e===Ce.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Ce.ETC2RGB8A1Unorm||e===Ce.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Ce.ETC2RGBA8Unorm||e===Ce.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Ce.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===Ce.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===Ce.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===Ce.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===Ce.ASTC4x4Unorm||e===Ce.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Ce.ASTC5x4Unorm||e===Ce.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===Ce.ASTC5x5Unorm||e===Ce.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===Ce.ASTC6x5Unorm||e===Ce.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===Ce.ASTC6x6Unorm||e===Ce.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===Ce.ASTC8x5Unorm||e===Ce.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===Ce.ASTC8x6Unorm||e===Ce.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===Ce.ASTC8x8Unorm||e===Ce.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===Ce.ASTC10x5Unorm||e===Ce.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===Ce.ASTC10x6Unorm||e===Ce.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===Ce.ASTC10x8Unorm||e===Ce.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===Ce.ASTC10x10Unorm||e===Ce.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===Ce.ASTC12x10Unorm||e===Ce.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===Ce.ASTC12x12Unorm||e===Ce.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=oC.ClampToEdge;return e===Vp?t=oC.Repeat:e===Hp&&(t=oC.MirrorRepeat),t}_convertFilterMode(e){let t=pp.Linear;return(e===Er||e===c6||e===_h)&&(t=pp.Nearest),t}_getBytesPerTexel(e){if(e===Ce.R8Unorm||e===Ce.R8Snorm||e===Ce.R8Uint||e===Ce.R8Sint)return 1;if(e===Ce.R16Uint||e===Ce.R16Sint||e===Ce.R16Float||e===Ce.RG8Unorm||e===Ce.RG8Snorm||e===Ce.RG8Uint||e===Ce.RG8Sint)return 2;if(e===Ce.R32Uint||e===Ce.R32Sint||e===Ce.R32Float||e===Ce.RG16Uint||e===Ce.RG16Sint||e===Ce.RG16Float||e===Ce.RGBA8Unorm||e===Ce.RGBA8UnormSRGB||e===Ce.RGBA8Snorm||e===Ce.RGBA8Uint||e===Ce.RGBA8Sint||e===Ce.BGRA8Unorm||e===Ce.BGRA8UnormSRGB||e===Ce.RGB9E5UFloat||e===Ce.RGB10A2Unorm||e===Ce.RG11B10UFloat||e===Ce.Depth32Float||e===Ce.Depth24Plus||e===Ce.Depth24PlusStencil8||e===Ce.Depth32FloatStencil8)return 4;if(e===Ce.RG32Uint||e===Ce.RG32Sint||e===Ce.RG32Float||e===Ce.RGBA16Uint||e===Ce.RGBA16Sint||e===Ce.RGBA16Float)return 8;if(e===Ce.RGBA32Uint||e===Ce.RGBA32Sint||e===Ce.RGBA32Float)return 16}_getTypedArrayType(e){if(e===Ce.R8Uint)return Uint8Array;if(e===Ce.R8Sint)return Int8Array;if(e===Ce.R8Unorm)return Uint8Array;if(e===Ce.R8Snorm)return Int8Array;if(e===Ce.RG8Uint)return Uint8Array;if(e===Ce.RG8Sint)return Int8Array;if(e===Ce.RG8Unorm)return Uint8Array;if(e===Ce.RG8Snorm)return Int8Array;if(e===Ce.RGBA8Uint)return Uint8Array;if(e===Ce.RGBA8Sint)return Int8Array;if(e===Ce.RGBA8Unorm)return Uint8Array;if(e===Ce.RGBA8Snorm)return Int8Array;if(e===Ce.R16Uint)return Uint16Array;if(e===Ce.R16Sint)return Int16Array;if(e===Ce.RG16Uint)return Uint16Array;if(e===Ce.RG16Sint)return Int16Array;if(e===Ce.RGBA16Uint)return Uint16Array;if(e===Ce.RGBA16Sint)return Int16Array;if(e===Ce.R16Float||e===Ce.RG16Float||e===Ce.RGBA16Float)return Uint16Array;if(e===Ce.R32Uint)return Uint32Array;if(e===Ce.R32Sint)return Int32Array;if(e===Ce.R32Float)return Float32Array;if(e===Ce.RG32Uint)return Uint32Array;if(e===Ce.RG32Sint)return Int32Array;if(e===Ce.RG32Float)return Float32Array;if(e===Ce.RGBA32Uint)return Uint32Array;if(e===Ce.RGBA32Sint)return Int32Array;if(e===Ce.RGBA32Float)return Float32Array;if(e===Ce.BGRA8Unorm||e===Ce.BGRA8UnormSRGB)return Uint8Array;if(e===Ce.RGB10A2Unorm||e===Ce.RGB9E5UFloat||e===Ce.RG11B10UFloat)return Uint32Array;if(e===Ce.Depth32Float)return Float32Array;if(e===Ce.Depth24Plus||e===Ce.Depth24PlusStencil8)return Uint32Array;if(e===Ce.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=iB.ThreeD:t=iB.TwoD,t}}function NR(i,e=null){const t=i.format,n=i.type,r=i.colorSpace,s=qn.getTransfer(r);let a;if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case Jf:a=s===rn?Ce.BC1RGBAUnormSRGB:Ce.BC1RGBAUnorm;break;case ed:a=s===rn?Ce.BC2RGBAUnormSRGB:Ce.BC2RGBAUnorm;break;case td:a=s===rn?Ce.BC3RGBAUnormSRGB:Ce.BC3RGBAUnorm;break;case ug:a=s===rn?Ce.ETC2RGB8UnormSRGB:Ce.ETC2RGB8Unorm;break;case hg:a=s===rn?Ce.ETC2RGBA8UnormSRGB:Ce.ETC2RGBA8Unorm;break;case fg:a=s===rn?Ce.ASTC4x4UnormSRGB:Ce.ASTC4x4Unorm;break;case dg:a=s===rn?Ce.ASTC5x4UnormSRGB:Ce.ASTC5x4Unorm;break;case pg:a=s===rn?Ce.ASTC5x5UnormSRGB:Ce.ASTC5x5Unorm;break;case Ag:a=s===rn?Ce.ASTC6x5UnormSRGB:Ce.ASTC6x5Unorm;break;case gg:a=s===rn?Ce.ASTC6x6UnormSRGB:Ce.ASTC6x6Unorm;break;case mg:a=s===rn?Ce.ASTC8x5UnormSRGB:Ce.ASTC8x5Unorm;break;case vg:a=s===rn?Ce.ASTC8x6UnormSRGB:Ce.ASTC8x6Unorm;break;case yg:a=s===rn?Ce.ASTC8x8UnormSRGB:Ce.ASTC8x8Unorm;break;case xg:a=s===rn?Ce.ASTC10x5UnormSRGB:Ce.ASTC10x5Unorm;break;case bg:a=s===rn?Ce.ASTC10x6UnormSRGB:Ce.ASTC10x6Unorm;break;case _g:a=s===rn?Ce.ASTC10x8UnormSRGB:Ce.ASTC10x8Unorm;break;case wg:a=s===rn?Ce.ASTC10x10UnormSRGB:Ce.ASTC10x10Unorm;break;case Sg:a=s===rn?Ce.ASTC12x10UnormSRGB:Ce.ASTC12x10Unorm;break;case Tg:a=s===rn?Ce.ASTC12x12UnormSRGB:Ce.ASTC12x12Unorm;break;case ss:a=s===rn?Ce.RGBA8UnormSRGB:Ce.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case ss:switch(n){case Cp:a=Ce.RGBA8Snorm;break;case Rp:a=Ce.RGBA16Sint;break;case bc:a=Ce.RGBA16Uint;break;case br:a=Ce.RGBA32Uint;break;case na:a=Ce.RGBA32Sint;break;case $r:a=s===rn?Ce.RGBA8UnormSRGB:Ce.RGBA8Unorm;break;case Ss:a=Ce.RGBA16Float;break;case ps:a=Ce.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case Yx:switch(n){case LS:a=Ce.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case $x:switch(n){case Cp:a=Ce.R8Snorm;break;case Rp:a=Ce.R16Sint;break;case bc:a=Ce.R16Uint;break;case br:a=Ce.R32Uint;break;case na:a=Ce.R32Sint;break;case $r:a=Ce.R8Unorm;break;case Ss:a=Ce.R16Float;break;case ps:a=Ce.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case wh:switch(n){case Cp:a=Ce.RG8Snorm;break;case Rp:a=Ce.RG16Sint;break;case bc:a=Ce.RG16Uint;break;case br:a=Ce.RG32Uint;break;case na:a=Ce.RG32Sint;break;case $r:a=Ce.RG8Unorm;break;case Ss:a=Ce.RG16Float;break;case ps:a=Ce.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case nl:switch(n){case bc:a=Ce.Depth16Unorm;break;case br:a=Ce.Depth24Plus;break;case ps:a=Ce.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case il:switch(n){case tl:a=Ce.Depth24PlusStencil8;break;case ps:e&&e.features.has(PR.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),a=Ce.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case im:switch(n){case na:a=Ce.R32Sint;break;case br:a=Ce.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case rm:switch(n){case na:a=Ce.RG32Sint;break;case br:a=Ce.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case sm:switch(n){case na:a=Ce.RGBA32Sint;break;case br:a=Ce.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return a}const Jye=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,exe=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,rB={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},txe=i=>{i=i.trim();const e=i.match(Jye);if(e!==null&&e.length===4){const t=e[2],n=[];let r=null;for(;(r=exe.exec(t))!==null;)n.push({name:r[1],type:r[2]});const s=[];for(let u=0;u<n.length;u++){const{name:h,type:d}=n[u];let A=d;A.startsWith("ptr")?A="pointer":(A.startsWith("texture")&&(A=d.split("<")[0]),A=rB[A]),s.push(new gP(A,h))}const a=i.substring(e[0].length),o=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:rB[o]||o,inputs:s,name:l,inputsCode:t,blockCode:a,outputType:o}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class nxe extends vP{constructor(e){const{type:t,inputs:n,name:r,inputsCode:s,blockCode:a,outputType:o}=txe(e);super(t,n,r),this.inputsCode=s,this.blockCode=a,this.outputType=o}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class ixe extends hW{parseFunction(e){return new nxe(e)}}const w0=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},rxe={[Ia.READ_ONLY]:"read",[Ia.WRITE_ONLY]:"write",[Ia.READ_WRITE]:"read_write"},sB={[Vp]:"repeat",[lu]:"clamp",[Hp]:"mirror"},e_={vertex:w0?w0.VERTEX:1,fragment:w0?w0.FRAGMENT:2,compute:w0?w0.COMPUTE:4},aB={instance:!0,swizzleAssign:!1,storageBuffer:!0},sxe={"^^":"tsl_xor"},axe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},oB={},kl={tsl_xor:new xs("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new xs("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new xs("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new xs("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new xs("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new xs("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new xs("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new xs("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new xs("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new xs("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new xs("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new xs("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new xs(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},yy={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(kl.pow_float=new xs("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),kl.pow_vec2=new xs("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[kl.pow_float]),kl.pow_vec3=new xs("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[kl.pow_float]),kl.pow_vec4=new xs("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[kl.pow_float]),yy.pow_float="tsl_pow_float",yy.pow_vec2="tsl_pow_vec2",yy.pow_vec3="tsl_pow_vec3",yy.pow_vec4="tsl_pow_vec4");let bW="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(bW+=`diagnostic( off, derivative_uniformity );
`);class oxe extends uW{constructor(e,t){super(e,t,new ixe),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Za}_generateTextureSample(e,t,n,r,s=this.shaderStage){return s==="fragment"?r?`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this._generateTextureSampleLevel(e,t,n,"0",r)}_generateVideoSample(e,t,n=this.shaderStage){if(n==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${n} shader.`)}_generateTextureSampleLevel(e,t,n,r,s){return this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,s,r)}generateWrapFunction(e){const t=`tsl_coord_${sB[e.wrapS]}S_${sB[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=oB[t];if(n===void 0){const r=[],s=e.isData3DTexture?"vec3f":"vec2f";let a=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const o=(l,c)=>{l===Vp?(r.push(kl.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${c} )`):l===lu?(r.push(kl.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${c} )`):l===Hp?(r.push(kl.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${c} )`):(a+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};o(e.wrapS,"x"),a+=`,
`,o(e.wrapT,"y"),e.isData3DTexture&&(a+=`,
`,o(e.wrapR,"z")),a+=`
	);

}
`,oB[t]=n=new xs(a,r)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const r=this.getDataFromNode(e,this.shaderStage,this.globalCache);r.dimensionsSnippet===void 0&&(r.dimensionsSnippet={});let s=r.dimensionsSnippet[n];if(r.dimensionsSnippet[n]===void 0){let a,o;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),c=l>1;e.isData3DTexture?o="vec3<u32>":o="vec2<u32>",c||e.isVideoTexture||e.isStorageTexture?a=t:a=`${t}${n?`, u32( ${n} )`:""}`,s=new z_(new G_(`textureDimensions( ${a} )`,o)),r.dimensionsSnippet[n]=s,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(r.arrayLayerCount=new z_(new G_(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(r.cubeFaceCount=new z_(new G_("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,n,r="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),a=this.generateTextureDimension(e,t,r);return`tsl_biquadraticTexture( ${t}, ${s}( ${n} ), ${a}, u32( ${r} ) )`}generateTextureLod(e,t,n,r,s="0u"){const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,s),l=e.isData3DTexture?"vec3":"vec2",c=`${l}<u32>( ${a}( ${n} ) * ${l}<f32>( ${o} ) )`;return this.generateTextureLoad(e,t,c,r,s)}generateTextureLoad(e,t,n,r,s="0u"){let a;return e.isVideoTexture===!0?a=`textureLoad( ${t}, ${n} )`:r?a=`textureLoad( ${t}, ${n}, ${r}, u32( ${s} ) )`:(a=`textureLoad( ${t}, ${n}, u32( ${s} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(a+=".x")),a}generateTextureStore(e,t,n,r,s){let a;return r?a=`textureStore( ${t}, ${n}, ${r}, ${s} )`:a=`textureStore( ${t}, ${n}, ${s} )`,a}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===ps||this.isSampleCompare(e)===!1&&e.minFilter===Er&&e.magFilter===Er||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,r,s=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(t,n,s):this.isUnfilterable(e)?a=this.generateTextureLod(e,t,n,r,"0",s):a=this._generateTextureSample(e,t,n,r,s),a}generateTextureGrad(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${a} shader.`)}generateTextureCompare(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${r} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}generateTextureLevel(e,t,n,r,s,a=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(t,n,a):o=this._generateTextureSampleLevel(e,t,n,r,s),o}generateTextureBias(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${a} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,r=e.type;return r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"?n:r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=sxe[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?Ia.READ_ONLY:e.access}getStorageAccess(e,t){return rxe[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),a=this.getDataFromNode(e,n,this.globalCache);if(a.uniformGPU===void 0){let o;const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let h=null;const d=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?h=new vT(s.name,s.node,l,d):t==="cubeTexture"?h=new mW(s.name,s.node,l,d):t==="texture3D"&&(h=new vW(s.name,s.node,l,d)),h.store=e.isStorageTextureNode===!0,h.setVisibility(e_[n]),this.isUnfilterable(e.value)===!1&&h.store===!1){const A=new Wye(`${s.name}_sampler`,s.node,l);A.setVisibility(e_[n]),u.push(A,h),o=[A,h]}else u.push(h),o=[h]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const h=t==="buffer"?AW:Yye,d=new h(e,l);d.setVisibility(e_[n]),u.push(d),o=d,s.name=r||"NodeBuffer_"+s.id}else{const h=this.uniformGroups[n]||(this.uniformGroups[n]={});let d=h[c];d===void 0&&(d=new gW(c,l),d.setVisibility(e_[n]),h[c]=d,u.push(d)),o=this.getNodeUniform(s,t),d.addUniform(o)}a.uniformGPU=o}return s}getBuiltin(e,t,n,r=this.shaderStage){const s=this.builtins[r]||(this.builtins[r]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const a of t.inputs)r.push(a.name+" : "+this.getType(a.type));let s=`fn ${t.name}( ${r.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const r of n)t.push(`enable ${r};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:r,property:s,type:a}of n.values())t.push(`@builtin( ${r} ) ${s} : ${a}`);return t.join(`,
	`)}getScopedArray(e,t,n,r){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:r,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const o=this.getType(s);t.push(`var<${r}> ${n}: array< ${o}, ${a} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const r=this.getAttributesArray();for(let s=0,a=r.length;s<a;s++){const o=r[s],l=o.name,c=this.getType(o.type);t.push(`@location( ${s} ) ${l} : ${c}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const r=e.output?"@location( "+n.index+" ) ":"";let s=this.getType(n.type);n.atomic&&(s="atomic< "+s+" >"),t.push(`	${r+n.name} : ${s}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const r=[];for(const s of n){let a=`struct ${s.name} {
`;a+=this.getStructMembers(s),a+=`
};`,r.push(a)}t=`
`+r.join(`

`)+`
`}return t}getVar(e,t,n=null){let r=`var ${t} : `;return n!==null?r+=this.generateArrayDeclaration(e,n):r+=this.getType(e),r}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`	${this.getVar(r.type,r.name,r.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let o=0;o<s.length;o++){const l=s[o];if(l.needsInterpolation){let c=`@location( ${o} )`;if(l.interpolationType){const u=l.interpolationSampling!==null?`, ${l.interpolationSampling} )`:" )";c+=` @interpolate( ${l.interpolationType}${u}`}else/^(int|uint|ivec|uvec)/.test(l.type)&&(c+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${c} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&a.includes(l)===!1&&a.push(l)}}const n=this.getBuiltins(e);n&&t.push(n);const r=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+r):r}isCustomStruct(e){const t=e.value,n=e.node,r=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&n.structTypeNode!==null,s=n.value&&n.value.array&&typeof n.value.itemSize=="number"&&n.value.array.length>n.value.itemSize;return r&&!s}getUniforms(e){const t=this.uniforms[e],n=[],r=[],s=[],a={};for(const l of t){const c=l.groupNode.name,u=this.bindingsIndexes[c];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const h=l.node.value;this.isUnfilterable(h)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(h)?n.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler_comparison;`):n.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler;`));let d,A="";const{primarySamples:x}=this.renderer.backend.utils.getTextureSampleData(h);if(x>1&&(A="_multisampled"),h.isCubeTexture===!0)d="texture_cube<f32>";else if(h.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&h.compareFunction===null?d=`texture${A}_2d<f32>`:d=`texture_depth${A}_2d${h.isArrayTexture===!0?"_array":""}`;else if(h.isArrayTexture===!0||h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0)d="texture_2d_array<f32>";else if(h.isVideoTexture===!0)d="texture_external";else if(h.isData3DTexture===!0)d="texture_3d<f32>";else if(l.node.isStorageTextureNode===!0){const _=NR(h),S=this.getStorageAccess(l.node,e);d=`texture_storage_2d<${_}, ${S}>`}else{const _=this.getComponentTypeFromTexture(h).charAt(0);d=`texture${A}_2d<${_}32>`}n.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name} : ${d};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const h=l.node,d=this.getType(h.getNodeType(this)),A=h.bufferCount,x=A>0&&l.type==="buffer"?", "+A:"",_=h.isStorageBufferNode?`storage, ${this.getStorageAccess(h,e)}`:"uniform";if(this.isCustomStruct(l))r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var<${_}> ${l.name} : ${d};`);else{const w=`	value : array< ${h.isAtomic?`atomic<${d}>`:`${d}`}${x} >`;r.push(this._getWGSLStructBinding(l.name,w,_,u.binding++,u.group))}}else{const h=this.getType(this.getVectorType(l.type)),d=l.groupNode.name;(a[d]||(a[d]={index:u.binding++,id:u.group,snippets:[]})).snippets.push(`	${l.name} : ${h}`)}}for(const l in a){const c=a[l];s.push(this._getWGSLStructBinding(l,c.snippets.join(`,
`),"uniform",c.index,c.id))}let o=n.join(`
`);return o+=r.join(`
`),o+=s.join(`
`),o}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let r=`// code

`;r+=this.flowCode[t];const s=this.flowNodes[t],a=s[s.length-1],o=a.outputNode,l=o!==void 0&&o.isOutputStructNode===!0;for(const c of s){const u=this.getFlowData(c),h=c.name;if(h&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${h}
`),r+=`${u.code}
	`,c===a&&t!=="compute"){if(r+=`// result

	`,t==="vertex")r+=`varyings.Vertex = ${u.result};`;else if(t==="fragment")if(l)n.returnType=o.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",r+=`return ${u.result};`;else{let d="	@location(0) color: vec4<f32>";const A=this.getBuiltins("output");A&&(d+=`,
	`+A),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",d),n.structs+=`
var<private> output : OutputStruct;`,r+=`output.color = ${u.result};

	return output;`}}}n.flow=r}this.shaderStage=null,this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getType(e){return axe[e]||e}isAvailable(e){let t=aB[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),aB[e]=t),t}_getWGSLMethod(e){return kl[e]!==void 0&&this._include(e),yy[e]}_include(e){const t=kl[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${bW}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x + globalId.y * numWorkgroups.x * u32(${t}) + globalId.z * numWorkgroups.x * numWorkgroups.y * u32(${t});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,r=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,t)}
@binding( ${r} ) @group( ${s} )
var<${n}> ${e} : ${a};`}}class lxe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=Ce.Depth24PlusStencil8:e.depth&&(t=Ce.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,a=s.getRenderTarget();t=a?a.samples:s.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return q0.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return q0.LineList;if(e.isLine)return q0.LineStrip;if(e.isMesh)return q0.TriangleList}getSampleCount(e){let t=1;return e>1&&(t=Math.pow(2,Math.floor(Math.log2(e))),t===2&&(t=4)),t}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===$r)return Ce.BGRA8Unorm;if(e===Ss)return Ce.RGBA16Float;throw new Error("Unsupported outputType")}}const cxe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),uxe=new Map([[HF,["float16"]]]),hxe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class fxe{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),r=this.backend,s=r.get(n);let a=s.buffer;if(a===void 0){const o=r.device;let l=n.array;if(e.normalized===!1){if(l.constructor===Int16Array||l.constructor===Int8Array)l=new Int32Array(l);else if((l.constructor===Uint16Array||l.constructor===Uint8Array)&&(l=new Uint32Array(l),t&GPUBufferUsage.INDEX))for(let h=0;h<l.length;h++)l[h]===65535&&(l[h]=4294967295)}if(n.array=l,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){l=new l.constructor(n.count*4);for(let h=0;h<n.count;h++)l.set(n.array.subarray(h*3,h*3+3),h*4);n.itemSize=4,n.array=l,s._force3to4BytesAlignment=!0}const c=l.byteLength,u=c+(4-c%4)%4;a=o.createBuffer({label:n.name,size:u,usage:t,mappedAtCreation:!0}),new l.constructor(a.getMappedRange()).set(l),a.unmap(),s.buffer=a}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,r=n.device,s=n.get(t),a=n.get(t).buffer;let o=t.array;if(s._force3to4BytesAlignment===!0){o=new o.constructor(t.count*4);for(let u=0;u<t.count;u++)o.set(t.array.subarray(u*3,u*3+3),u*4);t.array=o}const l=this._isTypedArray(o),c=t.updateRanges;if(c.length===0)r.queue.writeBuffer(a,0,o,0);else{const u=l?1:o.BYTES_PER_ELEMENT;for(let h=0,d=c.length;h<d;h++){const A=c[h];let x,_;if(s._force3to4BytesAlignment===!0){const w=Math.floor(A.start/3),C=Math.ceil(A.count/3);x=w*4*u,_=C*4*u}else x=A.start*u,_=A.count*u;const S=x*(l?o.BYTES_PER_ELEMENT:1);r.queue.writeBuffer(a,S,o,x,_)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let r=0;r<t.length;r++){const s=t[r],a=s.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(s);let l=n.get(o);if(l===void 0){let h,d;s.isInterleavedBufferAttribute===!0?(h=s.data.stride*a,d=s.data.isInstancedInterleavedBuffer?J2.Instance:J2.Vertex):(h=s.itemSize*a,d=s.isInstancedBufferAttribute?J2.Instance:J2.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(h=4),l={arrayStride:h,attributes:[],stepMode:d},n.set(o,l)}const c=this._getVertexFormat(s),u=s.isInterleavedBufferAttribute===!0?s.offset*a:0;l.attributes.push({shaderLocation:r,offset:u,format:c})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,a=s.size,o=n.createBuffer({label:`${e.name}_readback`,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=n.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(s,0,o,0,a);const c=l.finish();n.queue.submit([c]),await o.mapAsync(GPUMapMode.READ);const u=o.getMappedRange(),h=new e.array.constructor(u.slice(0));return o.unmap(),h.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,r=e.array.constructor,s=e.constructor;let a;if(t===1)a=hxe.get(r);else{const l=(uxe.get(s)||cxe.get(r))[n?1:0];if(l){const c=r.BYTES_PER_ELEMENT*t,h=Math.floor((c+3)/4)*4/r.BYTES_PER_ELEMENT;if(h%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${l}x${h}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class dxe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,r=[];let s=0;for(const a of e.bindings){const o={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const l={};a.isStorageBuffer&&(a.visibility&4&&(a.access===Ia.READ_WRITE||a.access===Ia.WRITE_ONLY)?l.type=lC.Storage:l.type=lC.ReadOnlyStorage),o.buffer=l}else if(a.isSampler){const l={};a.texture.isDepthTexture&&(a.texture.compareFunction!==null?l.type=nB.Comparison:t.compatibilityMode&&(l.type=nB.NonFiltering)),o.sampler=l}else if(a.isSampledTexture&&a.texture.isVideoTexture)o.externalTexture={};else if(a.isSampledTexture&&a.store){const l={};l.format=this.backend.get(a.texture).texture.format;const c=a.access;c===Ia.READ_WRITE?l.access=cC.ReadWrite:c===Ia.WRITE_ONLY?l.access=cC.WriteOnly:l.access=cC.ReadOnly,o.storageTexture=l}else if(a.isSampledTexture){const l={},{primarySamples:c}=t.utils.getTextureSampleData(a.texture);if(c>1&&(l.multisampled=!0,a.texture.isDepthTexture||(l.sampleType=tp.UnfilterableFloat)),a.texture.isDepthTexture)t.compatibilityMode&&a.texture.compareFunction===null?l.sampleType=tp.UnfilterableFloat:l.sampleType=tp.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const u=a.texture.type;u===na?l.sampleType=tp.SInt:u===br?l.sampleType=tp.UInt:u===ps&&(this.backend.hasFeature("float32-filterable")?l.sampleType=tp.Float:l.sampleType=tp.UnfilterableFloat)}a.isSampledCubeTexture?l.viewDimension=ta.Cube:a.texture.isArrayTexture||a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?l.viewDimension=ta.TwoDArray:a.isSampledTexture3D&&(l.viewDimension=ta.ThreeD),o.texture=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);r.push(o)}return n.createBindGroupLayout({entries:r})}createBindings(e,t,n,r=0){const{backend:s,bindGroupLayoutCache:a}=this,o=s.get(e);let l=a.get(e.bindingsReference);l===void 0&&(l=this.createBindingsLayout(e),a.set(e.bindingsReference,l));let c;n>0&&(o.groups===void 0&&(o.groups=[],o.versions=[]),o.versions[n]===r&&(c=o.groups[n])),c===void 0&&(c=this.createBindGroup(e,l),n>0&&(o.groups[n]=c,o.versions[n]=r)),o.group=c,o.layout=l}updateBinding(e){const t=this.backend,n=t.device,r=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,r,0)}createBindGroupIndex(e,t){const r=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a=e[0],o=r.createBuffer({label:"bindingCameraIndex_"+a,size:16,usage:s});r.queue.writeBuffer(o,0,e,0);const l=[{binding:0,resource:{buffer:o}}];return r.createBindGroup({label:"bindGroupCameraIndex_"+a,layout:t,entries:l})}createBindGroup(e,t){const n=this.backend,r=n.device;let s=0;const a=[];for(const o of e.bindings){if(o.isUniformBuffer){const l=n.get(o);if(l.buffer===void 0){const c=o.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,h=r.createBuffer({label:"bindingBuffer_"+o.name,size:c,usage:u});l.buffer=h}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isStorageBuffer){const l=n.get(o);if(l.buffer===void 0){const c=o.attribute;l.buffer=n.get(c).buffer}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isSampler){const l=n.get(o.texture);a.push({binding:s,resource:l.sampler})}else if(o.isSampledTexture){const l=n.get(o.texture);let c;if(l.externalTexture!==void 0)c=r.importExternalTexture({source:l.externalTexture});else{const u=o.store?1:l.texture.mipLevelCount,h=`view-${l.texture.width}-${l.texture.height}-${u}`;if(c=l[h],c===void 0){const d=Hye.All;let A;o.isSampledCubeTexture?A=ta.Cube:o.isSampledTexture3D?A=ta.ThreeD:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?A=ta.TwoDArray:A=ta.TwoD,c=l[h]=l.texture.createView({aspect:d,dimension:A,mipLevelCount:u})}}a.push({binding:s,resource:c})}s++}return r.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:a})}}class pxe{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:r,geometry:s,pipeline:a}=e,{vertexProgram:o,fragmentProgram:l}=a,c=this.backend,u=c.device,h=c.utils,d=c.get(a),A=[];for(const X of e.getBindings()){const J=c.get(X);A.push(J.layout)}const x=c.attributeUtils.createShaderVertexBuffers(e);let _;r.blending!==To&&(r.blending!==to||r.transparent!==!1)&&(_=this._getBlending(r));let S={};r.stencilWrite===!0&&(S={compare:this._getStencilCompare(r),failOp:this._getStencilOperation(r.stencilFail),depthFailOp:this._getStencilOperation(r.stencilZFail),passOp:this._getStencilOperation(r.stencilZPass)});const w=this._getColorWriteMask(r),C=[];if(e.context.textures!==null){const X=e.context.textures;for(let J=0;J<X.length;J++){const K=h.getTextureFormatGPU(X[J]);C.push({format:K,blend:_,writeMask:w})}}else{const X=h.getCurrentColorFormat(e.context);C.push({format:X,blend:_,writeMask:w})}const P=c.get(o).module,L=c.get(l).module,D=this._getPrimitiveState(n,s,r),B=this._getDepthCompare(r),k=h.getCurrentDepthStencilFormat(e.context),U=this._getSampleCount(e.context),F={label:`renderPipeline_${r.name||r.type}_${r.id}`,vertex:Object.assign({},P,{buffers:x}),fragment:Object.assign({},L,{targets:C}),primitive:D,multisample:{count:U,alphaToCoverageEnabled:r.alphaToCoverage&&U>1},layout:u.createPipelineLayout({bindGroupLayouts:A})},z={},V=e.context.depth,W=e.context.stencil;if((V===!0||W===!0)&&(V===!0&&(z.format=k,z.depthWriteEnabled=r.depthWrite,z.depthCompare=B),W===!0&&(z.stencilFront=S,z.stencilBack={},z.stencilReadMask=r.stencilFuncMask,z.stencilWriteMask=r.stencilWriteMask),r.polygonOffset===!0&&(z.depthBias=r.polygonOffsetUnits,z.depthBiasSlopeScale=r.polygonOffsetFactor,z.depthBiasClamp=0),F.depthStencil=z),t===null)d.pipeline=u.createRenderPipeline(F);else{const X=new Promise(J=>{u.createRenderPipelineAsync(F).then(K=>{d.pipeline=K,J()})});t.push(X)}}createBundleEncoder(e,t="renderBundleEncoder"){const n=this.backend,{utils:r,device:s}=n,a=r.getCurrentDepthStencilFormat(e),o=r.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:t,colorFormats:[o],depthStencilFormat:a,sampleCount:l};return s.createRenderBundleEncoder(c)}createComputePipeline(e,t){const n=this.backend,r=n.device,s=n.get(e.computeProgram).module,a=n.get(e),o=[];for(const l of t){const c=n.get(l);o.push(c.layout)}a.pipeline=r.createComputePipeline({compute:s,layout:r.createPipelineLayout({bindGroupLayouts:o})})}_getBlending(e){let t,n;const r=e.blending,s=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(r===Y0){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,c=e.blendDstAlpha!==null?e.blendDstAlpha:a,u=e.blendEquationAlpha!==null?e.blendEquationAlpha:o;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},n={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(u)}}else{const l=e.premultipliedAlpha,c=(u,h,d,A)=>{t={srcFactor:u,dstFactor:h,operation:ep.Add},n={srcFactor:d,dstFactor:A,operation:ep.Add}};if(l)switch(r){case to:c(ri.One,ri.OneMinusSrcAlpha,ri.One,ri.OneMinusSrcAlpha);break;case sg:c(ri.One,ri.One,ri.One,ri.One);break;case ag:c(ri.Zero,ri.OneMinusSrc,ri.Zero,ri.One);break;case og:c(ri.Zero,ri.Src,ri.Zero,ri.SrcAlpha);break}else switch(r){case to:c(ri.SrcAlpha,ri.OneMinusSrcAlpha,ri.One,ri.OneMinusSrcAlpha);break;case sg:c(ri.SrcAlpha,ri.One,ri.SrcAlpha,ri.One);break;case ag:c(ri.Zero,ri.OneMinusSrc,ri.Zero,ri.One);break;case og:c(ri.Zero,ri.Src,ri.Zero,ri.Src);break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}_getBlendFactor(e){let t;switch(e){case Ah:t=ri.Zero;break;case e6:t=ri.One;break;case t6:t=ri.Src;break;case n6:t=ri.OneMinusSrc;break;case Gy:t=ri.SrcAlpha;break;case Vy:t=ri.OneMinusSrcAlpha;break;case s6:t=ri.Dst;break;case a6:t=ri.OneMinusDst;break;case i6:t=ri.DstAlpha;break;case r6:t=ri.OneMinusDstAlpha;break;case o6:t=ri.SrcAlphaSaturated;break;case gAe:t=ri.Constant;break;case mAe:t=ri.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case UZ:t=fa.Never;break;case y4:t=fa.Always;break;case zZ:t=fa.Less;break;case VZ:t=fa.LessEqual;break;case GZ:t=fa.Equal;break;case WZ:t=fa.GreaterEqual;break;case HZ:t=fa.Greater;break;case qZ:t=fa.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case rp:t=Ff.Keep;break;case LZ:t=Ff.Zero;break;case DZ:t=Ff.Replace;break;case FZ:t=Ff.Invert;break;case kZ:t=Ff.IncrementClamp;break;case OZ:t=Ff.DecrementClamp;break;case IZ:t=Ff.IncrementWrap;break;case BZ:t=Ff.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case ka:t=ep.Add;break;case K5:t=ep.Subtract;break;case J5:t=ep.ReverseSubtract;break;case PF:t=ep.Min;break;case NF:t=ep.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const r={},s=this.backend.utils;switch(r.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?zg.Uint16:zg.Uint32),n.side){case So:r.frontFace=sC.CCW,r.cullMode=aC.Back;break;case sr:r.frontFace=sC.CCW,r.cullMode=aC.Front;break;case ws:r.frontFace=sC.CCW,r.cullMode=aC.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",n.side);break}return r}_getColorWriteMask(e){return e.colorWrite===!0?tB.All:tB.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=fa.Always;else{const n=e.depthFunc;switch(n){case Hy:t=fa.Never;break;case qy:t=fa.Always;break;case Wy:t=fa.Less;break;case ld:t=fa.LessEqual;break;case jy:t=fa.Equal;break;case Xy:t=fa.GreaterEqual;break;case Yy:t=fa.Greater;break;case $y:t=fa.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class Axe extends xW{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const r=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return rl(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e.id,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const r=this.device.createCommandEncoder();r.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),r.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const s=r.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const a=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let o=0;for(const[,l]of e){const c=a[l],u=a[l+1],h=Number(u-c)/1e6;o+=h}return this.resultBuffer.unmap(),this.lastValue=o,o}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class gxe extends yW{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new lxe(this),this.attributeUtils=new fxe(this),this.bindingUtils=new dxe(this),this.pipelineUtils=new pxe(this),this.textureUtils=new Kye(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const a={powerPreference:t.powerPreference,featureLevel:t.compatibilityMode?"compatibility":void 0},o=typeof navigator<"u"?await navigator.gpu.requestAdapter(a):null;if(o===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const l=Object.values(PR),c=[];for(const h of l)o.features.has(h)&&c.push(h);const u={requiredFeatures:c,requiredLimits:t.requiredLimits};n=await o.requestDevice(u)}else n=t.device;n.lost.then(a=>{const o={api:"WebGPU",message:a.message||"Unknown reason",reason:a.reason||null,originalEvent:a};e.onDeviceLost(o)});const r=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=r;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(PR.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return bu}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const r=e.colorAttachments[0];this.renderer.samples>0?r.view=this.colorBuffer.createView():r.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,r=this.get(n);let s=r.descriptors;if(s===void 0||r.width!==n.width||r.height!==n.height||r.dimensions!==n.dimensions||r.activeMipmapLevel!==e.activeMipmapLevel||r.activeCubeFace!==e.activeCubeFace||r.samples!==n.samples){s={},r.descriptors=s;const c=()=>{n.removeEventListener("dispose",c),this.delete(n)};n.hasEventListener("dispose",c)===!1&&n.addEventListener("dispose",c)}const a=e.getCacheKey();let o=s[a];if(o===void 0){const c=e.textures,u=[];let h;const d=this._isRenderCameraDepthArray(e);for(let A=0;A<c.length;A++){const x=this.get(c[A]),_={label:`colorAttachment_${A}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:ta.TwoD};if(n.isRenderTarget3D)h=e.activeCubeFace,_.baseArrayLayer=0,_.dimension=ta.ThreeD,_.depthOrArrayLayers=c[A].image.depth;else if(n.isRenderTarget&&c[A].image.depth>1)if(d===!0){const S=e.camera.cameras;for(let w=0;w<S.length;w++){const C={..._,baseArrayLayer:w,arrayLayerCount:1,dimension:ta.TwoD},P=x.texture.createView(C);u.push({view:P,resolveTarget:void 0,depthSlice:void 0})}}else _.dimension=ta.TwoDArray,_.depthOrArrayLayers=c[A].image.depth;if(d!==!0){const S=x.texture.createView(_);let w,C;x.msaaTexture!==void 0?(w=x.msaaTexture.createView(),C=S):(w=S,C=void 0),u.push({view:w,resolveTarget:C,depthSlice:h})}}if(o={textureViews:u},e.depth){const A=this.get(e.depthTexture),x={};e.depthTexture.isArrayTexture&&(x.dimension=ta.TwoD,x.arrayLayerCount=1,x.baseArrayLayer=e.activeCubeFace),o.depthStencilView=A.texture.createView(x)}s[a]=o,r.width=n.width,r.height=n.height,r.samples=n.samples,r.activeMipmapLevel=e.activeMipmapLevel,r.activeCubeFace=e.activeCubeFace,r.dimensions=n.dimensions}const l={colorAttachments:[]};for(let c=0;c<o.textureViews.length;c++){const u=o.textureViews[c];let h={r:0,g:0,b:0,a:1};c===0&&t.clearValue&&(h=t.clearValue),l.colorAttachments.push({view:u.view,depthSlice:u.depthSlice,resolveTarget:u.resolveTarget,loadOp:t.loadOp||qi.Load,storeOp:t.storeOp||Xa.Store,clearValue:h})}return o.depthStencilView&&(l.depthStencilAttachment={view:o.depthStencilView}),l}beginRender(e){const t=this.get(e),n=this.device,r=e.occlusionQueryCount;let s;r>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:r,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(r),t.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e,{loadOp:qi.Load}),this.initTimestampQuery(e,a),a.occlusionQuerySet=s;const o=a.depthStencilAttachment;if(e.textures!==null){const c=a.colorAttachments;for(let u=0;u<c.length;u++){const h=c[u];e.clearColor?(h.clearValue=u===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=qi.Clear):h.loadOp=qi.Load,h.storeOp=Xa.Store}}else{const c=a.colorAttachments[0];e.clearColor?(c.clearValue=e.clearColorValue,c.loadOp=qi.Clear):c.loadOp=qi.Load,c.storeOp=Xa.Store}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=qi.Clear):o.depthLoadOp=qi.Load,o.depthStoreOp=Xa.Store),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=qi.Clear):o.stencilLoadOp=qi.Load,o.stencilStoreOp=Xa.Store);const l=n.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const c=e.camera.cameras;!t.layerDescriptors||t.layerDescriptors.length!==c.length?this._createDepthLayerDescriptors(e,t,a,c):this._updateDepthLayerDescriptors(e,t,c),t.bundleEncoders=[],t.bundleSets=[];for(let u=0;u<c.length;u++){const h=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+u),d={attributes:{},bindingGroups:[],pipeline:null,index:null};t.bundleEncoders.push(h),t.bundleSets.push(d)}t.currentPass=null}else{const c=l.beginRenderPass(a);if(t.currentPass=c,e.viewport&&this.updateViewport(e),e.scissor){const{x:u,y:h,width:d,height:A}=e.scissorValue;c.setScissorRect(u,h,d,A)}}t.descriptor=a,t.encoder=l,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[]}_createDepthLayerDescriptors(e,t,n,r){const s=n.depthStencilAttachment;t.layerDescriptors=[];const a=this.get(e.depthTexture);a.viewCache||(a.viewCache=[]);for(let o=0;o<r.length;o++){const l={...n,colorAttachments:[{...n.colorAttachments[0],view:n.colorAttachments[o].view}]};if(n.depthStencilAttachment){const c=o;a.viewCache[c]||(a.viewCache[c]=a.texture.createView({dimension:ta.TwoD,baseArrayLayer:o,arrayLayerCount:1})),l.depthStencilAttachment={view:a.viewCache[c],depthLoadOp:s.depthLoadOp||qi.Clear,depthStoreOp:s.depthStoreOp||Xa.Store,depthClearValue:s.depthClearValue||1},e.stencil&&(l.depthStencilAttachment.stencilLoadOp=s.stencilLoadOp,l.depthStencilAttachment.stencilStoreOp=s.stencilStoreOp,l.depthStencilAttachment.stencilClearValue=s.stencilClearValue)}else l.depthStencilAttachment={...s};t.layerDescriptors.push(l)}}_updateDepthLayerDescriptors(e,t,n){for(let r=0;r<n.length;r++){const s=t.layerDescriptors[r];if(s.depthStencilAttachment){const a=s.depthStencilAttachment;e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=qi.Clear):a.depthLoadOp=qi.Load),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=qi.Clear):a.stencilLoadOp=qi.Load)}}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();const r=t.encoder;if(this._isRenderCameraDepthArray(e)===!0){const s=[];for(let a=0;a<t.bundleEncoders.length;a++){const o=t.bundleEncoders[a];s.push(o.finish())}for(let a=0;a<t.layerDescriptors.length;a++)if(a<s.length){const o=t.layerDescriptors[a],l=r.beginRenderPass(o);if(e.viewport){const{x:c,y:u,width:h,height:d,minDepth:A,maxDepth:x}=e.viewportValue;l.setViewport(c,u,h,d,A,x)}if(e.scissor){const{x:c,y:u,width:h,height:d}=e.scissorValue;l.setScissorRect(c,u,h,d)}l.executeBundles([s[a]]),l.end()}}else t.currentPass&&t.currentPass.end();if(n>0){const s=n*8;let a=this.occludedResolveCache.get(s);a===void 0&&(a=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,a));const o=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,a,0),t.encoder.copyBufferToBuffer(a,0,o,0,s),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const s=e.textures;for(let a=0;a<s.length;a++){const o=s[a];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const a=n.getMappedRange(),o=new BigUint64Array(a);for(let l=0;l<r.length;l++)o[l]===BigInt(0)&&s.add(r[l]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:r,width:s,height:a,minDepth:o,maxDepth:l}=e.viewportValue;t.setViewport(n,r,s,a,o,l)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,n,r=null){const s=this.device,a=this.renderer;let o=[],l,c,u,h;if(e){const x=this.getClearColor();c={r:x.r,g:x.g,b:x.b,a:x.a}}if(r===null){u=a.depth,h=a.stencil;const x=this._getDefaultRenderPassDescriptor();if(e){o=x.colorAttachments;const _=o[0];_.clearValue=c,_.loadOp=qi.Clear,_.storeOp=Xa.Store}(u||h)&&(l=x.depthStencilAttachment)}else{u=r.depth,h=r.stencil;const x={loadOp:e?qi.Clear:qi.Load,clearValue:e?c:void 0};u&&(x.depthLoadOp=t?qi.Clear:qi.Load,x.depthClearValue=t?a.getClearDepth():void 0,x.depthStoreOp=Xa.Store),h&&(x.stencilLoadOp=n?qi.Clear:qi.Load,x.stencilClearValue=n?a.getClearStencil():void 0,x.stencilStoreOp=Xa.Store);const _=this._getRenderPassDescriptor(r,x);o=_.colorAttachments,l=_.depthStencilAttachment}u&&l&&l.depthLoadOp===void 0&&(t?(l.depthLoadOp=qi.Clear,l.depthClearValue=a.getClearDepth(),l.depthStoreOp=Xa.Store):(l.depthLoadOp=qi.Load,l.depthStoreOp=Xa.Store)),h&&l&&l.stencilLoadOp===void 0&&(n?(l.stencilLoadOp=qi.Clear,l.stencilClearValue=a.getClearStencil(),l.stencilStoreOp=Xa.Store):(l.stencilLoadOp=qi.Load,l.stencilStoreOp=Xa.Store));const d=s.createCommandEncoder({label:"clear"});d.beginRenderPass({colorAttachments:o,depthStencilAttachment:l}).end(),s.queue.submit([d.finish()])}beginCompute(e){const t=this.get(e),n={label:"computeGroup_"+e.id};this.initTimestampQuery(e,n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,r){const{passEncoderGPU:s}=this.get(e),a=this.get(r).pipeline;this.pipelineUtils.setPipeline(s,a);for(let u=0,h=n.length;u<h;u++){const d=n[u],A=this.get(d);s.setBindGroup(u,A.group)}const o=this.device.limits.maxComputeWorkgroupsPerDimension,l=this.get(t);l.dispatchSize===void 0&&(l.dispatchSize={x:0,y:1,z:1});const{dispatchSize:c}=l;t.dispatchCount>o?(c.x=Math.min(t.dispatchCount,o),c.y=Math.ceil(t.dispatchCount/o)):c.x=t.dispatchCount,s.dispatchWorkgroups(c.x,c.y,c.z)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,material:r,context:s,pipeline:a}=e,o=e.getBindings(),l=this.get(s),c=this.get(a).pipeline,u=e.getIndex(),h=u!==null,d=e.getDrawParameters();if(d===null)return;const A=(_,S)=>{this.pipelineUtils.setPipeline(_,c),S.pipeline=c;const w=S.bindingGroups;for(let P=0,L=o.length;P<L;P++){const D=o[P],B=this.get(D);w[D.index]!==D.id&&(_.setBindGroup(D.index,B.group),w[D.index]=D.id)}if(h===!0&&S.index!==u){const P=this.get(u).buffer,L=u.array instanceof Uint16Array?zg.Uint16:zg.Uint32;_.setIndexBuffer(P,L),S.index=u}const C=e.getVertexBuffers();for(let P=0,L=C.length;P<L;P++){const D=C[P];if(S.attributes[P]!==D){const B=this.get(D).buffer;_.setVertexBuffer(P,B),S.attributes[P]=D}}s.stencil===!0&&r.stencilWrite===!0&&l.currentStencilRef!==r.stencilRef&&(_.setStencilReference(r.stencilRef),l.currentStencilRef=r.stencilRef)},x=(_,S)=>{if(A(_,S),n.isBatchedMesh===!0){const w=n._multiDrawStarts,C=n._multiDrawCounts,P=n._multiDrawCount,L=n._multiDrawInstances;L!==null&&rl("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let D=0;D<P;D++){const B=L?L[D]:1,k=B>1?0:D;h===!0?_.drawIndexed(C[D],B,w[D]/u.array.BYTES_PER_ELEMENT,0,k):_.draw(C[D],B,w[D],k),t.update(n,C[D],B)}}else if(h===!0){const{vertexCount:w,instanceCount:C,firstVertex:P}=d,L=e.getIndirect();if(L!==null){const D=this.get(L).buffer;_.drawIndexedIndirect(D,0)}else _.drawIndexed(w,C,P,0,0);t.update(n,w,C)}else{const{vertexCount:w,instanceCount:C,firstVertex:P}=d,L=e.getIndirect();if(L!==null){const D=this.get(L).buffer;_.drawIndirect(D,0)}else _.draw(w,C,P,0);t.update(n,w,C)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const _=this.get(e.camera),S=e.camera.cameras,w=e.getBindingGroup("cameraIndex");if(_.indexesGPU===void 0||_.indexesGPU.length!==S.length){const P=this.get(w),L=[],D=new Uint32Array([0,0,0,0]);for(let B=0,k=S.length;B<k;B++){D[0]=B;const U=this.bindingUtils.createBindGroupIndex(D,P.layout);L.push(U)}_.indexesGPU=L}const C=this.renderer.getPixelRatio();for(let P=0,L=S.length;P<L;P++){const D=S[P];if(n.layers.test(D.layers)){const B=D.viewport;let k=l.currentPass,U=l.currentSets;if(l.bundleEncoders){const F=l.bundleEncoders[P],z=l.bundleSets[P];k=F,U=z}B&&k.setViewport(Math.floor(B.x*C),Math.floor(B.y*C),Math.floor(B.width*C),Math.floor(B.height*C),s.viewportValue.minDepth,s.viewportValue.maxDepth),w&&_.indexesGPU&&(k.setBindGroup(w.index,_.indexesGPU[P]),U.bindingGroups[w.index]=w.id),x(k,U)}}}else if(l.currentPass){if(l.occlusionQuerySet!==void 0){const _=l.lastOcclusionObject;_!==n&&(_!==null&&_.occlusionTest===!0&&(l.currentPass.endOcclusionQuery(),l.occlusionQueryIndex++),n.occlusionTest===!0&&(l.currentPass.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=n),l.lastOcclusionObject=n)}x(l.currentPass,l.currentSets)}}needsRenderUpdate(e){const t=this.get(e),{object:n,material:r}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),o=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),u=s.getPrimitiveTopology(n,r);let h=!1;return(t.material!==r||t.materialVersion!==r.version||t.transparent!==r.transparent||t.blending!==r.blending||t.premultipliedAlpha!==r.premultipliedAlpha||t.blendSrc!==r.blendSrc||t.blendDst!==r.blendDst||t.blendEquation!==r.blendEquation||t.blendSrcAlpha!==r.blendSrcAlpha||t.blendDstAlpha!==r.blendDstAlpha||t.blendEquationAlpha!==r.blendEquationAlpha||t.colorWrite!==r.colorWrite||t.depthWrite!==r.depthWrite||t.depthTest!==r.depthTest||t.depthFunc!==r.depthFunc||t.stencilWrite!==r.stencilWrite||t.stencilFunc!==r.stencilFunc||t.stencilFail!==r.stencilFail||t.stencilZFail!==r.stencilZFail||t.stencilZPass!==r.stencilZPass||t.stencilFuncMask!==r.stencilFuncMask||t.stencilWriteMask!==r.stencilWriteMask||t.side!==r.side||t.alphaToCoverage!==r.alphaToCoverage||t.sampleCount!==a||t.colorSpace!==o||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==u||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=a,t.colorSpace=o,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=u,t.clippingContextCacheKey=e.clippingContextCacheKey,h=!0),h}getRenderCacheKey(e){const{object:t,material:n}=e,r=this.utils,s=e.context;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,r.getSampleCountRenderContext(s),r.getCurrentColorSpace(s),r.getCurrentColorFormat(s),r.getCurrentDepthStencilFormat(s),r.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,a)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const n=e.isComputeNode?"compute":"render";this.timestampQueryPool[n]||(this.timestampQueryPool[n]=new Axe(this.device,n,2048));const r=this.timestampQueryPool[n],s=r.allocateQueriesForContext(e);t.timestampWrites={querySet:r.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new oxe(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){let o=0,l=0,c=0,u=0,h=0,d=0,A=e.image.width,x=e.image.height,_=1;n!==null&&(n.isBox3===!0?(u=n.min.x,h=n.min.y,d=n.min.z,A=n.max.x-n.min.x,x=n.max.y-n.min.y,_=n.max.z-n.min.z):(u=n.min.x,h=n.min.y,A=n.max.x-n.min.x,x=n.max.y-n.min.y,_=1)),r!==null&&(o=r.x,l=r.y,c=r.z||0);const S=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),w=this.get(e).texture,C=this.get(t).texture;S.copyTextureToTexture({texture:w,mipLevel:s,origin:{x:u,y:h,z:d}},{texture:C,mipLevel:a,origin:{x:o,y:l,z:c}},[A,x,_]),this.device.queue.submit([S.finish()]),a===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,n){const r=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let o;if(r.currentPass?(r.currentPass.end(),o=r.encoder):o=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),o.copyTextureToTexture({texture:s,origin:[n.x,n.y,0]},{texture:a},[n.z,n.w]),r.currentPass){const{descriptor:l}=r;for(let c=0;c<l.colorAttachments.length;c++)l.colorAttachments[c].loadOp=qi.Load;if(t.depth&&(l.depthStencilAttachment.depthLoadOp=qi.Load),t.stencil&&(l.depthStencilAttachment.stencilLoadOp=qi.Load),r.currentPass=o.beginRenderPass(l),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:c,y:u,width:h,height:d}=t.scissorValue;r.currentPass.setScissorRect(c,u,h,d)}}else this.device.queue.submit([o.finish()]);e.generateMipmaps&&this.textureUtils.generateMipmaps(e)}}class mxe extends O6{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class vxe extends O6{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class yxe extends fW{constructor(){super(),this.addMaterial(hpe,"MeshPhongMaterial"),this.addMaterial(sq,"MeshStandardMaterial"),this.addMaterial(Qpe,"MeshPhysicalMaterial"),this.addMaterial(eAe,"MeshToonMaterial"),this.addMaterial(rpe,"MeshBasicMaterial"),this.addMaterial(cpe,"MeshLambertMaterial"),this.addMaterial(Kde,"MeshNormalMaterial"),this.addMaterial(iAe,"MeshMatcapMaterial"),this.addMaterial(Wde,"LineBasicMaterial"),this.addMaterial(Xde,"LineDashedMaterial"),this.addMaterial(oAe,"PointsMaterial"),this.addMaterial(oq,"SpriteMaterial"),this.addMaterial(uAe,"ShadowMaterial"),this.addLight(lme,RJ),this.addLight($ve,oU),this.addLight(Qve,NJ),this.addLight(mP,O6),this.addLight(eye,lU),this.addLight(tye,MJ),this.addLight(nye,DJ),this.addLight(Zve,mxe),this.addLight(Jve,vxe),this.addToneMapping(Cq,kF),this.addToneMapping(Rq,OF),this.addToneMapping(Pq,IF),this.addToneMapping(Nq,BF),this.addToneMapping(Lq,FF),this.addToneMapping(Dq,UF)}}class _W extends bye{constructor(e={}){let t;e.forceWebGL?t=eB:(t=gxe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new eB(e)));const n=new t(e);super(n,e),this.library=new yxe,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */$.BRDF_GGX;$.BRDF_Lambert;$.BasicShadowFilter;$.Break;$.Continue;$.DFGApprox;$.D_GGX;$.Discard;$.EPSILON;$.F_Schlick;const xxe=$.Fn;$.INFINITY;const bxe=$.If;$.Switch;const _xe=$.Loop;$.NodeShaderStage;$.NodeType;$.NodeUpdateType;$.NodeAccess;$.PCFShadowFilter;$.PCFSoftShadowFilter;$.PI;$.PI2;$.Return;$.Schlick_to_F0;$.ScriptableNodeResources;$.ShaderNode;$.TBNViewMatrix;$.VSMShadowFilter;$.V_GGX_SmithCorrelated;$.abs;$.acesFilmicToneMapping;$.acos;$.add;$.addNodeElement;$.agxToneMapping;$.all;$.alphaT;$.and;$.anisotropy;$.anisotropyB;$.anisotropyT;$.any;$.append;$.array;$.arrayBuffer;const wxe=$.asin;$.assign;$.atan;$.atan2;$.atomicAdd;$.atomicAnd;$.atomicFunc;$.atomicMax;$.atomicMin;$.atomicOr;$.atomicStore;$.atomicSub;$.atomicXor;$.atomicLoad;$.attenuationColor;$.attenuationDistance;$.attribute;$.attributeArray;$.backgroundBlurriness;$.backgroundIntensity;$.backgroundRotation;$.batch;$.billboarding;$.bitAnd;$.bitNot;$.bitOr;$.bitXor;$.bitangentGeometry;$.bitangentLocal;$.bitangentView;$.bitangentWorld;$.bitcast;$.blendBurn;$.blendColor;$.blendDodge;$.blendOverlay;$.blendScreen;$.blur;$.bool;$.buffer;$.bufferAttribute;$.bumpMap;$.burn;$.bvec2;$.bvec3;$.bvec4;$.bypass;$.cache;$.call;$.cameraFar;$.cameraIndex;$.cameraNear;$.cameraNormalMatrix;$.cameraPosition;$.cameraProjectionMatrix;$.cameraProjectionMatrixInverse;$.cameraViewMatrix;$.cameraWorldMatrix;$.cbrt;$.cdl;$.ceil;$.checker;$.cineonToneMapping;$.clamp;$.clearcoat;$.clearcoatRoughness;$.code;$.color;$.colorSpaceToWorking;$.colorToDirection;$.compute;$.computeSkinning;$.cond;$.Const;$.context;$.convert;$.convertColorSpace;$.convertToTexture;const Sxe=$.cos;$.cross;$.cubeTexture;$.dFdx;$.dFdy;$.dashSize;$.debug;$.decrement;$.decrementBefore;$.defaultBuildStages;$.defaultShaderStages;$.defined;$.degrees;$.deltaTime;$.densityFog;$.densityFogFactor;$.depth;$.depthPass;$.difference;$.diffuseColor;$.directPointLight;$.directionToColor;$.dispersion;$.distance;$.div;$.dodge;$.dot;$.drawIndex;$.dynamicBufferAttribute;$.element;$.emissive;$.equal;$.equals;$.equirectUV;const Txe=$.exp;$.exp2;$.expression;$.faceDirection;$.faceForward;$.faceforward;const Mxe=$.float;$.floor;$.fog;$.fract;$.frameGroup;$.frameId;$.frontFacing;$.fwidth;$.gain;$.gapSize;$.getConstNodeType;$.getCurrentStack;$.getDirection;$.getDistanceAttenuation;$.getGeometryRoughness;$.getNormalFromDepth;$.getParallaxCorrectNormal;$.getRoughness;$.getScreenPosition;$.getShIrradianceAt;$.getTextureIndex;$.getViewPosition;$.getShadowMaterial;$.getShadowRenderObjectFunction;$.glsl;$.glslFn;$.grayscale;$.greaterThan;$.greaterThanEqual;$.hash;$.highpModelNormalViewMatrix;$.highpModelViewMatrix;$.hue;$.increment;$.incrementBefore;$.instance;const Exe=$.instanceIndex;$.instancedArray;$.instancedBufferAttribute;$.instancedDynamicBufferAttribute;$.instancedMesh;$.int;$.inverseSqrt;$.inversesqrt;$.invocationLocalIndex;$.invocationSubgroupIndex;$.ior;$.iridescence;$.iridescenceIOR;$.iridescenceThickness;$.ivec2;$.ivec3;$.ivec4;$.js;$.label;$.length;$.lengthSq;$.lessThan;$.lessThanEqual;$.lightPosition;$.lightShadowMatrix;$.lightTargetDirection;$.lightTargetPosition;$.lightViewPosition;$.lightingContext;$.lights;$.linearDepth;$.linearToneMapping;$.localId;$.globalId;$.log;$.log2;$.logarithmicDepthToViewZ;$.loop;$.luminance;$.mediumpModelViewMatrix;$.mat2;$.mat3;$.mat4;$.matcapUV;$.materialAO;$.materialAlphaTest;$.materialAnisotropy;$.materialAnisotropyVector;$.materialAttenuationColor;$.materialAttenuationDistance;$.materialClearcoat;$.materialClearcoatNormal;$.materialClearcoatRoughness;$.materialColor;$.materialDispersion;$.materialEmissive;$.materialIOR;$.materialIridescence;$.materialIridescenceIOR;$.materialIridescenceThickness;$.materialLightMap;$.materialLineDashOffset;$.materialLineDashSize;$.materialLineGapSize;$.materialLineScale;$.materialLineWidth;$.materialMetalness;$.materialNormal;$.materialOpacity;$.materialPointSize;$.materialReference;$.materialReflectivity;$.materialRefractionRatio;$.materialRotation;$.materialRoughness;$.materialSheen;$.materialSheenRoughness;$.materialShininess;$.materialSpecular;$.materialSpecularColor;$.materialSpecularIntensity;$.materialSpecularStrength;$.materialThickness;$.materialTransmission;$.max;$.maxMipLevel;$.metalness;$.min;$.mix;$.mixElement;$.mod;$.modInt;$.modelDirection;$.modelNormalMatrix;$.modelPosition;$.modelRadius;$.modelScale;$.modelViewMatrix;$.modelViewPosition;$.modelViewProjection;$.modelWorldMatrix;$.modelWorldMatrixInverse;$.morphReference;$.mrt;$.mul;$.mx_aastep;$.mx_cell_noise_float;$.mx_contrast;$.mx_fractal_noise_float;$.mx_fractal_noise_vec2;$.mx_fractal_noise_vec3;$.mx_fractal_noise_vec4;$.mx_hsvtorgb;$.mx_noise_float;$.mx_noise_vec3;$.mx_noise_vec4;$.mx_ramplr;$.mx_ramptb;$.mx_rgbtohsv;$.mx_safepower;$.mx_splitlr;$.mx_splittb;$.mx_srgb_texture_to_lin_rec709;$.mx_transform_uv;$.mx_worley_noise_float;$.mx_worley_noise_vec2;$.mx_worley_noise_vec3;$.namespace;const Cxe=$.negate;$.neutralToneMapping;$.nodeArray;$.nodeImmutable;$.nodeObject;$.nodeObjects;$.nodeProxy;$.normalFlat;$.normalGeometry;$.normalLocal;$.normalMap;$.normalView;$.normalWorld;$.normalize;$.not;$.notEqual;$.numWorkgroups;$.objectDirection;$.objectGroup;$.objectPosition;$.objectRadius;$.objectScale;$.objectViewPosition;$.objectWorldMatrix;$.oneMinus;$.or;$.orthographicDepthToViewZ;$.oscSawtooth;$.oscSine;$.oscSquare;$.oscTriangle;$.output;$.outputStruct;$.overlay;$.overloadingFn;$.parabola;$.parallaxDirection;$.parallaxUV;$.parameter;$.pass;$.passTexture;$.pcurve;$.perspectiveDepthToViewZ;$.pmremTexture;$.pointUV;$.pointWidth;$.positionGeometry;$.positionLocal;$.positionPrevious;$.positionView;$.positionViewDirection;$.positionWorld;$.positionWorldDirection;$.posterize;$.pow;$.pow2;$.pow3;$.pow4;$.premult;$.property;$.radians;$.rand;$.range;$.rangeFog;$.rangeFogFactor;$.reciprocal;$.lightProjectionUV;$.reference;$.referenceBuffer;$.reflect;$.reflectVector;$.reflectView;$.reflector;$.refract;$.refractVector;$.refractView;$.reinhardToneMapping;$.remainder;$.remap;$.remapClamp;$.renderGroup;$.renderOutput;$.rendererReference;$.rotate;$.rotateUV;$.roughness;$.round;$.rtt;$.sRGBTransferEOTF;$.sRGBTransferOETF;$.sampler;$.samplerComparison;$.saturate;$.saturation;$.screen;$.screenCoordinate;$.screenSize;$.screenUV;$.scriptable;$.scriptableValue;$.select;$.setCurrentStack;$.shaderStages;$.shadow;$.pointShadow;$.shadowPositionWorld;$.sharedUniformGroup;$.shapeCircle;$.sheen;$.sheenRoughness;$.shiftLeft;$.shiftRight;$.shininess;$.sign;const Rxe=$.sin;$.sinc;$.skinning;$.smoothstep;$.smoothstepElement;$.specularColor;$.specularF90;$.spherizeUV;$.split;$.spritesheetUV;const Pxe=$.sqrt;$.stack;$.step;const Nxe=$.storage;$.storageBarrier;$.storageObject;$.storageTexture;$.string;$.struct;$.sub;$.subgroupIndex;$.subgroupSize;$.tan;$.tangentGeometry;$.tangentLocal;$.tangentView;$.tangentWorld;$.temp;$.texture;$.texture3D;$.textureBarrier;$.textureBicubic;$.textureCubeUV;$.textureLoad;$.textureSize;$.textureStore;$.thickness;$.time;$.timerDelta;$.timerGlobal;$.timerLocal;$.toneMapping;$.toneMappingExposure;$.toonOutlinePass;$.transformDirection;$.transformNormal;$.transformNormalToView;$.transformedBentNormalView;$.transformedBitangentView;$.transformedBitangentWorld;$.transformedClearcoatNormalView;$.transformedNormalView;$.transformedNormalWorld;$.transformedTangentView;$.transformedTangentWorld;$.transmission;$.transpose;$.triNoise3D;$.triplanarTexture;$.triplanarTextures;$.trunc;$.tslFn;$.uint;const Lxe=$.uniform;$.uniformCubeTexture;$.uniformArray;$.uniformGroup;$.uniformTexture;$.uniforms;$.unpremult;$.userData;$.uv;$.uvec2;$.uvec3;$.uvec4;$.Var;$.varying;$.varyingProperty;$.vec2;$.vec3;$.vec4;$.vectorComponents;$.velocity;$.vertexColor;$.vertexIndex;$.vibrance;$.viewZToLogarithmicDepth;$.viewZToOrthographicDepth;$.viewZToPerspectiveDepth;$.viewport;$.viewportBottomLeft;$.viewportCoordinate;$.viewportDepthTexture;$.viewportLinearDepth;$.viewportMipTexture;$.viewportResolution;$.viewportSafeUV;$.viewportSharedTexture;$.viewportSize;$.viewportTexture;$.viewportTopLeft;$.viewportUV;$.wgsl;$.wgslFn;$.workgroupArray;$.workgroupBarrier;$.workgroupId;$.workingToColorSpace;$.xor;const lB=new qh,t_=new pe;class wW extends kJ{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new ki(e,3)),this.setAttribute("uv",new ki(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new fw(t,6,1);return this.setAttribute("instanceStart",new cu(n,3,0)),this.setAttribute("instanceEnd",new cu(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new fw(t,6,1);return this.setAttribute("instanceColorStart",new cu(n,3,0)),this.setAttribute("instanceColorEnd",new cu(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new pJ(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qh);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),lB.setFromBufferAttribute(t),this.boundingBox.union(lB))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ad),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)t_.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(t_)),t_.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(t_));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}qt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new lt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};go.line={uniforms:OS.merge([qt.common,qt.fog,qt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class xP extends Eo{constructor(e){super({type:"LineMaterial",uniforms:OS.clone(go.line.uniforms),vertexShader:go.line.vertexShader,fragmentShader:go.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const uC=new Cn,cB=new pe,uB=new pe,da=new Cn,pa=new Cn,Jc=new Cn,hC=new pe,fC=new Un,ga=new IJ,hB=new pe,n_=new qh,i_=new Ad,eu=new Cn;let ou,Bp;function fB(i,e,t){return eu.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),eu.multiplyScalar(1/eu.w),eu.x=Bp/t.width,eu.y=Bp/t.height,eu.applyMatrix4(i.projectionMatrixInverse),eu.multiplyScalar(1/eu.w),Math.abs(Math.max(eu.x,eu.y))}function Dxe(i,e){const t=i.matrixWorld,n=i.geometry,r=n.attributes.instanceStart,s=n.attributes.instanceEnd,a=Math.min(n.instanceCount,r.count);for(let o=0,l=a;o<l;o++){ga.start.fromBufferAttribute(r,o),ga.end.fromBufferAttribute(s,o),ga.applyMatrix4(t);const c=new pe,u=new pe;ou.distanceSqToSegment(ga.start,ga.end,u,c),u.distanceTo(c)<Bp*.5&&e.push({point:u,pointOnLine:c,distance:ou.origin.distanceTo(u),object:i,face:null,faceIndex:o,uv:null,uv1:null})}}function kxe(i,e,t){const n=e.projectionMatrix,s=i.material.resolution,a=i.matrixWorld,o=i.geometry,l=o.attributes.instanceStart,c=o.attributes.instanceEnd,u=Math.min(o.instanceCount,l.count),h=-e.near;ou.at(1,Jc),Jc.w=1,Jc.applyMatrix4(e.matrixWorldInverse),Jc.applyMatrix4(n),Jc.multiplyScalar(1/Jc.w),Jc.x*=s.x/2,Jc.y*=s.y/2,Jc.z=0,hC.copy(Jc),fC.multiplyMatrices(e.matrixWorldInverse,a);for(let d=0,A=u;d<A;d++){if(da.fromBufferAttribute(l,d),pa.fromBufferAttribute(c,d),da.w=1,pa.w=1,da.applyMatrix4(fC),pa.applyMatrix4(fC),da.z>h&&pa.z>h)continue;if(da.z>h){const P=da.z-pa.z,L=(da.z-h)/P;da.lerp(pa,L)}else if(pa.z>h){const P=pa.z-da.z,L=(pa.z-h)/P;pa.lerp(da,L)}da.applyMatrix4(n),pa.applyMatrix4(n),da.multiplyScalar(1/da.w),pa.multiplyScalar(1/pa.w),da.x*=s.x/2,da.y*=s.y/2,pa.x*=s.x/2,pa.y*=s.y/2,ga.start.copy(da),ga.start.z=0,ga.end.copy(pa),ga.end.z=0;const _=ga.closestPointToPointParameter(hC,!0);ga.at(_,hB);const S=Eg.lerp(da.z,pa.z,_),w=S>=-1&&S<=1,C=hC.distanceTo(hB)<Bp*.5;if(w&&C){ga.start.fromBufferAttribute(l,d),ga.end.fromBufferAttribute(c,d),ga.start.applyMatrix4(a),ga.end.applyMatrix4(a);const P=new pe,L=new pe;ou.distanceSqToSegment(ga.start,ga.end,L,P),t.push({point:L,pointOnLine:P,distance:ou.origin.distanceTo(L),object:i,face:null,faceIndex:d,uv:null,uv1:null})}}}class Oxe extends zi{constructor(e=new wW,t=new xP({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,o=0,l=t.count;a<l;a++,o+=2)cB.fromBufferAttribute(t,a),uB.fromBufferAttribute(n,a),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+cB.distanceTo(uB);const s=new fw(r,2,1);return e.setAttribute("instanceDistanceStart",new cu(s,1,0)),e.setAttribute("instanceDistanceEnd",new cu(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ou=e.ray;const a=this.matrixWorld,o=this.geometry,l=this.material;Bp=l.linewidth+s,o.boundingSphere===null&&o.computeBoundingSphere(),i_.copy(o.boundingSphere).applyMatrix4(a);let c;if(n)c=Bp*.5;else{const h=Math.max(r.near,i_.distanceToPoint(ou.origin));c=fB(r,h,l.resolution)}if(i_.radius+=c,ou.intersectsSphere(i_)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),n_.copy(o.boundingBox).applyMatrix4(a);let u;if(n)u=Bp*.5;else{const h=Math.max(r.near,n_.distanceToPoint(ou.origin));u=fB(r,h,l.resolution)}n_.expandByScalar(u),ou.intersectsBox(n_)!==!1&&(n?Dxe(this,t):kxe(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(uC),this.material.uniforms.resolution.value.set(uC.z,uC.w))}}class SW extends wW{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let r=0;r<t;r++)n[6*r]=e[r].x,n[6*r+1]=e[r].y,n[6*r+2]=e[r].z||0,n[6*r+3]=e[r+1].x,n[6*r+4]=e[r+1].y,n[6*r+5]=e[r+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Ixe extends Oxe{constructor(e=new SW,t=new xP({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class dB extends P6{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const r=n.generateShapes(e,t.size);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class Bxe{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=Fxe(e,t,this.data);for(let s=0,a=r.length;s<a;s++)n.push(...r[s].toShapes());return n}}function Fxe(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,a=[];let o=0,l=0;for(let c=0;c<n.length;c++){const u=n[c];if(u===`
`)o=0,l-=s;else{const h=Uxe(u,r,o,l,t);o+=h.offsetX,a.push(h.path)}}return a}function Uxe(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const a=new BJ;let o,l,c,u,h,d,A,x;if(s.o){const _=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let S=0,w=_.length;S<w;)switch(_[S++]){case"m":o=_[S++]*e+t,l=_[S++]*e+n,a.moveTo(o,l);break;case"l":o=_[S++]*e+t,l=_[S++]*e+n,a.lineTo(o,l);break;case"q":c=_[S++]*e+t,u=_[S++]*e+n,h=_[S++]*e+t,d=_[S++]*e+n,a.quadraticCurveTo(h,d,c,u);break;case"b":c=_[S++]*e+t,u=_[S++]*e+n,h=_[S++]*e+t,d=_[S++]*e+n,A=_[S++]*e+t,x=_[S++]*e+n,a.bezierCurveTo(h,d,A,x,c,u);break}}return{offsetX:s.ha*e,path:a}}function LR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function zxe(i){if(Array.isArray(i))return i}function Gxe(i){if(Array.isArray(i))return LR(i)}function TW(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Vxe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function pB(i,e,t,n,r,s,a){try{var o=i[s](a),l=o.value}catch(c){return void t(c)}o.done?e(l):Promise.resolve(l).then(n,r)}function Hxe(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function a(l){pB(s,n,r,a,o,"next",l)}function o(l){pB(s,n,r,a,o,"throw",l)}a(void 0)})}}function yT(i,e,t){return e=Gg(e),Kxe(i,_P()?Reflect.construct(e,t||[],Gg(i).constructor):e.apply(i,t))}function qxe(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xT(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Jv(i,e){return i.get(TW(i,e))}function dC(i,e,t){qxe(i,e),e.set(i,t)}function pC(i,e,t){return i.set(TW(i,e),t),t}function bP(i,e,t){if(_P())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return r}function Wxe(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,MW(n.key),n)}}function bT(i,e,t){return e&&Wxe(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function ra(i,e,t){return(e=MW(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function DR(){return DR=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,t){var n=Jxe(i,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},DR.apply(null,arguments)}function Gg(i){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gg(i)}function _T(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&OR(i,e)}function _P(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_P=function(){return!!i})()}function jxe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Xxe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function Yxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AB(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ji(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AB(Object(t),!0).forEach(function(n){ra(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):AB(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Qxe(i,e){if(i==null)return{};var t,n,r=Zxe(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function Zxe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function Kxe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vxe(i)}function kR(){kR=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=typeof Symbol=="function"?Symbol:{},s=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function l(z,V,W,X){return Object.defineProperty(z,V,{value:W,enumerable:!X,configurable:!X,writable:!X})}try{l({},"")}catch{l=function(V,W,X){return V[W]=X}}function c(z,V,W,X){var J=V&&V.prototype instanceof d?V:d,K=Object.create(J.prototype);return l(K,"_invoke",function(Y,ee,se){var fe=1;return function(ne,he){if(fe===3)throw Error("Generator is already running");if(fe===4){if(ne==="throw")throw he;return{value:i,done:!0}}for(se.method=ne,se.arg=he;;){var Te=se.delegate;if(Te){var Pe=D(Te,se);if(Pe){if(Pe===h)continue;return Pe}}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(fe===1)throw fe=4,se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);fe=3;var _e=u(Y,ee,se);if(_e.type==="normal"){if(fe=se.done?4:2,_e.arg===h)continue;return{value:_e.arg,done:se.done}}_e.type==="throw"&&(fe=4,se.method="throw",se.arg=_e.arg)}}}(z,W,new U(X||[])),!0),K}function u(z,V,W){try{return{type:"normal",arg:z.call(V,W)}}catch(X){return{type:"throw",arg:X}}}e.wrap=c;var h={};function d(){}function A(){}function x(){}var _={};l(_,s,function(){return this});var S=Object.getPrototypeOf,w=S&&S(S(F([])));w&&w!==t&&n.call(w,s)&&(_=w);var C=x.prototype=d.prototype=Object.create(_);function P(z){["next","throw","return"].forEach(function(V){l(z,V,function(W){return this._invoke(V,W)})})}function L(z,V){function W(J,K,Y,ee){var se=u(z[J],z,K);if(se.type!=="throw"){var fe=se.arg,ne=fe.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?V.resolve(ne.__await).then(function(he){W("next",he,Y,ee)},function(he){W("throw",he,Y,ee)}):V.resolve(ne).then(function(he){fe.value=he,Y(fe)},function(he){return W("throw",he,Y,ee)})}ee(se.arg)}var X;l(this,"_invoke",function(J,K){function Y(){return new V(function(ee,se){W(J,K,ee,se)})}return X=X?X.then(Y,Y):Y()},!0)}function D(z,V){var W=V.method,X=z.i[W];if(X===i)return V.delegate=null,W==="throw"&&z.i.return&&(V.method="return",V.arg=i,D(z,V),V.method==="throw")||W!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+W+"' method")),h;var J=u(X,z.i,V.arg);if(J.type==="throw")return V.method="throw",V.arg=J.arg,V.delegate=null,h;var K=J.arg;return K?K.done?(V[z.r]=K.value,V.next=z.n,V.method!=="return"&&(V.method="next",V.arg=i),V.delegate=null,h):K:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,h)}function B(z){this.tryEntries.push(z)}function k(z){var V=z[4]||{};V.type="normal",V.arg=i,z[4]=V}function U(z){this.tryEntries=[[-1]],z.forEach(B,this),this.reset(!0)}function F(z){if(z!=null){var V=z[s];if(V)return V.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var W=-1,X=function J(){for(;++W<z.length;)if(n.call(z,W))return J.value=z[W],J.done=!1,J;return J.value=i,J.done=!0,J};return X.next=X}}throw new TypeError(typeof z+" is not iterable")}return A.prototype=x,l(C,"constructor",x),l(x,"constructor",A),A.displayName=l(x,o,"GeneratorFunction"),e.isGeneratorFunction=function(z){var V=typeof z=="function"&&z.constructor;return!!V&&(V===A||(V.displayName||V.name)==="GeneratorFunction")},e.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,x):(z.__proto__=x,l(z,o,"GeneratorFunction")),z.prototype=Object.create(C),z},e.awrap=function(z){return{__await:z}},P(L.prototype),l(L.prototype,a,function(){return this}),e.AsyncIterator=L,e.async=function(z,V,W,X,J){J===void 0&&(J=Promise);var K=new L(c(z,V,W,X),J);return e.isGeneratorFunction(V)?K:K.next().then(function(Y){return Y.done?Y.value:K.next()})},P(C),l(C,o,"Generator"),l(C,s,function(){return this}),l(C,"toString",function(){return"[object Generator]"}),e.keys=function(z){var V=Object(z),W=[];for(var X in V)W.unshift(X);return function J(){for(;W.length;)if((X=W.pop())in V)return J.value=X,J.done=!1,J;return J.done=!0,J}},e.values=F,U.prototype={constructor:U,reset:function(z){if(this.prev=this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(k),!z)for(var V in this)V.charAt(0)==="t"&&n.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=i)},stop:function(){this.done=!0;var z=this.tryEntries[0][4];if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var V=this;function W(fe){K.type="throw",K.arg=z,V.next=fe}for(var X=V.tryEntries.length-1;X>=0;--X){var J=this.tryEntries[X],K=J[4],Y=this.prev,ee=J[1],se=J[2];if(J[0]===-1)return W("end"),!1;if(!ee&&!se)throw Error("try statement without catch or finally");if(J[0]!=null&&J[0]<=Y){if(Y<ee)return this.method="next",this.arg=i,W(ee),!0;if(Y<se)return W(se),!1}}},abrupt:function(z,V){for(var W=this.tryEntries.length-1;W>=0;--W){var X=this.tryEntries[W];if(X[0]>-1&&X[0]<=this.prev&&this.prev<X[2]){var J=X;break}}J&&(z==="break"||z==="continue")&&J[0]<=V&&V<=J[2]&&(J=null);var K=J?J[4]:{};return K.type=z,K.arg=V,J?(this.method="next",this.next=J[2],h):this.complete(K)},complete:function(z,V){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&V&&(this.next=V),h},finish:function(z){for(var V=this.tryEntries.length-1;V>=0;--V){var W=this.tryEntries[V];if(W[2]===z)return this.complete(W[4],W[3]),k(W),h}},catch:function(z){for(var V=this.tryEntries.length-1;V>=0;--V){var W=this.tryEntries[V];if(W[0]===z){var X=W[4];if(X.type==="throw"){var J=X.arg;k(W)}return J}}throw Error("illegal catch attempt")},delegateYield:function(z,V,W){return this.delegate={i:F(z),r:V,n:W},this.method==="next"&&(this.arg=i),h}},e}function OR(i,e){return OR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},OR(i,e)}function Nr(i,e){return zxe(i)||Xxe(i,e)||EW(i,e)||Yxe()}function Jxe(i,e){for(;!{}.hasOwnProperty.call(i,e)&&(i=Gg(i))!==null;);return i}function AC(i,e,t,n){var r=DR(Gg(i.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function ar(i){return Gxe(i)||jxe(i)||EW(i)||$xe()}function e1e(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function MW(i){var e=e1e(i,"string");return typeof e=="symbol"?e:e+""}function EW(i,e){if(i){if(typeof i=="string")return LR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?LR(i,e):void 0}}var CW=function(e){e instanceof Array?e.forEach(CW):(e.map&&e.map.dispose(),e.dispose())},wP=function(e){e.geometry&&e.geometry.dispose(),e.material&&CW(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(wP)},pr=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),wP(t)}};function no(i,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(a,o){o[i][r](a)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var a=s[i],o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];var u=a[r].apply(a,l);return u===a?this:u}}}}var Cr=100;function gB(){return Cr}function Xl(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180,s=Cr*(1+t),a=Math.sin(n);return{x:s*a*Math.cos(r),y:s*Math.cos(n),z:s*a*Math.sin(r)}}function RW(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),a=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-a*180/Math.PI-(a<-Math.PI/2?360:0),altitude:r/Cr-1}}function Ap(i){return i*Math.PI/180}var Rx=window.THREE?window.THREE:{BackSide:sr,BufferAttribute:Vr,Color:un,Mesh:zi,ShaderMaterial:Eo},t1e=`
uniform float hollowRadius;

varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {    
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  
  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
  vCameraDistanceToObjCenter = length(objCenterViewPosition);
  
  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);
  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));
  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;

  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,n1e=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
uniform float hollowRadius;

varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {
  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius
  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius

  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`;function i1e(i,e,t,n){return new Rx.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:t1e,fragmentShader:n1e,uniforms:{coefficient:{value:i},color:{value:new Rx.Color(e)},power:{value:t},hollowRadius:{value:n}}})}function r1e(i,e){for(var t=i.clone(),n=new Float32Array(i.attributes.position.count*3),r=0,s=n.length;r<s;r++){var a=i.attributes.normal.array[r],o=i.attributes.position.array[r];n[r]=o+a*e}return t.setAttribute("position",new Rx.BufferAttribute(n,3)),t}var s1e=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.color,a=s===void 0?"gold":s,o=r.size,l=o===void 0?2:o,c=r.coefficient,u=c===void 0?.5:c,h=r.power,d=h===void 0?1:h,A=r.hollowRadius,x=A===void 0?0:A,_=r.backside,S=_===void 0?!0:_;xT(this,e),n=yT(this,e);var w=r1e(t,l),C=i1e(u,a,d,x);return S&&(C.side=Rx.BackSide),n.geometry=w,n.material=C,n}return _T(e,i),bT(e)}(Rx.Mesh),tu=window.THREE?window.THREE:{Color:un,Group:yo,LineBasicMaterial:om,LineSegments:XF,Mesh:zi,MeshPhongMaterial:aU,SphereGeometry:Lu,SRGBColorSpace:ma,TextureLoader:D6},PW=Hs({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){pr(e.globeObj),pr(e.tileEngine),pr(e.graticulesObj)}},stateInit:function(){var e=new tu.SphereGeometry(Cr,75,75),t=new tu.MeshPhongMaterial({color:0}),n=new tu.Mesh(e,t);n.rotation.y=-Math.PI/2;var r=new Goe(Cr),s=new tu.Group;s.__globeObjType="globe",s.add(n),s.add(r);var a=new tu.LineSegments(new pz(soe(),Cr,2),new tu.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeGroup:s,globeObj:n,graticulesObj:a,defaultGlobeMaterial:t,tileEngine:r}},init:function(e,t){pr(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new tu.TextureLoader().load(e.globeImageUrl,function(s){s.colorSpace=tu.SRGBColorSpace,n.map=s,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new tu.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new tu.TextureLoader().load(e.bumpImageUrl,function(s){n.bumpMap=s,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),pr(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var r=e.atmosphereObj=new s1e(e.globeObj.geometry,{color:e.atmosphereColor,size:Cr*e.atmosphereAltitude,hollowRadius:Cr,coefficient:.1,power:3.5});r.visible=!!e.showAtmosphere,r.__globeObjType="atmosphere",e.scene.add(r)}!e.ready&&(!e.globeImageUrl||e.globeTileEngineUrl)&&(e.ready=!0,e.onReady())}}),Cu=function(e){return isNaN(e)?parseInt(Rn(e).toHex(),16):e},Pc=function(e){return e&&isNaN(e)?jp(e).opacity:1},hd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r,s=1,a=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(a){var o=a.slice(1),l=Nr(o,4),c=l[0],u=l[1],h=l[2],d=l[3];r=new un("rgb(".concat(+c,",").concat(+u,",").concat(+h,")")),s=Math.min(+d,1)}else r=new un(e);n&&r.convertLinearToSRGB();var A=r.toArray();return t?[].concat(ar(A),[s]):A};function a1e(i,e,t){return i.opacity=e,i.transparent=e<1,i.depthWrite=e>=1,i}var mB=window.THREE?window.THREE:{BufferAttribute:Vr};function Ru(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array;if(e===1)return new mB.BufferAttribute(new t(i),e);for(var n=new mB.BufferAttribute(new t(i.length*e),e),r=0,s=i.length;r<s;r++)n.set(i[r],r*e);return n}function o1e(i){for(var e=i.itemSize,t=[],n=0;n<i.count;n++)t.push(i.array.slice(n*e,(n+1)*e));return t}var gC=new WeakMap,r_=new WeakMap,s_=new WeakMap,Lo=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.dataBindAttr,a=s===void 0?"__data":s,o=r.objBindAttr,l=o===void 0?"__threeObj":o,c=r.removeDelay,u=c===void 0?0:c;return xT(this,e),n=yT(this,e),ra(n,"scene",void 0),dC(n,gC,void 0),dC(n,r_,void 0),dC(n,s_,void 0),n.scene=t,pC(gC,n,a),pC(r_,n,l),pC(s_,n,u),n.onRemoveObj(function(){}),n}return _T(e,i),bT(e,[{key:"onCreateObj",value:function(n){var r=this;return AC(e,"onCreateObj",this)([function(s){var a=n(s);return s[Jv(r_,r)]=a,a[Jv(gC,r)]=s,r.scene.add(a),a}]),this}},{key:"onRemoveObj",value:function(n){var r=this;return AC(e,"onRemoveObj",this)([function(s,a){var o=AC(e,"getData",r)([s]);n(s,a);var l=function(){r.scene.remove(s),pr(s),delete o[Jv(r_,r)]};Jv(s_,r)?setTimeout(l,Jv(s_,r)):l()}]),this}}])}(gce),fc=window.THREE?window.THREE:{BufferGeometry:lr,CylinderGeometry:US,Matrix4:Un,Mesh:zi,MeshLambertMaterial:Wh,Object3D:Lr,Vector3:pe},vB=Object.assign({},Q6),yB=vB.BufferGeometryUtils||vB,NW=Hs({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=Tt(e.pointLat),r=Tt(e.pointLng),s=Tt(e.pointAltitude),a=Tt(e.pointRadius),o=Tt(e.pointColor),l=new fc.CylinderGeometry(1,1,1,e.pointResolution);l.applyMatrix4(new fc.Matrix4().makeRotationX(Math.PI/2)),l.applyMatrix4(new fc.Matrix4().makeTranslation(0,0,-.5));var c=2*Math.PI*Cr/360,u={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&pr(e.scene),e.dataMapper.scene=e.pointsMerge?new fc.Object3D:e.scene,e.dataMapper.onCreateObj(A).onUpdateObj(x).digest(e.pointsData),e.pointsMerge){var h=e.pointsData.length?(yB.mergeGeometries||yB.mergeBufferGeometries)(e.pointsData.map(function(_){var S=e.dataMapper.getObj(_),w=S.geometry.clone();S.updateMatrix(),w.applyMatrix4(S.matrix);var C=hd(o(_));return w.setAttribute("color",Ru(Array(w.getAttribute("position").count).fill(C),4)),w})):new fc.BufferGeometry,d=new fc.Mesh(h,new fc.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));d.__globeObjType="points",d.__data=e.pointsData,e.dataMapper.clear(),pr(e.scene),e.scene.add(d)}function A(){var _=new fc.Mesh(l);return _.__globeObjType="point",_}function x(_,S){var w=function(U){var F=_.__currentTargetD=U,z=F.r,V=F.alt,W=F.lat,X=F.lng;Object.assign(_.position,Xl(W,X));var J=e.pointsMerge?new fc.Vector3(0,0,0):e.scene.localToWorld(new fc.Vector3(0,0,0));_.lookAt(J),_.scale.x=_.scale.y=Math.min(30,z)*c,_.scale.z=Math.max(V*Cr,.1)},C={alt:+s(S),r:+a(S),lat:+n(S),lng:+r(S)},P=_.__currentTargetD||Object.assign({},C,{alt:-.001});if(Object.keys(C).some(function(k){return P[k]!==C[k]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?w(C):e.tweenGroup.add(new Ua(P).to(C,e.pointsTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(w).start())),!e.pointsMerge){var L=o(S),D=L?Pc(L):0,B=!!D;_.visible=B,B&&(u.hasOwnProperty(L)||(u[L]=new fc.MeshLambertMaterial({color:Cu(L),transparent:D<1,opacity:D})),_.material=u[L])}}}}),LW=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    `.concat(si.common,`
    `).concat(si.logdepthbuf_pars_vertex,`
  
    uniform float dashTranslate; 

    attribute vec4 color;
    varying vec4 vColor;
    
    attribute float relDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = color;
      vRelDistance = relDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  
      `).concat(si.logdepthbuf_vertex,`
    }
  `),fragmentShader:`
    `.concat(si.logdepthbuf_pars_fragment,`

    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
  
      `).concat(si.logdepthbuf_fragment,`
    }
  `)}},IR=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=(`attribute float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join(`
`)),e.fragmentShader=(`uniform float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join(`
`)),e},l1e=function(e){return e.vertexShader=`
    attribute float r;
    
    const float PI = 3.1415926535897932384626433832795;
    float toRad(in float a) {
      return a * PI / 180.0;
    }
    
    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]
      float phi = toRad(90.0 - c.x);
      float theta = toRad(90.0 - c.y);
      float r = c.z;
      return vec3( // x,y,z
        r * sin(phi) * cos(theta),
        r * cos(phi),
        r * sin(phi) * sin(theta)
      );
    }
    
    vec2 Cartesian2Polar(in vec3 p) {
      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);
      float phi = acos(p.y / r);
      float theta = atan(p.z, p.x);
      return vec2( // lat,lng
        90.0 - phi * 180.0 / PI,
        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)
      );
    }
    `.concat(e.vertexShader.replace("}",`                  
        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      }
    `),`
  `),e},SP=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},c1e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(r){return r};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(r){n(r),t(r.uniforms)}}},u1e=["stroke"],dc=window.THREE?window.THREE:{BufferGeometry:lr,CubicBezierCurve3:QF,Curve:Bc,Group:yo,Line:BS,Mesh:zi,NormalBlending:to,ShaderMaterial:Eo,TubeGeometry:N6,Vector3:pe},h1e=Og.default||Og,DW=Hs({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new h1e,sharedMaterial:new dc.ShaderMaterial(Ji(Ji({},LW()),{},{transparent:!0,blending:dc.NormalBlending}))}},init:function(e,t){pr(e),t.scene=e,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var n=new dc.Group;return n.__globeObjType="arc",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var a=Nr(s,2),o=a[1];return o}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var a=s.children[0],o=a.__dashAnimateStep*r,l=a.material.uniforms.dashTranslate.value%1e9;a.material.uniforms.dashTranslate.value=l+o})})},update:function(e){var t=Tt(e.arcStartLat),n=Tt(e.arcStartLng),r=Tt(e.arcEndLat),s=Tt(e.arcEndLng),a=Tt(e.arcAltitude),o=Tt(e.arcAltitudeAutoScale),l=Tt(e.arcStroke),c=Tt(e.arcColor),u=Tt(e.arcDashLength),h=Tt(e.arcDashGap),d=Tt(e.arcDashInitialGap),A=Tt(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(w,C){var P=l(C),L=P!=null;if(!w.children.length||L!==(w.children[0].type==="Mesh")){pr(w);var D=L?new dc.Mesh:new dc.Line(new dc.BufferGeometry);D.material=e.sharedMaterial.clone(),w.add(D)}var B=w.children[0];Object.assign(B.material.uniforms,{dashSize:{value:u(C)},gapSize:{value:h(C)},dashOffset:{value:d(C)}});var k=A(C);B.__dashAnimateStep=k>0?1e3/k:0;var U=_(c(C),e.arcCurveResolution,L?e.arcCircularResolution+1:1),F=S(e.arcCurveResolution,L?e.arcCircularResolution+1:1,!0);B.geometry.setAttribute("color",U),B.geometry.setAttribute("relDistance",F);var z=function(J){var K=w.__currentTargetD=J,Y=K.stroke,ee=Qxe(K,u1e),se=x(ee);L?(B.geometry&&B.geometry.dispose(),B.geometry=new dc.TubeGeometry(se,e.arcCurveResolution,Y/2,e.arcCircularResolution),B.geometry.setAttribute("color",U),B.geometry.setAttribute("relDistance",F)):B.geometry.setFromPoints(se.getPoints(e.arcCurveResolution))},V={stroke:P,alt:a(C),altAutoScale:+o(C),startLat:+t(C),startLng:+n(C),endLat:+r(C),endLng:+s(C)},W=w.__currentTargetD||Object.assign({},V,{altAutoScale:-.001});Object.keys(V).some(function(X){return W[X]!==V[X]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?z(V):e.tweenGroup.add(new Ua(W).to(V,e.arcsTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(z).start()))}).digest(e.arcsData);function x(w){var C=w.alt,P=w.altAutoScale,L=w.startLat,D=w.startLng,B=w.endLat,k=w.endLng,U=function(he){var Te=Nr(he,3),Pe=Te[0],_e=Te[1],Ie=Te[2],Ve=Xl(_e,Pe,Ie),$e=Ve.x,Je=Ve.y,vt=Ve.z;return new dc.Vector3($e,Je,vt)},F=[D,L],z=[k,B],V=C;if(V==null&&(V=ud(F,z)/2*P),V){var W=W6(F,z),X=[.25,.75].map(function(ne){return[].concat(ar(W(ne)),[V*1.5])}),J=Nr(X,2),K=J[0],Y=J[1],ee=bP(dc.CubicBezierCurve3,ar([F,K,Y,z].map(U)));return ee}else{var se=.001;return fe.apply(void 0,ar([[].concat(F,[se]),[].concat(z,[se])].map(U)))}function fe(ne,he){var Te=ne.angleTo(he),Pe=Te===0?function(){return ne.clone()}:function(Ie){return new dc.Vector3().addVectors(ne.clone().multiplyScalar(Math.sin((1-Ie)*Te)),he.clone().multiplyScalar(Math.sin(Ie*Te))).divideScalar(Math.sin(Te))},_e=new dc.Curve;return _e.getPoint=Pe,_e}}function _(w,C){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,L=C+1,D;if(w instanceof Array||w instanceof Function){var B=w instanceof Array?Lh().domain(w.map(function(X,J){return J/(w.length-1)})).range(w):w;D=function(J){return hd(B(J),!0,!0)}}else{var k=hd(w,!0,!0);D=function(){return k}}for(var U=[],F=0,z=L;F<z;F++)for(var V=D(F/(z-1)),W=0;W<P;W++)U.push(V);return Ru(U,4)}function S(w){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=w+1,D=[],B=0,k=L;B<k;B++)for(var U=B/(k-1),F=0;F<C;F++)D.push(U);return P&&D.reverse(),Ru(D,1)}}}),Uf=window.THREE?window.THREE:{BufferGeometry:lr,DoubleSide:ws,Mesh:zi,MeshLambertMaterial:Wh,Object3D:Lr},xB=Object.assign({},Q6),bB=xB.BufferGeometryUtils||xB,kW=Hs({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=Tt(e.hexBinPointLat),r=Tt(e.hexBinPointLng),s=Tt(e.hexBinPointWeight),a=Tt(e.hexAltitude),o=Tt(e.hexTopColor),l=Tt(e.hexSideColor),c=Tt(e.hexMargin),u=Fue(e.hexBinPointsData.map(function(C){return Ji(Ji({},C),{},{h3Idx:yhe(n(C),r(C),e.hexBinResolution)})}),"h3Idx"),h=Object.entries(u).map(function(C){var P=Nr(C,2),L=P[0],D=P[1];return{h3Idx:L,points:D,sumWeight:D.reduce(function(B,k){return B+ +s(k)},0)}}),d={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&pr(e.scene),e.dataMapper.scene=e.hexBinMerge?new Uf.Object3D:e.scene,e.dataMapper.id(function(C){return C.h3Idx}).onCreateObj(S).onUpdateObj(w).digest(h),e.hexBinMerge){var A=h.length?(bB.mergeGeometries||bB.mergeBufferGeometries)(h.map(function(C){var P=e.dataMapper.getObj(C),L=P.geometry.toNonIndexed();P.updateMatrix(),L.applyMatrix4(P.matrix);var D=hd(o(C)),B=hd(l(C)),k=L.getAttribute("position").count,U=L.groups[0].count;return L.setAttribute("color",Ru(ar(new Array(k)).map(function(F,z){return z>=U?D:B}),4)),L})):new Uf.BufferGeometry,x=new Uf.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:Uf.DoubleSide});x.onBeforeCompile=function(C){x.userData.shader=IR(C)};var _=new Uf.Mesh(A,x);_.__globeObjType="hexBinPoints",_.__data=h,e.dataMapper.clear(),pr(e.scene),e.scene.add(_)}function S(C){var P=new Uf.Mesh;P.__hexCenter=Dz(C.h3Idx),P.__hexGeoJson=kz(C.h3Idx,!0).reverse();var L=P.__hexCenter[1];return P.__hexGeoJson.forEach(function(D){var B=D[0];Math.abs(L-B)>170&&(D[0]+=L>B?360:-360)}),P.__globeObjType="hexbin",P}function w(C,P){var L=function(ee,se,fe){return ee-(ee-se)*fe},D=Math.max(0,Math.min(1,+c(P))),B=Nr(C.__hexCenter,2),k=B[0],U=B[1],F=D===0?C.__hexGeoJson:C.__hexGeoJson.map(function(Y){var ee=Nr(Y,2),se=ee[0],fe=ee[1];return[[se,U],[fe,k]].map(function(ne){var he=Nr(ne,2),Te=he[0],Pe=he[1];return L(Te,Pe,D)})}),z=e.hexTopCurvatureResolution;C.geometry&&C.geometry.dispose(),C.geometry=new t8([F],0,Cr,!1,!0,!0,z);var V={alt:+a(P)},W=function(ee){var se=C.__currentTargetD=ee,fe=se.alt;C.scale.x=C.scale.y=C.scale.z=1+fe;var ne=Cr/(fe+1);C.geometry.setAttribute("surfaceRadius",Ru(Array(C.geometry.getAttribute("position").count).fill(ne),1))},X=C.__currentTargetD||Object.assign({},V,{alt:-.001});if(Object.keys(V).some(function(Y){return X[Y]!==V[Y]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?W(V):e.tweenGroup.add(new Ua(X).to(V,e.hexTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(W).start())),!e.hexBinMerge){var J=l(P),K=o(P);[J,K].forEach(function(Y){if(!d.hasOwnProperty(Y)){var ee=Pc(Y);d[Y]=SP(new Uf.MeshLambertMaterial({color:Cu(Y),transparent:ee<1,opacity:ee,side:Uf.DoubleSide}),IR)}}),C.material=[J,K].map(function(Y){return d[Y]})}}}}),OW=function(e){return e*e},bh=function(e){return e*Math.PI/180};function f1e(i,e){var t=Math.sqrt,n=Math.cos,r=function(u){return OW(Math.sin(u/2))},s=bh(i[1]),a=bh(e[1]),o=bh(i[0]),l=bh(e[0]);return 2*Math.asin(t(r(a-s)+n(s)*n(a)*r(l-o)))}var d1e=Math.sqrt(2*Math.PI);function p1e(i,e){return Math.exp(-OW(i/e)/2)/(e*d1e)}var A1e=function(e){var t=Nr(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.lngAccessor,l=o===void 0?function(S){return S[0]}:o,c=a.latAccessor,u=c===void 0?function(S){return S[1]}:c,h=a.weightAccessor,d=h===void 0?function(){return 1}:h,A=a.bandwidth,x=[n,r],_=A*Math.PI/180;return Ose(s.map(function(S){var w=d(S);if(!w)return 0;var C=f1e(x,[l(S),u(S)]);return p1e(C,_)*w}))},g1e=function(){var i=Hxe(kR().mark(function e(t){var n,r,s,a,o,l,c,u,h,d,A,x,_,S,w,C,P,L,D,B,k,U,F,z,V,W,X,J,K,Y,ee,se,fe,ne,he,Te,Pe,_e,Ie,Ve,$e=arguments;return kR().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(r=$e.length>1&&$e[1]!==void 0?$e[1]:[],s=$e.length>2&&$e[2]!==void 0?$e[2]:{},a=s.lngAccessor,o=a===void 0?function(pt){return pt[0]}:a,l=s.latAccessor,c=l===void 0?function(pt){return pt[1]}:l,u=s.weightAccessor,h=u===void 0?function(){return 1}:u,d=s.bandwidth,(n=navigator)!==null&&n!==void 0&&n.gpu){vt.next=5;break}return console.warn("WebGPU not enabled in browser. Please consider enabling it to improve performance."),vt.abrupt("return",t.map(function(pt){return A1e(pt,r,{lngAccessor:o,latAccessor:c,weightAccessor:h,bandwidth:d})}));case 5:return A=4,x=xxe,_=bxe,S=Lxe,w=Nxe,C=Mxe,P=Exe,L=_xe,D=Pxe,B=Rxe,k=Sxe,U=wxe,F=Txe,z=Cxe,V=w(new W_(new Float32Array(t.flat().map(bh)),2),"vec2",t.length),W=w(new W_(new Float32Array(r.map(function(pt){return[bh(o(pt)),bh(c(pt)),h(pt)]}).flat()),3),"vec3",r.length),X=new W_(t.length,1),J=w(X,"float",t.length),K=C(Math.PI),Y=D(K.mul(2)),ee=function(Vt){return Vt.mul(Vt)},se=function(Vt){return ee(B(Vt.div(2)))},fe=function(Vt,fn){var jt=C(Vt[1]),de=C(fn[1]),Dt=C(Vt[0]),gt=C(fn[0]);return C(2).mul(U(D(se(de.sub(jt)).add(k(jt).mul(k(de)).mul(se(gt.sub(Dt)))))))},ne=function(Vt,fn){return F(z(ee(Vt.div(fn)).div(2))).div(fn.mul(Y))},he=S(bh(d)),Te=S(bh(d*A)),Pe=S(r.length),_e=x(function(){var pt=V.element(P),Vt=J.element(P);Vt.assign(0),L(Pe,function(fn){var jt=fn.i,de=W.element(jt),Dt=de.z;_(Dt,function(){var gt=fe(de.xy,pt.xy);_(gt&&gt.lessThan(Te),function(){Vt.addAssign(ne(gt,he).mul(Dt))})})})}),Ie=_e().compute(t.length),Ve=new _W,vt.next=25,Ve.computeAsync(Ie);case 25:return vt.t0=Array,vt.t1=Float32Array,vt.next=29,Ve.getArrayBufferAsync(X);case 29:return vt.t2=vt.sent,vt.t3=new vt.t1(vt.t2),vt.abrupt("return",vt.t0.from.call(vt.t0,vt.t3));case 32:case"end":return vt.stop()}},e)}));return function(t){return i.apply(this,arguments)}}(),a_=window.THREE?window.THREE:{Mesh:zi,MeshLambertMaterial:Wh,SphereGeometry:Lu},m1e=3.5,v1e=.1,_B=100,y1e=function(e){var t=jp(bhe(e));return t.opacity=Math.cbrt(e),t.formatRgb()},IW=Hs({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return y1e}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var s=new a_.Mesh(new a_.SphereGeometry(Cr),SP(new a_.MeshLambertMaterial({vertexColors:!0,transparent:!0}),l1e));return s.__globeObjType="heatmap",s})},update:function(e){var t=Tt(e.heatmapPoints),n=Tt(e.heatmapPointLat),r=Tt(e.heatmapPointLng),s=Tt(e.heatmapPointWeight),a=Tt(e.heatmapBandwidth),o=Tt(e.heatmapColorFn),l=Tt(e.heatmapColorSaturation),c=Tt(e.heatmapBaseAltitude),u=Tt(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(h,d){var A=a(d),x=o(d),_=l(d),S=c(d),w=u(d),C=t(d).map(function(k){var U=n(k),F=r(k),z=Xl(U,F),V=z.x,W=z.y,X=z.z;return{x:V,y:W,z:X,lat:U,lng:F,weight:s(k)}}),P=Math.max(v1e,A/m1e),L=Math.ceil(360/(P||-1));h.geometry.parameters.widthSegments!==L&&(h.geometry.dispose(),h.geometry=new a_.SphereGeometry(Cr,L,L/2));var D=o1e(h.geometry.getAttribute("position")),B=D.map(function(k){var U=Nr(k,3),F=U[0],z=U[1],V=U[2],W=RW({x:F,y:z,z:V}),X=W.lng,J=W.lat;return[X,J]});g1e(B,C,{latAccessor:function(U){return U.lat},lngAccessor:function(U){return U.lng},weightAccessor:function(U){return U.weight},bandwidth:A}).then(function(k){var U=ar(new Array(_B)).map(function(W,X){return hd(x(X/(_B-1)))}),F=function(X){var J=h.__currentTargetD=X,K=J.kdeVals,Y=J.topAlt,ee=J.saturation,se=Lse(K.map(Math.abs))||1e-15,fe=kU([0,se/ee],U);h.geometry.setAttribute("color",Ru(K.map(function(he){return fe(Math.abs(he))}),4));var ne=Lh([0,se],[Cr*(1+S),Cr*(1+(Y||S))]);h.geometry.setAttribute("r",Ru(K.map(ne)))},z={kdeVals:k,topAlt:w,saturation:_},V=h.__currentTargetD||Object.assign({},z,{kdeVals:k.map(function(){return 0}),topAlt:w&&S,saturation:.5});V.kdeVals.length!==k.length&&(V.kdeVals=k.slice()),Object.keys(z).some(function(W){return V[W]!==z[W]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?F(z):e.tweenGroup.add(new Ua(V).to(z,e.heatmapsTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(F).start()))})}).digest(e.heatmapsData)}}),zf=window.THREE?window.THREE:{DoubleSide:ws,Group:yo,LineBasicMaterial:om,LineSegments:XF,Mesh:zi,MeshBasicMaterial:Il},BW=Hs({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjPolygon"}).id(function(s){return s.id}).onCreateObj(function(){var s=new zf.Group;return s.__defaultSideMaterial=SP(new zf.MeshBasicMaterial({side:zf.DoubleSide,depthWrite:!0}),IR),s.__defaultCapMaterial=new zf.MeshBasicMaterial({side:zf.DoubleSide,depthWrite:!0}),s.add(new zf.Mesh(void 0,[s.__defaultSideMaterial,s.__defaultCapMaterial])),s.add(new zf.LineSegments(void 0,new zf.LineBasicMaterial)),s.__globeObjType="polygon",s})},update:function(e){var t=Tt(e.polygonGeoJsonGeometry),n=Tt(e.polygonAltitude),r=Tt(e.polygonCapCurvatureResolution),s=Tt(e.polygonCapColor),a=Tt(e.polygonCapMaterial),o=Tt(e.polygonSideColor),l=Tt(e.polygonSideMaterial),c=Tt(e.polygonStrokeColor),u=[];e.polygonsData.forEach(function(h){var d={data:h,capColor:s(h),capMaterial:a(h),sideColor:o(h),sideMaterial:l(h),strokeColor:c(h),altitude:+n(h),capCurvatureResolution:+r(h)},A=t(h),x=h.__id||"".concat(Math.round(Math.random()*1e9));h.__id=x,A.type==="Polygon"?u.push(Ji({id:"".concat(x,"_0"),coords:A.coordinates},d)):A.type==="MultiPolygon"?u.push.apply(u,ar(A.coordinates.map(function(_,S){return Ji({id:"".concat(x,"_").concat(S),coords:_},d)}))):console.warn("Unsupported GeoJson geometry type: ".concat(A.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(h,d){var A=d.coords,x=d.capColor,_=d.capMaterial,S=d.sideColor,w=d.sideMaterial,C=d.strokeColor,P=d.altitude,L=d.capCurvatureResolution,D=Nr(h.children,2),B=D[0],k=D[1],U=!!C;k.visible=U;var F=!!(x||_),z=!!(S||w);x1e(B.geometry.parameters||{},{polygonGeoJson:A,curvatureResolution:L,closedTop:F,includeSides:z})||(B.geometry&&B.geometry.dispose(),B.geometry=new t8(A,0,Cr,!1,F,z,L)),U&&(!k.geometry.parameters||k.geometry.parameters.geoJson.coordinates!==A||k.geometry.parameters.resolution!==L)&&(k.geometry&&k.geometry.dispose(),k.geometry=new pz({type:"Polygon",coordinates:A},Cr,L));var V=z?0:-1,W=F?z?1:0:-1;if(V>=0&&(B.material[V]=w||h.__defaultSideMaterial),W>=0&&(B.material[W]=_||h.__defaultCapMaterial),[[!w&&S,V],[!_&&x,W]].forEach(function(se){var fe=Nr(se,2),ne=fe[0],he=fe[1];if(!(!ne||he<0)){var Te=B.material[he],Pe=Pc(ne);Te.color.set(Cu(ne)),Te.transparent=Pe<1,Te.opacity=Pe}}),U){var X=k.material,J=Pc(C);X.color.set(Cu(C)),X.transparent=J<1,X.opacity=J}var K={alt:P},Y=function(fe){var ne=h.__currentTargetD=fe,he=ne.alt;B.scale.x=B.scale.y=B.scale.z=1+he,U&&(k.scale.x=k.scale.y=k.scale.z=1+he+1e-4),c1e(h.__defaultSideMaterial,function(Te){return Te.surfaceRadius.value=Cr/(he+1)})},ee=h.__currentTargetD||Object.assign({},K,{alt:-.001});Object.keys(K).some(function(se){return ee[se]!==K[se]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||ee.alt===K.alt?Y(K):e.tweenGroup.add(new Ua(ee).to(K,e.polygonsTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(Y).start()))}).digest(u)}});function x1e(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,r){return n===r}};return Object.entries(e).every(function(n){var r=Nr(n,2),s=r[0],a=r[1];return i.hasOwnProperty(s)&&t(s)(i[s],a)})}var S0=window.THREE?window.THREE:{BufferGeometry:lr,DoubleSide:ws,Mesh:zi,MeshLambertMaterial:Wh,Vector3:pe},wB=Object.assign({},Q6),SB=wB.BufferGeometryUtils||wB,FW=Hs({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var s=new S0.Mesh(void 0,new S0.MeshLambertMaterial({side:S0.DoubleSide}));return s.__globeObjType="hexPolygon",s})},update:function(e){var t=Tt(e.hexPolygonGeoJsonGeometry),n=Tt(e.hexPolygonColor),r=Tt(e.hexPolygonAltitude),s=Tt(e.hexPolygonResolution),a=Tt(e.hexPolygonMargin),o=Tt(e.hexPolygonUseDots),l=Tt(e.hexPolygonCurvatureResolution),c=Tt(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(u,h){var d=t(h),A=s(h),x=r(h),_=Math.max(0,Math.min(1,+a(h))),S=o(h),w=l(h),C=c(h),P=n(h),L=Pc(P);u.material.color.set(Cu(P)),u.material.transparent=L<1,u.material.opacity=L;var D={alt:x,margin:_,curvatureResolution:w},B={geoJson:d,h3Res:A},k=u.__currentTargetD||Object.assign({},D,{alt:-.001}),U=u.__currentMemD||B;if(Object.keys(D).some(function(W){return k[W]!==D[W]})||Object.keys(B).some(function(W){return U[W]!==B[W]})){u.__currentMemD=B;var F=[];d.type==="Polygon"?q7(d.coordinates,A,!0).forEach(function(W){return F.push(W)}):d.type==="MultiPolygon"?d.coordinates.forEach(function(W){return q7(W,A,!0).forEach(function(X){return F.push(X)})}):console.warn("Unsupported GeoJson geometry type: ".concat(d.type,". Skipping geometry..."));var z=F.map(function(W){var X=Dz(W),J=kz(W,!0).reverse(),K=X[1];return J.forEach(function(Y){var ee=Y[0];Math.abs(K-ee)>170&&(Y[0]+=K>ee?360:-360)}),{h3Idx:W,hexCenter:X,hexGeoJson:J}}),V=function(X){var J=u.__currentTargetD=X,K=J.alt,Y=J.margin,ee=J.curvatureResolution;u.geometry&&u.geometry.dispose(),u.geometry=z.length?(SB.mergeGeometries||SB.mergeBufferGeometries)(z.map(function(se){var fe=Nr(se.hexCenter,2),ne=fe[0],he=fe[1];if(S){var Te=Xl(ne,he,K),Pe=Xl(se.hexGeoJson[0][1],se.hexGeoJson[0][0],K),_e=.85*(1-Y)*new S0.Vector3(Te.x,Te.y,Te.z).distanceTo(new S0.Vector3(Pe.x,Pe.y,Pe.z)),Ie=new FS(_e,C);return Ie.rotateX(Ap(-ne)),Ie.rotateY(Ap(he)),Ie.translate(Te.x,Te.y,Te.z),Ie}else{var Ve=function(vt,pt,Vt){return vt-(vt-pt)*Vt},$e=Y===0?se.hexGeoJson:se.hexGeoJson.map(function(Je){var vt=Nr(Je,2),pt=vt[0],Vt=vt[1];return[[pt,he],[Vt,ne]].map(function(fn){var jt=Nr(fn,2),de=jt[0],Dt=jt[1];return Ve(de,Dt,Y)})});return new t8([$e],Cr,Cr*(1+K),!1,!0,!1,ee)}})):new S0.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?V(D):e.tweenGroup.add(new Ua(k).to(D,e.hexPolygonsTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(V).start())}}).digest(e.hexPolygonsData)}}),b1e=window.THREE?window.THREE:{Vector3:pe};function _1e(i,e){var t=function(a,o){var l=a[a.length-1];return[].concat(ar(a),ar(Array(o-a.length).fill(l)))},n=Math.max(i.length,e.length),r=Zse.apply(void 0,ar([i,e].map(function(s){return s.map(function(a){var o=a.x,l=a.y,c=a.z;return[o,l,c]})}).map(function(s){return t(s,n)})));return function(s){return s===0?i:s===1?e:r(s).map(function(a){var o=Nr(a,3),l=o[0],c=o[1],u=o[2];return new b1e.Vector3(l,c,u)})}}var np=window.THREE?window.THREE:{BufferGeometry:lr,Color:un,Group:yo,Line:BS,NormalBlending:to,ShaderMaterial:Eo,Vector3:pe},w1e=Og.default||Og,UW=Hs({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new w1e,sharedMaterial:new np.ShaderMaterial(Ji(Ji({},LW()),{},{transparent:!0,blending:np.NormalBlending}))}},init:function(e,t){pr(e),t.scene=e,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var n=new np.Group;return n.__globeObjType="path",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var a=Nr(s,2),o=a[1];return o}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var a=s.children[0],o=a.__dashAnimateStep*r;if(a.type==="Line"){var l=a.material.uniforms.dashTranslate.value%1e9;a.material.uniforms.dashTranslate.value=l+o}else if(a.type==="Line2"){for(var c=a.material.dashOffset-o,u=a.material.dashSize+a.material.gapSize;c<=-u;)c+=u;a.material.dashOffset=c}})})},update:function(e){var t=Tt(e.pathPoints),n=Tt(e.pathPointLat),r=Tt(e.pathPointLng),s=Tt(e.pathPointAlt),a=Tt(e.pathStroke),o=Tt(e.pathColor),l=Tt(e.pathDashLength),c=Tt(e.pathDashGap),u=Tt(e.pathDashInitialGap),h=Tt(e.pathDashAnimateTime);e.dataMapper.onUpdateObj(function(S,w){var C=a(w),P=C!=null;if(!S.children.length||P===(S.children[0].type==="Line")){pr(S);var L=P?new Ixe(new SW,new xP):new np.Line(new np.BufferGeometry,e.sharedMaterial.clone());S.add(L)}var D=S.children[0],B=A(t(w),n,r,s,e.pathResolution),k=h(w);if(D.__dashAnimateStep=k>0?1e3/k:0,P){D.material.resolution=e.rendererSize;{var z=l(w),V=c(w),W=u(w);D.material.dashed=V>0,D.material.dashed?D.material.defines.USE_DASH="":delete D.material.defines.USE_DASH,D.material.dashed&&(D.material.dashScale=1/d(B),D.material.dashSize=z,D.material.gapSize=V,D.material.dashOffset=-W)}{var X=o(w);if(X instanceof Array){var J=x(o(w),B.length-1,1,!1);D.geometry.setColors(J.array),D.material.vertexColors=!0}else{var K=X,Y=Pc(K);D.material.color=new np.Color(Cu(K)),D.material.transparent=Y<1,D.material.opacity=Y,D.material.vertexColors=!1}}D.material.needsUpdate=!0}else{Object.assign(D.material.uniforms,{dashSize:{value:l(w)},gapSize:{value:c(w)},dashOffset:{value:u(w)}});var U=x(o(w),B.length),F=_(B.length,1,!0);D.geometry.setAttribute("color",U),D.geometry.setAttribute("relDistance",F)}var ee=_1e(S.__currentTargetD&&S.__currentTargetD.points||[B[0]],B),se=function(Te){var Pe=S.__currentTargetD=Te,_e=Pe.stroke,Ie=Pe.interpolK,Ve=S.__currentTargetD.points=ee(Ie);if(P){var $e;D.geometry.setPositions(($e=[]).concat.apply($e,ar(Ve.map(function(Je){var vt=Je.x,pt=Je.y,Vt=Je.z;return[vt,pt,Vt]})))),D.material.linewidth=_e,D.material.dashed&&D.computeLineDistances()}else D.geometry.setFromPoints(Ve),D.geometry.computeBoundingSphere()},fe={stroke:C,interpolK:1},ne=Object.assign({},S.__currentTargetD||fe,{interpolK:0});Object.keys(fe).some(function(he){return ne[he]!==fe[he]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?se(fe):e.tweenGroup.add(new Ua(ne).to(fe,e.pathTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(se).start()))}).digest(e.pathsData);function d(S){var w=0,C;return S.forEach(function(P){C&&(w+=C.distanceTo(P)),C=P}),w}function A(S,w,C,P,L){var D=function(F,z,V){for(var W=[],X=1;X<=V;X++)W.push(F+(z-F)*X/(V+1));return W},B=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,V=[],W=null;return F.forEach(function(X){if(W){for(;Math.abs(W[1]-X[1])>180;)W[1]+=360*(W[1]<X[1]?1:-1);var J=Math.sqrt(Math.pow(X[0]-W[0],2)+Math.pow(X[1]-W[1],2));if(J>z)for(var K=Math.floor(J/z),Y=D(W[0],X[0],K),ee=D(W[1],X[1],K),se=D(W[2],X[2],K),fe=0,ne=Y.length;fe<ne;fe++)V.push([Y[fe],ee[fe],se[fe]])}V.push(W=X)}),V},k=function(F){var z=Nr(F,3),V=z[0],W=z[1],X=z[2],J=Xl(V,W,X),K=J.x,Y=J.y,ee=J.z;return new np.Vector3(K,Y,ee)};return B(S.map(function(U){return[w(U),C(U),P(U)]}),L).map(k)}function x(S,w){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,L=w+1,D;if(S instanceof Array||S instanceof Function){var B=S instanceof Array?Lh().domain(S.map(function(X,J){return J/(S.length-1)})).range(S):S;D=function(J){return hd(B(J),P,!0)}}else{var k=hd(S,P,!0);D=function(){return k}}for(var U=[],F=0,z=L;F<z;F++)for(var V=D(F/(z-1)),W=0;W<C;W++)U.push(V);return Ru(U,P?4:3)}function _(S){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=S+1,L=[],D=0,B=P;D<B;D++)for(var k=D/(B-1),U=0;U<w;U++)L.push(k);return C&&L.reverse(),Ru(L,1)}}}),o_=window.THREE?window.THREE:{Euler:ba,Mesh:zi,MeshLambertMaterial:Wh,SphereGeometry:Lu},zW=Hs({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new o_.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var s=new o_.Mesh;return s.__globeObjType="tile",s})},update:function(e){var t=Tt(e.tileLat),n=Tt(e.tileLng),r=Tt(e.tileAltitude),s=Tt(e.tileWidth),a=Tt(e.tileHeight),o=Tt(e.tileUseGlobeProjection),l=Tt(e.tileMaterial),c=Tt(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(u,h){u.material=l(h);var d=o(h),A=c(h),x=function(C){var P=u.__currentTargetD=C,L=P.lat,D=P.lng,B=P.alt,k=P.width,U=P.height,F=T0(D),z=T0(-L);u.geometry&&u.geometry.dispose(),u.geometry=new o_.SphereGeometry(Cr*(1+B),Math.ceil(k/(A||-1)),Math.ceil(U/(A||-1)),T0(90-k/2)+(d?F:0),T0(k),T0(90-U/2)+(d?z:0),T0(U)),d||u.setRotationFromEuler(new o_.Euler(z,F,0,"YXZ"))},_={lat:+t(h),lng:+n(h),alt:+r(h),width:+s(h),height:+a(h)},S=u.__currentTargetD||Object.assign({},_,{width:0,height:0});Object.keys(_).some(function(w){return S[w]!==_[w]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?x(_):e.tweenGroup.add(new Ua(S).to(_,e.tilesTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(x).start()))}).digest(e.tilesData)}}),T0=function(e){return e*Math.PI/180},ey=window.THREE?window.THREE:{BufferGeometry:lr,Color:un,Points:IK,PointsMaterial:E6},GW=Hs({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){pr(e),t.scene=e,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var n=new ey.Points(new ey.BufferGeometry,new ey.PointsMaterial);return n.__globeObjType="particles",n}).onUpdateObj(function(n,r){var s=Tt(t.particlesList),a=Tt(t.particleLat),o=Tt(t.particleLng),l=Tt(t.particleAltitude);n.geometry.setAttribute("position",Ru(s(r).map(function(c){return Object.values(Xl(a(c),o(c),l(c)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(o){return t.hasOwnProperty(o)})&&e.dataMapper.digest(e.particlesData);var n=Tt(e.particlesColor),r=Tt(e.particlesSize),s=Tt(e.particlesSizeAttenuation),a=Tt(e.particlesTexture);e.dataMapper.entries().forEach(function(o){var l=Nr(o,2),c=l[0],u=l[1];if(u.material.size=r(c),u.material.sizeAttenuation=s(c),e.particlesTexture)u.material.color=new ey.Color(16777215),u.material.transparent=!1,u.material.alphaTest=.5,u.material.map=a(c);else{var h=n(c),d=Pc(h);u.material.color=new ey.Color(Cu(h)),u.material.transparent=d<1,u.material.opacity=d,u.material.alphaTest=0}})}}),S1e=window.THREE?window.THREE:{BufferGeometry:lr},T1e=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;xT(this,e),t=yT(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:r};for(var s=[],a=0;a<=r;a++){var o=(a/r-.25)*Math.PI*2;s.push({x:Math.cos(o)*n,y:Math.sin(o)*n,z:0})}return t.setFromPoints(s),t}return _T(e,i),bT(e)}(S1e.BufferGeometry),M0=window.THREE?window.THREE:{Color:un,Group:yo,Line:BS,LineBasicMaterial:om,Vector3:pe},M1e=Og.default||Og,VW=Hs({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var s=new M0.Group;return s.__globeObjType="ring",s}),t.ticker=new M1e,t.ticker.onTick.add(function(s){if(t.ringsData.length){var a=Tt(t.ringColor),o=Tt(t.ringAltitude),l=Tt(t.ringMaxRadius),c=Tt(t.ringPropagationSpeed),u=Tt(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(h){var d=Nr(h,2),A=d[1];return A}).forEach(function(h){var d=Nr(h,2),A=d[0],x=d[1];if((x.__nextRingTime||0)<=s){var _=u(A)/1e3;x.__nextRingTime=s+(_<=0?1/0:_);var S=new M0.Line(new T1e(1,t.ringResolution),new M0.LineBasicMaterial),w=a(A),C=w instanceof Array||w instanceof Function,P;C?w instanceof Array?(P=Lh().domain(w.map(function(V,W){return W/(w.length-1)})).range(w),S.material.transparent=w.some(function(V){return Pc(V)<1})):(P=w,S.material.transparent=!0):(S.material.color=new M0.Color(Cu(w)),a1e(S.material,Pc(w)));var L=Cr*(1+o(A)),D=l(A),B=D*Math.PI/180,k=c(A),U=k<=0,F=function(W){var X=W.t,J=(U?1-X:X)*B;if(S.scale.x=S.scale.y=L*Math.sin(J),S.position.z=L*(1-Math.cos(J)),C){var K=P(X);S.material.color=new M0.Color(Cu(K)),S.material.transparent&&(S.material.opacity=Pc(K))}};if(k===0)F({t:0}),x.add(S);else{var z=Math.abs(D/k)*1e3;t.tweenGroup.add(new Ua({t:0}).to({t:1},z).onUpdate(F).onStart(function(){return x.add(S)}).onComplete(function(){x.remove(S),wP(S)}).start())}}})}})},update:function(e){var t=Tt(e.ringLat),n=Tt(e.ringLng),r=Tt(e.ringAltitude),s=e.scene.localToWorld(new M0.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(a,o){var l=t(o),c=n(o),u=r(o);Object.assign(a.position,Xl(l,c,u)),a.lookAt(s)}).digest(e.ringsData)}}),E1e={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},ο:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"¦":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},Τ:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},Π:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},ΐ:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"²":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"–":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},Κ:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},ƒ:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},ό:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"»":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"©":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},ώ:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"«":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"∙":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},ÿ:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},µ:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},Ι:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},Ύ:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"’":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},Ν:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},ς:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},Ψ:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},ι:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},Ά:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},ε:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},Δ:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"‰":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"—":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},ρ:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"¯":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},Η:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},Α:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"…":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},ν:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"¶":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},β:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},Μ:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},Ό:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ή:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"•":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"¥":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},γ:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},α:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"­":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},Χ:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"†":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"°":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},Ξ:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "}," ":{x_min:0,x_max:0,ha:853},Ϋ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"”":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},Ί:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},Β:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},υ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},χ:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},ί:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},Ζ:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"¨":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"‹":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"„":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},δ:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},έ:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},ω:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"´":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"±":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},ϋ:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"§":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},Ω:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},ύ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"™":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},ή:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},Θ:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"®":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},Ε:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"³":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},σ:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},ζ:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},θ:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},Ο:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},Γ:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},Έ:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ώ:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},Ϊ:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"½":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},Ρ:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},ª:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"΅":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},Φ:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"⁋":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},Σ:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"›":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"£":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"¬":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},λ:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},τ:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},ξ:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},Λ:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},ΰ:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"·":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},Υ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},μ:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},φ:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"“":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"‘":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},ϊ:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},π:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},ά:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"¤":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},κ:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"‡":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},ψ:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},η:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},C1e="normal",R1e=1189,P1e=-100,N1e="normal",L1e={yMin:-334,xMin:-111,yMax:1189,xMax:1672},D1e=1e3,k1e={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) Μagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"Μagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"Μagenta ltd",font_sub_family_name:"Regular"},O1e=-334,I1e="Helvetiker",B1e=1522,F1e=50,U1e={glyphs:E1e,cssFontWeight:C1e,ascender:R1e,underlinePosition:P1e,cssFontStyle:N1e,boundingBox:L1e,resolution:D1e,original_font_information:k1e,descender:O1e,familyName:I1e,lineHeight:B1e,underlineThickness:F1e},pc=Ji(Ji({},window.THREE?window.THREE:{BoxGeometry:gd,CircleGeometry:FS,DoubleSide:ws,Group:yo,Mesh:zi,MeshLambertMaterial:Wh,TextGeometry:dB,Vector3:pe}),{},{Font:Bxe,TextGeometry:dB}),HW=Hs({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:.002},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:U1e,onChange:function(e,t){t.font=new pc.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r;var s=new pc.CircleGeometry(1,32);t.dataMapper=new Lo(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var a=new pc.MeshLambertMaterial;a.side=ws;var o=new pc.Group;o.add(new pc.Mesh(s,a));var l=new pc.Mesh(void 0,a);o.add(l);var c=new pc.Mesh;return c.visible=!1,l.add(c),o.__globeObjType="label",o})},update:function(e){var t=Tt(e.labelLat),n=Tt(e.labelLng),r=Tt(e.labelAltitude),s=Tt(e.labelText),a=Tt(e.labelSize),o=Tt(e.labelRotation),l=Tt(e.labelColor),c=Tt(e.labelIncludeDot),u=Tt(e.labelDotRadius),h=Tt(e.labelDotOrientation),d=new Set(["right","top","bottom"]),A=2*Math.PI*Cr/360;e.dataMapper.onUpdateObj(function(x,_){var S=Nr(x.children,2),w=S[0],C=S[1],P=Nr(C.children,1),L=P[0],D=l(_),B=Pc(D);C.material.color.set(Cu(D)),C.material.transparent=B<1,C.material.opacity=B;var k=c(_),U=h(_);!k||!d.has(U)&&(U="bottom");var F=k?+u(_)*A:1e-12;w.scale.x=w.scale.y=F;var z=+a(_)*A;if(C.geometry&&C.geometry.dispose(),C.geometry=new pc.TextGeometry(s(_),{font:e.font,size:z,depth:0,bevelEnabled:!0,bevelThickness:0,bevelSize:0,curveSegments:e.labelResolution}),L.geometry&&L.geometry.dispose(),C.geometry.computeBoundingBox(),L.geometry=bP(pc.BoxGeometry,ar(new pc.Vector3().subVectors(C.geometry.boundingBox.max,C.geometry.boundingBox.min).clampScalar(0,1/0).toArray())),U!=="right"&&C.geometry.center(),k){var V=F+z/2;U==="right"&&(C.position.x=V),C.position.y={right:-z/2,top:V+z/2,bottom:-V-z/2}[U]}var W=function(Y){var ee=x.__currentTargetD=Y,se=ee.lat,fe=ee.lng,ne=ee.alt,he=ee.rot,Te=ee.scale;Object.assign(x.position,Xl(se,fe,ne)),x.lookAt(e.scene.localToWorld(new pc.Vector3(0,0,0))),x.rotateY(Math.PI),x.rotateZ(-he*Math.PI/180),x.scale.x=x.scale.y=x.scale.z=Te},X={lat:+t(_),lng:+n(_),alt:+r(_),rot:+o(_),scale:1},J=x.__currentTargetD||Object.assign({},X,{scale:1e-12});Object.keys(X).some(function(K){return J[K]!==X[K]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?W(X):e.tweenGroup.add(new Ua(J).to(X,e.labelsTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(W).start()))}).digest(e.labelsData)}}),z1e=Ji(Ji({},window.THREE?window.THREE:{}),{},{CSS2DObject:bre}),qW=Hs({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlElementVisibilityModifier:{triggerUpdate:!1},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){if(e.dataMapper){var n=t?[t]:e.dataMapper.entries().map(function(r){var s=Nr(r,2),a=s[1];return a}).filter(function(r){return r});n.forEach(function(r){var s=!e.isBehindGlobe||!e.isBehindGlobe(r.position);e.htmlElementVisibilityModifier?(r.visible=!0,e.htmlElementVisibilityModifier(r.element,s)):r.visible=s})}}},init:function(e,t,n){var r=n.tweenGroup;pr(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(s){var a=Tt(t.htmlElement)(s),o=new z1e.CSS2DObject(a);return o.__globeObjType="html",o})},update:function(e,t){var n=this,r=Tt(e.htmlLat),s=Tt(e.htmlLng),a=Tt(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(o,l){var c=function(d){var A=o.__currentTargetD=d,x=A.alt,_=A.lat,S=A.lng;Object.assign(o.position,Xl(_,S,x)),n.updateObjVisibility(o)},u={lat:+r(l),lng:+s(l),alt:+a(l)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!o.__currentTargetD?c(u):e.tweenGroup.add(new Ua(o.__currentTargetD).to(u,e.htmlTransitionDuration).easing(Ms.Quadratic.InOut).onUpdate(c).start())}).digest(e.htmlElementsData)}}),l_=window.THREE?window.THREE:{Group:yo,Mesh:zi,MeshLambertMaterial:Wh,SphereGeometry:Lu},WW=Hs({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new l_.Mesh(new l_.SphereGeometry(1,16,8),new l_.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){pr(e),t.scene=e,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(n){var r=Tt(t.objectThreeObject)(n);t.objectThreeObject===r&&(r=r.clone());var s=new l_.Group;return s.add(r),s.__globeObjType="object",s})},update:function(e,t){var n=Tt(e.objectLat),r=Tt(e.objectLng),s=Tt(e.objectAltitude),a=Tt(e.objectFacesSurface),o=Tt(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(l,c){var u=+n(c),h=+r(c),d=+s(c);Object.assign(l.position,Xl(u,h,d)),a(c)?l.setRotationFromEuler(new ba(Ap(-u),Ap(h),0,"YXZ")):l.rotation.set(0,0,0);var A=l.children[0],x=o(c);x&&A.setRotationFromEuler(new ba(Ap(x.x||0),Ap(x.y||0),Ap(x.z||0)))}).digest(e.objectsData)}}),jW=Hs({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){pr(e),t.scene=e,t.dataMapper=new Lo(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(n){var r=Tt(t.customThreeObject)(n,Cr);return r&&(t.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r})},update:function(e,t){e.customThreeObjectUpdate||pr(e.scene);var n=Tt(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(r,s){return n(r,s,Cr)}).digest(e.customLayerData)}}),c_=window.THREE?window.THREE:{Camera:Zx,Group:yo,Vector2:lt,Vector3:pe},G1e=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],XW=no("globeLayer",PW),V1e=Object.assign.apply(Object,ar(["globeImageUrl","bumpImageUrl","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(i){return ra({},i,XW.linkProp(i))}))),H1e=Object.assign.apply(Object,ar(["globeMaterial"].map(function(i){return ra({},i,XW.linkMethod(i))}))),q1e=no("pointsLayer",NW),W1e=Object.assign.apply(Object,ar(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(i){return ra({},i,q1e.linkProp(i))}))),j1e=no("arcsLayer",DW),X1e=Object.assign.apply(Object,ar(["arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(i){return ra({},i,j1e.linkProp(i))}))),Y1e=no("hexBinLayer",kW),$1e=Object.assign.apply(Object,ar(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(i){return ra({},i,Y1e.linkProp(i))}))),Q1e=no("heatmapsLayer",IW),Z1e=Object.assign.apply(Object,ar(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(i){return ra({},i,Q1e.linkProp(i))}))),K1e=no("hexedPolygonsLayer",FW),J1e=Object.assign.apply(Object,ar(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(i){return ra({},i,K1e.linkProp(i))}))),ebe=no("polygonsLayer",BW),tbe=Object.assign.apply(Object,ar(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(i){return ra({},i,ebe.linkProp(i))}))),nbe=no("pathsLayer",UW),ibe=Object.assign.apply(Object,ar(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(i){return ra({},i,nbe.linkProp(i))}))),rbe=no("tilesLayer",zW),sbe=Object.assign.apply(Object,ar(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(i){return ra({},i,rbe.linkProp(i))}))),abe=no("particlesLayer",GW),obe=Object.assign.apply(Object,ar(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(i){return ra({},i,abe.linkProp(i))}))),lbe=no("ringsLayer",VW),cbe=Object.assign.apply(Object,ar(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(i){return ra({},i,lbe.linkProp(i))}))),ube=no("labelsLayer",HW),hbe=Object.assign.apply(Object,ar(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(i){return ra({},i,ube.linkProp(i))}))),fbe=no("htmlElementsLayer",qW),dbe=Object.assign.apply(Object,ar(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration"].map(function(i){return ra({},i,fbe.linkProp(i))}))),pbe=no("objectsLayer",WW),Abe=Object.assign.apply(Object,ar(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(i){return ra({},i,pbe.linkProp(i))}))),gbe=no("customLayer",jW),mbe=Object.assign.apply(Object,ar(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return ra({},i,gbe.linkProp(i))}))),vbe=Hs({props:Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji(Ji({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new c_.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},V1e),W1e),X1e),$1e),Z1e),tbe),J1e),ibe),sbe),obe),cbe),hbe),dbe),Abe),mbe),methods:Ji({getGlobeRadius:gB,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xl.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return RW.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof c_.Camera?t.position:t,r=gB(),s=void 0;if(e.scene&&n){var a,o,l,c;s=function(h){a===void 0&&(a=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),o===void 0&&(o=a.length()),l===void 0&&(l=Math.sqrt(Math.pow(o,2)-Math.pow(r,2))),c===void 0&&(c=Math.acos(l/o));var d=a.distanceTo(h);if(d<l)return!1;var A=h.length(),x=Math.acos((Math.pow(o,2)+Math.pow(d,2)-Math.pow(A,2))/(2*o*d));return x<c}}e.layersThatNeedUpdatePov.forEach(function(u){return u.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(u){return u.isBehindGlobe(s)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},H1e),stateInit:function(){var e=new VS,t={tweenGroup:e},n={globeLayer:PW(t),pointsLayer:NW(t),arcsLayer:DW(t),hexBinLayer:kW(t),heatmapsLayer:IW(t),polygonsLayer:BW(t),hexedPolygonsLayer:FW(t),pathsLayer:UW(t),tilesLayer:zW(t),particlesLayer:GW(t),ringsLayer:VW(t),labelsLayer:HW(t),htmlElementsLayer:qW(t),objectsLayer:WW(t),customLayer:jW(t)};return Ji(Ji({tweenGroup:e},n),{},{layersThatNeedUpdatePov:Object.values(n).filter(function(r){return r.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(r){return r.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var r=n.animateIn,s=r===void 0?!0:r,a=n.waitForGlobeReady,o=a===void 0?!0:a;pr(e),t.scene=e,t.scene.visible=!1,G1e.forEach(function(c){var u=new c_.Group;t.scene.add(u),t[c](u)});var l=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new Ua({k:1e-6}).to({k:1},600).easing(Ms.Quadratic.Out).onUpdate(function(h){var d=h.k;return t.scene.scale.set(d,d,d)}).start());var u=new c_.Vector3(0,1,0);t.tweenGroup.add(new Ua({rot:Math.PI*2}).to({rot:0},1200).easing(Ms.Quintic.Out).onUpdate(function(h){var d=h.rot;return t.scene.setRotationFromAxisAngle(u,d)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};o?t.globeLayer.onReady(l):l(),this._animationCycle()},update:function(e){}});function ybe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=function(r){function s(){var a;xT(this,s);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=yT(this,s,[].concat(l)),a.__kapsuleInstance=bP(i,[].concat(ar(t?[a]:[]),l)),a}return _T(s,r),bT(s)}(e);return Object.keys(i()).forEach(function(r){return n.prototype[r]=function(){var s,a=(s=this.__kapsuleInstance)[r].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),n}var xbe=window.THREE?window.THREE:{Group:yo},YW=ybe(vbe,xbe.Group,!0);const mC={type:"change"},TP={type:"start"},MP={type:"end"},TB=1e-6,ji={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},u_=new lt,Gf=new lt,bbe=new pe,h_=new pe,vC=new pe,E0=new kc,MB=new pe,f_=new pe,yC=new pe,d_=new pe;class _be extends I6{constructor(e,t=null){super(e,t),this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Gl.ROTATE,MIDDLE:Gl.DOLLY,RIGHT:Gl.PAN},this.target=new pe,this.state=ji.NONE,this.keyState=ji.NONE,this._lastPosition=new pe,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new pe,this._movePrev=new lt,this._moveCurr=new lt,this._lastAxis=new pe,this._zoomStart=new lt,this._zoomEnd=new lt,this._panStart=new lt,this._panEnd=new lt,this._pointers=[],this._pointerPositions={},this._onPointerMove=Sbe.bind(this),this._onPointerDown=wbe.bind(this),this._onPointerUp=Tbe.bind(this),this._onPointerCancel=Mbe.bind(this),this._onContextMenu=Dbe.bind(this),this._onMouseWheel=Lbe.bind(this),this._onKeyDown=Cbe.bind(this),this._onKeyUp=Ebe.bind(this),this._onTouchStart=kbe.bind(this),this._onTouchMove=Obe.bind(this),this._onTouchEnd=Ibe.bind(this),this._onMouseDown=Rbe.bind(this),this._onMouseMove=Pbe.bind(this),this._onMouseUp=Nbe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(t),this.handleResize()),this.update()}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>TB&&(this.dispatchEvent(mC),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>TB||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(mC),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=ji.NONE,this.keyState=ji.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(mC),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(Gf.copy(this._panEnd).sub(this._panStart),Gf.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;Gf.x*=e,Gf.y*=t}Gf.multiplyScalar(this._eye.length()*this.panSpeed),h_.copy(this._eye).cross(this.object.up).setLength(Gf.x),h_.add(bbe.copy(this.object.up).setLength(Gf.y)),this.object.position.add(h_),this.target.add(h_),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(Gf.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){d_.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=d_.length();e?(this._eye.copy(this.object.position).sub(this.target),MB.copy(this._eye).normalize(),f_.copy(this.object.up).normalize(),yC.crossVectors(f_,MB).normalize(),f_.setLength(this._moveCurr.y-this._movePrev.y),yC.setLength(this._moveCurr.x-this._movePrev.x),d_.copy(f_.add(yC)),vC.crossVectors(d_,this._eye).normalize(),e*=this.rotateSpeed,E0.setFromAxisAngle(vC,e),this._eye.applyQuaternion(E0),this.object.up.applyQuaternion(E0),this._lastAxis.copy(vC),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),E0.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(E0),this.object.up.applyQuaternion(E0)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===ji.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Eg.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Eg.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return u_.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),u_}_getMouseOnCircle(e,t){return u_.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),u_}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new lt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function wbe(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i))}function Sbe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function Tbe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchEnd(i):this._onMouseUp(),this._removePointer(i),this._pointers.length===0&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function Mbe(i){this._removePointer(i)}function Ebe(){this.enabled!==!1&&(this.keyState=ji.NONE,window.addEventListener("keydown",this._onKeyDown))}function Cbe(i){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===ji.NONE&&(i.code===this.keys[ji.ROTATE]&&!this.noRotate?this.keyState=ji.ROTATE:i.code===this.keys[ji.ZOOM]&&!this.noZoom?this.keyState=ji.ZOOM:i.code===this.keys[ji.PAN]&&!this.noPan&&(this.keyState=ji.PAN)))}function Rbe(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Gl.DOLLY:this.state=ji.ZOOM;break;case Gl.ROTATE:this.state=ji.ROTATE;break;case Gl.PAN:this.state=ji.PAN;break;default:this.state=ji.NONE}const t=this.keyState!==ji.NONE?this.keyState:this.state;t===ji.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):t===ji.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):t===ji.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(TP)}function Pbe(i){const e=this.keyState!==ji.NONE?this.keyState:this.state;e===ji.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY))):e===ji.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY)):e===ji.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY))}function Nbe(){this.state=ji.NONE,this.dispatchEvent(MP)}function Lbe(i){if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.dispatchEvent(TP),this.dispatchEvent(MP)}}function Dbe(i){this.enabled!==!1&&i.preventDefault()}function kbe(i){switch(this._trackPointer(i),this._pointers.length){case 1:this.state=ji.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=ji.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const n=(this._pointers[0].pageX+this._pointers[1].pageX)/2,r=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(n,r)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(TP)}function Obe(i){switch(this._trackPointer(i),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY));break;default:const e=this._getSecondPointerPosition(i),t=i.pageX-e.x,n=i.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+n*n);const r=(i.pageX+e.x)/2,s=(i.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(r,s));break}}function Ibe(i){switch(this._pointers.length){case 0:this.state=ji.NONE;break;case 1:this.state=ji.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=ji.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==i.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(MP)}const EB={type:"change"},EP={type:"start"},$W={type:"end"},p_=new Qx,CB=new iu,Bbe=Math.cos(70*Eg.DEG2RAD),Os=new pe,fo=2*Math.PI,dr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},xC=1e-6;class Fbe extends I6{constructor(e,t=null){super(e,t),this.state=dr.NONE,this.target=new pe,this.cursor=new pe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Gl.ROTATE,MIDDLE:Gl.DOLLY,RIGHT:Gl.PAN},this.touches={ONE:D0.ROTATE,TWO:D0.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new pe,this._lastQuaternion=new kc,this._lastTargetPosition=new pe,this._quat=new kc().setFromUnitVectors(e.up,new pe(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new qk,this._sphericalDelta=new qk,this._scale=1,this._panOffset=new pe,this._rotateStart=new lt,this._rotateEnd=new lt,this._rotateDelta=new lt,this._panStart=new lt,this._panEnd=new lt,this._panDelta=new lt,this._dollyStart=new lt,this._dollyEnd=new lt,this._dollyDelta=new lt,this._dollyDirection=new pe,this._mouse=new lt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=zbe.bind(this),this._onPointerDown=Ube.bind(this),this._onPointerUp=Gbe.bind(this),this._onContextMenu=Ybe.bind(this),this._onMouseWheel=qbe.bind(this),this._onKeyDown=Wbe.bind(this),this._onTouchStart=jbe.bind(this),this._onTouchMove=Xbe.bind(this),this._onMouseDown=Vbe.bind(this),this._onMouseMove=Hbe.bind(this),this._interceptControlDown=$be.bind(this),this._interceptControlUp=Qbe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(EB),this.update(),this.state=dr.NONE}update(e=null){const t=this.object.position;Os.copy(t).sub(this.target),Os.applyQuaternion(this._quat),this._spherical.setFromVector3(Os),this.autoRotate&&this.state===dr.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=fo:n>Math.PI&&(n-=fo),r<-Math.PI?r+=fo:r>Math.PI&&(r-=fo),n<=r?this._spherical.theta=Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Os.setFromSpherical(this._spherical),Os.applyQuaternion(this._quatInverse),t.copy(this.target).add(Os),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Os.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new pe(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new pe(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(o),this.object.updateMatrixWorld(),a=Os.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(p_.origin.copy(this.object.position),p_.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(p_.direction))<Bbe?this.object.lookAt(this.target):(CB.setFromNormalAndCoplanarPoint(this.object.up,this.target),p_.intersectPlane(CB,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>xC||8*(1-this._lastQuaternion.dot(this.object.quaternion))>xC||this._lastTargetPosition.distanceToSquared(this.target)>xC?(this.dispatchEvent(EB),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?fo/60*this.autoRotateSpeed*e:fo/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Os.setFromMatrixColumn(t,0),Os.multiplyScalar(-e),this._panOffset.add(Os)}_panUp(e,t){this.screenSpacePanning===!0?Os.setFromMatrixColumn(t,1):(Os.setFromMatrixColumn(t,0),Os.crossVectors(this.object.up,Os)),Os.multiplyScalar(e),this._panOffset.add(Os)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;Os.copy(r).sub(this.target);let s=Os.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),r=e-n.left,s=t-n.top,a=n.width,o=n.height;this._mouse.x=r/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(fo*this._rotateDelta.x/t.clientHeight),this._rotateUp(fo*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(fo*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-fo*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(fo*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-fo*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(n,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(fo*this._rotateDelta.x/t.clientHeight),this._rotateUp(fo*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new lt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function Ube(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function zbe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function Gbe(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent($W),this.state=dr.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function Vbe(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Gl.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=dr.DOLLY;break;case Gl.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=dr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=dr.ROTATE}break;case Gl.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=dr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=dr.PAN}break;default:this.state=dr.NONE}this.state!==dr.NONE&&this.dispatchEvent(EP)}function Hbe(i){switch(this.state){case dr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case dr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case dr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function qbe(i){this.enabled===!1||this.enableZoom===!1||this.state!==dr.NONE||(i.preventDefault(),this.dispatchEvent(EP),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent($W))}function Wbe(i){this.enabled!==!1&&this._handleKeyDown(i)}function jbe(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case D0.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=dr.TOUCH_ROTATE;break;case D0.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=dr.TOUCH_PAN;break;default:this.state=dr.NONE}break;case 2:switch(this.touches.TWO){case D0.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=dr.TOUCH_DOLLY_PAN;break;case D0.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=dr.TOUCH_DOLLY_ROTATE;break;default:this.state=dr.NONE}break;default:this.state=dr.NONE}this.state!==dr.NONE&&this.dispatchEvent(EP)}function Xbe(i){switch(this._trackPointer(i),this.state){case dr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case dr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case dr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case dr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=dr.NONE}}function Ybe(i){this.enabled!==!1&&i.preventDefault()}function $be(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Qbe(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Zbe={type:"change"},RB=1e-6,PB=new kc;class Kbe extends I6{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new pe(0,0,0),this._rotationVector=new pe(0,0,0),this._lastQuaternion=new kc,this._lastPosition=new pe,this._status=0,this._onKeyDown=Jbe.bind(this),this._onKeyUp=e2e.bind(this),this._onPointerMove=n2e.bind(this),this._onPointerDown=t2e.bind(this),this._onPointerUp=i2e.bind(this),this._onPointerCancel=r2e.bind(this),this._onContextMenu=s2e.bind(this),t!==null&&this.connect(t)}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,n=e*this.movementSpeed,r=e*this.rollSpeed;t.translateX(this._moveVector.x*n),t.translateY(this._moveVector.y*n),t.translateZ(this._moveVector.z*n),PB.set(this._rotationVector.x*r,this._rotationVector.y*r,this._rotationVector.z*r,1).normalize(),t.quaternion.multiply(PB),(this._lastPosition.distanceToSquared(t.position)>RB||8*(1-this._lastQuaternion.dot(t.quaternion))>RB)&&(this.dispatchEvent(Zbe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function Jbe(i){if(!(i.altKey||this.enabled===!1)){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function e2e(i){if(this.enabled!==!1){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function t2e(i){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(i.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function n2e(i){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,n=e.size[1]/2;this._moveState.yawLeft=-(i.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(i.pageY-e.offset[1]-n)/n,this._updateRotationVector()}}function i2e(i){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(i.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function r2e(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function s2e(i){this.enabled!==!1&&i.preventDefault()}const a2e={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class wT{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const o2e=new e1(-1,1,1,-1,0,1);class l2e extends lr{constructor(){super(),this.setAttribute("position",new ki([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ki([0,2,0,0,2,0],2))}}const c2e=new l2e;class u2e{constructor(e){this._mesh=new zi(c2e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,o2e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class h2e extends wT{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Eo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=OS.clone(e.uniforms),this.material=new Eo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new u2e(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class NB extends wT{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class f2e extends wT{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class d2e{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new lt);this._width=n.width,this._height=n.height,t=new cd(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ss}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new h2e(a2e),this.copyPass.material.blending=To,this.clock=new uU}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const a=this.passes[r];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}NB!==void 0&&(a instanceof NB?n=!0:a instanceof f2e&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new lt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class p2e extends wT{constructor(e,t,n=null,r=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new un}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=r}}function Vs(){return Vs=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Vs.apply(null,arguments)}function sd(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Vg(i,e){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Vg(i,e)}function A2e(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Vg(i,e)}function Px(i){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Px(i)}function g2e(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function CP(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CP=function(){return!!i})()}function m2e(i,e,t){if(CP())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return t&&Vg(r,t.prototype),r}function BR(i){var e=typeof Map=="function"?new Map:void 0;return BR=function(n){if(n===null||!g2e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return m2e(n,arguments,Px(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Vg(r,n)},BR(i)}var uu=function(i){A2e(e,i);function e(t){var n;return n=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,sd(n)}return e}(BR(Error));function bC(i){return Math.round(i*255)}function v2e(i,e,t){return bC(i)+","+bC(e)+","+bC(t)}function lS(i,e,t,n){if(n===void 0&&(n=v2e),e===0)return n(t,t,t);var r=(i%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,a=s*(1-Math.abs(r%2-1)),o=0,l=0,c=0;r>=0&&r<1?(o=s,l=a):r>=1&&r<2?(o=a,l=s):r>=2&&r<3?(l=s,c=a):r>=3&&r<4?(l=a,c=s):r>=4&&r<5?(o=a,c=s):r>=5&&r<6&&(o=s,c=a);var u=t-s/2,h=o+u,d=l+u,A=c+u;return n(h,d,A)}var LB={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function y2e(i){if(typeof i!="string")return i;var e=i.toLowerCase();return LB[e]?"#"+LB[e]:i}var x2e=/^#[a-fA-F0-9]{6}$/,b2e=/^#[a-fA-F0-9]{8}$/,_2e=/^#[a-fA-F0-9]{3}$/,w2e=/^#[a-fA-F0-9]{4}$/,_C=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,S2e=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,T2e=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,M2e=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Hg(i){if(typeof i!="string")throw new uu(3);var e=y2e(i);if(e.match(x2e))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(b2e)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(_2e))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(w2e)){var n=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:n}}var r=_C.exec(e);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var s=S2e.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=T2e.exec(e);if(a){var o=parseInt(""+a[1],10),l=parseInt(""+a[2],10)/100,c=parseInt(""+a[3],10)/100,u="rgb("+lS(o,l,c)+")",h=_C.exec(u);if(!h)throw new uu(4,e,u);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var d=M2e.exec(e.substring(0,50));if(d){var A=parseInt(""+d[1],10),x=parseInt(""+d[2],10)/100,_=parseInt(""+d[3],10)/100,S="rgb("+lS(A,x,_)+")",w=_C.exec(S);if(!w)throw new uu(4,e,S);return{red:parseInt(""+w[1],10),green:parseInt(""+w[2],10),blue:parseInt(""+w[3],10),alpha:parseFloat(""+d[4])>1?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new uu(5)}function E2e(i){var e=i.red/255,t=i.green/255,n=i.blue/255,r=Math.max(e,t,n),s=Math.min(e,t,n),a=(r+s)/2;if(r===s)return i.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:i.alpha}:{hue:0,saturation:0,lightness:a};var o,l=r-s,c=a>.5?l/(2-r-s):l/(r+s);switch(r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;default:o=(e-t)/l+4;break}return o*=60,i.alpha!==void 0?{hue:o,saturation:c,lightness:a,alpha:i.alpha}:{hue:o,saturation:c,lightness:a}}function xd(i){return E2e(Hg(i))}var C2e=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},FR=C2e;function lp(i){var e=i.toString(16);return e.length===1?"0"+e:e}function wC(i){return lp(Math.round(i*255))}function R2e(i,e,t){return FR("#"+wC(i)+wC(e)+wC(t))}function QW(i,e,t){return lS(i,e,t,R2e)}function P2e(i,e,t){if(typeof i=="object"&&e===void 0&&t===void 0)return QW(i.hue,i.saturation,i.lightness);throw new uu(1)}function N2e(i,e,t,n){if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?QW(i.hue,i.saturation,i.lightness):"rgba("+lS(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new uu(2)}function ZW(i,e,t){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number")return FR("#"+lp(i)+lp(e)+lp(t));if(typeof i=="object"&&e===void 0&&t===void 0)return FR("#"+lp(i.red)+lp(i.green)+lp(i.blue));throw new uu(6)}function ST(i,e,t,n){if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?ZW(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")";throw new uu(7)}var L2e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},D2e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},k2e=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},O2e=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function bd(i){if(typeof i!="object")throw new uu(8);if(D2e(i))return ST(i);if(L2e(i))return ZW(i);if(O2e(i))return N2e(i);if(k2e(i))return P2e(i);throw new uu(8)}function KW(i,e,t){return function(){var r=t.concat(Array.prototype.slice.call(arguments));return r.length>=e?i.apply(this,r):KW(i,e,r)}}function hl(i){return KW(i,i.length,[])}function I2e(i,e){if(e==="transparent")return e;var t=xd(e);return bd(Vs({},t,{hue:t.hue+parseFloat(i)}))}hl(I2e);function dm(i,e,t){return Math.max(i,Math.min(e,t))}function B2e(i,e){if(e==="transparent")return e;var t=xd(e);return bd(Vs({},t,{lightness:dm(0,1,t.lightness-parseFloat(i))}))}hl(B2e);function F2e(i,e){if(e==="transparent")return e;var t=xd(e);return bd(Vs({},t,{saturation:dm(0,1,t.saturation-parseFloat(i))}))}hl(F2e);function U2e(i,e){if(e==="transparent")return e;var t=xd(e);return bd(Vs({},t,{lightness:dm(0,1,t.lightness+parseFloat(i))}))}hl(U2e);function z2e(i,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(i===0)return t;var n=Hg(e),r=Vs({},n,{alpha:typeof n.alpha=="number"?n.alpha:1}),s=Hg(t),a=Vs({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),o=r.alpha-a.alpha,l=parseFloat(i)*2-1,c=l*o===-1?l:l+o,u=1+l*o,h=(c/u+1)/2,d=1-h,A={red:Math.floor(r.red*h+a.red*d),green:Math.floor(r.green*h+a.green*d),blue:Math.floor(r.blue*h+a.blue*d),alpha:r.alpha*parseFloat(i)+a.alpha*(1-parseFloat(i))};return ST(A)}var G2e=hl(z2e),JW=G2e;function V2e(i,e){if(e==="transparent")return e;var t=Hg(e),n=typeof t.alpha=="number"?t.alpha:1,r=Vs({},t,{alpha:dm(0,1,(n*100+parseFloat(i)*100)/100)});return ST(r)}var H2e=hl(V2e),q2e=H2e;function W2e(i,e){if(e==="transparent")return e;var t=xd(e);return bd(Vs({},t,{saturation:dm(0,1,t.saturation+parseFloat(i))}))}hl(W2e);function j2e(i,e){return e==="transparent"?e:bd(Vs({},xd(e),{hue:parseFloat(i)}))}hl(j2e);function X2e(i,e){return e==="transparent"?e:bd(Vs({},xd(e),{lightness:parseFloat(i)}))}hl(X2e);function Y2e(i,e){return e==="transparent"?e:bd(Vs({},xd(e),{saturation:parseFloat(i)}))}hl(Y2e);function $2e(i,e){return e==="transparent"?e:JW(parseFloat(i),"rgb(0, 0, 0)",e)}hl($2e);function Q2e(i,e){return e==="transparent"?e:JW(parseFloat(i),"rgb(255, 255, 255)",e)}hl(Q2e);function Z2e(i,e){if(e==="transparent")return e;var t=Hg(e),n=typeof t.alpha=="number"?t.alpha:1,r=Vs({},t,{alpha:dm(0,1,+(n*100-parseFloat(i)*100).toFixed(2)/100)});return ST(r)}hl(Z2e);var UR="http://www.w3.org/1999/xhtml";const DB={svg:"http://www.w3.org/2000/svg",xhtml:UR,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ej(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),DB.hasOwnProperty(e)?{space:DB[e],local:i}:i}function K2e(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===UR&&e.documentElement.namespaceURI===UR?e.createElement(i):e.createElementNS(t,i)}}function J2e(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function tj(i){var e=ej(i);return(e.local?J2e:K2e)(e)}function e_e(){}function nj(i){return i==null?e_e:function(){return this.querySelector(i)}}function t_e(i){typeof i!="function"&&(i=nj(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],a=s.length,o=n[r]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=i.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Yl(n,this._parents)}function n_e(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function i_e(){return[]}function r_e(i){return i==null?i_e:function(){return this.querySelectorAll(i)}}function s_e(i){return function(){return n_e(i.apply(this,arguments))}}function a_e(i){typeof i=="function"?i=s_e(i):i=r_e(i);for(var e=this._groups,t=e.length,n=[],r=[],s=0;s<t;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(n.push(i.call(l,l.__data__,c,a)),r.push(l));return new Yl(n,r)}function o_e(i){return function(){return this.matches(i)}}function ij(i){return function(e){return e.matches(i)}}var l_e=Array.prototype.find;function c_e(i){return function(){return l_e.call(this.children,i)}}function u_e(){return this.firstElementChild}function h_e(i){return this.select(i==null?u_e:c_e(typeof i=="function"?i:ij(i)))}var f_e=Array.prototype.filter;function d_e(){return Array.from(this.children)}function p_e(i){return function(){return f_e.call(this.children,i)}}function A_e(i){return this.selectAll(i==null?d_e:p_e(typeof i=="function"?i:ij(i)))}function g_e(i){typeof i!="function"&&(i=o_e(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],a=s.length,o=n[r]=[],l,c=0;c<a;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&o.push(l);return new Yl(n,this._parents)}function rj(i){return new Array(i.length)}function m_e(){return new Yl(this._enter||this._groups.map(rj),this._parents)}function cS(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}cS.prototype={constructor:cS,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function v_e(i){return function(){return i}}function y_e(i,e,t,n,r,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],n[a]=o):t[a]=new cS(i,s[a]);for(;a<l;++a)(o=e[a])&&(r[a]=o)}function x_e(i,e,t,n,r,s,a){var o,l,c=new Map,u=e.length,h=s.length,d=new Array(u),A;for(o=0;o<u;++o)(l=e[o])&&(d[o]=A=a.call(l,l.__data__,o,e)+"",c.has(A)?r[o]=l:c.set(A,l));for(o=0;o<h;++o)A=a.call(i,s[o],o,s)+"",(l=c.get(A))?(n[o]=l,l.__data__=s[o],c.delete(A)):t[o]=new cS(i,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(d[o])===l&&(r[o]=l)}function b_e(i){return i.__data__}function __e(i,e){if(!arguments.length)return Array.from(this,b_e);var t=e?x_e:y_e,n=this._parents,r=this._groups;typeof i!="function"&&(i=v_e(i));for(var s=r.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=n[c],h=r[c],d=h.length,A=w_e(i.call(u,u&&u.__data__,c,n)),x=A.length,_=o[c]=new Array(x),S=a[c]=new Array(x),w=l[c]=new Array(d);t(u,h,_,S,w,A,e);for(var C=0,P=0,L,D;C<x;++C)if(L=_[C]){for(C>=P&&(P=C+1);!(D=S[P])&&++P<x;);L._next=D||null}}return a=new Yl(a,n),a._enter=o,a._exit=l,a}function w_e(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function S_e(){return new Yl(this._exit||this._groups.map(rj),this._parents)}function T_e(i,e,t){var n=this.enter(),r=this,s=this.exit();return typeof i=="function"?(n=i(n),n&&(n=n.selection())):n=n.append(i+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),n&&r?n.merge(r).order():r}function M_e(i){for(var e=i.selection?i.selection():i,t=this._groups,n=e._groups,r=t.length,s=n.length,a=Math.min(r,s),o=new Array(r),l=0;l<a;++l)for(var c=t[l],u=n[l],h=c.length,d=o[l]=new Array(h),A,x=0;x<h;++x)(A=c[x]||u[x])&&(d[x]=A);for(;l<r;++l)o[l]=t[l];return new Yl(o,this._parents)}function E_e(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var n=i[e],r=n.length-1,s=n[r],a;--r>=0;)(a=n[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function C_e(i){i||(i=R_e);function e(h,d){return h&&d?i(h.__data__,d.__data__):!h-!d}for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s){for(var a=t[s],o=a.length,l=r[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new Yl(r,this._parents).order()}function R_e(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function P_e(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function N_e(){return Array.from(this)}function L_e(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length;r<s;++r){var a=n[r];if(a)return a}return null}function D_e(){let i=0;for(const e of this)++i;return i}function k_e(){return!this.node()}function O_e(i){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length,o;s<a;++s)(o=r[s])&&i.call(o,o.__data__,s,r);return this}function I_e(i){return function(){this.removeAttribute(i)}}function B_e(i){return function(){this.removeAttributeNS(i.space,i.local)}}function F_e(i,e){return function(){this.setAttribute(i,e)}}function U_e(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function z_e(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function G_e(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function V_e(i,e){var t=ej(i);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((e==null?t.local?B_e:I_e:typeof e=="function"?t.local?G_e:z_e:t.local?U_e:F_e)(t,e))}function sj(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function H_e(i){return function(){this.style.removeProperty(i)}}function q_e(i,e,t){return function(){this.style.setProperty(i,e,t)}}function W_e(i,e,t){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(i):this.style.setProperty(i,n,t)}}function j_e(i,e,t){return arguments.length>1?this.each((e==null?H_e:typeof e=="function"?W_e:q_e)(i,e,t??"")):X_e(this.node(),i)}function X_e(i,e){return i.style.getPropertyValue(e)||sj(i).getComputedStyle(i,null).getPropertyValue(e)}function Y_e(i){return function(){delete this[i]}}function $_e(i,e){return function(){this[i]=e}}function Q_e(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function Z_e(i,e){return arguments.length>1?this.each((e==null?Y_e:typeof e=="function"?Q_e:$_e)(i,e)):this.node()[i]}function aj(i){return i.trim().split(/^|\s+/)}function RP(i){return i.classList||new oj(i)}function oj(i){this._node=i,this._names=aj(i.getAttribute("class")||"")}oj.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function lj(i,e){for(var t=RP(i),n=-1,r=e.length;++n<r;)t.add(e[n])}function cj(i,e){for(var t=RP(i),n=-1,r=e.length;++n<r;)t.remove(e[n])}function K_e(i){return function(){lj(this,i)}}function J_e(i){return function(){cj(this,i)}}function ewe(i,e){return function(){(e.apply(this,arguments)?lj:cj)(this,i)}}function twe(i,e){var t=aj(i+"");if(arguments.length<2){for(var n=RP(this.node()),r=-1,s=t.length;++r<s;)if(!n.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?ewe:e?K_e:J_e)(t,e))}function nwe(){this.textContent=""}function iwe(i){return function(){this.textContent=i}}function rwe(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function swe(i){return arguments.length?this.each(i==null?nwe:(typeof i=="function"?rwe:iwe)(i)):this.node().textContent}function awe(){this.innerHTML=""}function owe(i){return function(){this.innerHTML=i}}function lwe(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function cwe(i){return arguments.length?this.each(i==null?awe:(typeof i=="function"?lwe:owe)(i)):this.node().innerHTML}function uwe(){this.nextSibling&&this.parentNode.appendChild(this)}function hwe(){return this.each(uwe)}function fwe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dwe(){return this.each(fwe)}function pwe(i){var e=typeof i=="function"?i:tj(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Awe(){return null}function gwe(i,e){var t=typeof i=="function"?i:tj(i),n=e==null?Awe:typeof e=="function"?e:nj(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function mwe(){var i=this.parentNode;i&&i.removeChild(this)}function vwe(){return this.each(mwe)}function ywe(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function xwe(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function bwe(i){return this.select(i?xwe:ywe)}function _we(i){return arguments.length?this.property("__data__",i):this.node().__data__}function wwe(i){return function(e){i.call(this,e,this.__data__)}}function Swe(i){return i.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Twe(i){return function(){var e=this.__on;if(e){for(var t=0,n=-1,r=e.length,s;t<r;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function Mwe(i,e,t){return function(){var n=this.__on,r,s=wwe(e);if(n){for(var a=0,o=n.length;a<o;++a)if((r=n[a]).type===i.type&&r.name===i.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(i.type,s,t),r={type:i.type,name:i.name,value:e,listener:s,options:t},n?n.push(r):this.__on=[r]}}function Ewe(i,e,t){var n=Swe(i+""),r,s=n.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(r=0,u=o[l];r<s;++r)if((a=n[r]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?Mwe:Twe,r=0;r<s;++r)this.each(o(n[r],e,t));return this}function uj(i,e,t){var n=sj(i),r=n.CustomEvent;typeof r=="function"?r=new r(e,t):(r=n.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),i.dispatchEvent(r)}function Cwe(i,e){return function(){return uj(this,i,e)}}function Rwe(i,e){return function(){return uj(this,i,e.apply(this,arguments))}}function Pwe(i,e){return this.each((typeof e=="function"?Rwe:Cwe)(i,e))}function*Nwe(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length,a;r<s;++r)(a=n[r])&&(yield a)}var Lwe=[null];function Yl(i,e){this._groups=i,this._parents=e}function Dwe(){return this}Yl.prototype={constructor:Yl,select:t_e,selectAll:a_e,selectChild:h_e,selectChildren:A_e,filter:g_e,data:__e,enter:m_e,exit:S_e,join:T_e,merge:M_e,selection:Dwe,order:E_e,sort:C_e,call:P_e,nodes:N_e,node:L_e,size:D_e,empty:k_e,each:O_e,attr:V_e,style:j_e,property:Z_e,classed:twe,text:swe,html:cwe,raise:hwe,lower:dwe,append:pwe,insert:gwe,remove:vwe,clone:bwe,datum:_we,on:Ewe,dispatch:Pwe,[Symbol.iterator]:Nwe};function kwe(i){return typeof i=="string"?new Yl([[document.querySelector(i)]],[document.documentElement]):new Yl([[i]],Lwe)}function Owe(i){let e;for(;e=i.sourceEvent;)i=e;return i}function Iwe(i,e){if(i=Owe(i),e===void 0&&(e=i.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=i.clientX,n.y=i.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop]}}return[i.pageX,i.pageY]}var y1,Gr,hj,fj,gp,kB,dj,pj,Aj,PP,zR,GR,Nx={},gj=[],Bwe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,TT=Array.isArray;function hu(i,e){for(var t in e)i[t]=e[t];return i}function NP(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Fwe(i,e,t){var n,r,s,a={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?y1.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)a[s]===void 0&&(a[s]=i.defaultProps[s]);return Oy(i,a,n,r,null)}function Oy(i,e,t,n,r){var s={type:i,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++hj,__i:-1,__u:0};return r==null&&Gr.vnode!=null&&Gr.vnode(s),s}function MT(i){return i.children}function Y_(i,e){this.props=i,this.context=e}function qg(i,e){if(e==null)return i.__?qg(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?qg(i):null}function mj(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return mj(i)}}function OB(i){(!i.__d&&(i.__d=!0)&&gp.push(i)&&!uS.__r++||kB!=Gr.debounceRendering)&&((kB=Gr.debounceRendering)||dj)(uS)}function uS(){for(var i,e,t,n,r,s,a,o=1;gp.length;)gp.length>o&&gp.sort(pj),i=gp.shift(),o=gp.length,i.__d&&(t=void 0,r=(n=(e=i).__v).__e,s=[],a=[],e.__P&&((t=hu({},n)).__v=n.__v+1,Gr.vnode&&Gr.vnode(t),LP(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??qg(n),!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,xj(s,t,a),t.__e!=r&&mj(t)));uS.__r=0}function vj(i,e,t,n,r,s,a,o,l,c,u){var h,d,A,x,_,S,w=n&&n.__k||gj,C=e.length;for(l=Uwe(t,e,w,l,C),h=0;h<C;h++)(A=t.__k[h])!=null&&(d=A.__i==-1?Nx:w[A.__i]||Nx,A.__i=h,S=LP(i,A,d,r,s,a,o,l,c,u),x=A.__e,A.ref&&d.ref!=A.ref&&(d.ref&&DP(d.ref,null,A),u.push(A.ref,A.__c||x,A)),_==null&&x!=null&&(_=x),4&A.__u||d.__k===A.__k?l=yj(A,l,i):typeof A.type=="function"&&S!==void 0?l=S:x&&(l=x.nextSibling),A.__u&=-7);return t.__e=_,l}function Uwe(i,e,t,n,r){var s,a,o,l,c,u=t.length,h=u,d=0;for(i.__k=new Array(r),s=0;s<r;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=s+d,(a=i.__k[s]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Oy(null,a,null,null,null):TT(a)?Oy(MT,{children:a},null,null,null):a.constructor==null&&a.__b>0?Oy(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=i,a.__b=i.__b+1,o=null,(c=a.__i=zwe(a,t,l,h))!=-1&&(h--,(o=t[c])&&(o.__u|=2)),o==null||o.__v==null?(c==-1&&(r>u?d--:r<u&&d++),typeof a.type!="function"&&(a.__u|=4)):c!=l&&(c==l-1?d--:c==l+1?d++:(c>l?d--:d++,a.__u|=4))):i.__k[s]=null;if(h)for(s=0;s<u;s++)(o=t[s])!=null&&(2&o.__u)==0&&(o.__e==n&&(n=qg(o)),_j(o,o));return n}function yj(i,e,t){var n,r;if(typeof i.type=="function"){for(n=i.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=i,e=yj(n[r],e,t));return e}i.__e!=e&&(e&&i.type&&!t.contains(e)&&(e=qg(i)),t.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function zwe(i,e,t,n){var r,s,a=i.key,o=i.type,l=e[t];if(l===null&&i.key==null||l&&a==l.key&&o==l.type&&(2&l.__u)==0)return t;if(n>(l!=null&&(2&l.__u)==0?1:0))for(r=t-1,s=t+1;r>=0||s<e.length;){if(r>=0){if((l=e[r])&&(2&l.__u)==0&&a==l.key&&o==l.type)return r;r--}if(s<e.length){if((l=e[s])&&(2&l.__u)==0&&a==l.key&&o==l.type)return s;s++}}return-1}function IB(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Bwe.test(e)?t:t+"px"}function A_(i,e,t,n,r){var s,a;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof n=="string"&&(i.style.cssText=n=""),n)for(e in n)t&&e in t||IB(i.style,e,"");if(t)for(e in t)n&&t[e]==n[e]||IB(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Aj,"$1")),a=e.toLowerCase(),e=a in i||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?n?t.u=n.u:(t.u=PP,i.addEventListener(e,s?GR:zR,s)):i.removeEventListener(e,s?GR:zR,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function BB(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=PP++;else if(e.t<t.u)return;return t(Gr.event?Gr.event(e):e)}}}function LP(i,e,t,n,r,s,a,o,l,c){var u,h,d,A,x,_,S,w,C,P,L,D,B,k,U,F,z,V=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),s=[o=e.__e=t.__e]),(u=Gr.__b)&&u(e);e:if(typeof V=="function")try{if(w=e.props,C="prototype"in V&&V.prototype.render,P=(u=V.contextType)&&n[u.__c],L=u?P?P.props.value:u.__:n,t.__c?S=(h=e.__c=t.__c).__=h.__E:(C?e.__c=h=new V(w,L):(e.__c=h=new Y_(w,L),h.constructor=V,h.render=Vwe),P&&P.sub(h),h.props=w,h.state||(h.state={}),h.context=L,h.__n=n,d=h.__d=!0,h.__h=[],h._sb=[]),C&&h.__s==null&&(h.__s=h.state),C&&V.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=hu({},h.__s)),hu(h.__s,V.getDerivedStateFromProps(w,h.__s))),A=h.props,x=h.state,h.__v=e,d)C&&V.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),C&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(C&&V.getDerivedStateFromProps==null&&w!==A&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(w,L),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(w,h.__s,L)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(h.props=w,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(W){W&&(W.__=e)}),D=0;D<h._sb.length;D++)h.__h.push(h._sb[D]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(w,h.__s,L),C&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(A,x,_)})}if(h.context=L,h.props=w,h.__P=i,h.__e=!1,B=Gr.__r,k=0,C){for(h.state=h.__s,h.__d=!1,B&&B(e),u=h.render(h.props,h.state,h.context),U=0;U<h._sb.length;U++)h.__h.push(h._sb[U]);h._sb=[]}else do h.__d=!1,B&&B(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++k<25);h.state=h.__s,h.getChildContext!=null&&(n=hu(hu({},n),h.getChildContext())),C&&!d&&h.getSnapshotBeforeUpdate!=null&&(_=h.getSnapshotBeforeUpdate(A,x)),F=u,u!=null&&u.type===MT&&u.key==null&&(F=bj(u.props.children)),o=vj(i,TT(F)?F:[F],e,t,n,r,s,a,o,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),S&&(h.__E=h.__=null)}catch(W){if(e.__v=null,l||s!=null)if(W.then){for(e.__u|=l?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else for(z=s.length;z--;)NP(s[z]);else e.__e=t.__e,e.__k=t.__k;Gr.__e(W,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=Gwe(t.__e,e,t,n,r,s,a,l,c);return(u=Gr.diffed)&&u(e),128&e.__u?void 0:o}function xj(i,e,t){for(var n=0;n<t.length;n++)DP(t[n],t[++n],t[++n]);Gr.__c&&Gr.__c(e,i),i.some(function(r){try{i=r.__h,r.__h=[],i.some(function(s){s.call(r)})}catch(s){Gr.__e(s,r.__v)}})}function bj(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:TT(i)?i.map(bj):hu({},i)}function Gwe(i,e,t,n,r,s,a,o,l){var c,u,h,d,A,x,_,S=t.props,w=e.props,C=e.type;if(C=="svg"?r="http://www.w3.org/2000/svg":C=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((A=s[c])&&"setAttribute"in A==!!C&&(C?A.localName==C:A.nodeType==3)){i=A,s[c]=null;break}}if(i==null){if(C==null)return document.createTextNode(w);i=document.createElementNS(r,C,w.is&&w),o&&(Gr.__m&&Gr.__m(e,s),o=!1),s=null}if(C==null)S===w||o&&i.data==w||(i.data=w);else{if(s=s&&y1.call(i.childNodes),S=t.props||Nx,!o&&s!=null)for(S={},c=0;c<i.attributes.length;c++)S[(A=i.attributes[c]).name]=A.value;for(c in S)if(A=S[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=A;else if(!(c in w)){if(c=="value"&&"defaultValue"in w||c=="checked"&&"defaultChecked"in w)continue;A_(i,c,null,A,r)}}for(c in w)A=w[c],c=="children"?d=A:c=="dangerouslySetInnerHTML"?u=A:c=="value"?x=A:c=="checked"?_=A:o&&typeof A!="function"||S[c]===A||A_(i,c,A,S[c],r);if(u)o||h&&(u.__html==h.__html||u.__html==i.innerHTML)||(i.innerHTML=u.__html),e.__k=[];else if(h&&(i.innerHTML=""),vj(e.type=="template"?i.content:i,TT(d)?d:[d],e,t,n,C=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,a,s?s[0]:t.__k&&qg(t,0),o,l),s!=null)for(c=s.length;c--;)NP(s[c]);o||(c="value",C=="progress"&&x==null?i.removeAttribute("value"):x!=null&&(x!==i[c]||C=="progress"&&!x||C=="option"&&x!=S[c])&&A_(i,c,x,S[c],r),c="checked",_!=null&&_!=i[c]&&A_(i,c,_,S[c],r))}return i}function DP(i,e,t){try{if(typeof i=="function"){var n=typeof i.__u=="function";n&&i.__u(),n&&e==null||(i.__u=i(e))}else i.current=e}catch(r){Gr.__e(r,t)}}function _j(i,e,t){var n,r;if(Gr.unmount&&Gr.unmount(i),(n=i.ref)&&(n.current&&n.current!=i.__e||DP(n,null,e)),(n=i.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){Gr.__e(s,e)}n.base=n.__P=null}if(n=i.__k)for(r=0;r<n.length;r++)n[r]&&_j(n[r],e,t||typeof i.type!="function");t||NP(i.__e),i.__c=i.__=i.__e=void 0}function Vwe(i,e,t){return this.constructor(i,t)}function Hwe(i,e,t){var n,r,s,a;e==document&&(e=document.documentElement),Gr.__&&Gr.__(i,e),r=(n=!1)?null:e.__k,s=[],a=[],LP(e,i=e.__k=Fwe(MT,null,[i]),r||Nx,Nx,e.namespaceURI,r?null:e.firstChild?y1.call(e.childNodes):null,s,r?r.__e:e.firstChild,n,a),xj(s,i,a)}function wj(i,e,t){var n,r,s,a,o=hu({},i.props);for(s in i.type&&i.type.defaultProps&&(a=i.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?r=e[s]:o[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?y1.call(arguments,2):t),Oy(i.type,o,n||i.key,r||i.ref,null)}y1=gj.slice,Gr={__e:function(i,e,t,n){for(var r,s,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(i)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(i,n||{}),a=r.__d),a)return r.__E=r}catch(o){i=o}throw i}},hj=0,fj=function(i){return i!=null&&i.constructor==null},Y_.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=hu({},this.state),typeof i=="function"&&(i=i(hu({},t),this.props)),i&&hu(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),OB(this))},Y_.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),OB(this))},Y_.prototype.render=MT,gp=[],dj=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pj=function(i,e){return i.__v.__b-e.__v.__b},uS.__r=0,Aj=/(PointerCapture)$|Capture$/i,PP=0,zR=BB(!1),GR=BB(!0);function FB(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function qwe(i){if(Array.isArray(i))return i}function Wwe(i,e,t){return(e=Zwe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function jwe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function Xwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UB(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ywe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(t),!0).forEach(function(n){Wwe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):UB(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function $we(i,e){return qwe(i)||jwe(i,e)||Kwe(i,e)||Xwe()}function Qwe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Zwe(i){var e=Qwe(i,"string");return typeof e=="symbol"?e:e+""}function hS(i){"@babel/helpers - typeof";return hS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hS(i)}function Kwe(i,e){if(i){if(typeof i=="string")return FB(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?FB(i,e):void 0}}var VR=function(e){if(hS(e)!=="object")return e;var t=wj(e);if(t.props){var n;t.props=Ywe({},t.props),t!=null&&(n=t.props)!==null&&n!==void 0&&n.children&&(t.props.children=Array.isArray(t.props.children)?t.props.children.map(VR):VR(t.props.children))}return t},Jwe=function(e){return fj(wj(e))},eSe=function(e,t){delete t.__k,Hwe(VR(e),t)};function tSe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var nSe=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;tSe(nSe);var iSe=Hs({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.style,s=r===void 0?{}:r,a=!!e&&hS(e)==="object"&&!!e.node&&typeof e.node=="function",o=kwe(a?e.node():e);o.style("position")==="static"&&o.style("position","relative"),t.tooltipEl=o.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(c){var u=$we(c,2),h=u[0],d=u[1];return t.tooltipEl.style(h,d)}),t.tooltipEl.style("left","-10000px").style("display","none");var l="tooltip-".concat(Math.round(Math.random()*1e12));t.mouseInside=!1,o.on("mousemove.".concat(l),function(c){t.mouseInside=!0;var u=Iwe(c),h=o.node(),d=h.offsetWidth,A=h.offsetHeight,x=[t.offsetX===null||t.offsetX===void 0?"-".concat(u[0]/d*100,"%"):typeof t.offsetX=="number"?"calc(-50% + ".concat(t.offsetX,"px)"):t.offsetX,t.offsetY===null||t.offsetY===void 0?A>130&&A-u[1]<100?"calc(-100% - 6px)":"21px":typeof t.offsetY=="number"?t.offsetY<0?"calc(-100% - ".concat(Math.abs(t.offsetY),"px)"):"".concat(t.offsetY,"px"):t.offsetY];t.tooltipEl.style("left",u[0]+"px").style("top",u[1]+"px").style("transform","translate(".concat(x.join(","),")")),t.content&&t.tooltipEl.style("display","inline")}),o.on("mouseover.".concat(l),function(){t.mouseInside=!0,t.content&&t.tooltipEl.style("display","inline")}),o.on("mouseout.".concat(l),function(){t.mouseInside=!1,t.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):Jwe(e.content)?(e.tooltipEl.text(""),eSe(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function rSe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var sSe=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;rSe(sSe);function HR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function aSe(i){if(Array.isArray(i))return i}function oSe(i){if(Array.isArray(i))return HR(i)}function lSe(i,e,t){return(e=ASe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function cSe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function uSe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function hSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dSe(i,e){return aSe(i)||uSe(i,e)||Sj(i,e)||hSe()}function ip(i){return oSe(i)||cSe(i)||Sj(i)||fSe()}function pSe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function ASe(i){var e=pSe(i,"string");return typeof e=="symbol"?e:e+""}function Sj(i,e){if(i){if(typeof i=="string")return HR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?HR(i,e):void 0}}var Ur=window.THREE?window.THREE:{WebGLRenderer:xre,Scene:IS,PerspectiveCamera:ia,Raycaster:OJ,SRGBColorSpace:ma,TextureLoader:D6,Vector2:lt,Vector3:pe,Box3:qh,Color:un,Mesh:zi,SphereGeometry:Lu,MeshBasicMaterial:Il,BackSide:sr,Clock:uU},Tj=Hs({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.tooltip&&t.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.enabled&&e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(a){return a.render(e.scene,e.camera)});var t=+new Date;if(e.enablePointerInteraction&&t-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=t;var n=null;if(e.hoverDuringDrag||!e.isPointerDragging){var r=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&r.sort(function(a,o){return e.hoverOrderComparator(a.object,o.object)});var s=r.find(function(a){return e.hoverFilter(a.object)})||null;n=s?s.object:null,e.intersection=s||null}n!==e.hoverObj&&(e.onHover(n,e.hoverObj,e.intersection),e.tooltip.content(n&&Tt(e.tooltipContent)(n,e.intersection)||null),e.hoverObj=n)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,n=t.x,r=t.y;return{x:n,y:r}},cameraPosition:function(e,t,n,r){var s=e.camera;if(t&&e.initialised){var a=t,o=n||{x:0,y:0,z:0};if(!r)u(a),h(o);else{var l=Object.assign({},s.position),c=d();e.tweenGroup.add(new Ua(l).to(a,r).easing(Ms.Quadratic.Out).onUpdate(u).start()),e.tweenGroup.add(new Ua(c).to(o,r/3).easing(Ms.Quadratic.Out).onUpdate(h).start())}return this}return Object.assign({},s.position,{lookAt:d()});function u(A){var x=A.x,_=A.y,S=A.z;x!==void 0&&(s.position.x=x),_!==void 0&&(s.position.y=_),S!==void 0&&(s.position.z=S)}function h(A){var x=new Ur.Vector3(A.x,A.y,A.z);e.controls.target?e.controls.target=x:s.lookAt(x)}function d(){return Object.assign(new Ur.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length,s=new Array(r>3?r-3:0),a=3;a<r;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var a=new Ur.Vector3(0,0,0),o=Math.max.apply(Math,ip(Object.entries(t).map(function(A){var x=dSe(A,2),_=x[0],S=x[1];return Math.max.apply(Math,ip(S.map(function(w){return Math.abs(a[_]-w)})))})))*2,l=(1-r*2/e.height)*s.fov,c=o/Math.atan(l*Math.PI/180),u=c/s.aspect,h=Math.max(c,u);if(h>0){var d=a.clone().sub(s.position).normalize().multiplyScalar(-h);this.cameraPosition(d,a,n)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},n=new Ur.Box3(new Ur.Vector3(0,0,0),new Ur.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach(function(s){return n.expandByObject(s)}),Object.assign.apply(Object,ip(["x","y","z"].map(function(s){return lSe({},s,[n.min[s],n.max[s]])})))):null},getScreenCoords:function(e,t,n,r){var s=new Ur.Vector3(t,n,r);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Ur.Vector2(t/e.width*2-1,-(n/e.height)*2+1),a=new Ur.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(r,new Ur.Vector3))},intersectingObjects:function(e,t,n){var r=new Ur.Vector2(t/e.width*2-1,-(n/e.height)*2+1),s=new Ur.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.params.Points.threshold=e.pointsHoverPrecision,s.setFromCamera(r,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Ur.Scene,camera:new Ur.PerspectiveCamera,clock:new Ur.Clock,tweenGroup:new VS,lastRaycasterCheck:0}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.controlType,s=r===void 0?"trackball":r,a=n.useWebGPU,o=a===void 0?!1:a,l=n.rendererConfig,c=l===void 0?{}:l,u=n.extraRenderers,h=u===void 0?[]:u,d=n.waitForLoadComplete,A=d===void 0?!0:d;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.tooltip=new iSe(t.container),t.pointerPos=new Ur.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(x){return t.container.addEventListener(x,function(_){if(x==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&_.type==="pointermove"&&(_.pressure>0||t.isPointerPressed)&&(_.pointerType!=="touch"||_.movementX===void 0||[_.movementX,_.movementY].some(function(C){return Math.abs(C)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var S=w(t.container);t.pointerPos.x=_.pageX-S.left,t.pointerPos.y=_.pageY-S.top}function w(C){var P=C.getBoundingClientRect(),L=window.pageXOffset||document.documentElement.scrollLeft,D=window.pageYOffset||document.documentElement.scrollTop;return{top:P.top+D,left:P.left+L}}},{passive:!0})}),t.container.addEventListener("pointerup",function(x){t.isPointerPressed&&(t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){x.button===0&&t.onClick(t.hoverObj||null,x,t.intersection),x.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,x,t.intersection)}))},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(x){t.onRightClick&&x.preventDefault()}),t.renderer=new(o?_W:Ur.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},c)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=h,t.extraRenderers.forEach(function(x){x.domElement.style.position="absolute",x.domElement.style.top="0px",x.domElement.style.pointerEvents="none",t.container.appendChild(x.domElement)}),t.postProcessingComposer=new d2e(t.renderer),t.postProcessingComposer.addPass(new p2e(t.scene,t.camera)),t.controls=new{trackball:_be,orbit:Fbe,fly:Kbe}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(ip(t.extraRenderers)).forEach(function(x){return x.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new Ur.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!A,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))){var n,r=e.width,s=e.height;e.container.style.width="".concat(r,"px"),e.container.style.height="".concat(s,"px"),[e.renderer,e.postProcessingComposer].concat(ip(e.extraRenderers)).forEach(function(A){return A.setSize(r,s)}),e.camera.aspect=r/s;var a=e.viewOffset.slice(0,2);a.some(function(A){return A})&&(n=e.camera).setViewOffset.apply(n,[r,s].concat(ip(a),[r,s])),e.camera.updateProjectionMatrix()}if(t.hasOwnProperty("viewOffset")){var o,l=e.width,c=e.height,u=e.viewOffset.slice(0,2);u.some(function(A){return A})?(o=e.camera).setViewOffset.apply(o,[l,c].concat(ip(u),[l,c])):e.camera.clearViewOffset()}if(t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Ur.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var h=Hg(e.backgroundColor).alpha;h===void 0&&(h=1),e.renderer.setClearColor(new Ur.Color(q2e(1,e.backgroundColor)),h)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Ur.TextureLoader().load(e.backgroundImageUrl,function(A){A.colorSpace=Ur.SRGBColorSpace,e.skysphere.material=new Ur.MeshBasicMaterial({map:A,side:Ur.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&d()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&d())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(A){return e.scene.remove(A)}),e.lights.forEach(function(A){return e.scene.add(A)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(A){return e.scene.remove(A)}),e.objects.forEach(function(A){return e.scene.add(A)}));function d(){e.loadComplete=e.scene.visible=!0}}});function gSe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var mSe=`.scene-container .clickable {
  cursor: pointer;
}`;gSe(mSe);function qR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function vSe(i){if(Array.isArray(i))return qR(i)}function x1(i,e,t){return(e=SSe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ySe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function xSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zB(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function mp(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(t),!0).forEach(function(n){x1(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):zB(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function bSe(i,e){if(i==null)return{};var t,n,r=_Se(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function _Se(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function ET(i){return vSe(i)||ySe(i)||TSe(i)||xSe()}function wSe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function SSe(i){var e=wSe(i,"string");return typeof e=="symbol"?e:e+""}function TSe(i,e){if(i){if(typeof i=="string")return qR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qR(i,e):void 0}}function Mj(i,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(r){return{default:t[r](),onChange:function(a,o){o[i][r](a)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var a=s[i],o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];var u=a[r].apply(a,l);return u===a?this:u}}}}var MSe=["rendererConfig","waitForGlobeReady"],ty=mp(mp({},window.THREE?window.THREE:{AmbientLight:lU,DirectionalLight:oU,Vector2:lt,REVISION:nm}),{},{CSS2DRenderer:_re}),Ej=Mj("globe",YW),ESe=Object.assign.apply(Object,ET(["globeImageUrl","bumpImageUrl","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude","onGlobeReady","pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration","arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration","polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration","pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration","heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration","hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration","hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration","tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration","particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture","ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod","labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration","htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration","objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject","customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return x1({},i,Ej.linkProp(i))}))),CSe=Object.assign.apply(Object,ET(["globeMaterial","getGlobeRadius","getCoords","toGeoCoords"].map(function(i){return x1({},i,Ej.linkMethod(i))}))),Cj=Mj("renderObjs",Tj),RSe=Object.assign.apply(Object,ET(["width","height","backgroundColor","backgroundImageUrl","enablePointerInteraction"].map(function(i){return x1({},i,Cj.linkProp(i))}))),PSe=Object.assign.apply(Object,ET(["lights","postProcessingComposer"].map(function(i){return x1({},i,Cj.linkMethod(i))}))),NSe=Hs({props:mp(mp({onZoom:{triggerUpdate:!1},onGlobeClick:{triggerUpdate:!1},onGlobeRightClick:{triggerUpdate:!1},pointLabel:{default:"name",triggerUpdate:!1},onPointClick:{triggerUpdate:!1},onPointRightClick:{triggerUpdate:!1},onPointHover:{triggerUpdate:!1},arcLabel:{default:"name",triggerUpdate:!1},onArcClick:{triggerUpdate:!1},onArcRightClick:{triggerUpdate:!1},onArcHover:{triggerUpdate:!1},polygonLabel:{default:"name",triggerUpdate:!1},onPolygonClick:{triggerUpdate:!1},onPolygonRightClick:{triggerUpdate:!1},onPolygonHover:{triggerUpdate:!1},pathLabel:{default:"name",triggerUpdate:!1},onPathClick:{triggerUpdate:!1},onPathRightClick:{triggerUpdate:!1},onPathHover:{triggerUpdate:!1},onHeatmapClick:{triggerUpdate:!1},onHeatmapRightClick:{triggerUpdate:!1},onHeatmapHover:{triggerUpdate:!1},hexLabel:{triggerUpdate:!1},onHexClick:{triggerUpdate:!1},onHexRightClick:{triggerUpdate:!1},onHexHover:{triggerUpdate:!1},hexPolygonLabel:{triggerUpdate:!1},onHexPolygonClick:{triggerUpdate:!1},onHexPolygonRightClick:{triggerUpdate:!1},onHexPolygonHover:{triggerUpdate:!1},tileLabel:{default:"name",triggerUpdate:!1},onTileClick:{triggerUpdate:!1},onTileRightClick:{triggerUpdate:!1},onTileHover:{triggerUpdate:!1},particleLabel:{default:"name",triggerUpdate:!1},onParticleClick:{triggerUpdate:!1},onParticleRightClick:{triggerUpdate:!1},onParticleHover:{triggerUpdate:!1},labelLabel:{triggerUpdate:!1},onLabelClick:{triggerUpdate:!1},onLabelRightClick:{triggerUpdate:!1},onLabelHover:{triggerUpdate:!1},objectLabel:{default:"name",triggerUpdate:!1},onObjectClick:{triggerUpdate:!1},onObjectRightClick:{triggerUpdate:!1},onObjectHover:{triggerUpdate:!1},customLayerLabel:{default:"name",triggerUpdate:!1},onCustomLayerClick:{triggerUpdate:!1},onCustomLayerRightClick:{triggerUpdate:!1},onCustomLayerHover:{triggerUpdate:!1},pointerEventsFilter:{default:function(){return!0},triggerUpdate:!1},lineHoverPrecision:{default:.2,triggerUpdate:!1,onChange:function(e,t){t.renderObjs.lineHoverPrecision(e),t.renderObjs.pointsHoverPrecision(e)}},globeOffset:{default:[0,0],triggerUpdate:!1,onChange:function(e,t){return Array.isArray(e)&&e.length===2&&t.renderObjs.viewOffset(e.map(function(n){return-n}))}}},ESe),RSe),methods:mp(mp({pauseAnimation:function(e){var t;return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),(t=e.globe)===null||t===void 0||t.pauseAnimation(),this},resumeAnimation:function(e){var t;return e.animationFrameRequestId===null&&this._animationCycle(),(t=e.globe)===null||t===void 0||t.resumeAnimation(),this},_animationCycle:function(e){e.renderObjs.tick(),e.tweenGroup.update(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},pointOfView:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=a();if(t.lat===void 0&&t.lng===void 0&&t.altitude===void 0)return r;var s=Object.assign({},r,t);if(["lat","lng","altitude"].forEach(function(l){return s[l]=+s[l]}),!n)o(s);else{for(;r.lng-s.lng>180;)r.lng-=360;for(;r.lng-s.lng<-180;)r.lng+=360;e.tweenGroup.add(new Ua(r).to(s,n).easing(Ms.Cubic.InOut).onUpdate(o).start())}return this;function a(){return e.globe.toGeoCoords(e.renderObjs.cameraPosition())}function o(l){var c=l.lat,u=l.lng,h=l.altitude;e.renderObjs.cameraPosition(e.globe.getCoords(c,u,h)),e.globe.setPointOfView(e.renderObjs.camera())}},getScreenCoords:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var a=(t=e.globe).getCoords.apply(t,r);return e.renderObjs.getScreenCoords(a.x,a.y,a.z)},toGlobeCoords:function(e,t,n){var r=e.renderObjs.intersectingObjects(t,n).find(function(l){return(l.object.__globeObjType||l.object.parent.__globeObjType)==="globe"});if(!r)return null;var s=e.globe.toGeoCoords(r.point),a=s.lat,o=s.lng;return{lat:a,lng:o}},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},_destructor:function(e){e.globe._destructor(),this.pauseAnimation(),this.pointsData([]),this.arcsData([]),this.polygonsData([]),this.pathsData([]),this.heatmapsData([]),this.hexBinPointsData([]),this.hexPolygonsData([]),this.tilesData([]),this.particlesData([]),this.labelsData([]),this.htmlElementsData([]),this.objectsData([]),this.customLayerData([])}},CSe),PSe),stateInit:function(e){var t=e.rendererConfig,n=e.waitForGlobeReady,r=n===void 0?!0:n,s=bSe(e,MSe),a=new YW(mp({waitForGlobeReady:r},s));return{globe:a,renderObjs:Tj({controlType:"orbit",rendererConfig:t,waitForLoadComplete:r,extraRenderers:[new ty.CSS2DRenderer]}).skyRadius(a.getGlobeRadius()*500).showNavInfo(!1).objects([a]).lights([new ty.AmbientLight(13421772,Math.PI),new ty.DirectionalLight(16777215,.6*Math.PI)]),tweenGroup:new VS}},init:function(e,t){var n=this;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r),t.globe.rendererSize(t.renderObjs.renderer().getSize(new ty.Vector2)),this.pointOfView({altitude:2.5});var s=t.globe.getGlobeRadius(),a=t.renderObjs.controls();t.renderObjs.camera().near=.05,a.minDistance=s+Math.max(.001,t.renderObjs.camera().near*1.1),a.maxDistance=s*100,a.enablePan=!1,a.enableDamping=!0,a.dampingFactor=.1,a.rotateSpeed=.3,a.zoomSpeed=.3,a.zoomToCursor=!0,a.addEventListener("change",function(){a.target.setScalar(0);var c=n.pointOfView();a.rotateSpeed=c.altitude*.3,a.zoomSpeed=Math.sqrt(c.altitude)*.5,t.globe.setPointOfView(t.renderObjs.camera()),t.onZoom&&t.onZoom(c)});var o=function(u){for(var h=u;h&&!h.hasOwnProperty("__globeObjType");)h=h.parent;return h},l={point:function(u){return u},arc:function(u){return u},polygon:function(u){return u.data},path:function(u){return u},heatmap:function(u){return u},hexbin:function(u){return u},hexPolygon:function(u){return u},tile:function(u){return u},particles:function(u,h){return!h||!h.hasOwnProperty("index")||u.length<=h.index?u:u[h.index]},label:function(u){return u},object:function(u){return u},custom:function(u){return u}};ty.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverFilter(function(c){var u=o(c);if(!u)return!1;var h=u.__globeObjType;if(h!=="globe"&&!l.hasOwnProperty(h))return!1;var d=l.hasOwnProperty(h)&&u.__data?l[h](u.__data):null;return["points","hexBinPoints"].some(function(A){return A===h})&&Array.isArray(d)?!1:t.pointerEventsFilter(u,d)}).tooltipContent(function(c,u){var h={point:t.pointLabel,arc:t.arcLabel,polygon:t.polygonLabel,path:t.pathLabel,hexbin:t.hexLabel,hexPolygon:t.hexPolygonLabel,tile:t.tileLabel,particles:t.particleLabel,label:t.labelLabel,object:t.objectLabel,custom:t.customLayerLabel},d=o(c),A=d&&d.__globeObjType;return d&&A&&h.hasOwnProperty(A)&&l.hasOwnProperty(A)&&Tt(h[A])(l[A](d.__data,u))||""}).onHover(function(c,u,h){var d={point:t.onPointHover,arc:t.onArcHover,polygon:t.onPolygonHover,path:t.onPathHover,heatmap:t.onHeatmapHover,hexbin:t.onHexHover,hexPolygon:t.onHexPolygonHover,tile:t.onTileHover,particles:t.onParticleHover,label:t.onLabelHover,object:t.onObjectHover,custom:t.onCustomLayerHover},A={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,particles:t.onParticleClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},x=o(c);if(x&&!d.hasOwnProperty(x.__globeObjType)&&(x=null),x!==t.hoverObj){var _=t.hoverObj?t.hoverObj.__globeObjType:null,S=t.hoverData,w=x?x.__globeObjType:null,C=x?l[w](x.__data,h):null;_&&_!==w&&d[_]&&d[_](null,S||null),w&&d[w]&&d[w](C,_===w?S:null),t.renderObjs.renderer().domElement.classList[w&&A[w]?"add":"remove"]("clickable"),t.hoverObj=x,t.hoverData=C}}).onClick(function(c,u,h){if(c){var d={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,particles:t.onParticleClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},A=o(c),x=A.__globeObjType;if(A&&d.hasOwnProperty(x)&&d[x]){var _=[u],S=h!=null&&h.isVector3?h:h==null?void 0:h.point;if(x==="globe"){var w=n.toGeoCoords(S),C=w.lat,P=w.lng;_.unshift({lat:C,lng:P})}else _.push(n.toGeoCoords(S));l.hasOwnProperty(x)&&_.unshift(l[x](A.__data,h)),d[x].apply(d,_)}}}).onRightClick(function(c,u,h){if(c){var d={globe:t.onGlobeRightClick,point:t.onPointRightClick,arc:t.onArcRightClick,polygon:t.onPolygonRightClick,path:t.onPathRightClick,heatmap:t.onHeatmapRightClick,hexbin:t.onHexRightClick,hexPolygon:t.onHexPolygonRightClick,tile:t.onTileRightClick,particles:t.onParticleRightClick,label:t.onLabelRightClick,object:t.onObjectRightClick,custom:t.onCustomLayerRightClick},A=o(c),x=A.__globeObjType;if(A&&d.hasOwnProperty(x)&&d[x]){var _=[u],S=h!=null&&h.isVector3?h:h==null?void 0:h.point;if(x==="globe"){var w=n.toGeoCoords(S),C=w.lat,P=w.lng;_.unshift({lat:C,lng:P})}else _.push(n.toGeoCoords(S));l.hasOwnProperty(x)&&_.unshift(l[x](A.__data,h)),d[x].apply(d,_)}}}),this._animationCycle()}}),SC={exports:{}},TC,GB;function LSe(){if(GB)return TC;GB=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return TC=i,TC}var MC,VB;function DSe(){if(VB)return MC;VB=1;var i=LSe();function e(){}function t(){}return t.resetWarningCache=e,MC=function(){function n(a,o,l,c,u,h){if(h!==i){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function r(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},MC}var HB;function kSe(){return HB||(HB=1,SC.exports=DSe()()),SC.exports}var OSe=kSe();const Z=jx(OSe);var ISe={width:Z.number,height:Z.number,globeOffset:Z.arrayOf(Z.number),backgroundColor:Z.string,backgroundImageUrl:Z.string,globeImageUrl:Z.string,bumpImageUrl:Z.string,globeTileEngineUrl:Z.func,showGlobe:Z.bool,showGraticules:Z.bool,showAtmosphere:Z.bool,atmosphereColor:Z.string,atmosphereAltitude:Z.number,globeMaterial:Z.object,onGlobeReady:Z.func,onGlobeClick:Z.func,onGlobeRightClick:Z.func,pointsData:Z.arrayOf(Z.object),pointLat:Z.oneOfType([Z.number,Z.string,Z.func]),pointLng:Z.oneOfType([Z.number,Z.string,Z.func]),pointColor:Z.oneOfType([Z.string,Z.func]),pointAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),pointRadius:Z.oneOfType([Z.number,Z.string,Z.func]),pointResolution:Z.number,pointsMerge:Z.bool,pointsTransitionDuration:Z.number,pointLabel:Z.oneOfType([Z.string,Z.func]),onPointClick:Z.func,onPointRightClick:Z.func,onPointHover:Z.func,arcsData:Z.arrayOf(Z.object),arcStartLat:Z.oneOfType([Z.number,Z.string,Z.func]),arcStartLng:Z.oneOfType([Z.number,Z.string,Z.func]),arcEndLat:Z.oneOfType([Z.number,Z.string,Z.func]),arcEndLng:Z.oneOfType([Z.number,Z.string,Z.func]),arcColor:Z.oneOfType([Z.string,Z.arrayOf(Z.string),Z.func]),arcAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),arcAltitudeAutoScale:Z.oneOfType([Z.number,Z.string,Z.func]),arcStroke:Z.oneOfType([Z.number,Z.string,Z.func]),arcCurveResolution:Z.number,arcCircularResolution:Z.number,arcDashLength:Z.oneOfType([Z.number,Z.string,Z.func]),arcDashGap:Z.oneOfType([Z.number,Z.string,Z.func]),arcDashInitialGap:Z.oneOfType([Z.number,Z.string,Z.func]),arcDashAnimateTime:Z.oneOfType([Z.number,Z.string,Z.func]),arcsTransitionDuration:Z.number,arcLabel:Z.oneOfType([Z.string,Z.func]),onArcClick:Z.func,onArcRightClick:Z.func,onArcHover:Z.func,polygonsData:Z.arrayOf(Z.object),polygonGeoJsonGeometry:Z.oneOfType([Z.string,Z.func]),polygonCapColor:Z.oneOfType([Z.string,Z.func]),polygonCapMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),polygonSideColor:Z.oneOfType([Z.string,Z.func]),polygonSideMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),polygonStrokeColor:Z.oneOfType([Z.string,Z.func]),polygonAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),polygonCapCurvatureResolution:Z.oneOfType([Z.number,Z.string,Z.func]),polygonsTransitionDuration:Z.number,polygonLabel:Z.oneOfType([Z.string,Z.func]),onPolygonClick:Z.func,onPolygonRightClick:Z.func,onPolygonHover:Z.func,pathsData:Z.array,pathPoints:Z.oneOfType([Z.array,Z.string,Z.func]),pathPointLat:Z.oneOfType([Z.number,Z.string,Z.func]),pathPointLng:Z.oneOfType([Z.number,Z.string,Z.func]),pathPointAlt:Z.oneOfType([Z.number,Z.string,Z.func]),pathResolution:Z.number,pathColor:Z.oneOfType([Z.string,Z.arrayOf(Z.string),Z.func]),pathStroke:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashLength:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashGap:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashInitialGap:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashAnimateTime:Z.oneOfType([Z.number,Z.string,Z.func]),pathTransitionDuration:Z.number,pathLabel:Z.oneOfType([Z.string,Z.func]),onPathClick:Z.func,onPathRightClick:Z.func,onPathHover:Z.func,heatmapsData:Z.array,heatmapPoints:Z.oneOfType([Z.array,Z.string,Z.func]),heatmapPointLat:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapPointLng:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapPointWeight:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapBandwidth:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapColorFn:Z.oneOfType([Z.string,Z.func]),heatmapColorSaturation:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapBaseAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapTopAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapsTransitionDuration:Z.number,onHeatmapClick:Z.func,onHeatmapRightClick:Z.func,onHeatmapHover:Z.func,hexBinPointsData:Z.arrayOf(Z.object),hexBinPointLat:Z.oneOfType([Z.number,Z.string,Z.func]),hexBinPointLng:Z.oneOfType([Z.number,Z.string,Z.func]),hexBinPointWeight:Z.oneOfType([Z.number,Z.string,Z.func]),hexBinResolution:Z.number,hexMargin:Z.oneOfType([Z.number,Z.func]),hexTopColor:Z.func,hexSideColor:Z.func,hexAltitude:Z.oneOfType([Z.number,Z.func]),hexTopCurvatureResolution:Z.number,hexBinMerge:Z.bool,hexTransitionDuration:Z.number,hexLabel:Z.oneOfType([Z.string,Z.func]),onHexClick:Z.func,onHexRightClick:Z.func,onHexHover:Z.func,hexPolygonsData:Z.arrayOf(Z.object),hexPolygonGeoJsonGeometry:Z.oneOfType([Z.string,Z.func]),hexPolygonColor:Z.oneOfType([Z.string,Z.func]),hexPolygonAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonResolution:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonMargin:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonUseDots:Z.oneOfType([Z.bool,Z.string,Z.func]),hexPolygonCurvatureResolution:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonDotResolution:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonsTransitionDuration:Z.number,hexPolygonLabel:Z.oneOfType([Z.string,Z.func]),onHexPolygonClick:Z.func,onHexPolygonRightClick:Z.func,onHexPolygonHover:Z.func,tilesData:Z.arrayOf(Z.object),tileLat:Z.oneOfType([Z.number,Z.string,Z.func]),tileLng:Z.oneOfType([Z.number,Z.string,Z.func]),tileAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),tileWidth:Z.oneOfType([Z.number,Z.string,Z.func]),tileHeight:Z.oneOfType([Z.number,Z.string,Z.func]),tileUseGlobeProjection:Z.oneOfType([Z.bool,Z.string,Z.func]),tileMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),tileCurvatureResolution:Z.oneOfType([Z.number,Z.string,Z.func]),tilesTransitionDuration:Z.number,tileLabel:Z.oneOfType([Z.string,Z.func]),onTileClick:Z.func,onTileRightClick:Z.func,onTileHover:Z.func,particlesData:Z.arrayOf(Z.object),particlesList:Z.oneOfType([Z.string,Z.func]),particleLat:Z.oneOfType([Z.number,Z.string,Z.func]),particleLng:Z.oneOfType([Z.number,Z.string,Z.func]),particleAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),particlesSize:Z.oneOfType([Z.number,Z.string,Z.func]),particlesSizeAttenuation:Z.oneOfType([Z.bool,Z.string,Z.func]),particlesColor:Z.oneOfType([Z.string,Z.func]),particlesTexture:Z.oneOfType([Z.string,Z.func]),particleLabel:Z.oneOfType([Z.string,Z.func]),onParticleClick:Z.func,onParticleRightClick:Z.func,onParticleHover:Z.func,ringsData:Z.arrayOf(Z.object),ringLat:Z.oneOfType([Z.number,Z.string,Z.func]),ringLng:Z.oneOfType([Z.number,Z.string,Z.func]),ringAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),ringColor:Z.oneOfType([Z.string,Z.arrayOf(Z.string),Z.func]),ringResolution:Z.number,ringMaxRadius:Z.oneOfType([Z.number,Z.string,Z.func]),ringPropagationSpeed:Z.oneOfType([Z.number,Z.string,Z.func]),ringRepeatPeriod:Z.oneOfType([Z.number,Z.string,Z.func]),labelsData:Z.arrayOf(Z.object),labelLat:Z.oneOfType([Z.number,Z.string,Z.func]),labelLng:Z.oneOfType([Z.number,Z.string,Z.func]),labelAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),labelRotation:Z.oneOfType([Z.number,Z.string,Z.func]),labelText:Z.oneOfType([Z.string,Z.func]),labelSize:Z.oneOfType([Z.number,Z.string,Z.func]),labelTypeFace:Z.object,labelColor:Z.oneOfType([Z.string,Z.func]),labelResolution:Z.number,labelIncludeDot:Z.oneOfType([Z.bool,Z.string,Z.func]),labelDotRadius:Z.oneOfType([Z.number,Z.string,Z.func]),labelDotOrientation:Z.oneOfType([Z.string,Z.func]),labelsTransitionDuration:Z.number,labelLabel:Z.oneOfType([Z.string,Z.func]),onLabelClick:Z.func,onLabelRightClick:Z.func,onLabelHover:Z.func,htmlElementsData:Z.arrayOf(Z.object),htmlLat:Z.oneOfType([Z.number,Z.string,Z.func]),htmlLng:Z.oneOfType([Z.number,Z.string,Z.func]),htmlAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),htmlElement:Z.oneOfType([Z.string,Z.func]),htmlElementVisibilityModifier:Z.func,htmlTransitionDuration:Z.number,objectsData:Z.arrayOf(Z.object),objectLat:Z.oneOfType([Z.number,Z.string,Z.func]),objectLng:Z.oneOfType([Z.number,Z.string,Z.func]),objectAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),objectRotation:Z.oneOfType([Z.shape({x:Z.number,y:Z.number,z:Z.number}),Z.string,Z.func]),objectFacesSurface:Z.oneOfType([Z.bool,Z.string,Z.func]),objectThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),objectLabel:Z.oneOfType([Z.string,Z.func]),onObjectClick:Z.func,onObjectRightClick:Z.func,onObjectHover:Z.func,customLayerData:Z.arrayOf(Z.object),customThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),customThreeObjectUpdate:Z.oneOfType([Z.string,Z.func]),customLayerLabel:Z.oneOfType([Z.string,Z.func]),onCustomLayerClick:Z.func,onCustomLayerRightClick:Z.func,onCustomLayerHover:Z.func,enablePointerInteraction:Z.bool,pointerEventsFilter:Z.func,lineHoverPrecision:Z.number,onZoom:Z.func},kP=vZ(NSe,{methodNames:["pauseAnimation","resumeAnimation","pointOfView","lights","scene","camera","renderer","postProcessingComposer","controls","getGlobeRadius","getCoords","getScreenCoords","toGeoCoords","toGlobeCoords"],initPropNames:["animateIn","waitForGlobeReady","rendererConfig"]});kP.displayName="Globe";kP.propTypes=ISe;const BSe=()=>{const[i,e]=ye.useState({width:window.innerWidth,height:window.innerHeight});ye.useEffect(()=>{const r=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]);const t=r=>i.width*(r/100),n=r=>i.height*(r/100);return{width:i.width,height:i.height,getWidthPercent:t,getHeightPercent:n}},FSe=[{type:"Feature",properties:{scalerank:0,natscale:600,labelrank:2,featurecla:"Admin-0 capital",name:"Moscow",namepar:"Moskva",namealt:null,diffascii:0,nameascii:"Moscow",adm0cap:1,capalt:null,capin:null,worldcity:1,megacity:1,sov0name:"Russia",sov_a3:"RUS",adm0name:"Russia",adm0_a3:"RUS",adm1name:"Moskva",iso_a2:"RU",note:null,latitude:55.7521641226,longitude:37.6155228259,changed:0,namediff:0,diffnote:null,pop_max:1e6,pop_min:1e6,pop_other:10585385,rank_max:14,rank_min:14,geonameid:524901,meganame:"Moskva",ls_name:"Moscow",ls_match:1,checkme:0,min_zoom:1.7},bbox:[37.613577,55.75411,37.613577,55.75411],geometry:{type:"Point",coordinates:[37.613577,55.75411]}},{type:"Feature",properties:{scalerank:0,natscale:600,labelrank:2,featurecla:"Admin-0 capital",name:"Ryazan",namepar:"Ryazan",namealt:null,diffascii:0,nameascii:"Ryazan",adm0cap:1,capalt:null,capin:null,worldcity:1,megacity:1,sov0name:"Russia",sov_a3:"RUS",adm0name:"Russia",adm0_a3:"RUS",adm1name:"Ryazan",iso_a2:"RU",note:null,latitude:54.6269,longitude:39.6916,changed:0,namediff:0,diffnote:null,pop_max:1e6,pop_min:1e6,pop_other:10585385,rank_max:14,rank_min:14,geonameid:5249012,meganame:"Ryazan",ls_name:"Ryazan",ls_match:1,checkme:0,min_zoom:1.7},bbox:[39.6916,54.6269,39.6916,54.6269],geometry:{type:"Point",coordinates:[39.6916,54.6269]}}];function ny(i){return typeof i=="object"&&i!==null&&"properties"in i&&typeof i.properties=="object"&&i.properties.latitude!==void 0}const USe=()=>{const{getWidthPercent:i,getHeightPercent:e}=BSe(),t=ye.useRef(void 0),[n]=ye.useState(FSe),r=TF(A=>A.themeGlobe),s=ye.useMemo(()=>i(50),[i]),a=ye.useMemo(()=>e(50),[e]),o=ye.useCallback(A=>ny(A)?A.properties.latitude:0,[]),l=ye.useCallback(A=>ny(A)?A.properties.longitude:0,[]),c=ye.useCallback(A=>ny(A)?A.properties.name:"default",[]),u=ye.useCallback(A=>ny(A)?Math.sqrt(A.properties.pop_max)*4e-4:0,[]),h=ye.useCallback(A=>ny(A)?Math.sqrt(A.properties.pop_max)*4e-4:0,[]),d=ye.useCallback(()=>"rgba(255, 0, 0, 0.75)",[]);return ye.useEffect(()=>{t.current&&t.current.pointOfView({lat:39.6916,lng:54.6269,altitude:2})},[]),Hi.jsx("section",{className:"globe-container",children:Hi.jsx(kP,{ref:t,globeImageUrl:r==="day"?"//cdn.jsdelivr.net/npm/three-globe/example/img/earth-day.jpg":"//cdn.jsdelivr.net/npm/three-globe/example/img/earth-night.jpg",backgroundImageUrl:"//cdn.jsdelivr.net/npm/three-globe/example/img/night-sky.png",labelsData:n,labelLat:o,labelLng:l,labelText:c,labelSize:u,labelDotRadius:h,labelColor:d,labelResolution:3,atmosphereAltitude:.15,width:s,height:a})})},zSe=()=>{const i=ye.useMemo(()=>[{key:"demography-section",href:"#demography-section",title:"Демография"},{key:"globe",href:"#globe",title:"Globe"},{key:"part-3",href:"#part-3",title:"Part-3"}],[]),[e,t]=ye.useState("");return ye.useEffect(()=>{const n=()=>{const r=window.scrollY+100;for(const s of i){const a=document.querySelector(s.href);if(a instanceof HTMLElement){const o=a.offsetTop,l=a.offsetHeight;if(r>=o&&r<o+l){t(s.href);break}}}};return window.addEventListener("scroll",n),n(),()=>{window.removeEventListener("scroll",n)}},[i]),Hi.jsx("nav",{className:"navigation",children:Hi.jsx("ul",{className:"navigation__list",children:i.map(n=>Hi.jsx("a",{href:n.href,className:`navigation__item ${e===n.href?"navigation__item--active":""}`,onClick:r=>{r.preventDefault();const s=document.querySelector(n.href);s instanceof HTMLElement&&s.scrollIntoView({behavior:"smooth"})},children:n.title},n.key))})})};/*!
 * ApexCharts v4.7.0
 * (c) 2018-2025 ApexCharts
 * Released under the MIT License.
 */function WR(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Rj(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function qB(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Lj(n.key),n)}}function Jt(i,e,t){return e&&qB(i.prototype,e),t&&qB(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function xy(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=OP(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw s}}}}function b1(i){var e=Pj();return function(){var t,n=dS(i);if(e){var r=dS(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(s,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rj(s)}(this,t)}}function fS(i,e,t){return(e=Lj(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function dS(i){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dS(i)}function _1(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&jR(i,e)}function Pj(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pj=function(){return!!i})()}function WB(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Bt(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(t),!0).forEach(function(n){fS(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):WB(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function jR(i,e){return jR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},jR(i,e)}function Nj(i,e){return function(t){if(Array.isArray(t))return t}(i)||function(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,o,l,c=[],u=!0,h=!1;try{if(o=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(s=o.call(r)).done)&&(c.push(s.value),c.length!==n);u=!0);}catch(d){h=!0,a=d}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(h)throw a}}return c}}(i,e)||OP(i,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Us(i){return function(e){if(Array.isArray(e))return WR(e)}(i)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||OP(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lj(i){var e=function(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(i,"string");return typeof e=="symbol"?e:e+""}function Wg(i){return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(i)}function OP(i,e){if(i){if(typeof i=="string")return WR(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?WR(i,e):void 0}}var Ne=function(){function i(){Kt(this,i)}return Jt(i,[{key:"shadeRGBColor",value:function(e,t){var n=t.split(","),r=e<0?0:255,s=e<0?-1*e:e,a=parseInt(n[0].slice(4),10),o=parseInt(n[1],10),l=parseInt(n[2],10);return"rgb("+(Math.round((r-a)*s)+a)+","+(Math.round((r-o)*s)+o)+","+(Math.round((r-l)*s)+l)+")"}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(t.slice(1),16),r=e<0?0:255,s=e<0?-1*e:e,a=n>>16,o=n>>8&255,l=255&n;return"#"+(16777216+65536*(Math.round((r-a)*s)+a)+256*(Math.round((r-o)*s)+o)+(Math.round((r-l)*s)+l)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return i.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&Wg(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"listToArray",value:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n}},{key:"extend",value:function(e,t){var n=this;typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(s),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)l.hasOwnProperty(c)&&(a[c]=l[c])}return a});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(s){n.isObject(t[s])&&s in e?r[s]=n.extend(e[s],t[s]):Object.assign(r,fS({},s,t[s]))}),r}},{key:"extendArray",value:function(e,t){var n=[];return e.map(function(r){n.push(i.extend(t,r))}),e=n}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e===null||Wg(e)!=="object")return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){t=[],n.set(e,t);for(var r=0;r<e.length;r++)t[r]=this.clone(e[r],n)}else if(e instanceof Date)t=new Date(e.getTime());else for(var s in t={},n.set(e,t),e)e.hasOwnProperty(s)&&(t[s]=this.clone(e[s],n));return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){return e.toString().includes("e")?Math.round(e):e}},{key:"elementExists",value:function(e){return!(!e||!e.isConnected)}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),n=e.clientHeight,r=e.clientWidth;return n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[r-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce(function(t,n){return Array.isArray(n)&&(n=n.reduce(function(r,s){return r.length>s.length?r:s})),t.length>n.length?t:n},0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var n=e.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var r=0;r<n.length;r++)n[r]=parseInt(n[r].length===1?n[r]+n[r]:n[r],16);return t!==void 0&&n.push(t),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var n=[],r=2*Math.PI/t,s=0;s<t;s++){var a={};a.x=e*Math.sin(s*r),a.y=-e*Math.cos(s*r),n.push(a)}return n}},{key:"polarToCartesian",value:function(e,t,n,r){var s=(r-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",n=e.toString().slice();return n=n.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style.key=t[n])}},{key:"preciseAddition",value:function(e,t){var n=(String(e).split(".")[1]||"").length,r=(String(t).split(".")[1]||"").length,s=Math.pow(10,Math.max(n,r));return(Math.round(e*s)+Math.round(t*s))/s}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{key:"getGCD",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=Math.pow(10,n-Math.floor(Math.log10(Math.max(e,t))));for(e=Math.round(Math.abs(e)*r),t=Math.round(Math.abs(t)*r);t;){var s=t;t=e%t,e=s}return e/r}},{key:"getPrimeFactors",value:function(e){for(var t=[],n=2;e>=2;)e%n==0?(t.push(n),e/=n):n++;return t}},{key:"mod",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=Math.pow(10,n-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*r))%(t=Math.round(Math.abs(t)*r))/r}}]),i}(),pm=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"animateLine",value:function(e,t,n,r){e.attr(t).animate(r).attr(n)}},{key:"animateMarker",value:function(e,t,n,r){e.attr({opacity:0}).animate(t).attr({opacity:1}).after(function(){r()})}},{key:"animateRect",value:function(e,t,n,r,s){e.attr(t).animate(r).attr(n).after(function(){return s()})}},{key:"animatePathsGradually",value:function(e){var t=e.el,n=e.realIndex,r=e.j,s=e.fill,a=e.pathFrom,o=e.pathTo,l=e.speed,c=e.delay,u=this.w,h=0;u.config.chart.animations.animateGradually.enabled&&(h=u.config.chart.animations.animateGradually.delay),u.config.chart.animations.dynamicAnimation.enabled&&u.globals.dataChanged&&u.config.chart.type!=="bar"&&(h=0),this.morphSVG(t,n,r,u.config.chart.type!=="line"||u.globals.comboCharts?s:"stroke",a,o,l,c*h)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,n,r,s,a,o,l){var c=this,u=this.w;s||(s=e.attr("pathFrom")),a||(a=e.attr("pathTo"));var h=function(d){return u.config.chart.type==="radar"&&(o=1),"M 0 ".concat(u.globals.gridHeight)};(!s||s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s=h()),(!a.trim()||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=h()),u.globals.shouldAnimate||(o=1),e.plot(s).animate(1,l).plot(s).animate(o,l).plot(a).after(function(){Ne.isNumber(n)?n===u.globals.series[u.globals.maxValsInArrayIndex].length-2&&u.globals.shouldAnimate&&c.animationCompleted(e):r!=="none"&&u.globals.shouldAnimate&&(!u.globals.comboCharts&&t===u.globals.series.length-1||u.globals.comboCharts)&&c.animationCompleted(e),c.showDelayedElements()})}}]),i}();const XR={},Dj=[];function Ai(i,e){if(Array.isArray(i))for(const t of i)Ai(t,e);else if(typeof i!="object")kj(Object.getOwnPropertyNames(e)),XR[i]=Object.assign(XR[i]||{},e);else for(const t in i)Ai(t,i[t])}function po(i){return XR[i]||{}}function kj(i){Dj.push(...i)}function IP(i,e){let t;const n=i.length,r=[];for(t=0;t<n;t++)r.push(e(i[t]));return r}function EC(i){return i%360*Math.PI/180}function Am(i){return i.charAt(0).toUpperCase()+i.slice(1)}function gm(i,e,t,n){return e!=null&&t!=null||(n=n||i.bbox(),e==null?e=n.width/n.height*t:t==null&&(t=n.height/n.width*e)),{width:e,height:t}}function YR(i,e){const t=i.origin;let n=i.ox!=null?i.ox:i.originX!=null?i.originX:"center",r=i.oy!=null?i.oy:i.originY!=null?i.originY:"center";t!=null&&([n,r]=Array.isArray(t)?t:typeof t=="object"?[t.x,t.y]:[t,t]);const s=typeof n=="string",a=typeof r=="string";if(s||a){const{height:o,width:l,x:c,y:u}=e.bbox();s&&(n=n.includes("left")?c:n.includes("right")?c+l:c+l/2),a&&(r=r.includes("top")?u:r.includes("bottom")?u+o:u+o/2)}return[n,r]}const GSe=new Set(["desc","metadata","title"]),$R=i=>GSe.has(i.nodeName),Oj=(i,e,t={})=>{const n={...e};for(const r in n)n[r].valueOf()===t[r]&&delete n[r];Object.keys(n).length?i.node.setAttribute("data-svgjs",JSON.stringify(n)):(i.node.removeAttribute("data-svgjs"),i.node.removeAttribute("svgjs:data"))},BP="http://www.w3.org/2000/svg",CC="http://www.w3.org/2000/xmlns/",mm="http://www.w3.org/1999/xlink",Di={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function w1(){return Di.window}let FP=class{};const Fp={},UP="___SYMBOL___ROOT___";function Lx(i,e=BP){return Di.document.createElementNS(e,i)}function Ja(i,e=!1){if(i instanceof FP)return i;if(typeof i=="object")return RC(i);if(i==null)return new Fp[UP];if(typeof i=="string"&&i.charAt(0)!=="<")return RC(Di.document.querySelector(i));const t=e?Di.document.createElement("div"):Lx("svg");return t.innerHTML=i,i=RC(t.firstChild),t.removeChild(t.firstChild),i}function mr(i,e){return e&&(e instanceof Di.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:Lx(i)}function Ol(i){if(!i)return null;if(i.instance instanceof FP)return i.instance;if(i.nodeName==="#document-fragment")return new Fp.Fragment(i);let e=Am(i.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":Fp[e]||(e="Dom"),new Fp[e](i)}let RC=Ol;function Oi(i,e=i.name,t=!1){return Fp[e]=i,t&&(Fp[UP]=i),kj(Object.getOwnPropertyNames(i.prototype)),i}let VSe=1e3;function Ij(i){return"Svgjs"+Am(i)+VSe++}function Bj(i){for(let e=i.children.length-1;e>=0;e--)Bj(i.children[e]);return i.id&&(i.id=Ij(i.nodeName)),i}function On(i,e){let t,n;for(n=(i=Array.isArray(i)?i:[i]).length-1;n>=0;n--)for(t in e)i[n].prototype[t]=e[t]}function gr(i){return function(...e){const t=e[e.length-1];return!t||t.constructor!==Object||t instanceof Array?i.apply(this,e):i.apply(this,e.slice(0,-1)).attr(t)}}Ai("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const i=this.position();return this.parent().add(this.remove(),i+1),this},backward:function(){const i=this.position();return this.parent().add(this.remove(),i?i-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(i){(i=Ja(i)).remove();const e=this.position();return this.parent().add(i,e),this},after:function(i){(i=Ja(i)).remove();const e=this.position();return this.parent().add(i,e+1),this},insertBefore:function(i){return(i=Ja(i)).before(this),this},insertAfter:function(i){return(i=Ja(i)).after(this),this}});const Fj=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,HSe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,qSe=/rgb\((\d+),(\d+),(\d+)\)/,WSe=/(#[a-z_][a-z0-9\-_]*)/i,jSe=/\)\s*,?\s*/,XSe=/\s/g,jB=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,XB=/^rgb\(/,YB=/^(\s+)?$/,$B=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,YSe=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Xh=/[\s,]+/,zP=/[MLHVCSQTAZ]/i;function $Se(i){const e=Math.round(i),t=Math.max(0,Math.min(255,e)).toString(16);return t.length===1?"0"+t:t}function C0(i,e){for(let t=e.length;t--;)if(i[e[t]]==null)return!1;return!0}function PC(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+(e-i)*(2/3-t)*6:i}Ai("Dom",{classes:function(){const i=this.attr("class");return i==null?[]:i.trim().split(Xh)},hasClass:function(i){return this.classes().indexOf(i)!==-1},addClass:function(i){if(!this.hasClass(i)){const e=this.classes();e.push(i),this.attr("class",e.join(" "))}return this},removeClass:function(i){return this.hasClass(i)&&this.attr("class",this.classes().filter(function(e){return e!==i}).join(" ")),this},toggleClass:function(i){return this.hasClass(i)?this.removeClass(i):this.addClass(i)}}),Ai("Dom",{css:function(i,e){const t={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(n){return!!n.length}).forEach(function(n){const r=n.split(/\s*:\s*/);t[r[0]]=r[1]}),t;if(arguments.length<2){if(Array.isArray(i)){for(const n of i){const r=n;t[n]=this.node.style.getPropertyValue(r)}return t}if(typeof i=="string")return this.node.style.getPropertyValue(i);if(typeof i=="object")for(const n in i)this.node.style.setProperty(n,i[n]==null||YB.test(i[n])?"":i[n])}return arguments.length===2&&this.node.style.setProperty(i,e==null||YB.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),Ai("Dom",{data:function(i,e,t){if(i==null)return this.data(IP(function(n,r){let s;const a=n.length,o=[];for(s=0;s<a;s++)r(n[s])&&o.push(n[s]);return o}(this.node.attributes,n=>n.nodeName.indexOf("data-")===0),n=>n.nodeName.slice(5)));if(i instanceof Array){const n={};for(const r of i)n[r]=this.data(r);return n}if(typeof i=="object")for(e in i)this.data(e,i[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+i))}catch{return this.attr("data-"+i)}else this.attr("data-"+i,e===null?null:t===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}}),Ai("Dom",{remember:function(i,e){if(typeof arguments[0]=="object")for(const t in i)this.remember(t,i[t]);else{if(arguments.length===1)return this.memory()[i];this.memory()[i]=e}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let i=arguments.length-1;i>=0;i--)delete this.memory()[arguments[i]];return this},memory:function(){return this._memory=this._memory||{}}});class rr{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof rr||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",t){const{random:n,round:r,sin:s,PI:a}=Math;if(e==="vibrant"){const o=24*n()+57,l=38*n()+45,c=360*n();return new rr(o,l,c,"lch")}if(e==="sine"){const o=r(80*s(2*a*(t=t??n())/.5+.01)+150),l=r(50*s(2*a*t/.5+4.6)+200),c=r(100*s(2*a*t/.5+2.3)+150);return new rr(o,l,c)}if(e==="pastel"){const o=8*n()+86,l=17*n()+9,c=360*n();return new rr(o,l,c,"lch")}if(e==="dark"){const o=10+10*n(),l=50*n()+86,c=360*n();return new rr(o,l,c,"lch")}if(e==="rgb"){const o=255*n(),l=255*n(),c=255*n();return new rr(o,l,c)}if(e==="lab"){const o=100*n(),l=256*n()-128,c=256*n()-128;return new rr(o,l,c,"lab")}if(e==="grey"){const o=255*n();return new rr(o,o,o)}throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(jB.test(e)||XB.test(e))}cmyk(){const{_a:e,_b:t,_c:n}=this.rgb(),[r,s,a]=[e,t,n].map(l=>l/255),o=Math.min(1-r,1-s,1-a);return o===1?new rr(0,0,0,1,"cmyk"):new rr((1-r-o)/(1-o),(1-s-o)/(1-o),(1-a-o)/(1-o),o,"cmyk")}hsl(){const{_a:e,_b:t,_c:n}=this.rgb(),[r,s,a]=[e,t,n].map(d=>d/255),o=Math.max(r,s,a),l=Math.min(r,s,a),c=(o+l)/2,u=o===l,h=o-l;return new rr(360*(u?0:o===r?((s-a)/h+(s<a?6:0))/6:o===s?((a-r)/h+2)/6:o===a?((r-s)/h+4)/6:0),100*(u?0:c>.5?h/(2-o-l):h/(o+l)),100*c,"hsl")}init(e=0,t=0,n=0,r=0,s="rgb"){if(e=e||0,this.space)for(const h in this.space)delete this[this.space[h]];if(typeof e=="number")s=typeof r=="string"?r:s,r=typeof r=="string"?0:r,Object.assign(this,{_a:e,_b:t,_c:n,_d:r,space:s});else if(e instanceof Array)this.space=t||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const h=function(d,A){const x=C0(d,"rgb")?{_a:d.r,_b:d.g,_c:d.b,_d:0,space:"rgb"}:C0(d,"xyz")?{_a:d.x,_b:d.y,_c:d.z,_d:0,space:"xyz"}:C0(d,"hsl")?{_a:d.h,_b:d.s,_c:d.l,_d:0,space:"hsl"}:C0(d,"lab")?{_a:d.l,_b:d.a,_c:d.b,_d:0,space:"lab"}:C0(d,"lch")?{_a:d.l,_b:d.c,_c:d.h,_d:0,space:"lch"}:C0(d,"cmyk")?{_a:d.c,_b:d.m,_c:d.y,_d:d.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return x.space=A||x.space,x}(e,t);Object.assign(this,h)}else if(typeof e=="string")if(XB.test(e)){const h=e.replace(XSe,""),[d,A,x]=qSe.exec(h).slice(1,4).map(_=>parseInt(_));Object.assign(this,{_a:d,_b:A,_c:x,_d:0,space:"rgb"})}else{if(!jB.test(e))throw Error("Unsupported string format, can't construct Color");{const h=_=>parseInt(_,16),[,d,A,x]=HSe.exec(function(_){return _.length===4?["#",_.substring(1,2),_.substring(1,2),_.substring(2,3),_.substring(2,3),_.substring(3,4),_.substring(3,4)].join(""):_}(e)).map(h);Object.assign(this,{_a:d,_b:A,_c:x,_d:0,space:"rgb"})}}const{_a:a,_b:o,_c:l,_d:c}=this,u=this.space==="rgb"?{r:a,g:o,b:l}:this.space==="xyz"?{x:a,y:o,z:l}:this.space==="hsl"?{h:a,s:o,l}:this.space==="lab"?{l:a,a:o,b:l}:this.space==="lch"?{l:a,c:o,h:l}:this.space==="cmyk"?{c:a,m:o,y:l,k:c}:{};Object.assign(this,u)}lab(){const{x:e,y:t,z:n}=this.xyz();return new rr(116*t-16,500*(e-t),200*(t-n),"lab")}lch(){const{l:e,a:t,b:n}=this.lab(),r=Math.sqrt(t**2+n**2);let s=180*Math.atan2(n,t)/Math.PI;return s<0&&(s*=-1,s=360-s),new rr(e,r,s,"lch")}rgb(){if(this.space==="rgb")return this;if((e=this.space)==="lab"||e==="xyz"||e==="lch"){let{x:t,y:n,z:r}=this;if(this.space==="lab"||this.space==="lch"){let{l:A,a:x,b:_}=this;if(this.space==="lch"){const{c:B,h:k}=this,U=Math.PI/180;x=B*Math.cos(U*k),_=B*Math.sin(U*k)}const S=(A+16)/116,w=x/500+S,C=S-_/200,P=16/116,L=.008856,D=7.787;t=.95047*(w**3>L?w**3:(w-P)/D),n=1*(S**3>L?S**3:(S-P)/D),r=1.08883*(C**3>L?C**3:(C-P)/D)}const s=3.2406*t+-1.5372*n+-.4986*r,a=-.9689*t+1.8758*n+.0415*r,o=.0557*t+-.204*n+1.057*r,l=Math.pow,c=.0031308,u=s>c?1.055*l(s,1/2.4)-.055:12.92*s,h=a>c?1.055*l(a,1/2.4)-.055:12.92*a,d=o>c?1.055*l(o,1/2.4)-.055:12.92*o;return new rr(255*u,255*h,255*d)}if(this.space==="hsl"){let{h:t,s:n,l:r}=this;if(t/=360,n/=100,r/=100,n===0)return r*=255,new rr(r,r,r);const s=r<.5?r*(1+n):r+n-r*n,a=2*r-s,o=255*PC(a,s,t+1/3),l=255*PC(a,s,t),c=255*PC(a,s,t-1/3);return new rr(o,l,c)}if(this.space==="cmyk"){const{c:t,m:n,y:r,k:s}=this,a=255*(1-Math.min(1,t*(1-s)+s)),o=255*(1-Math.min(1,n*(1-s)+s)),l=255*(1-Math.min(1,r*(1-s)+s));return new rr(a,o,l)}return this;var e}toArray(){const{_a:e,_b:t,_c:n,_d:r,space:s}=this;return[e,t,n,r,s]}toHex(){const[e,t,n]=this._clamped().map($Se);return`#${e}${t}${n}`}toRgb(){const[e,t,n]=this._clamped();return`rgb(${e},${t},${n})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:n}=this.rgb(),[r,s,a]=[e,t,n].map(S=>S/255),o=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,c=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,u=(.4124*o+.3576*l+.1805*c)/.95047,h=(.2126*o+.7152*l+.0722*c)/1,d=(.0193*o+.1192*l+.9505*c)/1.08883,A=u>.008856?Math.pow(u,1/3):7.787*u+16/116,x=h>.008856?Math.pow(h,1/3):7.787*h+16/116,_=d>.008856?Math.pow(d,1/3):7.787*d+16/116;return new rr(A,x,_,"xyz")}_clamped(){const{_a:e,_b:t,_c:n}=this.rgb(),{max:r,min:s,round:a}=Math;return[e,t,n].map(o=>r(0,s(a(o),255)))}}class Wi{constructor(...e){this.init(...e)}clone(){return new Wi(this)}init(e,t){const s=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:t};return this.x=s.x==null?0:s.x,this.y=s.y==null?0:s.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){Tn.isMatrixLike(e)||(e=new Tn(e));const{x:t,y:n}=this;return this.x=e.a*t+e.c*n+e.e,this.y=e.b*t+e.d*n+e.f,this}}function R0(i,e,t){return Math.abs(e-i)<1e-6}class Tn{constructor(...e){this.init(...e)}static formatTransforms(e){const t=e.flip==="both"||e.flip===!0,n=e.flip&&(t||e.flip==="x")?-1:1,r=e.flip&&(t||e.flip==="y")?-1:1,s=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,a=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,o=e.scale&&e.scale.length?e.scale[0]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleX)?e.scaleX*n:n,l=e.scale&&e.scale.length?e.scale[1]*r:isFinite(e.scale)?e.scale*r:isFinite(e.scaleY)?e.scaleY*r:r,c=e.shear||0,u=e.rotate||e.theta||0,h=new Wi(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),d=h.x,A=h.y,x=new Wi(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),_=x.x,S=x.y,w=new Wi(e.translate||e.tx||e.translateX,e.ty||e.translateY),C=w.x,P=w.y,L=new Wi(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:o,scaleY:l,skewX:s,skewY:a,shear:c,theta:u,rx:L.x,ry:L.y,tx:C,ty:P,ox:d,oy:A,px:_,py:S}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,t,n){const r=e.a*t.a+e.c*t.b,s=e.b*t.a+e.d*t.b,a=e.a*t.c+e.c*t.d,o=e.b*t.c+e.d*t.d,l=e.e+e.a*t.e+e.c*t.f,c=e.f+e.b*t.e+e.d*t.f;return n.a=r,n.b=s,n.c=a,n.d=o,n.e=l,n.f=c,n}around(e,t,n){return this.clone().aroundO(e,t,n)}aroundO(e,t,n){const r=e||0,s=t||0;return this.translateO(-r,-s).lmultiplyO(n).translateO(r,s)}clone(){return new Tn(this)}decompose(e=0,t=0){const n=this.a,r=this.b,s=this.c,a=this.d,o=this.e,l=this.f,c=n*a-r*s,u=c>0?1:-1,h=u*Math.sqrt(n*n+r*r),d=Math.atan2(u*r,u*n),A=180/Math.PI*d,x=Math.cos(d),_=Math.sin(d),S=(n*s+r*a)/c,w=s*h/(S*n-r)||a*h/(S*r+n);return{scaleX:h,scaleY:w,shear:S,rotate:A,translateX:o-e+e*x*h+t*(S*x*h-_*w),translateY:l-t+e*_*h+t*(S*_*h+x*w),originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new Tn(e);return R0(this.a,t.a)&&R0(this.b,t.b)&&R0(this.c,t.c)&&R0(this.d,t.d)&&R0(this.e,t.e)&&R0(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return e==="x"?this.scaleO(-1,1,t,0):e==="y"?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=Tn.fromArray([1,0,0,1,0,0]);return e=e instanceof _a?e.matrixify():typeof e=="string"?Tn.fromArray(e.split(Xh).map(parseFloat)):Array.isArray(e)?Tn.fromArray(e):typeof e=="object"&&Tn.isMatrixLike(e)?e:typeof e=="object"?new Tn().transform(e):arguments.length===6?Tn.fromArray([].slice.call(arguments)):t,this.a=e.a!=null?e.a:t.a,this.b=e.b!=null?e.b:t.b,this.c=e.c!=null?e.c:t.c,this.d=e.d!=null?e.d:t.d,this.e=e.e!=null?e.e:t.e,this.f=e.f!=null?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,n=this.c,r=this.d,s=this.e,a=this.f,o=e*r-t*n;if(!o)throw new Error("Cannot invert "+this);const l=r/o,c=-t/o,u=-n/o,h=e/o,d=-(l*s+u*a),A=-(c*s+h*a);return this.a=l,this.b=c,this.c=u,this.d=h,this.e=d,this.f=A,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const t=e instanceof Tn?e:new Tn(e);return Tn.matrixMultiply(t,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const t=e instanceof Tn?e:new Tn(e);return Tn.matrixMultiply(this,t,this)}rotate(e,t,n){return this.clone().rotateO(e,t,n)}rotateO(e,t=0,n=0){e=EC(e);const r=Math.cos(e),s=Math.sin(e),{a,b:o,c:l,d:c,e:u,f:h}=this;return this.a=a*r-o*s,this.b=o*r+a*s,this.c=l*r-c*s,this.d=c*r+l*s,this.e=u*r-h*s+n*s-t*r+t,this.f=h*r+u*s-t*s-n*r+n,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,t=e,n=0,r=0){arguments.length===3&&(r=n,n=t,t=e);const{a:s,b:a,c:o,d:l,e:c,f:u}=this;return this.a=s*e,this.b=a*t,this.c=o*e,this.d=l*t,this.e=c*e-n*e+n,this.f=u*t-r*t+r,this}shear(e,t,n){return this.clone().shearO(e,t,n)}shearO(e,t=0,n=0){const{a:r,b:s,c:a,d:o,e:l,f:c}=this;return this.a=r+s*e,this.c=a+o*e,this.e=l+c*e-n*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,t=e,n=0,r=0){arguments.length===3&&(r=n,n=t,t=e),e=EC(e),t=EC(t);const s=Math.tan(e),a=Math.tan(t),{a:o,b:l,c,d:u,e:h,f:d}=this;return this.a=o+l*s,this.b=l+o*a,this.c=c+u*s,this.d=u+c*a,this.e=h+d*s-r*s,this.f=d+h*a-n*a,this}skewX(e,t,n){return this.skew(e,0,t,n)}skewY(e,t,n){return this.skew(0,e,t,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(Tn.isMatrixLike(e))return new Tn(e).multiplyO(this);const t=Tn.formatTransforms(e),{x:n,y:r}=new Wi(t.ox,t.oy).transform(this),s=new Tn().translateO(t.rx,t.ry).lmultiplyO(this).translateO(-n,-r).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(n,r);if(isFinite(t.px)||isFinite(t.py)){const a=new Wi(n,r).transform(s),o=isFinite(t.px)?t.px-a.x:0,l=isFinite(t.py)?t.py-a.y:0;s.translateO(o,l)}return s.translateO(t.tx,t.ty),s}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function $f(){if(!$f.nodes){const i=Ja().size(2,0);i.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),i.attr("focusable","false"),i.attr("aria-hidden","true");const e=i.path().node;$f.nodes={svg:i,path:e}}if(!$f.nodes.svg.node.parentNode){const i=Di.document.body||Di.document.documentElement;$f.nodes.svg.addTo(i)}return $f.nodes}function Uj(i){return!(i.width||i.height||i.x||i.y)}Oi(Tn,"Matrix");class as{constructor(...e){this.init(...e)}addOffset(){return this.x+=Di.window.pageXOffset,this.y+=Di.window.pageYOffset,new as(this)}init(e){return e=typeof e=="string"?e.split(Xh).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Uj(this)}merge(e){const t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width)-t,s=Math.max(this.y+this.height,e.y+e.height)-n;return new as(t,n,r,s)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof Tn||(e=new Tn(e));let t=1/0,n=-1/0,r=1/0,s=-1/0;return[new Wi(this.x,this.y),new Wi(this.x2,this.y),new Wi(this.x,this.y2),new Wi(this.x2,this.y2)].forEach(function(a){a=a.transform(e),t=Math.min(t,a.x),n=Math.max(n,a.x),r=Math.min(r,a.y),s=Math.max(s,a.y)}),new as(t,r,n-t,s-r)}}function QB(i,e,t){let n;try{if(n=e(i.node),Uj(n)&&(r=i.node)!==Di.document&&!(Di.document.documentElement.contains||function(s){for(;s.parentNode;)s=s.parentNode;return s===Di.document}).call(Di.document.documentElement,r))throw new Error("Element not in the dom")}catch{n=t(i)}var r;return n}Ai({viewbox:{viewbox(i,e,t,n){return i==null?new as(this.attr("viewBox")):this.attr("viewBox",new as(i,e,t,n))},zoom(i,e){let{width:t,height:n}=this.attr(["width","height"]);if((t||n)&&typeof t!="string"&&typeof n!="string"||(t=this.node.clientWidth,n=this.node.clientHeight),!t||!n)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),s=t/r.width,a=n/r.height,o=Math.min(s,a);if(i==null)return o;let l=o/i;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new Wi(t/2/s+r.x,n/2/a+r.y);const c=new as(r).transform(new Tn({scale:l,origin:e}));return this.viewbox(c)}}}),Oi(as,"Box");class Zp extends Array{constructor(e=[],...t){if(super(e,...t),typeof e=="number")return this;this.length=0,this.push(...e)}}On([Zp],{each(i,...e){return typeof i=="function"?this.map((t,n,r)=>i.call(t,t,n,r)):this.map(t=>t[i](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const QSe=["toArray","constructor","each"];function cA(i,e){return new Zp(IP((e||Di.document).querySelectorAll(i),function(t){return Ol(t)}))}Zp.extend=function(i){i=i.reduce((e,t)=>(QSe.includes(t)||t[0]==="_"||(t in Array.prototype&&(e["$"+t]=Array.prototype[t]),e[t]=function(...n){return this.each(t,...n)}),e),{}),On([Zp],i)};let ZSe=0;const zj={};function Gj(i){let e=i.getEventHolder();return e===Di.window&&(e=zj),e.events||(e.events={}),e.events}function GP(i){return i.getEventTarget()}function Sh(i,e,t,n,r){const s=t.bind(n||i),a=Ja(i),o=Gj(a),l=GP(a);e=Array.isArray(e)?e:e.split(Xh),t._svgjsListenerId||(t._svgjsListenerId=++ZSe),e.forEach(function(c){const u=c.split(".")[0],h=c.split(".")[1]||"*";o[u]=o[u]||{},o[u][h]=o[u][h]||{},o[u][h][t._svgjsListenerId]=s,l.addEventListener(u,s,r||!1)})}function zl(i,e,t,n){const r=Ja(i),s=Gj(r),a=GP(r);(typeof t!="function"||(t=t._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(Xh)).forEach(function(o){const l=o&&o.split(".")[0],c=o&&o.split(".")[1];let u,h;if(t)s[l]&&s[l][c||"*"]&&(a.removeEventListener(l,s[l][c||"*"][t],n||!1),delete s[l][c||"*"][t]);else if(l&&c){if(s[l]&&s[l][c]){for(h in s[l][c])zl(a,[l,c].join("."),h);delete s[l][c]}}else if(c)for(o in s)for(u in s[o])c===u&&zl(a,[o,c].join("."));else if(l){if(s[l]){for(u in s[l])zl(a,[l,u].join("."));delete s[l]}}else{for(o in s)zl(a,o);(function(d){let A=d.getEventHolder();A===Di.window&&(A=zj),A.events&&(A.events={})})(r)}})}class S1 extends FP{addEventListener(){}dispatch(e,t,n){return function(r,s,a,o){const l=GP(r);return s instanceof Di.window.Event||(s=new Di.window.CustomEvent(s,{detail:a,cancelable:!0,...o})),l.dispatchEvent(s),s}(this,e,t,n)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const n=t[e.type];for(const r in n)for(const s in n[r])n[r][s](e);return!e.defaultPrevented}fire(e,t,n){return this.dispatch(e,t,n),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,n){return zl(this,e,t,n),this}on(e,t,n,r){return Sh(this,e,t,n,r),this}removeEventListener(){}}function ZB(){}Oi(S1,"EventTarget");const NC=400,KSe=">",JSe=0,eTe={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Kp extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(Xh).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class oi{constructor(...e){this.init(...e)}convert(e){return new oi(this.value,e)}divide(e){return e=new oi(e),new oi(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(t=e.match(Fj))&&(this.value=parseFloat(t[1]),t[5]==="%"?this.value/=100:t[5]==="s"&&(this.value*=1e3),this.unit=t[5]):e instanceof oi&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new oi(e),new oi(this-e,this.unit||e.unit)}plus(e){return e=new oi(e),new oi(this+e,this.unit||e.unit)}times(e){return e=new oi(e),new oi(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const tTe=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Vj=[];class fd extends S1{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=Ja(e)).removeNamespace&&this.node instanceof Di.window.SVGElement&&e.removeNamespace(),t==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return Ja(e).put(this,t)}children(){return new Zp(IP(this.node.children,function(e){return Ol(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let n=this.node.cloneNode(e);return t&&(n=Bj(n)),new this.constructor(n)}each(e,t){const n=this.children();let r,s;for(r=0,s=n.length;r<s;r++)e.apply(n[r],[r,n]),t&&n[r].each(e,t);return this}element(e,t){return this.put(new fd(Lx(e),t))}first(){return Ol(this.node.firstChild)}get(e){return Ol(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,"http://www.w3.org/1999/xhtml")}id(e){return e!==void 0||this.node.id||(this.node.id=Ij(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return Ol(this.node.lastChild)}matches(e){const t=this.node,n=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return n&&n.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=Ol(t.node.parentNode),!e)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=Ol(t.node.parentNode));return t}put(e,t){return e=Ja(e),this.add(e,t),e}putIn(e,t){return Ja(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=Ja(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const n=10**e,r=this.attr(t);for(const s in r)typeof r[s]=="number"&&(r[s]=Math.round(r[s]*n)/n);return this.attr(r),this}svg(e,t){return this.xml(e,t,BP)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const n=t.index(this);return t.put(e,n).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,t,n){if(typeof e=="boolean"&&(n=t,t=e,e=null),e==null||typeof e=="function"){t=t==null||t,this.writeDataToDom();let o=this;if(e!=null){if(o=Ol(o.node.cloneNode(!0)),t){const l=e(o);if(o=l||o,l===!1)return""}o.each(function(){const l=e(this),c=l||this;l===!1?this.remove():l&&this!==c&&this.replace(c)},!0)}return t?o.node.outerHTML:o.node.innerHTML}t=t!=null&&t;const r=Lx("wrapper",n),s=Di.document.createDocumentFragment();r.innerHTML=e;for(let o=r.children.length;o--;)s.appendChild(r.firstElementChild);const a=this.parent();return t?this.replace(s)&&a:this.add(s)}}On(fd,{attr:function(i,e,t){if(i==null){i={},e=this.node.attributes;for(const n of e)i[n.nodeName]=$B.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return i}if(i instanceof Array)return i.reduce((n,r)=>(n[r]=this.attr(r),n),{});if(typeof i=="object"&&i.constructor===Object)for(e in i)this.attr(e,i[e]);else if(e===null)this.node.removeAttribute(i);else{if(e==null)return(e=this.node.getAttribute(i))==null?eTe[i]:$B.test(e)?parseFloat(e):e;typeof(e=Vj.reduce((n,r)=>r(i,n,this),e))=="number"?e=new oi(e):tTe.has(i)&&rr.isColor(e)?e=new rr(e):e.constructor===Array&&(e=new Kp(e)),i==="leading"?this.leading&&this.leading(e):typeof t=="string"?this.node.setAttributeNS(t,i,e.toString()):this.node.setAttribute(i,e.toString()),!this.rebuild||i!=="font-size"&&i!=="x"||this.rebuild()}return this},find:function(i){return cA(i,this.node)},findOne:function(i){return Ol(this.node.querySelector(i))}}),Oi(fd,"Dom");let _a=class extends fd{constructor(i,e){super(i,e),this.dom={},this.node.instance=this,(i.hasAttribute("data-svgjs")||i.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(i.getAttribute("data-svgjs"))??JSON.parse(i.getAttribute("svgjs:data"))??{})}center(i,e){return this.cx(i).cy(e)}cx(i){return i==null?this.x()+this.width()/2:this.x(i-this.width()/2)}cy(i){return i==null?this.y()+this.height()/2:this.y(i-this.height()/2)}defs(){const i=this.root();return i&&i.defs()}dmove(i,e){return this.dx(i).dy(e)}dx(i=0){return this.x(new oi(i).plus(this.x()))}dy(i=0){return this.y(new oi(i).plus(this.y()))}getEventHolder(){return this}height(i){return this.attr("height",i)}move(i,e){return this.x(i).y(e)}parents(i=this.root()){const e=typeof i=="string";e||(i=Ja(i));const t=new Zp;let n=this;for(;(n=n.parent())&&n.node!==Di.document&&n.nodeName!=="#document-fragment"&&(t.push(n),e||n.node!==i.node)&&(!e||!n.matches(i));)if(n.node===this.root().node)return null;return t}reference(i){if(!(i=this.attr(i)))return null;const e=(i+"").match(WSe);return e?Ja(e[1]):null}root(){const i=this.parent(function(e){return Fp[e]}(UP));return i&&i.root()}setData(i){return this.dom=i,this}size(i,e){const t=gm(this,i,e);return this.width(new oi(t.width)).height(new oi(t.height))}width(i){return this.attr("width",i)}writeDataToDom(){return Oj(this,this.dom),super.writeDataToDom()}x(i){return this.attr("x",i)}y(i){return this.attr("y",i)}};On(_a,{bbox:function(){const i=QB(this,e=>e.getBBox(),e=>{try{const t=e.clone().addTo($f().svg).show(),n=t.node.getBBox();return t.remove(),n}catch(t){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${t.toString()}`)}});return new as(i)},rbox:function(i){const e=QB(this,n=>n.getBoundingClientRect(),n=>{throw new Error(`Getting rbox of element "${n.node.nodeName}" is not possible`)}),t=new as(e);return i?t.transform(i.screenCTM().inverseO()):t.addOffset()},inside:function(i,e){const t=this.bbox();return i>t.x&&e>t.y&&i<t.x+t.width&&e<t.y+t.height},point:function(i,e){return new Wi(i,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new Tn(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const i=this.rect(1,1),e=i.node.getScreenCTM();return i.remove(),new Tn(e)}return new Tn(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new Tn}}}),Oi(_a,"Element");const iy={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(i,e){return e==="color"?i:i+"-"+e}};["fill","stroke"].forEach(function(i){const e={};let t;e[i]=function(n){if(n===void 0)return this.attr(i);if(typeof n=="string"||n instanceof rr||rr.isRgb(n)||n instanceof _a)this.attr(i,n);else for(t=iy[i].length-1;t>=0;t--)n[iy[i][t]]!=null&&this.attr(iy.prefix(i,iy[i][t]),n[iy[i][t]]);return this},Ai(["Element","Runner"],e)}),Ai(["Element","Runner"],{matrix:function(i,e,t,n,r,s){return i==null?new Tn(this):this.attr("transform",new Tn(i,e,t,n,r,s))},rotate:function(i,e,t){return this.transform({rotate:i,ox:e,oy:t},!0)},skew:function(i,e,t,n){return arguments.length===1||arguments.length===3?this.transform({skew:i,ox:e,oy:t},!0):this.transform({skew:[i,e],ox:t,oy:n},!0)},shear:function(i,e,t){return this.transform({shear:i,ox:e,oy:t},!0)},scale:function(i,e,t,n){return arguments.length===1||arguments.length===3?this.transform({scale:i,ox:e,oy:t},!0):this.transform({scale:[i,e],ox:t,oy:n},!0)},translate:function(i,e){return this.transform({translate:[i,e]},!0)},relative:function(i,e){return this.transform({relative:[i,e]},!0)},flip:function(i="both",e="center"){return"xybothtrue".indexOf(i)===-1&&(e=i,i="both"),this.transform({flip:i,origin:e},!0)},opacity:function(i){return this.attr("opacity",i)}}),Ai("radius",{radius:function(i,e=i){return(this._element||this).type==="radialGradient"?this.attr("r",new oi(i)):this.rx(i).ry(e)}}),Ai("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(i){return new Wi(this.node.getPointAtLength(i))}}),Ai(["Element","Runner"],{font:function(i,e){if(typeof i=="object"){for(e in i)this.font(e,i[e]);return this}return i==="leading"?this.leading(e):i==="anchor"?this.attr("text-anchor",e):i==="size"||i==="family"||i==="weight"||i==="stretch"||i==="variant"||i==="style"?this.attr("font-"+i,e):this.attr(i,e)}});Ai("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(i,e){return i[e]=function(t){return t===null?this.off(e):this.on(e,t),this},i},{})),Ai("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(jSe).slice(0,-1).map(function(e){const t=e.trim().split("(");return[t[0],t[1].split(Xh).map(function(n){return parseFloat(n)})]}).reverse().reduce(function(e,t){return t[0]==="matrix"?e.lmultiply(Tn.fromArray(t[1])):e[t[0]].apply(e,t[1])},new Tn)},toParent:function(i,e){if(this===i)return this;if($R(this.node))return this.addTo(i,e);const t=this.screenCTM(),n=i.screenCTM().inverse();return this.addTo(i,e).untransform().transform(n.multiply(t)),this},toRoot:function(i){return this.toParent(this.root(),i)},transform:function(i,e){if(i==null||typeof i=="string"){const n=new Tn(this).decompose();return i==null?n:n[i]}Tn.isMatrixLike(i)||(i={...i,origin:YR(i,this)});const t=new Tn(e===!0?this:e||!1).transform(i);return this.attr("transform",t)}});class io extends _a{flatten(){return this.each(function(){if(this instanceof io)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),t=e.index(this)){return t=t===-1?e.children().length:t,this.each(function(n,r){return r[r.length-n-1].toParent(e,t)}),this.remove()}}Oi(io,"Container");class CT extends io{constructor(e,t=e){super(mr("defs",e),t)}flatten(){return this}ungroup(){return this}}Oi(CT,"Defs");class fl extends _a{}function VP(i){return this.attr("rx",i)}function HP(i){return this.attr("ry",i)}function Hj(i){return i==null?this.cx()-this.rx():this.cx(i+this.rx())}function qj(i){return i==null?this.cy()-this.ry():this.cy(i+this.ry())}function Wj(i){return this.attr("cx",i)}function jj(i){return this.attr("cy",i)}function Xj(i){return i==null?2*this.rx():this.rx(new oi(i).divide(2))}function Yj(i){return i==null?2*this.ry():this.ry(new oi(i).divide(2))}Oi(fl,"Shape");var nTe=Object.freeze({__proto__:null,cx:Wj,cy:jj,height:Yj,rx:VP,ry:HP,width:Xj,x:Hj,y:qj});class $_ extends fl{constructor(e,t=e){super(mr("ellipse",e),t)}size(e,t){const n=gm(this,e,t);return this.rx(new oi(n.width).divide(2)).ry(new oi(n.height).divide(2))}}On($_,nTe),Ai("Container",{ellipse:gr(function(i=0,e=i){return this.put(new $_).size(i,e).move(0,0)})}),Oi($_,"Ellipse");class $j extends fd{constructor(e=Di.document.createDocumentFragment()){super(e)}xml(e,t,n){if(typeof e=="boolean"&&(n=t,t=e,e=null),e==null||typeof e=="function"){const r=new fd(Lx("wrapper",n));return r.add(this.node.cloneNode(!0)),r.xml(!1,n)}return super.xml(e,!1,n)}}function Qj(i,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new oi(i),fy:new oi(e)}):this.attr({x1:new oi(i),y1:new oi(e)})}function Zj(i,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new oi(i),cy:new oi(e)}):this.attr({x2:new oi(i),y2:new oi(e)})}Oi($j,"Fragment");var iTe=Object.freeze({__proto__:null,from:Qj,to:Zj});class Iy extends io{constructor(e,t){super(mr(e+"Gradient",typeof e=="string"?null:e),t)}attr(e,t,n){return e==="transform"&&(e="gradientTransform"),super.attr(e,t,n)}bbox(){return new as}targets(){return cA("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}On(Iy,iTe),Ai({Container:{gradient(...i){return this.defs().gradient(...i)}},Defs:{gradient:gr(function(i,e){return this.put(new Iy(i)).update(e)})}}),Oi(Iy,"Gradient");class Dx extends io{constructor(e,t=e){super(mr("pattern",e),t)}attr(e,t,n){return e==="transform"&&(e="patternTransform"),super.attr(e,t,n)}bbox(){return new as}targets(){return cA("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Ai({Container:{pattern(...i){return this.defs().pattern(...i)}},Defs:{pattern:gr(function(i,e,t){return this.put(new Dx).update(t).attr({x:0,y:0,width:i,height:e,patternUnits:"userSpaceOnUse"})})}}),Oi(Dx,"Pattern");let Q_=class extends fl{constructor(i,e=i){super(mr("image",i),e)}load(i,e){if(!i)return this;const t=new Di.window.Image;return Sh(t,"load",function(n){const r=this.parent(Dx);this.width()===0&&this.height()===0&&this.size(t.width,t.height),r instanceof Dx&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof e=="function"&&e.call(this,n)},this),Sh(t,"load error",function(){zl(t)}),this.attr("href",t.src=i,mm)}};var KB;KB=function(i,e,t){return i!=="fill"&&i!=="stroke"||YSe.test(e)&&(e=t.root().defs().image(e)),e instanceof Q_&&(e=t.root().defs().pattern(0,0,n=>{n.add(e)})),e},Vj.push(KB),Ai({Container:{image:gr(function(i,e){return this.put(new Q_).size(0,0).load(i,e)})}}),Oi(Q_,"Image");class dd extends Kp{bbox(){let e=-1/0,t=-1/0,n=1/0,r=1/0;return this.forEach(function(s){e=Math.max(s[0],e),t=Math.max(s[1],t),n=Math.min(s[0],n),r=Math.min(s[1],r)}),new as(n,r,e-n,t-r)}move(e,t){const n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(let r=this.length-1;r>=0;r--)this[r]=[this[r][0]+e,this[r][1]+t];return this}parse(e=[0,0]){const t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(Xh).map(parseFloat)).length%2!=0&&e.pop();for(let n=0,r=e.length;n<r;n+=2)t.push([e[n],e[n+1]]);return t}size(e,t){let n;const r=this.bbox();for(n=this.length-1;n>=0;n--)r.width&&(this[n][0]=(this[n][0]-r.x)*e/r.width+r.x),r.height&&(this[n][1]=(this[n][1]-r.y)*t/r.height+r.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,n=this.length;t<n;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){Tn.isMatrixLike(e)||(e=new Tn(e));for(let t=this.length;t--;){const[n,r]=this[t];this[t][0]=e.a*n+e.c*r+e.e,this[t][1]=e.b*n+e.d*r+e.f}return this}}const rTe=dd;var qP=Object.freeze({__proto__:null,MorphArray:rTe,height:function(i){const e=this.bbox();return i==null?e.height:this.size(e.width,i)},width:function(i){const e=this.bbox();return i==null?e.width:this.size(i,e.height)},x:function(i){return i==null?this.bbox().x:this.move(i,this.bbox().y)},y:function(i){return i==null?this.bbox().y:this.move(this.bbox().x,i)}});let Tp=class extends fl{constructor(i,e=i){super(mr("line",i),e)}array(){return new dd([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(i,e){return this.attr(this.array().move(i,e).toLine())}plot(i,e,t,n){return i==null?this.array():(i=e!==void 0?{x1:i,y1:e,x2:t,y2:n}:new dd(i).toLine(),this.attr(i))}size(i,e){const t=gm(this,i,e);return this.attr(this.array().size(t.width,t.height).toLine())}};On(Tp,qP),Ai({Container:{line:gr(function(...i){return Tp.prototype.plot.apply(this.put(new Tp),i[0]!=null?i:[0,0,0,0])})}}),Oi(Tp,"Line");let Z_=class extends io{constructor(i,e=i){super(mr("marker",i),e)}height(i){return this.attr("markerHeight",i)}orient(i){return this.attr("orient",i)}ref(i,e){return this.attr("refX",i).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(i){return this.clear(),typeof i=="function"&&i.call(this,this),this}width(i){return this.attr("markerWidth",i)}};function W0(i,e){return function(t){return t==null?this[i]:(this[i]=t,e&&e.call(this),this)}}Ai({Container:{marker(...i){return this.defs().marker(...i)}},Defs:{marker:gr(function(i,e,t){return this.put(new Z_).size(i,e).ref(i/2,e/2).viewbox(0,0,i,e).attr("orient","auto").update(t)})},marker:{marker(i,e,t,n){let r=["marker"];return i!=="all"&&r.push(i),r=r.join("-"),i=arguments[1]instanceof Z_?arguments[1]:this.defs().marker(e,t,n),this.attr(r,i)}}}),Oi(Z_,"Marker");const sTe={"-":function(i){return i},"<>":function(i){return-Math.cos(i*Math.PI)/2+.5},">":function(i){return Math.sin(i*Math.PI/2)},"<":function(i){return 1-Math.cos(i*Math.PI/2)},bezier:function(i,e,t,n){return function(r){return r<0?i>0?e/i*r:t>0?n/t*r:0:r>1?t<1?(1-n)/(1-t)*r+(n-t)/(1-t):i<1?(1-e)/(1-i)*r+(e-i)/(1-i):1:3*r*(1-r)**2*e+3*r**2*(1-r)*n+r**3}},steps:function(i,e="end"){e=e.split("-").reverse()[0];let t=i;return e==="none"?--t:e==="both"&&++t,(n,r=!1)=>{let s=Math.floor(n*i);const a=n*s%1==0;return e!=="start"&&e!=="both"||++s,r&&a&&--s,n>=0&&s<0&&(s=0),n<=1&&s>t&&(s=t),s/t}}};class WP{done(){return!1}}class QR extends WP{constructor(e=KSe){super(),this.ease=sTe[e]||e}step(e,t,n){return typeof e!="number"?n<1?e:t:e+(t-e)*this.ease(n)}}class pS extends WP{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,n,r){return this.stepper(e,t,n,r)}}function JB(){const i=(this._duration||500)/1e3,e=this._overshoot||0,t=Math.PI,n=Math.log(e/100+1e-10),r=-n/Math.sqrt(t*t+n*n),s=3.9/(r*i);this.d=2*r*s,this.k=s*s}On(class extends pS{constructor(i=500,e=0){super(),this.duration(i).overshoot(e)}step(i,e,t,n){if(typeof i=="string")return i;if(n.done=t===1/0,t===1/0)return e;if(t===0)return i;t>100&&(t=16),t/=1e3;const r=n.velocity||0,s=-this.d*r-this.k*(i-e),a=i+r*t+s*t*t/2;return n.velocity=r+s*t,n.done=Math.abs(e-a)+Math.abs(r)<.002,n.done?e:a}},{duration:W0("_duration",JB),overshoot:W0("_overshoot",JB)});On(class extends pS{constructor(i=.1,e=.01,t=0,n=1e3){super(),this.p(i).i(e).d(t).windup(n)}step(i,e,t,n){if(typeof i=="string")return i;if(n.done=t===1/0,t===1/0)return e;if(t===0)return i;const r=e-i;let s=(n.integral||0)+r*t;const a=(r-(n.error||0))/t,o=this._windup;return o!==!1&&(s=Math.max(-o,Math.min(s,o))),n.error=r,n.integral=s,n.done=Math.abs(r)<.001,n.done?e:i+(this.P*r+this.I*s+this.D*a)}},{windup:W0("_windup"),p:W0("P"),i:W0("I"),d:W0("D")});const aTe={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},ZR={M:function(i,e,t){return e.x=t.x=i[0],e.y=t.y=i[1],["M",e.x,e.y]},L:function(i,e){return e.x=i[0],e.y=i[1],["L",i[0],i[1]]},H:function(i,e){return e.x=i[0],["H",i[0]]},V:function(i,e){return e.y=i[0],["V",i[0]]},C:function(i,e){return e.x=i[4],e.y=i[5],["C",i[0],i[1],i[2],i[3],i[4],i[5]]},S:function(i,e){return e.x=i[2],e.y=i[3],["S",i[0],i[1],i[2],i[3]]},Q:function(i,e){return e.x=i[2],e.y=i[3],["Q",i[0],i[1],i[2],i[3]]},T:function(i,e){return e.x=i[0],e.y=i[1],["T",i[0],i[1]]},Z:function(i,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(i,e){return e.x=i[5],e.y=i[6],["A",i[0],i[1],i[2],i[3],i[4],i[5],i[6]]}},LC="mlhvqtcsaz".split("");for(let i=0,e=LC.length;i<e;++i)ZR[LC[i]]=function(t){return function(n,r,s){if(t==="H")n[0]=n[0]+r.x;else if(t==="V")n[0]=n[0]+r.y;else if(t==="A")n[5]=n[5]+r.x,n[6]=n[6]+r.y;else for(let a=0,o=n.length;a<o;++a)n[a]=n[a]+(a%2?r.y:r.x);return ZR[t](n,r,s)}}(LC[i].toUpperCase());function KR(i){return i.segment.length&&i.segment.length-1===aTe[i.segment[0].toUpperCase()]}function oTe(i,e){i.inNumber&&cp(i,!1);const t=zP.test(e);if(t)i.segment=[e];else{const n=i.lastCommand,r=n.toLowerCase(),s=n===r;i.segment=[r==="m"?s?"l":"L":n]}return i.inSegment=!0,i.lastCommand=i.segment[0],t}function cp(i,e){if(!i.inNumber)throw new Error("Parser Error");i.number&&i.segment.push(parseFloat(i.number)),i.inNumber=e,i.number="",i.pointSeen=!1,i.hasExponent=!1,KR(i)&&JR(i)}function JR(i){i.inSegment=!1,i.absolute&&(i.segment=function(e){const t=e.segment[0];return ZR[t](e.segment.slice(1),e.p,e.p0)}(i)),i.segments.push(i.segment)}function lTe(i){if(!i.segment.length)return!1;const e=i.segment[0].toUpperCase()==="A",t=i.segment.length;return e&&(t===4||t===5)}function cTe(i){return i.lastToken.toUpperCase()==="E"}const uTe=new Set([" ",",","	",`
`,"\r","\f"]);class Tc extends Kp{bbox(){return $f().path.setAttribute("d",this.toString()),new as($f.nodes.path.getBBox())}move(e,t){const n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(let r,s=this.length-1;s>=0;s--)r=this[s][0],r==="M"||r==="L"||r==="T"?(this[s][1]+=e,this[s][2]+=t):r==="H"?this[s][1]+=e:r==="V"?this[s][1]+=t:r==="C"||r==="S"||r==="Q"?(this[s][1]+=e,this[s][2]+=t,this[s][3]+=e,this[s][4]+=t,r==="C"&&(this[s][5]+=e,this[s][6]+=t)):r==="A"&&(this[s][6]+=e,this[s][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),function(t,n=!0){let r=0,s="";const a={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:n,p0:new Wi,p:new Wi};for(;a.lastToken=s,s=t.charAt(r++);)if(a.inSegment||!oTe(a,s))if(s!==".")if(isNaN(parseInt(s)))if(uTe.has(s))a.inNumber&&cp(a,!1);else if(s!=="-"&&s!=="+")if(s.toUpperCase()!=="E"){if(zP.test(s)){if(a.inNumber)cp(a,!1);else{if(!KR(a))throw new Error("parser Error");JR(a)}--r}}else a.number+=s,a.hasExponent=!0;else{if(a.inNumber&&!cTe(a)){cp(a,!1),--r;continue}a.number+=s,a.inNumber=!0}else{if(a.number==="0"||lTe(a)){a.inNumber=!0,a.number=s,cp(a,!0);continue}a.inNumber=!0,a.number+=s}else{if(a.pointSeen||a.hasExponent){cp(a,!1),--r;continue}a.inNumber=!0,a.pointSeen=!0,a.number+=s}return a.inNumber&&cp(a,!1),a.inSegment&&KR(a)&&JR(a),a.segments}(e)}size(e,t){const n=this.bbox();let r,s;for(n.width=n.width===0?1:n.width,n.height=n.height===0?1:n.height,r=this.length-1;r>=0;r--)s=this[r][0],s==="M"||s==="L"||s==="T"?(this[r][1]=(this[r][1]-n.x)*e/n.width+n.x,this[r][2]=(this[r][2]-n.y)*t/n.height+n.y):s==="H"?this[r][1]=(this[r][1]-n.x)*e/n.width+n.x:s==="V"?this[r][1]=(this[r][1]-n.y)*t/n.height+n.y:s==="C"||s==="S"||s==="Q"?(this[r][1]=(this[r][1]-n.x)*e/n.width+n.x,this[r][2]=(this[r][2]-n.y)*t/n.height+n.y,this[r][3]=(this[r][3]-n.x)*e/n.width+n.x,this[r][4]=(this[r][4]-n.y)*t/n.height+n.y,s==="C"&&(this[r][5]=(this[r][5]-n.x)*e/n.width+n.x,this[r][6]=(this[r][6]-n.y)*t/n.height+n.y)):s==="A"&&(this[r][1]=this[r][1]*e/n.width,this[r][2]=this[r][2]*t/n.height,this[r][6]=(this[r][6]-n.x)*e/n.width+n.x,this[r][7]=(this[r][7]-n.y)*t/n.height+n.y);return this}toString(){return function(e){let t="";for(let n=0,r=e.length;n<r;n++)t+=e[n][0],e[n][1]!=null&&(t+=e[n][1],e[n][2]!=null&&(t+=" ",t+=e[n][2],e[n][3]!=null&&(t+=" ",t+=e[n][3],t+=" ",t+=e[n][4],e[n][5]!=null&&(t+=" ",t+=e[n][5],t+=" ",t+=e[n][6],e[n][7]!=null&&(t+=" ",t+=e[n][7])))));return t+" "}(this)}}const Kj=i=>{const e=typeof i;return e==="number"?oi:e==="string"?rr.isColor(i)?rr:Xh.test(i)?zP.test(i)?Tc:Kp:Fj.test(i)?oi:e5:t5.indexOf(i.constructor)>-1?i.constructor:Array.isArray(i)?Kp:e==="object"?kx:e5};class up{constructor(e){this._stepper=e||new QR("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,t){return e&&t},!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(Kj(e));let t=new this._type(e);return this._type===rr&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===kx&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map(function(n){return n.done=!0,n}),t}}class e5{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class T1{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,T1.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}T1.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const hTe=(i,e)=>i[0]<e[0]?-1:i[0]>e[0]?1:0;class kx{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let n=0,r=t.length;n<r;++n){if(t[n+1]===e[n+1]){if(t[n+1]===rr&&e[n+7]!==t[n+7]){const o=e[n+7],l=new rr(this.values.splice(n+3,5))[o]().toArray();this.values.splice(n+3,0,...l)}n+=t[n+2]+2;continue}if(!e[n+1])return this;const s=new e[n+1]().toArray(),a=t[n+2]+3;t.splice(n,a,e[n],e[n+1],e[n+2],...s),n+=t[n+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const t=[];for(const n in e){const r=Kj(e[n]),s=new r(e[n]).toArray();t.push([n,r,s.length,...s])}return t.sort(hTe),this.values=t.reduce((n,r)=>n.concat(r),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const n=t.shift(),r=t.shift(),s=t.shift(),a=t.splice(0,s);e[n]=new r(a)}return e}}const t5=[e5,T1,kx];class ig extends fl{constructor(e,t=e){super(mr("path",e),t)}array(){return this._array||(this._array=new Tc(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new Tc(e))}size(e,t){const n=gm(this,e,t);return this.attr("d",this.array().size(n.width,n.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}ig.prototype.MorphArray=Tc,Ai({Container:{path:gr(function(i){return this.put(new ig).plot(i||new Tc)})}}),Oi(ig,"Path");var Jj=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new dd(this.attr("points")))},clear:function(){return delete this._array,this},move:function(i,e){return this.attr("points",this.array().move(i,e))},plot:function(i){return i==null?this.array():this.clear().attr("points",typeof i=="string"?i:this._array=new dd(i))},size:function(i,e){const t=gm(this,i,e);return this.attr("points",this.array().size(t.width,t.height))}});class Mp extends fl{constructor(e,t=e){super(mr("polygon",e),t)}}Ai({Container:{polygon:gr(function(i){return this.put(new Mp).plot(i||new dd)})}}),On(Mp,qP),On(Mp,Jj),Oi(Mp,"Polygon");class Ep extends fl{constructor(e,t=e){super(mr("polyline",e),t)}}Ai({Container:{polyline:gr(function(i){return this.put(new Ep).plot(i||new dd)})}}),On(Ep,qP),On(Ep,Jj),Oi(Ep,"Polyline");class K_ extends fl{constructor(e,t=e){super(mr("rect",e),t)}}On(K_,{rx:VP,ry:HP}),Ai({Container:{rect:gr(function(i,e){return this.put(new K_).size(i,e)})}}),Oi(K_,"Rect");class DC{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=e.next!==void 0?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const Ki={nextDraw:null,frames:new DC,timeouts:new DC,immediates:new DC,timer:()=>Di.window.performance||Di.window.Date,transforms:[],frame(i){const e=Ki.frames.push({run:i});return Ki.nextDraw===null&&(Ki.nextDraw=Di.window.requestAnimationFrame(Ki._draw)),e},timeout(i,e){e=e||0;const t=Ki.timer().now()+e,n=Ki.timeouts.push({run:i,time:t});return Ki.nextDraw===null&&(Ki.nextDraw=Di.window.requestAnimationFrame(Ki._draw)),n},immediate(i){const e=Ki.immediates.push(i);return Ki.nextDraw===null&&(Ki.nextDraw=Di.window.requestAnimationFrame(Ki._draw)),e},cancelFrame(i){i!=null&&Ki.frames.remove(i)},clearTimeout(i){i!=null&&Ki.timeouts.remove(i)},cancelImmediate(i){i!=null&&Ki.immediates.remove(i)},_draw(i){let e=null;const t=Ki.timeouts.last();for(;(e=Ki.timeouts.shift())&&(i>=e.time?e.run():Ki.timeouts.push(e),e!==t););let n=null;const r=Ki.frames.last();for(;n!==r&&(n=Ki.frames.shift());)n.run(i);let s=null;for(;s=Ki.immediates.shift();)s();Ki.nextDraw=Ki.timeouts.first()||Ki.frames.first()?Di.window.requestAnimationFrame(Ki._draw):null}},fTe=function(i){const e=i.start,t=i.runner.duration();return{start:e,duration:t,end:e+t,runner:i.runner}},dTe=function(){const i=Di.window;return(i.performance||i.Date).now()};class eX extends S1{constructor(e=dTe){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map(t=>t.start+t.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(e==null)return this.speed(-t);const n=Math.abs(t);return this.speed(e?-n:n)}schedule(e,t,n){if(e==null)return this._runners.map(fTe);let r=0;const s=this.getEndTime();if(t=t||0,n==null||n==="last"||n==="after")r=s;else if(n==="absolute"||n==="start")r=t,t=0;else if(n==="now")r=this._time;else if(n==="relative"){const l=this.getRunnerInfoById(e.id);l&&(r=l.start+t,t=0)}else{if(n!=="with-last")throw new Error('Invalid value for the "when" parameter');{const l=this.getLastRunnerInfo();r=l?l.start:this._time}}e.unschedule(),e.timeline(this);const a=e.persist(),o={persist:a===null?this._persist:a,start:r+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(o),this._runners.sort((l,c)=>l.start-c.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return Ki.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=Ki.frame(this._step)),this)}_stepFn(e=!1){const t=this._timeSource();let n=t-this._lastSourceTime;e&&(n=0);const r=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let a=this._runners.length;a--;){const o=this._runners[a],l=o.runner;this._time-o.start<=0&&l.reset()}let s=!1;for(let a=0,o=this._runners.length;a<o;a++){const l=this._runners[a],c=l.runner;let u=r;const h=this._time-l.start;if(h<=0){s=!0;continue}h<u&&(u=h),c.active()&&(c.step(u).done?l.persist!==!0&&c.duration()-c.time()+this._time+l.persist<this._time&&(c.unschedule(),--a,--o):s=!0)}return s&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}Ai({Element:{timeline:function(i){return i==null?(this._timeline=this._timeline||new eX,this._timeline):(this._timeline=i,this)}}});class al extends S1{constructor(e){super(),this.id=al.id++,e=typeof(e=e??NC)=="function"?new pS(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof pS,this._stepper=this._isDeclarative?e:new QR,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Tn,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,t,n){let r=1,s=!1,a=0;return t=t??JSe,n=n||"last",typeof(e=e??NC)!="object"||e instanceof WP||(t=e.delay??t,n=e.when??n,s=e.swing||s,r=e.times??r,a=e.wait??a,e=e.duration??NC),{duration:e,delay:t,swing:s,times:r,wait:a,when:n}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,n){const r=al.sanitise(e,t,n),s=new al(r.duration);return this._timeline&&s.timeline(this._timeline),this._element&&s.element(this._element),s.loop(r).schedule(r.delay,r.when)}clearTransform(){return this.transforms=new Tn,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new QR(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,n){return typeof e=="object"&&(t=e.swing,n=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=n||0,this._times===!0&&(this._times=1/0),this}loops(e){const t=this._duration+this._wait;if(e==null){const s=Math.floor(this._time/t),a=(this._time-s*t)/this._duration;return Math.min(s+a,this._times)}const n=e%1,r=t*Math.floor(e)+this._duration*n;return this.time(r)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const t=this._time,n=this._duration,r=this._wait,s=this._times,a=this._swing,o=this._reverse;let l;if(e==null){const h=function(A){const x=a*Math.floor(A%(2*(r+n))/(r+n)),_=x&&!o||!x&&o,S=Math.pow(-1,_)*(A%(r+n))/n+_;return Math.max(Math.min(S,1),0)},d=s*(r+n)-r;return l=t<=0?Math.round(h(1e-5)):t<d?h(t):Math.round(h(d-1e-5)),l}const c=Math.floor(this.loops()),u=a&&c%2==0;return l=c+(u&&!o||o&&u?e:1-e),this.loops(l)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,n,r){return this._queue.push({initialiser:e||ZB,runner:t||ZB,retarget:n,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,t,n){if(e instanceof eX||(n=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,n),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const t=this.position(),n=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;const r=this.duration(),s=this._lastTime<=0&&this._time>0,a=this._lastTime<r&&this._time>=r;this._lastTime=this._time,s&&this.fire("start",this);const o=this._isDeclarative;this.done=!o&&!a&&this._time>=r,this._reseted=!1;let l=!1;return(n||o)&&(this._initialise(n),this.transforms=new Tn,l=this._run(o?e:t),this.fire("step",this)),this.done=this.done||l&&o,a&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const t=e-this._time;return this.step(t),this}timeline(e){return e===void 0?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let t=0,n=this._queue.length;t<n;++t){const r=this._queue[t],s=this._isDeclarative||!r.initialised&&e;e=!r.finished,s&&e&&(r.initialiser.call(this),r.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){const n=this.timeline();n&&n.play()}}_run(e){let t=!0;for(let n=0,r=this._queue.length;n<r;++n){const s=this._queue[n],a=s.runner.call(this,e);s.finished=s.finished||a===!0,t=t&&s.finished}return t}_tryRetarget(e,t,n){if(this._history[e]){if(!this._history[e].caller.initialised){const s=this._queue.indexOf(this._history[e].caller);return this._queue.splice(s,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,n):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;const r=this.timeline();return r&&r.play(),!0}return!1}}al.id=0;class AS{constructor(e=new Tn,t=-1,n=!0){this.transforms=e,this.id=t,this.done=n}clearTransformsFromQueue(){}}On([al,AS],{mergeWith(i){return new AS(i.transforms.lmultiply(this.transforms),i.id)}});const tX=(i,e)=>i.lmultiplyO(e),nX=i=>i.transforms;function pTe(){const i=this._transformationRunners.runners.map(nX).reduce(tX,new Tn);this.transform(i),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class ATe{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new AS).forEach(n=>n.clearTransformsFromQueue()),this}edit(e,t){const n=this.ids.indexOf(e+1);return this.ids.splice(n,1,e+1),this.runners.splice(n,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const n=this.runners[t];if(e&&n.done&&e.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(n.id);const r=n.mergeWith(e);this.edit(e.id,r),e=r,--t}else e=n}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}Ai({Element:{animate(i,e,t){const n=al.sanitise(i,e,t),r=this.timeline();return new al(n.duration).loop(n).element(this).timeline(r.play()).schedule(n.delay,n.when)},delay(i,e){return this.animate(0,i,e)},_clearTransformRunnersBefore(i){this._transformationRunners.clearBefore(i.id)},_currentTransform(i){return this._transformationRunners.runners.filter(e=>e.id<=i.id).map(nX).reduce(tX,new Tn)},_addRunner(i){this._transformationRunners.add(i),Ki.cancelImmediate(this._frameId),this._frameId=Ki.immediate(pTe.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new ATe().add(new AS(new Tn(this))))}}});On(al,{attr(i,e){return this.styleAttr("attr",i,e)},css(i,e){return this.styleAttr("css",i,e)},styleAttr(i,e,t){if(typeof e=="string")return this.styleAttr(i,{[e]:t});let n=e;if(this._tryRetarget(i,n))return this;let r=new up(this._stepper).to(n),s=Object.keys(n);return this.queue(function(){r=r.from(this.element()[i](s))},function(a){return this.element()[i](r.at(a).valueOf()),r.done()},function(a){const o=Object.keys(a),l=(c=s,o.filter(h=>!c.includes(h)));var c;if(l.length){const h=this.element()[i](l),d=new kx(r.from()).valueOf();Object.assign(d,h),r.from(d)}const u=new kx(r.to()).valueOf();Object.assign(u,a),r.to(u),s=o,n=a}),this._rememberMorpher(i,r),this},zoom(i,e){if(this._tryRetarget("zoom",i,e))return this;let t=new up(this._stepper).to(new oi(i));return this.queue(function(){t=t.from(this.element().zoom())},function(n){return this.element().zoom(t.at(n),e),t.done()},function(n,r){e=r,t.to(n)}),this._rememberMorpher("zoom",t),this},transform(i,e,t){if(e=i.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",i))return this;const n=Tn.isMatrixLike(i);t=i.affine!=null?i.affine:t??!n;const r=new up(this._stepper).type(t?T1:Tn);let s,a,o,l,c;return this.queue(function(){a=a||this.element(),s=s||YR(i,a),c=new Tn(e?void 0:a),a._addRunner(this),e||a._clearTransformRunnersBefore(this)},function(u){e||this.clearTransform();const{x:h,y:d}=new Wi(s).transform(a._currentTransform(this));let A=new Tn({...i,origin:[h,d]}),x=this._isDeclarative&&o?o:c;if(t){A=A.decompose(h,d),x=x.decompose(h,d);const S=A.rotate,w=x.rotate,C=[S-360,S,S+360],P=C.map(B=>Math.abs(B-w)),L=Math.min(...P),D=P.indexOf(L);A.rotate=C[D]}e&&(n||(A.rotate=i.rotate||0),this._isDeclarative&&l&&(x.rotate=l)),r.from(x),r.to(A);const _=r.at(u);return l=_.rotate,o=new Tn(_),this.addTransform(o),a._addRunner(this),r.done()},function(u){(u.origin||"center").toString()!==(i.origin||"center").toString()&&(s=YR(u,a)),i={...u,origin:s}},!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(i){return this._queueNumber("x",i)},y(i){return this._queueNumber("y",i)},ax(i){return this._queueNumber("ax",i)},ay(i){return this._queueNumber("ay",i)},dx(i=0){return this._queueNumberDelta("x",i)},dy(i=0){return this._queueNumberDelta("y",i)},dmove(i,e){return this.dx(i).dy(e)},_queueNumberDelta(i,e){if(e=new oi(e),this._tryRetarget(i,e))return this;const t=new up(this._stepper).to(e);let n=null;return this.queue(function(){n=this.element()[i](),t.from(n),t.to(n+e)},function(r){return this.element()[i](t.at(r)),t.done()},function(r){t.to(n+new oi(r))}),this._rememberMorpher(i,t),this},_queueObject(i,e){if(this._tryRetarget(i,e))return this;const t=new up(this._stepper).to(e);return this.queue(function(){t.from(this.element()[i]())},function(n){return this.element()[i](t.at(n)),t.done()}),this._rememberMorpher(i,t),this},_queueNumber(i,e){return this._queueObject(i,new oi(e))},cx(i){return this._queueNumber("cx",i)},cy(i){return this._queueNumber("cy",i)},move(i,e){return this.x(i).y(e)},amove(i,e){return this.ax(i).ay(e)},center(i,e){return this.cx(i).cy(e)},size(i,e){let t;return i&&e||(t=this._element.bbox()),i||(i=t.width/t.height*e),e||(e=t.height/t.width*i),this.width(i).height(e)},width(i){return this._queueNumber("width",i)},height(i){return this._queueNumber("height",i)},plot(i,e,t,n){if(arguments.length===4)return this.plot([i,e,t,n]);if(this._tryRetarget("plot",i))return this;const r=new up(this._stepper).type(this._element.MorphArray).to(i);return this.queue(function(){r.from(this._element.array())},function(s){return this._element.plot(r.at(s)),r.done()}),this._rememberMorpher("plot",r),this},leading(i){return this._queueNumber("leading",i)},viewbox(i,e,t,n){return this._queueObject("viewbox",new as(i,e,t,n))},update(i){return typeof i!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(i.opacity!=null&&this.attr("stop-opacity",i.opacity),i.color!=null&&this.attr("stop-color",i.color),i.offset!=null&&this.attr("offset",i.offset),this)}}),On(al,{rx:VP,ry:HP,from:Qj,to:Zj}),Oi(al,"Runner");class n5 extends io{constructor(e,t=e){super(mr("svg",e),t),this.namespace()}defs(){return this.isRoot()?Ol(this.node.querySelector("defs"))||this.put(new CT):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof Di.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:BP,version:"1.1"}).attr("xmlns:xlink",mm,CC):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,CC).attr("xmlns:svgjs",null,CC)}root(){return this.isRoot()?this:super.root()}}Ai({Container:{nested:gr(function(){return this.put(new n5)})}}),Oi(n5,"Svg",!0);let i5=class extends io{constructor(i,e=i){super(mr("symbol",i),e)}};Ai({Container:{symbol:gr(function(){return this.put(new i5)})}}),Oi(i5,"Symbol");var iX=Object.freeze({__proto__:null,amove:function(i,e){return this.ax(i).ay(e)},ax:function(i){return this.attr("x",i)},ay:function(i){return this.attr("y",i)},build:function(i){return this._build=!!i,this},center:function(i,e,t=this.bbox()){return this.cx(i,t).cy(e,t)},cx:function(i,e=this.bbox()){return i==null?e.cx:this.attr("x",this.attr("x")+i-e.cx)},cy:function(i,e=this.bbox()){return i==null?e.cy:this.attr("y",this.attr("y")+i-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(i,e,t=this.bbox()){return this.x(i,t).y(e,t)},plain:function(i){return this._build===!1&&this.clear(),this.node.appendChild(Di.document.createTextNode(i)),this},x:function(i,e=this.bbox()){return i==null?e.x:this.attr("x",this.attr("x")+i-e.x)},y:function(i,e=this.bbox()){return i==null?e.y:this.attr("y",this.attr("y")+i-e.y)}});class Mc extends fl{constructor(e,t=e){super(mr("text",e),t),this.dom.leading=this.dom.leading??new oi(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new oi(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const t=this;let n=0;const r=this.dom.leading;this.each(function(s){if($R(this.node))return;const a=Di.window.getComputedStyle(this.node).getPropertyValue("font-size"),o=r*new oi(a);this.dom.newLined&&(this.attr("x",t.attr("x")),this.text()===`
`?n+=o:(this.attr("dy",s?o+n:0),n=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new oi(e.leading||1.3),this}writeDataToDom(){return Oj(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const t=this.node.childNodes;let n=0;e="";for(let r=0,s=t.length;r<s;++r)t[r].nodeName==="textPath"||$R(t[r])?r===0&&(n=r+1):(r!==n&&t[r].nodeType!==3&&Ol(t[r]).dom.newLined===!0&&(e+=`
`),e+=t[r].textContent);return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else for(let t=0,n=(e=(e+"").split(`
`)).length;t<n;t++)this.newLine(e[t]);return this.build(!1).rebuild()}}On(Mc,iX),Ai({Container:{text:gr(function(i=""){return this.put(new Mc).text(i)}),plain:gr(function(i=""){return this.put(new Mc).plain(i)})}}),Oi(Mc,"Text");class J_ extends fl{constructor(e,t=e){super(mr("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof Mc))return this;const t=e.index(this),n=Di.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=e.dom.leading*new oi(n);return this.dy(t?r:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}On(J_,iX),Ai({Tspan:{tspan:gr(function(i=""){const e=new J_;return this._build||this.clear(),this.put(e).text(i)})},Text:{newLine:function(i=""){return this.tspan(i).newLine()}}}),Oi(J_,"Tspan");class kC extends fl{constructor(e,t=e){super(mr("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new oi(e).divide(2))}}On(kC,{x:Hj,y:qj,cx:Wj,cy:jj,width:Xj,height:Yj}),Ai({Container:{circle:gr(function(i=0){return this.put(new kC).size(i).move(0,0)})}}),Oi(kC,"Circle");class OC extends io{constructor(e,t=e){super(mr("clipPath",e),t)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return cA("svg [clip-path*="+this.id()+"]")}}Ai({Container:{clip:gr(function(){return this.defs().put(new OC)})},Element:{clipper(){return this.reference("clip-path")},clipWith(i){const e=i instanceof OC?i:this.parent().clip().add(i);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),Oi(OC,"ClipPath");class e9 extends _a{constructor(e,t=e){super(mr("foreignObject",e),t)}}Ai({Container:{foreignObject:gr(function(i,e){return this.put(new e9).size(i,e)})}}),Oi(e9,"ForeignObject");var rX=Object.freeze({__proto__:null,dmove:function(i,e){return this.children().forEach(t=>{let n;try{n=t.node instanceof w1().SVGSVGElement?new as(t.attr(["x","y","width","height"])):t.bbox()}catch{return}const r=new Tn(t),s=r.translate(i,e).transform(r.inverse()),a=new Wi(n.x,n.y).transform(s);t.move(a.x,a.y)}),this},dx:function(i){return this.dmove(i,0)},dy:function(i){return this.dmove(0,i)},height:function(i,e=this.bbox()){return i==null?e.height:this.size(e.width,i,e)},move:function(i=0,e=0,t=this.bbox()){const n=i-t.x,r=e-t.y;return this.dmove(n,r)},size:function(i,e,t=this.bbox()){const n=gm(this,i,e,t),r=n.width/t.width,s=n.height/t.height;return this.children().forEach(a=>{const o=new Wi(t).transform(new Tn(a).inverse());a.scale(r,s,o.x,o.y)}),this},width:function(i,e=this.bbox()){return i==null?e.width:this.size(i,e.height,e)},x:function(i,e=this.bbox()){return i==null?e.x:this.move(i,e.y,e)},y:function(i,e=this.bbox()){return i==null?e.y:this.move(e.x,i,e)}});class ad extends io{constructor(e,t=e){super(mr("g",e),t)}}On(ad,rX),Ai({Container:{group:gr(function(){return this.put(new ad)})}}),Oi(ad,"G");class g_ extends io{constructor(e,t=e){super(mr("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,mm)}}On(g_,rX),Ai({Container:{link:gr(function(i){return this.put(new g_).to(i)})},Element:{unlink(){const i=this.linker();if(!i)return this;const e=i.parent();if(!e)return this.remove();const t=e.index(i);return e.add(this,t),i.remove(),this},linkTo(i){let e=this.linker();return e||(e=new g_,this.wrap(e)),typeof i=="function"?i.call(e,e):e.to(i),this},linker(){const i=this.parent();return i&&i.node.nodeName.toLowerCase()==="a"?i:null}}}),Oi(g_,"A");class IC extends io{constructor(e,t=e){super(mr("mask",e),t)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return cA("svg [mask*="+this.id()+"]")}}Ai({Container:{mask:gr(function(){return this.defs().put(new IC)})},Element:{masker(){return this.reference("mask")},maskWith(i){const e=i instanceof IC?i:this.parent().mask().add(i);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),Oi(IC,"Mask");class t9 extends _a{constructor(e,t=e){super(mr("stop",e),t)}update(e){return(typeof e=="number"||e instanceof oi)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new oi(e.offset)),this}}Ai({Gradient:{stop:function(i,e,t){return this.put(new t9).update(i,e,t)}}}),Oi(t9,"Stop");class BC extends _a{constructor(e,t=e){super(mr("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,n={}){return this.rule("@font-face",{fontFamily:e,src:t,...n})}rule(e,t){return this.addText(function(n,r){if(!n)return"";if(!r)return n;let s=n+"{";for(const a in r)s+=a.replace(/([A-Z])/g,function(o,l){return"-"+l.toLowerCase()})+":"+r[a]+";";return s+="}",s}(e,t))}}Ai("Dom",{style(i,e){return this.put(new BC).rule(i,e)},fontface(i,e,t){return this.put(new BC).font(i,e,t)}}),Oi(BC,"Style");class FC extends Mc{constructor(e,t=e){super(mr("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let n=null;return t&&(n=t.plot(e)),e==null?n:this}track(){return this.reference("href")}}Ai({Container:{textPath:gr(function(i,e){return i instanceof Mc||(i=this.text(i)),i.path(e)})},Text:{path:gr(function(i,e=!0){const t=new FC;let n;if(i instanceof ig||(i=this.defs().path(i)),t.attr("href","#"+i,mm),e)for(;n=this.node.firstChild;)t.node.appendChild(n);return this.put(t)}),textPath(){return this.findOne("textPath")}},Path:{text:gr(function(i){return i instanceof Mc||(i=new Mc().addTo(this.parent()).text(i)),i.path(this)}),targets(){return cA("svg textPath").filter(i=>(i.attr("href")||"").includes(this.id()))}}}),FC.prototype.MorphArray=Tc,Oi(FC,"TextPath");class n9 extends fl{constructor(e,t=e){super(mr("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,mm)}}Ai({Container:{use:gr(function(i,e){return this.put(new n9).use(i,e)})}}),Oi(n9,"Use");const gTe=Ja;On([n5,i5,Q_,Dx,Z_],po("viewbox")),On([Tp,Ep,Mp,ig],po("marker")),On(Mc,po("Text")),On(ig,po("Path")),On(CT,po("Defs")),On([Mc,J_],po("Tspan")),On([K_,$_,Iy,al],po("radius")),On(S1,po("EventTarget")),On(fd,po("Dom")),On(_a,po("Element")),On(fl,po("Shape")),On([io,$j],po("Container")),On(Iy,po("Gradient")),On(al,po("Runner")),Zp.extend([...new Set(Dj)]),function(i=[]){t5.push(...[].concat(i))}([oi,rr,as,Tn,Kp,dd,Tc,Wi]),On(t5,{to(i){return new up().type(this.constructor).from(this.toArray()).to(i)},fromArray(i){return this.init(i),this},toConsumable(){return this.toArray()},morph(i,e,t,n,r){return this.fromArray(i.map(function(s,a){return n.step(s,e[a],t,r[a],r)}))}});class Mr extends _a{constructor(e){super(mr("filter",e),e),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(e,t){return!(e=super.put(e,t)).attr("in")&&this.$autoSetIn&&e.attr("in",this.$source),e.attr("result")||e.attr("result",e.id()),e}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return cA('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class jP extends _a{constructor(e,t){super(e,t),this.result(this.id())}in(e){if(e==null){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",e)}result(e){return this.attr("result",e)}toString(){return this.result()}}const Rl=i=>function(...e){for(let t=i.length;t--;)e[t]!=null&&this.attr(i[t],e[t])},mTe={blend:Rl(["in","in2","mode"]),colorMatrix:Rl(["type","values"]),composite:Rl(["in","in2","operator"]),convolveMatrix:function(i){i=new Kp(i).toString(),this.attr({order:Math.sqrt(i.split(" ").length),kernelMatrix:i})},diffuseLighting:Rl(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:Rl(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:Rl(["in","dx","dy","stdDeviation"]),flood:Rl(["flood-color","flood-opacity"]),gaussianBlur:function(i=0,e=i){this.attr("stdDeviation",i+" "+e)},image:function(i){this.attr("href",i,mm)},morphology:Rl(["operator","radius"]),offset:Rl(["dx","dy"]),specularLighting:Rl(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:Rl([]),turbulence:Rl(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(i=>{const e=Am(i),t=mTe[i];Mr[e+"Effect"]=class extends jP{constructor(n){super(mr("fe"+e,n),n)}update(n){return t.apply(this,n),this}},Mr.prototype[i]=gr(function(n,...r){const s=new Mr[e+"Effect"];return n==null?this.put(s):(typeof n=="function"?n.call(s,s):r.unshift(n),this.put(s).update(r))})}),On(Mr,{merge(i){const e=this.put(new Mr.MergeEffect);return typeof i=="function"?(i.call(e,e),e):((i instanceof Array?i:[...arguments]).forEach(t=>{t instanceof Mr.MergeNode?e.put(t):e.mergeNode(t)}),e)},componentTransfer(i={}){const e=this.put(new Mr.ComponentTransferEffect);if(typeof i=="function")return i.call(e,e),e;i.r||i.g||i.b||i.a||(i={r:i,g:i,b:i,a:i});for(const t in i)e.add(new Mr["Func"+t.toUpperCase()](i[t]));return e}});["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(i=>{const e=Am(i);Mr[e]=class extends jP{constructor(t){super(mr("fe"+e,t),t)}}});["funcR","funcG","funcB","funcA"].forEach(function(i){const e=Mr[Am(i)],t=gr(function(){return this.put(new e)});Mr.ComponentTransferEffect.prototype[i]=t});["distantLight","pointLight","spotLight"].forEach(i=>{const e=Mr[Am(i)],t=gr(function(){return this.put(new e)});Mr.DiffuseLightingEffect.prototype[i]=t,Mr.SpecularLightingEffect.prototype[i]=t}),On(Mr.MergeEffect,{mergeNode(i){return this.put(new Mr.MergeNode).attr("in",i)}}),On(CT,{filter:function(i){const e=this.put(new Mr);return typeof i=="function"&&i.call(e,e),e}}),On(io,{filter:function(i){return this.defs().filter(i)}}),On(_a,{filterWith:function(i){const e=i instanceof Mr?i:this.defs().filter(i);return this.attr("filter",e)},unfilter:function(i){return this.attr("filter",null)},filterer(){return this.reference("filter")}});const vTe={blend:function(i,e){return this.parent()&&this.parent().blend(this,i,e)},colorMatrix:function(i,e){return this.parent()&&this.parent().colorMatrix(i,e).in(this)},componentTransfer:function(i){return this.parent()&&this.parent().componentTransfer(i).in(this)},composite:function(i,e){return this.parent()&&this.parent().composite(this,i,e)},convolveMatrix:function(i){return this.parent()&&this.parent().convolveMatrix(i).in(this)},diffuseLighting:function(i,e,t,n){return this.parent()&&this.parent().diffuseLighting(i,t,n).in(this)},displacementMap:function(i,e,t,n){return this.parent()&&this.parent().displacementMap(this,i,e,t,n)},dropShadow:function(i,e,t){return this.parent()&&this.parent().dropShadow(this,i,e,t).in(this)},flood:function(i,e){return this.parent()&&this.parent().flood(i,e)},gaussianBlur:function(i,e){return this.parent()&&this.parent().gaussianBlur(i,e).in(this)},image:function(i){return this.parent()&&this.parent().image(i)},merge:function(i){return i=i instanceof Array?i:[...i],this.parent()&&this.parent().merge(this,...i)},morphology:function(i,e){return this.parent()&&this.parent().morphology(i,e).in(this)},offset:function(i,e){return this.parent()&&this.parent().offset(i,e).in(this)},specularLighting:function(i,e,t,n,r){return this.parent()&&this.parent().specularLighting(i,t,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(i,e,t,n,r){return this.parent()&&this.parent().turbulence(i,e,t,n,r).in(this)}};On(jP,vTe),On(Mr.MergeEffect,{in:function(i){return i instanceof Mr.MergeNode?this.add(i,0):this.add(new Mr.MergeNode().in(i),0),this}}),On([Mr.CompositeEffect,Mr.BlendEffect,Mr.DisplacementMapEffect],{in2:function(i){if(i==null){const e=this.attr("in2");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in2",i)}}),Mr.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var ya=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"getDefaultFilter",value:function(e,t){var n=this.w;e.unfilter(!0),new Mr().size("120%","180%","-5%","-40%"),n.config.chart.dropShadow.enabled&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"applyFilter",value:function(e,t,n){var r,s=this,a=this.w;if(e.unfilter(!0),n!=="none"){var o,l,c=a.config.chart.dropShadow,u=n==="lighten"?2:.3;e.filterWith(function(h){h.colorMatrix({type:"matrix",values:`
          `.concat(u,` 0 0 0 0
          0 `).concat(u,` 0 0 0
          0 0 `).concat(u,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),c.enabled&&s.addShadow(h,t,c,"brightness")}),!c.noUserSpaceOnUse&&((o=e.filterer())===null||o===void 0||(l=o.node)===null||l===void 0||l.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((r=e.filterer())===null||r===void 0?void 0:r.node)}else this.getDefaultFilter(e,t)}},{key:"addShadow",value:function(e,t,n,r){var s,a=this.w,o=n.blur,l=n.top,c=n.left,u=n.color,h=n.opacity;if(u=Array.isArray(u)?u[t]:u,((s=a.config.chart.dropShadow.enabledOnSeries)===null||s===void 0?void 0:s.length)>0&&a.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;e.offset({in:r,dx:c,dy:l,result:"offset"}),e.gaussianBlur({in:"offset",stdDeviation:o,result:"blur"}),e.flood({"flood-color":u,"flood-opacity":h,result:"flood"}),e.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),e.merge(["shadow",r])}},{key:"dropShadow",value:function(e,t){var n,r,s,a,o,l=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.w;return e.unfilter(!0),Ne.isMsEdge()&&u.config.chart.type==="radialBar"||((n=u.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.length)>0&&((s=u.config.chart.dropShadow.enabledOnSeries)===null||s===void 0?void 0:s.indexOf(c))===-1?e:(e.filterWith(function(h){l.addShadow(h,c,t,"SourceGraphic")}),t.noUserSpaceOnUse||(a=e.filterer())===null||a===void 0||(o=a.node)===null||o===void 0||o.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((r=e.filterer())===null||r===void 0?void 0:r.node),e)}},{key:"setSelectionFilter",value:function(e,t,n){var r=this.w;if(r.globals.selectedDataPoints[t]!==void 0&&r.globals.selectedDataPoints[t].indexOf(n)>-1){e.node.setAttribute("selected",!0);var s=r.config.states.active.filter;s!=="none"&&this.applyFilter(e,t,s.type)}}},{key:"_scaleFilterSize",value:function(e){e&&function(t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),i}(),yt=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"roundPathCorners",value:function(e,t){function n(U,F,z){var V=F.x-U.x,W=F.y-U.y,X=Math.sqrt(V*V+W*W);return r(U,F,Math.min(1,z/X))}function r(U,F,z){return{x:U.x+(F.x-U.x)*z,y:U.y+(F.y-U.y)*z}}function s(U,F){U.length>2&&(U[U.length-2]=F.x,U[U.length-1]=F.y)}function a(U){return{x:parseFloat(U[U.length-2]),y:parseFloat(U[U.length-1])}}e.indexOf("NaN")>-1&&(e="");var o=e.split(/[,\s]/).reduce(function(U,F){var z=F.match(/^([a-zA-Z])(.+)/);return z?(U.push(z[1]),U.push(z[2])):U.push(F),U},[]).reduce(function(U,F){return parseFloat(F)==F&&U.length?U[U.length-1].push(F):U.push([F]),U},[]),l=[];if(o.length>1){var c=a(o[0]),u=null;o[o.length-1][0]=="Z"&&o[0].length>2&&(u=["L",c.x,c.y],o[o.length-1]=u),l.push(o[0]);for(var h=1;h<o.length;h++){var d=l[l.length-1],A=o[h],x=A==u?o[1]:o[h+1];if(x&&d&&d.length>2&&A[0]=="L"&&x.length>2&&x[0]=="L"){var _,S,w=a(d),C=a(A),P=a(x);_=n(C,w,t),S=n(C,P,t),s(A,_),A.origPoint=C,l.push(A);var L=r(_,C,.5),D=r(C,S,.5),B=["C",L.x,L.y,D.x,D.y,S.x,S.y];B.origPoint=C,l.push(B)}else l.push(A)}if(u){var k=a(l[l.length-1]);l.push(["Z"]),s(l[0],k)}}else l=o;return l.reduce(function(U,F){return U+F.join(" ")+" "},"")}},{key:"drawLine",value:function(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:n,y2:r,stroke:s,"stroke-dasharray":a,"stroke-width":o,"stroke-linecap":l})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,u=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,h=this.w.globals.dom.Paper.rect();return h.attr({x:e,y:t,width:n>0?n:0,height:r>0?r:0,rx:s,ry:s,opacity:o,"stroke-width":l!==null?l:0,stroke:c!==null?c:"none","stroke-dasharray":u}),h.node.setAttribute("fill",a),h}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:r,stroke:t,"stroke-width":n})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var n=this.w.globals.dom.Paper.circle(2*e);return t!==null&&n.attr(t),n}},{key:"drawPath",value:function(e){var t=e.d,n=t===void 0?"":t,r=e.stroke,s=r===void 0?"#a8a8a8":r,a=e.strokeWidth,o=a===void 0?1:a,l=e.fill,c=e.fillOpacity,u=c===void 0?1:c,h=e.strokeOpacity,d=h===void 0?1:h,A=e.classes,x=e.strokeLinecap,_=x===void 0?null:x,S=e.strokeDashArray,w=S===void 0?0:S,C=this.w;return _===null&&(_=C.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(C.globals.gridHeight)),C.globals.dom.Paper.path(n).attr({fill:l,"fill-opacity":u,stroke:s,"stroke-opacity":d,"stroke-linecap":_,"stroke-width":o,"stroke-dasharray":w,class:A})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var n=["M",e,t].join(" ");return n}},{key:"line",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=null;return n===null?r=[" L",e,t].join(" "):n==="H"?r=[" H",e].join(" "):n==="V"&&(r=[" V",t].join(" ")),r}},{key:"curve",value:function(e,t,n,r,s,a){var o=["C",e,t,n,r,s,a].join(" ");return o}},{key:"quadraticCurve",value:function(e,t,n,r){return["Q",e,t,n,r].join(" ")}},{key:"arc",value:function(e,t,n,r,s,a,o){var l="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(l="a");var c=[l,e,t,n,r,s,a,o].join(" ");return c}},{key:"renderPaths",value:function(e){var t,n=e.j,r=e.realIndex,s=e.pathFrom,a=e.pathTo,o=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,u=e.fill,h=e.animationDelay,d=e.initialSpeed,A=e.dataChangeSpeed,x=e.className,_=e.chartType,S=e.shouldClipToGrid,w=S===void 0||S,C=e.bindEventsOnPaths,P=C===void 0||C,L=e.drawShadow,D=L===void 0||L,B=this.w,k=new ya(this.ctx),U=new pm(this.ctx),F=this.w.config.chart.animations.enabled,z=F&&this.w.config.chart.animations.dynamicAnimation.enabled;if(s&&s.startsWith("M 0 0")&&a){var V=a.match(/^M\s+[\d.-]+\s+[\d.-]+/);V&&(s=s.replace(/^M\s+0\s+0/,V[0]))}var W=!!(F&&!B.globals.resized||z&&B.globals.dataChanged&&B.globals.shouldAnimate);W?t=s:(t=a,B.globals.animationEnded=!0);var X=B.config.stroke.dashArray,J=0;J=Array.isArray(X)?X[r]:B.config.stroke.dashArray;var K=this.drawPath({d:t,stroke:o,strokeWidth:l,fill:u,fillOpacity:1,classes:x,strokeLinecap:c,strokeDashArray:J});K.attr("index",r),w&&(_==="bar"&&!B.globals.isHorizontal||B.globals.comboCharts?K.attr({"clip-path":"url(#gridRectBarMask".concat(B.globals.cuid,")")}):K.attr({"clip-path":"url(#gridRectMask".concat(B.globals.cuid,")")})),B.config.chart.dropShadow.enabled&&D&&k.dropShadow(K,B.config.chart.dropShadow,r),P&&(K.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,K)),K.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,K)),K.node.addEventListener("mousedown",this.pathMouseDown.bind(this,K))),K.attr({pathTo:a,pathFrom:s});var Y={el:K,j:n,realIndex:r,pathFrom:s,pathTo:a,fill:u,strokeWidth:l,delay:h};return!F||B.globals.resized||B.globals.dataChanged?!B.globals.resized&&B.globals.dataChanged||U.showDelayedElements():U.animatePathsGradually(Bt(Bt({},Y),{},{speed:d})),B.globals.dataChanged&&z&&W&&U.animatePathsGradually(Bt(Bt({},Y),{},{speed:A})),K}},{key:"drawPattern",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,n,function(a){e==="horizontalLines"?a.line(0,0,n,0).stroke({color:r,width:s+1}):e==="verticalLines"?a.line(0,0,0,t).stroke({color:r,width:s+1}):e==="slantedLines"?a.line(0,0,t,n).stroke({color:r,width:s}):e==="squares"?a.rect(t,n).fill("none").stroke({color:r,width:s}):e==="circles"&&a.circle(t).fill("none").stroke({color:r,width:s})})}},{key:"drawGradient",value:function(e,t,n,r,s){var a,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,h=this.w;t.length<9&&t.indexOf("#")===0&&(t=Ne.hexToRgba(t,r)),n.length<9&&n.indexOf("#")===0&&(n=Ne.hexToRgba(n,s));var d=0,A=1,x=1,_=null;l!==null&&(d=l[0]!==void 0?l[0]/100:0,A=l[1]!==void 0?l[1]/100:1,x=l[2]!==void 0?l[2]/100:1,_=l[3]!==void 0?l[3]/100:null);var S=!(h.config.chart.type!=="donut"&&h.config.chart.type!=="pie"&&h.config.chart.type!=="polarArea"&&h.config.chart.type!=="bubble");if(a=c&&c.length!==0?h.globals.dom.Paper.gradient(S?"radial":"linear",function(P){(Array.isArray(c[u])?c[u]:c).forEach(function(L){P.stop(L.offset/100,L.color,L.opacity)})}):h.globals.dom.Paper.gradient(S?"radial":"linear",function(P){P.stop(d,t,r),P.stop(A,n,s),P.stop(x,n,s),_!==null&&P.stop(_,t,r)}),S){var w=h.globals.gridWidth/2,C=h.globals.gridHeight/2;h.config.chart.type!=="bubble"?a.attr({gradientUnits:"userSpaceOnUse",cx:w,cy:C,r:o}):a.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?a.from(0,0).to(0,1):e==="diagonal"?a.from(0,0).to(1,1):e==="horizontal"?a.from(0,1).to(1,1):e==="diagonal2"&&a.from(1,0).to(0,1);return a}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,n=e.maxWidth,r=e.fontSize,s=e.fontFamily,a=this.getTextRects(t,r,s),o=a.width/t.length,l=Math.floor(n/o);return n<a.width?t.slice(0,l-3)+"...":t}},{key:"drawText",value:function(e){var t=this,n=e.x,r=e.y,s=e.text,a=e.textAnchor,o=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.foreColor,h=e.opacity,d=e.maxWidth,A=e.cssClass,x=A===void 0?"":A,_=e.isPlainText,S=_===void 0||_,w=e.dominantBaseline,C=w===void 0?"auto":w,P=this.w;s===void 0&&(s="");var L=s;a||(a="start"),u&&u.length||(u=P.config.chart.foreColor),l=l||P.config.chart.fontFamily,c=c||"regular";var D,B={maxWidth:d,fontSize:o=o||"11px",fontFamily:l};return Array.isArray(s)?D=P.globals.dom.Paper.text(function(k){for(var U=0;U<s.length;U++)L=s[U],d&&(L=t.getTextBasedOnMaxWidth(Bt({text:s[U]},B))),U===0?k.tspan(L):k.tspan(L).newLine()}):(d&&(L=this.getTextBasedOnMaxWidth(Bt({text:s},B))),D=S?P.globals.dom.Paper.plain(s):P.globals.dom.Paper.text(function(k){return k.tspan(L)})),D.attr({x:n,y:r,"text-anchor":a,"dominant-baseline":C,"font-size":o,"font-family":l,"font-weight":c,fill:u,class:"apexcharts-text "+x}),D.node.style.fontFamily=l,D.node.style.opacity=h,D}},{key:"getMarkerPath",value:function(e,t,n,r){var s="";switch(n){case"cross":s="M ".concat(e-(r/=1.4)," ").concat(t-r," L ").concat(e+r," ").concat(t+r,"  M ").concat(e-r," ").concat(t+r," L ").concat(e+r," ").concat(t-r);break;case"plus":s="M ".concat(e-(r/=1.12)," ").concat(t," L ").concat(e+r," ").concat(t,"  M ").concat(e," ").concat(t-r," L ").concat(e," ").concat(t+r);break;case"star":case"sparkle":var a=5;r*=1.15,n==="sparkle"&&(r/=1.1,a=4);for(var o=Math.PI/a,l=0;l<=2*a;l++){var c=l*o,u=l%2==0?r:r/2;s+=(l===0?"M":"L")+(e+u*Math.sin(c))+","+(t-u*Math.cos(c))}s+="Z";break;case"triangle":s="M ".concat(e," ").concat(t-r,` 
             L `).concat(e+r," ").concat(t+r,` 
             L `).concat(e-r," ").concat(t+r,` 
             Z`);break;case"square":case"rect":s="M ".concat(e-(r/=1.125)," ").concat(t-r,` 
           L `).concat(e+r," ").concat(t-r,` 
           L `).concat(e+r," ").concat(t+r,` 
           L `).concat(e-r," ").concat(t+r,` 
           Z`);break;case"diamond":r*=1.05,s="M ".concat(e," ").concat(t-r,` 
             L `).concat(e+r," ").concat(t,` 
             L `).concat(e," ").concat(t+r,` 
             L `).concat(e-r," ").concat(t,` 
            Z`);break;case"line":s="M ".concat(e-(r/=1.1)," ").concat(t,` 
           L `).concat(e+r," ").concat(t);break;default:r*=2,s="M ".concat(e,", ").concat(t,` 
           m -`).concat(r/2,`, 0 
           a `).concat(r/2,",").concat(r/2," 0 1,0 ").concat(r,`,0 
           a `).concat(r/2,",").concat(r/2," 0 1,0 -").concat(r,",0")}return s}},{key:"drawMarkerShape",value:function(e,t,n,r,s){var a=this.drawPath({d:this.getMarkerPath(e,t,n,r,s),stroke:s.pointStrokeColor,strokeDashArray:s.pointStrokeDashArray,strokeWidth:s.pointStrokeWidth,fill:s.pointFillColor,fillOpacity:s.pointFillOpacity,strokeOpacity:s.pointStrokeOpacity});return a.attr({cx:e,cy:t,shape:s.shape,class:s.class?s.class:""}),a}},{key:"drawMarker",value:function(e,t,n){e=e||0;var r=n.pSize||0;return Ne.isNumber(t)||(r=0,t=0),this.drawMarkerShape(e,t,n==null?void 0:n.shape,r,Bt(Bt({},n),n.shape==="line"||n.shape==="plus"||n.shape==="cross"?{pointStrokeColor:n.pointFillColor,pointStrokeOpacity:n.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var n=this.w,r=new ya(this.ctx),s=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);if(typeof n.config.chart.events.dataPointMouseEnter=="function"&&n.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:s,dataPointIndex:a,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:s,dataPointIndex:a,w:n}]),(n.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&n.config.states.hover.filter.type!=="none"&&!n.globals.isTouchDevice){var o=n.config.states.hover.filter;r.applyFilter(e,s,o.type)}}},{key:"pathMouseLeave",value:function(e,t){var n=this.w,r=new ya(this.ctx),s=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);typeof n.config.chart.events.dataPointMouseLeave=="function"&&n.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:s,dataPointIndex:a,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:s,dataPointIndex:a,w:n}]),n.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||n.config.states.hover.filter.type!=="none"&&r.getDefaultFilter(e,s)}},{key:"pathMouseDown",value:function(e,t){var n=this.w,r=new ya(this.ctx),s=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10),o="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),n.globals.selectedDataPoints[s].indexOf(a)>-1){var l=n.globals.selectedDataPoints[s].indexOf(a);n.globals.selectedDataPoints[s].splice(l,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var c=n.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),u=n.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),h=function(x){Array.prototype.forEach.call(x,function(_){_.node.setAttribute("selected","false"),r.getDefaultFilter(_,s)})};h(c),h(u)}e.node.setAttribute("selected","true"),o="true",n.globals.selectedDataPoints[s]===void 0&&(n.globals.selectedDataPoints[s]=[]),n.globals.selectedDataPoints[s].push(a)}if(o==="true"){var d=n.config.states.active.filter;if(d!=="none")r.applyFilter(e,s,d.type);else if(n.config.states.hover.filter!=="none"&&!n.globals.isTouchDevice){var A=n.config.states.hover.filter;r.applyFilter(e,s,A.type)}}else n.config.states.active.filter.type!=="none"&&(n.config.states.hover.filter.type==="none"||n.globals.isTouchDevice?r.getDefaultFilter(e,s):(A=n.config.states.hover.filter,r.applyFilter(e,s,A.type)));typeof n.config.chart.events.dataPointSelection=="function"&&n.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:s,dataPointIndex:a,w:n}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:s,dataPointIndex:a,w:n}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,n,r){var s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:n,foreColor:"#fff",opacity:0});r&&o.attr("transform",r),a.globals.dom.Paper.add(o);var l=o.bbox();return s||(l=o.node.getBoundingClientRect()),o.remove(),{width:l.width,height:l.height}}},{key:"placeTextWithEllipsis",value:function(e,t,n){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=n/1.1)){for(var r=t.length-3;r>0;r-=3)if(e.getSubStringLength(0,r)<=n/1.1)return void(e.textContent=t.substring(0,r)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}}]),i}(),ls=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,n=[];if(t.globals.series.length===0)return n;for(var r=0;r<t.globals.series[t.globals.maxValsInArrayIndex].length;r++){for(var s=0,a=0;a<t.globals.series.length;a++)t.globals.series[a][r]!==void 0&&e.indexOf(a)===-1&&(s+=t.globals.series[a][r]);n.push(s)}return n}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce(function(t,n){return t+n},0):this.w.globals.series[e].reduce(function(t,n){return t+n},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,n=[];return t.globals.seriesGroups.forEach(function(r){var s=[];t.config.series.forEach(function(o,l){r.indexOf(t.globals.seriesNames[l])>-1&&s.push(l)});var a=t.globals.series.map(function(o,l){return s.indexOf(l)===-1?l:-1}).filter(function(o){return o!==-1});n.push(e.getStackedSeriesTotals(a))}),n}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,n=[],r=[],s=[],a=e.series.length>t.yaxis.length||t.yaxis.some(function(h){return Array.isArray(h.seriesName)});t.series.forEach(function(h,d){s.push(d),r.push(null)}),t.yaxis.forEach(function(h,d){n[d]=[]});var o=[];t.yaxis.forEach(function(h,d){var A=!1;if(h.seriesName){var x=[];Array.isArray(h.seriesName)?x=h.seriesName:x.push(h.seriesName),x.forEach(function(_){t.series.forEach(function(S,w){if(S.name===_){var C=w;d===w||a?!a||s.indexOf(w)>-1?n[d].push([d,w]):console.warn("Series '"+S.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(n[w].push([w,d]),C=d),A=!0,(C=s.indexOf(C))!==-1&&s.splice(C,1)}})})}A||o.push(d)}),n=n.map(function(h,d){var A=[];return h.forEach(function(x){r[x[1]]=x[0],A.push(x[1])}),A});for(var l=t.yaxis.length-1,c=0;c<o.length&&(l=o[c],n[l]=[],s);c++){var u=s[0];s.shift(),n[l].push(u),r[u]=l}s.forEach(function(h){n[l].push(h),r[h]=l}),e.seriesYAxisMap=n.map(function(h){return h}),e.seriesYAxisReverseMap=r.map(function(h){return h}),e.seriesYAxisMap.forEach(function(h,d){h.forEach(function(A){t.series[A]&&t.series[A].group===void 0&&(t.series[A].group="apexcharts-axis-".concat(d.toString()))})})}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter(function(t){return t!==null}):this.w.config.series[e].data.filter(function(t){return t!==null})).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every(function(t,n,r){return t===r[0]})}},{key:"getCategoryLabels",value:function(e){var t=this.w,n=e.slice();return t.config.xaxis.convertedCatToNumeric&&(n=e.map(function(r,s){return t.config.xaxis.labels.formatter(r-t.globals.minX+1)})),n}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,e.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach(function(n){t=Math.max(t,n)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(function(n){t=Math.max(t,n.size)}),t>0&&(e.config.markers.hover.size>0?t=e.config.markers.hover.size:t+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map(function(t,n){var r=0;if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=t[s];else r+=t;return r})}},{key:"getSeriesTotalsXRange",value:function(e,t){var n=this.w;return n.globals.series.map(function(r,s){for(var a=0,o=0;o<r.length;o++)n.globals.seriesX[s][o]>e&&n.globals.seriesX[s][o]<t&&(a+=r[o]);return a})}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map(function(t,n){var r=[];if(Array.isArray(t))for(var s=0;s<t.length;s++){var a=e.globals.stackedSeriesTotals[s],o=0;a&&(o=100*t[s]/a),r.push(o)}else{var l=100*t/e.globals.seriesTotals.reduce(function(c,u){return c+u},0);r.push(l)}return r})}},{key:"getCalculatedRatios",value:function(){var e,t,n,r=this,s=this.w,a=s.globals,o=[],l=0,c=[],u=.1,h=0;if(a.yRange=[],a.isMultipleYAxis)for(var d=0;d<a.minYArr.length;d++)a.yRange.push(Math.abs(a.minYArr[d]-a.maxYArr[d])),c.push(0);else a.yRange.push(Math.abs(a.minY-a.maxY));a.xRange=Math.abs(a.maxX-a.minX),a.zRange=Math.abs(a.maxZ-a.minZ);for(var A=0;A<a.yRange.length;A++)o.push(a.yRange[A]/a.gridHeight);if(t=a.xRange/a.gridWidth,e=a.yRange/a.gridWidth,n=a.xRange/a.gridHeight,(l=a.zRange/a.gridHeight*16)||(l=1),a.minY!==Number.MIN_VALUE&&Math.abs(a.minY)!==0&&(a.hasNegs=!0),s.globals.seriesYAxisReverseMap.length>0){var x=function(S,w){var C=s.config.yaxis[s.globals.seriesYAxisReverseMap[w]],P=S<0?-1:1;return S=Math.abs(S),C.logarithmic&&(S=r.getBaseLog(C.logBase,S)),-P*S/o[w]};if(a.isMultipleYAxis){c=[];for(var _=0;_<o.length;_++)c.push(x(a.minYArr[_],_))}else(c=[]).push(x(a.minY,0)),a.minY!==Number.MIN_VALUE&&Math.abs(a.minY)!==0&&(u=-a.minY/e,h=a.minX/t)}else(c=[]).push(0),u=0,h=0;return{yRatio:o,invertedYRatio:e,zRatio:l,xRatio:t,invertedXRatio:n,baseLineInvertedY:u,baseLineY:c,baseLineX:h}}},{key:"getLogSeries",value:function(e){var t=this,n=this.w;return n.globals.seriesLog=e.map(function(r,s){var a=n.globals.seriesYAxisReverseMap[s];return n.config.yaxis[a]&&n.config.yaxis[a].logarithmic?r.map(function(o){return o===null?null:t.getLogVal(n.config.yaxis[a].logBase,o,s)}):r}),n.globals.invalidLogScale?e:n.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(e,t){if(e===null)return null;var n=this.w,r=n.globals.seriesYAxisReverseMap[t];return n.config.yaxis[r]&&n.config.yaxis[r].logarithmic?this.getLogVal(n.config.yaxis[r].logBase,e,t):e}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,n){if(t<=0)return 0;var r=this.w,s=r.globals.minYArr[n]===0?-1:this.getBaseLog(e,r.globals.minYArr[n]),a=(r.globals.maxYArr[n]===0?0:this.getBaseLog(e,r.globals.maxYArr[n]))-s;return t<1?t/a:(this.getBaseLog(e,t)-s)/a}},{key:"getLogYRatios",value:function(e){var t=this,n=this.w,r=this.w.globals;return r.yLogRatio=e.slice(),r.logYRange=r.yRange.map(function(s,a){var o=n.globals.seriesYAxisReverseMap[a];if(n.config.yaxis[o]&&t.w.config.yaxis[o].logarithmic){var l,c=-Number.MAX_VALUE,u=Number.MIN_VALUE;return r.seriesLog.forEach(function(h,d){h.forEach(function(A){n.config.yaxis[d]&&n.config.yaxis[d].logarithmic&&(c=Math.max(A,c),u=Math.min(A,u))})}),l=Math.pow(r.yRange[a],Math.abs(u-c)/r.yRange[a]),r.yLogRatio[a]=l/r.gridHeight,l}}),r.invalidLogScale?e.slice():r.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,n,r){var s=this.w,a=[];return e.series.length>0&&t.forEach(function(o){var l=[],c=[];e.i.forEach(function(u,h){s.config.series[u].group===o&&(l.push(e.series[h]),c.push(u))}),l.length>0&&a.push(r.draw(l,n,c))}),a}}],[{key:"checkComboSeries",value:function(e,t){var n=!1,r=0,s=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach(function(a){a.type!=="bar"&&a.type!=="column"&&a.type!=="candlestick"&&a.type!=="boxPlot"||r++,a.type!==void 0&&a.type!==t&&s++}),s>0&&(n=!0),{comboBarCount:r,comboCharts:n}}},{key:"extendArrayProps",value:function(e,t,n){var r,s,a,o,l,c;return(r=t)!==null&&r!==void 0&&r.yaxis&&(t=e.extendYAxis(t,n)),(s=t)!==null&&s!==void 0&&s.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(a=t)!==null&&a!==void 0&&(o=a.annotations)!==null&&o!==void 0&&o.xaxis&&(t=e.extendXAxisAnnotations(t)),(l=t)!==null&&l!==void 0&&(c=l.annotations)!==null&&c!==void 0&&c.points&&(t=e.extendPointAnnotations(t))),t}}]),i}(),RT=function(){function i(e){Kt(this,i),this.w=e.w,this.annoCtx=e}return Jt(i,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.w;if(e.label.orientation==="vertical"){var r=t!==null?t:0,s=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(r,"']"));if(s!==null){var a=s.getBoundingClientRect();s.setAttribute("x",parseFloat(s.getAttribute("x"))-a.height+4);var o=e.label.position==="top"?a.width:-a.width;s.setAttribute("y",parseFloat(s.getAttribute("y"))+o);var l=this.annoCtx.graphics.rotateAroundCenter(s),c=l.x,u=l.y;s.setAttribute("transform","rotate(-90 ".concat(c," ").concat(u,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var n=this.w;if(!e||!t.label.text||!String(t.label.text).trim())return null;var r=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),s=e.getBoundingClientRect(),a=t.label.style.padding,o=a.left,l=a.right,c=a.top,u=a.bottom;if(t.label.orientation==="vertical"){var h=[o,l,c,u];c=h[0],u=h[1],o=h[2],l=h[3]}var d=s.left-r.left-o,A=s.top-r.top-c,x=this.annoCtx.graphics.drawRect(d-n.globals.barPadForNumericAxis,A,s.width+o+l,s.height+c+u,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&x.node.classList.add(t.id),x}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,n=function(r,s,a){var o=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(s,"']"));if(o){var l=o.parentNode,c=e.addBackgroundToAnno(o,r);c&&(l.insertBefore(c.node,o),r.label.mouseEnter&&c.node.addEventListener("mouseenter",r.label.mouseEnter.bind(e,r)),r.label.mouseLeave&&c.node.addEventListener("mouseleave",r.label.mouseLeave.bind(e,r)),r.label.click&&c.node.addEventListener("click",r.label.click.bind(e,r)))}};t.config.annotations.xaxis.forEach(function(r,s){return n(r,s,"xaxis")}),t.config.annotations.yaxis.forEach(function(r,s){return n(r,s,"yaxis")}),t.config.annotations.points.forEach(function(r,s){return n(r,s,"point")})}},{key:"getY1Y2",value:function(e,t){var n,r=this.w,s=e==="y1"?t.y:t.y2,a=!1;if(this.annoCtx.invertAxis){var o=r.config.xaxis.convertedCatToNumeric?r.globals.categoryLabels:r.globals.labels,l=o.indexOf(s),c=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(l+1,")"));n=c?parseFloat(c.getAttribute("y")):(r.globals.gridHeight/o.length-1)*(l+1)-r.globals.barHeight,t.seriesIndex!==void 0&&r.globals.barHeight&&(n-=r.globals.barHeight/2*(r.globals.series.length-1)-r.globals.barHeight*t.seriesIndex)}else{var u,h=r.globals.seriesYAxisMap[t.yAxisIndex][0],d=r.config.yaxis[t.yAxisIndex].logarithmic?new ls(this.annoCtx.ctx).getLogVal(r.config.yaxis[t.yAxisIndex].logBase,s,h)/r.globals.yLogRatio[h]:(s-r.globals.minYArr[h])/(r.globals.yRange[h]/r.globals.gridHeight);n=r.globals.gridHeight-Math.min(Math.max(d,0),r.globals.gridHeight),a=d>r.globals.gridHeight||d<0,!t.marker||t.y!==void 0&&t.y!==null||(n=0),(u=r.config.yaxis[t.yAxisIndex])!==null&&u!==void 0&&u.reversed&&(n=d)}return typeof s=="string"&&s.includes("px")&&(n=parseFloat(s)),{yP:n,clipped:a}}},{key:"getX1X2",value:function(e,t){var n=this.w,r=e==="x1"?t.x:t.x2,s=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,a=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,o=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,l=!1,c=this.annoCtx.inversedReversedAxis?(a-r)/(o/n.globals.gridWidth):(r-s)/(o/n.globals.gridWidth);return n.config.xaxis.type!=="category"&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||n.config.chart.sparkline.enabled||(c=this.getStringX(r)),typeof r=="string"&&r.includes("px")&&(c=parseFloat(r)),r==null&&t.marker&&(c=n.globals.gridWidth),t.seriesIndex!==void 0&&n.globals.barWidth&&!this.annoCtx.invertAxis&&(c-=n.globals.barWidth/2*(n.globals.series.length-1)-n.globals.barWidth*t.seriesIndex),typeof c!="number"&&(c=0,l=!0),parseFloat(c.toFixed(10))>parseFloat(n.globals.gridWidth.toFixed(10))?(c=n.globals.gridWidth,l=!0):c<0&&(c=0,l=!0),{x:c,clipped:l}}},{key:"getStringX",value:function(e){var t=this.w,n=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var r=t.globals.labels.map(function(a){return Array.isArray(a)?a.join(" "):a}).indexOf(e),s=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(r+1,")"));return s&&(n=parseFloat(s.getAttribute("x"))),n}}]),i}(),yTe=function(){function i(e){Kt(this,i),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new RT(this.annoCtx)}return Jt(i,[{key:"addXaxisAnnotation",value:function(e,t,n){var r,s=this.w,a=this.helpers.getX1X2("x1",e),o=a.x,l=a.clipped,c=!0,u=e.label.text,h=e.strokeDashArray;if(Ne.isNumber(o)){if(e.x2===null||e.x2===void 0){if(!l){var d=this.annoCtx.graphics.drawLine(o+e.offsetX,0+e.offsetY,o+e.offsetX,s.globals.gridHeight+e.offsetY,e.borderColor,h,e.borderWidth);t.appendChild(d.node),e.id&&d.node.classList.add(e.id)}}else{var A=this.helpers.getX1X2("x2",e);if(r=A.x,c=A.clipped,r<o){var x=o;o=r,r=x}var _=this.annoCtx.graphics.drawRect(o+e.offsetX,0+e.offsetY,r-o,s.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,h);_.node.classList.add("apexcharts-annotation-rect"),_.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),t.appendChild(_.node),e.id&&_.node.classList.add(e.id)}if(!l||!c){var S=this.annoCtx.graphics.getTextRects(u,parseFloat(e.label.style.fontSize)),w=e.label.position==="top"?4:e.label.position==="center"?s.globals.gridHeight/2+(e.label.orientation==="vertical"?S.width/2:0):s.globals.gridHeight,C=this.annoCtx.graphics.drawText({x:o+e.label.offsetX,y:w+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?S.width/2-12:-S.width/2:0),text:u,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});C.attr({rel:n}),t.appendChild(C.node),this.annoCtx.helpers.setOrientations(e,n)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map(function(r,s){e.addXaxisAnnotation(r,n.node,s)}),n}}]),i}(),va=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Jt(i,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var n=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return n=this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var n=this.w.globals.locale,r=this.w.config.xaxis.labels.datetimeUTC,s=["\0"].concat(Us(n.months)),a=[""].concat(Us(n.shortMonths)),o=[""].concat(Us(n.days)),l=[""].concat(Us(n.shortDays));function c(U,F){var z=U+"";for(F=F||2;z.length<F;)z="0"+z;return z}var u=r?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+u)).replace(/(^|[^\\])yy/g,"$1"+u.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+u);var h=(r?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+s[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+c(h))).replace(/(^|[^\\])M/g,"$1"+h);var d=r?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+l[0])).replace(/(^|[^\\])dd/g,"$1"+c(d))).replace(/(^|[^\\])d/g,"$1"+d);var A=r?e.getUTCHours():e.getHours(),x=A>12?A-12:A===0?12:A;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+c(A))).replace(/(^|[^\\])H/g,"$1"+A)).replace(/(^|[^\\])hh+/g,"$1"+c(x))).replace(/(^|[^\\])h/g,"$1"+x);var _=r?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+c(_))).replace(/(^|[^\\])m/g,"$1"+_);var S=r?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+c(S))).replace(/(^|[^\\])s/g,"$1"+S);var w=r?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+c(w,3)),w=Math.round(w/10),t=t.replace(/(^|[^\\])ff/g,"$1"+c(w)),w=Math.round(w/10);var C=A<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+w)).replace(/(^|[^\\])TT+/g,"$1"+C)).replace(/(^|[^\\])T/g,"$1"+C.charAt(0));var P=C.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+P)).replace(/(^|[^\\])t/g,"$1"+P.charAt(0));var L=-e.getTimezoneOffset(),D=r||!L?"Z":L>0?"+":"-";if(!r){var B=(L=Math.abs(L))%60;D+=c(Math.floor(L/60))+":"+c(B)}t=t.replace(/(^|[^\\])K/g,"$1"+D);var k=(r?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[k])).replace(new RegExp(l[0],"g"),l[k])).replace(new RegExp(s[0],"g"),s[h])).replace(new RegExp(a[0],"g"),a[h])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,n){var r=this.w;r.config.xaxis.min!==void 0&&(e=r.config.xaxis.min),r.config.xaxis.max!==void 0&&(t=r.config.xaxis.max);var s=this.getDate(e),a=this.getDate(t),o=this.formatDate(s,"yyyy MM dd HH mm ss fff").split(" "),l=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(l[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(l[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(l[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(l[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(l[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(l[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(l[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,n){return this.determineDaysOfMonths(e,t)-n}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,n){var r=this.daysCntOfYear[t]+n;return t>1&&this.isLeapYear()&&r++,r}},{key:"determineDaysOfMonths",value:function(e,t){var n=30;switch(e=Ne.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(n=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:n=31}return n}}]),i}(),M1=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return Jt(i,[{key:"xLabelFormat",value:function(e,t,n,r){var s=this.w;if(s.config.xaxis.type==="datetime"&&s.config.xaxis.labels.formatter===void 0&&s.config.tooltip.x.formatter===void 0){var a=new va(this.ctx);return a.formatDate(a.getDate(t),s.config.tooltip.x.format)}return e(t,n,r)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map(function(t){return t}):e}},{key:"defaultYFormatter",value:function(e,t,n){var r=this.w;if(Ne.isNumber(e))if(r.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:r.globals.yValueDecimal);else{var s=e.toFixed(0);e=e==s?s:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(n){return e.defaultGeneralFormatter(n)},t.globals.ttKeyFormatter=function(n){return e.defaultGeneralFormatter(n)},t.globals.ttZFormatter=function(n){return n},t.globals.legendFormatter=function(n){return e.defaultGeneralFormatter(n)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(n){if(Ne.isNumber(n)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(Ne.isNumber(t.config.xaxis.decimalsInFloat))return n.toFixed(t.config.xaxis.decimalsInFloat);var r=t.globals.maxX-t.globals.minX;return r>0&&r<100?n.toFixed(1):n.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?n.toFixed(1):n.toFixed(0)}return n},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach(function(n,r){n.labels.formatter!==void 0?t.globals.yLabelFormatters[r]=n.labels.formatter:t.globals.yLabelFormatters[r]=function(s){return t.globals.xyCharts?Array.isArray(s)?s.map(function(a){return e.defaultYFormatter(a,n,r)}):e.defaultYFormatter(s,n,r):s}}),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce(function(n,r){return n.length>r.length?n:r},0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),i}(),pd=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"getLabel",value:function(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",o=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],l=this.w,c=e[r]===void 0?"":e[r],u=c,h=l.globals.xLabelFormatter,d=l.config.xaxis.labels.formatter,A=!1,x=new M1(this.ctx),_=c;o&&(u=x.xLabelFormat(h,c,_,{i:r,dateFormatter:new va(this.ctx).formatDate,w:l}),d!==void 0&&(u=d(c,e[r],{i:r,dateFormatter:new va(this.ctx).formatDate,w:l})));var S,w;t.length>0?(S=t[r].unit,w=null,t.forEach(function(D){D.unit==="month"?w="year":D.unit==="day"?w="month":D.unit==="hour"?w="day":D.unit==="minute"&&(w="hour")}),A=w===S,n=t[r].position,u=t[r].value):l.config.xaxis.type==="datetime"&&d===void 0&&(u=""),u===void 0&&(u=""),u=Array.isArray(u)?u:u.toString();var C=new yt(this.ctx),P={};P=l.globals.rotateXLabels&&o?C.getTextRects(u,parseInt(a,10),null,"rotate(".concat(l.config.xaxis.labels.rotate," 0 0)"),!1):C.getTextRects(u,parseInt(a,10));var L=!l.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(u)&&(String(u)==="NaN"||s.indexOf(u)>=0&&L)&&(u=""),{x:n,text:u,textRect:P,isBold:A}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,n){var r=this.w,s=r.config.xaxis.tickAmount;return s==="dataPoints"&&(s=Math.round(r.globals.gridWidth/120)),s>n||e%Math.round(n/(s+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,n,r,s){var a=this.w;if(e===0&&a.globals.skipFirstTimelinelabel&&(t.text=""),e===n-1&&a.globals.skipLastTimelinelabel&&(t.text=""),a.config.xaxis.labels.hideOverlappingLabels&&r.length>0){var o=s[s.length-1];t.x<o.textRect.width/(a.globals.rotateXLabels?Math.abs(a.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var n=this.w;return n.config.yaxis[e]&&n.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some(function(n){return t.collapsedSeriesIndices.indexOf(n)===-1})}},{key:"translateYAxisIndex",value:function(e){var t=this.w,n=t.globals,r=t.config.yaxis;return n.series.length>r.length||r.some(function(s){return Array.isArray(s.seriesName)})?e:n.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,n=t.config.yaxis[e];if(!n.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!n.showForNullSeries){var r=t.globals.seriesYAxisMap[e],s=new ls(this.ctx);return r.every(function(a){return s.isSeriesNull(a)})}return!1}},{key:"getYAxisForeColor",value:function(e,t){var n=this.w;return Array.isArray(e)&&n.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,n.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,n,r,s,a,o){var l=this.w,c=new yt(this.ctx),u=l.globals.translateY+l.config.yaxis[s].labels.offsetY;if(l.globals.isBarHorizontal?u=0:l.config.chart.type==="heatmap"&&(u+=a/2),r.show&&t>0){l.config.yaxis[s].opposite===!0&&(e+=r.width);for(var h=t;h>=0;h--){var d=c.drawLine(e+n.offsetX-r.width+r.offsetX,u+r.offsetY,e+n.offsetX+r.offsetX,u+r.offsetY,r.color);o.add(d),u+=a}}}}]),i}(),xTe=function(){function i(e){Kt(this,i),this.w=e.w,this.annoCtx=e,this.helpers=new RT(this.annoCtx),this.axesUtils=new pd(this.annoCtx)}return Jt(i,[{key:"addYaxisAnnotation",value:function(e,t,n){var r,s=this.w,a=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),l=o.yP,c=o.clipped,u=!0,h=!1,d=e.label.text;if(e.y2===null||e.y2===void 0){if(!c){h=!0;var A=this.annoCtx.graphics.drawLine(0+e.offsetX,l+e.offsetY,this._getYAxisAnnotationWidth(e),l+e.offsetY,e.borderColor,a,e.borderWidth);t.appendChild(A.node),e.id&&A.node.classList.add(e.id)}}else{if(r=(o=this.helpers.getY1Y2("y2",e)).yP,u=o.clipped,r>l){var x=l;l=r,r=x}if(!c||!u){h=!0;var _=this.annoCtx.graphics.drawRect(0+e.offsetX,r+e.offsetY,this._getYAxisAnnotationWidth(e),l-r,0,e.fillColor,e.opacity,1,e.borderColor,a);_.node.classList.add("apexcharts-annotation-rect"),_.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),t.appendChild(_.node),e.id&&_.node.classList.add(e.id)}}if(h){var S=e.label.position==="right"?s.globals.gridWidth:e.label.position==="center"?s.globals.gridWidth/2:0,w=this.annoCtx.graphics.drawText({x:S+e.label.offsetX,y:(r??l)+e.label.offsetY-3,text:d,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});w.attr({rel:n}),t.appendChild(w.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach(function(r,s){r.yAxisIndex=e.axesUtils.translateYAxisIndex(r.yAxisIndex),e.axesUtils.isYAxisHidden(r.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(r.yAxisIndex)||e.addYaxisAnnotation(r,n.node,s)}),n}}]),i}(),bTe=function(){function i(e){Kt(this,i),this.w=e.w,this.annoCtx=e,this.helpers=new RT(this.annoCtx)}return Jt(i,[{key:"addPointAnnotation",value:function(e,t,n){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var r=this.helpers.getX1X2("x1",e),s=r.x,a=r.clipped,o=(r=this.helpers.getY1Y2("y1",e)).yP,l=r.clipped;if(Ne.isNumber(s)&&!l&&!a){var c={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},u=this.annoCtx.graphics.drawMarker(s+e.marker.offsetX,o+e.marker.offsetY,c);t.appendChild(u.node);var h=e.label.text?e.label.text:"",d=this.annoCtx.graphics.drawText({x:s+e.label.offsetX,y:o+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:h,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(d.attr({rel:n}),t.appendChild(d.node),e.customSVG.SVG){var A=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});A.attr({transform:"translate(".concat(s+e.customSVG.offsetX,", ").concat(o+e.customSVG.offsetY,")")}),A.node.innerHTML=e.customSVG.SVG,t.appendChild(A.node)}if(e.image.path){var x=e.image.width?e.image.width:20,_=e.image.height?e.image.height:20;u=this.annoCtx.addImage({x:s+e.image.offsetX-x/2,y:o+e.image.offsetY-_/2,width:x,height:_,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&u.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&u.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&u.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map(function(r,s){e.addPointAnnotation(r,n.node,s)}),n}}]),i}(),sX={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},vp=function(){function i(){Kt(this,i),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Jt(i,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[sX],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,n){return t+n},0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,n){return t+n},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",backgroundColor:void 0,borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),i}(),_Te=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.graphics=new yt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new RT(this),this.xAxisAnnotations=new yTe(this),this.yAxisAnnotations=new xTe(this),this.pointsAnnotations=new bTe(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Jt(i,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),r=this.pointsAnnotations.drawPointAnnotations(),s=e.config.chart.animations.enabled,a=[t,n,r],o=[n.node,t.node,r.node],l=0;l<3;l++)e.globals.dom.elGraphical.add(a[l]),!s||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&o[l].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[l],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map(function(t,n){e.addImage(t,n)})}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map(function(t,n){e.addText(t,n)})}},{key:"addXaxisAnnotation",value:function(e,t,n){this.xAxisAnnotations.addXaxisAnnotation(e,t,n)}},{key:"addYaxisAnnotation",value:function(e,t,n){this.yAxisAnnotations.addYaxisAnnotation(e,t,n)}},{key:"addPointAnnotation",value:function(e,t,n){this.pointsAnnotations.addPointAnnotation(e,t,n)}},{key:"addText",value:function(e,t){var n=e.x,r=e.y,s=e.text,a=e.textAnchor,o=e.foreColor,l=e.fontSize,c=e.fontFamily,u=e.fontWeight,h=e.cssClass,d=e.backgroundColor,A=e.borderWidth,x=e.strokeDashArray,_=e.borderRadius,S=e.borderColor,w=e.appendTo,C=w===void 0?".apexcharts-svg":w,P=e.paddingLeft,L=P===void 0?4:P,D=e.paddingRight,B=D===void 0?4:D,k=e.paddingBottom,U=k===void 0?2:k,F=e.paddingTop,z=F===void 0?2:F,V=this.w,W=this.graphics.drawText({x:n,y:r,text:s,textAnchor:a||"start",fontSize:l||"12px",fontWeight:u||"regular",fontFamily:c||V.config.chart.fontFamily,foreColor:o||V.config.chart.foreColor,cssClass:h}),X=V.globals.dom.baseEl.querySelector(C);X&&X.appendChild(W.node);var J=W.bbox();if(s){var K=this.graphics.drawRect(J.x-L,J.y-z,J.width+L+B,J.height+U+z,_,d||"transparent",1,A,S,x);X.insertBefore(K.node,W.node)}}},{key:"addImage",value:function(e,t){var n=this.w,r=e.path,s=e.x,a=s===void 0?0:s,o=e.y,l=o===void 0?0:o,c=e.width,u=c===void 0?20:c,h=e.height,d=h===void 0?20:h,A=e.appendTo,x=A===void 0?".apexcharts-svg":A,_=n.globals.dom.Paper.image(r);_.size(u,d).move(a,l);var S=n.globals.dom.baseEl.querySelector(x);return S&&S.appendChild(_.node),_}},{key:"addXaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(e,t,n){return this.invertAxis===void 0&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(e){var t=e.params,n=e.pushToMemory,r=e.context,s=e.type,a=e.contextMethod,o=r,l=o.w,c=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations")),u=c.childNodes.length+1,h=new vp,d=Object.assign({},s==="xaxis"?h.xAxisAnnotation:s==="yaxis"?h.yAxisAnnotation:h.pointAnnotation),A=Ne.extend(d,t);switch(s){case"xaxis":this.addXaxisAnnotation(A,c,u);break;case"yaxis":this.addYaxisAnnotation(A,c,u);break;case"point":this.addPointAnnotation(A,c,u)}var x=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations .apexcharts-").concat(s,"-annotation-label[rel='").concat(u,"']")),_=this.helpers.addBackgroundToAnno(x,A);return _&&c.insertBefore(_.node,x),n&&l.globals.memory.methodsToExec.push({context:o,id:A.id?A.id:Ne.randomId(),method:a,label:"addAnnotation",params:t}),r}},{key:"clearAnnotations",value:function(e){for(var t=e.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),r=t.globals.memory.methodsToExec.length-1;r>=0;r--)t.globals.memory.methodsToExec[r].label!=="addText"&&t.globals.memory.methodsToExec[r].label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(r,1);n=Ne.listToArray(n),Array.prototype.forEach.call(n,function(s){for(;s.firstChild;)s.removeChild(s.firstChild)})}},{key:"removeAnnotation",value:function(e,t){var n=e.w,r=n.globals.dom.baseEl.querySelectorAll(".".concat(t));r&&(n.globals.memory.methodsToExec.map(function(s,a){s.id===t&&n.globals.memory.methodsToExec.splice(a,1)}),Object.keys(n.config.annotations).forEach(function(s){var a=n.config.annotations[s];Array.isArray(a)&&(n.config.annotations[s]=a.filter(function(o){return o.id!==t}))}),Array.prototype.forEach.call(r,function(s){s.parentElement.removeChild(s)}))}}]),i}(),UC=function(i){var e,t=i.isTimeline,n=i.ctx,r=i.seriesIndex,s=i.dataPointIndex,a=i.y1,o=i.y2,l=i.w,c=l.globals.seriesRangeStart[r][s],u=l.globals.seriesRangeEnd[r][s],h=l.globals.labels[s],d=l.config.series[r].name?l.config.series[r].name:"",A=l.globals.ttKeyFormatter,x=l.config.tooltip.y.title.formatter,_={w:l,seriesIndex:r,dataPointIndex:s,start:c,end:u};typeof x=="function"&&(d=x(d,_)),(e=l.config.series[r].data[s])!==null&&e!==void 0&&e.x&&(h=l.config.series[r].data[s].x),t||l.config.xaxis.type==="datetime"&&(h=new M1(n).xLabelFormat(l.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new va(n).formatDate,w:l})),typeof A=="function"&&(h=A(h,_)),Number.isFinite(a)&&Number.isFinite(o)&&(c=a,u=o);var S="",w="",C=l.globals.colors[r];if(l.config.tooltip.x.formatter===void 0)if(l.config.xaxis.type==="datetime"){var P=new va(n);S=P.formatDate(P.getDate(c),l.config.tooltip.x.format),w=P.formatDate(P.getDate(u),l.config.tooltip.x.format)}else S=c,w=u;else S=l.config.tooltip.x.formatter(c),w=l.config.tooltip.x.formatter(u);return{start:c,end:u,startVal:S,endVal:w,ylabel:h,color:C,seriesName:d}},zC=function(i){var e=i.color,t=i.seriesName,n=i.ylabel,r=i.start,s=i.end,a=i.seriesIndex,o=i.dataPointIndex,l=i.ctx.tooltip.tooltipLabels.getFormatters(a);r=l.yLbFormatter(r),s=l.yLbFormatter(s);var c=l.yLbFormatter(i.w.globals.series[a][o]),u=`<span class="value start-value">
  `.concat(r,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(s,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+n+": </span> "+(i.w.globals.comboCharts?i.w.config.series[a].type==="rangeArea"||i.w.config.series[a].type==="rangeBar"?u:"<span>".concat(c,"</span>"):u)+" </div></div>"},Ox=function(){function i(e){Kt(this,i),this.opts=e}return Jt(i,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),Ne.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var n=t.w.config.series[t.seriesIndex].name;return e!==null?n+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Bt(Bt({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,s=t.w;return e._getBoxTooltip(s,n,r,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,s=t.w;return e._getBoxTooltip(s,n,r,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var n=t.seriesIndex,r=t.dataPointIndex,s=t.w,a=function(){var o=s.globals.seriesRangeStart[n][r];return s.globals.seriesRangeEnd[n][r]-o};return s.globals.comboCharts?s.config.series[n].type==="rangeBar"||s.config.series[n].type==="rangeArea"?a():e:a()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(t){var n=UC(Bt(Bt({},t),{},{isTimeline:!0})),r=n.color,s=n.seriesName,a=n.ylabel,o=n.startVal,l=n.endVal;return zC(Bt(Bt({},t),{},{color:r,seriesName:s,ylabel:a,start:o,end:l}))}(e):function(t){var n=UC(t),r=n.color,s=n.seriesName,a=n.ylabel,o=n.start,l=n.end;return zC(Bt(Bt({},t),{},{color:r,seriesName:s,ylabel:a,start:o,end:l}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,n;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(n=e.plotOptions.bar)!==null&&n!==void 0&&n.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(t){var n=UC(t),r=n.color,s=n.seriesName,a=n.ylabel,o=n.start,l=n.end;return zC(Bt(Bt({},t),{},{color:r,seriesName:s,ylabel:a,start:o,end:l}))}(e)}}}}},{key:"brush",value:function(e){return Ne.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach(function(n,r){e.yaxis[r].min=0,e.yaxis[r].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(n){return typeof n=="number"&&n?n.toFixed(0)+"%":n}),e}},{key:"stackedBars",value:function(){var e=this.bar();return Bt(Bt({},e),{},{plotOptions:Bt(Bt({},e.plotOptions),{},{bar:Bt(Bt({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,n){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(a){return Ne.isNumber(a)?Math.floor(a):a};var r=e.xaxis.labels.formatter,s=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return n&&n.length&&(s=n.map(function(a){return Array.isArray(a)?a:String(a)})),s&&s.length&&(e.xaxis.labels.formatter=function(a){return Ne.isNumber(a)?r(s[Math.floor(a)-1]):r(a)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,t,n,r,s){var a=e.globals.seriesCandleO[t][n],o=e.globals.seriesCandleH[t][n],l=e.globals.seriesCandleM[t][n],c=e.globals.seriesCandleL[t][n],u=e.globals.seriesCandleC[t][n];return e.config.series[t].type&&e.config.series[t].type!==s?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][n],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(r[0],': <span class="value">')+a+"</span></div>"+"<div>".concat(r[1],': <span class="value">')+o+"</span></div>"+(l?"<div>".concat(r[2],': <span class="value">')+l+"</span></div>":"")+"<div>".concat(r[3],': <span class="value">')+c+"</span></div>"+"<div>".concat(r[4],': <span class="value">')+u+"</span></div></div>"}}]),i}(),Ix=function(){function i(e){Kt(this,i),this.opts=e}return Jt(i,[{key:"init",value:function(e){var t=e.responsiveOverride,n=this.opts,r=new vp,s=new Ox(n);this.chartType=n.chart.type,n=this.extendYAxis(n),n=this.extendAnnotations(n);var a=r.init(),o={};if(n&&Wg(n)==="object"){var l,c,u,h,d,A,x,_,S,w,C={};C=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)!==-1?s[n.chart.type]():s.line(),(l=n.plotOptions)!==null&&l!==void 0&&(c=l.bar)!==null&&c!==void 0&&c.isFunnel&&(C=s.funnel()),n.chart.stacked&&n.chart.type==="bar"&&(C=s.stackedBars()),(u=n.chart.brush)!==null&&u!==void 0&&u.enabled&&(C=s.brush(C)),(h=n.plotOptions)!==null&&h!==void 0&&(d=h.line)!==null&&d!==void 0&&d.isSlopeChart&&(C=s.slope()),n.chart.stacked&&n.chart.stackType==="100%"&&(n=s.stacked100(n)),(A=n.plotOptions)!==null&&A!==void 0&&(x=A.bar)!==null&&x!==void 0&&x.isDumbbell&&(n=s.dumbbell(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},t||(n.xaxis.convertedCatToNumeric=!1),((_=(n=this.checkForCatToNumericXAxis(this.chartType,C,n)).chart.sparkline)!==null&&_!==void 0&&_.enabled||(S=window.Apex.chart)!==null&&S!==void 0&&(w=S.sparkline)!==null&&w!==void 0&&w.enabled)&&(C=s.sparkline(C)),o=Ne.extend(a,C)}var P=Ne.extend(o,window.Apex);return a=Ne.extend(P,n),a=this.handleUserInputErrors(a)}},{key:"checkForCatToNumericXAxis",value:function(e,t,n){var r,s,a=new Ox(n),o=(e==="bar"||e==="boxPlot")&&((r=n.plotOptions)===null||r===void 0||(s=r.bar)===null||s===void 0?void 0:s.horizontal),l=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",c=n.xaxis.type!=="datetime"&&n.xaxis.type!=="numeric",u=n.xaxis.tickPlacement?n.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return o||l||!c||u==="between"||(n=a.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(e,t){var n=new vp;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=Ne.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[Ne.extend(n.yAxis,e.yaxis)]:e.yaxis=Ne.extendArray(e.yaxis,n.yAxis);var r=!1;e.yaxis.forEach(function(a){a.logarithmic&&(r=!0)});var s=e.series;return t&&!s&&(s=t.config.series),r&&s.length!==e.yaxis.length&&s.length&&(e.yaxis=s.map(function(a,o){if(a.name||(s[o].name="series-".concat(o+1)),e.yaxis[o])return e.yaxis[o].seriesName=s[o].name,e.yaxis[o];var l=Ne.extend(n.yAxis,e.yaxis[0]);return l.show=!1,l})),r&&s.length>1&&s.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new vp;return e.annotations.yaxis=Ne.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new vp;return e.annotations.xaxis=Ne.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new vp;return e.annotations.points=Ne.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),i}(),aX=function(){function i(){Kt(this,i)}return Jt(i,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=Ne.extend({},e),t.initialSeries=Ne.clone(e.series),t.lastXAxis=Ne.clone(t.initialConfig.xaxis),t.lastYAxis=Ne.clone(t.initialConfig.yaxis),t}}]),i}(),wTe=function(){function i(e){Kt(this,i),this.opts=e}return Jt(i,[{key:"init",value:function(){var e=new Ix(this.opts).init({responsiveOverride:!1});return{config:e,globals:new aX().init(e)}}}]),i}(),Nc=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return Jt(i,[{key:"clippedImgArea",value:function(e){var t=this.w,n=t.config,r=parseInt(t.globals.gridWidth,10),s=parseInt(t.globals.gridHeight,10),a=r>s?r:s,o=e.image,l=0,c=0;e.width===void 0&&e.height===void 0?n.fill.image.width!==void 0&&n.fill.image.height!==void 0?(l=n.fill.image.width+1,c=n.fill.image.height):(l=a+1,c=a):(l=e.width,c=e.height);var u=document.createElementNS(t.globals.SVGNS,"pattern");yt.setAttrs(u,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:l+"px",height:c+"px"});var h=document.createElementNS(t.globals.SVGNS,"image");u.appendChild(h),h.setAttributeNS(window.SVG.xlink,"href",o),yt.setAttrs(h,{x:0,y:0,preserveAspectRatio:"none",width:l+"px",height:c+"px"}),h.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(u)}},{key:"getSeriesIndex",value:function(e){var t=this.w,n=t.config.chart.type;return(n==="bar"||n==="rangeBar")&&t.config.plotOptions.bar.distributed||n==="heatmap"||n==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(e,t){var n,r=this.w,s=null,a=null,o=xy(e);try{for(o.s();!(n=o.n()).done;){var l=n.value;l>=t.threshold?(s===null||l>s)&&(s=l):(a===null||l<a)&&(a=l)}}catch(h){o.e(h)}finally{o.f()}s===null&&(s=t.threshold),a===null&&(a=t.threshold);var c=s-t.threshold+(t.threshold-a);c===0&&(c=1);var u=100-(t.threshold-a)/c*100;return[{offset:u=Math.max(0,Math.min(u,100)),color:t.colorAboveThreshold,opacity:r.config.fill.opacity},{offset:0,color:t.colorBelowThreshold,opacity:r.config.fill.opacity}]}},{key:"fillPath",value:function(e){var t,n,r,s=this.w;this.opts=e;var a,o,l,c=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var u=c.plotOptions.line.colors.colorAboveThreshold&&c.plotOptions.line.colors.colorBelowThreshold,h=this.getFillColors()[this.seriesIndex];s.globals.seriesColors[this.seriesIndex]!==void 0&&(h=s.globals.seriesColors[this.seriesIndex]),typeof h=="function"&&(h=h({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:s}));var d,A,x,_=e.fillType?e.fillType:this.getFillType(this.seriesIndex),S=Array.isArray(c.fill.opacity)?c.fill.opacity[this.seriesIndex]:c.fill.opacity,w=_==="gradient"||u;e.color&&(h=e.color),(t=s.config.series[this.seriesIndex])!==null&&t!==void 0&&(n=t.data)!==null&&n!==void 0&&(r=n[e.dataPointIndex])!==null&&r!==void 0&&r.fillColor&&(h=(d=s.config.series[this.seriesIndex])===null||d===void 0||(A=d.data)===null||A===void 0||(x=A[e.dataPointIndex])===null||x===void 0?void 0:x.fillColor),h||(h="#fff",console.warn("undefined color - ApexCharts"));var C=h;if(h.indexOf("rgb")===-1?h.indexOf("#")===-1?C=h:h.length<9&&(C=Ne.hexToRgba(h,S)):h.indexOf("rgba")>-1?S=Ne.getOpacityFromRGBA(h):C=Ne.hexToRgba(Ne.rgb2hex(h),S),e.opacity&&(S=e.opacity),_==="pattern"&&(o=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:o,fillColor:h,fillOpacity:S,defaultColor:C})),w){var P=Us(c.fill.gradient.colorStops)||[],L=c.fill.gradient.type;u&&(P[this.seriesIndex]=this.computeColorStops(s.globals.series[this.seriesIndex],c.plotOptions.line.colors),L="vertical"),l=this.handleGradientFill({type:L,fillConfig:e.fillConfig,fillColor:h,fillOpacity:S,colorStops:P,i:this.seriesIndex})}if(_==="image"){var D=c.fill.image.src,B=e.patternID?e.patternID:"",k="pattern".concat(s.globals.cuid).concat(e.seriesNumber+1).concat(B);this.patternIDs.indexOf(k)===-1&&(this.clippedImgArea({opacity:S,image:Array.isArray(D)?e.seriesNumber<D.length?D[e.seriesNumber]:D[0]:D,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:k}),this.patternIDs.push(k)),a="url(#".concat(k,")")}else a=w?l:_==="pattern"?o:C;return e.solid&&(a=C),a}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,n=this.opts,r=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors),n.fillColors!==void 0&&(r=[],Array.isArray(n.fillColors)?r=n.fillColors.slice():r.push(n.fillColors)),r}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,n=e.patternFill,r=e.fillColor,s=e.fillOpacity,a=e.defaultColor,o=this.w.config.fill;t&&(o=t);var l=this.opts,c=new yt(this.ctx),u=Array.isArray(o.pattern.strokeWidth)?o.pattern.strokeWidth[this.seriesIndex]:o.pattern.strokeWidth,h=r;return Array.isArray(o.pattern.style)?n=o.pattern.style[l.seriesNumber]!==void 0?c.drawPattern(o.pattern.style[l.seriesNumber],o.pattern.width,o.pattern.height,h,u,s):a:n=c.drawPattern(o.pattern.style,o.pattern.width,o.pattern.height,h,u,s),n}},{key:"handleGradientFill",value:function(e){var t=e.type,n=e.fillColor,r=e.fillOpacity,s=e.fillConfig,a=e.colorStops,o=e.i,l=this.w.config.fill;s&&(l=Bt(Bt({},l),s));var c=this.opts,u=new yt(this.ctx),h=new Ne;t=t||l.gradient.type;var d,A=n,x=l.gradient.opacityFrom===void 0?r:Array.isArray(l.gradient.opacityFrom)?l.gradient.opacityFrom[o]:l.gradient.opacityFrom;A.indexOf("rgba")>-1&&(x=Ne.getOpacityFromRGBA(A));var _=l.gradient.opacityTo===void 0?r:Array.isArray(l.gradient.opacityTo)?l.gradient.opacityTo[o]:l.gradient.opacityTo;if(l.gradient.gradientToColors===void 0||l.gradient.gradientToColors.length===0)d=l.gradient.shade==="dark"?h.shadeColor(-1*parseFloat(l.gradient.shadeIntensity),n.indexOf("rgb")>-1?Ne.rgb2hex(n):n):h.shadeColor(parseFloat(l.gradient.shadeIntensity),n.indexOf("rgb")>-1?Ne.rgb2hex(n):n);else if(l.gradient.gradientToColors[c.seriesNumber]){var S=l.gradient.gradientToColors[c.seriesNumber];d=S,S.indexOf("rgba")>-1&&(_=Ne.getOpacityFromRGBA(S))}else d=n;if(l.gradient.gradientFrom&&(A=l.gradient.gradientFrom),l.gradient.gradientTo&&(d=l.gradient.gradientTo),l.gradient.inverseColors){var w=A;A=d,d=w}return A.indexOf("rgb")>-1&&(A=Ne.rgb2hex(A)),d.indexOf("rgb")>-1&&(d=Ne.rgb2hex(d)),u.drawGradient(t,A,d,x,_,c.size,l.gradient.stops,a,o)}}]),i}(),vm=function(){function i(e,t){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(n){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(e){var t=e.pointsPos,n=e.seriesIndex,r=e.j,s=e.pSize,a=e.alwaysDrawMarker,o=a!==void 0&&a,l=e.isVirtualPoint,c=l!==void 0&&l,u=this.w,h=n,d=t,A=null,x=new yt(this.ctx),_=u.config.markers.discrete&&u.config.markers.discrete.length;if(Array.isArray(d.x))for(var S=0;S<d.x.length;S++){var w=void 0,C=r,P=!Ne.isNumber(d.y[S]);u.globals.markers.largestSize===0&&u.globals.hasNullValues&&u.globals.series[h][r+1]!==null&&!c&&(P=!0),r===1&&S===0&&(C=0),r===1&&S===1&&(C=1);var L="apexcharts-marker";if(u.config.chart.type!=="line"&&u.config.chart.type!=="area"||u.globals.comboCharts||u.config.tooltip.intersect||(L+=" no-pointer-events"),(Array.isArray(u.config.markers.size)?u.globals.markers.size[n]>0:u.config.markers.size>0)||o||_){P||(L+=" w".concat(Ne.randomId()));var D=this.getMarkerConfig({cssClass:L,seriesIndex:n,dataPointIndex:C});u.config.series[h].data[C]&&(u.config.series[h].data[C].fillColor&&(D.pointFillColor=u.config.series[h].data[C].fillColor),u.config.series[h].data[C].strokeColor&&(D.pointStrokeColor=u.config.series[h].data[C].strokeColor)),s!==void 0&&(D.pSize=s),(d.x[S]<-u.globals.markers.largestSize||d.x[S]>u.globals.gridWidth+u.globals.markers.largestSize||d.y[S]<-u.globals.markers.largestSize||d.y[S]>u.globals.gridHeight+u.globals.markers.largestSize)&&(D.pSize=0),!P&&((u.globals.markers.size[n]>0||o||_)&&!A&&(A=x.group({class:o||_?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(u.globals.cuid,")")),(w=x.drawMarker(d.x[S],d.y[S],D)).attr("rel",C),w.attr("j",C),w.attr("index",n),w.node.setAttribute("default-marker-size",D.pSize),new ya(this.ctx).setSelectionFilter(w,n,C),this.addEvents(w),A&&A.add(w))}else u.globals.pointsArray[n]===void 0&&(u.globals.pointsArray[n]=[]),u.globals.pointsArray[n].push([d.x[S],d.y[S]])}return A}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,n=e.seriesIndex,r=e.dataPointIndex,s=r===void 0?null:r,a=e.radius,o=a===void 0?null:a,l=e.size,c=l===void 0?null:l,u=e.strokeWidth,h=u===void 0?null:u,d=this.w,A=this.getMarkerStyle(n),x=c===null?d.globals.markers.size[n]:c,_=d.config.markers;return s!==null&&_.discrete.length&&_.discrete.map(function(S){S.seriesIndex===n&&S.dataPointIndex===s&&(A.pointStrokeColor=S.strokeColor,A.pointFillColor=S.fillColor,x=S.size,A.pointShape=S.shape)}),{pSize:o===null?x:o,pRadius:o!==null?o:_.radius,pointStrokeWidth:h!==null?h:Array.isArray(_.strokeWidth)?_.strokeWidth[n]:_.strokeWidth,pointStrokeColor:A.pointStrokeColor,pointFillColor:A.pointFillColor,shape:A.pointShape||(Array.isArray(_.shape)?_.shape[n]:_.shape),class:t,pointStrokeOpacity:Array.isArray(_.strokeOpacity)?_.strokeOpacity[n]:_.strokeOpacity,pointStrokeDashArray:Array.isArray(_.strokeDashArray)?_.strokeDashArray[n]:_.strokeDashArray,pointFillOpacity:Array.isArray(_.fillOpacity)?_.fillOpacity[n]:_.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(e){var t=this.w,n=new yt(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,n=t.globals.markers.colors,r=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(r)?r[e]:r,pointFillColor:Array.isArray(n)?n[e]:n}}}]),i}(),oX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return Jt(i,[{key:"draw",value:function(e,t,n){var r=this.w,s=new yt(this.ctx),a=n.realIndex,o=n.pointsPos,l=n.zRatio,c=n.elParent,u=s.group({class:"apexcharts-series-markers apexcharts-series-".concat(r.config.chart.type)});if(u.attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(o.x))for(var h=0;h<o.x.length;h++){var d=t+1,A=!0;t===0&&h===0&&(d=0),t===0&&h===1&&(d=1);var x=r.globals.markers.size[a];if(l!==1/0){var _=r.config.plotOptions.bubble;x=r.globals.seriesZ[a][d],_.zScaling&&(x/=l),_.minBubbleRadius&&x<_.minBubbleRadius&&(x=_.minBubbleRadius),_.maxBubbleRadius&&x>_.maxBubbleRadius&&(x=_.maxBubbleRadius)}var S=o.x[h],w=o.y[h];if(x=x||0,w!==null&&r.globals.series[a][d]!==void 0||(A=!1),A){var C=this.drawPoint(S,w,x,a,d,t);u.add(C)}c.add(u)}}},{key:"drawPoint",value:function(e,t,n,r,s,a){var o=this.w,l=r,c=new pm(this.ctx),u=new ya(this.ctx),h=new Nc(this.ctx),d=new vm(this.ctx),A=new yt(this.ctx),x=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:s,radius:o.config.chart.type==="bubble"||o.globals.comboCharts&&o.config.series[r]&&o.config.series[r].type==="bubble"?n:null}),_=h.fillPath({seriesNumber:r,dataPointIndex:s,color:x.pointFillColor,patternUnits:"objectBoundingBox",value:o.globals.series[r][a]}),S=A.drawMarker(e,t,x);if(o.config.series[l].data[s]&&o.config.series[l].data[s].fillColor&&(_=o.config.series[l].data[s].fillColor),S.attr({fill:_}),o.config.chart.dropShadow.enabled){var w=o.config.chart.dropShadow;u.dropShadow(S,w,r)}if(!this.initialAnim||o.globals.dataChanged||o.globals.resized)o.globals.animationEnded=!0;else{var C=o.config.chart.animations.speed;c.animateMarker(S,C,o.globals.easing,function(){window.setTimeout(function(){c.animationCompleted(S)},100)})}return S.attr({rel:s,j:s,index:r,"default-marker-size":x.pSize}),u.setSelectionFilter(S,r,s),d.addEvents(S),S.node.classList.add("apexcharts-marker"),S}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),i}(),jg=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"dataLabelsCorrection",value:function(e,t,n,r,s,a,o){var l=this.w,c=!1,u=new yt(this.ctx).getTextRects(n,o),h=u.width,d=u.height;t<0&&(t=0),t>l.globals.gridHeight+d&&(t=l.globals.gridHeight+d/2),l.globals.dataLabelsRects[r]===void 0&&(l.globals.dataLabelsRects[r]=[]),l.globals.dataLabelsRects[r].push({x:e,y:t,width:h,height:d});var A=l.globals.dataLabelsRects[r].length-2,x=l.globals.lastDrawnDataLabelsIndexes[r]!==void 0?l.globals.lastDrawnDataLabelsIndexes[r][l.globals.lastDrawnDataLabelsIndexes[r].length-1]:0;if(l.globals.dataLabelsRects[r][A]!==void 0){var _=l.globals.dataLabelsRects[r][x];(e>_.x+_.width||t>_.y+_.height||t+d<_.y||e+h<_.x)&&(c=!0)}return(s===0||a)&&(c=!0),{x:e,y:t,textRects:u,drawnextLabel:c}}},{key:"drawDataLabel",value:function(e){var t=this,n=e.type,r=e.pos,s=e.i,a=e.j,o=e.isRangeStart,l=e.strokeWidth,c=l===void 0?2:l,u=this.w,h=new yt(this.ctx),d=u.config.dataLabels,A=0,x=0,_=a,S=null;if(u.globals.collapsedSeriesIndices.indexOf(s)!==-1||!d.enabled||!Array.isArray(r.x))return S;S=h.group({class:"apexcharts-data-labels"});for(var w=0;w<r.x.length;w++)if(A=r.x[w]+d.offsetX,x=r.y[w]+d.offsetY+c,!isNaN(A)){a===1&&w===0&&(_=0),a===1&&w===1&&(_=1);var C=u.globals.series[s][_];n==="rangeArea"&&(C=o?u.globals.seriesRangeStart[s][_]:u.globals.seriesRangeEnd[s][_]);var P="",L=function(B){return u.config.dataLabels.formatter(B,{ctx:t.ctx,seriesIndex:s,dataPointIndex:_,w:u})};u.config.chart.type==="bubble"?(P=L(C=u.globals.seriesZ[s][_]),x=r.y[w],x=new oX(this.ctx).centerTextInBubble(x,s,_).y):C!==void 0&&(P=L(C));var D=u.config.dataLabels.textAnchor;u.globals.isSlopeChart&&(D=_===0?"end":_===u.config.series[s].data.length-1?"start":"middle"),this.plotDataLabelsText({x:A,y:x,text:P,i:s,j:_,parent:S,offsetCorrection:!0,dataLabelsConfig:u.config.dataLabels,textAnchor:D})}return S}},{key:"plotDataLabelsText",value:function(e){var t=this.w,n=new yt(this.ctx),r=e.x,s=e.y,a=e.i,o=e.j,l=e.text,c=e.textAnchor,u=e.fontSize,h=e.parent,d=e.dataLabelsConfig,A=e.color,x=e.alwaysDrawDataLabel,_=e.offsetCorrection,S=e.className,w=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(a)<0)return w;var C={x:r,y:s,drawnextLabel:!0,textRects:null};_&&(C=this.dataLabelsCorrection(r,s,l,a,o,x,parseInt(d.style.fontSize,10))),t.globals.zoomed||(r=C.x,s=C.y),C.textRects&&(r<-20-C.textRects.width||r>t.globals.gridWidth+C.textRects.width+30)&&(l="");var P=t.globals.dataLabels.style.colors[a];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(P=t.globals.dataLabels.style.colors[o]),typeof P=="function"&&(P=P({series:t.globals.series,seriesIndex:a,dataPointIndex:o,w:t})),A&&(P=A);var L=d.offsetX,D=d.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(L=0,D=0),t.globals.isSlopeChart&&(o!==0&&(L=-2*d.offsetX+5),o!==0&&o!==t.config.series[a].data.length-1&&(L=0)),C.drawnextLabel){if((w=n.drawText({width:100,height:parseInt(d.style.fontSize,10),x:r+L,y:s+D,foreColor:P,textAnchor:c||d.textAnchor,text:l,fontSize:u||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"})).attr({class:S||"apexcharts-datalabel",cx:r,cy:s}),d.dropShadow.enabled){var B=d.dropShadow;new ya(this.ctx).dropShadow(w,B)}h.add(w),t.globals.lastDrawnDataLabelsIndexes[a]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[a]=[]),t.globals.lastDrawnDataLabelsIndexes[a].push(o)}return w}},{key:"addBackgroundToDataLabel",value:function(e,t){var n=this.w,r=n.config.dataLabels.background,s=r.padding,a=r.padding/2,o=t.width,l=t.height,c=new yt(this.ctx).drawRect(t.x-s,t.y-a/2,o+2*s,l+a,r.borderRadius,n.config.chart.background!=="transparent"&&n.config.chart.background?n.config.chart.background:"#fff",r.opacity,r.borderWidth,r.borderColor);return r.dropShadow.enabled&&new ya(this.ctx).dropShadow(c,r.dropShadow),c}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<t.length;n++){var r=t[n],s=r.getBBox(),a=null;if(s.width&&s.height&&(a=this.addBackgroundToDataLabel(r,s)),a){r.parentNode.insertBefore(a.node,r);var o=e.config.dataLabels.background.backgroundColor||r.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?a.animate().attr({fill:o}):a.attr({fill:o}),r.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),r=0;r<t.length;r++)n&&n.insertBefore(t[r],n.nextSibling)}}]),i}(),Hl=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return Jt(i,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Ne.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),n=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(e,t){var n=this.w;function r(s){for(var a=0;a<s.length;a++)s[a].index===t&&e.node.classList.add("apexcharts-series-collapsed")}r(n.globals.collapsedSeries),r(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=this.w,s=Ne.clone(r.globals.initialSeries);r.globals.previousPaths=[],n?(r.globals.collapsedSeries=[],r.globals.ancillaryCollapsedSeries=[],r.globals.collapsedSeriesIndices=[],r.globals.ancillaryCollapsedSeriesIndices=[]):s=this.emptyCollapsedSeries(s),r.config.series=s,e&&(t&&(r.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(s,r.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,n=0;n<e.length;n++)t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[]);return e}},{key:"highlightSeries",value:function(e){var t=this.w,n=this.getSeriesByName(e),r=parseInt(n==null?void 0:n.getAttribute("data:realIndex"),10),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),a=null,o=null,l=null;if(t.globals.axisCharts||t.config.chart.type==="radialBar")if(t.globals.axisCharts){a=t.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),o=t.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"));var c=t.globals.seriesYAxisReverseMap[r];l=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(c,"']"))}else a=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']"));else a=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var u=0;u<s.length;u++)s[u].classList.add(this.legendInactiveClass);if(a)t.globals.axisCharts||a.parentNode.classList.remove(this.legendInactiveClass),a.classList.remove(this.legendInactiveClass),o!==null&&o.classList.remove(this.legendInactiveClass),l!==null&&l.classList.remove(this.legendInactiveClass);else for(var h=0;h<s.length;h++)s[h].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,t){var n=this.w;t||(t=e.target);var r=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var s=parseInt(t.getAttribute("rel"),10)-1;this.highlightSeries(n.globals.seriesNames[s])}else if(e.type==="mouseout")for(var a=0;a<r.length;a++)r[a].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var n=this,r=this.w,s=r.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),a=function(c){for(var u=0;u<s.length;u++)s[u].classList[c](n.legendInactiveClass)};if(e.type==="mousemove"){var o=parseInt(t.getAttribute("rel"),10)-1;a("add");var l=r.config.plotOptions.heatmap.colorScale.ranges;(function(c,u){for(var h=0;h<s.length;h++){var d=Number(s[h].getAttribute("val"));d>=c.from&&(d<c.to||c.to===u&&d===u)&&s[h].classList.remove(n.legendInactiveClass)}})(l[o],l.reduce(function(c,u){return Math.max(c,u.to)},0))}else e.type==="mouseout"&&a("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=this.w,r=0;if(n.config.series.length>1){for(var s=n.config.series.map(function(o,l){return o.data&&o.data.length>0&&n.globals.collapsedSeriesIndices.indexOf(l)===-1&&(!n.globals.comboCharts||t.length===0||t.length&&t.indexOf(n.config.series[l].type)>-1)?l:-1}),a=e==="asc"?0:s.length-1;e==="asc"?a<s.length:a>=0;e==="asc"?a++:a--)if(s[a]!==-1){r=s[a];break}}return r}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(e,t){return e.type==="bar"||e.type==="column"?t:-1}).filter(function(e){return e!==-1}):this.w.config.series.map(function(e,t){return t})}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(a,o,l){for(var c=a[o].childNodes,u={type:l,paths:[],realIndex:a[o].getAttribute("data:realIndex")},h=0;h<c.length;h++)if(c[h].hasAttribute("pathTo")){var d=c[h].getAttribute("pathTo");u.paths.push({d})}e.globals.previousPaths.push(u)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(a){for(var o,l=(o=a,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series"))),c=0;c<l.length;c++)t(l,c,a)});var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(n.length>0)for(var r=function(a){for(var o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(a,"'] rect")),l=[],c=function(h){var d=function(x){return o[h].getAttribute(x)},A={x:parseFloat(d("x")),y:parseFloat(d("y")),width:parseFloat(d("width")),height:parseFloat(d("height"))};l.push({rect:A,color:o[h].getAttribute("color")})},u=0;u<o.length;u++)c(u);e.globals.previousPaths.push(l)},s=0;s<n.length;s++)r(s);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,n=new yt(this.ctx),r=e.globals.svgWidth/2,s=e.globals.svgHeight/2,a="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(r=10,a="start"):t.align==="right"&&(r=e.globals.svgWidth-10,a="end"),t.verticalAlign==="top"?s=50:t.verticalAlign==="bottom"&&(s=e.globals.svgHeight-50),r+=t.offsetX,s=s+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var o=n.drawText({x:r,y:s,text:t.text,textAnchor:a,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,n=0;n<e.length;n++)if(e[n].length===0)for(var r=0;r<e[t.globals.maxValsInArrayIndex].length;r++)e[n].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,n=this.filteredSeriesX(),r=0;r<n.length-1;r++)if(n[r][0]!==n[r+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map(function(t){return t.length>0?t:[]});return e}}]),i}(),XP=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new ls(this.ctx)}return Jt(i,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new Hl(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new Hl(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var n=this.w.config,r=this.w.globals,s=n.chart.type==="boxPlot"||n.series[t].type==="boxPlot",a=0;a<e[t].data.length;a++)if(e[t].data[a][1]!==void 0&&(Array.isArray(e[t].data[a][1])&&e[t].data[a][1].length===4&&!s?this.twoDSeries.push(Ne.parseNumber(e[t].data[a][1][3])):e[t].data[a].length>=5?this.twoDSeries.push(Ne.parseNumber(e[t].data[a][4])):this.twoDSeries.push(Ne.parseNumber(e[t].data[a][1])),r.dataFormatXNumeric=!0),n.xaxis.type==="datetime"){var o=new Date(e[t].data[a][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[a][0]);for(var l=0;l<e[t].data.length;l++)e[t].data[l][2]!==void 0&&(this.threeDSeries.push(e[t].data[l][2]),r.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var n=this.w.config,r=this.w.globals,s=new va(this.ctx),a=t;r.collapsedSeriesIndices.indexOf(t)>-1&&(a=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)e[t].data[o].y!==void 0&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(Ne.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(Ne.parseNumber(e[t].data[o].y))),e[t].data[o].goals!==void 0&&Array.isArray(e[t].data[o].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var l=0;l<e[a].data.length;l++){var c=typeof e[a].data[l].x=="string",u=Array.isArray(e[a].data[l].x),h=!u&&!!s.isValidDate(e[a].data[l].x);if(c||h)if(c||n.xaxis.convertedCatToNumeric){var d=r.isBarHorizontal&&r.isRangeData;n.xaxis.type!=="datetime"||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[a].data[l].x),isNaN(e[a].data[l].x)||this.w.config.xaxis.type==="category"||typeof e[a].data[l].x=="string"||(r.isXNumeric=!0)):this.twoDSeriesX.push(s.parseDate(e[a].data[l].x))}else n.xaxis.type==="datetime"?this.twoDSeriesX.push(s.parseDate(e[a].data[l].x.toString())):(r.dataFormatXNumeric=!0,r.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[a].data[l].x)));else u?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[a].data[l].x)):(r.isXNumeric=!0,r.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[a].data[l].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var A=0;A<e[t].data.length;A++)this.threeDSeries.push(e[t].data[A].z);r.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",e,t)),n.seriesRangeStart[t]=r.start===void 0?[]:r.start,n.seriesRangeEnd[t]=r.end===void 0?[]:r.end,n.seriesRange[t]=r.rangeUniques,n.seriesRange.forEach(function(s,a){s&&s.forEach(function(o,l){o.y.forEach(function(c,u){for(var h=0;h<o.y.length;h++)if(u!==h){var d=c.y1,A=c.y2,x=o.y[h].y1;d<=o.y[h].y2&&x<=A&&(o.overlaps.indexOf(c.rangeName)<0&&o.overlaps.push(c.rangeName),o.overlaps.indexOf(o.y[h].rangeName)<0&&o.overlaps.push(o.y[h].rangeName))}})})}),r}},{key:"handleCandleStickBoxData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleCandleStickBoxDataFormat("xy",e,t)),n.seriesCandleO[t]=r.o,n.seriesCandleH[t]=r.h,n.seriesCandleM[t]=r.m,n.seriesCandleL[t]=r.l,n.seriesCandleC[t]=r.c,r}},{key:"handleRangeDataFormat",value:function(e,t,n){var r=[],s=[],a=t[n].data.filter(function(u,h,d){return h===d.findIndex(function(A){return A.x===u.x})}).map(function(u,h){return{x:u.x,overlaps:[],y:[]}});if(e==="array")for(var o=0;o<t[n].data.length;o++)Array.isArray(t[n].data[o])?(r.push(t[n].data[o][1][0]),s.push(t[n].data[o][1][1])):(r.push(t[n].data[o]),s.push(t[n].data[o]));else if(e==="xy")for(var l=function(u){var h=Array.isArray(t[n].data[u].y),d=Ne.randomId(),A=t[n].data[u].x,x={y1:h?t[n].data[u].y[0]:t[n].data[u].y,y2:h?t[n].data[u].y[1]:t[n].data[u].y,rangeName:d};t[n].data[u].rangeName=d;var _=a.findIndex(function(S){return S.x===A});a[_].y.push(x),r.push(x.y1),s.push(x.y2)},c=0;c<t[n].data.length;c++)l(c);return{start:r,end:s,rangeUniques:a}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,n){var r=this.w,s=r.config.chart.type==="boxPlot"||r.config.series[n].type==="boxPlot",a=[],o=[],l=[],c=[],u=[];if(e==="array")if(s&&t[n].data[0].length===6||!s&&t[n].data[0].length===5)for(var h=0;h<t[n].data.length;h++)a.push(t[n].data[h][1]),o.push(t[n].data[h][2]),s?(l.push(t[n].data[h][3]),c.push(t[n].data[h][4]),u.push(t[n].data[h][5])):(c.push(t[n].data[h][3]),u.push(t[n].data[h][4]));else for(var d=0;d<t[n].data.length;d++)Array.isArray(t[n].data[d][1])&&(a.push(t[n].data[d][1][0]),o.push(t[n].data[d][1][1]),s?(l.push(t[n].data[d][1][2]),c.push(t[n].data[d][1][3]),u.push(t[n].data[d][1][4])):(c.push(t[n].data[d][1][2]),u.push(t[n].data[d][1][3])));else if(e==="xy")for(var A=0;A<t[n].data.length;A++)Array.isArray(t[n].data[A].y)&&(a.push(t[n].data[A].y[0]),o.push(t[n].data[A].y[1]),s?(l.push(t[n].data[A].y[2]),c.push(t[n].data[A].y[3]),u.push(t[n].data[A].y[4])):(c.push(t[n].data[A].y[2]),u.push(t[n].data[A].y[3])));return{o:a,h:o,m:l,l:c,c:u}}},{key:"parseDataAxisCharts",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,r=this.w.config,s=this.w.globals,a=new va(n),o=r.labels.length>0?r.labels.slice():r.xaxis.categories.slice();s.isRangeBar=r.chart.type==="rangeBar"&&s.isBarHorizontal,s.hasXaxisGroups=r.xaxis.type==="category"&&r.xaxis.group.groups.length>0,s.hasXaxisGroups&&(s.groups=r.xaxis.group.groups),e.forEach(function(A,x){A.name!==void 0?s.seriesNames.push(A.name):s.seriesNames.push("series-"+parseInt(x+1,10))}),this.coreUtils.setSeriesYAxisMappings();var l=[],c=Us(new Set(r.series.map(function(A){return A.group})));r.series.forEach(function(A,x){var _=c.indexOf(A.group);l[_]||(l[_]=[]),l[_].push(s.seriesNames[x])}),s.seriesGroups=l;for(var u=function(){for(var A=0;A<o.length;A++)if(typeof o[A]=="string"){if(!a.isValidDate(o[A]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(a.parseDate(o[A]))}else t.twoDSeriesX.push(o[A])},h=0;h<e.length;h++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[h].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(r.chart.type!=="rangeBar"&&r.chart.type!=="rangeArea"&&e[h].type!=="rangeBar"&&e[h].type!=="rangeArea"||(s.isRangeData=!0,this.handleRangeData(e,h)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,h):this.isFormatXY()&&this.handleFormatXY(e,h),r.chart.type!=="candlestick"&&e[h].type!=="candlestick"&&r.chart.type!=="boxPlot"&&e[h].type!=="boxPlot"||this.handleCandleStickBoxData(e,h),s.series.push(this.twoDSeries),s.labels.push(this.twoDSeriesX),s.seriesX.push(this.twoDSeriesX),s.seriesGoals=this.seriesGoals,h!==this.activeSeriesIndex||this.fallbackToCategory||(s.isXNumeric=!0);else{r.xaxis.type==="datetime"?(s.isXNumeric=!0,u(),s.seriesX.push(this.twoDSeriesX)):r.xaxis.type==="numeric"&&(s.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,s.seriesX.push(this.twoDSeriesX))),s.labels.push(this.twoDSeriesX);var d=e[h].data.map(function(A){return Ne.parseNumber(A)});s.series.push(d)}s.seriesZ.push(this.threeDSeries),e[h].color!==void 0?s.seriesColors.push(e[h].color):s.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,n=this.w.config;t.series=e.slice(),t.seriesNames=n.labels.slice();for(var r=0;r<t.series.length;r++)t.seriesNames[r]===void 0&&t.seriesNames.push("series-"+(r+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,n=this.w.globals;t.xaxis.categories.length>0?n.labels=t.xaxis.categories:t.labels.length>0?n.labels=t.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRange.length&&(n.seriesRange.map(function(r){r.forEach(function(s){n.labels.indexOf(s.x)<0&&s.x&&n.labels.push(s.x)})}),n.labels=Array.from(new Set(n.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new Ox(t).convertCatToNumericXaxis(t,this.ctx,n.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,n=this.w.config,r=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var s=n.series.map(function(h,d){return h.data.filter(function(A,x,_){return _.findIndex(function(S){return S.x===A.x})===x})}),a=s.reduce(function(h,d,A,x){return x[h].length>d.length?h:A},0),o=0;o<s[a].length;o++)r.push(o+1);else for(var l=0;l<t.series[t.maxValsInArrayIndex].length;l++)r.push(l+1);t.seriesX=[];for(var c=0;c<e.length;c++)t.seriesX.push(r);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(r.length===0){r=t.axisCharts?[]:t.series.map(function(h,d){return d+1});for(var u=0;u<e.length;u++)t.seriesX.push(r)}t.labels=r,n.xaxis.convertedCatToNumeric&&(t.categoryLabels=r.map(function(h){return n.xaxis.labels.formatter(h)})),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,n=t.config,r=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),r.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),n.chart.stacked){var s=new Hl(this.ctx);r.series=s.setNullSeriesToZeroValues(r.series)}this.coreUtils.getSeriesTotals(),r.axisCharts&&(r.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),r.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),r.dataFormatXNumeric||r.isXNumeric&&(n.xaxis.type!=="numeric"||n.labels.length!==0||n.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var a=this.coreUtils.getCategoryLabels(r.labels),o=0;o<a.length;o++)if(Array.isArray(a[o])){r.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach(function(n,r){var s=0;n.forEach(function(a){e.globals.collapsedSeriesIndices.indexOf(a)!==-1&&s++}),s>0&&s==n.length&&t.push(r)}),e.globals.ignoreYAxisIndexes=t.map(function(n){return n})}}]),i}(),By=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"svgStringToNode",value:function(e){return new DOMParser().parseFromString(e,"image/svg+xml").documentElement}},{key:"scaleSvgNode",value:function(e,t){var n=parseFloat(e.getAttributeNS(null,"width")),r=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",n*t),e.setAttributeNS(null,"height",r*t),e.setAttributeNS(null,"viewBox","0 0 "+n+" "+r)}},{key:"getSvgString",value:function(e){var t=this;return new Promise(function(n){var r=t.w,s=e||r.config.chart.toolbar.export.scale||r.config.chart.toolbar.export.width/r.globals.svgWidth;s||(s=1);var a=r.globals.svgWidth*s,o=r.globals.svgHeight*s,l=r.globals.dom.elWrap.cloneNode(!0);l.style.width=a+"px",l.style.height=o+"px";var c=new XMLSerializer().serializeToString(l),u=`
        <svg xmlns="http://www.w3.org/2000/svg"
          version="1.1"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          class="apexcharts-svg"
          xmlns:data="ApexChartsNS"
          transform="translate(0, 0)"
          width="`.concat(r.globals.svgWidth,'px" height="').concat(r.globals.svgHeight,`px">
          <foreignObject width="100%" height="100%">
            <div xmlns="http://www.w3.org/1999/xhtml" style="width:`).concat(a,"px; height:").concat(o,`px;">
            <style type="text/css">
              .apexcharts-tooltip, .apexcharts-toolbar, .apexcharts-xaxistooltip, .apexcharts-yaxistooltip, .apexcharts-xcrosshairs, .apexcharts-ycrosshairs, .apexcharts-zoom-rect, .apexcharts-selection-rect {
                display: none;
              }
            </style>
              `).concat(c,`
            </div>
          </foreignObject>
        </svg>
      `),h=t.svgStringToNode(u);s!==1&&t.scaleSvgNode(h,s),t.convertImagesToBase64(h).then(function(){u=new XMLSerializer().serializeToString(h),n(u.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(e){var t=this,n=e.getElementsByTagName("image"),r=Array.from(n).map(function(s){var a=s.getAttributeNS("http://www.w3.org/1999/xlink","href");return a&&!a.startsWith("data:")?t.getBase64FromUrl(a).then(function(o){s.setAttributeNS("http://www.w3.org/1999/xlink","href",o)}).catch(function(o){console.error("Error converting image to base64:",o)}):Promise.resolve()});return Promise.all(r)}},{key:"getBase64FromUrl",value:function(e){return new Promise(function(t,n){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var s=document.createElement("canvas");s.width=r.width,s.height=r.height,s.getContext("2d").drawImage(r,0,0),t(s.toDataURL())},r.onerror=n,r.src=e})}},{key:"svgUrl",value:function(){var e=this;return new Promise(function(t){e.getSvgString().then(function(n){var r=new Blob([n],{type:"image/svg+xml;charset=utf-8"});t(URL.createObjectURL(r))})})}},{key:"dataURI",value:function(e){var t=this;return new Promise(function(n){var r=t.w,s=e?e.scale||e.width/r.globals.svgWidth:1,a=document.createElement("canvas");a.width=r.globals.svgWidth*s,a.height=parseInt(r.globals.dom.elWrap.style.height,10)*s;var o=r.config.chart.background!=="transparent"&&r.config.chart.background?r.config.chart.background:"#fff",l=a.getContext("2d");l.fillStyle=o,l.fillRect(0,0,a.width*s,a.height*s),t.getSvgString(s).then(function(c){var u="data:image/svg+xml,"+encodeURIComponent(c),h=new Image;h.crossOrigin="anonymous",h.onload=function(){if(l.drawImage(h,0,0),a.msToBlob){var d=a.msToBlob();n({blob:d})}else{var A=a.toDataURL("image/png");n({imgURI:A})}},h.src=u})})}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then(function(t){e.triggerDownload(t,e.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var e=this,t=this.w.config.chart.toolbar.export.scale,n=this.w.config.chart.toolbar.export.width,r=t?{scale:t}:n?{width:n}:void 0;this.dataURI(r).then(function(s){var a=s.imgURI,o=s.blob;o?navigator.msSaveOrOpenBlob(o,e.w.globals.chartID+".png"):e.triggerDownload(a,e.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(e){var t=this,n=e.series,r=e.fileName,s=e.columnDelimiter,a=s===void 0?",":s,o=e.lineDelimiter,l=o===void 0?`
`:o,c=this.w;n||(n=c.config.series);var u=[],h=[],d="",A=c.globals.series.map(function(D,B){return c.globals.collapsedSeriesIndices.indexOf(B)===-1?D:[]}),x=function(D){return typeof c.config.chart.toolbar.export.csv.categoryFormatter=="function"?c.config.chart.toolbar.export.csv.categoryFormatter(D):c.config.xaxis.type==="datetime"&&String(D).length>=10?new Date(D).toDateString():Ne.isNumber(D)?D:D.split(a).join("")},_=function(D){return typeof c.config.chart.toolbar.export.csv.valueFormatter=="function"?c.config.chart.toolbar.export.csv.valueFormatter(D):D},S=Math.max.apply(Math,Us(n.map(function(D){return D.data?D.data.length:0}))),w=new XP(this.ctx),C=new pd(this.ctx),P=function(D){var B="";if(c.globals.axisCharts){if(c.config.xaxis.type==="category"||c.config.xaxis.convertedCatToNumeric)if(c.globals.isBarHorizontal){var k=c.globals.yLabelFormatters[0],U=new Hl(t.ctx).getActiveConfigSeriesIndex();B=k(c.globals.labels[D],{seriesIndex:U,dataPointIndex:D,w:c})}else B=C.getLabel(c.globals.labels,c.globals.timescaleLabels,0,D).text;c.config.xaxis.type==="datetime"&&(c.config.xaxis.categories.length?B=c.config.xaxis.categories[D]:c.config.labels.length&&(B=c.config.labels[D]))}else B=c.config.labels[D];return B===null?"nullvalue":(Array.isArray(B)&&(B=B.join(" ")),Ne.isNumber(B)?B:B.split(a).join(""))},L=function(D,B){if(u.length&&B===0&&h.push(u.join(a)),D.data){D.data=D.data.length&&D.data||Us(Array(S)).map(function(){return""});for(var k=0;k<D.data.length;k++){u=[];var U=P(k);if(U!=="nullvalue"){if(U||(w.isFormatXY()?U=n[B].data[k].x:w.isFormat2DArray()&&(U=n[B].data[k]?n[B].data[k][0]:"")),B===0){u.push(x(U));for(var F=0;F<c.globals.series.length;F++){var z,V=w.isFormatXY()?(z=n[F].data[k])===null||z===void 0?void 0:z.y:A[F][k];u.push(_(V))}}(c.config.chart.type==="candlestick"||D.type&&D.type==="candlestick")&&(u.pop(),u.push(c.globals.seriesCandleO[B][k]),u.push(c.globals.seriesCandleH[B][k]),u.push(c.globals.seriesCandleL[B][k]),u.push(c.globals.seriesCandleC[B][k])),(c.config.chart.type==="boxPlot"||D.type&&D.type==="boxPlot")&&(u.pop(),u.push(c.globals.seriesCandleO[B][k]),u.push(c.globals.seriesCandleH[B][k]),u.push(c.globals.seriesCandleM[B][k]),u.push(c.globals.seriesCandleL[B][k]),u.push(c.globals.seriesCandleC[B][k])),c.config.chart.type==="rangeBar"&&(u.pop(),u.push(c.globals.seriesRangeStart[B][k]),u.push(c.globals.seriesRangeEnd[B][k])),u.length&&h.push(u.join(a))}}}};u.push(c.config.chart.toolbar.export.csv.headerCategory),c.config.chart.type==="boxPlot"?(u.push("minimum"),u.push("q1"),u.push("median"),u.push("q3"),u.push("maximum")):c.config.chart.type==="candlestick"?(u.push("open"),u.push("high"),u.push("low"),u.push("close")):c.config.chart.type==="rangeBar"?(u.push("minimum"),u.push("maximum")):n.map(function(D,B){var k=(D.name?D.name:"series-".concat(B))+"";c.globals.axisCharts&&u.push(k.split(a).join("")?k.split(a).join(""):"series-".concat(B))}),c.globals.axisCharts||(u.push(c.config.chart.toolbar.export.csv.headerValue),h.push(u.join(a))),c.globals.allSeriesHasEqualX||!c.globals.axisCharts||c.config.xaxis.categories.length||c.config.labels.length?n.map(function(D,B){c.globals.axisCharts?L(D,B):((u=[]).push(x(c.globals.labels[B])),u.push(_(A[B])),h.push(u.join(a)))}):function(){var D=new Set,B={};n.forEach(function(k,U){k==null||k.data.forEach(function(F){var z,V;if(w.isFormatXY())z=F.x,V=F.y;else{if(!w.isFormat2DArray())return;z=F[0],V=F[1]}B[z]||(B[z]=Array(n.length).fill("")),B[z][U]=_(V),D.add(z)})}),u.length&&h.push(u.join(a)),Array.from(D).sort().forEach(function(k){h.push([x(k),B[k].join(a)])})}(),d+=h.join(l),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+d),r||c.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,n){var r=document.createElement("a");r.href=e,r.download=(t||this.w.globals.chartID)+n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}]),i}(),Bx=function(){function i(e,t){Kt(this,i),this.ctx=e,this.elgrid=t,this.w=e.w;var n=this.w;this.axesUtils=new pd(e),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],n.config.xaxis.position==="top"?this.offY=0:this.offY=n.globals.gridHeight,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=n.config.chart.type==="bar"&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return Jt(i,[{key:"drawXaxis",value:function(){var e=this.w,t=new yt(this.ctx),n=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),r=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);for(var s=[],a=0;a<this.xaxisLabels.length;a++)s.push(this.xaxisLabels[a]);if(this.drawXAxisLabelAndGroup(!0,t,r,s,e.globals.isXNumeric,function(x,_){return _}),e.globals.hasXaxisGroups){var o=e.globals.groups;s=[];for(var l=0;l<o.length;l++)s.push(o[l].title);var c={};e.config.xaxis.group.style&&(c.xaxisFontSize=e.config.xaxis.group.style.fontSize,c.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,c.xaxisForeColors=e.config.xaxis.group.style.colors,c.fontWeight=e.config.xaxis.group.style.fontWeight,c.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,r,s,!1,function(x,_){return o[x].cols*_},c)}if(e.config.xaxis.title.text!==void 0){var u=t.group({class:"apexcharts-xaxis-title"}),h=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});u.add(h),n.add(u)}if(e.config.xaxis.axisBorder.show){var d=e.globals.barPadForNumericAxis,A=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(A):n.add(A)}return n}},{key:"drawXAxisLabelAndGroup",value:function(e,t,n,r,s,a){var o,l=this,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},u=[],h=[],d=this.w,A=c.xaxisFontSize||this.xaxisFontSize,x=c.xaxisFontFamily||this.xaxisFontFamily,_=c.xaxisForeColors||this.xaxisForeColors,S=c.fontWeight||d.config.xaxis.labels.style.fontWeight,w=c.cssClass||d.config.xaxis.labels.style.cssClass,C=d.globals.padHorizontal,P=r.length,L=d.config.xaxis.type==="category"?d.globals.dataPoints:P;if(L===0&&P>L&&(L=P),s){var D=Math.max(Number(d.config.xaxis.tickAmount)||1,L>1?L-1:L);o=d.globals.gridWidth/Math.min(D,P-1),C=C+a(0,o)/2+d.config.xaxis.labels.offsetX}else o=d.globals.gridWidth/L,C=C+a(0,o)+d.config.xaxis.labels.offsetX;for(var B=function(U){var F=C-a(U,o)/2+d.config.xaxis.labels.offsetX;U===0&&P===1&&o/2===C&&L===1&&(F=d.globals.gridWidth/2);var z=l.axesUtils.getLabel(r,d.globals.timescaleLabels,F,U,u,A,e),V=28;if(d.globals.rotateXLabels&&e&&(V=22),d.config.xaxis.title.text&&d.config.xaxis.position==="top"&&(V+=parseFloat(d.config.xaxis.title.style.fontSize)+2),e||(V=V+parseFloat(A)+(d.globals.xAxisLabelsHeight-d.globals.xAxisGroupLabelsHeight)+(d.globals.rotateXLabels?10:0)),z=d.config.xaxis.tickAmount!==void 0&&d.config.xaxis.tickAmount!=="dataPoints"&&d.config.xaxis.type!=="datetime"?l.axesUtils.checkLabelBasedOnTickamount(U,z,P):l.axesUtils.checkForOverflowingLabels(U,z,P,u,h),d.config.xaxis.labels.show){var W=t.drawText({x:z.x,y:l.offY+d.config.xaxis.labels.offsetY+V-(d.config.xaxis.position==="top"?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:z.text,textAnchor:"middle",fontWeight:z.isBold?600:S,fontSize:A,fontFamily:x,foreColor:Array.isArray(_)?e&&d.config.xaxis.convertedCatToNumeric?_[d.globals.minX+U-1]:_[U]:_,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+w});if(n.add(W),W.on("click",function(J){if(typeof d.config.chart.events.xAxisLabelClick=="function"){var K=Object.assign({},d,{labelIndex:U});d.config.chart.events.xAxisLabelClick(J,l.ctx,K)}}),e){var X=document.createElementNS(d.globals.SVGNS,"title");X.textContent=Array.isArray(z.text)?z.text.join(" "):z.text,W.node.appendChild(X),z.text!==""&&(u.push(z.text),h.push(z))}}U<P-1&&(C+=a(U+1,o))},k=0;k<=P-1;k++)B(k)}},{key:"drawXaxisInversed",value:function(e){var t,n,r=this,s=this.w,a=new yt(this.ctx),o=s.config.yaxis[0].opposite?s.globals.translateYAxisX[e]:0,l=a.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),c=a.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});l.add(c);var u=[];if(s.config.yaxis[e].show)for(var h=0;h<this.xaxisLabels.length;h++)u.push(this.xaxisLabels[h]);t=s.globals.gridHeight/u.length,n=-t/2.2;var d=s.globals.yLabelFormatters[0],A=s.config.yaxis[0].labels;if(A.show)for(var x=function(D){var B=u[D]===void 0?"":u[D];B=d(B,{seriesIndex:e,dataPointIndex:D,w:s});var k=r.axesUtils.getYAxisForeColor(A.style.colors,e),U=0;Array.isArray(B)&&(U=B.length/2*parseInt(A.style.fontSize,10));var F=A.offsetX-15,z="end";r.yaxis.opposite&&(z="start"),s.config.yaxis[0].labels.align==="left"?(F=A.offsetX,z="start"):s.config.yaxis[0].labels.align==="center"?(F=A.offsetX,z="middle"):s.config.yaxis[0].labels.align==="right"&&(z="end");var V=a.drawText({x:F,y:n+t+A.offsetY-U,text:B,textAnchor:z,foreColor:Array.isArray(k)?k[D]:k,fontSize:A.style.fontSize,fontFamily:A.style.fontFamily,fontWeight:A.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+A.style.cssClass,maxWidth:A.maxWidth});c.add(V),V.on("click",function(J){if(typeof s.config.chart.events.xAxisLabelClick=="function"){var K=Object.assign({},s,{labelIndex:D});s.config.chart.events.xAxisLabelClick(J,r.ctx,K)}});var W=document.createElementNS(s.globals.SVGNS,"title");if(W.textContent=Array.isArray(B)?B.join(" "):B,V.node.appendChild(W),s.config.yaxis[e].labels.rotate!==0){var X=a.rotateAroundCenter(V.node);V.node.setAttribute("transform","rotate(".concat(s.config.yaxis[e].labels.rotate," 0 ").concat(X.y,")"))}n+=t},_=0;_<=u.length-1;_++)x(_);if(s.config.yaxis[0].title.text!==void 0){var S=a.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),w=a.drawText({x:s.config.yaxis[0].title.offsetX,y:s.globals.gridHeight/2+s.config.yaxis[0].title.offsetY,text:s.config.yaxis[0].title.text,textAnchor:"middle",foreColor:s.config.yaxis[0].title.style.color,fontSize:s.config.yaxis[0].title.style.fontSize,fontWeight:s.config.yaxis[0].title.style.fontWeight,fontFamily:s.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+s.config.yaxis[0].title.style.cssClass});S.add(w),l.add(S)}var C=0;this.isCategoryBarHorizontal&&s.config.yaxis[0].opposite&&(C=s.globals.gridWidth);var P=s.config.xaxis.axisBorder;if(P.show){var L=a.drawLine(s.globals.padHorizontal+P.offsetX+C,1+P.offsetY,s.globals.padHorizontal+P.offsetX+C,s.globals.gridHeight+P.offsetY,P.color,0);this.elgrid&&this.elgrid.elGridBorders&&s.config.grid.show?this.elgrid.elGridBorders.add(L):l.add(L)}return s.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(C,u.length,s.config.yaxis[0].axisBorder,s.config.yaxis[0].axisTicks,0,t,l),l}},{key:"drawXaxisTicks",value:function(e,t,n){var r=this.w,s=e;if(!(e<0||e-2>r.globals.gridWidth)){var a=this.offY+r.config.xaxis.axisTicks.offsetY;if(t=t+a+r.config.xaxis.axisTicks.height,r.config.xaxis.position==="top"&&(t=a-r.config.xaxis.axisTicks.height),r.config.xaxis.axisTicks.show){var o=new yt(this.ctx).drawLine(e+r.config.xaxis.axisTicks.offsetX,a+r.config.xaxis.offsetY,s+r.config.xaxis.axisTicks.offsetX,t+r.config.xaxis.offsetY,r.config.xaxis.axisTicks.color);n.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],n=this.xaxisLabels.length,r=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var s=0;s<n;s++)r=this.xaxisLabels[s].position,t.push(r);else for(var a=n,o=0;o<a;o++){var l=a;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(l-=1),r+=e.globals.gridWidth/l,t.push(r)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new yt(this.ctx),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<r.length;o++){var l=t.rotateAroundCenter(r[o]);l.y=l.y-1,l.x=l.x+1,r[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(l.x," ").concat(l.y,")")),r[o].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var c=r[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(c,function(A){t.placeTextWithEllipsis(A,A.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else(function(){for(var A=e.globals.gridWidth/(e.globals.labels.length+1),x=0;x<r.length;x++){var _=r[x].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(_,function(S){t.placeTextWithEllipsis(S,S.textContent,A)})}})();if(s.length>0){var u=s[s.length-1].getBBox(),h=s[0].getBBox();u.x<-20&&s[s.length-1].parentNode.removeChild(s[s.length-1]),h.x+h.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&s[0].parentNode.removeChild(s[0]);for(var d=0;d<a.length;d++)t.placeTextWithEllipsis(a[d],a[d].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),i}(),lX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new pd(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return Jt(i,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,n=new yt(this.ctx);e||(e=n.group({class:"apexcharts-grid"}));var r=n.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),s=n.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(s),e.add(r),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,n=new yt(this.ctx),r=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,Us(e.config.stroke.width)):e.config.stroke.width,s=function(u){var h=document.createElementNS(t.SVGNS,"clipPath");return h.setAttribute("id",u),h};t.dom.elGridRectMask=s("gridRectMask".concat(t.cuid)),t.dom.elGridRectBarMask=s("gridRectBarMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=s("gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=s("forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=s("nonForecastMask".concat(t.cuid));var a=0,o=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(a=Math.max(e.config.grid.padding.left,t.barPadForNumericAxis),o=Math.max(e.config.grid.padding.right,t.barPadForNumericAxis)),t.dom.elGridRect=n.drawRect(-r/2-2,-r/2-2,t.gridWidth+r+4,t.gridHeight+r+4,0,"#fff"),t.dom.elGridRectBar=n.drawRect(-r/2-a-2,-r/2-2,t.gridWidth+r+o+a+4,t.gridHeight+r+4,0,"#fff");var l=e.globals.markers.largestSize;t.dom.elGridRectMarker=n.drawRect(-l,-l,t.gridWidth+2*l,t.gridHeight+2*l,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectBarMask.appendChild(t.dom.elGridRectBar.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elGridRectBarMask),c.appendChild(t.dom.elGridRectMarkerMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,n=e.x1,r=e.y1,s=e.x2,a=e.y2,o=e.xCount,l=e.parent,c=this.w;if(!(t===0&&c.globals.skipFirstTimelinelabel||t===o-1&&c.globals.skipLastTimelinelabel&&!c.config.xaxis.labels.formatter||c.config.chart.type==="radar")){c.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:n,y1:r,x2:s,y2:a,xCount:o,parent:l});var u=0;if(c.globals.hasXaxisGroups&&c.config.xaxis.tickPlacement==="between"){var h=c.globals.groups;if(h){for(var d=0,A=0;d<t&&A<h.length;A++)d+=h[A].cols;d===t&&(u=.6*c.globals.xAxisLabelsHeight)}}new Bx(this.ctx).drawXaxisTicks(n,u,c.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,n=e.x1,r=e.y1,s=e.x2,a=e.y2,o=e.xCount,l=e.parent,c=this.w,u=l.node.classList.contains("apexcharts-gridlines-horizontal"),h=c.globals.barPadForNumericAxis,d=r===0&&a===0||n===0&&s===0||r===c.globals.gridHeight&&a===c.globals.gridHeight||c.globals.isBarHorizontal&&(t===0||t===o-1),A=new yt(this).drawLine(n-(u?h:0),r,s+(u?h:0),a,c.config.grid.borderColor,c.config.grid.strokeDashArray);A.node.classList.add("apexcharts-gridline"),d&&c.config.grid.show?this.elGridBorders.add(A):l.add(A)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,n=e.x1,r=e.y1,s=e.x2,a=e.y2,o=e.type,l=this.w,c=new yt(this.ctx),u=l.globals.barPadForNumericAxis,h=l.config.grid[o].colors[t],d=c.drawRect(n-(o==="row"?u:0),r,s+(o==="row"?2*u:0),a,0,h,l.config.grid[o].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(o))}},{key:"_drawXYLines",value:function(e){var t=this,n=e.xCount,r=e.tickAmount,s=this.w;if(s.config.grid.xaxis.lines.show||s.config.xaxis.axisTicks.show){var a,o=s.globals.padHorizontal,l=s.globals.gridHeight;s.globals.timescaleLabels.length?function(x){for(var _=x.xC,S=x.x1,w=x.y1,C=x.x2,P=x.y2,L=0;L<_;L++)S=t.xaxisLabels[L].position,C=t.xaxisLabels[L].position,t._drawGridLines({i:L,x1:S,y1:w,x2:C,y2:P,xCount:n,parent:t.elgridLinesV})}({xC:n,x1:o,y1:0,x2:a,y2:l}):(s.globals.isXNumeric&&(n=s.globals.xAxisScale.result.length),function(x){for(var _=x.xC,S=x.x1,w=x.y1,C=x.x2,P=x.y2,L=0;L<_+(s.globals.isXNumeric?0:1);L++)L===0&&_===1&&s.globals.dataPoints===1&&(C=S=s.globals.gridWidth/2),t._drawGridLines({i:L,x1:S,y1:w,x2:C,y2:P,xCount:n,parent:t.elgridLinesV}),C=S+=s.globals.gridWidth/(s.globals.isXNumeric?_-1:_)}({xC:n,x1:o,y1:0,x2:a,y2:l}))}if(s.config.grid.yaxis.lines.show){var c=0,u=0,h=s.globals.gridWidth,d=r+1;this.isRangeBar&&(d=s.globals.labels.length);for(var A=0;A<d+(this.isRangeBar?1:0);A++)this._drawGridLine({i:A,xCount:d+(this.isRangeBar?1:0),x1:0,y1:c,x2:h,y2:u,parent:this.elgridLinesH}),u=c+=s.globals.gridHeight/(this.isRangeBar?d:r)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var r,s=n.globals.padHorizontal,a=n.globals.gridHeight,o=0;o<t+1;o++)n.config.grid.xaxis.lines.show&&this._drawGridLine({i:o,xCount:t+1,x1:s,y1:0,x2:r,y2:a,parent:this.elgridLinesV}),new Bx(this.ctx).drawXaxisTicks(s,0,n.globals.dom.elGraphical),r=s+=n.globals.gridWidth/t;if(n.config.grid.yaxis.lines.show)for(var l=0,c=0,u=n.globals.gridWidth,h=0;h<n.globals.dataPoints+1;h++)this._drawGridLine({i:h,xCount:n.globals.dataPoints+1,x1:0,y1:l,x2:u,y2:c,parent:this.elgridLinesH}),c=l+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,n=new yt(this.ctx);this.elg=n.group({class:"apexcharts-grid"}),this.elgridLinesH=n.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=n.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=n.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var r=0;r<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.includes(r);)r++;r===t.seriesYAxisMap.length&&(r=0);var s,a=t.yAxisScale[r].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var o,l,c;s=this.xaxisLabels.length,this.isRangeBar&&(a=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(s=e.config.xaxis.tickAmount),((o=t.yAxisScale)===null||o===void 0||(l=o[r])===null||l===void 0||(c=l.result)===null||c===void 0?void 0:c.length)>0&&e.config.xaxis.type!=="datetime"&&(s=t.yAxisScale[r].result.length-1)),this._drawXYLines({xCount:s,tickAmount:a})}else s=a,a=t.xTickAmount,this._drawInvertedXYLines({xCount:s,tickAmount:a});return this.drawGridBands(s,a),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/s}}},{key:"drawGridBands",value:function(e,t){var n,r,s=this,a=this.w;if(((n=a.config.grid.row.colors)===null||n===void 0?void 0:n.length)>0&&function(x,_,S,w,C,P){for(var L=0,D=0;L<_;L++,D++)D>=a.config.grid[x].colors.length&&(D=0),s._drawGridBandRect({c:D,x1:S,y1:w,x2:C,y2:P,type:x}),w+=a.globals.gridHeight/t}("row",t,0,0,a.globals.gridWidth,a.globals.gridHeight/t),((r=a.config.grid.column.colors)===null||r===void 0?void 0:r.length)>0){var o=a.globals.isBarHorizontal||a.config.xaxis.tickPlacement!=="on"||a.config.xaxis.type!=="category"&&!a.config.xaxis.convertedCatToNumeric?e:e-1;a.globals.isXNumeric&&(o=a.globals.xAxisScale.result.length-1);for(var l=a.globals.padHorizontal,c=a.globals.padHorizontal+a.globals.gridWidth/o,u=a.globals.gridHeight,h=0,d=0;h<e;h++,d++){var A;d>=a.config.grid.column.colors.length&&(d=0),a.config.xaxis.type==="datetime"&&(l=this.xaxisLabels[h].position,c=(((A=this.xaxisLabels[h+1])===null||A===void 0?void 0:A.position)||a.globals.gridWidth)-this.xaxisLabels[h].position),this._drawGridBandRect({c:d,x1:l,y1:0,x2:c,y2:u,type:"column"}),l+=a.globals.gridWidth/o}}}}]),i}(),cX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.coreUtils=new ls(this.ctx)}return Jt(i,[{key:"niceScale",value:function(e,t){var n,r,s,a,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=1e-11,c=this.w,u=c.globals;u.isBarHorizontal?(n=c.config.xaxis,r=Math.max((u.svgWidth-100)/25,2)):(n=c.config.yaxis[o],r=Math.max((u.svgHeight-100)/15,2)),Ne.isNumber(r)||(r=10),s=n.min!==void 0&&n.min!==null,a=n.max!==void 0&&n.min!==null;var h=n.stepSize!==void 0&&n.stepSize!==null,d=n.tickAmount!==void 0&&n.tickAmount!==null,A=d?n.tickAmount:u.niceScaleDefaultTicks[Math.min(Math.round(r/2),u.niceScaleDefaultTicks.length-1)];if(u.isMultipleYAxis&&!d&&u.multiAxisTickAmount>0&&(A=u.multiAxisTickAmount,d=!0),A=A==="dataPoints"?u.dataPoints-1:Math.abs(Math.round(A)),(e===Number.MIN_VALUE&&t===0||!Ne.isNumber(e)&&!Ne.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=Ne.isNumber(n.min)?n.min:0,t=Ne.isNumber(n.max)?n.max:e+A,u.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var x=t;t=e,e=x}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var _=[];A<1&&(A=1);var S=A,w=Math.abs(t-e);!s&&e>0&&e/w<.15&&(e=0,s=!0),!a&&t<0&&-t/w<.15&&(t=0,a=!0);var C=(w=Math.abs(t-e))/S,P=C,L=Math.floor(Math.log10(P)),D=Math.pow(10,L),B=Math.ceil(P/D);if(C=P=(B=u.niceScaleAllowedMagMsd[u.yValueDecimal===0?0:1][B])*D,u.isBarHorizontal&&n.stepSize&&n.type!=="datetime"?(C=n.stepSize,h=!0):h&&(C=n.stepSize),h&&n.forceNiceScale){var k=Math.floor(Math.log10(C));C*=Math.pow(10,L-k)}if(s&&a){var U=w/S;if(d)if(h)if(Ne.mod(w,C)!=0){var F=Ne.getGCD(C,U);C=U/F<10?F:U}else Ne.mod(C,U)==0?C=U:(U=C,d=!1);else C=U;else if(h)Ne.mod(w,C)==0?U=C:C=U;else if(Ne.mod(w,C)==0)U=C;else{U=w/(S=Math.ceil(w/C));var z=Ne.getGCD(w,C);w/z<r&&(U=z),C=U}S=Math.round(w/C)}else{if(s||a){if(a)if(d)e=t-C*S;else{var V=e;e=C*Math.floor(e/C),Math.abs(t-e)/Ne.getGCD(w,C)>r&&(e=t-C*A,e+=C*Math.floor((V-e)/C))}else if(s)if(d)t=e+C*S;else{var W=t;t=C*Math.ceil(t/C),Math.abs(t-e)/Ne.getGCD(w,C)>r&&(t=e+C*A,t+=C*Math.ceil((W-t)/C))}}else if(u.isMultipleYAxis&&d){var X=C*Math.floor(e/C),J=X+C*S;J<t&&(C*=2),J=t,t=(e=X)+C*S,w=Math.abs(t-e),e>0&&e<Math.abs(J-t)&&(e=0,t=C*S),t<0&&-t<Math.abs(X-e)&&(t=0,e=-C*S)}else e=C*Math.floor(e/C),t=C*Math.ceil(t/C);w=Math.abs(t-e),C=Ne.getGCD(w,C),S=Math.round(w/C)}if(d||s||a||(S=Math.ceil((w-l)/(C+l)))>16&&Ne.getPrimeFactors(S).length<2&&S++,!d&&n.forceNiceScale&&u.yValueDecimal===0&&S>w&&(S=w,C=Math.round(w/S)),S>r&&(!d&&!h||n.forceNiceScale)){var K=Ne.getPrimeFactors(S),Y=K.length-1,ee=S;e:for(var se=0;se<Y;se++)for(var fe=0;fe<=Y-se;fe++){for(var ne=Math.min(fe+se,Y),he=ee,Te=1,Pe=fe;Pe<=ne;Pe++)Te*=K[Pe];if((he/=Te)<r){ee=he;break e}}C=ee===S?w:w/ee,S=Math.round(w/C)}u.isMultipleYAxis&&u.multiAxisTickAmount==0&&u.ignoreYAxisIndexes.indexOf(o)<0&&(u.multiAxisTickAmount=S);var _e=e-C,Ie=C*l;do _e+=C,_.push(Ne.stripNumber(_e,7));while(t-_e>Ie);return{result:_,niceMin:_[0],niceMax:_[_.length-1]}}},{key:"linearScale",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,a=Math.abs(t-e),o=[];if(e===t)return{result:o=[e],niceMin:o[0],niceMax:o[o.length-1]};(n=this._adjustTicksForSmallRange(n,r,a))==="dataPoints"&&(n=this.w.globals.dataPoints-1),s||(s=a/n),s=Math.round(100*(s+Number.EPSILON))/100,n===Number.MAX_VALUE&&(n=5,s=1);for(var l=e;n>=0;)o.push(l),l=Ne.preciseAddition(l,s),n-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],s=Math.ceil(Math.log(t)/Math.log(n)+1),a=Math.floor(Math.log(e)/Math.log(n));a<s;a++)r.push(Math.pow(n,a));return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],s=Math.log(t)/Math.log(n),a=Math.log(e)/Math.log(n),o=s-a,l=Math.round(o),c=o/l,u=0,h=a;u<l;u++,h+=c)r.push(Math.pow(n,h));return r.push(Math.pow(n,s)),{result:r,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,n){var r=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var s=Number(this.w.config.yaxis[t].labels.formatter(1));Ne.isNumber(s)&&this.w.globals.yValueDecimal===0&&(r=Math.ceil(n))}return r<e?r:e}},{key:"setYScaleForIndex",value:function(e,t,n){var r=this.w.globals,s=this.w.config,a=r.isBarHorizontal?s.xaxis:s.yaxis[e];r.yAxisScale[e]===void 0&&(r.yAxisScale[e]=[]);var o=Math.abs(n-t);a.logarithmic&&o<=5&&(r.invalidLogScale=!0),a.logarithmic&&o>5?(r.allSeriesCollapsed=!1,r.yAxisScale[e]=a.forceNiceScale?this.logarithmicScaleNice(t,n,a.logBase):this.logarithmicScale(t,n,a.logBase)):n!==-Number.MAX_VALUE&&Ne.isNumber(n)&&t!==Number.MAX_VALUE&&Ne.isNumber(t)?(r.allSeriesCollapsed=!1,r.yAxisScale[e]=this.niceScale(t,n,e)):r.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var n=this.w,r=n.globals;if(t!==-Number.MAX_VALUE&&Ne.isNumber(t)){var s=r.xTickAmount;r.xAxisScale=this.linearScale(e,t,s,0,n.config.xaxis.stepSize)}else r.xAxisScale=this.linearScale(0,10,10);return r.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,n=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var r=n.seriesYAxisMap,s=n.minYArr,a=n.maxYArr;n.allSeriesCollapsed=!0,n.barGroups=[],r.forEach(function(o,l){var c=[];o.forEach(function(u){var h,d=(h=t.series[u])===null||h===void 0?void 0:h.group;c.indexOf(d)<0&&c.push(d)}),o.length>0?function(){var u,h,d=Number.MAX_VALUE,A=-Number.MAX_VALUE,x=d,_=A;if(t.chart.stacked)(function(){var C=new Array(n.dataPoints).fill(0),P=[],L=[],D=[];c.forEach(function(){P.push(C.map(function(){return Number.MIN_VALUE})),L.push(C.map(function(){return Number.MIN_VALUE})),D.push(C.map(function(){return Number.MIN_VALUE}))});for(var B=function(U){!u&&t.series[o[U]].type&&(u=t.series[o[U]].type);var F=o[U];h=t.series[F].group?t.series[F].group:"axis-".concat(l),!(n.collapsedSeriesIndices.indexOf(F)<0&&n.ancillaryCollapsedSeriesIndices.indexOf(F)<0)||(n.allSeriesCollapsed=!1,c.forEach(function(z,V){if(t.series[F].group===z)for(var W=0;W<n.series[F].length;W++){var X=n.series[F][W];X>=0?L[V][W]+=X:D[V][W]+=X,P[V][W]+=X,x=Math.min(x,X),_=Math.max(_,X)}})),u!=="bar"&&u!=="column"||n.barGroups.push(h)},k=0;k<o.length;k++)B(k);u||(u=t.chart.type),u==="bar"||u==="column"?c.forEach(function(U,F){d=Math.min(d,Math.min.apply(null,D[F])),A=Math.max(A,Math.max.apply(null,L[F]))}):(c.forEach(function(U,F){x=Math.min(x,Math.min.apply(null,P[F])),_=Math.max(_,Math.max.apply(null,P[F]))}),d=x,A=_),d===Number.MIN_VALUE&&A===Number.MIN_VALUE&&(A=-Number.MAX_VALUE)})();else for(var S=0;S<o.length;S++){var w=o[S];d=Math.min(d,s[w]),A=Math.max(A,a[w]),!(n.collapsedSeriesIndices.indexOf(w)<0&&n.ancillaryCollapsedSeriesIndices.indexOf(w)<0)||(n.allSeriesCollapsed=!1)}t.yaxis[l].min!==void 0&&(d=typeof t.yaxis[l].min=="function"?t.yaxis[l].min(d):t.yaxis[l].min),t.yaxis[l].max!==void 0&&(A=typeof t.yaxis[l].max=="function"?t.yaxis[l].max(A):t.yaxis[l].max),n.barGroups=n.barGroups.filter(function(C,P,L){return L.indexOf(C)===P}),e.setYScaleForIndex(l,d,A),o.forEach(function(C){s[C]=n.yAxisScale[l].niceMin,a[C]=n.yAxisScale[l].niceMax})}():e.setYScaleForIndex(l,0,-Number.MAX_VALUE)})}}]),i}(),r5=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.scales=new cX(e)}return Jt(i,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.w.config,a=this.w.globals,o=-Number.MAX_VALUE,l=Number.MIN_VALUE;r===null&&(r=e+1);var c=a.series,u=c,h=c;s.chart.type==="candlestick"?(u=a.seriesCandleL,h=a.seriesCandleH):s.chart.type==="boxPlot"?(u=a.seriesCandleO,h=a.seriesCandleC):a.isRangeData&&(u=a.seriesRangeStart,h=a.seriesRangeEnd);var d=!1;if(a.seriesX.length>=r){var A,x=(A=a.brushSource)===null||A===void 0?void 0:A.w.config.chart.brush;(s.chart.zoom.enabled&&s.chart.zoom.autoScaleYaxis||x!=null&&x.enabled&&x!=null&&x.autoScaleYaxis)&&(d=!0)}for(var _=e;_<r;_++){a.dataPoints=Math.max(a.dataPoints,c[_].length);var S=s.series[_].type;a.categoryLabels.length&&(a.dataPoints=a.categoryLabels.filter(function(F){return F!==void 0}).length),a.labels.length&&s.xaxis.type!=="datetime"&&a.series.reduce(function(F,z){return F+z.length},0)!==0&&(a.dataPoints=Math.max(a.dataPoints,a.labels.length));var w=0,C=c[_].length-1;if(d){if(s.xaxis.min)for(;w<C&&a.seriesX[_][w]<s.xaxis.min;w++);if(s.xaxis.max)for(;C>w&&a.seriesX[_][C]>s.xaxis.max;C--);}for(var P=w;P<=C&&P<a.series[_].length;P++){var L=c[_][P];if(L!==null&&Ne.isNumber(L)){var D,B,k,U;switch(((D=h[_])===null||D===void 0?void 0:D[P])!==void 0&&(o=Math.max(o,h[_][P]),t=Math.min(t,h[_][P])),((B=u[_])===null||B===void 0?void 0:B[P])!==void 0&&(t=Math.min(t,u[_][P]),n=Math.max(n,u[_][P])),S){case"candlestick":a.seriesCandleC[_][P]!==void 0&&(o=Math.max(o,a.seriesCandleH[_][P]),t=Math.min(t,a.seriesCandleL[_][P]));break;case"boxPlot":a.seriesCandleC[_][P]!==void 0&&(o=Math.max(o,a.seriesCandleC[_][P]),t=Math.min(t,a.seriesCandleO[_][P]))}S&&S!=="candlestick"&&S!=="boxPlot"&&S!=="rangeArea"&&S!=="rangeBar"&&(o=Math.max(o,a.series[_][P]),t=Math.min(t,a.series[_][P])),a.seriesGoals[_]&&a.seriesGoals[_][P]&&Array.isArray(a.seriesGoals[_][P])&&a.seriesGoals[_][P].forEach(function(F){o=Math.max(o,F.value),t=Math.min(t,F.value)}),n=o,L=Ne.noExponents(L),Ne.isFloat(L)&&(a.yValueDecimal=Math.max(a.yValueDecimal,L.toString().split(".")[1].length)),l>((k=u[_])===null||k===void 0?void 0:k[P])&&((U=u[_])===null||U===void 0?void 0:U[P])<0&&(l=u[_][P])}else a.hasNullValues=!0}S!=="bar"&&S!=="column"||(l<0&&o<0&&(o=0,n=Math.max(n,0)),l===Number.MIN_VALUE&&(l=0,t=Math.min(t,0)))}return s.chart.type==="rangeBar"&&a.seriesRangeStart.length&&a.isBarHorizontal&&(l=t),s.chart.type==="bar"&&(l<0&&o<0&&(o=0),l===Number.MIN_VALUE&&(l=0)),{minY:l,maxY:o,lowestY:t,highestY:n}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var n,r=Number.MAX_VALUE;if(e.isMultipleYAxis){r=Number.MAX_VALUE;for(var s=0;s<e.series.length;s++)n=this.getMinYMaxY(s),e.minYArr[s]=n.lowestY,e.maxYArr[s]=n.highestY,r=Math.min(r,n.lowestY)}return n=this.getMinYMaxY(0,r,null,e.series.length),t.chart.type==="bar"?(e.minY=n.minY,e.maxY=n.maxY):(e.minY=n.lowestY,e.maxY=n.highestY),r=n.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&r!==-Number.MAX_VALUE&&r!==e.maxY&&(e.minY=r):e.minY=e.minY!==Number.MIN_VALUE?Math.min(n.minY,e.minY):n.minY,t.yaxis.forEach(function(a,o){a.max!==void 0&&(typeof a.max=="number"?e.maxYArr[o]=a.max:typeof a.max=="function"&&(e.maxYArr[o]=a.max(e.isMultipleYAxis?e.maxYArr[o]:e.maxY)),e.maxY=e.maxYArr[o]),a.min!==void 0&&(typeof a.min=="number"?e.minYArr[o]=a.min:typeof a.min=="function"&&(e.minYArr[o]=a.min(e.isMultipleYAxis?e.minYArr[o]===Number.MIN_VALUE?0:e.minYArr[o]:e.minY)),e.minY=e.minYArr[o])}),e.isBarHorizontal&&["min","max"].forEach(function(a){t.xaxis[a]!==void 0&&typeof t.xaxis[a]=="number"&&(a==="min"?e.minY=t.xaxis[a]:e.maxY=t.xaxis[a])}),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=r):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach(function(a){switch(a.type||t.chart.type){case"bar":case"column":e.barGroups.push(a.group);break;case"line":e.lineGroups.push(a.group);break;case"area":e.areaGroups.push(a.group)}}),e.barGroups=e.barGroups.filter(function(a,o,l){return l.indexOf(a)===o}),e.lineGroups=e.lineGroups.filter(function(a,o,l){return l.indexOf(a)===o}),e.areaGroups=e.areaGroups.filter(function(a,o,l){return l.indexOf(a)===o}),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,n=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var l=0;l<e.series.length;l++)if(e.labels[l])for(var c=0;c<e.labels[l].length;c++)e.labels[l][c]!==null&&Ne.isNumber(e.labels[l][c])&&(e.maxX=Math.max(e.maxX,e.labels[l][c]),e.initialMaxX=Math.max(e.maxX,e.labels[l][c]),e.minX=Math.min(e.minX,e.labels[l][c]),e.initialMinX=Math.min(e.minX,e.labels[l][c]))}(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var r=10;if(t.xaxis.tickAmount===void 0)r=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(r=e.dataPoints-1),r>e.dataPoints&&e.dataPoints!==0&&(r=e.dataPoints-1);else if(t.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(r=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var s=Math.round(e.maxX-e.minX);s<30&&(r=s-1)}}else r=t.xaxis.tickAmount;if(e.xTickAmount=r,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var a=[],o=e.minX-1;o<e.maxX;o++)a.push(o+1);e.xAxisScale={result:a,niceMin:a[0],niceMax:a[a.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,r,r,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,r-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());n&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var n=0;n<e.seriesZ[t].length;n++)e.seriesZ[t][n]!==null&&Ne.isNumber(e.seriesZ[t][n])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][n]),e.minZ=Math.min(e.minZ,e.seriesZ[t][n]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var n=new va(this.ctx);if(t.xaxis.type==="datetime"){var r=n.getDate(e.minX);t.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()-2):r.setDate(r.getDate()-2),e.minX=new Date(r).getTime();var s=n.getDate(e.maxX);t.xaxis.labels.datetimeUTC?s.setUTCDate(s.getUTCDate()+2):s.setDate(s.getDate()+2),e.maxX=new Date(s).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach(function(t,n){if(t.length){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var r=t.slice();r.sort(function(s,a){return s-a}),r.forEach(function(s,a){if(a>0){var o=s-r[a-1];o>0&&(e.minXDiff=Math.min(o,e.minXDiff))}}),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}})}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var n=t.seriesGroups;n.length||(n=[this.w.globals.seriesNames.map(function(a){return a})]);var r={},s={};n.forEach(function(a){r[a]=[],s[a]=[],e.w.config.series.map(function(o,l){return a.indexOf(t.seriesNames[l])>-1?l:null}).filter(function(o){return o!==null}).forEach(function(o){for(var l=0;l<t.series[t.maxValsInArrayIndex].length;l++){var c,u,h,d;r[a][l]===void 0&&(r[a][l]=0,s[a][l]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((c=e.w.config.series)===null||c===void 0||(u=c[o])===null||u===void 0?void 0:u.type)==="bar"||((h=e.w.config.series)===null||h===void 0||(d=h[o])===null||d===void 0?void 0:d.type)==="column"))&&t.series[o][l]!==null&&Ne.isNumber(t.series[o][l])&&(t.series[o][l]>0?r[a][l]+=parseFloat(t.series[o][l])+1e-4:s[a][l]+=parseFloat(t.series[o][l]))}})}),Object.entries(r).forEach(function(a){var o=Nj(a,1)[0];r[o].forEach(function(l,c){t.maxY=Math.max(t.maxY,r[o][c]),t.minY=Math.min(t.minY,s[o][c])})})}}}]),i}(),YP=function(){function i(e,t){Kt(this,i),this.ctx=e,this.elgrid=t,this.w=e.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=n.config.chart.type==="bar"&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=n.config.xaxis.position==="bottom"?n.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new pd(e)}return Jt(i,[{key:"drawYaxis",value:function(e){var t=this.w,n=new yt(this.ctx),r=t.config.yaxis[e].labels.style,s=r.fontSize,a=r.fontFamily,o=r.fontWeight,l=n.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(t.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return l;var c=n.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var u=t.globals.yAxisScale[e].result.length-1,h=t.globals.gridHeight/u,d=t.globals.yLabelFormatters[e],A=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice());if(t.config.yaxis[e].labels.show){var x=t.globals.translateY+t.config.yaxis[e].labels.offsetY;t.globals.isBarHorizontal?x=0:t.config.chart.type==="heatmap"&&(x-=h/2),x+=parseInt(s,10)/3;for(var _=u;_>=0;_--){var S=d(A[_],_,t),w=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&(w*=-1);var C=this.getTextAnchor(t.config.yaxis[e].labels.align,t.config.yaxis[e].opposite),P=this.axesUtils.getYAxisForeColor(r.colors,e),L=Array.isArray(P)?P[_]:P,D=Ne.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map(function(k){return k.textContent}),B=n.drawText({x:w,y:x,text:D.includes(S)&&!t.config.yaxis[e].labels.showDuplicates?"":S,textAnchor:C,fontSize:s,fontFamily:a,fontWeight:o,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:L,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(r.cssClass)});c.add(B),this.addTooltip(B,S),t.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(n,B,firstLabel,t.config.yaxis[e].labels.rotate),x+=h}}return this.addYAxisTitle(n,l,e),this.addAxisBorder(n,l,e,u,h),l}},{key:"getTextAnchor",value:function(e,t){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":t?"start":"end"}},{key:"addTooltip",value:function(e,t){var n=document.createElementNS(this.w.globals.SVGNS,"title");n.textContent=Array.isArray(t)?t.join(" "):t,e.node.appendChild(n)}},{key:"rotateLabel",value:function(e,t,n,r){var s=e.rotateAroundCenter(n.node),a=e.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(".concat(r," ").concat(s.x," ").concat(a.y,")"))}},{key:"addYAxisTitle",value:function(e,t,n){var r=this.w;if(r.config.yaxis[n].title.text!==void 0){var s=e.group({class:"apexcharts-yaxis-title"}),a=r.config.yaxis[n].opposite?r.globals.translateYAxisX[n]:0,o=e.drawText({x:a,y:r.globals.gridHeight/2+r.globals.translateY+r.config.yaxis[n].title.offsetY,text:r.config.yaxis[n].title.text,textAnchor:"end",foreColor:r.config.yaxis[n].title.style.color,fontSize:r.config.yaxis[n].title.style.fontSize,fontWeight:r.config.yaxis[n].title.style.fontWeight,fontFamily:r.config.yaxis[n].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(r.config.yaxis[n].title.style.cssClass)});s.add(o),t.add(s)}}},{key:"addAxisBorder",value:function(e,t,n,r,s){var a=this.w,o=a.config.yaxis[n].axisBorder,l=31+o.offsetX;if(a.config.yaxis[n].opposite&&(l=-31-o.offsetX),o.show){var c=e.drawLine(l,a.globals.translateY+o.offsetY-2,l,a.globals.gridHeight+a.globals.translateY+o.offsetY+2,o.color,0,o.width);t.add(c)}a.config.yaxis[n].axisTicks.show&&this.axesUtils.drawYAxisTicks(l,r,o,a.config.yaxis[n].axisTicks,n,s,t)}},{key:"drawYaxisInversed",value:function(e){var t=this.w,n=new yt(this.ctx),r=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),s=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});r.add(s);var a=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/a+.1,l=o+t.config.xaxis.labels.offsetX,c=t.globals.xLabelFormatter,u=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice()),h=t.globals.timescaleLabels;if(h.length>0&&(this.xaxisLabels=h.slice(),a=(u=h.slice()).length),t.config.xaxis.labels.show)for(var d=h.length?0:a;h.length?d<h.length:d>=0;h.length?d++:d--){var A=c(u[d],d,t),x=t.globals.gridWidth+t.globals.padHorizontal-(l-o+t.config.xaxis.labels.offsetX);if(h.length){var _=this.axesUtils.getLabel(u,h,x,d,this.drawnLabels,this.xaxisFontSize);x=_.x,A=_.text,this.drawnLabels.push(_.text),d===0&&t.globals.skipFirstTimelinelabel&&(A=""),d===u.length-1&&t.globals.skipLastTimelinelabel&&(A="")}var S=n.drawText({x,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:A,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(t.config.xaxis.labels.style.cssClass)});s.add(S),S.tspan(A),this.addTooltip(S,A),l+=o}return this.inversedYAxisTitleText(r),this.inversedYAxisBorder(r),r}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,n=new yt(this.ctx),r=t.config.xaxis.axisBorder;if(r.show){var s=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(s-=15);var a=n.drawLine(t.globals.padHorizontal+s+r.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,r.color,0,r.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(a):e.add(a)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,n=new yt(this.ctx);if(t.config.xaxis.title.text!==void 0){var r=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),s=n.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(t.config.xaxis.title.style.cssClass)});r.add(s),e.add(r)}}},{key:"yAxisTitleRotate",value:function(e,t){var n=this.w,r=new yt(this.ctx),s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),a=s?s.getBoundingClientRect():{width:0,height:0},o=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),l=o?o.getBoundingClientRect():{width:0,height:0};if(o){var c=this.xPaddingForYAxisTitle(e,a,l,t);o.setAttribute("x",c.xPos-(t?10:0));var u=r.rotateAroundCenter(o);o.setAttribute("transform","rotate(".concat(t?-1*n.config.yaxis[e].title.rotate:n.config.yaxis[e].title.rotate," ").concat(u.x," ").concat(u.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,n,r){var s=this.w,a=0,o=10;return s.config.yaxis[e].title.text===void 0||e<0?{xPos:a,padd:0}:(r?a=t.width+s.config.yaxis[e].title.offsetX+n.width/2+o/2:(a=-1*t.width+s.config.yaxis[e].title.offsetX+o/2+n.width/2,s.globals.isBarHorizontal&&(o=25,a=-1*t.width-s.config.yaxis[e].title.offsetX-o)),{xPos:a,padd:o})}},{key:"setYAxisXPosition",value:function(e,t){var n=this.w,r=0,s=0,a=18,o=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.forEach(function(l,c){var u=n.globals.ignoreYAxisIndexes.includes(c)||!l.show||l.floating||e[c].width===0,h=e[c].width+t[c].width;l.opposite?n.globals.isBarHorizontal?(s=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[c]=s-l.labels.offsetX):(s=n.globals.gridWidth+n.globals.translateX+o,u||(o+=h+20),n.globals.translateYAxisX[c]=s-l.labels.offsetX+20):(r=n.globals.translateX-a,u||(a+=h+20),n.globals.translateYAxisX[c]=r+l.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;Ne.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(t,n){var r=e.config.yaxis[n];if(r&&!r.floating&&r.labels.align!==void 0){var s=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),a=Ne.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"))),o=s.getBoundingClientRect();a.forEach(function(l){l.setAttribute("text-anchor",r.labels.align)}),r.labels.align!=="left"||r.opposite?r.labels.align==="center"?s.setAttribute("transform","translate(".concat(o.width/2*(r.opposite?1:-1),", 0)")):r.labels.align==="right"&&r.opposite&&s.setAttribute("transform","translate(".concat(o.width,", 0)")):s.setAttribute("transform","translate(-".concat(o.width,", 0)"))}})}}]),i}(),STe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.documentEvent=Ne.bind(this.documentEvent,this)}return Jt(i,[{key:"addEventListener",value:function(e,t){var n=this.w;n.globals.events.hasOwnProperty(e)?n.globals.events[e].push(t):n.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){var r=n.globals.events[e].indexOf(t);r!==-1&&n.globals.events[e].splice(r,1)}}},{key:"fireEvent",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var r=n.globals.events[e],s=r.length,a=0;a<s;a++)r[a].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,n=this.ctx,r=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach(function(s){r.addEventListener(s,function(a){var o=a.target.getAttribute("i")===null&&t.globals.capturedSeriesIndex!==-1?t.globals.capturedSeriesIndex:a.target.getAttribute("i"),l=a.target.getAttribute("j")===null&&t.globals.capturedDataPointIndex!==-1?t.globals.capturedDataPointIndex:a.target.getAttribute("j"),c=Object.assign({},t,{seriesIndex:t.globals.axisCharts?o:0,dataPointIndex:l});a.type==="mousemove"||a.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(a,n,c):a.type==="mouseleave"||a.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(a,n,c):(a.type==="mouseup"&&a.which===1||a.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(a,n,c),n.ctx.events.fireEvent("click",[a,n,c]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(s){t.globals.dom.baseEl.addEventListener(s,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,n=e.target.className;if(e.type==="click"){var r=t.globals.dom.baseEl.querySelector(".apexcharts-menu");r&&r.classList.contains("apexcharts-menu-open")&&n!=="apexcharts-menu-icon"&&r.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),i}(),TTe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=t.filter(function(s){return s.name===e})[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var r=Ne.extend(sX,n);this.w.globals.locale=r.options}}]),i}(),MTe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"drawAxis",value:function(e,t){var n,r,s=this,a=this.w.globals,o=this.w.config,l=new Bx(this.ctx,t),c=new YP(this.ctx,t);a.axisCharts&&e!=="radar"&&(a.isBarHorizontal?(r=c.drawYaxisInversed(0),n=l.drawXaxisInversed(0),a.dom.elGraphical.add(n),a.dom.elGraphical.add(r)):(n=l.drawXaxis(),a.dom.elGraphical.add(n),o.yaxis.map(function(u,h){if(a.ignoreYAxisIndexes.indexOf(h)===-1&&(r=c.drawYaxis(h),a.dom.Paper.add(r),s.w.config.grid.position==="back")){var d=a.dom.Paper.children()[1];d.remove(),a.dom.Paper.add(d)}})))}}]),i}(),s5=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new yt(this.ctx),n=new ya(this.ctx),r=e.config.xaxis.crosshairs.fill.gradient,s=e.config.xaxis.crosshairs.dropShadow,a=e.config.xaxis.crosshairs.fill.type,o=r.colorFrom,l=r.colorTo,c=r.opacityFrom,u=r.opacityTo,h=r.stops,d=s.enabled,A=s.left,x=s.top,_=s.blur,S=s.color,w=s.opacity,C=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){a==="gradient"&&(C=t.drawGradient("vertical",o,l,c,u,null,h,null));var P=t.drawRect();e.config.xaxis.crosshairs.width===1&&(P=t.drawLine());var L=e.globals.gridHeight;(!Ne.isNumber(L)||L<0)&&(L=0);var D=e.config.xaxis.crosshairs.width;(!Ne.isNumber(D)||D<0)&&(D=0),P.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:L,width:D,height:L,fill:C,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),d&&(P=n.dropShadow(P,{left:A,top:x,blur:_,color:S,opacity:w})),e.globals.dom.elGraphical.add(P)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new yt(this.ctx),n=e.config.yaxis[0].crosshairs,r=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var s=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);s.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(s)}var a=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,0,0);a.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(a)}}]),i}(),ETe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"checkResponsiveConfig",value:function(e){var t=this,n=this.w,r=n.config;if(r.responsive.length!==0){var s=r.responsive.slice();s.sort(function(c,u){return c.breakpoint>u.breakpoint?1:u.breakpoint>c.breakpoint?-1:0}).reverse();var a=new Ix({}),o=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=s[0].breakpoint,h=window.innerWidth>0?window.innerWidth:screen.width;if(h>u){var d=Ne.clone(n.globals.initialConfig);d.series=Ne.clone(n.config.series);var A=ls.extendArrayProps(a,d,n);c=Ne.extend(A,c),c=Ne.extend(n.config,c),t.overrideResponsiveOptions(c)}else for(var x=0;x<s.length;x++)h<s[x].breakpoint&&(c=ls.extendArrayProps(a,s[x].options,n),c=Ne.extend(n.config,c),t.overrideResponsiveOptions(c))};if(e){var l=ls.extendArrayProps(a,e,n);l=Ne.extend(n.config,l),o(l=Ne.extend(l,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new Ix(e).init({responsiveOverride:!0});this.w.config=t}}]),i}(),CTe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return Jt(i,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,t=e.chart,n=e.plotOptions;return t.type==="treemap"&&n.treemap&&n.treemap.distributed||t.type==="heatmap"&&n.heatmap&&n.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,t=e.chart,n=e.plotOptions;return n.bar&&n.bar.distributed&&(t.type==="bar"||t.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,t=new Ne;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode||"light"));var n=Us(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(n),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,t));var r=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],r),this.applyDataLabelsColors(r),this.applyRadarPolygonsColors(),this.applyMarkersColors(r)}},{key:"getColors",value:function(e){var t=this,n=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,n.config.series.map(function(r,s){var a=e[s]||e[0];return typeof a=="function"?a({value:n.globals.axisCharts?n.globals.series[s][0]||0:n.globals.series[s],seriesIndex:s,dataPointIndex:s,w:t.w}):a})):e:this.predefined()}},{key:"applySeriesColors",value:function(e,t){e.forEach(function(n,r){n&&(t[r]=n)})}},{key:"getMonochromeColors",value:function(e,t,n){var r=e.color,s=e.shadeIntensity,a=e.shadeTo,o=this.isBarDistributed||this.isHeatmapDistributed?t[0].length*t.length:t.length,l=1/(o/s),c=0;return Array.from({length:o},function(){var u=a==="dark"?n.shadeColor(-1*c,r):n.shadeColor(c,r);return c+=l,u})}},{key:"applyColorTypes",value:function(e,t){var n=this,r=this.w;e.forEach(function(s){r.globals[s].colors=r.config[s].colors===void 0?n.isColorFn?r.config.colors:t:r.config[s].colors.slice(),n.pushExtraColors(r.globals[s].colors)})}},{key:"applyDataLabelsColors",value:function(e){var t=this.w;t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors===void 0?e:t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#343A3F":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var t=this.w;t.globals.markers.colors=t.config.markers.colors===void 0?e:t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.w,s=t||r.globals.series.length;if(n===null&&(n=this.isBarDistributed||this.isHeatmapDistributed||r.config.chart.type==="heatmap"&&r.config.plotOptions.heatmap&&r.config.plotOptions.heatmap.colorScale.inverse),n&&r.globals.series.length&&(s=r.globals.series[r.globals.maxValsInArrayIndex].length*r.globals.series.length),e.length<s)for(var a=s-e.length,o=0;o<a;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,n=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",r=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=r,e.theme.palette=n,e}},{key:"predefined",value:function(){var e={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return e[this.w.config.theme.palette]||e.default}}]),i}(),RTe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,n=e==="title"?t.config.title:t.config.subtitle,r=t.globals.svgWidth/2,s=n.offsetY,a="middle";if(n.align==="left"?(r=10,a="start"):n.align==="right"&&(r=t.globals.svgWidth-10,a="end"),r+=n.offsetX,s=s+parseInt(n.style.fontSize,10)+n.margin/2,n.text!==void 0){var o=new yt(this.ctx).drawText({x:r,y:s,text:n.text,textAnchor:a,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),i}(),PTe=function(){function i(e){Kt(this,i),this.w=e.w,this.dCtx=e}return Jt(i,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,n=0,r=0,s=e==="title"?t.config.title.floating:t.config.subtitle.floating,a=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(a!==null&&!s){var o=a.getBoundingClientRect();n=o.width,r=t.globals.axisCharts?o.height+5:o.height}return{width:n,height:r}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var n=Object.assign({},Ne.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:n.height===0?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,n=[];t.config.series.forEach(function(l,c){l.data.forEach(function(u,h){var d;d=t.globals.series[c][h],r=t.config.dataLabels.formatter(d,{ctx:e.dCtx.ctx,seriesIndex:c,dataPointIndex:h,w:t}),n.push(r)})});var r=Ne.getLargestStringFromArr(n),s=new yt(this.dCtx.ctx),a=t.config.dataLabels.style,o=s.getTextRects(r,parseInt(a.fontSize),a.fontFamily);return{width:1.05*o.width,height:o.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var n=e;if(this.w.globals.isMultiLineX){var r=t.map(function(a,o){return Array.isArray(a)?a.length:1}),s=Math.max.apply(Math,Us(r));n=t[r.indexOf(s)]}return n}}]),i}(),NTe=function(){function i(e){Kt(this,i),this.w=e.w,this.dCtx=e}return Jt(i,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,n=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&n.length===0&&(n=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var r=this.getxAxisTimeScaleLabelsCoords();e={width:r.width,height:r.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var s=t.globals.xLabelFormatter,a=Ne.getLargestStringFromArr(n),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,n);t.globals.isBarHorizontal&&(o=a=t.globals.yAxisScale[0].result.reduce(function(x,_){return x.length>_.length?x:_},0));var l=new M1(this.dCtx.ctx),c=a;a=l.xLabelFormat(s,a,c,{i:void 0,dateFormatter:new va(this.dCtx.ctx).formatDate,w:t}),o=l.xLabelFormat(s,o,c,{i:void 0,dateFormatter:new va(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&a===void 0||String(a).trim()==="")&&(o=a="1");var u=new yt(this.dCtx.ctx),h=u.getTextRects(a,t.config.xaxis.labels.style.fontSize),d=h;if(a!==o&&(d=u.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:h.width>=d.width?h.width:d.width,height:h.height>=d.height?h.height:d.height}).width*n.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var A=function(x){return u.getTextRects(x,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};h=A(a),a!==o&&(d=A(o)),e.height=(h.height>d.height?h.height:d.height)/1.5,e.width=h.width>d.width?h.width:d.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var n,r=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,s=t.globals.groups.map(function(h){return h.title}),a=Ne.getLargestStringFromArr(s),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,s),l=new yt(this.dCtx.ctx),c=l.getTextRects(a,r),u=c;return a!==o&&(u=l.getTextRects(o,r)),n={width:c.width>=u.width?c.width:u.width,height:c.height>=u.height?c.height:u.height},t.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,n=0;if(e.config.xaxis.title.text!==void 0){var r=new yt(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=r.width,n=r.height}return{width:t,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map(function(s){return s.value}),r=n.reduce(function(s,a){return s===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):s.length>a.length?s:a},0);return 1.05*(e=new yt(this.dCtx.ctx).getTextRects(r,t.config.xaxis.labels.style.fontSize)).width*n.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,n=this.w,r=n.globals,s=n.config,a=s.xaxis.type,o=e.width;r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1;var l=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,c=function(u,h){s.yaxis.length>1&&function(d){return r.collapsedSeriesIndices.indexOf(d)!==-1}(h)||function(d){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var A=t.dCtx.timescaleLabels[0],x=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,_=A.position-o/1.75+t.dCtx.yAxisWidthLeft,S=n.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;x>r.svgWidth-r.translateX-S&&(r.skipLastTimelinelabel=!0),_<-(d.show&&!d.floating||s.chart.type!=="bar"&&s.chart.type!=="candlestick"&&s.chart.type!=="rangeBar"&&s.chart.type!=="boxPlot"?10:o/1.75)&&(r.skipFirstTimelinelabel=!0)}else a==="datetime"?t.dCtx.gridPad.right<o&&!r.rotateXLabels&&(r.skipLastTimelinelabel=!0):a!=="datetime"&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!r.rotateXLabels&&!n.config.xaxis.labels.trim&&(t.dCtx.xPadRight=o/2+1)}(u)};s.yaxis.forEach(function(u,h){l?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):c(u,h)})}}]),i}(),LTe=function(){function i(e){Kt(this,i),this.w=e.w,this.dCtx=e}return Jt(i,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,n=[],r=10,s=new pd(this.dCtx.ctx);return t.config.yaxis.map(function(a,o){var l={seriesIndex:o,dataPointIndex:-1,w:t},c=t.globals.yAxisScale[o],u=0;if(!s.isYAxisHidden(o)&&a.labels.show&&a.labels.minWidth!==void 0&&(u=a.labels.minWidth),!s.isYAxisHidden(o)&&a.labels.show&&c.result.length){var h=t.globals.yLabelFormatters[o],d=c.niceMin===Number.MIN_VALUE?0:c.niceMin,A=c.result.reduce(function(L,D){var B,k;return((B=String(h(L,l)))===null||B===void 0?void 0:B.length)>((k=String(h(D,l)))===null||k===void 0?void 0:k.length)?L:D},d),x=A=h(A,l);if(A!==void 0&&A.length!==0||(A=c.niceMax),t.globals.isBarHorizontal){r=0;var _=t.globals.labels.slice();A=Ne.getLargestStringFromArr(_),A=h(A,{seriesIndex:o,dataPointIndex:-1,w:t}),x=e.dCtx.dimHelpers.getLargestStringFromMultiArr(A,_)}var S=new yt(e.dCtx.ctx),w="rotate(".concat(a.labels.rotate," 0 0)"),C=S.getTextRects(A,a.labels.style.fontSize,a.labels.style.fontFamily,w,!1),P=C;A!==x&&(P=S.getTextRects(x,a.labels.style.fontSize,a.labels.style.fontFamily,w,!1)),n.push({width:(u>P.width||u>C.width?u:P.width>C.width?P.width:C.width)+r,height:P.height>C.height?P.height:C.height})}else n.push({width:0,height:0})}),n}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,n=[];return t.config.yaxis.map(function(r,s){if(r.show&&r.title.text!==void 0){var a=new yt(e.dCtx.ctx),o="rotate(".concat(r.title.rotate," 0 0)"),l=a.getTextRects(r.title.text,r.title.style.fontSize,r.title.style.fontFamily,o,!1);n.push({width:l.width,height:l.height})}else n.push({width:0,height:0})}),n}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,n=0,r=0,s=e.globals.yAxisScale.length>1?10:0,a=new pd(this.dCtx.ctx),o=function(l,c){var u=e.config.yaxis[c].floating,h=0;l.width>0&&!u?(h=l.width+s,function(d){return e.globals.ignoreYAxisIndexes.indexOf(d)>-1}(c)&&(h=h-l.width-s)):h=u||a.isYAxisHidden(c)?0:5,e.config.yaxis[c].opposite?r+=h:n+=h,t+=h};return e.globals.yLabelsCoords.map(function(l,c){o(l,c)}),e.globals.yTitleCoords.map(function(l,c){o(l,c)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=r,t}}]),i}(),DTe=function(){function i(e){Kt(this,i),this.w=e.w,this.dCtx=e}return Jt(i,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,n=t.config,r=t.globals;if(r.noData||r.collapsedSeries.length+r.ancillaryCollapsedSeries.length===n.series.length)return 0;var s=function(A){return["bar","rangeBar","candlestick","boxPlot"].includes(A)},a=n.chart.type,o=0,l=s(a)?n.series.length:1;r.comboBarCount>0&&(l=r.comboBarCount),r.collapsedSeries.forEach(function(A){s(A.type)&&(l-=1)}),n.chart.stacked&&(l=1);var c=s(a)||r.comboBarCount>0,u=Math.abs(r.initialMaxX-r.initialMinX);if(c&&r.isXNumeric&&!r.isBarHorizontal&&l>0&&u!==0){u<=3&&(u=r.dataPoints);var h=u/e,d=r.minXDiff&&r.minXDiff/h>0?r.minXDiff/h:0;d>e/2&&(d/=2),(o=d*parseInt(n.plotOptions.bar.columnWidth,10)/100)<1&&(o=1),r.barPadForNumericAxis=o}return o}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,n=t.globals,r=this.dCtx.isSparkline||!n.axisCharts?0:10;["title","subtitle"].forEach(function(o){t.config[o].text!==void 0?r+=t.config[o].margin:r+=e.dCtx.isSparkline||!n.axisCharts?0:5}),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||n.axisCharts||(r+=10);var s=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),a=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight-=s.height+a.height+r,n.translateY+=s.height+a.height+r}},{key:"setGridXPosForDualYAxis",value:function(e,t){var n=this.w,r=new pd(this.dCtx.ctx);n.config.yaxis.forEach(function(s,a){n.globals.ignoreYAxisIndexes.indexOf(a)!==-1||s.floating||r.isYAxisHidden(a)||(s.opposite&&(n.globals.translateX-=t[a].width+e[a].width+parseInt(s.labels.style.fontSize,10)/1.2+12),n.globals.translateX<2&&(n.globals.translateX=2))})}}]),i}(),gS=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new PTe(this),this.dimYAxis=new LTe(this),this.dimXAxis=new NTe(this),this.dimGrid=new DTe(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Jt(i,[{key:"plotCoords",value:function(){var e=this,t=this.w,n=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var r=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,Us(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(a){var o=Nj(a,2),l=o[0],c=o[1];e.gridPad[l]=Math.max(c,e.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(r/2,this.gridPad.top),this.gridPad.bottom=Math.max(r/2,this.gridPad.bottom)),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var s=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*s,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(s>0?s:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,n=t.globals,r=this.dimYAxis.getyAxisLabelsCoords(),s=this.dimYAxis.getyAxisTitleCoords();n.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map(function(A,x){t.globals.yLabelsCoords.push({width:r[x].width,index:x}),t.globals.yTitleCoords.push({width:s[x].width,index:x})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var a=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),l=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(a,l,o),n.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+t.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+t.config.xaxis.labels.offsetX;var c=this.yAxisWidth,u=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-l.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-a.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var h=10;(t.config.chart.type==="radar"||this.isSparkline)&&(c=0,u=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(c=0,u=0,h=0),this.isSparkline||t.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(a);var d=function(){n.translateX=c+e.datalabelsCoords.width,n.gridHeight=n.svgHeight-e.lgRect.height-u-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-c-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(h=n.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":n.translateY=h,d();break;case"top":n.translateY=this.lgRect.height+h,d();break;case"left":n.translateY=h,n.translateX=this.lgRect.width+c+this.datalabelsCoords.width,n.gridHeight=n.svgHeight-u-12,n.gridWidth=n.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width;break;case"right":n.translateY=h,n.translateX=c+this.datalabelsCoords.width,n.gridHeight=n.svgHeight-u-12,n.gridWidth=n.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(s,r),new YP(this.ctx).setYAxisXPosition(r,s)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=e.config,r=0;e.config.legend.show&&!e.config.legend.floating&&(r=20);var s=n.chart.type==="pie"||n.chart.type==="polarArea"||n.chart.type==="donut"?"pie":"radialBar",a=n.plotOptions[s].offsetY,o=n.plotOptions[s].offsetX;if(!n.legend.show||n.legend.floating){t.gridHeight=t.svgHeight;var l=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(l,t.gridHeight),t.translateY=a,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2)}switch(n.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=a-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+a+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-r,t.gridHeight=n.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=a,t.translateX=o+this.lgRect.width+r;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-r-5,t.gridHeight=n.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=a,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,n){var r=this.w,s=r.globals.hasXaxisGroups?2:1,a=n.height+e.height+t.height,o=r.globals.isMultiLineX?1.2:r.globals.LINE_HEIGHT_RATIO,l=r.globals.rotateXLabels?22:10,c=r.globals.rotateXLabels&&r.config.legend.position==="bottom"?10:0;this.xAxisHeight=a*o+s*l+c,this.xAxisWidth=e.width,this.xAxisHeight-t.height>r.config.xaxis.labels.maxHeight&&(this.xAxisHeight=r.config.xaxis.labels.maxHeight),r.config.xaxis.labels.minHeight&&this.xAxisHeight<r.config.xaxis.labels.minHeight&&(this.xAxisHeight=r.config.xaxis.labels.minHeight),r.config.xaxis.floating&&(this.xAxisHeight=0);var u=0,h=0;r.config.yaxis.forEach(function(d){u+=d.labels.minWidth,h+=d.labels.maxWidth}),this.yAxisWidth<u&&(this.yAxisWidth=u),this.yAxisWidth>h&&(this.yAxisWidth=h)}}]),i}(),kTe=function(){function i(e){Kt(this,i),this.w=e.w,this.lgCtx=e}return Jt(i,[{key:"getLegendStyles",value:function(){var e,t,n,r=document.createElement("style");r.setAttribute("type","text/css");var s=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(n=t.chart)===null||n===void 0?void 0:n.nonce)||this.w.config.chart.nonce;s&&r.setAttribute("nonce",s);var a=document.createTextNode(`
      .apexcharts-flip-y {
        transform: scaleY(-1) translateY(-100%);
        transform-origin: top;
        transform-box: fill-box;
      }
      .apexcharts-flip-x {
        transform: scaleX(-1);
        transform-origin: center;
        transform-box: fill-box;
      }
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apexcharts-legend-group-horizontal {
        flex-direction: column;
      }
      .apexcharts-legend-group {
        display: flex;
      }
      .apexcharts-legend-group-vertical {
        flex-direction: column-reverse;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
        align-items: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
        align-items: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
        align-items: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 1px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }

    `);return r.appendChild(a),r}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var n=this,r=this.w;if(r.globals.axisCharts||r.config.chart.type==="radialBar"){r.globals.resized=!0;var s=null,a=null;r.globals.risingSeries=[],r.globals.axisCharts?(s=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),a=parseInt(s.getAttribute("data:realIndex"),10)):(s=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),a=parseInt(s.getAttribute("rel"),10)-1),t?[{cs:r.globals.collapsedSeries,csi:r.globals.collapsedSeriesIndices},{cs:r.globals.ancillaryCollapsedSeries,csi:r.globals.ancillaryCollapsedSeriesIndices}].forEach(function(u){n.riseCollapsedSeries(u.cs,u.csi,a)}):this.hideSeries({seriesEl:s,realIndex:a})}else{var o=r.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(e+1,"'] path")),l=r.config.chart.type;if(l==="pie"||l==="polarArea"||l==="donut"){var c=r.config.plotOptions.pie.donut.labels;new yt(this.lgCtx.ctx).pathMouseDown(o,null),this.lgCtx.ctx.pie.printDataLabelsInner(o.node,c)}o.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var t=e.realIndex,n=this.w,r=n.globals,s=Ne.clone(n.config.series);if(r.axisCharts){var a=n.config.yaxis[r.seriesYAxisReverseMap[t]],o={index:t,data:s[t].data.slice(),type:s[t].type||n.config.chart.type};if(a&&a.show&&a.showAlways)r.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(r.ancillaryCollapsedSeries.push(o),r.ancillaryCollapsedSeriesIndices.push(t));else if(r.collapsedSeriesIndices.indexOf(t)<0){r.collapsedSeries.push(o),r.collapsedSeriesIndices.push(t);var l=r.risingSeries.indexOf(t);r.risingSeries.splice(l,1)}}else r.collapsedSeries.push({index:t,data:s[t]}),r.collapsedSeriesIndices.push(t);return r.allSeriesCollapsed=r.collapsedSeries.length+r.ancillaryCollapsedSeries.length===n.config.series.length,this._getSeriesBasedOnCollapsedState(s)}},{key:"hideSeries",value:function(e){for(var t=e.seriesEl,n=e.realIndex,r=this.w,s=this.getSeriesAfterCollapsing({realIndex:n}),a=t.childNodes,o=0;o<a.length;o++)a[o].classList.contains("apexcharts-series-markers-wrap")&&(a[o].classList.contains("apexcharts-hide")?a[o].classList.remove("apexcharts-hide"):a[o].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(s,r.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,n){var r=this.w,s=Ne.clone(r.config.series);if(e.length>0){for(var a=0;a<e.length;a++)e[a].index===n&&(r.globals.axisCharts?s[n].data=e[a].data.slice():s[n]=e[a].data,typeof s[n]!="number"&&(s[n].hidden=!1),e.splice(a,1),t.splice(a,1),r.globals.risingSeries.push(n));s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,r.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,n=0;return t.globals.axisCharts?e.forEach(function(r,s){t.globals.collapsedSeriesIndices.indexOf(s)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)<0||(e[s].data=[],n++)}):e.forEach(function(r,s){!t.globals.collapsedSeriesIndices.indexOf(s)<0&&(e[s]=0,n++)}),t.globals.allSeriesCollapsed=n===e.length,e}}]),i}(),uX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new kTe(this)}return Jt(i,[{key:"init",value:function(){var e=this.w,t=e.globals,n=e.config,r=n.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1;if(this.legendHelpers.appendToForeignObject(),(r||!t.axisCharts)&&n.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),n.legend.position==="bottom"||n.legend.position==="top"?this.legendAlignHorizontal():n.legend.position!=="right"&&n.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,n=e.fillcolor,r=this.w,s=document.createElement("span");s.classList.add("apexcharts-legend-marker");var a=r.config.legend.markers.shape||r.config.markers.shape,o=a;Array.isArray(a)&&(o=a[t]);var l=Array.isArray(r.config.legend.markers.size)?parseFloat(r.config.legend.markers.size[t]):parseFloat(r.config.legend.markers.size),c=Array.isArray(r.config.legend.markers.offsetX)?parseFloat(r.config.legend.markers.offsetX[t]):parseFloat(r.config.legend.markers.offsetX),u=Array.isArray(r.config.legend.markers.offsetY)?parseFloat(r.config.legend.markers.offsetY[t]):parseFloat(r.config.legend.markers.offsetY),h=Array.isArray(r.config.legend.markers.strokeWidth)?parseFloat(r.config.legend.markers.strokeWidth[t]):parseFloat(r.config.legend.markers.strokeWidth),d=s.style;if(d.height=2*(l+h)+"px",d.width=2*(l+h)+"px",d.left=c+"px",d.top=u+"px",r.config.legend.markers.customHTML)d.background="transparent",d.color=n[t],Array.isArray(r.config.legend.markers.customHTML)?r.config.legend.markers.customHTML[t]&&(s.innerHTML=r.config.legend.markers.customHTML[t]()):s.innerHTML=r.config.legend.markers.customHTML();else{var A=new vm(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(o),seriesIndex:t,strokeWidth:h,size:l}),x=window.SVG().addTo(s).size("100%","100%"),_=new yt(this.ctx).drawMarker(0,0,Bt(Bt({},A),{},{pointFillColor:Array.isArray(n)?n[t]:A.pointFillColor,shape:o}));r.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(S){S.node.classList.contains("apexcharts-marker-triangle")?S.node.style.transform="translate(50%, 45%)":S.node.style.transform="translate(50%, 50%)"}),x.add(_)}return s}},{key:"drawLegends",value:function(){var e=this,t=this,n=this.w,r=n.config.legend.fontFamily,s=n.globals.seriesNames,a=n.config.legend.markers.fillColors?n.config.legend.markers.fillColors.slice():n.globals.colors.slice();if(n.config.chart.type==="heatmap"){var o=n.config.plotOptions.heatmap.colorScale.ranges;s=o.map(function(A){return A.name?A.name:A.from+" - "+A.to}),a=o.map(function(A){return A.color})}else this.isBarsDistributed&&(s=n.globals.labels.slice());n.config.legend.customLegendItems.length&&(s=n.config.legend.customLegendItems);var l=n.globals.legendFormatter,c=n.config.legend.inverseOrder,u=[];n.globals.seriesGroups.length>1&&n.config.legend.clusterGroupedSeries&&n.globals.seriesGroups.forEach(function(A,x){u[x]=document.createElement("div"),u[x].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(x)),n.config.legend.clusterGroupedSeriesOrientation==="horizontal"?n.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):u[x].classList.add("apexcharts-legend-group-vertical")});for(var h=function(A){var x,_=l(s[A],{seriesIndex:A,w:n}),S=!1,w=!1;if(n.globals.collapsedSeries.length>0)for(var C=0;C<n.globals.collapsedSeries.length;C++)n.globals.collapsedSeries[C].index===A&&(S=!0);if(n.globals.ancillaryCollapsedSeriesIndices.length>0)for(var P=0;P<n.globals.ancillaryCollapsedSeriesIndices.length;P++)n.globals.ancillaryCollapsedSeriesIndices[P]===A&&(w=!0);var L=e.createLegendMarker({i:A,fillcolor:a});yt.setAttrs(L,{rel:A+1,"data:collapsed":S||w}),(S||w)&&L.classList.add("apexcharts-inactive-legend");var D=document.createElement("div"),B=document.createElement("span");B.classList.add("apexcharts-legend-text"),B.innerHTML=Array.isArray(_)?_.join(" "):_;var k=n.config.legend.labels.useSeriesColors?n.globals.colors[A]:Array.isArray(n.config.legend.labels.colors)?(x=n.config.legend.labels.colors)===null||x===void 0?void 0:x[A]:n.config.legend.labels.colors;k||(k=n.config.chart.foreColor),B.style.color=k,B.style.fontSize=parseFloat(n.config.legend.fontSize)+"px",B.style.fontWeight=n.config.legend.fontWeight,B.style.fontFamily=r||n.config.chart.fontFamily,yt.setAttrs(B,{rel:A+1,i:A,"data:default-text":encodeURIComponent(_),"data:collapsed":S||w}),D.appendChild(L),D.appendChild(B);var U=new ls(e.ctx);n.config.legend.showForZeroSeries||U.getSeriesTotalByIndex(A)===0&&U.seriesHaveSameValues(A)&&!U.isSeriesNull(A)&&n.globals.collapsedSeriesIndices.indexOf(A)===-1&&n.globals.ancillaryCollapsedSeriesIndices.indexOf(A)===-1&&D.classList.add("apexcharts-hidden-zero-series"),n.config.legend.showForNullSeries||U.isSeriesNull(A)&&n.globals.collapsedSeriesIndices.indexOf(A)===-1&&n.globals.ancillaryCollapsedSeriesIndices.indexOf(A)===-1&&D.classList.add("apexcharts-hidden-null-series"),u.length?n.globals.seriesGroups.forEach(function(F,z){var V;F.includes((V=n.config.series[A])===null||V===void 0?void 0:V.name)&&(n.globals.dom.elLegendWrap.appendChild(u[z]),u[z].appendChild(D))}):n.globals.dom.elLegendWrap.appendChild(D),n.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(n.config.legend.horizontalAlign)),n.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+n.config.legend.position),D.classList.add("apexcharts-legend-series"),D.style.margin="".concat(n.config.legend.itemMargin.vertical,"px ").concat(n.config.legend.itemMargin.horizontal,"px"),n.globals.dom.elLegendWrap.style.width=n.config.legend.width?n.config.legend.width+"px":"",n.globals.dom.elLegendWrap.style.height=n.config.legend.height?n.config.legend.height+"px":"",yt.setAttrs(D,{rel:A+1,seriesName:Ne.escapeString(s[A]),"data:collapsed":S||w}),(S||w)&&D.classList.add("apexcharts-inactive-legend"),n.config.legend.onItemClick.toggleDataSeries||D.classList.add("apexcharts-no-click")},d=c?s.length-1:0;c?d>=0:d<=s.length-1;c?d--:d++)h(d);n.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),n.config.legend.onItemHover.highlightDataSeries&&n.config.legend.customLegendItems.length===0&&(n.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),n.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var n=this.w,r=n.globals.dom.elLegendWrap,s=r.clientHeight,a=0,o=0;if(n.config.legend.position==="bottom")o=n.globals.svgHeight-Math.min(s,n.globals.svgHeight/2)-5;else if(n.config.legend.position==="top"){var l=new gS(this.ctx),c=l.dimHelpers.getTitleSubtitleCoords("title").height,u=l.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=(c>0?c-10:0)+(u>0?u-10:0)}r.style.position="absolute",a=a+e+n.config.legend.offsetX,o=o+t+n.config.legend.offsetY,r.style.left=a+"px",r.style.top=o+"px",n.config.legend.position==="right"&&(r.style.left="auto",r.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach(function(h){r.style[h]&&(r.style[h]=parseInt(n.config.legend[h],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=new gS(this.ctx),n=t.dimHelpers.getTitleSubtitleCoords("title"),r=t.dimHelpers.getTitleSubtitleCoords("subtitle"),s=0;e.config.legend.position==="top"&&(s=n.height+r.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,s)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),n=0;e.config.legend.position==="left"&&(n=20),e.config.legend.position==="right"&&(n=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,n=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(n){var r=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,r,this.w]),new Hl(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&n&&new Hl(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(e.target.getAttribute("rel"),10)-1,r=e.target.getAttribute("data:collapsed")==="true",s=this.w.config.chart.events.legendClick;typeof s=="function"&&s(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var a=this.w.config.legend.markers.onClick;typeof a=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(a(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,r)}}}]),i}(),hX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return Jt(i,[{key:"createToolbar",value:function(){var e=this,t=this.w,n=function(){return document.createElement("div")},r=n();if(r.setAttribute("class","apexcharts-toolbar"),r.style.top=t.config.chart.toolbar.offsetY+"px",r.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(r),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var s=0;s<this.t.customIcons.length;s++)this.elCustomIcons.push(n());var a=[],o=function(h,d,A){var x=h.toLowerCase();e.t[x]&&t.config.chart.zoom.enabled&&a.push({el:d,icon:typeof e.t[x]=="string"?e.t[x]:A,title:e.localeValues[h],class:"apexcharts-".concat(x,"-icon")})};o("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),o("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var l=function(h){e.t[h]&&t.config.chart[h].enabled&&a.push({el:h==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[h]=="string"?e.t[h]:h==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[h==="zoom"?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(h,"-icon")})};l("zoom"),l("selection"),this.t.pan&&t.config.chart.zoom.enabled&&a.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&a.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var c=0;c<this.elCustomIcons.length;c++)a.push({el:this.elCustomIcons[c],icon:this.t.customIcons[c].icon,title:this.t.customIcons[c].title,index:this.t.customIcons[c].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[c].class});a.forEach(function(h,d){h.index&&Ne.moveIndexInArray(a,d,h.index)});for(var u=0;u<a.length;u++)yt.setAttrs(a[u].el,{class:a[u].class,title:a[u].title}),a[u].el.innerHTML=a[u].icon,r.appendChild(a[u].el);this._createHamburgerMenu(r),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),yt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],n=0;n<t.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=t[n].title,yt.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(t[n].name),title:t[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(n){n.classList.contains("exportSVG")?n.addEventListener("click",e.handleDownload.bind(e,"svg")):n.classList.contains("exportPNG")?n.addEventListener("click",e.handleDownload.bind(e,"png")):n.classList.contains("exportCSV")&&n.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls();var n=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,r=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[r]=!t.w.globals[r],n.classList.contains(t.ctx.toolbar.selectedClass)?n.classList.remove(t.ctx.toolbar.selectedClass):n.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,n=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(n){n&&n.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,n=(this.minX+t)/2,r=(this.maxX+t)/2,s=this._getNewMinXMaxX(n,r);e.globals.disableZoomIn||this.zoomUpdateOptions(s.minX,s.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,n=this.minX-(t-this.minX),r=this.maxX-(t-this.maxX),s=this._getNewMinXMaxX(n,r);e.globals.disableZoomOut||this.zoomUpdateOptions(s.minX,s.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(e):e,maxX:n?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var n=this.w;if(e!==void 0||t!==void 0){if(!(n.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=n.globals.dataPoints),t-e<2))){var r={min:e,max:t},s=this.getBeforeZoomRange(r);s&&(r=s.xaxis);var a={xaxis:r},o=Ne.clone(n.globals.initialConfig.yaxis);n.config.chart.group||(a.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(a,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(r,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&(this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t}),this.ctx.events.fireEvent("zoomed",{xaxis:e,yaxis:t}))}},{key:"getBeforeZoomRange",value:function(e,t){var n=null;return typeof this.ev.beforeZoom=="function"&&(n=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),n}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout(function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(e){var t=this.w,n=new By(this.ctx);switch(e){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){var n=t.w;if(n.globals.lastXAxis.min=n.globals.initialConfig.xaxis.min,n.globals.lastXAxis.max=n.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof n.config.chart.events.beforeResetZoom=="function"){var r=n.config.chart.events.beforeResetZoom(t,n);r&&t.updateHelpers.revertDefaultAxisMinMax(r)}typeof n.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:n.config.xaxis.min,max:n.config.xaxis.max}),n.globals.zoomed=!1;var s=t.ctx.series.emptyCollapsedSeries(Ne.clone(n.globals.initialSeries));t.updateHelpers._updateSeries(s,n.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),i}(),OTe=function(i){_1(t,hX);var e=b1(t);function t(n){var r;return Kt(this,t),(r=e.call(this,n)).ctx=n,r.w=n.w,r.dragged=!1,r.graphics=new yt(r.ctx),r.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],r.clientX=0,r.clientY=0,r.startX=0,r.endX=0,r.dragX=0,r.startY=0,r.endY=0,r.dragY=0,r.moveDirection="none",r.debounceTimer=null,r.debounceDelay=100,r.wheelDelay=400,r}return Jt(t,[{key:"init",value:function(n){var r=this,s=n.xyRatios,a=this.w,o=this;this.xyRatios=s,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=a.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new as(0,0,a.globals.gridWidth,a.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),a.globals.dom.Paper.add(this.zoomRect),a.globals.dom.Paper.add(this.selectionRect),a.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:a.globals.gridWidth,maxY:a.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):a.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:a.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=a.globals.dom.baseEl.querySelector("".concat(a.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(l){r.hoverArea.addEventListener(l,o.svgMouseEvents.bind(o,s),{capture:!1,passive:!0})}),a.config.chart.zoom.enabled&&a.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",o.mouseWheelEvent.bind(o),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(n,r){var s=this.w,a=this.ctx.toolbar,o=s.globals.zoomEnabled?s.config.chart.zoom.type:s.config.chart.selection.type,l=s.config.chart.toolbar.autoSelected;if(r.shiftKey?(this.shiftWasPressed=!0,a.enableZoomPanFromToolbar(l==="pan"?"zoom":"pan")):this.shiftWasPressed&&(a.enableZoomPanFromToolbar(l),this.shiftWasPressed=!1),r.target){var c,u=r.target.classList;if(r.target.parentNode&&r.target.parentNode!==null&&(c=r.target.parentNode.classList),!(u.contains("apexcharts-legend-marker")||u.contains("apexcharts-legend-text")||c&&c.contains("apexcharts-toolbar"))){if(this.clientX=r.type==="touchmove"||r.type==="touchstart"?r.touches[0].clientX:r.type==="touchend"?r.changedTouches[0].clientX:r.clientX,this.clientY=r.type==="touchmove"||r.type==="touchstart"?r.touches[0].clientY:r.type==="touchend"?r.changedTouches[0].clientY:r.clientY,r.type==="mousedown"&&r.which===1||r.type==="touchstart"){var h=this.gridRect.getBoundingClientRect();this.startX=this.clientX-h.left-s.globals.barPadForNumericAxis,this.startY=this.clientY-h.top,this.dragged=!1,this.w.globals.mousedown=!0}(r.type==="mousemove"&&r.which===1||r.type==="touchmove")&&(this.dragged=!0,s.globals.panEnabled?(s.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:o,xyRatios:n})):(this.w.globals.mousedown&&s.globals.zoomEnabled||this.w.globals.mousedown&&s.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:o}))),r.type!=="mouseup"&&r.type!=="touchend"&&r.type!=="mouseleave"||this.handleMouseUp({zoomtype:o}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(n){var r,s=n.zoomtype,a=n.isResized,o=this.w,l=(r=this.gridRect)===null||r===void 0?void 0:r.getBoundingClientRect();l&&(this.w.globals.mousedown||a)&&(this.endX=this.clientX-l.left-o.globals.barPadForNumericAxis,this.endY=this.clientY-l.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(o.globals.zoomEnabled||o.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:s})),o.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(n){var r=this,s=this.w;n.preventDefault();var a=Date.now();a-s.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(n),s.globals.lastWheelExecution=a),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){a-s.globals.lastWheelExecution>r.wheelDelay&&(r.executeMouseWheelZoom(n),s.globals.lastWheelExecution=a)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(n){var r,s=this.w;this.minX=s.globals.isRangeBar?s.globals.minY:s.globals.minX,this.maxX=s.globals.isRangeBar?s.globals.maxY:s.globals.maxX;var a=(r=this.gridRect)===null||r===void 0?void 0:r.getBoundingClientRect();if(a){var o,l,c,u=(n.clientX-a.left)/a.width,h=this.minX,d=this.maxX,A=d-h;if(n.deltaY<0){var x=h+u*A;l=x-(o=.5*A)/2,c=x+o/2}else l=h-(o=1.5*A)/2,c=d+o/2;if(!s.globals.isRangeBar){l=Math.max(l,s.globals.initialMinX),c=Math.min(c,s.globals.initialMaxX);var _=.01*(s.globals.initialMaxX-s.globals.initialMinX);if(c-l<_){var S=(l+c)/2;l=S-_/2,c=S+_/2}}var w=this._getNewMinXMaxX(l,c);isNaN(w.minX)||isNaN(w.maxX)||this.zoomUpdateOptions(w.minX,w.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var n=this,r=this.w;if(this.selectionRect){var s=this.selectionRect.node.getBoundingClientRect();s.width>0&&s.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(a,o,l,c,u){return u==="l"||u==="r"?a.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):a.circle(0)},updateHandle:function(a,o){return a.center(o[0],o[1])}}).resize().on("resize",function(){var a=r.globals.zoomEnabled?r.config.chart.zoom.type:r.config.chart.selection.type;n.handleMouseUp({zoomtype:a,isResized:!0})}))}}},{key:"preselectedSelection",value:function(){var n=this.w,r=this.xyRatios;if(!n.globals.zoomEnabled){if(n.globals.selection!==void 0&&n.globals.selection!==null)this.drawSelectionRect(Bt(Bt({},n.globals.selection),{},{translateX:n.globals.translateX,translateY:n.globals.translateY}));else if(n.config.chart.selection.xaxis.min!==void 0&&n.config.chart.selection.xaxis.max!==void 0){var s=(n.config.chart.selection.xaxis.min-n.globals.minX)/r.xRatio,a=n.globals.gridWidth-(n.globals.maxX-n.config.chart.selection.xaxis.max)/r.xRatio-s;n.globals.isRangeBar&&(s=(n.config.chart.selection.xaxis.min-n.globals.yAxisScale[0].niceMin)/r.invertedYRatio,a=(n.config.chart.selection.xaxis.max-n.config.chart.selection.xaxis.min)/r.invertedYRatio);var o={x:s,y:0,width:a,height:n.globals.gridHeight,translateX:n.globals.translateX,translateY:n.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(o),this.makeSelectionRectDraggable(),typeof n.config.chart.events.selection=="function"&&n.config.chart.events.selection(this.ctx,{xaxis:{min:n.config.chart.selection.xaxis.min,max:n.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(n){var r=n.x,s=n.y,a=n.width,o=n.height,l=n.translateX,c=l===void 0?0:l,u=n.translateY,h=u===void 0?0:u,d=this.w,A=this.zoomRect,x=this.selectionRect;if(this.dragged||d.globals.selection!==null){var _={transform:"translate("+c+", "+h+")"};d.globals.zoomEnabled&&this.dragged&&(a<0&&(a=1),A.attr({x:r,y:s,width:a,height:o,fill:d.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":d.config.chart.zoom.zoomedArea.fill.opacity,stroke:d.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":d.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":d.config.chart.zoom.zoomedArea.stroke.opacity}),yt.setAttrs(A.node,_)),d.globals.selectionEnabled&&(x.attr({x:r,y:s,width:a>0?a:0,height:o>0?o:0,fill:d.config.chart.selection.fill.color,"fill-opacity":d.config.chart.selection.fill.opacity,stroke:d.config.chart.selection.stroke.color,"stroke-width":d.config.chart.selection.stroke.width,"stroke-dasharray":d.config.chart.selection.stroke.dashArray,"stroke-opacity":d.config.chart.selection.stroke.opacity}),yt.setAttrs(x.node,_))}}},{key:"hideSelectionRect",value:function(n){n&&n.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(n){var r=n.context,s=n.zoomtype,a=this.w,o=r,l=this.gridRect.getBoundingClientRect(),c=o.startX-1,u=o.startY,h=!1,d=!1,A=o.clientX-l.left-a.globals.barPadForNumericAxis,x=o.clientY-l.top,_=A-c,S=x-u,w={translateX:a.globals.translateX,translateY:a.globals.translateY};return Math.abs(_+c)>a.globals.gridWidth?_=a.globals.gridWidth-c:A<0&&(_=c),c>A&&(h=!0,_=Math.abs(_)),u>x&&(d=!0,S=Math.abs(S)),w=Bt(Bt({},w=s==="x"?{x:h?c-_:c,y:0,width:_,height:a.globals.gridHeight}:s==="y"?{x:0,y:d?u-S:u,width:a.globals.gridWidth,height:S}:{x:h?c-_:c,y:d?u-S:u,width:_,height:S}),{},{translateX:a.globals.translateX,translateY:a.globals.translateY}),o.drawSelectionRect(w),o.selectionDragging("resizing"),w}},{key:"selectionDragging",value:function(n,r){var s=this,a=this.w;if(r){r.preventDefault();var o=r.detail,l=o.handler,c=o.box,u=c.x,h=c.y;u<this.constraints.x&&(u=this.constraints.x),h<this.constraints.y&&(h=this.constraints.y),c.x2>this.constraints.x2&&(u=this.constraints.x2-c.w),c.y2>this.constraints.y2&&(h=this.constraints.y2-c.h),l.move(u,h);var d=this.xyRatios,A=this.selectionRect,x=0;n==="resizing"&&(x=30);var _=function(w){return parseFloat(A.node.getAttribute(w))},S={x:_("x"),y:_("y"),width:_("width"),height:_("height")};a.globals.selection=S,typeof a.config.chart.events.selection=="function"&&a.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var w,C,P,L,D=s.gridRect.getBoundingClientRect(),B=A.node.getBoundingClientRect();a.globals.isRangeBar?(w=a.globals.yAxisScale[0].niceMin+(B.left-D.left)*d.invertedYRatio,C=a.globals.yAxisScale[0].niceMin+(B.right-D.left)*d.invertedYRatio,P=0,L=1):(w=a.globals.xAxisScale.niceMin+(B.left-D.left)*d.xRatio,C=a.globals.xAxisScale.niceMin+(B.right-D.left)*d.xRatio,P=a.globals.yAxisScale[0].niceMin+(D.bottom-B.bottom)*d.yRatio[0],L=a.globals.yAxisScale[0].niceMax-(B.top-D.top)*d.yRatio[0]);var k={xaxis:{min:w,max:C},yaxis:{min:P,max:L}};a.config.chart.events.selection(s.ctx,k),a.config.chart.brush.enabled&&a.config.chart.events.brushScrolled!==void 0&&a.config.chart.events.brushScrolled(s.ctx,k)},x))}}},{key:"selectionDrawn",value:function(n){var r,s,a=n.context,o=n.zoomtype,l=this.w,c=a,u=this.xyRatios,h=this.ctx.toolbar,d=l.globals.zoomEnabled?c.zoomRect.node.getBoundingClientRect():c.selectionRect.node.getBoundingClientRect(),A=c.gridRect.getBoundingClientRect(),x=d.left-A.left-l.globals.barPadForNumericAxis,_=d.right-A.left-l.globals.barPadForNumericAxis,S=d.top-A.top,w=d.bottom-A.top;l.globals.isRangeBar?(r=l.globals.yAxisScale[0].niceMin+x*u.invertedYRatio,s=l.globals.yAxisScale[0].niceMin+_*u.invertedYRatio):(r=l.globals.xAxisScale.niceMin+x*u.xRatio,s=l.globals.xAxisScale.niceMin+_*u.xRatio);var C=[],P=[];if(l.config.yaxis.forEach(function(z,V){var W=l.globals.seriesYAxisMap[V][0],X=l.globals.yAxisScale[V].niceMax-u.yRatio[W]*S,J=l.globals.yAxisScale[V].niceMax-u.yRatio[W]*w;C.push(X),P.push(J)}),c.dragged&&(c.dragX>10||c.dragY>10)&&r!==s){if(l.globals.zoomEnabled){var L=Ne.clone(l.globals.initialConfig.yaxis),D=Ne.clone(l.globals.initialConfig.xaxis);if(l.globals.zoomed=!0,l.config.xaxis.convertedCatToNumeric&&(r=Math.floor(r),s=Math.floor(s),r<1&&(r=1,s=l.globals.dataPoints),s-r<2&&(s=r+1)),o!=="xy"&&o!=="x"||(D={min:r,max:s}),o!=="xy"&&o!=="y"||L.forEach(function(z,V){L[V].min=P[V],L[V].max=C[V]}),h){var B=h.getBeforeZoomRange(D,L);B&&(D=B.xaxis?B.xaxis:D,L=B.yaxis?B.yaxis:L)}var k={xaxis:D};l.config.chart.group||(k.yaxis=L),c.ctx.updateHelpers._updateOptions(k,!1,c.w.config.chart.animations.dynamicAnimation.enabled),typeof l.config.chart.events.zoomed=="function"&&h.zoomCallback(D,L)}else if(l.globals.selectionEnabled){var U,F=null;U={min:r,max:s},o!=="xy"&&o!=="y"||(F=Ne.clone(l.config.yaxis)).forEach(function(z,V){F[V].min=P[V],F[V].max=C[V]}),l.globals.selection=c.selection,typeof l.config.chart.events.selection=="function"&&l.config.chart.events.selection(c.ctx,{xaxis:U,yaxis:F})}}}},{key:"panDragging",value:function(n){var r=n.context,s=this.w,a=r;if(s.globals.lastClientPosition.x!==void 0){var o=s.globals.lastClientPosition.x-a.clientX,l=s.globals.lastClientPosition.y-a.clientY;Math.abs(o)>Math.abs(l)&&o>0?this.moveDirection="left":Math.abs(o)>Math.abs(l)&&o<0?this.moveDirection="right":Math.abs(l)>Math.abs(o)&&l>0?this.moveDirection="up":Math.abs(l)>Math.abs(o)&&l<0&&(this.moveDirection="down")}s.globals.lastClientPosition={x:a.clientX,y:a.clientY};var c=s.globals.isRangeBar?s.globals.minY:s.globals.minX,u=s.globals.isRangeBar?s.globals.maxY:s.globals.maxX;a.panScrolled(c,u)}},{key:"panScrolled",value:function(n,r){var s=this.w,a=this.xyRatios,o=Ne.clone(s.globals.initialConfig.yaxis),l=a.xRatio,c=s.globals.minX,u=s.globals.maxX;s.globals.isRangeBar&&(l=a.invertedYRatio,c=s.globals.minY,u=s.globals.maxY),this.moveDirection==="left"?(n=c+s.globals.gridWidth/15*l,r=u+s.globals.gridWidth/15*l):this.moveDirection==="right"&&(n=c-s.globals.gridWidth/15*l,r=u-s.globals.gridWidth/15*l),s.globals.isRangeBar||(n<s.globals.initialMinX||r>s.globals.initialMaxX)&&(n=c,r=u);var h={xaxis:{min:n,max:r}};s.config.chart.group||(h.yaxis=o),this.updateScrolledChart(h,n,r)}},{key:"updateScrolledChart",value:function(n,r,s){var a=this.w;if(this.ctx.updateHelpers._updateOptions(n,!1,!1),typeof a.config.chart.events.scrolled=="function"){var o={xaxis:{min:r,max:s}};a.config.chart.events.scrolled(this.ctx,o),this.ctx.events.fireEvent("scrolled",o)}}}]),t}(),fX=function(){function i(e){Kt(this,i),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return Jt(i,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,n=e.elGrid,r=e.clientX,s=e.clientY,a=this.w,o=n.getBoundingClientRect(),l=o.width,c=o.height,u=l/(a.globals.dataPoints-1),h=c/a.globals.dataPoints,d=this.hasBars();!a.globals.comboCharts&&!d||a.config.xaxis.convertedCatToNumeric||(u=l/a.globals.dataPoints);var A=r-o.left-a.globals.barPadForNumericAxis,x=s-o.top;A<0||x<0||A>l||x>c?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):a.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):a.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var _=Math.round(A/u),S=Math.floor(x/h);d&&!a.config.xaxis.convertedCatToNumeric&&(_=Math.ceil(A/u),_-=1);var w=null,C=null,P=a.globals.seriesXvalues.map(function(U){return U.filter(function(F){return Ne.isNumber(F)})}),L=a.globals.seriesYvalues.map(function(U){return U.filter(function(F){return Ne.isNumber(F)})});if(a.globals.isXNumeric){var D=this.ttCtx.getElGrid().getBoundingClientRect(),B=A*(D.width/l),k=x*(D.height/c);w=(C=this.closestInMultiArray(B,k,P,L)).index,_=C.j,w!==null&&a.globals.hasNullValues&&(P=a.globals.seriesXvalues[w],_=(C=this.closestInArray(B,P)).j)}return a.globals.capturedSeriesIndex=w===null?-1:w,(!_||_<1)&&(_=0),a.globals.isBarHorizontal?a.globals.capturedDataPointIndex=S:a.globals.capturedDataPointIndex=_,{capturedSeries:w,j:a.globals.isBarHorizontal?S:_,hoverX:A,hoverY:x}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,n=0,r=e.map(function(a,o){return a.length>0?o:-1}),s=0;s<r.length;s++)if(r[s]!==-1&&t.globals.collapsedSeriesIndices.indexOf(s)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)===-1){n=r[s];break}return n}},{key:"closestInMultiArray",value:function(e,t,n,r){for(var s,a=this.w,o=1/0,l=null,c=null,u=0;u<n.length;u++)if(s=u,a.globals.collapsedSeriesIndices.indexOf(s)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(s)===-1)for(var h=n[u],d=r[u],A=Math.min(h.length,d.length),x=0;x<A;x++){var _=e-h[x],S=Math.sqrt(_*_);if(!a.globals.allSeriesHasEqualX){var w=t-d[x];S=Math.sqrt(_*_+w*w)}S<o&&(o=S,l=u,c=x)}return{index:l,j:c}}},{key:"closestInArray",value:function(e,t){for(var n=t[0],r=null,s=Math.abs(e-n),a=0;a<t.length;a++){var o=Math.abs(e-t[a]);o<s&&(s=o,r=a)}return{j:r}}},{key:"isXoverlap",value:function(e){var t=[],n=this.w.globals.seriesX.filter(function(s){return s[0]!==void 0});if(n.length>0)for(var r=0;r<n.length-1;r++)n[r][e]!==void 0&&n[r+1][e]!==void 0&&n[r][e]!==n[r+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,n=0;n<t.length-1;n++)if(t[n].data.length!==t[n+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return Us(e).reduce(function(t,n){return t+n.getBBox().height},0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");n=Us(n),t&&(n=n.filter(function(s){var a=Number(s.getAttribute("data:realIndex"));return e.w.globals.collapsedSeriesIndices.indexOf(a)===-1})),n.sort(function(s,a){var o=Number(s.getAttribute("data:realIndex")),l=Number(a.getAttribute("data:realIndex"));return l<o?1:l>o?-1:0});var r=[];return n.forEach(function(s){r.push(s.querySelector(".apexcharts-marker"))}),r}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var n=Number(e.getAttribute("cx")),r=Number(e.getAttribute("cy")),s=e.getAttribute("shape");return new yt(this.ctx).getMarkerPath(n,r,s,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,n=t.config.markers.hover.size;return n===void 0&&(n=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,n=this.ttCtx;n.allTooltipSeriesGroups.length===0&&(n.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var r=n.allTooltipSeriesGroups,s=0;s<r.length;s++)e==="enable"?(r[s].classList.add("apexcharts-active"),r[s].style.display=t.config.tooltip.items.display):(r[s].classList.remove("apexcharts-active"),r[s].style.display="none")}}]),i}(),ITe=function(){function i(e){Kt(this,i),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new fX(e)}return Jt(i,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,n=t===void 0||t,r=e.ttItems,s=e.i,a=s===void 0?0:s,o=e.j,l=o===void 0?null:o,c=e.y1,u=e.y2,h=e.e,d=this.w;d.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:a,j:l,y1:c,y2:u,w:d}):this.toggleActiveInactiveSeries(n,a);var A=this.getValuesToPrint({i:a,j:l});this.printLabels({i:a,j:l,values:A,ttItems:r,shared:n,e:h});var x=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=x.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=x.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,n=this,r=e.i,s=e.j,a=e.values,o=e.ttItems,l=e.shared,c=e.e,u=this.w,h=[],d=function(D){return u.globals.seriesGoals[D]&&u.globals.seriesGoals[D][s]&&Array.isArray(u.globals.seriesGoals[D][s])},A=a.xVal,x=a.zVal,_=a.xAxisTTVal,S="",w=u.globals.colors[r];s!==null&&u.config.plotOptions.bar.distributed&&(w=u.globals.colors[s]);for(var C=function(D,B){var k=n.getFormatters(r);S=n.getSeriesName({fn:k.yLbTitleFormatter,index:r,seriesIndex:r,j:s}),u.config.chart.type==="treemap"&&(S=k.yLbTitleFormatter(String(u.config.series[r].data[s].x),{series:u.globals.series,seriesIndex:r,dataPointIndex:s,w:u}));var U=u.config.tooltip.inverseOrder?B:D;if(u.globals.axisCharts){var F=function(W){var X,J,K,Y;return u.globals.isRangeData?k.yLbFormatter((X=u.globals.seriesRangeStart)===null||X===void 0||(J=X[W])===null||J===void 0?void 0:J[s],{series:u.globals.seriesRangeStart,seriesIndex:W,dataPointIndex:s,w:u})+" - "+k.yLbFormatter((K=u.globals.seriesRangeEnd)===null||K===void 0||(Y=K[W])===null||Y===void 0?void 0:Y[s],{series:u.globals.seriesRangeEnd,seriesIndex:W,dataPointIndex:s,w:u}):k.yLbFormatter(u.globals.series[W][s],{series:u.globals.series,seriesIndex:W,dataPointIndex:s,w:u})};if(l)k=n.getFormatters(U),S=n.getSeriesName({fn:k.yLbTitleFormatter,index:U,seriesIndex:r,j:s}),w=u.globals.colors[U],t=F(U),d(U)&&(h=u.globals.seriesGoals[U][s].map(function(W){return{attrs:W,val:k.yLbFormatter(W.value,{seriesIndex:U,dataPointIndex:s,w:u})}}));else{var z,V=c==null||(z=c.target)===null||z===void 0?void 0:z.getAttribute("fill");V&&(V.indexOf("url")!==-1?V.indexOf("Pattern")!==-1&&(w=u.globals.dom.baseEl.querySelector(V.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):w=V),t=F(r),d(r)&&Array.isArray(u.globals.seriesGoals[r][s])&&(h=u.globals.seriesGoals[r][s].map(function(W){return{attrs:W,val:k.yLbFormatter(W.value,{seriesIndex:r,dataPointIndex:s,w:u})}}))}}s===null&&(t=k.yLbFormatter(u.globals.series[r],Bt(Bt({},u),{},{seriesIndex:r,dataPointIndex:r}))),n.DOMHandling({i:r,t:U,j:s,ttItems:o,values:{val:t,goalVals:h,xVal:A,xAxisTTVal:_,zVal:x},seriesName:S,shared:l,pColor:w})},P=0,L=u.globals.series.length-1;P<u.globals.series.length;P++,L--)C(P,L)}},{key:"getFormatters",value:function(e){var t,n=this.w,r=n.globals.yLabelFormatters[e];return n.globals.ttVal!==void 0?Array.isArray(n.globals.ttVal)?(r=n.globals.ttVal[e]&&n.globals.ttVal[e].formatter,t=n.globals.ttVal[e]&&n.globals.ttVal[e].title&&n.globals.ttVal[e].title.formatter):(r=n.globals.ttVal.formatter,typeof n.globals.ttVal.title.formatter=="function"&&(t=n.globals.ttVal.title.formatter)):t=n.config.tooltip.y.title.formatter,typeof r!="function"&&(r=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(s){return s}),typeof t!="function"&&(t=function(s){return s?s+": ":""}),{yLbFormatter:r,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,n=e.index,r=e.seriesIndex,s=e.j,a=this.w;return t(String(a.globals.seriesNames[n]),{series:a.globals.series,seriesIndex:r,dataPointIndex:s,w:a})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,n=e.j,r=e.ttItems,s=e.values,a=e.seriesName,o=e.shared,l=e.pColor,c=this.w,u=this.ttCtx,h=s.val,d=s.goalVals,A=s.xVal,x=s.xAxisTTVal,_=s.zVal,S=null;S=r[t].children,c.config.tooltip.fillSeriesColor&&(r[t].style.backgroundColor=l,S[0].style.display="none"),u.showTooltipTitle&&(u.tooltipTitle===null&&(u.tooltipTitle=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),u.tooltipTitle.innerHTML=A),u.isXAxisTooltipEnabled&&(u.xaxisTooltipText.innerHTML=x!==""?x:A);var w=r[t].querySelector(".apexcharts-tooltip-text-y-label");w&&(w.innerHTML=a||"");var C=r[t].querySelector(".apexcharts-tooltip-text-y-value");C&&(C.innerHTML=h!==void 0?h:""),S[0]&&S[0].classList.contains("apexcharts-tooltip-marker")&&(c.config.tooltip.marker.fillColors&&Array.isArray(c.config.tooltip.marker.fillColors)&&(l=c.config.tooltip.marker.fillColors[t]),c.config.tooltip.fillSeriesColor?S[0].style.backgroundColor=l:S[0].style.color=l),c.config.tooltip.marker.show||(S[0].style.display="none");var P=r[t].querySelector(".apexcharts-tooltip-text-goals-label"),L=r[t].querySelector(".apexcharts-tooltip-text-goals-value");if(d.length&&c.globals.seriesGoals[t]){var D=function(){var U="<div>",F="<div>";d.forEach(function(z,V){U+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(z.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(z.attrs.name,"</div>"),F+="<div>".concat(z.val,"</div>")}),P.innerHTML=U+"</div>",L.innerHTML=F+"</div>"};o?c.globals.seriesGoals[t][n]&&Array.isArray(c.globals.seriesGoals[t][n])?D():(P.innerHTML="",L.innerHTML=""):D()}else P.innerHTML="",L.innerHTML="";if(_!==null&&(r[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=c.config.tooltip.z.title,r[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=_!==void 0?_:""),o&&S[0]){if(c.config.tooltip.hideEmptySeries){var B=r[t].querySelector(".apexcharts-tooltip-marker"),k=r[t].querySelector(".apexcharts-tooltip-text");parseFloat(h)==0?(B.style.display="none",k.style.display="none"):(B.style.display="block",k.style.display="block")}h==null||c.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||c.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(u.tConfig.enabledOnSeries)&&u.tConfig.enabledOnSeries.indexOf(t)===-1?S[0].parentNode.style.display="none":S[0].parentNode.style.display=c.config.tooltip.items.display}else Array.isArray(u.tConfig.enabledOnSeries)&&u.tConfig.enabledOnSeries.indexOf(t)===-1&&(S[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var n=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var r=n.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));r&&(r.classList.add("apexcharts-active"),r.style.display=n.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,n=e.j,r=this.w,s=this.ctx.series.filteredSeriesX(),a="",o="",l=null,c=null,u={series:r.globals.series,seriesIndex:t,dataPointIndex:n,w:r},h=r.globals.ttZFormatter;n===null?c=r.globals.series[t]:r.globals.isXNumeric&&r.config.chart.type!=="treemap"?(a=s[t][n],s[t].length===0&&(a=s[this.tooltipUtil.getFirstActiveXArray(s)][n])):a=new XP(this.ctx).isFormatXY()?r.config.series[t].data[n]!==void 0?r.config.series[t].data[n].x:"":r.globals.labels[n]!==void 0?r.globals.labels[n]:"";var d=a;return r.globals.isXNumeric&&r.config.xaxis.type==="datetime"?a=new M1(this.ctx).xLabelFormat(r.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new va(this.ctx).formatDate,w:this.w}):a=r.globals.isBarHorizontal?r.globals.yLabelFormatters[0](d,u):r.globals.xLabelFormatter(d,u),r.config.tooltip.x.formatter!==void 0&&(a=r.globals.ttKeyFormatter(d,u)),r.globals.seriesZ.length>0&&r.globals.seriesZ[t].length>0&&(l=h(r.globals.seriesZ[t][n],r)),o=typeof r.config.xaxis.tooltip.formatter=="function"?r.globals.xaxisTooltipFormatter(d,u):a,{val:Array.isArray(c)?c.join(" "):c,xVal:Array.isArray(a)?a.join(" "):a,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:l}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,n=e.j,r=e.y1,s=e.y2,a=e.w,o=this.ttCtx.getElTooltip(),l=a.config.tooltip.custom;Array.isArray(l)&&l[t]&&(l=l[t]);var c=l({ctx:this.ctx,series:a.globals.series,seriesIndex:t,dataPointIndex:n,y1:r,y2:s,w:a});typeof c=="string"||typeof c=="number"?o.innerHTML=c:(c instanceof Element||typeof c.nodeName=="string")&&(o.innerHTML="",o.appendChild(c.cloneNode(!0)))}}]),i}(),dX=function(){function i(e){Kt(this,i),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return Jt(i,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.ttCtx,r=this.w,s=n.getElXCrosshairs(),a=e-n.xcrosshairsWidth/2,o=r.globals.labels.slice().length;if(t!==null&&(a=r.globals.gridWidth/o*t),s===null||r.globals.isBarHorizontal||(s.setAttribute("x",a),s.setAttribute("x1",a),s.setAttribute("x2",a),s.setAttribute("y2",r.globals.gridHeight),s.classList.add("apexcharts-active")),a<0&&(a=0),a>r.globals.gridWidth&&(a=r.globals.gridWidth),n.isXAxisTooltipEnabled){var l=a;r.config.xaxis.crosshairs.width!=="tickWidth"&&r.config.xaxis.crosshairs.width!=="barWidth"||(l=a+n.xcrosshairsWidth/2),this.moveXAxisTooltip(l)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&yt.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&yt.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;if(n.xaxisTooltip!==null&&n.xcrosshairsWidth!==0){n.xaxisTooltip.classList.add("apexcharts-active");var r=n.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var s;s=new yt(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=s.width+"px",n.xaxisTooltip.style.left=e+"px",n.xaxisTooltip.style.top=r+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;n.yaxisTTEls===null&&(n.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var r=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),s=t.globals.translateY+r,a=n.yaxisTTEls[e].getBoundingClientRect(),o=a.height,l=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(l-=a.width),s-=o/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1&&s>0&&s<t.globals.gridHeight?(n.yaxisTTEls[e].classList.add("apexcharts-active"),n.yaxisTTEls[e].style.top=s+"px",n.yaxisTTEls[e].style.left=l+t.config.yaxis[e].tooltip.offsetX+"px"):n.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.w,s=this.ttCtx,a=s.getElTooltip(),o=s.tooltipRect,l=n!==null?parseFloat(n):1,c=parseFloat(e)+l+5,u=parseFloat(t)+l/2;if(c>r.globals.gridWidth/2&&(c=c-o.ttWidth-l-10),c>r.globals.gridWidth-o.ttWidth-10&&(c=r.globals.gridWidth-o.ttWidth),c<-20&&(c=-20),r.config.tooltip.followCursor){var h=s.getElGrid().getBoundingClientRect();(c=s.e.clientX-h.left)>r.globals.gridWidth/2&&(c-=s.tooltipRect.ttWidth),(u=s.e.clientY+r.globals.translateY-h.top)>r.globals.gridHeight/2&&(u-=s.tooltipRect.ttHeight)}else r.globals.isBarHorizontal||o.ttHeight/2+u>r.globals.gridHeight&&(u=r.globals.gridHeight-o.ttHeight+r.globals.translateY);isNaN(c)||(c+=r.globals.translateX,a.style.left=c+"px",a.style.top=u+"px")}},{key:"moveMarkers",value:function(e,t){var n=this.w,r=this.ttCtx;if(n.globals.markers.size[e]>0)for(var s=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),a=0;a<s.length;a++)parseInt(s[a].getAttribute("rel"),10)===t&&(r.marker.resetPointsSize(),r.marker.enlargeCurrentPoint(t,s[a]));else r.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var n,r,s,a,o=this.w,l=this.ttCtx,c=new yt(this.ctx),u=o.globals.pointsArray,h=l.tooltipUtil.getHoverMarkerSize(t),d=o.config.series[t].type;if(!d||d!=="column"&&d!=="candlestick"&&d!=="boxPlot"){s=(n=u[t][e])===null||n===void 0?void 0:n[0],a=((r=u[t][e])===null||r===void 0?void 0:r[1])||0;var A=o.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(A&&a<o.globals.gridHeight&&a>0){var x=A.getAttribute("shape"),_=c.getMarkerPath(s,a,x,1.5*h);A.setAttribute("d",_)}this.moveXCrosshairs(s),l.fixedTooltip||this.moveTooltip(s,a,h)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,n=this.ttCtx,r=n.w,s=0,a=0,o=r.globals.pointsArray,l=new Hl(this.ctx),c=new yt(this.ctx);t=l.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var u=n.tooltipUtil.getHoverMarkerSize(t);if(o[t]&&(s=o[t][e][0],a=o[t][e][1]),!isNaN(s)){var h=n.tooltipUtil.getAllMarkers();if(h.length)for(var d=0;d<r.globals.series.length;d++){var A=o[d];if(r.globals.comboCharts&&A===void 0&&h.splice(d,0,null),A&&A.length){var x=o[d][e][1],_=void 0;h[d].setAttribute("cx",s);var S=h[d].getAttribute("shape");if(r.config.chart.type==="rangeArea"&&!r.globals.comboCharts){var w=e+r.globals.series[d].length;_=o[d][w][1],x-=Math.abs(x-_)/2}if(x!==null&&!isNaN(x)&&x<r.globals.gridHeight+u&&x+u>0){var C=c.getMarkerPath(s,x,S,u);h[d].setAttribute("d",C)}else h[d].setAttribute("d","")}}this.moveXCrosshairs(s),n.fixedTooltip||this.moveTooltip(s,a||r.globals.gridHeight,u)}}},{key:"moveStickyTooltipOverBars",value:function(e,t){var n=this.w,r=this.ttCtx,s=n.globals.columnSeries?n.globals.columnSeries.length:n.globals.series.length;n.config.chart.stacked&&(s=n.globals.barGroups.length);var a=s>=2&&s%2==0?Math.floor(s/2):Math.floor(s/2)+1;n.globals.isBarHorizontal&&(a=new Hl(this.ctx).getActiveConfigSeriesIndex("desc")+1);var o=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(a,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"']"));o||typeof t!="number"||(o=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var l=o?parseFloat(o.getAttribute("cx")):0,c=o?parseFloat(o.getAttribute("cy")):0,u=o?parseFloat(o.getAttribute("barWidth")):0,h=r.getElGrid().getBoundingClientRect(),d=o&&(o.classList.contains("apexcharts-candlestick-area")||o.classList.contains("apexcharts-boxPlot-area"));n.globals.isXNumeric?(o&&!d&&(l-=s%2!=0?u/2:0),o&&d&&(l-=u/2)):n.globals.isBarHorizontal||(l=r.xAxisTicksPositions[e-1]+r.dataPointsDividedWidth/2,isNaN(l)&&(l=r.xAxisTicksPositions[e]-r.dataPointsDividedWidth/2)),n.globals.isBarHorizontal?c-=r.tooltipRect.ttHeight:n.config.tooltip.followCursor?c=r.e.clientY-h.top-r.tooltipRect.ttHeight/2:c+r.tooltipRect.ttHeight+15>n.globals.gridHeight&&(c=n.globals.gridHeight),n.globals.isBarHorizontal||this.moveXCrosshairs(l),r.fixedTooltip||this.moveTooltip(l,c||n.globals.gridHeight)}}]),i}(),BTe=function(){function i(e){Kt(this,i),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new dX(e)}return Jt(i,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new yt(this.ctx),n=new vm(this.ctx),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");r=Us(r),e.config.chart.stacked&&r.sort(function(h,d){return parseFloat(h.getAttribute("data:realIndex"))-parseFloat(d.getAttribute("data:realIndex"))});for(var s=0;s<r.length;s++){var a=r[s].querySelector(".apexcharts-series-markers-wrap");if(a!==null){var o=void 0,l="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(l+=" no-pointer-events");var c=n.getMarkerConfig({cssClass:l,seriesIndex:Number(a.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,c)).node.setAttribute("default-marker-size",0);var u=document.createElementNS(e.globals.SVGNS,"g");u.classList.add("apexcharts-series-markers"),u.appendChild(o.node),a.appendChild(u)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.w;s.config.chart.type!=="bubble"&&this.newPointSize(e,t);var a=t.getAttribute("cx"),o=t.getAttribute("cy");if(n!==null&&r!==null&&(a=n,o=r),this.tooltipPosition.moveXCrosshairs(a),!this.fixedTooltip){if(s.config.chart.type==="radar"){var l=this.ttCtx.getElGrid().getBoundingClientRect();a=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(a,o,s.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,n=this,r=this.ttCtx,s=e,a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,l=0;l<a.length;l++){var c=a[l].getAttribute("rel"),u=a[l].getAttribute("index");if(o===void 0&&(o=t.globals.markers.size[u]+t.config.markers.hover.sizeOffset),s===parseInt(c,10)){n.newPointSize(s,a[l]);var h=a[l].getAttribute("cx"),d=a[l].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(h),r.fixedTooltip||n.tooltipPosition.moveTooltip(h,d,o)}else n.oldPointSize(a[l])}}},{key:"newPointSize",value:function(e,t){var n=this.w,r=n.config.markers.hover.size,s=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(s.getAttribute("default-marker-size")!=="0"){var a=parseInt(s.getAttribute("index"),10);r===void 0&&(r=n.globals.markers.size[a]+n.config.markers.hover.sizeOffset),r<0&&(r=0);var o=this.ttCtx.tooltipUtil.getPathFromPoint(t,r);t.setAttribute("d",o)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),n=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",n)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var n=parseFloat(e[t].getAttribute("default-marker-size"));if(Ne.isNumber(n)&&n>0){var r=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],n);e[t].setAttribute("d",r)}else e[t].setAttribute("d","M0,0")}}}]),i}(),FTe=function(){function i(e){Kt(this,i),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return Jt(i,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,n=e.opt,r=e.x,s=e.y,a=e.type,o=this.ttCtx,l=this.w;if(t.target.classList.contains("apexcharts-".concat(a,"-rect"))){var c=this.getAttr(t,"i"),u=this.getAttr(t,"j"),h=this.getAttr(t,"cx"),d=this.getAttr(t,"cy"),A=this.getAttr(t,"width"),x=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:c,j:u,shared:!1,e:t}),l.globals.capturedSeriesIndex=c,l.globals.capturedDataPointIndex=u,r=h+o.tooltipRect.ttWidth/2+A,s=d+o.tooltipRect.ttHeight/2-x/2,o.tooltipPosition.moveXCrosshairs(h+A/2),r>l.globals.gridWidth/2&&(r=h-o.tooltipRect.ttWidth/2+A),o.w.config.tooltip.followCursor){var _=l.globals.dom.elWrap.getBoundingClientRect();r=l.globals.clientX-_.left-(r>l.globals.gridWidth/2?o.tooltipRect.ttWidth:0),s=l.globals.clientY-_.top-(s>l.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:r,y:s}}},{key:"handleMarkerTooltip",value:function(e){var t,n,r=e.e,s=e.opt,a=e.x,o=e.y,l=this.w,c=this.ttCtx;if(r.target.classList.contains("apexcharts-marker")){var u=parseInt(s.paths.getAttribute("cx"),10),h=parseInt(s.paths.getAttribute("cy"),10),d=parseFloat(s.paths.getAttribute("val"));if(n=parseInt(s.paths.getAttribute("rel"),10),t=parseInt(s.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,c.intersect){var A=Ne.findAncestor(s.paths,"apexcharts-series");A&&(t=parseInt(A.getAttribute("data:realIndex"),10))}if(c.tooltipLabels.drawSeriesTexts({ttItems:s.ttItems,i:t,j:n,shared:!c.showOnIntersect&&l.config.tooltip.shared,e:r}),r.type==="mouseup"&&c.markerClick(r,t,n),l.globals.capturedSeriesIndex=t,l.globals.capturedDataPointIndex=n,a=u,o=h+l.globals.translateY-1.4*c.tooltipRect.ttHeight,c.w.config.tooltip.followCursor){var x=c.getElGrid().getBoundingClientRect();o=c.e.clientY+l.globals.translateY-x.top}d<0&&(o=h),c.marker.enlargeCurrentPoint(n,s.paths,a,o)}return{x:a,y:o}}},{key:"handleBarTooltip",value:function(e){var t,n,r=e.e,s=e.opt,a=this.w,o=this.ttCtx,l=o.getElTooltip(),c=0,u=0,h=0,d=this.getBarTooltipXY({e:r,opt:s});if(d.j!==null||d.barHeight!==0||d.barWidth!==0){t=d.i;var A=d.j;if(a.globals.capturedSeriesIndex=t,a.globals.capturedDataPointIndex=A,a.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!a.config.tooltip.shared?(u=d.x,h=d.y,n=Array.isArray(a.config.stroke.width)?a.config.stroke.width[t]:a.config.stroke.width,c=u):a.globals.comboCharts||a.config.tooltip.shared||(c/=2),isNaN(h)&&(h=a.globals.svgHeight-o.tooltipRect.ttHeight),parseInt(s.paths.parentNode.getAttribute("data:realIndex"),10),u+o.tooltipRect.ttWidth>a.globals.gridWidth?u-=o.tooltipRect.ttWidth:u<0&&(u=0),o.w.config.tooltip.followCursor){var x=o.getElGrid().getBoundingClientRect();h=o.e.clientY-x.top}o.tooltip===null&&(o.tooltip=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),a.config.tooltip.shared||(a.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(c+n/2):o.tooltipPosition.moveXCrosshairs(c)),!o.fixedTooltip&&(!a.config.tooltip.shared||a.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(h=h+a.globals.translateY-o.tooltipRect.ttHeight/2,l.style.left=u+a.globals.translateX+"px",l.style.top=h+"px")}}},{key:"getBarTooltipXY",value:function(e){var t=this,n=e.e,r=e.opt,s=this.w,a=null,o=this.ttCtx,l=0,c=0,u=0,h=0,d=0,A=n.target.classList;if(A.contains("apexcharts-bar-area")||A.contains("apexcharts-candlestick-area")||A.contains("apexcharts-boxPlot-area")||A.contains("apexcharts-rangebar-area")){var x=n.target,_=x.getBoundingClientRect(),S=r.elGrid.getBoundingClientRect(),w=_.height;d=_.height;var C=_.width,P=parseInt(x.getAttribute("cx"),10),L=parseInt(x.getAttribute("cy"),10);h=parseFloat(x.getAttribute("barWidth"));var D=n.type==="touchmove"?n.touches[0].clientX:n.clientX;a=parseInt(x.getAttribute("j"),10),l=parseInt(x.parentNode.getAttribute("rel"),10)-1;var B=x.getAttribute("data-range-y1"),k=x.getAttribute("data-range-y2");s.globals.comboCharts&&(l=parseInt(x.parentNode.getAttribute("data:realIndex"),10));var U=function(z){return s.globals.isXNumeric?P-C/2:t.isVerticalGroupedRangeBar?P+C/2:P-o.dataPointsDividedWidth+C/2},F=function(){return L-o.dataPointsDividedHeight+w/2-o.tooltipRect.ttHeight/2};o.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:l,j:a,y1:B?parseInt(B,10):null,y2:k?parseInt(k,10):null,shared:!o.showOnIntersect&&s.config.tooltip.shared,e:n}),s.config.tooltip.followCursor?s.globals.isBarHorizontal?(c=D-S.left+15,u=F()):(c=U(),u=n.clientY-S.top-o.tooltipRect.ttHeight/2-15):s.globals.isBarHorizontal?((c=P)<o.xyRatios.baseLineInvertedY&&(c=P-o.tooltipRect.ttWidth),u=F()):(c=U(),u=L)}return{x:c,y:u,barHeight:d,barWidth:h,i:l,j:a}}}]),i}(),UTe=function(){function i(e){Kt(this,i),this.w=e.w,this.ttCtx=e}return Jt(i,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,n=e.config.xaxis.position==="bottom";t.xaxisOffY=n?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var r=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",s=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),s.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,n=0;n<e.config.yaxis.length;n++){var r=e.config.yaxis[n].opposite||e.config.yaxis[n].crosshairs.opposite;t.yaxisOffX=r?e.globals.gridWidth+1:1;var s="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,r?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),a=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.yaxisTooltip),n===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[n]=document.createElement("div"),t.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[n]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,n=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(r!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var s=parseFloat(r.getAttribute("barWidth"));t.xcrosshairsWidth=s}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var a=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/a}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if(e.config.xaxis.crosshairs.width==="barWidth"){var l=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(l!==null){var c=parseFloat(l.getAttribute("barWidth"));t.xcrosshairsWidth=c}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),n!==null&&t.xcrosshairsWidth>0&&n.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,n){var r=this.ttCtx,s=this.w,a=s.globals,o=a.seriesYAxisMap[e];if(r.yaxisTooltips[e]&&o.length>0){var l=a.yLabelFormatters[e],c=r.getElGrid().getBoundingClientRect(),u=o[0],h=0;n.yRatio.length>1&&(h=u);var d=(t-c.top)*n.yRatio[h],A=a.maxYArr[u]-a.minYArr[u],x=a.minYArr[u]+(A-d);s.config.yaxis[e].reversed&&(x=a.maxYArr[u]-(A-d)),r.tooltipPosition.moveYCrosshairs(t-c.top),r.yaxisTooltipText[e].innerHTML=l(x),r.tooltipPosition.moveYAxisTooltip(e)}}}]),i}(),i9=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new fX(this),this.tooltipLabels=new ITe(this),this.tooltipPosition=new dX(this),this.marker=new BTe(this),this.intersect=new FTe(this),this.axesTooltip=new UTe(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Jt(i,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map(function(a,o){return!!(a.show&&a.tooltip.enabled&&t.globals.axisCharts)}),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&n.classList.add(t.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme||"light")),t.globals.dom.elWrap.appendChild(n),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var r=new Bx(this.ctx);this.xAxisTicksPositions=r.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var s=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(s=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(s),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,n=this.w,r=[],s=this.getElTooltip(),a=function(l){var c=document.createElement("div");c.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(l)),c.style.order=n.config.tooltip.inverseOrder?e-l:l+1;var u=document.createElement("span");u.classList.add("apexcharts-tooltip-marker"),n.config.tooltip.fillSeriesColor?u.style.backgroundColor=n.globals.colors[l]:u.style.color=n.globals.colors[l];var h=n.config.markers.shape,d=h;Array.isArray(h)&&(d=h[l]),u.setAttribute("shape",d),c.appendChild(u);var A=document.createElement("div");A.classList.add("apexcharts-tooltip-text"),A.style.fontFamily=t.tConfig.style.fontFamily||n.config.chart.fontFamily,A.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach(function(x){var _=document.createElement("div");_.classList.add("apexcharts-tooltip-".concat(x,"-group"));var S=document.createElement("span");S.classList.add("apexcharts-tooltip-text-".concat(x,"-label")),_.appendChild(S);var w=document.createElement("span");w.classList.add("apexcharts-tooltip-text-".concat(x,"-value")),_.appendChild(w),A.appendChild(_)}),c.appendChild(A),s.appendChild(c),r.push(c)},o=0;o<e;o++)a(o);return r}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,n=this.getElTooltip(),r=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),s=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",a=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var l,c=[],u=[],h={hoverArea:a,elGrid:o,tooltipEl:n,tooltipY:c,tooltipX:u,ttItems:this.ttItems};if(e.globals.axisCharts&&(s?l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):r?l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),l&&l.length))for(var d=0;d<l.length;d++)c.push(l[d].getAttribute("cy")),u.push(l[d].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||r&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([a],h);else if(r&&!e.globals.comboCharts||s&&this.showOnIntersect)this.addDatapointEventsListeners(h);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var A=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(A,h)}if(this.showOnIntersect){var x=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");x.length>0&&this.addPathsEventListeners(x,h),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(h)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),n=t.getBoundingClientRect(),r=n.width+10,s=n.height+10,a=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,l=this.tConfig.fixed.position.toLowerCase();return l.indexOf("right")>-1&&(a=a+e.globals.svgWidth-r+10),l.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-s-10),t.style.left=a+"px",t.style.top=o+"px",{x:a,y:o,ttWidth:r,ttHeight:s}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var n=this,r=function(a){var o={paths:e[a],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(l){return e[a].addEventListener(l,n.onSeriesHover.bind(n,o),{capture:!1,passive:!0})})},s=0;s<e.length;s++)r(s)}},{key:"onSeriesHover",value:function(e,t){var n=this,r=Date.now()-this.lastHoverTime;r>=20?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){n.seriesHover(e,t)},20-r))}},{key:"seriesHover",value:function(e,t){var n=this;this.lastHoverTime=Date.now();var r=[],s=this.w;s.config.chart.group&&(r=this.ctx.getGroupedCharts()),s.globals.axisCharts&&(s.globals.minX===-1/0&&s.globals.maxX===1/0||s.globals.dataPoints===0)||(r.length?r.forEach(function(a){var o=n.getElTooltip(a),l={paths:e.paths,tooltipEl:o,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:a.w.globals.tooltip.ttItems};a.w.globals.minX===n.w.globals.minX&&a.w.globals.maxX===n.w.globals.maxX&&a.w.globals.tooltip.seriesHoverByContext({chartCtx:a,ttCtx:a.w.globals.tooltip,opt:l,e:t})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,n=e.ttCtx,r=e.opt,s=e.e,a=t.w,o=this.getElTooltip(t);o&&(n.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},n.e=s,n.tooltipUtil.hasBars()&&!a.globals.comboCharts&&!n.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Hl(t).toggleSeriesOnHover(s,s.target.parentNode),a.globals.axisCharts?n.axisChartsTooltips({e:s,opt:r,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:s,opt:r,tooltipRect:n.tooltipRect}),n.fixedTooltip&&n.drawFixedTooltipRect())}},{key:"axisChartsTooltips",value:function(e){var t,n,r=e.e,s=e.opt,a=this.w,o=s.elGrid.getBoundingClientRect(),l=r.type==="touchmove"?r.touches[0].clientX:r.clientX,c=r.type==="touchmove"?r.touches[0].clientY:r.clientY;if(this.clientY=c,this.clientX=l,a.globals.capturedSeriesIndex=-1,a.globals.capturedDataPointIndex=-1,c<o.top||c>o.top+o.height)this.handleMouseOut(s);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!a.config.tooltip.shared){var u=parseInt(s.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(u)<0)return void this.handleMouseOut(s)}var h=this.getElTooltip(),d=this.getElXCrosshairs(),A=[];a.config.chart.group&&(A=this.ctx.getSyncedCharts());var x=a.globals.xyCharts||a.config.chart.type==="bar"&&!a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||a.globals.comboCharts&&this.tooltipUtil.hasBars();if(r.type==="mousemove"||r.type==="touchmove"||r.type==="mouseup"){if(a.globals.collapsedSeries.length+a.globals.ancillaryCollapsedSeries.length===a.globals.series.length)return;d!==null&&d.classList.add("apexcharts-active");var _=this.yaxisTooltips.filter(function(C){return C===!0});if(this.ycrosshairs!==null&&_.length&&this.ycrosshairs.classList.add("apexcharts-active"),x&&!this.showOnIntersect||A.length>1)this.handleStickyTooltip(r,l,c,s);else if(a.config.chart.type==="heatmap"||a.config.chart.type==="treemap"){var S=this.intersect.handleHeatTreeTooltip({e:r,opt:s,x:t,y:n,type:a.config.chart.type});t=S.x,n=S.y,h.style.left=t+"px",h.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:r,opt:s}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:r,opt:s,x:t,y:n});if(this.yaxisTooltips.length)for(var w=0;w<a.config.yaxis.length;w++)this.axesTooltip.drawYaxisTooltipText(w,c,this.xyRatios);a.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),s.tooltipEl.classList.add("apexcharts-active")}else r.type!=="mouseout"&&r.type!=="touchend"||this.handleMouseOut(s)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,n=e.opt,r=e.tooltipRect,s=this.w,a=n.paths.getAttribute("rel"),o=this.getElTooltip(),l=s.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){s.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(a,10)-1,shared:!1});var c=s.globals.clientX-l.left-r.ttWidth/2,u=s.globals.clientY-l.top-r.ttHeight-10;if(o.style.left=c+"px",o.style.top=u+"px",s.config.legend.tooltipHoverFormatter){var h=a-1,d=(0,s.config.legend.tooltipHoverFormatter)(this.legendLabels[h].getAttribute("data:default-text"),{seriesIndex:h,dataPointIndex:h,w:s});this.legendLabels[h].innerHTML=d}}else t.type!=="mouseout"&&t.type!=="touchend"||(o.classList.remove("apexcharts-active"),s.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(A){var x=A.getAttribute("data:default-text");A.innerHTML=decodeURIComponent(x)}))}},{key:"handleStickyTooltip",value:function(e,t,n,r){var s=this.w,a=this.tooltipUtil.getNearestValues({context:this,hoverArea:r.hoverArea,elGrid:r.elGrid,clientX:t,clientY:n}),o=a.j,l=a.capturedSeries;s.globals.collapsedSeriesIndices.includes(l)&&(l=null);var c=r.elGrid.getBoundingClientRect();if(a.hoverX<0||a.hoverX>c.width)this.handleMouseOut(r);else if(l!==null)this.handleStickyCapturedSeries(e,l,r,o);else if(this.tooltipUtil.isXoverlap(o)||s.globals.isBarHorizontal){var u=s.globals.series.findIndex(function(h,d){return!s.globals.collapsedSeriesIndices.includes(d)});this.create(e,this,u,o,r.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,n,r){var s=this.w;if(!this.tConfig.shared&&s.globals.series[t][r]===null)return void this.handleMouseOut(n);if(s.globals.series[t][r]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(r)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,r,n.ttItems):this.create(e,this,t,r,n.ttItems,!1);else if(this.tooltipUtil.isXoverlap(r)){var a=s.globals.series.findIndex(function(o,l){return!s.globals.collapsedSeriesIndices.includes(l)});this.create(e,this,a,r,n.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new yt(this.ctx),n=e.globals.dom.Paper.find(".apexcharts-bar-area"),r=0;r<n.length;r++)t.pathMouseLeave(n[r])}},{key:"handleMouseOut",value:function(e){var t=this.w,n=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),n!==null&&n.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var r=0;r<this.yaxisTTEls.length;r++)this.yaxisTTEls[r].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(s){var a=s.getAttribute("data:default-text");s.innerHTML=decodeURIComponent(a)})}},{key:"markerClick",value:function(e,t,n){var r=this.w;typeof r.config.chart.events.markerClick=="function"&&r.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}])}},{key:"create",value:function(e,t,n,r,s){var a,o,l,c,u,h,d,A,x,_,S,w,C,P,L,D,B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,k=this.w,U=t;e.type==="mouseup"&&this.markerClick(e,n,r),B===null&&(B=this.tConfig.shared);var F=this.tooltipUtil.hasMarkers(n),z=this.tooltipUtil.getElBars(),V=function(){k.globals.markers.largestSize>0?U.marker.enlargePoints(r):U.tooltipPosition.moveDynamicPointsOnHover(r)};if(k.config.legend.tooltipHoverFormatter){var W=k.config.legend.tooltipHoverFormatter,X=Array.from(this.legendLabels);X.forEach(function(Pe){var _e=Pe.getAttribute("data:default-text");Pe.innerHTML=decodeURIComponent(_e)});for(var J=0;J<X.length;J++){var K=X[J],Y=parseInt(K.getAttribute("i"),10),ee=decodeURIComponent(K.getAttribute("data:default-text")),se=W(ee,{seriesIndex:B?Y:n,dataPointIndex:r,w:k});if(B)K.innerHTML=k.globals.collapsedSeriesIndices.indexOf(Y)<0?se:ee;else if(K.innerHTML=Y===n?se:ee,n===Y)break}}var fe=Bt(Bt({ttItems:s,i:n,j:r},((a=k.globals.seriesRange)===null||a===void 0||(o=a[n])===null||o===void 0||(l=o[r])===null||l===void 0||(c=l.y[0])===null||c===void 0?void 0:c.y1)!==void 0&&{y1:(u=k.globals.seriesRange)===null||u===void 0||(h=u[n])===null||h===void 0||(d=h[r])===null||d===void 0||(A=d.y[0])===null||A===void 0?void 0:A.y1}),((x=k.globals.seriesRange)===null||x===void 0||(_=x[n])===null||_===void 0||(S=_[r])===null||S===void 0||(w=S.y[0])===null||w===void 0?void 0:w.y2)!==void 0&&{y2:(C=k.globals.seriesRange)===null||C===void 0||(P=C[n])===null||P===void 0||(L=P[r])===null||L===void 0||(D=L.y[0])===null||D===void 0?void 0:D.y2});if(B){if(U.tooltipLabels.drawSeriesTexts(Bt(Bt({},fe),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),F)V();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(z),this.barSeriesHeight>0)){var ne=new yt(this.ctx),he=k.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(r,"']"));this.deactivateHoverFilter(),U.tooltipUtil.getAllMarkers(!0).length&&!this.barSeriesHeight&&V(),U.tooltipPosition.moveStickyTooltipOverBars(r,n);for(var Te=0;Te<he.length;Te++)ne.pathMouseEnter(he[Te])}}else U.tooltipLabels.drawSeriesTexts(Bt({shared:!1},fe)),this.tooltipUtil.hasBars()&&U.tooltipPosition.moveStickyTooltipOverBars(r,n),F&&U.tooltipPosition.moveMarkers(n,r)}}]),i}(),zTe=function(){function i(e){Kt(this,i),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Jt(i,[{key:"handleBarDataLabels",value:function(e){var t,n,r=e.x,s=e.y,a=e.y1,o=e.y2,l=e.i,c=e.j,u=e.realIndex,h=e.columnGroupIndex,d=e.series,A=e.barHeight,x=e.barWidth,_=e.barXPosition,S=e.barYPosition,w=e.visibleSeries,C=this.w,P=new yt(this.barCtx.ctx),L=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[u]:this.barCtx.strokeWidth;C.globals.isXNumeric&&!C.globals.isBarHorizontal?(t=r+parseFloat(x*(w+1)),n=s+parseFloat(A*(w+1))-L):(t=r+parseFloat(x*w),n=s+parseFloat(A*w));var D,B=null,k=r,U=s,F={},z=C.config.dataLabels,V=this.barCtx.barOptions.dataLabels,W=this.barCtx.barOptions.dataLabels.total;S!==void 0&&this.barCtx.isRangeBar&&(n=S,U=S),_!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=_,k=_);var X=z.offsetX,J=z.offsetY,K={width:0,height:0};if(C.config.dataLabels.enabled){var Y=C.globals.series[l][c];K=P.getTextRects(C.config.dataLabels.formatter?C.config.dataLabels.formatter(Y,Bt(Bt({},C),{},{seriesIndex:l,dataPointIndex:c,w:C})):C.globals.yLabelFormatters[0](Y),parseFloat(z.style.fontSize))}var ee={x:r,y:s,i:l,j:c,realIndex:u,columnGroupIndex:h,bcx:t,bcy:n,barHeight:A,barWidth:x,textRects:K,strokeWidth:L,dataLabelsX:k,dataLabelsY:U,dataLabelsConfig:z,barDataLabelsConfig:V,barTotalDataLabelsConfig:W,offX:X,offY:J};return F=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(ee):this.calculateColumnsDataLabelsPosition(ee),D=this.drawCalculatedDataLabels({x:F.dataLabelsX,y:F.dataLabelsY,val:this.barCtx.isRangeBar?[a,o]:C.config.chart.stackType==="100%"?d[u][c]:C.globals.series[u][c],i:u,j:c,barWidth:x,barHeight:A,textRects:K,dataLabelsConfig:z}),C.config.chart.stacked&&W.enabled&&(B=this.drawTotalDataLabels({x:F.totalDataLabelsX,y:F.totalDataLabelsY,barWidth:x,barHeight:A,realIndex:u,textAnchor:F.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:u,j:c}),dataLabelsConfig:z,barTotalDataLabelsConfig:W})),{dataLabelsPos:F,dataLabels:D,totalDataLabels:B}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,n=e.j,r=this.w,s=this.barCtx.stackedSeriesTotals[n];return this.totalFormatter&&(s=this.totalFormatter(s,Bt(Bt({},r),{},{seriesIndex:t,dataPointIndex:n,w:r}))),s}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this,n=this.w,r=e.i,s=e.j,a=e.realIndex;e.columnGroupIndex;var o,l,c=e.y,u=e.bcx,h=e.barWidth,d=e.barHeight,A=e.textRects,x=e.dataLabelsX,_=e.dataLabelsY,S=e.dataLabelsConfig,w=e.barDataLabelsConfig,C=e.barTotalDataLabelsConfig,P=e.strokeWidth,L=e.offX,D=e.offY,B=u;d=Math.abs(d);var k=n.config.plotOptions.bar.dataLabels.orientation==="vertical",U=this.barCtx.barHelpers.getZeroValueEncounters({i:r,j:s}).zeroEncounters;u-=P/2;var F=n.globals.gridWidth/n.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?x+=h/2:(x=n.globals.isXNumeric?u-h/2+L:u-F+h/2+L,!n.config.chart.stacked&&U>0&&n.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(x-=h*U)),k&&(x=x+A.height/2-P/2-2);var z=n.globals.series[r][s]<0,V=c;switch(this.barCtx.isReversed&&(V=c+(z?d:-d)),w.position){case"center":_=k?z?V-d/2+D:V+d/2-D:z?V-d/2+A.height/2+D:V+d/2+A.height/2-D;break;case"bottom":_=k?z?V-d+D:V+d-D:z?V-d+A.height+P+D:V+d-A.height/2+P-D;break;case"top":_=k?z?V+D:V-D:z?V-A.height/2-D:V+A.height+D}var W=V;if(n.globals.seriesGroups.forEach(function(K){var Y;(Y=t.barCtx[K.join(",")])===null||Y===void 0||Y.prevY.forEach(function(ee){W=z?Math.max(ee[s],W):Math.min(ee[s],W)})}),this.barCtx.lastActiveBarSerieIndex===a&&C.enabled){var X=new yt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:s}),S.fontSize);o=z?W-X.height/2-D-C.offsetY+18:W+X.height+D+C.offsetY-18;var J=F;l=B+(n.globals.isXNumeric?-h*n.globals.barGroups.length/2:n.globals.barGroups.length*h/2-(n.globals.barGroups.length-1)*h-J)+C.offsetX}return n.config.chart.stacked||(_<0?_=0+P:_+A.height/3>n.globals.gridHeight&&(_=n.globals.gridHeight-P)),{bcx:u,bcy:c,dataLabelsX:x,dataLabelsY:_,totalDataLabelsX:l,totalDataLabelsY:o,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this,n=this.w,r=e.x,s=e.i,a=e.j,o=e.realIndex,l=e.bcy,c=e.barHeight,u=e.barWidth,h=e.textRects,d=e.dataLabelsX,A=e.strokeWidth,x=e.dataLabelsConfig,_=e.barDataLabelsConfig,S=e.barTotalDataLabelsConfig,w=e.offX,C=e.offY,P=n.globals.gridHeight/n.globals.dataPoints,L=this.barCtx.barHelpers.getZeroValueEncounters({i:s,j:a}).zeroEncounters;u=Math.abs(u);var D,B,k=l-(this.barCtx.isRangeBar?0:P)+c/2+h.height/2+C-3;!n.config.chart.stacked&&L>0&&n.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(k-=c*L);var U="start",F=n.globals.series[s][a]<0,z=r;switch(this.barCtx.isReversed&&(z=r+(F?-u:u),U=F?"start":"end"),_.position){case"center":d=F?z+u/2-w:Math.max(h.width/2,z-u/2)+w;break;case"bottom":d=F?z+u-A-w:z-u+A+w;break;case"top":d=F?z-A-w:z-A+w}var V=z;if(n.globals.seriesGroups.forEach(function(X){var J;(J=t.barCtx[X.join(",")])===null||J===void 0||J.prevX.forEach(function(K){V=F?Math.min(K[a],V):Math.max(K[a],V)})}),this.barCtx.lastActiveBarSerieIndex===o&&S.enabled){var W=new yt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:a}),x.fontSize);F?(D=V-A-w-S.offsetX,U="end"):D=V+w+S.offsetX+(this.barCtx.isReversed?-(u+A):A),B=k-h.height/2+W.height/2+S.offsetY+A,n.globals.barGroups.length>1&&(B-=n.globals.barGroups.length/2*(c/2))}return n.config.chart.stacked||(x.textAnchor==="start"?d-h.width<0?d=F?h.width+A:A:d+h.width>n.globals.gridWidth&&(d=F?n.globals.gridWidth-A:n.globals.gridWidth-h.width-A):x.textAnchor==="middle"?d-h.width/2<0?d=h.width/2+A:d+h.width/2>n.globals.gridWidth&&(d=n.globals.gridWidth-h.width/2-A):x.textAnchor==="end"&&(d<1?d=h.width+A:d+1>n.globals.gridWidth&&(d=n.globals.gridWidth-h.width-A))),{bcx:r,bcy:l,dataLabelsX:d,dataLabelsY:k,totalDataLabelsX:D,totalDataLabelsY:B,totalDataLabelsAnchor:U}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,n=e.y,r=e.val,s=e.i,a=e.j,o=e.textRects,l=e.barHeight,c=e.barWidth,u=e.dataLabelsConfig,h=this.w,d="rotate(0)";h.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(d="rotate(-90, ".concat(t,", ").concat(n,")"));var A=new jg(this.barCtx.ctx),x=new yt(this.barCtx.ctx),_=u.formatter,S=null,w=h.globals.collapsedSeriesIndices.indexOf(s)>-1;if(u.enabled&&!w){S=x.group({class:"apexcharts-data-labels",transform:d});var C="";r!==void 0&&(C=_(r,Bt(Bt({},h),{},{seriesIndex:s,dataPointIndex:a,w:h}))),!r&&h.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(C="");var P=h.globals.series[s][a]<0,L=h.config.plotOptions.bar.dataLabels.position;h.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(L==="top"&&(u.textAnchor=P?"end":"start"),L==="center"&&(u.textAnchor="middle"),L==="bottom"&&(u.textAnchor=P?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<x.getTextRects(C,parseFloat(u.style.fontSize)).width&&(C=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?o.width/1.6>Math.abs(c)&&(C=""):o.height/1.6>Math.abs(l)&&(C=""));var D=Bt({},u);this.barCtx.isHorizontal&&r<0&&(u.textAnchor==="start"?D.textAnchor="end":u.textAnchor==="end"&&(D.textAnchor="start")),A.plotDataLabelsText({x:t,y:n,text:C,i:s,j:a,parent:S,dataLabelsConfig:D,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return S}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,n=e.y,r=e.val,s=e.realIndex,a=e.textAnchor,o=e.barTotalDataLabelsConfig;this.w;var l,c=new yt(this.barCtx.ctx);return o.enabled&&t!==void 0&&n!==void 0&&this.barCtx.lastActiveBarSerieIndex===s&&(l=c.drawText({x:t,y:n,foreColor:o.style.color,text:r,textAnchor:a,fontFamily:o.style.fontFamily,fontSize:o.style.fontSize,fontWeight:o.style.fontWeight})),l}}]),i}(),GTe=function(){function i(e){Kt(this,i),this.w=e.w,this.barCtx=e}return Jt(i,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<e.length;n++)if(e[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[n].length),t.globals.isXNumeric)for(var r=0;r<e[n].length;r++)t.globals.seriesX[n][r]>t.globals.minX&&t.globals.seriesX[n][r]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(t.globals.series),Ne.isSafari()&&(this.arrBorderRadius=this.arrBorderRadius.map(function(s){return s.map(function(a){return"none"})})),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(e){var t,n,r,s,a,o,l,c,u=this.w,h=u.globals.dataPoints;this.barCtx.isRangeBar&&(h=u.globals.labels.length);var d=this.barCtx.seriesLen;if(u.config.plotOptions.bar.rangeBarGroupRows&&(d=1),this.barCtx.isHorizontal)a=(r=u.globals.gridHeight/h)/d,u.globals.isXNumeric&&(a=(r=u.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),a=a*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(a=parseInt(this.barCtx.barOptions.barHeight,10)),c=this.barCtx.baseLineInvertedY+u.globals.padHorizontal+(this.barCtx.isReversed?u.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(c=u.globals.gridWidth/2),n=(r-a*this.barCtx.seriesLen)/2;else{if(s=u.globals.gridWidth/this.barCtx.visibleItems,u.config.xaxis.convertedCatToNumeric&&(s=u.globals.gridWidth/u.globals.dataPoints),o=s/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100,u.globals.isXNumeric){var A=this.barCtx.xRatio;u.globals.minXDiff&&u.globals.minXDiff!==.5&&u.globals.minXDiff/A>0&&(s=u.globals.minXDiff/A),(o=s/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(o=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.columnWidth,10)),l=u.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?u.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),u.globals.isXNumeric?t=this.barCtx.getBarXForNumericXAxis({x:t,j:0,realIndex:e,barWidth:o}).x:t=u.globals.padHorizontal+Ne.noExponents(s-o*this.barCtx.seriesLen)/2}return u.globals.barHeight=a,u.globals.barWidth=o,{x:t,y:n,yDivision:r,xDivision:s,barHeight:a,barWidth:o,zeroH:l,zeroW:c}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]})}},{key:"getPathFillColor",value:function(e,t,n,r){var s,a,o,l,c=this.w,u=this.barCtx.ctx.fill,h=null,d=this.barCtx.barOptions.distributed?n:t,A=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(x){e[t][n]>=x.from&&e[t][n]<=x.to&&(h=x.color,A=!0)}),{color:u.fillPath({seriesNumber:this.barCtx.barOptions.distributed?d:r,dataPointIndex:n,color:h,value:e[t][n],fillConfig:(s=c.config.series[t].data[n])===null||s===void 0?void 0:s.fill,fillType:(a=c.config.series[t].data[n])!==null&&a!==void 0&&(o=a.fill)!==null&&o!==void 0&&o.type?(l=c.config.series[t].data[n])===null||l===void 0?void 0:l.fill.type:Array.isArray(c.config.fill.type)?c.config.fill.type[r]:c.config.fill.type}),useRangeColor:A}}},{key:"getStrokeWidth",value:function(e,t,n){var r=0,s=this.w;return this.barCtx.series[e][t]===void 0||this.barCtx.series[e][t]===null?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,s.config.stroke.show&&(this.barCtx.isNullValue||(r=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),r}},{key:"createBorderRadiusArr",value:function(e){var t,n=this.w,r=!this.w.config.chart.stacked||n.config.plotOptions.bar.borderRadius<=0,s=e.length,a=0|((t=e[0])===null||t===void 0?void 0:t.length),o=Array.from({length:s},function(){return Array(a).fill(r?"top":"none")});if(r)return o;for(var l=0;l<a;l++){for(var c=[],u=[],h=0,d=0;d<s;d++){var A=e[d][l];A>0?(c.push(d),h++):A<0&&(u.push(d),h++)}if(c.length>0&&u.length===0)if(c.length===1)o[c[0]][l]="both";else{var x,_=c[0],S=c[c.length-1],w=xy(c);try{for(w.s();!(x=w.n()).done;){var C=x.value;o[C][l]=C===_?"bottom":C===S?"top":"none"}}catch(Y){w.e(Y)}finally{w.f()}}else if(u.length>0&&c.length===0)if(u.length===1)o[u[0]][l]="both";else{var P,L=Math.max.apply(Math,u),D=Math.min.apply(Math,u),B=xy(u);try{for(B.s();!(P=B.n()).done;){var k=P.value;o[k][l]=k===L?"bottom":k===D?"top":"none"}}catch(Y){B.e(Y)}finally{B.f()}}else if(c.length>0&&u.length>0){var U,F=c[c.length-1],z=xy(c);try{for(z.s();!(U=z.n()).done;){var V=U.value;o[V][l]=V===F?"top":"none"}}catch(Y){z.e(Y)}finally{z.f()}var W,X=Math.max.apply(Math,u),J=xy(u);try{for(J.s();!(W=J.n()).done;){var K=W.value;o[K][l]=K===X?"bottom":"none"}}catch(Y){J.e(Y)}finally{J.f()}}else h===1&&(o[c[0]||u[0]][l]="both")}return o}},{key:"barBackground",value:function(e){var t=e.j,n=e.i,r=e.x1,s=e.x2,a=e.y1,o=e.y2,l=e.elSeries,c=this.w,u=new yt(this.barCtx.ctx),h=new Hl(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&h===n){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[t],A=u.drawRect(r!==void 0?r:0,a!==void 0?a:0,s!==void 0?s:c.globals.gridWidth,o!==void 0?o:c.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);l.add(A),A.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,n=e.barWidth,r=e.barXPosition,s=e.y1,a=e.y2,o=e.strokeWidth,l=e.isReversed,c=e.series,u=e.seriesGroup,h=e.realIndex,d=e.i,A=e.j,x=e.w,_=new yt(this.barCtx.ctx);(o=Array.isArray(o)?o[h]:o)||(o=0);var S=n,w=r;(t=x.config.series[h].data[A])!==null&&t!==void 0&&t.columnWidthOffset&&(w=r-x.config.series[h].data[A].columnWidthOffset/2,S=n+x.config.series[h].data[A].columnWidthOffset);var C=o/2,P=w+C,L=w+S-C,D=(c[d][A]>=0?1:-1)*(l?-1:1);s+=.001-C*D,a+=.001+C*D;var B=_.move(P,s),k=_.move(P,s),U=_.line(L,s);if(x.globals.previousPaths.length>0&&(k=this.barCtx.getPreviousPath(h,A,!1)),B=B+_.line(P,a)+_.line(L,a)+U+(x.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[h][A]==="both"?" Z":" z"),k=k+_.line(P,s)+U+U+U+U+U+_.line(P,s)+(x.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[h][A]==="both"?" Z":" z"),this.arrBorderRadius[h][A]!=="none"&&(B=_.roundPathCorners(B,x.config.plotOptions.bar.borderRadius)),x.config.chart.stacked){var F=this.barCtx;(F=this.barCtx[u]).yArrj.push(a-C*D),F.yArrjF.push(Math.abs(s-a+o*D)),F.yArrjVal.push(this.barCtx.series[d][A])}return{pathTo:B,pathFrom:k}}},{key:"getBarpaths",value:function(e){var t,n=e.barYPosition,r=e.barHeight,s=e.x1,a=e.x2,o=e.strokeWidth,l=e.isReversed,c=e.series,u=e.seriesGroup,h=e.realIndex,d=e.i,A=e.j,x=e.w,_=new yt(this.barCtx.ctx);(o=Array.isArray(o)?o[h]:o)||(o=0);var S=n,w=r;(t=x.config.series[h].data[A])!==null&&t!==void 0&&t.barHeightOffset&&(S=n-x.config.series[h].data[A].barHeightOffset/2,w=r+x.config.series[h].data[A].barHeightOffset);var C=o/2,P=S+C,L=S+w-C,D=(c[d][A]>=0?1:-1)*(l?-1:1);s+=.001+C*D,a+=.001-C*D;var B=_.move(s,P),k=_.move(s,P);x.globals.previousPaths.length>0&&(k=this.barCtx.getPreviousPath(h,A,!1));var U=_.line(s,L);if(B=B+_.line(a,P)+_.line(a,L)+U+(x.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[h][A]==="both"?" Z":" z"),k=k+_.line(s,P)+U+U+U+U+U+_.line(s,P)+(x.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[h][A]==="both"?" Z":" z"),this.arrBorderRadius[h][A]!=="none"&&(B=_.roundPathCorners(B,x.config.plotOptions.bar.borderRadius)),x.config.chart.stacked){var F=this.barCtx;(F=this.barCtx[u]).xArrj.push(a+C*D),F.xArrjF.push(Math.abs(s-a-o*D)),F.xArrjVal.push(this.barCtx.series[d][A])}return{pathTo:B,pathFrom:k}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,n=this.w,r=0;r<t.length;r++){for(var s=0,a=0;a<t[n.globals.maxValsInArrayIndex].length;a++)s+=t[r][a];s===0&&this.barCtx.zeroSerieses.push(r)}}},{key:"getXForValue",value:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(n=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),n}},{key:"getYForValue",value:function(e,t,n){var r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(r=t-e/this.barCtx.yRatio[n]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[n]:0)),r}},{key:"getGoalValues",value:function(e,t,n,r,s,a){var o=this,l=this.w,c=[],u=function(A,x){var _;c.push((fS(_={},e,e==="x"?o.getXForValue(A,t,!1):o.getYForValue(A,n,a,!1)),fS(_,"attrs",x),_))};if(l.globals.seriesGoals[r]&&l.globals.seriesGoals[r][s]&&Array.isArray(l.globals.seriesGoals[r][s])&&l.globals.seriesGoals[r][s].forEach(function(A){u(A.value,A)}),this.barCtx.barOptions.isDumbbell&&l.globals.seriesRange.length){var h=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:l.globals.colors,d={strokeHeight:e==="x"?0:l.globals.markers.size[r],strokeWidth:e==="x"?l.globals.markers.size[r]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(h[r])?h[r][0]:h[r]};u(l.globals.seriesRangeStart[r][s],d),u(l.globals.seriesRangeEnd[r][s],Bt(Bt({},d),{},{strokeColor:Array.isArray(h[r])?h[r][1]:h[r]}))}return c}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,n=e.barYPosition,r=e.goalX,s=e.goalY,a=e.barWidth,o=e.barHeight,l=new yt(this.barCtx.ctx),c=l.group({className:"apexcharts-bar-goals-groups"});c.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:c.node}),c.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var u=null;return this.barCtx.isHorizontal?Array.isArray(r)&&r.forEach(function(h){if(h.x>=-1&&h.x<=l.w.globals.gridWidth+1){var d=h.attrs.strokeHeight!==void 0?h.attrs.strokeHeight:o/2,A=n+d+o/2;u=l.drawLine(h.x,A-2*d,h.x,A,h.attrs.strokeColor?h.attrs.strokeColor:void 0,h.attrs.strokeDashArray,h.attrs.strokeWidth?h.attrs.strokeWidth:2,h.attrs.strokeLineCap),c.add(u)}}):Array.isArray(s)&&s.forEach(function(h){if(h.y>=-1&&h.y<=l.w.globals.gridHeight+1){var d=h.attrs.strokeWidth!==void 0?h.attrs.strokeWidth:a/2,A=t+d+a/2;u=l.drawLine(A-2*d,h.y,A,h.y,h.attrs.strokeColor?h.attrs.strokeColor:void 0,h.attrs.strokeDashArray,h.attrs.strokeHeight?h.attrs.strokeHeight:2,h.attrs.strokeLineCap),c.add(u)}}),c}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,n=e.currPaths,r=e.color,s=this.w,a=t.x,o=t.x1,l=t.barYPosition,c=n.x,u=n.x1,h=n.barYPosition,d=l+n.barHeight,A=new yt(this.barCtx.ctx),x=new Ne,_=A.move(o,d)+A.line(a,d)+A.line(c,h)+A.line(u,h)+A.line(o,d)+(s.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return A.drawPath({d:_,fill:x.shadeColor(.5,Ne.rgb2hex(r)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(e){var t,n=e.i,r=e.j,s=this.w,a=0,o=0;return(s.config.plotOptions.bar.horizontal?s.globals.series.map(function(l,c){return c}):((t=s.globals.columnSeries)===null||t===void 0?void 0:t.i.map(function(l){return l}))||[]).forEach(function(l){var c=s.globals.seriesPercent[l][r];c&&a++,l<n&&c===0&&o++}),{nonZeroColumns:a,zeroEncounters:o}}},{key:"getGroupIndex",value:function(e){var t=this.w,n=t.globals.seriesGroups.findIndex(function(a){return a.indexOf(t.globals.seriesNames[e])>-1}),r=this.barCtx.columnGroupIndices,s=r.indexOf(n);return s<0&&(r.push(n),s=r.length-1),{groupIndex:n,columnGroupIndex:s}}}]),i}(),Xg=function(){function i(e,t){Kt(this,i),this.ctx=e,this.w=e.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!n.globals.isBarHorizontal&&n.globals.seriesRange.length&&n.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var r=new Hl(this.ctx);this.lastActiveBarSerieIndex=r.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var s=r.getBarSeriesIndices(),a=new ls(this.ctx);this.stackedSeriesTotals=a.getStackedSeriesTotals(this.w.config.series.map(function(o,l){return s.indexOf(l)===-1?l:-1}).filter(function(o){return o!==-1})),this.barHelpers=new GTe(this)}return Jt(i,[{key:"draw",value:function(e,t){var n=this.w,r=new yt(this.ctx),s=new ls(this.ctx,n);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var a=r.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var o=0,l=0;o<e.length;o++,l++){var c,u,h,d,A=void 0,x=void 0,_=[],S=[],w=n.globals.comboCharts?t[o]:o,C=this.barHelpers.getGroupIndex(w).columnGroupIndex,P=r.group({class:"apexcharts-series",rel:o+1,seriesName:Ne.escapeString(n.globals.seriesNames[w]),"data:realIndex":w});this.ctx.series.addCollapsedClassToSeries(P,w),e[o].length>0&&(this.visibleI=this.visibleI+1);var L=0,D=0;this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[w],this.translationsIndex=w);var B=this.translationsIndex;this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var k=this.barHelpers.initialPositions(w);x=k.y,L=k.barHeight,u=k.yDivision,d=k.zeroW,A=k.x,D=k.barWidth,c=k.xDivision,h=k.zeroH,this.isHorizontal||S.push(A+D/2);var U=r.group({class:"apexcharts-datalabels","data:realIndex":w});n.globals.delayedElements.push({el:U.node}),U.node.classList.add("apexcharts-element-hidden");var F=r.group({class:"apexcharts-bar-goals-markers"}),z=r.group({class:"apexcharts-bar-shadows"});n.globals.delayedElements.push({el:z.node}),z.node.classList.add("apexcharts-element-hidden");for(var V=0;V<e[o].length;V++){var W=this.barHelpers.getStrokeWidth(o,V,w),X=null,J={indexes:{i:o,j:V,realIndex:w,translationsIndex:B,bc:l},x:A,y:x,strokeWidth:W,elSeries:P};this.isHorizontal?(X=this.drawBarPaths(Bt(Bt({},J),{},{barHeight:L,zeroW:d,yDivision:u})),D=this.series[o][V]/this.invertedYRatio):(X=this.drawColumnPaths(Bt(Bt({},J),{},{xDivision:c,barWidth:D,zeroH:h})),L=this.series[o][V]/this.yRatio[B]);var K=this.barHelpers.getPathFillColor(e,o,V,w);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&V>0){var Y,ee=this.barHelpers.drawBarShadow({color:typeof K.color=="string"&&((Y=K.color)===null||Y===void 0?void 0:Y.indexOf("url"))===-1?K.color:Ne.hexToRgba(n.globals.colors[o]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:X});z.add(ee),n.config.chart.dropShadow.enabled&&new ya(this.ctx).dropShadow(ee,n.config.chart.dropShadow,w)}this.pathArr.push(X);var se=this.barHelpers.drawGoalLine({barXPosition:X.barXPosition,barYPosition:X.barYPosition,goalX:X.goalX,goalY:X.goalY,barHeight:L,barWidth:D});se&&F.add(se),x=X.y,A=X.x,V>0&&S.push(A+D/2),_.push(x),this.renderSeries(Bt(Bt({realIndex:w,pathFill:K.color},K.useRangeColor?{lineFill:K.color}:{}),{},{j:V,i:o,columnGroupIndex:C,pathFrom:X.pathFrom,pathTo:X.pathTo,strokeWidth:W,elSeries:P,x:A,y:x,series:e,barHeight:Math.abs(X.barHeight?X.barHeight:L),barWidth:Math.abs(X.barWidth?X.barWidth:D),elDataLabelsWrap:U,elGoalsMarkers:F,elBarShadows:z,visibleSeries:this.visibleI,type:"bar"}))}n.globals.seriesXvalues[w]=S,n.globals.seriesYvalues[w]=_,a.add(P)}return a}},{key:"renderSeries",value:function(e){var t=e.realIndex,n=e.pathFill,r=e.lineFill,s=e.j,a=e.i,o=e.columnGroupIndex,l=e.pathFrom,c=e.pathTo,u=e.strokeWidth,h=e.elSeries,d=e.x,A=e.y,x=e.y1,_=e.y2,S=e.series,w=e.barHeight,C=e.barWidth,P=e.barXPosition,L=e.barYPosition,D=e.elDataLabelsWrap,B=e.elGoalsMarkers,k=e.elBarShadows,U=e.visibleSeries,F=e.type,z=e.classes,V=this.w,W=new yt(this.ctx),X=!1;if(!r){var J=typeof V.globals.stroke.colors[t]=="function"?function(fe){var ne,he=V.config.stroke.colors;return Array.isArray(he)&&he.length>0&&((ne=he[fe])||(ne=""),typeof ne=="function")?ne({value:V.globals.series[fe][s],dataPointIndex:s,w:V}):ne}(t):V.globals.stroke.colors[t];r=this.barOptions.distributed?V.globals.stroke.colors[s]:J}var K=new zTe(this).handleBarDataLabels({x:d,y:A,y1:x,y2:_,i:a,j:s,series:S,realIndex:t,columnGroupIndex:o,barHeight:w,barWidth:C,barXPosition:P,barYPosition:L,visibleSeries:U});V.globals.isBarHorizontal||(K.dataLabelsPos.dataLabelsX+C<0||K.dataLabelsPos.dataLabelsX-C>V.globals.gridWidth)&&(X=!0),V.config.series[a].data[s]&&V.config.series[a].data[s].strokeColor&&(r=V.config.series[a].data[s].strokeColor),this.isNullValue&&(n="none");var Y=s/V.config.chart.animations.animateGradually.delay*(V.config.chart.animations.speed/V.globals.dataPoints)/2.4;if(!X){var ee=W.renderPaths({i:a,j:s,realIndex:t,pathFrom:l,pathTo:c,stroke:r,strokeWidth:u,strokeLineCap:V.config.stroke.lineCap,fill:n,animationDelay:Y,initialSpeed:V.config.chart.animations.speed,dataChangeSpeed:V.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(F,"-area ").concat(z),chartType:F});ee.attr("clip-path","url(#gridRectBarMask".concat(V.globals.cuid,")"));var se=V.config.forecastDataPoints;se.count>0&&s>=V.globals.dataPoints-se.count&&(ee.node.setAttribute("stroke-dasharray",se.dashArray),ee.node.setAttribute("stroke-width",se.strokeWidth),ee.node.setAttribute("fill-opacity",se.fillOpacity)),x!==void 0&&_!==void 0&&(ee.attr("data-range-y1",x),ee.attr("data-range-y2",_)),new ya(this.ctx).setSelectionFilter(ee,t,s),h.add(ee),ee.attr({cy:K.dataLabelsPos.bcy,cx:K.dataLabelsPos.bcx,j:s,val:V.globals.series[a][s],barHeight:w,barWidth:C}),K.dataLabels!==null&&D.add(K.dataLabels),K.totalDataLabels&&D.add(K.totalDataLabels),h.add(D),B&&h.add(B),k&&h.add(k)}return h}},{key:"drawBarPaths",value:function(e){var t,n=e.indexes,r=e.barHeight,s=e.strokeWidth,a=e.zeroW,o=e.x,l=e.y,c=e.yDivision,u=e.elSeries,h=this.w,d=n.i,A=n.j;if(h.globals.isXNumeric)t=(l=(h.globals.seriesX[d][A]-h.globals.minX)/this.invertedXRatio-r)+r*this.visibleI;else if(h.config.plotOptions.bar.hideZeroBarsWhenGrouped){var x=this.barHelpers.getZeroValueEncounters({i:d,j:A}),_=x.nonZeroColumns,S=x.zeroEncounters;_>0&&(r=this.seriesLen*r/_),t=l+r*this.visibleI,t-=r*S}else t=l+r*this.visibleI;this.isFunnel&&(a-=(this.barHelpers.getXForValue(this.series[d][A],a)-a)/2),o=this.barHelpers.getXForValue(this.series[d][A],a);var w=this.barHelpers.getBarpaths({barYPosition:t,barHeight:r,x1:a,x2:o,strokeWidth:s,isReversed:this.isReversed,series:this.series,realIndex:n.realIndex,i:d,j:A,w:h});return h.globals.isXNumeric||(l+=c),this.barHelpers.barBackground({j:A,i:d,y1:t-r*this.visibleI,y2:r*this.seriesLen,elSeries:u}),{pathTo:w.pathTo,pathFrom:w.pathFrom,x1:a,x:o,y:l,goalX:this.barHelpers.getGoalValues("x",a,null,d,A),barYPosition:t,barHeight:r}}},{key:"drawColumnPaths",value:function(e){var t,n=e.indexes,r=e.x,s=e.y,a=e.xDivision,o=e.barWidth,l=e.zeroH,c=e.strokeWidth,u=e.elSeries,h=this.w,d=n.realIndex,A=n.translationsIndex,x=n.i,_=n.j,S=n.bc;if(h.globals.isXNumeric){var w=this.getBarXForNumericXAxis({x:r,j:_,realIndex:d,barWidth:o});r=w.x,t=w.barXPosition}else if(h.config.plotOptions.bar.hideZeroBarsWhenGrouped){var C=this.barHelpers.getZeroValueEncounters({i:x,j:_}),P=C.nonZeroColumns,L=C.zeroEncounters;P>0&&(o=this.seriesLen*o/P),t=r+o*this.visibleI,t-=o*L}else t=r+o*this.visibleI;s=this.barHelpers.getYForValue(this.series[x][_],l,A);var D=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:o,y1:l,y2:s,strokeWidth:c,isReversed:this.isReversed,series:this.series,realIndex:d,i:x,j:_,w:h});return h.globals.isXNumeric||(r+=a),this.barHelpers.barBackground({bc:S,j:_,i:x,x1:t-c/2-o*this.visibleI,x2:o*this.seriesLen+c/2,elSeries:u}),{pathTo:D.pathTo,pathFrom:D.pathFrom,x:r,y:s,goalY:this.barHelpers.getGoalValues("y",null,l,x,_,A),barXPosition:t,barWidth:o}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,n=e.barWidth,r=e.realIndex,s=e.j,a=this.w,o=r;return a.globals.seriesX[r].length||(o=a.globals.maxValsInArrayIndex),Ne.isNumber(a.globals.seriesX[o][s])&&(t=(a.globals.seriesX[o][s]-a.globals.minX)/this.xRatio-n*this.seriesLen/2),{barXPosition:t+n*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var n=this.w,r="M 0 0",s=0;s<n.globals.previousPaths.length;s++){var a=n.globals.previousPaths[s];a.paths&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&n.globals.previousPaths[s].paths[t]!==void 0&&(r=n.globals.previousPaths[s].paths[t].d)}return r}}]),i}(),r9=function(i){_1(t,Xg);var e=b1(t);function t(){return Kt(this,t),e.apply(this,arguments)}return Jt(t,[{key:"draw",value:function(n,r){var s=this,a=this.w;this.graphics=new yt(this.ctx),this.bar=new Xg(this.ctx,this.xyRatios);var o=new ls(this.ctx,a);n=o.getLogSeries(n),this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n),a.config.chart.stackType==="100%"&&(n=a.globals.comboCharts?r.map(function(x){return a.globals.seriesPercent[x]}):a.globals.seriesPercent.slice()),this.series=n,this.barHelpers.initializeStackedPrevVars(this);for(var l=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),c=0,u=0,h=function(x,_){var S=void 0,w=void 0,C=void 0,P=void 0,L=a.globals.comboCharts?r[x]:x,D=s.barHelpers.getGroupIndex(L),B=D.groupIndex,k=D.columnGroupIndex;s.groupCtx=s[a.globals.seriesGroups[B]];var U=[],F=[],z=0;s.yRatio.length>1&&(s.yaxisIndex=a.globals.seriesYAxisReverseMap[L][0],z=L),s.isReversed=a.config.yaxis[s.yaxisIndex]&&a.config.yaxis[s.yaxisIndex].reversed;var V=s.graphics.group({class:"apexcharts-series",seriesName:Ne.escapeString(a.globals.seriesNames[L]),rel:x+1,"data:realIndex":L});s.ctx.series.addCollapsedClassToSeries(V,L);var W=s.graphics.group({class:"apexcharts-datalabels","data:realIndex":L}),X=s.graphics.group({class:"apexcharts-bar-goals-markers"}),J=0,K=0,Y=s.initialPositions(c,u,S,w,C,P,z);u=Y.y,J=Y.barHeight,w=Y.yDivision,P=Y.zeroW,c=Y.x,K=Y.barWidth,S=Y.xDivision,C=Y.zeroH,a.globals.barHeight=J,a.globals.barWidth=K,s.barHelpers.initializeStackedXYVars(s),s.groupCtx.prevY.length===1&&s.groupCtx.prevY[0].every(function(Ie){return isNaN(Ie)})&&(s.groupCtx.prevY[0]=s.groupCtx.prevY[0].map(function(){return C}),s.groupCtx.prevYF[0]=s.groupCtx.prevYF[0].map(function(){return 0}));for(var ee=0;ee<a.globals.dataPoints;ee++){var se=s.barHelpers.getStrokeWidth(x,ee,L),fe={indexes:{i:x,j:ee,realIndex:L,translationsIndex:z,bc:_},strokeWidth:se,x:c,y:u,elSeries:V,columnGroupIndex:k,seriesGroup:a.globals.seriesGroups[B]},ne=null;s.isHorizontal?(ne=s.drawStackedBarPaths(Bt(Bt({},fe),{},{zeroW:P,barHeight:J,yDivision:w})),K=s.series[x][ee]/s.invertedYRatio):(ne=s.drawStackedColumnPaths(Bt(Bt({},fe),{},{xDivision:S,barWidth:K,zeroH:C})),J=s.series[x][ee]/s.yRatio[z]);var he=s.barHelpers.drawGoalLine({barXPosition:ne.barXPosition,barYPosition:ne.barYPosition,goalX:ne.goalX,goalY:ne.goalY,barHeight:J,barWidth:K});he&&X.add(he),u=ne.y,c=ne.x,U.push(c),F.push(u);var Te=s.barHelpers.getPathFillColor(n,x,ee,L),Pe="",_e=a.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(s.barHelpers.arrBorderRadius[L][ee]==="bottom"&&a.globals.series[L][ee]>0||s.barHelpers.arrBorderRadius[L][ee]==="top"&&a.globals.series[L][ee]<0)&&(Pe=_e),V=s.renderSeries(Bt(Bt({realIndex:L,pathFill:Te.color},Te.useRangeColor?{lineFill:Te.color}:{}),{},{j:ee,i:x,columnGroupIndex:k,pathFrom:ne.pathFrom,pathTo:ne.pathTo,strokeWidth:se,elSeries:V,x:c,y:u,series:n,barHeight:J,barWidth:K,elDataLabelsWrap:W,elGoalsMarkers:X,type:"bar",visibleSeries:k,classes:Pe}))}a.globals.seriesXvalues[L]=U,a.globals.seriesYvalues[L]=F,s.groupCtx.prevY.push(s.groupCtx.yArrj),s.groupCtx.prevYF.push(s.groupCtx.yArrjF),s.groupCtx.prevYVal.push(s.groupCtx.yArrjVal),s.groupCtx.prevX.push(s.groupCtx.xArrj),s.groupCtx.prevXF.push(s.groupCtx.xArrjF),s.groupCtx.prevXVal.push(s.groupCtx.xArrjVal),l.add(V)},d=0,A=0;d<n.length;d++,A++)h(d,A);return l}},{key:"initialPositions",value:function(n,r,s,a,o,l,c){var u,h,d=this.w;if(this.isHorizontal){a=d.globals.gridHeight/d.globals.dataPoints;var A=d.config.plotOptions.bar.barHeight;u=String(A).indexOf("%")===-1?parseInt(A,10):a*parseInt(A,10)/100,l=d.globals.padHorizontal+(this.isReversed?d.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),r=(a-u)/2}else{h=s=d.globals.gridWidth/d.globals.dataPoints;var x=d.config.plotOptions.bar.columnWidth;d.globals.isXNumeric&&d.globals.dataPoints>1?h=(s=d.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(x).indexOf("%")===-1?h=parseInt(x,10):h*=parseInt(x,10)/100,o=this.isReversed?this.baseLineY[c]:d.globals.gridHeight-this.baseLineY[c],n=d.globals.padHorizontal+(s-h)/2}var _=d.globals.barGroups.length||1;return{x:n,y:r,yDivision:a,xDivision:s,barHeight:u/_,barWidth:h/_,zeroH:o,zeroW:l}}},{key:"drawStackedBarPaths",value:function(n){for(var r,s=n.indexes,a=n.barHeight,o=n.strokeWidth,l=n.zeroW,c=n.x,u=n.y,h=n.columnGroupIndex,d=n.seriesGroup,A=n.yDivision,x=n.elSeries,_=this.w,S=u+h*a,w=s.i,C=s.j,P=s.realIndex,L=s.translationsIndex,D=0,B=0;B<this.groupCtx.prevXF.length;B++)D+=this.groupCtx.prevXF[B][C];var k=w;if(_.config.series[P].name&&(k=d.indexOf(_.config.series[P].name)),k>0){var U=l;this.groupCtx.prevXVal[k-1][C]<0?U=this.series[w][C]>=0?this.groupCtx.prevX[k-1][C]+D-2*(this.isReversed?D:0):this.groupCtx.prevX[k-1][C]:this.groupCtx.prevXVal[k-1][C]>=0&&(U=this.series[w][C]>=0?this.groupCtx.prevX[k-1][C]:this.groupCtx.prevX[k-1][C]-D+2*(this.isReversed?D:0)),r=U}else r=l;c=this.series[w][C]===null?r:r+this.series[w][C]/this.invertedYRatio-2*(this.isReversed?this.series[w][C]/this.invertedYRatio:0);var F=this.barHelpers.getBarpaths({barYPosition:S,barHeight:a,x1:r,x2:c,strokeWidth:o,isReversed:this.isReversed,series:this.series,realIndex:s.realIndex,seriesGroup:d,i:w,j:C,w:_});return this.barHelpers.barBackground({j:C,i:w,y1:S,y2:a,elSeries:x}),u+=A,{pathTo:F.pathTo,pathFrom:F.pathFrom,goalX:this.barHelpers.getGoalValues("x",l,null,w,C,L),barXPosition:r,barYPosition:S,x:c,y:u}}},{key:"drawStackedColumnPaths",value:function(n){var r=n.indexes,s=n.x,a=n.y,o=n.xDivision,l=n.barWidth,c=n.zeroH,u=n.columnGroupIndex,h=n.seriesGroup,d=n.elSeries,A=this.w,x=r.i,_=r.j,S=r.bc,w=r.realIndex,C=r.translationsIndex;if(A.globals.isXNumeric){var P=A.globals.seriesX[w][_];P||(P=0),s=(P-A.globals.minX)/this.xRatio-l/2*A.globals.barGroups.length}for(var L,D=s+u*l,B=0,k=0;k<this.groupCtx.prevYF.length;k++)B+=isNaN(this.groupCtx.prevYF[k][_])?0:this.groupCtx.prevYF[k][_];var U=x;if(h&&(U=h.indexOf(A.globals.seriesNames[w])),U>0&&!A.globals.isXNumeric||U>0&&A.globals.isXNumeric&&A.globals.seriesX[w-1][_]===A.globals.seriesX[w][_]){var F,z,V,W=Math.min(this.yRatio.length+1,w+1);if(this.groupCtx.prevY[U-1]!==void 0&&this.groupCtx.prevY[U-1].length)for(var X=1;X<W;X++){var J;if(!isNaN((J=this.groupCtx.prevY[U-X])===null||J===void 0?void 0:J[_])){V=this.groupCtx.prevY[U-X][_];break}}for(var K=1;K<W;K++){var Y,ee;if(((Y=this.groupCtx.prevYVal[U-K])===null||Y===void 0?void 0:Y[_])<0){z=this.series[x][_]>=0?V-B+2*(this.isReversed?B:0):V;break}if(((ee=this.groupCtx.prevYVal[U-K])===null||ee===void 0?void 0:ee[_])>=0){z=this.series[x][_]>=0?V:V+B-2*(this.isReversed?B:0);break}}z===void 0&&(z=A.globals.gridHeight),L=(F=this.groupCtx.prevYF[0])!==null&&F!==void 0&&F.every(function(fe){return fe===0})&&this.groupCtx.prevYF.slice(1,U).every(function(fe){return fe.every(function(ne){return isNaN(ne)})})?c:z}else L=c;a=this.series[x][_]?L-this.series[x][_]/this.yRatio[C]+2*(this.isReversed?this.series[x][_]/this.yRatio[C]:0):L;var se=this.barHelpers.getColumnPaths({barXPosition:D,barWidth:l,y1:L,y2:a,yRatio:this.yRatio[C],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:h,realIndex:r.realIndex,i:x,j:_,w:A});return this.barHelpers.barBackground({bc:S,j:_,i:x,x1:D,x2:l,elSeries:d}),{pathTo:se.pathTo,pathFrom:se.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,c,x,_),barXPosition:D,x:A.globals.isXNumeric?s:s+o,y:a}}}]),t}(),GC=function(i){_1(t,Xg);var e=b1(t);function t(){return Kt(this,t),e.apply(this,arguments)}return Jt(t,[{key:"draw",value:function(n,r,s){var a=this,o=this.w,l=new yt(this.ctx),c=o.globals.comboCharts?r:o.config.chart.type,u=new Nc(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=o.config.plotOptions.bar.horizontal,this.isOHLC=this.candlestickOptions&&this.candlestickOptions.type==="ohlc";var h=new ls(this.ctx,o);n=h.getLogSeries(n),this.series=n,this.yRatio=h.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n);for(var d=l.group({class:"apexcharts-".concat(c,"-series apexcharts-plot-series")}),A=function(_){a.isBoxPlot=o.config.chart.type==="boxPlot"||o.config.series[_].type==="boxPlot";var S,w,C,P,L=void 0,D=void 0,B=[],k=[],U=o.globals.comboCharts?s[_]:_,F=a.barHelpers.getGroupIndex(U).columnGroupIndex,z=l.group({class:"apexcharts-series",seriesName:Ne.escapeString(o.globals.seriesNames[U]),rel:_+1,"data:realIndex":U});a.ctx.series.addCollapsedClassToSeries(z,U),n[_].length>0&&(a.visibleI=a.visibleI+1);var V,W,X=0;a.yRatio.length>1&&(a.yaxisIndex=o.globals.seriesYAxisReverseMap[U][0],X=U);var J=a.barHelpers.initialPositions(U);D=J.y,V=J.barHeight,w=J.yDivision,P=J.zeroW,L=J.x,W=J.barWidth,S=J.xDivision,C=J.zeroH,k.push(L+W/2);for(var K=l.group({class:"apexcharts-datalabels","data:realIndex":U}),Y=l.group({class:"apexcharts-bar-goals-markers"}),ee=function(fe){var ne=a.barHelpers.getStrokeWidth(_,fe,U),he=null,Te={indexes:{i:_,j:fe,realIndex:U,translationsIndex:X},x:L,y:D,strokeWidth:ne,elSeries:z};he=a.isHorizontal?a.drawHorizontalBoxPaths(Bt(Bt({},Te),{},{yDivision:w,barHeight:V,zeroW:P})):a.drawVerticalBoxPaths(Bt(Bt({},Te),{},{xDivision:S,barWidth:W,zeroH:C})),D=he.y,L=he.x;var Pe=a.barHelpers.drawGoalLine({barXPosition:he.barXPosition,barYPosition:he.barYPosition,goalX:he.goalX,goalY:he.goalY,barHeight:V,barWidth:W});Pe&&Y.add(Pe),fe>0&&k.push(L+W/2),B.push(D),he.pathTo.forEach(function(_e,Ie){var Ve=!a.isBoxPlot&&a.candlestickOptions.wick.useFillColor?he.color[Ie]:o.globals.stroke.colors[_],$e=u.fillPath({seriesNumber:U,dataPointIndex:fe,color:he.color[Ie],value:n[_][fe]});a.renderSeries({realIndex:U,pathFill:$e,lineFill:Ve,j:fe,i:_,pathFrom:he.pathFrom,pathTo:_e,strokeWidth:ne,elSeries:z,x:L,y:D,series:n,columnGroupIndex:F,barHeight:V,barWidth:W,elDataLabelsWrap:K,elGoalsMarkers:Y,visibleSeries:a.visibleI,type:o.config.chart.type})})},se=0;se<o.globals.dataPoints;se++)ee(se);o.globals.seriesXvalues[U]=k,o.globals.seriesYvalues[U]=B,d.add(z)},x=0;x<n.length;x++)A(x);return d}},{key:"drawVerticalBoxPaths",value:function(n){var r=n.indexes,s=n.x;n.y;var a=n.xDivision,o=n.barWidth,l=n.zeroH,c=n.strokeWidth,u=this.w,h=new yt(this.ctx),d=r.i,A=r.j,x=u.config.plotOptions.candlestick.colors,_=this.boxOptions.colors,S=r.realIndex,w=function(se){return Array.isArray(se)?se[S]:se},C=w(x.upward),P=w(x.downward),L=this.yRatio[r.translationsIndex],D=this.getOHLCValue(S,A),B=l,k=l,U=D.o<D.c?[C]:[P];this.isBoxPlot&&(U=[w(_.lower),w(_.upper)]);var F=Math.min(D.o,D.c),z=Math.max(D.o,D.c),V=D.m;u.globals.isXNumeric&&(s=(u.globals.seriesX[S][A]-u.globals.minX)/this.xRatio-o/2);var W=s+o*this.visibleI;this.series[d][A]===void 0||this.series[d][A]===null?(F=l,z=l):(F=l-F/L,z=l-z/L,B=l-D.h/L,k=l-D.l/L,V=l-D.m/L);var X=h.move(W,l),J=h.move(W+o/2,F);if(u.globals.previousPaths.length>0&&(J=this.getPreviousPath(S,A,!0)),this.isOHLC){var K=W+o/2,Y=l-D.o/L,ee=l-D.c/L;X=[h.move(K,B)+h.line(K,k)+h.move(K,Y)+h.line(W,Y)+h.move(K,ee)+h.line(W+o,ee)]}else X=this.isBoxPlot?[h.move(W,F)+h.line(W+o/2,F)+h.line(W+o/2,B)+h.line(W+o/4,B)+h.line(W+o-o/4,B)+h.line(W+o/2,B)+h.line(W+o/2,F)+h.line(W+o,F)+h.line(W+o,V)+h.line(W,V)+h.line(W,F+c/2),h.move(W,V)+h.line(W+o,V)+h.line(W+o,z)+h.line(W+o/2,z)+h.line(W+o/2,k)+h.line(W+o-o/4,k)+h.line(W+o/4,k)+h.line(W+o/2,k)+h.line(W+o/2,z)+h.line(W,z)+h.line(W,V)+"z"]:[h.move(W,z)+h.line(W+o/2,z)+h.line(W+o/2,B)+h.line(W+o/2,z)+h.line(W+o,z)+h.line(W+o,F)+h.line(W+o/2,F)+h.line(W+o/2,k)+h.line(W+o/2,F)+h.line(W,F)+h.line(W,z-c/2)];return J+=h.move(W,F),u.globals.isXNumeric||(s+=a),{pathTo:X,pathFrom:J,x:s,y:z,goalY:this.barHelpers.getGoalValues("y",null,l,d,A,r.translationsIndex),barXPosition:W,color:U}}},{key:"drawHorizontalBoxPaths",value:function(n){var r=n.indexes;n.x;var s=n.y,a=n.yDivision,o=n.barHeight,l=n.zeroW,c=n.strokeWidth,u=this.w,h=new yt(this.ctx),d=r.i,A=r.j,x=this.boxOptions.colors.lower;this.isBoxPlot&&(x=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var _=this.invertedYRatio,S=r.realIndex,w=this.getOHLCValue(S,A),C=l,P=l,L=Math.min(w.o,w.c),D=Math.max(w.o,w.c),B=w.m;u.globals.isXNumeric&&(s=(u.globals.seriesX[S][A]-u.globals.minX)/this.invertedXRatio-o/2);var k=s+o*this.visibleI;this.series[d][A]===void 0||this.series[d][A]===null?(L=l,D=l):(L=l+L/_,D=l+D/_,C=l+w.h/_,P=l+w.l/_,B=l+w.m/_);var U=h.move(l,k),F=h.move(L,k+o/2);return u.globals.previousPaths.length>0&&(F=this.getPreviousPath(S,A,!0)),U=[h.move(L,k)+h.line(L,k+o/2)+h.line(C,k+o/2)+h.line(C,k+o/2-o/4)+h.line(C,k+o/2+o/4)+h.line(C,k+o/2)+h.line(L,k+o/2)+h.line(L,k+o)+h.line(B,k+o)+h.line(B,k)+h.line(L+c/2,k),h.move(B,k)+h.line(B,k+o)+h.line(D,k+o)+h.line(D,k+o/2)+h.line(P,k+o/2)+h.line(P,k+o-o/4)+h.line(P,k+o/4)+h.line(P,k+o/2)+h.line(D,k+o/2)+h.line(D,k)+h.line(B,k)+"z"],F+=h.move(L,k),u.globals.isXNumeric||(s+=a),{pathTo:U,pathFrom:F,x:D,y:s,goalX:this.barHelpers.getGoalValues("x",l,null,d,A),barYPosition:k,color:x}}},{key:"getOHLCValue",value:function(n,r){var s=this.w,a=new ls(this.ctx,s),o=a.getLogValAtSeriesIndex(s.globals.seriesCandleH[n][r],n),l=a.getLogValAtSeriesIndex(s.globals.seriesCandleO[n][r],n),c=a.getLogValAtSeriesIndex(s.globals.seriesCandleM[n][r],n),u=a.getLogValAtSeriesIndex(s.globals.seriesCandleC[n][r],n),h=a.getLogValAtSeriesIndex(s.globals.seriesCandleL[n][r],n);return{o:this.isBoxPlot?o:l,h:this.isBoxPlot?l:o,m:c,l:this.isBoxPlot?u:h,c:this.isBoxPlot?h:u}}}]),t}(),pX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,n=e.config.plotOptions[e.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map(function(r,s){r.from<=0&&(t=!0)}),t}},{key:"getShadeColor",value:function(e,t,n,r){var s=this.w,a=1,o=s.config.plotOptions[e].shadeIntensity,l=this.determineColor(e,t,n);s.globals.hasNegs||r?a=s.config.plotOptions[e].reverseNegativeShade?l.percent<0?l.percent/100*(1.25*o):(1-l.percent/100)*(1.25*o):l.percent<=0?1-(1+l.percent/100)*o:(1-l.percent/100)*o:(a=1-l.percent/100,e==="treemap"&&(a=(1-l.percent/100)*(1.25*o)));var c=l.color,u=new Ne;if(s.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var h=u.shadeColor(-1*a,l.color);c=Ne.hexToRgba(Ne.isColorHex(h)?h:Ne.rgb2hex(h),s.config.fill.opacity)}else{var d=u.shadeColor(a,l.color);c=Ne.hexToRgba(Ne.isColorHex(d)?d:Ne.rgb2hex(d),s.config.fill.opacity)}return{color:c,colorProps:l}}},{key:"determineColor",value:function(e,t,n){var r=this.w,s=r.globals.series[t][n],a=r.config.plotOptions[e],o=a.colorScale.inverse?n:t;a.distributed&&r.config.chart.type==="treemap"&&(o=n);var l=r.globals.colors[o],c=null,u=Math.min.apply(Math,Us(r.globals.series[t])),h=Math.max.apply(Math,Us(r.globals.series[t]));a.distributed||e!=="heatmap"||(u=r.globals.minY,h=r.globals.maxY),a.colorScale.min!==void 0&&(u=a.colorScale.min<r.globals.minY?a.colorScale.min:r.globals.minY,h=a.colorScale.max>r.globals.maxY?a.colorScale.max:r.globals.maxY);var d=Math.abs(h)+Math.abs(u),A=100*s/(d===0?d-1e-6:d);return a.colorScale.ranges.length>0&&a.colorScale.ranges.map(function(x,_){if(s>=x.from&&s<=x.to){l=x.color,c=x.foreColor?x.foreColor:null,u=x.from,h=x.to;var S=Math.abs(h)+Math.abs(u);A=100*s/(S===0?S-1e-6:S)}}),{color:l,foreColor:c,percent:A}}},{key:"calculateDataLabels",value:function(e){var t=e.text,n=e.x,r=e.y,s=e.i,a=e.j,o=e.colorProps,l=e.fontSize,c=this.w.config.dataLabels,u=new yt(this.ctx),h=new jg(this.ctx),d=null;if(c.enabled){d=u.group({class:"apexcharts-data-labels"});var A=c.offsetX,x=c.offsetY,_=n+A,S=r+parseFloat(c.style.fontSize)/3+x;h.plotDataLabelsText({x:_,y:S,text:t,i:s,j:a,color:o.foreColor,parent:d,fontSize:l,dataLabelsConfig:c})}return d}},{key:"addListeners",value:function(e){var t=new yt(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),i}(),VTe=function(){function i(e,t){Kt(this,i),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new pX(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Jt(i,[{key:"draw",value:function(e){var t=this.w,n=new yt(this.ctx),r=n.group({class:"apexcharts-heatmap"});r.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var s=t.globals.gridWidth/t.globals.dataPoints,a=t.globals.gridHeight/t.globals.series.length,o=0,l=!1;this.negRange=this.helpers.checkColorRange();var c=e.slice();t.config.yaxis[0].reversed&&(l=!0,c.reverse());for(var u=l?0:c.length-1;l?u<c.length:u>=0;l?u++:u--){var h=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Ne.escapeString(t.globals.seriesNames[u]),rel:u+1,"data:realIndex":u});if(this.ctx.series.addCollapsedClassToSeries(h,u),t.config.chart.dropShadow.enabled){var d=t.config.chart.dropShadow;new ya(this.ctx).dropShadow(h,d,u)}for(var A=0,x=t.config.plotOptions.heatmap.shadeIntensity,_=0,S=0;S<t.globals.dataPoints;S++)if(t.globals.seriesX.length&&!t.globals.allSeriesHasEqualX&&t.globals.minX+t.globals.minXDiff*S<t.globals.seriesX[u][_])A+=s;else{if(_>=c[u].length)break;var w=this.helpers.getShadeColor(t.config.chart.type,u,_,this.negRange),C=w.color,P=w.colorProps;t.config.fill.type==="image"&&(C=new Nc(this.ctx).fillPath({seriesNumber:u,dataPointIndex:_,opacity:t.globals.hasNegs?P.percent<0?1-(1+P.percent/100):x+P.percent/100:P.percent/100,patternID:Ne.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:s,height:t.config.fill.image.height?t.config.fill.image.height:a}));var L=this.rectRadius,D=n.drawRect(A,o,s,a,L);if(D.attr({cx:A,cy:o}),D.node.classList.add("apexcharts-heatmap-rect"),h.add(D),D.attr({fill:C,i:u,index:u,j:_,val:e[u][_],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?C:t.globals.stroke.colors[0],color:C}),this.helpers.addListeners(D),t.config.chart.animations.enabled&&!t.globals.dataChanged){var B=1;t.globals.resized||(B=t.config.chart.animations.speed),this.animateHeatMap(D,A,o,s,a,B)}if(t.globals.dataChanged){var k=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){k=this.dynamicAnim.speed;var U=t.globals.previousPaths[u]&&t.globals.previousPaths[u][_]&&t.globals.previousPaths[u][_].color;U||(U="rgba(255, 255, 255, 0)"),this.animateHeatColor(D,Ne.isColorHex(U)?U:Ne.rgb2hex(U),Ne.isColorHex(C)?C:Ne.rgb2hex(C),k)}}var F=(0,t.config.dataLabels.formatter)(t.globals.series[u][_],{value:t.globals.series[u][_],seriesIndex:u,dataPointIndex:_,w:t}),z=this.helpers.calculateDataLabels({text:F,x:A+s/2,y:o+a/2,i:u,j:_,colorProps:P,series:c});z!==null&&h.add(z),A+=s,_++}o+=a,r.add(h)}var V=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?V.unshift(""):V.push(""),t.globals.yAxisScale[0].result=V,r}},{key:"animateHeatMap",value:function(e,t,n,r,s,a){var o=new pm(this.ctx);o.animateRect(e,{x:t+r/2,y:n+s/2,width:0,height:0},{x:t,y:n,width:r,height:s},a,function(){o.animationCompleted(e)})}},{key:"animateHeatColor",value:function(e,t,n,r){e.attr({fill:t}).animate(r).attr({fill:n})}}]),i}(),AX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"drawYAxisTexts",value:function(e,t,n,r){var s=this.w,a=s.config.yaxis[0],o=s.globals.yLabelFormatters[0];return new yt(this.ctx).drawText({x:e+a.labels.offsetX,y:t+a.labels.offsetY,text:o(r,n),textAnchor:"middle",fontSize:a.labels.style.fontSize,fontFamily:a.labels.style.fontFamily,foreColor:Array.isArray(a.labels.style.colors)?a.labels.style.colors[n]:a.labels.style.colors})}}]),i}(),gX=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var n=t.config.plotOptions.pie.customScale,r=t.globals.gridWidth/2,s=t.globals.gridHeight/2;this.translateX=r-r*n,this.translateY=s-s*n,this.dataLabelsGroup=new yt(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Jt(i,[{key:"draw",value:function(e){var t=this,n=this.w,r=new yt(this.ctx),s=r.group({class:"apexcharts-pie"});if(n.globals.noData)return s;for(var a=0,o=0;o<e.length;o++)a+=Ne.negToZero(e[o]);var l=[],c=r.group();a===0&&(a=1e-5),e.forEach(function(P){t.maxY=Math.max(t.maxY,P)}),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),n.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(s);for(var u=0;u<e.length;u++){var h=this.fullAngle*Ne.negToZero(e[u])/a;l.push(h),this.chartType==="polarArea"?(l[u]=this.fullAngle/e.length,this.sliceSizes.push(n.globals.radialSize*e[u]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var d,A=0,x=0;x<n.globals.previousPaths.length;x++)A+=Ne.negToZero(n.globals.previousPaths[x]);for(var _=0;_<n.globals.previousPaths.length;_++)d=this.fullAngle*Ne.negToZero(n.globals.previousPaths[_])/A,this.prevSectorAngleArr.push(d)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var S=r.drawCircle(this.donutSize);S.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),c.add(S)}var w=this.drawArcs(l,e);if(this.sliceLabels.forEach(function(P){w.add(P)}),c.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),c.add(w),s.add(c),this.donutDataLabels.show){var C=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});s.add(C)}return n.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(s),s}},{key:"drawArcs",value:function(e,t){var n=this.w,r=new ya(this.ctx),s=new yt(this.ctx),a=new Nc(this.ctx),o=s.group({class:"apexcharts-slices"}),l=this.initialAngle,c=this.initialAngle,u=this.initialAngle,h=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var d=0;d<e.length;d++){var A=s.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Ne.escapeString(n.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});o.add(A),c=h,u=(l=u)+e[d],h=c+this.prevSectorAngleArr[d];var x=u<l?this.fullAngle+u-l:u-l,_=a.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:t[d]}),S=this.getChangedPath(c,h),w=s.drawPath({d:S,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:_,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(w.attr({index:0,j:d}),r.setSelectionFilter(w,0,d),n.config.chart.dropShadow.enabled){var C=n.config.chart.dropShadow;r.dropShadow(w,C,d)}this.addListeners(w,this.donutDataLabels),yt.setAttrs(w.node,{"data:angle":x,"data:startAngle":l,"data:strokeWidth":this.strokeWidth,"data:value":t[d]});var P={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?P=Ne.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(l+x/2)%this.fullAngle):this.chartType==="donut"&&(P=Ne.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(l+x/2)%this.fullAngle)),A.add(w);var L=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):((L=x/this.fullAngle*n.config.chart.animations.speed)===0&&(L=1),this.animDur=L+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(w,{size:this.sliceSizes[d],endAngle:u,startAngle:l,prevStartAngle:c,prevEndAngle:h,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(w,{size:this.sliceSizes[d],endAngle:u,startAngle:l,i:d,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:L}),n.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&w.node.addEventListener("mouseup",this.pieClicked.bind(this,d)),n.globals.selectedDataPoints[0]!==void 0&&n.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),n.config.dataLabels.enabled){var D=P.x,B=P.y,k=100*x/this.fullAngle+"%";if(x!==0&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[d]){var U=n.config.dataLabels.formatter;U!==void 0&&(k=U(n.globals.seriesPercent[d][0],{seriesIndex:d,w:n}));var F=n.globals.dataLabels.style.colors[d],z=s.group({class:"apexcharts-datalabels"}),V=s.drawText({x:D,y:B,text:k,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:F});if(z.add(V),n.config.dataLabels.dropShadow.enabled){var W=n.config.dataLabels.dropShadow;r.dropShadow(V,W)}V.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&n.globals.resized===!1&&(V.node.classList.add("apexcharts-pie-label-delay"),V.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(z)}}}return o}},{key:"addListeners",value:function(e,t){var n=new yt(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var n=this.w,r=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,s=r,a=t.startAngle,o=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(a=t.prevEndAngle,s=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===n.config.series.length-1&&(r+o>this.fullAngle?t.endAngle=t.endAngle-(r+o):r+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(r+o)))),r===this.fullAngle&&(r=this.fullAngle-.01),this.animateArc(e,a,o,r,s,t)}},{key:"animateArc",value:function(e,t,n,r,s,a){var o,l=this,c=this.w,u=new pm(this.ctx),h=a.size;(isNaN(t)||isNaN(s))&&(t=n,s=r,a.dur=0);var d=r,A=n,x=t<n?this.fullAngle+t-n:t-n;c.globals.dataChanged&&a.shouldSetPrevPaths&&a.prevEndAngle&&(o=l.getPiePath({me:l,startAngle:a.prevStartAngle,angle:a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle,size:h}),e.attr({d:o})),a.dur!==0?e.animate(a.dur,a.animBeginArr[a.i]).after(function(){l.chartType!=="pie"&&l.chartType!=="donut"&&l.chartType!=="polarArea"||this.animate(c.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":l.strokeWidth}),a.i===c.config.series.length-1&&u.animationCompleted(e)}).during(function(_){d=x+(r-x)*_,a.animateStartingPos&&(d=s+(r-s)*_,A=t-s+(n-(t-s))*_),o=l.getPiePath({me:l,startAngle:A,angle:d,size:h}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})}):(o=l.getPiePath({me:l,startAngle:A,angle:r,size:h}),a.isTrack||(c.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":l.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,n=this.w,r=this,s=r.sliceSizes[e]+(n.config.plotOptions.pie.expandOnClick?4:0),a=n.globals.dom.Paper.findOne(".apexcharts-".concat(r.chartType.toLowerCase(),"-slice-").concat(e));if(a.attr("data:pieClicked")!=="true"){var o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,function(h){h.setAttribute("data:pieClicked","false");var d=h.getAttribute("data:pathOrig");d&&h.setAttribute("d",d)}),n.globals.capturedDataPointIndex=e,a.attr("data:pieClicked","true");var l=parseInt(a.attr("data:startAngle"),10),c=parseInt(a.attr("data:angle"),10);t=r.getPiePath({me:r,startAngle:l,angle:c,size:s}),c!==360&&a.plot(t)}else{a.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(a.node,this.donutDataLabels);var u=a.attr("data:pathOrig");a.attr({d:u})}}},{key:"getChangedPath",value:function(e,t){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),n}},{key:"getPiePath",value:function(e){var t,n=e.me,r=e.startAngle,s=e.angle,a=e.size,o=new yt(this.ctx),l=r,c=Math.PI*(l-90)/180,u=s+r;Math.ceil(u)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(u=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(u)>this.fullAngle&&(u-=this.fullAngle);var h=Math.PI*(u-90)/180,d=n.centerX+a*Math.cos(c),A=n.centerY+a*Math.sin(c),x=n.centerX+a*Math.cos(h),_=n.centerY+a*Math.sin(h),S=Ne.polarToCartesian(n.centerX,n.centerY,n.donutSize,u),w=Ne.polarToCartesian(n.centerX,n.centerY,n.donutSize,l),C=s>180?1:0,P=["M",d,A,"A",a,a,0,C,1,x,_];return t=n.chartType==="donut"?[].concat(P,["L",S.x,S.y,"A",n.donutSize,n.donutSize,0,C,0,w.x,w.y,"L",d,A,"z"]).join(" "):n.chartType==="pie"||n.chartType==="polarArea"?[].concat(P,["L",n.centerX,n.centerY,"L",d,A]).join(" "):[].concat(P).join(" "),o.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,n=new cX(this.ctx),r=new yt(this.ctx),s=new AX(this.ctx),a=r.group(),o=r.group(),l=n.niceScale(0,Math.ceil(this.maxY),0),c=l.result.reverse(),u=l.result.length;this.maxY=l.niceMax;for(var h=t.globals.radialSize,d=h/(u-1),A=0;A<u-1;A++){var x=r.drawCircle(h);if(x.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var _=s.drawYAxisTexts(this.centerX,this.centerY-h+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,A,c[A]);o.add(_)}a.add(x),h-=d}this.drawSpokes(e),e.add(a),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t,n){var r=this.w,s=new yt(this.ctx),a=t.total.show;e.node.innerHTML="",e.node.style.opacity=n.opacity;var o,l,c=n.centerX,u=this.donutDataLabels.total.label?n.centerY:n.centerY-n.centerY/6;o=t.name.color===void 0?r.globals.colors[0]:t.name.color;var h=t.name.fontSize,d=t.name.fontFamily,A=t.name.fontWeight;l=t.value.color===void 0?r.config.chart.foreColor:t.value.color;var x=t.value.formatter,_="",S="";if(a?(o=t.total.color,h=t.total.fontSize,d=t.total.fontFamily,A=t.total.fontWeight,S=this.donutDataLabels.total.label?t.total.label:"",_=t.total.formatter(r)):r.globals.series.length===1&&(_=x(r.globals.series[0],r),S=r.globals.seriesNames[0]),S&&(S=t.name.formatter(S,t.total.show,r)),t.name.show){var w=s.drawText({x:c,y:u+parseFloat(t.name.offsetY),text:S,textAnchor:"middle",foreColor:o,fontSize:h,fontWeight:A,fontFamily:d});w.node.classList.add("apexcharts-datalabel-label"),e.add(w)}if(t.value.show){var C=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,P=s.drawText({x:c,y:u+C,text:_,textAnchor:"middle",foreColor:l,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});P.node.classList.add("apexcharts-datalabel-value"),e.add(P)}return e}},{key:"printInnerLabels",value:function(e,t,n,r){var s,a=this.w;r?s=e.name.color===void 0?a.globals.colors[parseInt(r.parentNode.getAttribute("rel"),10)-1]:e.name.color:a.globals.series.length>1&&e.total.show&&(s=e.total.color);var o=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),l=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,e.value.formatter)(n,a),r||typeof e.total.formatter!="function"||(n=e.total.formatter(a));var c=t===e.total.label;t=this.donutDataLabels.total.label?e.name.formatter(t,c,a):"",o!==null&&(o.textContent=t),l!==null&&(l.textContent=n),o!==null&&(o.style.fill=s)}},{key:"printDataLabelsInner",value:function(e,t){var n=this.w,r=e.getAttribute("data:value"),s=n.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(t,s,r,e);var a=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");a!==null&&(a.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,n=this.w,r=new yt(this.ctx),s=n.config.plotOptions.polarArea.spokes;if(s.strokeWidth!==0){for(var a=[],o=360/n.globals.series.length,l=0;l<n.globals.series.length;l++)a.push(Ne.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+o*l));a.forEach(function(c,u){var h=r.drawLine(c.x,c.y,t.centerX,t.centerY,Array.isArray(s.connectorColors)?s.connectorColors[u]:s.connectorColors);e.add(h)})}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),n=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(n)}}}]),i}(),HTe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new yt(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new ls(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Jt(i,[{key:"draw",value:function(e){var t=this,n=this.w,r=new Nc(this.ctx),s=[],a=new jg(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var o=n.globals.gridWidth/2,l=n.globals.gridHeight/2,c=o+n.config.plotOptions.radar.offsetX,u=l+n.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(u||0,")")}),d=[],A=null,x=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach(function(S,w){var C=S.length===n.globals.dataPoints,P=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":C,seriesName:Ne.escapeString(n.globals.seriesNames[w]),rel:w+1,"data:realIndex":w});t.dataRadiusOfPercent[w]=[],t.dataRadius[w]=[],t.angleArr[w]=[],S.forEach(function(X,J){var K=Math.abs(t.maxValue-t.minValue);X-=t.minValue,t.isLog&&(X=t.coreUtils.getLogVal(t.logBase,X,0)),t.dataRadiusOfPercent[w][J]=X/K,t.dataRadius[w][J]=t.dataRadiusOfPercent[w][J]*t.size,t.angleArr[w][J]=J*t.disAngle}),d=t.getDataPointsPos(t.dataRadius[w],t.angleArr[w]);var L=t.createPaths(d,{x:0,y:0});A=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),x=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":w}),n.globals.delayedElements.push({el:A.node,index:w});var D={i:w,realIndex:w,animationDelay:w,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[w],strokeLineCap:n.config.stroke.lineCap},B=null;n.globals.previousPaths.length>0&&(B=t.getPreviousPath(w));for(var k=0;k<L.linePathsTo.length;k++){var U=t.graphics.renderPaths(Bt(Bt({},D),{},{pathFrom:B===null?L.linePathsFrom[k]:B,pathTo:L.linePathsTo[k],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[w]:t.strokeWidth,fill:"none",drawShadow:!1}));P.add(U);var F=r.fillPath({seriesNumber:w}),z=t.graphics.renderPaths(Bt(Bt({},D),{},{pathFrom:B===null?L.areaPathsFrom[k]:B,pathTo:L.areaPathsTo[k],strokeWidth:0,fill:F,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var V=new ya(t.ctx),W=n.config.chart.dropShadow;V.dropShadow(z,Object.assign({},W,{noUserSpaceOnUse:!0}),w)}P.add(z)}S.forEach(function(X,J){var K=new vm(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:w,dataPointIndex:J}),Y=t.graphics.drawMarker(d[J].x,d[J].y,K);Y.attr("rel",J),Y.attr("j",J),Y.attr("index",w),Y.node.setAttribute("default-marker-size",K.pSize);var ee=t.graphics.group({class:"apexcharts-series-markers"});ee&&ee.add(Y),A.add(ee),P.add(A);var se=n.config.dataLabels;if(se.enabled){var fe=se.formatter(n.globals.series[w][J],{seriesIndex:w,dataPointIndex:J,w:n});a.plotDataLabelsText({x:d[J].x,y:d[J].y,text:fe,textAnchor:"middle",i:w,j:w,parent:x,offsetCorrection:!1,dataLabelsConfig:Bt({},se)})}P.add(x)}),s.push(P)}),this.drawPolygons({parent:h}),n.config.xaxis.labels.show){var _=this.drawXAxisTexts();h.add(_)}return s.forEach(function(S){h.add(S)}),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,n=this.w,r=e.parent,s=new AX(this.ctx),a=n.globals.yAxisScale[0].result.reverse(),o=a.length,l=[],c=this.size/(o-1),u=0;u<o;u++)l[u]=c*u;l.reverse();var h=[],d=[];l.forEach(function(A,x){var _=Ne.getPolygonPos(A,t.dataPointsLen),S="";_.forEach(function(w,C){if(x===0){var P=t.graphics.drawLine(w.x,w.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[C]:t.polygons.connectorColors);d.push(P)}C===0&&t.yaxisLabelsTextsPos.push({x:w.x,y:w.y}),S+=w.x+","+w.y+" "}),h.push(S)}),h.forEach(function(A,x){var _=t.polygons.strokeColors,S=t.polygons.strokeWidth,w=t.graphics.drawPolygon(A,Array.isArray(_)?_[x]:_,Array.isArray(S)?S[x]:S,n.globals.radarPolygons.fill.colors[x]);r.add(w)}),d.forEach(function(A){r.add(A)}),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(A,x){var _=s.drawYAxisTexts(A.x,A.y,x,a[x]);t.yaxisLabels.add(_)})}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,n=t.config.xaxis.labels,r=this.graphics.group({class:"apexcharts-xaxis"}),s=Ne.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach(function(a,o){var l=t.config.xaxis.labels.formatter,c=new jg(e.ctx);if(s[o]){var u=e.getTextPos(s[o],e.size),h=l(a,{seriesIndex:-1,dataPointIndex:o,w:t});c.plotDataLabelsText({x:u.newX,y:u.newY,text:h,textAnchor:u.textAnchor,i:o,j:o,parent:r,className:"apexcharts-xaxis-label",color:Array.isArray(n.style.colors)&&n.style.colors[o]?n.style.colors[o]:"#a8a8a8",dataLabelsConfig:Bt({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1}).on("click",function(d){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var A=Object.assign({},t,{labelIndex:o});t.config.chart.events.xAxisLabelClick(d,e.ctx,A)}})}}),r}},{key:"createPaths",value:function(e,t){var n=this,r=[],s=[],a=[],o=[];if(e.length){s=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var l=this.graphics.move(e[0].x,e[0].y),c=this.graphics.move(e[0].x,e[0].y);e.forEach(function(u,h){l+=n.graphics.line(u.x,u.y),c+=n.graphics.line(u.x,u.y),h===e.length-1&&(l+="Z",c+="Z")}),r.push(l),a.push(c)}return{linePathsFrom:s,linePathsTo:r,areaPathsFrom:o,areaPathsTo:a}}},{key:"getTextPos",value:function(e,t){var n="middle",r=e.x,s=e.y;return Math.abs(e.x)>=10?e.x>0?(n="start",r+=10):e.x<0&&(n="end",r-=10):n="middle",Math.abs(e.y)>=t-10&&(e.y<0?s-=10:e.y>0&&(s+=10)),{textAnchor:n,newX:r,newY:s}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,n=null,r=0;r<t.globals.previousPaths.length;r++){var s=t.globals.previousPaths[r];s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[r].paths[0]!==void 0&&(n=t.globals.previousPaths[r].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var r=[],s=0;s<n;s++){var a={};a.x=e[s]*Math.sin(t[s]),a.y=-e[s]*Math.cos(t[s]),r.push(a)}return r}}]),i}(),qTe=function(i){_1(t,gX);var e=b1(t);function t(n){var r;Kt(this,t),(r=e.call(this,n)).ctx=n,r.w=n.w,r.animBeginArr=[0],r.animDur=0;var s=r.w;return r.startAngle=s.config.plotOptions.radialBar.startAngle,r.endAngle=s.config.plotOptions.radialBar.endAngle,r.totalAngle=Math.abs(s.config.plotOptions.radialBar.endAngle-s.config.plotOptions.radialBar.startAngle),r.trackStartAngle=s.config.plotOptions.radialBar.track.startAngle,r.trackEndAngle=s.config.plotOptions.radialBar.track.endAngle,r.barLabels=r.w.config.plotOptions.radialBar.barLabels,r.donutDataLabels=r.w.config.plotOptions.radialBar.dataLabels,r.radialDataLabels=r.donutDataLabels,r.trackStartAngle||(r.trackStartAngle=r.startAngle),r.trackEndAngle||(r.trackEndAngle=r.endAngle),r.endAngle===360&&(r.endAngle=359.99),r.margin=parseInt(s.config.plotOptions.radialBar.track.margin,10),r.onBarLabelClick=r.onBarLabelClick.bind(Rj(r)),r}return Jt(t,[{key:"draw",value:function(n){var r=this.w,s=new yt(this.ctx),a=s.group({class:"apexcharts-radialbar"});if(r.globals.noData)return a;var o=s.group(),l=this.defaultSize/2,c=r.globals.gridWidth/2,u=this.defaultSize/2.05;r.config.chart.sparkline.enabled||(u=u-r.config.stroke.width-r.config.chart.dropShadow.blur);var h=r.globals.fill.colors;if(r.config.plotOptions.radialBar.track.show){var d=this.drawTracks({size:u,centerX:c,centerY:l,colorArr:h,series:n});o.add(d)}var A=this.drawArcs({size:u,centerX:c,centerY:l,colorArr:h,series:n}),x=360;r.config.plotOptions.radialBar.startAngle<0&&(x=this.totalAngle);var _=(360-x)/360;if(r.globals.radialSize=u-u*_,this.radialDataLabels.value.show){var S=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);r.globals.radialSize+=S*_}return o.add(A.g),r.config.plotOptions.radialBar.hollow.position==="front"&&(A.g.add(A.elHollow),A.dataLabels&&A.g.add(A.dataLabels)),a.add(o),a}},{key:"drawTracks",value:function(n){var r=this.w,s=new yt(this.ctx),a=s.group({class:"apexcharts-tracks"}),o=new ya(this.ctx),l=new Nc(this.ctx),c=this.getStrokeWidth(n);n.size=n.size-c/2;for(var u=0;u<n.series.length;u++){var h=s.group({class:"apexcharts-radialbar-track apexcharts-track"});a.add(h),h.attr({rel:u+1}),n.size=n.size-c-this.margin;var d=r.config.plotOptions.radialBar.track,A=l.fillPath({seriesNumber:0,size:n.size,fillColors:Array.isArray(d.background)?d.background[u]:d.background,solid:!0}),x=this.trackStartAngle,_=this.trackEndAngle;Math.abs(_)+Math.abs(x)>=360&&(_=360-Math.abs(this.startAngle)-.1);var S=s.drawPath({d:"",stroke:A,strokeWidth:c*parseInt(d.strokeWidth,10)/100,fill:"none",strokeOpacity:d.opacity,classes:"apexcharts-radialbar-area"});if(d.dropShadow.enabled){var w=d.dropShadow;o.dropShadow(S,w)}h.add(S),S.attr("id","apexcharts-radialbarTrack-"+u),this.animatePaths(S,{centerX:n.centerX,centerY:n.centerY,endAngle:_,startAngle:x,size:n.size,i:u,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return a}},{key:"drawArcs",value:function(n){var r=this.w,s=new yt(this.ctx),a=new Nc(this.ctx),o=new ya(this.ctx),l=s.group(),c=this.getStrokeWidth(n);n.size=n.size-c/2;var u=r.config.plotOptions.radialBar.hollow.background,h=n.size-c*n.series.length-this.margin*n.series.length-c*parseInt(r.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,d=h-r.config.plotOptions.radialBar.hollow.margin;r.config.plotOptions.radialBar.hollow.image!==void 0&&(u=this.drawHollowImage(n,l,h,u));var A=this.drawHollow({size:d,centerX:n.centerX,centerY:n.centerY,fill:u||"transparent"});if(r.config.plotOptions.radialBar.hollow.dropShadow.enabled){var x=r.config.plotOptions.radialBar.hollow.dropShadow;o.dropShadow(A,x)}var _=1;!this.radialDataLabels.total.show&&r.globals.series.length>1&&(_=0);var S=null;if(this.radialDataLabels.show){var w=r.globals.dom.Paper.findOne(".apexcharts-datalabels-group");S=this.renderInnerDataLabels(w,this.radialDataLabels,{hollowSize:h,centerX:n.centerX,centerY:n.centerY,opacity:_})}r.config.plotOptions.radialBar.hollow.position==="back"&&(l.add(A),S&&l.add(S));var C=!1;r.config.plotOptions.radialBar.inverseOrder&&(C=!0);for(var P=C?n.series.length-1:0;C?P>=0:P<n.series.length;C?P--:P++){var L=s.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Ne.escapeString(r.globals.seriesNames[P])});l.add(L),L.attr({rel:P+1,"data:realIndex":P}),this.ctx.series.addCollapsedClassToSeries(L,P),n.size=n.size-c-this.margin;var D=a.fillPath({seriesNumber:P,size:n.size,value:n.series[P]}),B=this.startAngle,k=void 0,U=Ne.negToZero(n.series[P]>100?100:n.series[P])/100,F=Math.round(this.totalAngle*U)+this.startAngle,z=void 0;r.globals.dataChanged&&(k=this.startAngle,z=Math.round(this.totalAngle*Ne.negToZero(r.globals.previousPaths[P])/100)+k),Math.abs(F)+Math.abs(B)>360&&(F-=.01),Math.abs(z)+Math.abs(k)>360&&(z-=.01);var V=F-B,W=Array.isArray(r.config.stroke.dashArray)?r.config.stroke.dashArray[P]:r.config.stroke.dashArray,X=s.drawPath({d:"",stroke:D,strokeWidth:c,fill:"none",fillOpacity:r.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+P,strokeDashArray:W});if(yt.setAttrs(X.node,{"data:angle":V,"data:value":n.series[P]}),r.config.chart.dropShadow.enabled){var J=r.config.chart.dropShadow;o.dropShadow(X,J,P)}if(o.setSelectionFilter(X,0,P),this.addListeners(X,this.radialDataLabels),L.add(X),X.attr({index:0,j:P}),this.barLabels.enabled){var K=Ne.polarToCartesian(n.centerX,n.centerY,n.size,B),Y=this.barLabels.formatter(r.globals.seriesNames[P],{seriesIndex:P,w:r}),ee=["apexcharts-radialbar-label"];this.barLabels.onClick||ee.push("apexcharts-no-click");var se=this.barLabels.useSeriesColors?r.globals.colors[P]:r.config.chart.foreColor;se||(se=r.config.chart.foreColor);var fe=K.x+this.barLabels.offsetX,ne=K.y+this.barLabels.offsetY,he=s.drawText({x:fe,y:ne,text:Y,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:se,cssClass:ee.join(" ")});he.on("click",this.onBarLabelClick),he.attr({rel:P+1}),B!==0&&he.attr({"transform-origin":"".concat(fe," ").concat(ne),transform:"rotate(".concat(B," 0 0)")}),L.add(he)}var Te=0;!this.initialAnim||r.globals.resized||r.globals.dataChanged||(Te=r.config.chart.animations.speed),r.globals.dataChanged&&(Te=r.config.chart.animations.dynamicAnimation.speed),this.animDur=Te/(1.2*n.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(X,{centerX:n.centerX,centerY:n.centerY,endAngle:F,startAngle:B,prevEndAngle:z,prevStartAngle:k,size:n.size,i:P,totalItems:2,animBeginArr:this.animBeginArr,dur:Te,shouldSetPrevPaths:!0})}return{g:l,elHollow:A,dataLabels:S}}},{key:"drawHollow",value:function(n){var r=new yt(this.ctx).drawCircle(2*n.size);return r.attr({class:"apexcharts-radialbar-hollow",cx:n.centerX,cy:n.centerY,r:n.size,fill:n.fill}),r}},{key:"drawHollowImage",value:function(n,r,s,a){var o=this.w,l=new Nc(this.ctx),c=Ne.randomId(),u=o.config.plotOptions.radialBar.hollow.image;if(o.config.plotOptions.radialBar.hollow.imageClipped)l.clippedImgArea({width:s,height:s,image:u,patternID:"pattern".concat(o.globals.cuid).concat(c)}),a="url(#pattern".concat(o.globals.cuid).concat(c,")");else{var h=o.config.plotOptions.radialBar.hollow.imageWidth,d=o.config.plotOptions.radialBar.hollow.imageHeight;if(h===void 0&&d===void 0){var A=o.globals.dom.Paper.image(u,function(_){this.move(n.centerX-_.width/2+o.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-_.height/2+o.config.plotOptions.radialBar.hollow.imageOffsetY)});r.add(A)}else{var x=o.globals.dom.Paper.image(u,function(_){this.move(n.centerX-h/2+o.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-d/2+o.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(h,d)});r.add(x)}}return a}},{key:"getStrokeWidth",value:function(n){var r=this.w;return n.size*(100-parseInt(r.config.plotOptions.radialBar.hollow.size,10))/100/(n.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(n){var r=parseInt(n.target.getAttribute("rel"),10)-1,s=this.barLabels.onClick,a=this.w;s&&s(a.globals.seriesNames[r],{w:a,seriesIndex:r})}}]),t}(),WTe=function(i){_1(t,Xg);var e=b1(t);function t(){return Kt(this,t),e.apply(this,arguments)}return Jt(t,[{key:"draw",value:function(n,r){var s=this.w,a=new yt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=n,this.seriesRangeStart=s.globals.seriesRangeStart,this.seriesRangeEnd=s.globals.seriesRangeEnd,this.barHelpers.initVariables(n);for(var o=a.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),l=0;l<n.length;l++){var c,u,h,d,A=void 0,x=void 0,_=s.globals.comboCharts?r[l]:l,S=this.barHelpers.getGroupIndex(_).columnGroupIndex,w=a.group({class:"apexcharts-series",seriesName:Ne.escapeString(s.globals.seriesNames[_]),rel:l+1,"data:realIndex":_});this.ctx.series.addCollapsedClassToSeries(w,_),n[l].length>0&&(this.visibleI=this.visibleI+1);var C=0,P=0,L=0;this.yRatio.length>1&&(this.yaxisIndex=s.globals.seriesYAxisReverseMap[_][0],L=_);var D=this.barHelpers.initialPositions(_);x=D.y,d=D.zeroW,A=D.x,P=D.barWidth,C=D.barHeight,c=D.xDivision,u=D.yDivision,h=D.zeroH;for(var B=a.group({class:"apexcharts-datalabels","data:realIndex":_}),k=a.group({class:"apexcharts-rangebar-goals-markers"}),U=0;U<s.globals.dataPoints;U++){var F=this.barHelpers.getStrokeWidth(l,U,_),z=this.seriesRangeStart[l][U],V=this.seriesRangeEnd[l][U],W=null,X=null,J=null,K={x:A,y:x,strokeWidth:F,elSeries:w},Y=this.seriesLen;if(s.config.plotOptions.bar.rangeBarGroupRows&&(Y=1),s.config.series[l].data[U]===void 0)break;if(this.isHorizontal){J=x+C*this.visibleI;var ee=(u-C*Y)/2;if(s.config.series[l].data[U].x){var se=this.detectOverlappingBars({i:l,j:U,barYPosition:J,srty:ee,barHeight:C,yDivision:u,initPositions:D});C=se.barHeight,J=se.barYPosition}P=(W=this.drawRangeBarPaths(Bt({indexes:{i:l,j:U,realIndex:_},barHeight:C,barYPosition:J,zeroW:d,yDivision:u,y1:z,y2:V},K))).barWidth}else{s.globals.isXNumeric&&(A=(s.globals.seriesX[l][U]-s.globals.minX)/this.xRatio-P/2),X=A+P*this.visibleI;var fe=(c-P*Y)/2;if(s.config.series[l].data[U].x){var ne=this.detectOverlappingBars({i:l,j:U,barXPosition:X,srtx:fe,barWidth:P,xDivision:c,initPositions:D});P=ne.barWidth,X=ne.barXPosition}C=(W=this.drawRangeColumnPaths(Bt({indexes:{i:l,j:U,realIndex:_,translationsIndex:L},barWidth:P,barXPosition:X,zeroH:h,xDivision:c},K))).barHeight}var he=this.barHelpers.drawGoalLine({barXPosition:W.barXPosition,barYPosition:J,goalX:W.goalX,goalY:W.goalY,barHeight:C,barWidth:P});he&&k.add(he),x=W.y,A=W.x;var Te=this.barHelpers.getPathFillColor(n,l,U,_);this.renderSeries({realIndex:_,pathFill:Te.color,lineFill:Te.useRangeColor?Te.color:s.globals.stroke.colors[_],j:U,i:l,x:A,y:x,y1:z,y2:V,pathFrom:W.pathFrom,pathTo:W.pathTo,strokeWidth:F,elSeries:w,series:n,barHeight:C,barWidth:P,barXPosition:X,barYPosition:J,columnGroupIndex:S,elDataLabelsWrap:B,elGoalsMarkers:k,visibleSeries:this.visibleI,type:"rangebar"})}o.add(w)}return o}},{key:"detectOverlappingBars",value:function(n){var r=n.i,s=n.j,a=n.barYPosition,o=n.barXPosition,l=n.srty,c=n.srtx,u=n.barHeight,h=n.barWidth,d=n.yDivision,A=n.xDivision,x=n.initPositions,_=this.w,S=[],w=_.config.series[r].data[s].rangeName,C=_.config.series[r].data[s].x,P=Array.isArray(C)?C.join(" "):C,L=_.globals.labels.map(function(B){return Array.isArray(B)?B.join(" "):B}).indexOf(P),D=_.globals.seriesRange[r].findIndex(function(B){return B.x===P&&B.overlaps.length>0});return this.isHorizontal?(a=_.config.plotOptions.bar.rangeBarGroupRows?l+d*L:l+u*this.visibleI+d*L,D>-1&&!_.config.plotOptions.bar.rangeBarOverlap&&(S=_.globals.seriesRange[r][D].overlaps).indexOf(w)>-1&&(a=(u=x.barHeight/S.length)*this.visibleI+d*(100-parseInt(this.barOptions.barHeight,10))/100/2+u*(this.visibleI+S.indexOf(w))+d*L)):(L>-1&&!_.globals.timescaleLabels.length&&(o=_.config.plotOptions.bar.rangeBarGroupRows?c+A*L:c+h*this.visibleI+A*L),D>-1&&!_.config.plotOptions.bar.rangeBarOverlap&&(S=_.globals.seriesRange[r][D].overlaps).indexOf(w)>-1&&(o=(h=x.barWidth/S.length)*this.visibleI+A*(100-parseInt(this.barOptions.barWidth,10))/100/2+h*(this.visibleI+S.indexOf(w))+A*L)),{barYPosition:a,barXPosition:o,barHeight:u,barWidth:h}}},{key:"drawRangeColumnPaths",value:function(n){var r=n.indexes,s=n.x,a=n.xDivision,o=n.barWidth,l=n.barXPosition,c=n.zeroH,u=this.w,h=r.i,d=r.j,A=r.realIndex,x=r.translationsIndex,_=this.yRatio[x],S=this.getRangeValue(A,d),w=Math.min(S.start,S.end),C=Math.max(S.start,S.end);this.series[h][d]===void 0||this.series[h][d]===null?w=c:(w=c-w/_,C=c-C/_);var P=Math.abs(C-w),L=this.barHelpers.getColumnPaths({barXPosition:l,barWidth:o,y1:w,y2:C,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:A,i:A,j:d,w:u});if(u.globals.isXNumeric){var D=this.getBarXForNumericXAxis({x:s,j:d,realIndex:A,barWidth:o});s=D.x,l=D.barXPosition}else s+=a;return{pathTo:L.pathTo,pathFrom:L.pathFrom,barHeight:P,x:s,y:S.start<0&&S.end<0?w:C,goalY:this.barHelpers.getGoalValues("y",null,c,h,d,x),barXPosition:l}}},{key:"preventBarOverflow",value:function(n){var r=this.w;return n<0&&(n=0),n>r.globals.gridWidth&&(n=r.globals.gridWidth),n}},{key:"drawRangeBarPaths",value:function(n){var r=n.indexes,s=n.y,a=n.y1,o=n.y2,l=n.yDivision,c=n.barHeight,u=n.barYPosition,h=n.zeroW,d=this.w,A=r.realIndex,x=r.j,_=this.preventBarOverflow(h+a/this.invertedYRatio),S=this.preventBarOverflow(h+o/this.invertedYRatio),w=this.getRangeValue(A,x),C=Math.abs(S-_),P=this.barHelpers.getBarpaths({barYPosition:u,barHeight:c,x1:_,x2:S,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:A,realIndex:A,j:x,w:d});return d.globals.isXNumeric||(s+=l),{pathTo:P.pathTo,pathFrom:P.pathFrom,barWidth:C,x:w.start<0&&w.end<0?_:S,goalX:this.barHelpers.getGoalValues("x",h,null,A,x),y:s}}},{key:"getRangeValue",value:function(n,r){var s=this.w;return{start:s.globals.seriesRangeStart[n][r],end:s.globals.seriesRangeEnd[n][r]}}}]),t}(),jTe=function(){function i(e){Kt(this,i),this.w=e.w,this.lineCtx=e}return Jt(i,[{key:"sameValueSeriesFix",value:function(e,t){var n=this.w;if((n.config.fill.type==="gradient"||n.config.fill.type[e]==="gradient")&&new ls(this.lineCtx.ctx,n).seriesHaveSameValues(e)){var r=t[e].slice();r[r.length-1]=r[r.length-1]+1e-6,t[e]=r}return t}},{key:"calculatePoints",value:function(e){var t=e.series,n=e.realIndex,r=e.x,s=e.y,a=e.i,o=e.j,l=e.prevY,c=this.w,u=[],h=[],d=this.lineCtx.categoryAxisCorrection+c.config.markers.offsetX;return c.globals.isXNumeric&&(d=(c.globals.seriesX[n][0]-c.globals.minX)/this.lineCtx.xRatio+c.config.markers.offsetX),o===0&&(u.push(d),h.push(Ne.isNumber(t[a][0])?l+c.config.markers.offsetY:null)),u.push(r+c.config.markers.offsetX),h.push(Ne.isNumber(t[a][o+1])?s+c.config.markers.offsetY:null),{x:u,y:h}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,n=e.pathFromArea,r=e.realIndex,s=this.w,a=0;a<s.globals.previousPaths.length;a++){var o=s.globals.previousPaths[a];(o.type==="line"||o.type==="area")&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(r,10)&&(o.type==="line"?(this.lineCtx.appendPathFrom=!1,t=s.globals.previousPaths[a].paths[0].d):o.type==="area"&&(this.lineCtx.appendPathFrom=!1,n=s.globals.previousPaths[a].paths[0].d,s.config.stroke.show&&s.globals.previousPaths[a].paths[1]&&(t=s.globals.previousPaths[a].paths[1].d)))}return{pathFromLine:t,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(e){var t,n,r,s=e.i,a=e.realIndex,o=e.series,l=e.prevY,c=e.lineYPosition,u=e.translationsIndex,h=this.w,d=h.config.chart.stacked&&!h.globals.comboCharts||h.config.chart.stacked&&h.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[a])===null||t===void 0?void 0:t.type)==="bar"||((n=this.w.config.series[a])===null||n===void 0?void 0:n.type)==="column");if(((r=o[s])===null||r===void 0?void 0:r[0])!==void 0)l=(c=d&&s>0?this.lineCtx.prevSeriesY[s-1][0]:this.lineCtx.zeroY)-o[s][0]/this.lineCtx.yRatio[u]+2*(this.lineCtx.isReversed?o[s][0]/this.lineCtx.yRatio[u]:0);else if(d&&s>0&&o[s][0]===void 0){for(var A=s-1;A>=0;A--)if(o[A][0]!==null&&o[A][0]!==void 0){l=c=this.lineCtx.prevSeriesY[A][0];break}}return{prevY:l,lineYPosition:c}}}]),i}(),XTe=function(i){for(var e,t,n,r,s=function(u){for(var h=[],d=u[0],A=u[1],x=h[0]=VC(d,A),_=1,S=u.length-1;_<S;_++)d=A,A=u[_+1],h[_]=.5*(x+(x=VC(d,A)));return h[_]=x,h}(i),a=i.length-1,o=[],l=0;l<a;l++)n=VC(i[l],i[l+1]),Math.abs(n)<1e-6?s[l]=s[l+1]=0:(r=(e=s[l]/n)*e+(t=s[l+1]/n)*t)>9&&(r=3*n/Math.sqrt(r),s[l]=r*e,s[l+1]=r*t);for(var c=0;c<=a;c++)r=(i[Math.min(a,c+1)][0]-i[Math.max(0,c-1)][0])/(6*(1+s[c]*s[c])),o.push([r||0,s[c]*r||0]);return o},YTe=function(i){var e=XTe(i),t=i[1],n=i[0],r=[],s=e[1],a=e[0];r.push(n,[n[0]+a[0],n[1]+a[1],t[0]-s[0],t[1]-s[1],t[0],t[1]]);for(var o=2,l=e.length;o<l;o++){var c=i[o],u=e[o];r.push([c[0]-u[0],c[1]-u[1],c[0],c[1]])}return r},$Te=function(i,e,t){var n=i.slice(e,t);if(e){if(t-e>1&&n[1].length<6){var r=n[0].length;n[1]=[2*n[0][r-2]-n[0][r-4],2*n[0][r-1]-n[0][r-3]].concat(n[1])}n[0]=n[0].slice(-2)}return n};function VC(i,e){return(e[1]-i[1])/(e[0]-i[0])}var HC=function(){function i(e,t,n){Kt(this,i),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||n,this.scatter=new oX(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new jTe(this),this.markers=new vm(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Jt(i,[{key:"draw",value:function(e,t,n,r){var s,a=this.w,o=new yt(this.ctx),l=a.globals.comboCharts?t:a.config.chart.type,c=o.group({class:"apexcharts-".concat(l,"-series apexcharts-plot-series")}),u=new ls(this.ctx,a);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=u.getLogSeries(e),this.yRatio=u.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var h=[],d=0;d<e.length;d++){e=this.lineHelpers.sameValueSeriesFix(d,e);var A=a.globals.comboCharts?n[d]:d,x=this.yRatio.length>1?A:0;this._initSerieVariables(e,d,A);var _=[],S=[],w=[],C=a.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,A),a.globals.isXNumeric&&a.globals.seriesX.length>0&&(C=(a.globals.seriesX[A][0]-a.globals.minX)/this.xRatio),w.push(C);var P,L=C,D=void 0,B=L,k=this.zeroY,U=this.zeroY;k=this.lineHelpers.determineFirstPrevY({i:d,realIndex:A,series:e,prevY:k,lineYPosition:0,translationsIndex:x}).prevY,a.config.stroke.curve==="monotoneCubic"&&e[d][0]===null?_.push(null):_.push(k),P=k,l==="rangeArea"&&(D=U=this.lineHelpers.determineFirstPrevY({i:d,realIndex:A,series:r,prevY:U,lineYPosition:0,translationsIndex:x}).prevY,S.push(_[0]!==null?U:null));var F=this._calculatePathsFrom({type:l,series:e,i:d,realIndex:A,translationsIndex:x,prevX:B,prevY:k,prevY2:U}),z=[_[0]],V=[S[0]],W={type:l,series:e,realIndex:A,translationsIndex:x,i:d,x:C,y:1,pX:L,pY:P,pathsFrom:F,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:w,yArrj:_,y2Arrj:S,seriesRangeEnd:r},X=this._iterateOverDataPoints(Bt(Bt({},W),{},{iterations:l==="rangeArea"?e[d].length-1:void 0,isRangeStart:!0}));if(l==="rangeArea"){for(var J=this._calculatePathsFrom({series:r,i:d,realIndex:A,prevX:B,prevY:U}),K=this._iterateOverDataPoints(Bt(Bt({},W),{},{series:r,xArrj:[C],yArrj:z,y2Arrj:V,pY:D,areaPaths:X.areaPaths,pathsFrom:J,iterations:r[d].length-1,isRangeStart:!1})),Y=X.linePaths.length/2,ee=0;ee<Y;ee++)X.linePaths[ee]=K.linePaths[ee+Y]+X.linePaths[ee];X.linePaths.splice(Y),X.pathFromLine=K.pathFromLine+X.pathFromLine}else X.pathFromArea+="z";this._handlePaths({type:l,realIndex:A,i:d,paths:X}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),h.push(this.elSeries)}if(((s=a.config.series[0])===null||s===void 0?void 0:s.zIndex)!==void 0&&h.sort(function(ne,he){return Number(ne.node.getAttribute("zIndex"))-Number(he.node.getAttribute("zIndex"))}),a.config.chart.stacked)for(var se=h.length-1;se>=0;se--)c.add(h[se]);else for(var fe=0;fe<h.length;fe++)c.add(h[fe]);return c}},{key:"_initSerieVariables",value:function(e,t,n){var r=this.w,s=new yt(this.ctx);this.xDivision=r.globals.gridWidth/(r.globals.dataPoints-(r.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(r.config.stroke.width)?r.config.stroke.width[n]:r.config.stroke.width;var a=0;if(this.yRatio.length>1&&(this.yaxisIndex=r.globals.seriesYAxisReverseMap[n],a=n),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed,this.zeroY=r.globals.gridHeight-this.baseLineY[a]-(this.isReversed?r.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[a]:0),this.areaBottomY=this.zeroY,(this.zeroY>r.globals.gridHeight||r.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=r.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=s.group({class:"apexcharts-series",zIndex:r.config.series[n].zIndex!==void 0?r.config.series[n].zIndex:n,seriesName:Ne.escapeString(r.globals.seriesNames[n])}),this.elPointsMain=s.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),r.globals.hasNullValues){var o=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[r.globals.gridHeight+r.globals.markers.largestSize]},seriesIndex:t,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});o!==null&&this.elPointsMain.add(o)}this.elDataLabelsWrap=s.group({class:"apexcharts-datalabels","data:realIndex":n});var l=e[t].length===r.globals.dataPoints;this.elSeries.attr({"data:longestSeries":l,rel:t+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,n,r,s,a=e.type,o=e.series,l=e.i,c=e.realIndex,u=e.translationsIndex,h=e.prevX,d=e.prevY,A=e.prevY2,x=this.w,_=new yt(this.ctx);if(o[l][0]===null){for(var S=0;S<o[l].length;S++)if(o[l][S]!==null){h=this.xDivision*S,d=this.zeroY-o[l][S]/this.yRatio[u],t=_.move(h,d),n=_.move(h,this.areaBottomY);break}}else t=_.move(h,d),a==="rangeArea"&&(t=_.move(h,A)+_.line(h,d)),n=_.move(h,this.areaBottomY)+_.line(h,d);if(r=_.move(0,this.areaBottomY)+_.line(0,this.areaBottomY),s=_.move(0,this.areaBottomY)+_.line(0,this.areaBottomY),x.globals.previousPaths.length>0){var w=this.lineHelpers.checkPreviousPaths({pathFromLine:r,pathFromArea:s,realIndex:c});r=w.pathFromLine,s=w.pathFromArea}return{prevX:h,prevY:d,linePath:t,areaPath:n,pathFromLine:r,pathFromArea:s}}},{key:"_handlePaths",value:function(e){var t=e.type,n=e.realIndex,r=e.i,s=e.paths,a=this.w,o=new yt(this.ctx),l=new Nc(this.ctx);this.prevSeriesY.push(s.yArrj),a.globals.seriesXvalues[n]=s.xArrj,a.globals.seriesYvalues[n]=s.yArrj;var c=a.config.forecastDataPoints;if(c.count>0&&t!=="rangeArea"){var u=a.globals.seriesXvalues[n][a.globals.seriesXvalues[n].length-c.count-1],h=o.drawRect(u,0,a.globals.gridWidth,a.globals.gridHeight,0);a.globals.dom.elForecastMask.appendChild(h.node);var d=o.drawRect(0,0,u,a.globals.gridHeight,0);a.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||a.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var A={i:r,realIndex:n,animationDelay:r,initialSpeed:a.config.chart.animations.speed,dataChangeSpeed:a.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var x=l.fillPath({seriesNumber:n}),_=0;_<s.areaPaths.length;_++){var S=o.renderPaths(Bt(Bt({},A),{},{pathFrom:s.pathFromArea,pathTo:s.areaPaths[_],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:x}));this.elSeries.add(S)}if(a.config.stroke.show&&!this.pointsChart){var w=null;if(t==="line")w=l.fillPath({seriesNumber:n,i:r});else if(a.config.stroke.fill.type==="solid")w=a.globals.stroke.colors[n];else{var C=a.config.fill;a.config.fill=a.config.stroke.fill,w=l.fillPath({seriesNumber:n,i:r}),a.config.fill=C}for(var P=0;P<s.linePaths.length;P++){var L=w;t==="rangeArea"&&(L=l.fillPath({seriesNumber:n}));var D=Bt(Bt({},A),{},{pathFrom:s.pathFromLine,pathTo:s.linePaths[P],stroke:w,strokeWidth:this.strokeWidth,strokeLineCap:a.config.stroke.lineCap,fill:t==="rangeArea"?L:"none"}),B=o.renderPaths(D);if(this.elSeries.add(B),B.attr("fill-rule","evenodd"),c.count>0&&t!=="rangeArea"){var k=o.renderPaths(D);k.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&k.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(k),k.attr("clip-path","url(#forecastMask".concat(a.globals.cuid,")")),B.attr("clip-path","url(#nonForecastMask".concat(a.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,n,r=this,s=e.type,a=e.series,o=e.iterations,l=e.realIndex,c=e.translationsIndex,u=e.i,h=e.x,d=e.y,A=e.pX,x=e.pY,_=e.pathsFrom,S=e.linePaths,w=e.areaPaths,C=e.seriesIndex,P=e.lineYPosition,L=e.xArrj,D=e.yArrj,B=e.y2Arrj,k=e.isRangeStart,U=e.seriesRangeEnd,F=this.w,z=new yt(this.ctx),V=this.yRatio,W=_.prevY,X=_.linePath,J=_.areaPath,K=_.pathFromLine,Y=_.pathFromArea,ee=Ne.isNumber(F.globals.minYArr[l])?F.globals.minYArr[l]:F.globals.minY;o||(o=F.globals.dataPoints>1?F.globals.dataPoints-1:F.globals.dataPoints);var se=function(vt,pt){return pt-vt/V[c]+2*(r.isReversed?vt/V[c]:0)},fe=d,ne=F.config.chart.stacked&&!F.globals.comboCharts||F.config.chart.stacked&&F.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[l])===null||t===void 0?void 0:t.type)==="bar"||((n=this.w.config.series[l])===null||n===void 0?void 0:n.type)==="column"),he=F.config.stroke.curve;Array.isArray(he)&&(he=Array.isArray(C)?he[C[u]]:he[u]);for(var Te,Pe=0,_e=0;_e<o&&a[u].length!==0;_e++){var Ie=a[u][_e+1]===void 0||a[u][_e+1]===null;if(F.globals.isXNumeric){var Ve=F.globals.seriesX[l][_e+1];F.globals.seriesX[l][_e+1]===void 0&&(Ve=F.globals.seriesX[l][o-1]),h=(Ve-F.globals.minX)/this.xRatio}else h+=this.xDivision;ne?u>0&&F.globals.collapsedSeries.length<F.config.series.length-1?P=this.prevSeriesY[function(vt){for(var pt=vt;pt>0;pt--){if(!(F.globals.collapsedSeriesIndices.indexOf((C==null?void 0:C[pt])||pt)>-1))return pt;pt--}return 0}(u-1)][_e+1]:P=this.zeroY:P=this.zeroY,Ie?d=se(ee,P):(d=se(a[u][_e+1],P),s==="rangeArea"&&(fe=se(U[u][_e+1],P))),L.push(a[u][_e+1]===null?null:h),!Ie||F.config.stroke.curve!=="smooth"&&F.config.stroke.curve!=="monotoneCubic"?(D.push(d),B.push(fe)):(D.push(null),B.push(null));var $e=this.lineHelpers.calculatePoints({series:a,x:h,y:d,realIndex:l,i:u,j:_e,prevY:W}),Je=this._createPaths({type:s,series:a,i:u,realIndex:l,j:_e,x:h,y:d,y2:fe,xArrj:L,yArrj:D,y2Arrj:B,pX:A,pY:x,pathState:Pe,segmentStartX:Te,linePath:X,areaPath:J,linePaths:S,areaPaths:w,curve:he,isRangeStart:k});w=Je.areaPaths,S=Je.linePaths,A=Je.pX,x=Je.pY,Pe=Je.pathState,Te=Je.segmentStartX,J=Je.areaPath,X=Je.linePath,!this.appendPathFrom||F.globals.hasNullValues||he==="monotoneCubic"&&s==="rangeArea"||(K+=z.line(h,this.areaBottomY),Y+=z.line(h,this.areaBottomY)),this.handleNullDataPoints(a,$e,u,_e,l),this._handleMarkersAndLabels({type:s,pointsPos:$e,i:u,j:_e,realIndex:l,isRangeStart:k})}return{yArrj:D,xArrj:L,pathFromArea:Y,areaPaths:w,pathFromLine:K,linePaths:S,linePath:X,areaPath:J}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,n=e.pointsPos,r=e.isRangeStart,s=e.i,a=e.j,o=e.realIndex,l=this.w,c=new jg(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,a,{realIndex:o,pointsPos:n,zRatio:this.zRatio,elParent:this.elPointsMain});else{l.globals.series[s].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var u=this.markers.plotChartMarkers({pointsPos:n,seriesIndex:o,j:a+1});u!==null&&this.elPointsMain.add(u)}var h=c.drawDataLabel({type:t,isRangeStart:r,pos:n,i:o,j:a+1});h!==null&&this.elDataLabelsWrap.add(h)}},{key:"_createPaths",value:function(e){var t=e.type,n=e.series,r=e.i;e.realIndex;var s,a=e.j,o=e.x,l=e.y,c=e.xArrj,u=e.yArrj,h=e.y2,d=e.y2Arrj,A=e.pX,x=e.pY,_=e.pathState,S=e.segmentStartX,w=e.linePath,C=e.areaPath,P=e.linePaths,L=e.areaPaths,D=e.curve,B=e.isRangeStart,k=new yt(this.ctx),U=this.areaBottomY,F=t==="rangeArea",z=t==="rangeArea"&&B;switch(D){case"monotoneCubic":var V=B?u:d;switch(_){case 0:if(V[a+1]===null)break;_=1;case 1:if(!(F?c.length===n[r].length:a===n[r].length-2))break;case 2:var W=B?c:c.slice().reverse(),X=B?V:V.slice().reverse(),J=(s=X,W.map(function(Ve,$e){return[Ve,s[$e]]}).filter(function(Ve){return Ve[1]!==null})),K=J.length>1?YTe(J):J,Y=[];F&&(z?L=J:Y=L.reverse());var ee=0,se=0;if(function(Ve,$e){for(var Je=function(fn){var jt=[],de=0;return fn.forEach(function(Dt){Dt!==null?de++:de>0&&(jt.push(de),de=0)}),de>0&&jt.push(de),jt}(Ve),vt=[],pt=0,Vt=0;pt<Je.length;Vt+=Je[pt++])vt[pt]=$Te($e,Vt,Vt+Je[pt]);return vt}(X,K).forEach(function(Ve){ee++;var $e=function(pt){for(var Vt="",fn=0;fn<pt.length;fn++){var jt=pt[fn],de=jt.length;de>4?(Vt+="C".concat(jt[0],", ").concat(jt[1]),Vt+=", ".concat(jt[2],", ").concat(jt[3]),Vt+=", ".concat(jt[4],", ").concat(jt[5])):de>2&&(Vt+="S".concat(jt[0],", ").concat(jt[1]),Vt+=", ".concat(jt[2],", ").concat(jt[3]))}return Vt}(Ve),Je=se,vt=(se+=Ve.length)-1;z?w=k.move(J[Je][0],J[Je][1])+$e:F?w=k.move(Y[Je][0],Y[Je][1])+k.line(J[Je][0],J[Je][1])+$e+k.line(Y[vt][0],Y[vt][1]):(w=k.move(J[Je][0],J[Je][1])+$e,C=w+k.line(J[vt][0],U)+k.line(J[Je][0],U)+"z",L.push(C)),P.push(w)}),F&&ee>1&&!z){var fe=P.slice(ee).reverse();P.splice(ee),fe.forEach(function(Ve){return P.push(Ve)})}_=0}break;case"smooth":var ne=.35*(o-A);if(n[r][a]===null)_=0;else switch(_){case 0:if(S=A,w=z?k.move(A,d[a])+k.line(A,x):k.move(A,x),C=k.move(A,x),n[r][a+1]===null||n[r][a+1]===void 0){P.push(w),L.push(C);break}if(_=1,a<n[r].length-2){var he=k.curve(A+ne,x,o-ne,l,o,l);w+=he,C+=he;break}case 1:if(n[r][a+1]===null)w+=z?k.line(A,h):k.move(A,x),C+=k.line(A,U)+k.line(S,U)+"z",P.push(w),L.push(C),_=-1;else{var Te=k.curve(A+ne,x,o-ne,l,o,l);w+=Te,C+=Te,a>=n[r].length-2&&(z&&(w+=k.curve(o,l,o,l,o,h)+k.move(o,h)),C+=k.curve(o,l,o,l,o,U)+k.line(S,U)+"z",P.push(w),L.push(C),_=-1)}}A=o,x=l;break;default:var Pe=function(Ve,$e,Je){var vt=[];switch(Ve){case"stepline":vt=k.line($e,null,"H")+k.line(null,Je,"V");break;case"linestep":vt=k.line(null,Je,"V")+k.line($e,null,"H");break;case"straight":vt=k.line($e,Je)}return vt};if(n[r][a]===null)_=0;else switch(_){case 0:if(S=A,w=z?k.move(A,d[a])+k.line(A,x):k.move(A,x),C=k.move(A,x),n[r][a+1]===null||n[r][a+1]===void 0){P.push(w),L.push(C);break}if(_=1,a<n[r].length-2){var _e=Pe(D,o,l);w+=_e,C+=_e;break}case 1:if(n[r][a+1]===null)w+=z?k.line(A,h):k.move(A,x),C+=k.line(A,U)+k.line(S,U)+"z",P.push(w),L.push(C),_=-1;else{var Ie=Pe(D,o,l);w+=Ie,C+=Ie,a>=n[r].length-2&&(z&&(w+=k.line(o,h)),C+=k.line(o,U)+k.line(S,U)+"z",P.push(w),L.push(C),_=-1)}}A=o,x=l}return{linePaths:P,areaPaths:L,pX:A,pY:x,pathState:_,segmentStartX:S,linePath:w,areaPath:C}}},{key:"handleNullDataPoints",value:function(e,t,n,r,s){var a=this.w;if(e[n][r]===null&&a.config.markers.showNullDataPoints||e[n].length===1){var o=this.strokeWidth-a.config.markers.strokeWidth/2;o>0||(o=0);var l=this.markers.plotChartMarkers({pointsPos:t,seriesIndex:s,j:r+1,pSize:o,alwaysDrawMarker:!0});l!==null&&this.elPointsMain.add(l)}}}]),i}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function i(o,l,c,u){this.xoffset=o,this.yoffset=l,this.height=u,this.width=c,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(h){var d,A=[],x=this.xoffset,_=this.yoffset,S=s(h)/this.height,w=s(h)/this.width;if(this.width>=this.height)for(d=0;d<h.length;d++)A.push([x,_,x+S,_+h[d]/S]),_+=h[d]/S;else for(d=0;d<h.length;d++)A.push([x,_,x+h[d]/w,_+w]),x+=h[d]/w;return A},this.cutArea=function(h){var d;if(this.width>=this.height){var A=h/this.height,x=this.width-A;d=new i(this.xoffset+A,this.yoffset,x,this.height)}else{var _=h/this.width,S=this.height-_;d=new i(this.xoffset,this.yoffset+_,this.width,S)}return d}}function e(o,l,c,u,h){u=u===void 0?0:u,h=h===void 0?0:h;var d=t(function(A,x){var _,S=[],w=x/s(A);for(_=0;_<A.length;_++)S[_]=A[_]*w;return S}(o,l*c),[],new i(u,h,l,c),[]);return function(A){var x,_,S=[];for(x=0;x<A.length;x++)for(_=0;_<A[x].length;_++)S.push(A[x][_]);return S}(d)}function t(o,l,c,u){var h,d,A;if(o.length!==0)return h=c.shortestEdge(),function(x,_,S){var w;if(x.length===0)return!0;(w=x.slice()).push(_);var C=n(x,S),P=n(w,S);return C>=P}(l,d=o[0],h)?(l.push(d),t(o.slice(1),l,c,u)):(A=c.cutArea(s(l),u),u.push(c.getCoordinates(l)),t(o,[],A,u)),u;u.push(c.getCoordinates(l))}function n(o,l){var c=Math.min.apply(Math,o),u=Math.max.apply(Math,o),h=s(o);return Math.max(Math.pow(l,2)*u/Math.pow(h,2),Math.pow(h,2)/(Math.pow(l,2)*c))}function r(o){return o&&o.constructor===Array}function s(o){var l,c=0;for(l=0;l<o.length;l++)c+=o[l];return c}function a(o){var l,c=0;if(r(o[0]))for(l=0;l<o.length;l++)c+=a(o[l]);else c=s(o);return c}return function o(l,c,u,h,d){h=h===void 0?0:h,d=d===void 0?0:d;var A,x,_=[],S=[];if(r(l[0])){for(x=0;x<l.length;x++)_[x]=a(l[x]);for(A=e(_,c,u,h,d),x=0;x<l.length;x++)S.push(o(l[x],A[x][2]-A[x][0],A[x][3]-A[x][1],A[x][0],A[x][1]))}else S=e(l,c,u,h,d);return S}}();var QTe=function(){function i(e,t){Kt(this,i),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new pX(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Jt(i,[{key:"draw",value:function(e){var t=this,n=this.w,r=new yt(this.ctx),s=new Nc(this.ctx),a=r.group({class:"apexcharts-treemap"});if(n.globals.noData)return a;var o=[];return e.forEach(function(l){var c=l.map(function(u){return Math.abs(u)});o.push(c)}),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach(function(l,c){l.data.forEach(function(u){Array.isArray(t.labels[c])||(t.labels[c]=[]),t.labels[c].push(u.x)})}),window.TreemapSquared.generate(o,n.globals.gridWidth,n.globals.gridHeight).forEach(function(l,c){var u=r.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Ne.escapeString(n.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(n.config.chart.dropShadow.enabled){var h=n.config.chart.dropShadow;new ya(t.ctx).dropShadow(a,h,c)}var d=r.group({class:"apexcharts-data-labels"}),A={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};l.forEach(function(K,Y){var ee=K[0],se=K[1],fe=K[2],ne=K[3];A.xMin=Math.min(A.xMin,ee),A.yMin=Math.min(A.yMin,se),A.xMax=Math.max(A.xMax,fe),A.yMax=Math.max(A.yMax,ne);var he=t.helpers.getShadeColor(n.config.chart.type,c,Y,t.negRange),Te=he.color,Pe=s.fillPath({color:Te,seriesNumber:c,dataPointIndex:Y}),_e=r.drawRect(ee,se,fe-ee,ne-se,n.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?Te:n.globals.stroke.colors[c]);_e.attr({cx:ee,cy:se,index:c,i:c,j:Y,width:fe-ee,height:ne-se,fill:Pe}),_e.node.classList.add("apexcharts-treemap-rect"),t.helpers.addListeners(_e);var Ie={x:ee+(fe-ee)/2,y:se+(ne-se)/2,width:0,height:0},Ve={x:ee,y:se,width:fe-ee,height:ne-se};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var $e=1;n.globals.resized||($e=n.config.chart.animations.speed),t.animateTreemap(_e,Ie,Ve,$e)}if(n.globals.dataChanged){var Je=1;t.dynamicAnim.enabled&&n.globals.shouldAnimate&&(Je=t.dynamicAnim.speed,n.globals.previousPaths[c]&&n.globals.previousPaths[c][Y]&&n.globals.previousPaths[c][Y].rect&&(Ie=n.globals.previousPaths[c][Y].rect),t.animateTreemap(_e,Ie,Ve,Je))}var vt=t.getFontSize(K),pt=n.config.dataLabels.formatter(t.labels[c][Y],{value:n.globals.series[c][Y],seriesIndex:c,dataPointIndex:Y,w:n});n.config.plotOptions.treemap.dataLabels.format==="truncate"&&(vt=parseInt(n.config.dataLabels.style.fontSize,10),pt=t.truncateLabels(pt,vt,ee,se,fe,ne));var Vt=null;n.globals.series[c][Y]&&(Vt=t.helpers.calculateDataLabels({text:pt,x:(ee+fe)/2,y:(se+ne)/2+t.strokeWidth/2+vt/3,i:c,j:Y,colorProps:he,fontSize:vt,series:e})),n.config.dataLabels.enabled&&Vt&&t.rotateToFitLabel(Vt,vt,pt,ee,se,fe,ne),u.add(_e),Vt!==null&&u.add(Vt)});var x=n.config.plotOptions.treemap.seriesTitle;if(n.config.series.length>1&&x&&x.show){var _=n.config.series[c].name||"";if(_&&A.xMin<1/0&&A.yMin<1/0){var S=x.offsetX,w=x.offsetY,C=x.borderColor,P=x.borderWidth,L=x.borderRadius,D=x.style,B=D.color||n.config.chart.foreColor,k={left:D.padding.left,right:D.padding.right,top:D.padding.top,bottom:D.padding.bottom},U=r.getTextRects(_,D.fontSize,D.fontFamily),F=U.width+k.left+k.right,z=U.height+k.top+k.bottom,V=A.xMin+(S||0),W=A.yMin+(w||0),X=r.drawRect(V,W,F,z,L,D.background,1,P,C),J=r.drawText({x:V+k.left,y:W+k.top+.75*U.height,text:_,fontSize:D.fontSize,fontFamily:D.fontFamily,fontWeight:D.fontWeight,foreColor:B,cssClass:D.cssClass||""});u.add(X),u.add(J)}}u.add(d),a.add(u)}),a}},{key:"getFontSize",value:function(e){var t=this.w,n=function r(s){var a,o=0;if(Array.isArray(s[0]))for(a=0;a<s.length;a++)o+=r(s[a]);else for(a=0;a<s.length;a++)o+=s[a].length;return o}(this.labels)/function r(s){var a,o=0;if(Array.isArray(s[0]))for(a=0;a<s.length;a++)o+=r(s[a]);else for(a=0;a<s.length;a++)o+=1;return o}(this.labels);return function(r,s){var a=r*s,o=Math.pow(a,.5);return Math.min(o/n,parseInt(t.config.dataLabels.style.fontSize,10))}(e[2]-e[0],e[3]-e[1])}},{key:"rotateToFitLabel",value:function(e,t,n,r,s,a,o){var l=new yt(this.ctx),c=l.getTextRects(n,t);if(c.width+this.w.config.stroke.width+5>a-r&&c.width<=o-s){var u=l.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(u.x," ").concat(u.y,") translate(").concat(c.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,n,r,s,a){var o=new yt(this.ctx),l=o.getTextRects(e,t).width+this.w.config.stroke.width+5>s-n&&a-r>s-n?a-r:s-n,c=o.getTextBasedOnMaxWidth({text:e,maxWidth:l,fontSize:t});return e.length!==c.length&&l/t<5?"":c}},{key:"animateTreemap",value:function(e,t,n,r){var s=new pm(this.ctx);s.animateRect(e,t,n,r,function(){s.animationCompleted(e)})}}]),i}(),mX=86400,ZTe=10/mX,KTe=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Jt(i,[{key:"calculateTimeScaleTicks",value:function(e,t){var n=this,r=this.w;if(r.globals.allSeriesCollapsed)return r.globals.labels=[],r.globals.timescaleLabels=[],[];var s=new va(this.ctx),a=(t-e)/864e5;this.determineInterval(a),r.globals.disableZoomIn=!1,r.globals.disableZoomOut=!1,a<ZTe?r.globals.disableZoomIn=!0:a>5e4&&(r.globals.disableZoomOut=!0);var o=s.getTimeUnitsfromTimestamp(e,t,this.utc),l=r.globals.gridWidth/a,c=l/24,u=c/60,h=u/60,d=Math.floor(24*a),A=Math.floor(1440*a),x=Math.floor(a*mX),_=Math.floor(a),S=Math.floor(a/30),w=Math.floor(a/365),C={minMillisecond:o.minMillisecond,minSecond:o.minSecond,minMinute:o.minMinute,minHour:o.minHour,minDate:o.minDate,minMonth:o.minMonth,minYear:o.minYear},P={firstVal:C,currentMillisecond:C.minMillisecond,currentSecond:C.minSecond,currentMinute:C.minMinute,currentHour:C.minHour,currentMonthDate:C.minDate,currentDate:C.minDate,currentMonth:C.minMonth,currentYear:C.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:u,secondsWidthOnXAxis:h,numberOfSeconds:x,numberOfMinutes:A,numberOfHours:d,numberOfDays:_,numberOfMonths:S,numberOfYears:w};switch(this.tickInterval){case"years":this.generateYearScale(P);break;case"months":case"half_year":this.generateMonthScale(P);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(P);break;case"hours":this.generateHourScale(P);break;case"minutes_fives":case"minutes":this.generateMinuteScale(P);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(P)}var L=this.timeScaleArray.map(function(D){var B={position:D.position,unit:D.unit,year:D.year,day:D.day?D.day:1,hour:D.hour?D.hour:0,month:D.month+1};return D.unit==="month"?Bt(Bt({},B),{},{day:1,value:D.value+1}):D.unit==="day"||D.unit==="hour"?Bt(Bt({},B),{},{value:D.value}):D.unit==="minute"?Bt(Bt({},B),{},{value:D.value,minute:D.value}):D.unit==="second"?Bt(Bt({},B),{},{value:D.value,minute:D.minute,second:D.second}):D});return L.filter(function(D){var B=1,k=Math.ceil(r.globals.gridWidth/120),U=D.value;r.config.xaxis.tickAmount!==void 0&&(k=r.config.xaxis.tickAmount),L.length>k&&(B=Math.floor(L.length/k));var F=!1,z=!1;switch(n.tickInterval){case"years":D.unit==="year"&&(F=!0);break;case"half_year":B=7,D.unit==="year"&&(F=!0);break;case"months":B=1,D.unit==="year"&&(F=!0);break;case"months_fortnight":B=15,D.unit!=="year"&&D.unit!=="month"||(F=!0),U===30&&(z=!0);break;case"months_days":B=10,D.unit==="month"&&(F=!0),U===30&&(z=!0);break;case"week_days":B=8,D.unit==="month"&&(F=!0);break;case"days":B=1,D.unit==="month"&&(F=!0);break;case"hours":D.unit==="day"&&(F=!0);break;case"minutes_fives":case"seconds_fives":U%5!=0&&(z=!0);break;case"seconds_tens":U%10!=0&&(z=!0)}if(n.tickInterval==="hours"||n.tickInterval==="minutes_fives"||n.tickInterval==="seconds_tens"||n.tickInterval==="seconds_fives"){if(!z)return!0}else if((U%B==0||F)&&!z)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var n=this.w,r=this.formatDates(e),s=this.removeOverlappingTS(r);n.globals.timescaleLabels=s.slice(),new gS(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,n=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,s=e.daysWidthOnXAxis,a=e.numberOfYears,o=t.minYear,l=0,c=new va(this.ctx),u="year";if(t.minDate>1||t.minMonth>0){var h=c.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);l=(c.determineDaysOfYear(t.minYear)-h+1)*s,o=t.minYear+1,this.timeScaleArray.push({position:l,value:o,unit:u,year:o,month:Ne.monthMod(n+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:l,value:o,unit:u,year:r,month:Ne.monthMod(n+1)});for(var d=o,A=l,x=0;x<a;x++)d++,A=c.determineDaysOfYear(d-1)*s+A,this.timeScaleArray.push({position:A,value:d,unit:u,year:d,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,n=e.currentMonthDate,r=e.currentMonth,s=e.currentYear,a=e.daysWidthOnXAxis,o=e.numberOfMonths,l=r,c=0,u=new va(this.ctx),h="month",d=0;if(t.minDate>1){c=(u.determineDaysOfMonths(r+1,t.minYear)-n+1)*a,l=Ne.monthMod(r+1);var A=s+d,x=Ne.monthMod(l),_=l;l===0&&(h="year",_=A,x=1,A+=d+=1),this.timeScaleArray.push({position:c,value:_,unit:h,year:A,month:x})}else this.timeScaleArray.push({position:c,value:l,unit:h,year:s,month:Ne.monthMod(r)});for(var S=l+1,w=c,C=0,P=1;C<o;C++,P++){(S=Ne.monthMod(S))===0?(h="year",d+=1):h="month";var L=this._getYear(s,S,d);w=u.determineDaysOfMonths(S,L)*a+w;var D=S===0?L:S;this.timeScaleArray.push({position:w,value:D,unit:h,year:L,month:S===0?1:S}),S++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,s=e.hoursWidthOnXAxis,a=e.numberOfDays,o=new va(this.ctx),l="day",c=t.minDate+1,u=c,h=function(P,L,D){return P>o.determineDaysOfMonths(L+1,D)&&(u=1,l="month",A=L+=1),L},d=(24-t.minHour)*s,A=c,x=h(u,n,r);t.minHour===0&&t.minDate===1?(d=0,A=Ne.monthMod(t.minMonth),l="month",u=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(d=0,c=t.minDate,A=c,x=h(u=c,n,r),A!==1&&(l="day")),this.timeScaleArray.push({position:d,value:A,unit:l,year:this._getYear(r,x,0),month:Ne.monthMod(x),day:u});for(var _=d,S=0;S<a;S++){l="day",x=h(u+=1,x,this._getYear(r,x,0));var w=this._getYear(r,x,0);_=24*s+_;var C=u===1?Ne.monthMod(x):u;this.timeScaleArray.push({position:_,value:C,unit:l,year:w,month:Ne.monthMod(x),day:C})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,n=e.currentDate,r=e.currentMonth,s=e.currentYear,a=e.minutesWidthOnXAxis,o=e.numberOfHours,l=new va(this.ctx),c="hour",u=function(B,k){return B>l.determineDaysOfMonths(k+1,s)&&(S=1,k+=1),{month:k,date:S}},h=function(B,k){return B>l.determineDaysOfMonths(k+1,s)?k+=1:k},d=60-(t.minMinute+t.minSecond/60),A=d*a,x=t.minHour+1,_=x;d===60&&(A=0,_=x=t.minHour);var S=n;_>=24&&(_=0,c="day",x=S+=1);var w=u(S,r).month;w=h(S,w),x>31&&(x=S=1),this.timeScaleArray.push({position:A,value:x,unit:c,day:S,hour:_,year:s,month:Ne.monthMod(w)}),_++;for(var C=A,P=0;P<o;P++){c="hour",_>=24&&(_=0,c="day",w=u(S+=1,w).month,w=h(S,w));var L=this._getYear(s,w,0);C=60*a+C;var D=_===0?S:_;this.timeScaleArray.push({position:C,value:D,unit:c,hour:_,day:S,year:L,month:Ne.monthMod(w)}),_++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,s=e.currentHour,a=e.currentDate,o=e.currentMonth,l=e.currentYear,c=e.minutesWidthOnXAxis,u=e.secondsWidthOnXAxis,h=e.numberOfMinutes,d=r+1,A=a,x=o,_=l,S=s,w=(60-n-t/1e3)*u,C=0;C<h;C++)d>=60&&(d=0,(S+=1)===24&&(S=0)),this.timeScaleArray.push({position:w,value:d,unit:"minute",hour:S,minute:d,day:A,year:this._getYear(_,x,0),month:Ne.monthMod(x)}),w+=c,d++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,s=e.currentHour,a=e.currentDate,o=e.currentMonth,l=e.currentYear,c=e.secondsWidthOnXAxis,u=e.numberOfSeconds,h=n+1,d=r,A=a,x=o,_=l,S=s,w=(1e3-t)/1e3*c,C=0;C<u;C++)h>=60&&(h=0,++d>=60&&(d=0,++S===24&&(S=0))),this.timeScaleArray.push({position:w,value:h,unit:"second",hour:S,minute:d,second:h,day:A,year:this._getYear(_,x,0),month:Ne.monthMod(x)}),w+=c,h++}},{key:"createRawDateString",value:function(e,t){var n=e.year;return e.month===0&&(e.month=1),n+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?n+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":n+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?n+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":n+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?n+=":"+("0"+t).slice(-2):n+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?n+=":"+("0"+t).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(e){var t=this,n=this.w;return e.map(function(r){var s=r.value.toString(),a=new va(t.ctx),o=t.createRawDateString(r,s),l=a.getDate(a.parseDate(o));if(t.utc||(l=a.getDate(a.parseDateWithTimezone(o))),n.config.xaxis.labels.format===void 0){var c="dd MMM",u=n.config.xaxis.labels.datetimeFormatter;r.unit==="year"&&(c=u.year),r.unit==="month"&&(c=u.month),r.unit==="day"&&(c=u.day),r.unit==="hour"&&(c=u.hour),r.unit==="minute"&&(c=u.minute),r.unit==="second"&&(c=u.second),s=a.formatDate(l,c)}else s=a.formatDate(l,n.config.xaxis.labels.format);return{dateString:o,position:r.position,value:s,unit:r.unit,year:r.year,month:r.month}})}},{key:"removeOverlappingTS",value:function(e){var t,n=this,r=new yt(this.ctx),s=!1;e.length>0&&e[0].value&&e.every(function(l){return l.value.length===e[0].value.length})&&(s=!0,t=r.getTextRects(e[0].value).width);var a=0,o=e.map(function(l,c){if(c>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var u=s?t:r.getTextRects(e[a].value).width,h=e[a].position;return l.position>h+u+10?(a=c,l):null}return l});return o=o.filter(function(l){return l!==null})}},{key:"_getYear",value:function(e,t,n){return e+Math.floor(t/12)+n}}]),i}(),JTe=function(){function i(e,t){Kt(this,i),this.ctx=t,this.w=t.w,this.el=e}return Jt(i,[{key:"setupElements",value:function(){var e=this.w,t=e.globals,n=e.config,r=n.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(r),t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(r),t.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(r)&&n.plotOptions.bar.horizontal,t.chartClass=".apexcharts".concat(t.chartID),t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),yt.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas ".concat(t.chartClass.substring(1))}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=window.SVG().addTo(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(n.chart.offsetX,", ").concat(n.chart.offsetY,")")}),t.dom.Paper.node.style.background=n.theme.mode!=="dark"||n.chart.background?n.theme.mode!=="light"||n.chart.background?n.chart.background:"#fff":"#343A3F",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),yt.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var n=this.w,r=this.ctx,s=n.config,a=n.globals,o={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},bar:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},l=s.chart.type||"line",c=null,u=0;a.series.forEach(function(B,k){var U=e[k].type==="column"?"bar":e[k].type||(l==="column"?"bar":l);o[U]?(U==="rangeArea"?(o[U].series.push(a.seriesRangeStart[k]),o[U].seriesRangeEnd.push(a.seriesRangeEnd[k])):o[U].series.push(B),o[U].i.push(k),U==="bar"&&(n.globals.columnSeries=o.bar)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(U)?c=U:console.warn("You have specified an unrecognized series type (".concat(U,").")),l!==U&&U!=="scatter"&&u++}),u>0&&(c&&console.warn("Chart or series type ".concat(c," cannot appear with other chart or series types.")),o.bar.series.length>0&&s.plotOptions.bar.horizontal&&(u-=o.bar.series.length,o.bar={series:[],i:[]},n.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),a.comboCharts||(a.comboCharts=u>0);var h=new HC(r,t),d=new GC(r,t);r.pie=new gX(r);var A=new qTe(r);r.rangeBar=new WTe(r,t);var x=new HTe(r),_=[];if(a.comboCharts){var S,w,C=new ls(r);if(o.area.series.length>0&&(S=_).push.apply(S,Us(C.drawSeriesByGroup(o.area,a.areaGroups,"area",h))),o.bar.series.length>0)if(s.chart.stacked){var P=new r9(r,t);_.push(P.draw(o.bar.series,o.bar.i))}else r.bar=new Xg(r,t),_.push(r.bar.draw(o.bar.series,o.bar.i));if(o.rangeArea.series.length>0&&_.push(h.draw(o.rangeArea.series,"rangeArea",o.rangeArea.i,o.rangeArea.seriesRangeEnd)),o.line.series.length>0&&(w=_).push.apply(w,Us(C.drawSeriesByGroup(o.line,a.lineGroups,"line",h))),o.candlestick.series.length>0&&_.push(d.draw(o.candlestick.series,"candlestick",o.candlestick.i)),o.boxPlot.series.length>0&&_.push(d.draw(o.boxPlot.series,"boxPlot",o.boxPlot.i)),o.rangeBar.series.length>0&&_.push(r.rangeBar.draw(o.rangeBar.series,o.rangeBar.i)),o.scatter.series.length>0){var L=new HC(r,t,!0);_.push(L.draw(o.scatter.series,"scatter",o.scatter.i))}if(o.bubble.series.length>0){var D=new HC(r,t,!0);_.push(D.draw(o.bubble.series,"bubble",o.bubble.i))}}else switch(s.chart.type){case"line":_=h.draw(a.series,"line");break;case"area":_=h.draw(a.series,"area");break;case"bar":s.chart.stacked?_=new r9(r,t).draw(a.series):(r.bar=new Xg(r,t),_=r.bar.draw(a.series));break;case"candlestick":_=new GC(r,t).draw(a.series,"candlestick");break;case"boxPlot":_=new GC(r,t).draw(a.series,s.chart.type);break;case"rangeBar":_=r.rangeBar.draw(a.series);break;case"rangeArea":_=h.draw(a.seriesRangeStart,"rangeArea",void 0,a.seriesRangeEnd);break;case"heatmap":_=new VTe(r,t).draw(a.series);break;case"treemap":_=new QTe(r,t).draw(a.series);break;case"pie":case"donut":case"polarArea":_=r.pie.draw(a.series);break;case"radialBar":_=A.draw(a.series);break;case"radar":_=x.draw(a.series);break;default:_=h.draw(a.series)}return _}},{key:"setSVGDimensions",value:function(){var e=this.w,t=e.globals,n=e.config;n.chart.width=n.chart.width||"100%",n.chart.height=n.chart.height||"auto",t.svgWidth=n.chart.width,t.svgHeight=n.chart.height;var r=Ne.getDimensions(this.el),s=n.chart.width.toString().split(/[0-9]+/g).pop();s==="%"?Ne.isNumber(r[0])&&(r[0].width===0&&(r=Ne.getDimensions(this.el.parentNode)),t.svgWidth=r[0]*parseInt(n.chart.width,10)/100):s!=="px"&&s!==""||(t.svgWidth=parseInt(n.chart.width,10));var a=String(n.chart.height).toString().split(/[0-9]+/g).pop();if(t.svgHeight!=="auto"&&t.svgHeight!=="")if(a==="%"){var o=Ne.getDimensions(this.el.parentNode);t.svgHeight=o[1]*parseInt(n.chart.height,10)/100}else t.svgHeight=parseInt(n.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;if(t.svgWidth=Math.max(t.svgWidth,0),t.svgHeight=Math.max(t.svgHeight,0),yt.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),a!=="%"){var l=n.chart.sparkline.enabled?0:t.axisCharts?n.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(t.svgHeight+l,"px")}t.dom.elWrap.style.width="".concat(t.svgWidth,"px"),t.dom.elWrap.style.height="".concat(t.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,n=e.translateX;yt.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(n,", ").concat(t,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=0,r=e.config.chart.sparkline.enabled?1:15;r+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(n=new uX(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var s=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),a=2.05*e.globals.radialSize;if(s&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var o=Ne.getBoundingClientRect(s);a=o.bottom;var l=o.bottom-o.top;a=Math.max(2.05*e.globals.radialSize,l)}var c=Math.ceil(a+t.translateY+n+r);t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",c),e.config.chart.height&&String(e.config.chart.height).includes("%")||(t.dom.elWrap.style.height="".concat(c,"px"),yt.setAttrs(t.dom.Paper.node,{height:c}),t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(c,"px"))}},{key:"coreCalculations",value:function(){new r5(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map(function(){return[]})},n=new aX,r=this.w.globals;n.initGlobalVars(r),r.seriesXvalues=t(),r.seriesYvalues=t()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,t=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new s5(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new s5(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new KTe(this.ctx);var n=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}t=new ls(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.ctx,n=this.w;if(n.config.chart.brush.enabled&&typeof n.config.chart.events.selection!="function"){var r=Array.isArray(n.config.chart.brush.targets)?n.config.chart.brush.targets:[n.config.chart.brush.target];r.forEach(function(s){var a=t.constructor.getChartByID(s);a.w.globals.brushSource=e.ctx,typeof a.w.config.chart.events.zoomed!="function"&&(a.w.config.chart.events.zoomed=function(){return e.updateSourceChart(a)}),typeof a.w.config.chart.events.scrolled!="function"&&(a.w.config.chart.events.scrolled=function(){return e.updateSourceChart(a)})}),n.config.chart.events.selection=function(s,a){r.forEach(function(o){t.constructor.getChartByID(o).ctx.updateHelpers._updateOptions({xaxis:{min:a.xaxis.min,max:a.xaxis.max}},!1,!1,!1,!1)})}}}}]),i}(),e3e=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"_updateOptions",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],a=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(o){var l=[t.ctx];s&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach(function(c,u){var h=c.w;if(h.globals.shouldAnimate=r,n||(h.globals.resized=!0,h.globals.dataChanged=!0,r&&c.series.getPreviousPaths()),e&&Wg(e)==="object"&&(c.config=new Ix(e),e=ls.extendArrayProps(c.config,e,h),c.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,h.config=Ne.extend(h.config,e),a&&(h.globals.lastXAxis=e.xaxis?Ne.clone(e.xaxis):[],h.globals.lastYAxis=e.yaxis?Ne.clone(e.yaxis):[],h.globals.initialConfig=Ne.extend({},h.config),h.globals.initialSeries=Ne.clone(h.config.series),e.series))){for(var d=0;d<h.globals.collapsedSeriesIndices.length;d++){var A=h.config.series[h.globals.collapsedSeriesIndices[d]];h.globals.collapsedSeries[d].data=h.globals.axisCharts?A.data.slice():A}for(var x=0;x<h.globals.ancillaryCollapsedSeriesIndices.length;x++){var _=h.config.series[h.globals.ancillaryCollapsedSeriesIndices[x]];h.globals.ancillaryCollapsedSeries[x].data=h.globals.axisCharts?_.data.slice():_}c.series.emptyCollapsedSeries(h.config.series)}return c.update(e).then(function(){u===l.length-1&&o(c)})})})}},{key:"_updateSeries",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(s){var a,o=n.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&n.ctx.series.getPreviousPaths(),o.globals.axisCharts?((a=e.map(function(l,c){return n._extendSeries(l,c)})).length===0&&(a=[{data:[]}]),o.config.series=a):o.config.series=e.slice(),r&&(o.globals.initialConfig.series=Ne.clone(o.config.series),o.globals.initialSeries=Ne.clone(o.config.series)),n.ctx.update().then(function(){s(n.ctx)})})}},{key:"_extendSeries",value:function(e,t){var n=this.w,r=n.config.series[t];return Bt(Bt({},n.config.series[t]),{},{name:e.name?e.name:r==null?void 0:r.name,color:e.color?e.color:r==null?void 0:r.color,type:e.type?e.type:r==null?void 0:r.type,group:e.group?e.group:r==null?void 0:r.group,hidden:e.hidden!==void 0?e.hidden:r==null?void 0:r.hidden,data:e.data?e.data:r==null?void 0:r.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var n=this.w,r=null,s=".apexcharts-series[data\\:realIndex='".concat(e,"']");return n.globals.axisCharts?r=n.globals.dom.Paper.findOne("".concat(s," path[j='").concat(t,"'], ").concat(s," circle[j='").concat(t,"'], ").concat(s," rect[j='").concat(t,"']")):t===void 0&&(r=n.globals.dom.Paper.findOne("".concat(s," path[j='").concat(e,"']")),n.config.chart.type!=="pie"&&n.config.chart.type!=="polarArea"&&n.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),r?(new yt(this.ctx).pathMouseDown(r,null),r.node?r.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach(function(r){e.xaxis[r]!==void 0&&(t.config.xaxis[r]=e.xaxis[r],t.globals.lastXAxis[r]=e.xaxis[r])}),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var n=new Ox(e);e=n.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach(function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,n=this.w,r=n.globals.lastXAxis,s=n.globals.lastYAxis;e&&e.xaxis&&(r=e.xaxis),e&&e.yaxis&&(s=e.yaxis),n.config.xaxis.min=r.min,n.config.xaxis.max=r.max;var a=function(o){s[o]!==void 0&&(n.config.yaxis[o].min=s[o].min,n.config.yaxis[o].max=s[o].max)};n.config.yaxis.map(function(o,l){n.globals.zoomed||s[l]!==void 0?a(l):t.ctx.opts.yaxis[l]!==void 0&&(o.min=t.ctx.opts.yaxis[l].min,o.max=t.ctx.opts.yaxis[l].max)})}}]),i}();(function(){function i(){for(var s=arguments.length>0&&arguments[0]!==h?arguments[0]:[],a=arguments.length>1?arguments[1]:h,o=arguments.length>2?arguments[2]:h,l=arguments.length>3?arguments[3]:h,c=arguments.length>4?arguments[4]:h,u=arguments.length>5?arguments[5]:h,h=arguments.length>6?arguments[6]:h,d=s.slice(a,o||h),A=l.slice(c,u||h),x=0,_={pos:[0,0],start:[0,0]},S={pos:[0,0],start:[0,0]};d[x]=e.call(_,d[x]),A[x]=e.call(S,A[x]),d[x][0]!=A[x][0]||d[x][0]=="M"||d[x][0]=="A"&&(d[x][4]!=A[x][4]||d[x][5]!=A[x][5])?(Array.prototype.splice.apply(d,[x,1].concat(n.call(_,d[x]))),Array.prototype.splice.apply(A,[x,1].concat(n.call(S,A[x])))):(d[x]=t.call(_,d[x]),A[x]=t.call(S,A[x])),!(++x==d.length&&x==A.length);)x==d.length&&d.push(["C",_.pos[0],_.pos[1],_.pos[0],_.pos[1],_.pos[0],_.pos[1]]),x==A.length&&A.push(["C",S.pos[0],S.pos[1],S.pos[0],S.pos[1],S.pos[0],S.pos[1]]);return{start:d,dest:A}}function e(s){switch(s[0]){case"z":case"Z":s[0]="L",s[1]=this.start[0],s[2]=this.start[1];break;case"H":s[0]="L",s[2]=this.pos[1];break;case"V":s[0]="L",s[2]=s[1],s[1]=this.pos[0];break;case"T":s[0]="Q",s[3]=s[1],s[4]=s[2],s[1]=this.reflection[1],s[2]=this.reflection[0];break;case"S":s[0]="C",s[6]=s[4],s[5]=s[3],s[4]=s[2],s[3]=s[1],s[2]=this.reflection[1],s[1]=this.reflection[0]}return s}function t(s){var a=s.length;return this.pos=[s[a-2],s[a-1]],"SCQT".indexOf(s[0])!=-1&&(this.reflection=[2*this.pos[0]-s[a-4],2*this.pos[1]-s[a-3]]),s}function n(s){var a=[s];switch(s[0]){case"M":return this.pos=this.start=[s[1],s[2]],a;case"L":s[5]=s[3]=s[1],s[6]=s[4]=s[2],s[1]=this.pos[0],s[2]=this.pos[1];break;case"Q":s[6]=s[4],s[5]=s[3],s[4]=1*s[4]/3+2*s[2]/3,s[3]=1*s[3]/3+2*s[1]/3,s[2]=1*this.pos[1]/3+2*s[2]/3,s[1]=1*this.pos[0]/3+2*s[1]/3;break;case"A":a=function(o,l){var c,u,h,d,A,x,_,S,w,C,P,L,D,B,k,U,F,z,V,W,X,J,K,Y,ee,se,fe=Math.abs(l[1]),ne=Math.abs(l[2]),he=l[3]%360,Te=l[4],Pe=l[5],_e=l[6],Ie=l[7],Ve=new Wi(o),$e=new Wi(_e,Ie),Je=[];if(fe===0||ne===0||Ve.x===$e.x&&Ve.y===$e.y)return[["C",Ve.x,Ve.y,$e.x,$e.y,$e.x,$e.y]];for(c=new Wi((Ve.x-$e.x)/2,(Ve.y-$e.y)/2).transform(new Tn().rotate(he)),u=c.x*c.x/(fe*fe)+c.y*c.y/(ne*ne),u>1&&(fe*=u=Math.sqrt(u),ne*=u),h=new Tn().rotate(he).scale(1/fe,1/ne).rotate(-he),Ve=Ve.transform(h),$e=$e.transform(h),d=[$e.x-Ve.x,$e.y-Ve.y],x=d[0]*d[0]+d[1]*d[1],A=Math.sqrt(x),d[0]/=A,d[1]/=A,_=x<4?Math.sqrt(1-x/4):0,Te===Pe&&(_*=-1),S=new Wi(($e.x+Ve.x)/2+_*-d[1],($e.y+Ve.y)/2+_*d[0]),w=new Wi(Ve.x-S.x,Ve.y-S.y),C=new Wi($e.x-S.x,$e.y-S.y),P=Math.acos(w.x/Math.sqrt(w.x*w.x+w.y*w.y)),w.y<0&&(P*=-1),L=Math.acos(C.x/Math.sqrt(C.x*C.x+C.y*C.y)),C.y<0&&(L*=-1),Pe&&P>L&&(L+=2*Math.PI),!Pe&&P<L&&(L-=2*Math.PI),B=Math.ceil(2*Math.abs(P-L)/Math.PI),U=[],F=P,D=(L-P)/B,k=4*Math.tan(D/4)/3,X=0;X<=B;X++)V=Math.cos(F),z=Math.sin(F),W=new Wi(S.x+V,S.y+z),U[X]=[new Wi(W.x+k*z,W.y-k*V),W,new Wi(W.x-k*z,W.y+k*V)],F+=D;for(U[0][0]=U[0][1].clone(),U[U.length-1][2]=U[U.length-1][1].clone(),h=new Tn().rotate(he).scale(fe,ne).rotate(-he),X=0,J=U.length;X<J;X++)U[X][0]=U[X][0].transform(h),U[X][1]=U[X][1].transform(h),U[X][2]=U[X][2].transform(h);for(X=1,J=U.length;X<J;X++)K=(W=U[X-1][2]).x,Y=W.y,ee=(W=U[X][0]).x,se=W.y,_e=(W=U[X][1]).x,Ie=W.y,Je.push(["C",K,Y,ee,se,_e,Ie]);return Je}(this.pos,s),s=a[0]}return s[0]="C",this.pos=[s[5],s[6]],this.reflection=[2*s[5]-s[3],2*s[6]-s[4]],a}function r(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;if(a===!1)return!1;for(var o=a,l=s.length;o<l;++o)if(s[o][0]=="M")return o;return!1}On(Tc,{morph:function(s,a,o,l,c){for(var u=this.parse(s),h=this.parse(a),d=0,A=0,x=!1,_=!1;d!==!1||A!==!1;){var S;x=r(u,d!==!1&&d+1),_=r(h,A!==!1&&A+1),d===!1&&(d=(S=new Tc(w.start).bbox()).height==0||S.width==0?u.push(u[0])-1:u.push(["M",S.x+S.width/2,S.y+S.height/2])-1),A===!1&&(A=(S=new Tc(w.dest).bbox()).height==0||S.width==0?h.push(h[0])-1:h.push(["M",S.x+S.width/2,S.y+S.height/2])-1);var w=i(u,d,x,h,A,_);u=u.slice(0,d).concat(w.start,x===!1?[]:u.slice(x)),h=h.slice(0,A).concat(w.dest,_===!1?[]:h.slice(_)),d=x!==!1&&d+w.start.length,A=_!==!1&&A+w.dest.length}this._array=u,this.destination=new Tc,this.destination._array=h;var C=this.fromArray(u.map(function(P,L){var D=h[L].map(function(B,k){return k===0?B:l.step(P[k],h[L][k],o,c[L],c)});return D}));return C}})})();const s9=i=>(i.changedTouches&&(i=i.changedTouches[0]),{x:i.clientX,y:i.clientY});class t3e{constructor(e){e.remember("_draggable",this),this.el=e,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(e){const t=!e.type.indexOf("mouse");if(t&&e.which!==1&&e.buttons!==0||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)return;e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(s9(e));const n=(t?"mouseup":"touchend")+".drag";Sh(window,(t?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),Sh(window,n,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}drag(e){const{box:t,lastClick:n}=this,r=this.el.point(s9(e)),s=r.x-n.x,a=r.y-n.y;if(!s&&!a)return t;const o=t.x+s,l=t.y+a;this.box=new as(o,l,t.w,t.h),this.lastClick=r,this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented||this.move(o,l)}move(e,t){this.el.type==="svg"?ad.prototype.move.call(this.el,e,t):this.el.move(e,t)}endDrag(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),zl(window,"mousemove.drag"),zl(window,"touchmove.drag"),zl(window,"mouseup.drag"),zl(window,"touchend.drag"),this.init(!0)}}/*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schäfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function a5(i,e,t,n=null){return function(r){r.preventDefault(),r.stopPropagation();var s=r.pageX||r.touches[0].pageX,a=r.pageY||r.touches[0].pageY;e.fire(i,{x:s,y:a,event:r,index:n,points:t})}}function o5([i,e],{a:t,b:n,c:r,d:s,e:a,f:o}){return[i*t+e*r+a,i*n+e*s+o]}On(_a,{draggable(i=!0){return(this.remember("_draggable")||new t3e(this)).init(i),this}});let vX=class{constructor(i){this.el=i,i.remember("_selectHandler",this),this.selection=new ad,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=w1();this.observer=new e.MutationObserver(this.mutationHandler)}init(i){this.createHandle=i.createHandle||this.createHandleFn,this.createRot=i.createRot||this.createRotFn,this.updateHandle=i.updateHandle||this.updateHandleFn,this.updateRot=i.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(i,e){if(!i)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((i,e,t)=>{const n=this.order[e];this.createHandle.call(this,this.selection,i,e,t,n),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",a5(n,this.el,this.handlePoints,e))})}createHandleFn(i){i.polyline()}updateHandleFn(i,e,t,n){const r=n.at(t-1),s=n[(t+1)%n.length],a=e,o=[a[0]-r[0],a[1]-r[1]],l=[a[0]-s[0],a[1]-s[1]],c=Math.sqrt(o[0]*o[0]+o[1]*o[1]),u=Math.sqrt(l[0]*l[0]+l[1]*l[1]),h=[o[0]/c,o[1]/c],d=[l[0]/u,l[1]/u],A=[a[0]-10*h[0],a[1]-10*h[1]],x=[a[0]-10*d[0],a[1]-10*d[1]];i.plot([A,a,x])}updateResizeHandles(){this.handlePoints.forEach((i,e,t)=>{const n=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),i,e,t,n)})}createRotFn(i){i.line(),i.circle(5)}getPoint(i){return this.handlePoints[this.order.indexOf(i)]}getPointHandle(i){return this.selection.get(this.order.indexOf(i)+1)}updateRotFn(i,e){const t=this.getPoint("t");i.get(0).plot(t[0],t[1],e[0],e[1]),i.get(1).center(e[0],e[1])}createRotationHandle(){const i=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",a5("rot",this.el,this.handlePoints));this.createRot.call(this,i)}updateRotationHandle(){const i=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(i,this.rotationPoint,this.handlePoints)}updatePoints(){const i=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(i).map(t=>o5(t,e)),this.rotationPoint=o5(this.getRotationPoint(i),e)}getHandlePoints({x:i,x2:e,y:t,y2:n,cx:r,cy:s}=this.el.bbox()){return[[i,t],[r,t],[e,t],[e,s],[e,n],[r,n],[i,n],[i,s]]}getRotationPoint({y:i,cx:e}=this.el.bbox()){return[e,i-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const a9=i=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let n=this.remember("_"+i.name);return n||(e.prototype instanceof vX?(n=new e(this),e=!0):n=new i(this),this.remember("_"+i.name,n)),n.active(e,t),this};/*!
* @svgdotjs/svg.resize.js - An extension for svg.js which allows to resize elements which are selected
* @version 2.0.4
* https://github.com/svgdotjs/svg.resize.js
*
* @copyright [object Object]
* @license MIT
*
* BUILT: Fri Sep 13 2024 12:43:14 GMT+0200 (Central European Summer Time)
*//*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schäfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function l5(i,e,t,n=null){return function(r){r.preventDefault(),r.stopPropagation();var s=r.pageX||r.touches[0].pageX,a=r.pageY||r.touches[0].pageY;e.fire(i,{x:s,y:a,event:r,index:n,points:t})}}function c5([i,e],{a:t,b:n,c:r,d:s,e:a,f:o}){return[i*t+e*r+a,i*n+e*s+o]}On(_a,{select:a9(vX)}),On([Mp,Ep,Tp],{pointSelect:a9(class{constructor(i){this.el=i,i.remember("_pointSelectHandler",this),this.selection=new ad,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=w1();this.observer=new e.MutationObserver(this.mutationHandler)}init(i){this.createHandle=i.createHandle||this.createHandleFn,this.updateHandle=i.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(i,e){if(!i)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((i,e,t)=>{this.createHandle.call(this,this.selection,i,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",a5("point",this.el,this.points,e))})}createHandleFn(i){i.circle(5)}updateHandleFn(i,e){i.center(e[0],e[1])}updatePointHandles(){this.points.forEach((i,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),i,e,t)})}updatePoints(){const i=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>o5(e,i))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class yX{constructor(e){this.el=e,e.remember("_selectHandler",this),this.selection=new ad,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=w1();this.observer=new t.MutationObserver(this.mutationHandler)}init(e){this.createHandle=e.createHandle||this.createHandleFn,this.createRot=e.createRot||this.createRotFn,this.updateHandle=e.updateHandle||this.updateHandleFn,this.updateRot=e.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(e,t){if(!e)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((e,t,n)=>{const r=this.order[t];this.createHandle.call(this,this.selection,e,t,n,r),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+r).on("mousedown.selection touchstart.selection",l5(r,this.el,this.handlePoints,t))})}createHandleFn(e){e.polyline()}updateHandleFn(e,t,n,r){const s=r.at(n-1),a=r[(n+1)%r.length],o=t,l=[o[0]-s[0],o[1]-s[1]],c=[o[0]-a[0],o[1]-a[1]],u=Math.sqrt(l[0]*l[0]+l[1]*l[1]),h=Math.sqrt(c[0]*c[0]+c[1]*c[1]),d=[l[0]/u,l[1]/u],A=[c[0]/h,c[1]/h],x=[o[0]-10*d[0],o[1]-10*d[1]],_=[o[0]-10*A[0],o[1]-10*A[1]];e.plot([x,o,_])}updateResizeHandles(){this.handlePoints.forEach((e,t,n)=>{const r=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),e,t,n,r)})}createRotFn(e){e.line(),e.circle(5)}getPoint(e){return this.handlePoints[this.order.indexOf(e)]}getPointHandle(e){return this.selection.get(this.order.indexOf(e)+1)}updateRotFn(e,t){const n=this.getPoint("t");e.get(0).plot(n[0],n[1],t[0],t[1]),e.get(1).center(t[0],t[1])}createRotationHandle(){const e=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",l5("rot",this.el,this.handlePoints));this.createRot.call(this,e)}updateRotationHandle(){const e=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(e,this.rotationPoint,this.handlePoints)}updatePoints(){const e=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(e).map(n=>c5(n,t)),this.rotationPoint=c5(this.getRotationPoint(e),t)}getHandlePoints({x:e,x2:t,y:n,y2:r,cx:s,cy:a}=this.el.bbox()){return[[e,n],[s,n],[t,n],[t,a],[t,r],[s,r],[e,r],[e,a]]}getRotationPoint({y:e,cx:t}=this.el.bbox()){return[t,e-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const o9=i=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let n=this.remember("_"+i.name);return n||(e.prototype instanceof yX?(n=new e(this),e=!0):n=new i(this),this.remember("_"+i.name,n)),n.active(e,t),this};On(_a,{select:o9(yX)}),On([Mp,Ep,Tp],{pointSelect:o9(class{constructor(i){this.el=i,i.remember("_pointSelectHandler",this),this.selection=new ad,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=w1();this.observer=new e.MutationObserver(this.mutationHandler)}init(i){this.createHandle=i.createHandle||this.createHandleFn,this.updateHandle=i.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(i,e){if(!i)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((i,e,t)=>{this.createHandle.call(this,this.selection,i,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",l5("point",this.el,this.points,e))})}createHandleFn(i){i.circle(5)}updateHandleFn(i,e){i.center(e[0],e[1])}updatePointHandles(){this.points.forEach((i,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),i,e,t)})}updatePoints(){const i=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>c5(e,i))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const m_=i=>(i.changedTouches&&(i=i.changedTouches[0]),{x:i.clientX,y:i.clientY}),l9=i=>{let e=1/0,t=1/0,n=-1/0,r=-1/0;for(let s=0;s<i.length;s++){const a=i[s];e=Math.min(e,a[0]),t=Math.min(t,a[1]),n=Math.max(n,a[0]),r=Math.max(r,a[1])}return new as(e,t,n-e,r-t)};class c9{constructor(e){this.el=e,e.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(e,t){this.preserveAspectRatio=t.preserveAspectRatio??!1,this.aroundCenter=t.aroundCenter??!1,this.grid=t.grid??0,this.degree=t.degree??0,this.el.off(".resize"),e&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(e){this.eventType=e.type;const{event:t,index:n,points:r}=e.detail,s=!t.type.indexOf("mouse");if(s&&(t.which||t.buttons)!==1||this.el.dispatch("beforeresize",{event:e,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(m_(t)),this.index=n,this.points=r.slice();const a=(s?"mousemove":"touchmove")+".resize",o=(s?"mouseup":"touchcancel.resize touchend")+".resize";e.type==="point"?Sh(window,a,this.movePoint):e.type==="rot"?Sh(window,a,this.rotate):Sh(window,a,this.resize),Sh(window,o,this.endResize)}resize(e){this.lastEvent=e;const t=this.snapToGrid(this.el.point(m_(e)));let n=t.x-this.startPoint.x,r=t.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(n*=2,r*=2);const s=this.box.x+n,a=this.box.y+r,o=this.box.x2+n,l=this.box.y2+r;let c=new as(this.box);if(this.eventType.includes("l")&&(c.x=Math.min(s,this.box.x2),c.x2=Math.max(s,this.box.x2)),this.eventType.includes("r")&&(c.x=Math.min(o,this.box.x),c.x2=Math.max(o,this.box.x)),this.eventType.includes("t")&&(c.y=Math.min(a,this.box.y2),c.y2=Math.max(a,this.box.y2)),this.eventType.includes("b")&&(c.y=Math.min(l,this.box.y),c.y2=Math.max(l,this.box.y)),c.width=c.x2-c.x,c.height=c.y2-c.y,this.preserveAspectRatio){const u=c.width/this.box.width,h=c.height/this.box.height,d=["lt","t","rt","r","rb","b","lb","l"],A=(d.indexOf(this.eventType)+4)%d.length,x=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[A];let _=this.eventType.includes("t")||this.eventType.includes("b")?h:u;_=this.eventType.length===2?Math.max(u,h):_,c=function(S,w,C){const P=[[S.x,S.y],[S.x+S.width,S.y],[S.x+S.width,S.y+S.height],[S.x,S.y+S.height]].map(([L,D])=>{const B=L-w[0],k=(D-w[1])*C;return[B*C+w[0],k+w[1]]});return l9(P)}(this.box,x,_)}this.el.dispatch("resize",{box:new as(c),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.size(c.width,c.height).move(c.x,c.y)}movePoint(e){this.lastEvent=e;const{x:t,y:n}=this.snapToGrid(this.el.point(m_(e))),r=this.el.array().slice();r[this.index]=[t,n],this.el.dispatch("resize",{box:l9(r),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.plot(r)}rotate(e){this.lastEvent=e;const t=this.startPoint,n=this.el.point(m_(e)),{cx:r,cy:s}=this.box,a=t.x-r,o=t.y-s,l=n.x-r,c=n.y-s,u=Math.sqrt(a*a+o*o)*Math.sqrt(l*l+c*c);if(u===0)return;let h=Math.acos((a*l+o*c)/u)/Math.PI*180;if(!h)return;n.x<t.x&&(h=-h);const d=new Tn(this.el),{x:A,y:x}=new Wi(r,s).transformO(d),{rotate:_}=d.decompose(),S=this.snapToAngle(_+h)-_;this.el.dispatch("resize",{box:this.box,angle:S,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.transform(d.rotateO(S,A,x))}endResize(e){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(e),this.lastEvent=null,this.eventType="",zl(window,"mousemove.resize touchmove.resize"),zl(window,"mouseup.resize touchend.resize")}snapToGrid(e){return this.grid&&(e.x=Math.round(e.x/this.grid)*this.grid,e.y=Math.round(e.y/this.grid)*this.grid),e}snapToAngle(e){return this.degree&&(e=Math.round(e/this.degree)*this.degree),e}}On(_a,{resize:function(i=!0,e={}){typeof i=="object"&&(e=i,i=!0);let t=this.remember("_ResizeHandler");return t||(i.prototype instanceof c9?(t=new i(this),i=!0):t=new c9(this),this.remember("_resizeHandler",t)),t.active(i,e),this}}),window.SVG===void 0&&(window.SVG=gTe),window.Apex===void 0&&(window.Apex={});var u9=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new pm(this.ctx),this.ctx.axes=new MTe(this.ctx),this.ctx.core=new JTe(this.ctx.el,this.ctx),this.ctx.config=new Ix({}),this.ctx.data=new XP(this.ctx),this.ctx.grid=new lX(this.ctx),this.ctx.graphics=new yt(this.ctx),this.ctx.coreUtils=new ls(this.ctx),this.ctx.crosshairs=new s5(this.ctx),this.ctx.events=new STe(this.ctx),this.ctx.exports=new By(this.ctx),this.ctx.fill=new Nc(this.ctx),this.ctx.localization=new TTe(this.ctx),this.ctx.options=new vp,this.ctx.responsive=new ETe(this.ctx),this.ctx.series=new Hl(this.ctx),this.ctx.theme=new CTe(this.ctx),this.ctx.formatters=new M1(this.ctx),this.ctx.titleSubtitle=new RTe(this.ctx),this.ctx.legend=new uX(this.ctx),this.ctx.toolbar=new hX(this.ctx),this.ctx.tooltip=new i9(this.ctx),this.ctx.dimensions=new gS(this.ctx),this.ctx.updateHelpers=new e3e(this.ctx),this.ctx.zoomPanSelection=new OTe(this.ctx),this.ctx.w.globals.tooltip=new i9(this.ctx)}}]),i}(),h9=function(){function i(e){Kt(this,i),this.ctx=e,this.w=e.w}return Jt(i,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each(function(){this.removeClass("*"),this.off()},!0),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,n=e.isUpdating,r=this.w.globals.dom.Paper.node;r.parentNode&&r.parentNode.parentNode&&!n&&(r.parentNode.parentNode.style.minHeight="unset");var s=this.w.globals.dom.baseEl;s&&this.ctx.eventList.forEach(function(o){s.removeEventListener(o,t.ctx.events.documentEvent)});var a=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(a.Paper),a.Paper.remove(),a.elWrap=null,a.elGraphical=null,a.elLegendWrap=null,a.elLegendForeign=null,a.baseEl=null,a.elGridRect=null,a.elGridRectMask=null,a.elGridRectBarMask=null,a.elGridRectMarkerMask=null,a.elForecastMask=null,a.elNonForecastMask=null,a.elDefs=null}}]),i}(),qC=new WeakMap,n3e=function(){function i(e,t){Kt(this,i),this.opts=t,this.ctx=this,this.w=new wTe(t).init(),this.el=e,this.w.globals.cuid=Ne.randomId(),this.w.globals.chartID=this.w.config.chart.id?Ne.escapeString(this.w.config.chart.id):this.w.globals.cuid,new u9(this).initModules(),this.lastUpdateOptions=null,this.create=Ne.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Jt(i,[{key:"render",value:function(){var e=this;return new Promise(function(t,n){if(Ne.elementExists(e.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var r=e.w.config.chart.events.beforeMount;typeof r=="function"&&r(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(d,A){var x=!1;if(d.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var _=d.getBoundingClientRect();d.style.display!=="none"&&_.width!==0||(x=!0)}var S=new ResizeObserver(function(w){x&&A.call(d,w),x=!0});d.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(d.children).forEach(function(w){return S.observe(w)}):S.observe(d),qC.set(A,S)}(e.el.parentNode,e.parentResizeHandler);var s=e.el.getRootNode&&e.el.getRootNode(),a=Ne.is("ShadowRoot",s),o=e.el.ownerDocument,l=a?s.getElementById("apexcharts-css"):o.getElementById("apexcharts-css");if(!l){var c;(l=document.createElement("style")).id="apexcharts-css",l.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  display: inline-block;
  position: relative;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 16px;
  margin-right: 4px;
  text-align: center;
  vertical-align: middle;
  color: inherit;
}

.apexcharts-tooltip-marker::before {
  content: "";
  display: inline-block;
  width: 100%;
  text-align: center;
  color: currentcolor;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-size: 26px;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 14px;
  font-weight: 900;
}

.apexcharts-tooltip-marker[shape="circle"]::before {
  content: "\\25CF";
}

.apexcharts-tooltip-marker[shape="square"]::before,
.apexcharts-tooltip-marker[shape="rect"]::before {
  content: "\\25A0";
  transform: translate(-1px, -2px);
}

.apexcharts-tooltip-marker[shape="line"]::before {
  content: "\\2500";
}

.apexcharts-tooltip-marker[shape="diamond"]::before {
  content: "\\25C6";
  font-size: 28px;
}

.apexcharts-tooltip-marker[shape="triangle"]::before {
  content: "\\25B2";
  font-size: 22px;
}

.apexcharts-tooltip-marker[shape="cross"]::before {
  content: "\\2715";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="plus"]::before {
  content: "\\2715";
  transform: rotate(45deg) translate(-1px, -1px);
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="star"]::before {
  content: "\\2605";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="sparkle"]::before {
  content: "\\2726";
  font-size: 20px;
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.apexcharts-radar-series .apexcharts-yaxis {
  pointer-events: none;
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}

.apexcharts-disable-transitions * {
  transition: none !important;
}`;var u=((c=e.opts.chart)===null||c===void 0?void 0:c.nonce)||e.w.config.chart.nonce;u&&l.setAttribute("nonce",u),a?s.prepend(l):o.head.appendChild(l)}var h=e.create(e.w.config.series,{});if(!h)return t(e);e.mount(h).then(function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(h)}).catch(function(d){n(d)})}else n(new Error("Element not found"))})}},{key:"create",value:function(e,t){var n=this,r=this.w;new u9(this).initModules();var s=this.w.globals;if(s.noData=!1,s.animationEnded=!1,!Ne.elementExists(this.el)||(this.responsive.checkResponsiveConfig(t),r.config.xaxis.convertedCatToNumeric&&new Ox(r.config).convertCatToNumericXaxis(r.config,this.ctx),this.core.setupElements(),r.config.chart.type==="treemap"&&(r.config.grid.show=!1,r.config.yaxis[0].show=!1),s.svgWidth===0))return s.animationEnded=!0,null;var a=e;e.forEach(function(d,A){d.hidden&&(a=n.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:A}))});var o=ls.checkComboSeries(a,r.config.chart.type);s.comboCharts=o.comboCharts,s.comboBarCount=o.comboBarCount;var l=a.every(function(d){return d.data&&d.data.length===0});(a.length===0||l&&s.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(a),this.theme.init(),new vm(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),s.noData&&s.collapsedSeries.length!==s.series.length&&!r.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),s.axisCharts&&(this.core.coreCalculations(),r.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=r.globals.minX,this.ctx.toolbar.maxX=r.globals.maxX),this.formatters.heatmapLabelFormatters(),new ls(this).getLargestMarkerSize(),this.dimensions.plotCoords();var c=this.core.xySettings();this.grid.createGridMask();var u=this.core.plotChartType(a,c),h=new jg(this);return h.bringForward(),r.config.dataLabels.background.enabled&&h.dataLabelsBackground(),this.core.shiftGraphPosition(),r.globals.dataPoints>50&&r.globals.dom.elWrap.classList.add("apexcharts-disable-transitions"),{elGraph:u,xyRatios:c,dimensions:{plot:{left:r.globals.translateX,top:r.globals.translateY,width:r.globals.gridWidth,height:r.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=this,r=n.w;return new Promise(function(s,a){if(n.el===null)return a(new Error("Not enough data to display or target element not found"));(t===null||r.globals.allSeriesCollapsed)&&n.series.handleNoData(),n.grid=new lX(n);var o,l,c=n.grid.drawGrid();if(n.annotations=new _Te(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),r.config.grid.position==="back"&&(c&&r.globals.dom.elGraphical.add(c.el),c!=null&&(o=c.elGridBorders)!==null&&o!==void 0&&o.node&&r.globals.dom.elGraphical.add(c.elGridBorders)),Array.isArray(t.elGraph))for(var u=0;u<t.elGraph.length;u++)r.globals.dom.elGraphical.add(t.elGraph[u]);else r.globals.dom.elGraphical.add(t.elGraph);r.config.grid.position==="front"&&(c&&r.globals.dom.elGraphical.add(c.el),c!=null&&(l=c.elGridBorders)!==null&&l!==void 0&&l.node&&r.globals.dom.elGraphical.add(c.elGridBorders)),r.config.xaxis.crosshairs.position==="front"&&n.crosshairs.drawXCrosshairs(),r.config.yaxis[0].crosshairs.position==="front"&&n.crosshairs.drawYCrosshairs(),r.config.chart.type!=="treemap"&&n.axes.drawAxis(r.config.chart.type,c);var h=new Bx(e.ctx,c),d=new YP(e.ctx,c);if(c!==null&&(h.xAxisLabelCorrections(c.xAxisTickWidth),d.setYAxisTextAlignments(),r.config.yaxis.map(function(x,_){r.globals.ignoreYAxisIndexes.indexOf(_)===-1&&d.yAxisTitleRotate(_,x.opposite)})),n.annotations.drawAxesAnnotations(),!r.globals.noData){if(r.config.tooltip.enabled&&!r.globals.noData&&n.w.globals.tooltip.drawTooltip(t.xyRatios),r.globals.axisCharts&&(r.globals.isXNumeric||r.config.xaxis.convertedCatToNumeric||r.globals.isRangeBar))(r.config.chart.zoom.enabled||r.config.chart.selection&&r.config.chart.selection.enabled||r.config.chart.pan&&r.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:t.xyRatios});else{var A=r.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(x){A[x]=!1})}r.config.chart.toolbar.show&&!r.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}r.globals.memory.methodsToExec.length>0&&r.globals.memory.methodsToExec.forEach(function(x){x.method(x.params,!1,x.context)}),r.globals.axisCharts||r.globals.noData||n.core.resizeNonAxisCharts(),s(n)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(t,n){var r=qC.get(n);r&&(r.disconnect(),qC.delete(n))}(this.el.parentNode,this.parentResizeHandler);var e=this.w.config.chart.id;e&&Apex._chartInstances.forEach(function(t,n){t.id===Ne.escapeString(e)&&Apex._chartInstances.splice(n,1)}),new h9(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=this.w;return o.globals.selection=void 0,this.lastUpdateOptions&&JSON.stringify(this.lastUpdateOptions)===JSON.stringify(e)?this:(this.lastUpdateOptions=Ne.clone(e),e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map(function(l,c){return t.updateHelpers._extendSeries(l,c)})),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,n,r,s,a))}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,n)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=this.w.config.series.slice();return r.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,t,n)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var r=n.w.config.series.slice(),s=0;s<r.length;s++)if(e[s]!==null&&e[s]!==void 0)for(var a=0;a<e[s].data.length;a++)r[s].data.push(e[s].data[a]);return n.w.config.series=r,t&&(n.w.globals.initialSeries=Ne.clone(n.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise(function(n,r){if(t.lastUpdateOptions&&JSON.stringify(t.lastUpdateOptions)===JSON.stringify(e))return n(t);t.lastUpdateOptions=Ne.clone(e),new h9(t.ctx).clear({isUpdating:!0});var s=t.create(t.w.config.series,e);if(!s)return n(t);t.mount(s).then(function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,n(t)}).catch(function(a){r(a)})})}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach(function(n){t.push(n)})),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(t){return e.w.config.chart.group===t.group?t.chart:e})}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addXaxisAnnotationExternal(e,t,r)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addYaxisAnnotationExternal(e,t,r)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addPointAnnotationExternal(e,t,r)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=this;t&&(n=t),n.annotations.removeAnnotation(n,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new r5(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new r5(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new By(this.ctx).dataURI(e)}},{key:"getSvgString",value:function(e){return new By(this.ctx).getSvgString(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new By(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=Ne.escapeString(e);if(Apex._chartInstances){var n=Apex._chartInstances.filter(function(r){return r.id===t})[0];return n&&n.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new i(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var n=this.getChartByID(e);if(n){n.w.globals.isExecCalled=!0;var r=null;if(n.publicMethods.indexOf(t)!==-1){for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];r=n[t].apply(n,a)}return r}}},{key:"merge",value:function(e,t){return Ne.extend(e,t)}}]),i}();const v_={series:[{name:"Мужчины",data:[48,102,90,58,22]},{name:"Женщины",data:[102,218,190,122,48]}],categories:["18-25 лет","26-35 лет","36-45 лет","46-55 лет","56+ лет"],title:"Демографические показатели",yAxisTitle:"Возраст"},i3e="/assets/image1-DTEZXg5f.webp",r3e=()=>{const i=ye.useRef(null),e=ye.useRef(null);return ye.useEffect(()=>{const t={series:v_.series,chart:{type:"bar",width:"100%",stacked:!0},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!1}}}},stroke:{width:1,colors:["black"]},title:{text:v_.title},xaxis:{categories:v_.categories},yaxis:{title:{text:v_.yAxisTitle}},fill:{opacity:1},legend:{position:"top",horizontalAlign:"left",offsetX:40}};return(async()=>{e.current&&(i.current&&i.current.destroy(),i.current=new n3e(e.current,t),await i.current.render())})().catch(console.error),()=>{i.current&&i.current.destroy()}},[]),Hi.jsx("section",{className:"demography",id:"demography-section",children:Hi.jsx("div",{className:"container",children:Hi.jsxs("div",{className:"demography__content",children:[Hi.jsxs("div",{className:"demography__hero",children:[Hi.jsx("img",{src:i3e,className:"demography__image",alt:"demogaphyHero",loading:"lazy"}),Hi.jsx("h2",{className:"demography__h2",children:"Йога объединяет всех!"})]}),Hi.jsx("div",{ref:e,id:"demography-chart",className:"demography__char"}),Hi.jsxs("div",{className:"demography__descr",children:[Hi.jsx("p",{children:"В нашей практике участвуют люди самых разных возрастов — от студентов до пенсионеров. И это прекрасно!"}),Hi.jsx("p",{children:"В Isha Yoga Center мы создали программы, которые идеально подходят для каждого этапа жизни. Молодым — энергичные практики для активного дня, старшему поколению — мягкие и глубокие техники для здоровья и гармонии."})]})]})})})};function Aa(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var s3e=typeof Symbol=="function"&&Symbol.observable||"@@observable",f9=s3e,WC=()=>Math.random().toString(36).substring(7).split("").join("."),a3e={INIT:`@@redux/INIT${WC()}`,REPLACE:`@@redux/REPLACE${WC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${WC()}`},mS=a3e;function $P(i){if(typeof i!="object"||i===null)return!1;let e=i;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e||Object.getPrototypeOf(i)===null}function xX(i,e,t){if(typeof i!="function")throw new Error(Aa(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Aa(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Aa(1));return t(xX)(i,e)}let n=i,r=e,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((S,w)=>{a.set(w,S)}))}function u(){if(l)throw new Error(Aa(3));return r}function h(S){if(typeof S!="function")throw new Error(Aa(4));if(l)throw new Error(Aa(5));let w=!0;c();const C=o++;return a.set(C,S),function(){if(w){if(l)throw new Error(Aa(6));w=!1,c(),a.delete(C),s=null}}}function d(S){if(!$P(S))throw new Error(Aa(7));if(typeof S.type>"u")throw new Error(Aa(8));if(typeof S.type!="string")throw new Error(Aa(17));if(l)throw new Error(Aa(9));try{l=!0,r=n(r,S)}finally{l=!1}return(s=a).forEach(C=>{C()}),S}function A(S){if(typeof S!="function")throw new Error(Aa(10));n=S,d({type:mS.REPLACE})}function x(){const S=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Aa(11));function C(){const L=w;L.next&&L.next(u())}return C(),{unsubscribe:S(C)}},[f9](){return this}}}return d({type:mS.INIT}),{dispatch:d,subscribe:h,getState:u,replaceReducer:A,[f9]:x}}function o3e(i){Object.keys(i).forEach(e=>{const t=i[e];if(typeof t(void 0,{type:mS.INIT})>"u")throw new Error(Aa(12));if(typeof t(void 0,{type:mS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Aa(13))})}function l3e(i){const e=Object.keys(i),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof i[a]=="function"&&(t[a]=i[a])}const n=Object.keys(t);let r;try{o3e(t)}catch(s){r=s}return function(a={},o){if(r)throw r;let l=!1;const c={};for(let u=0;u<n.length;u++){const h=n[u],d=t[h],A=a[h],x=d(A,o);if(typeof x>"u")throw o&&o.type,new Error(Aa(14));c[h]=x,l=l||x!==A}return l=l||n.length!==Object.keys(a).length,l?c:a}}function vS(...i){return i.length===0?e=>e:i.length===1?i[0]:i.reduce((e,t)=>(...n)=>e(t(...n)))}function c3e(...i){return e=>(t,n)=>{const r=e(t,n);let s=()=>{throw new Error(Aa(15))};const a={getState:r.getState,dispatch:(l,...c)=>s(l,...c)},o=i.map(l=>l(a));return s=vS(...o)(r.dispatch),{...r,dispatch:s}}}function u3e(i){return $P(i)&&"type"in i&&typeof i.type=="string"}var bX=Symbol.for("immer-nothing"),d9=Symbol.for("immer-draftable"),ll=Symbol.for("immer-state");function xc(i,...e){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var Yg=Object.getPrototypeOf;function Jp(i){return!!i&&!!i[ll]}function zh(i){var e;return i?_X(i)||Array.isArray(i)||!!i[d9]||!!((e=i.constructor)!=null&&e[d9])||NT(i)||LT(i):!1}var h3e=Object.prototype.constructor.toString();function _X(i){if(!i||typeof i!="object")return!1;const e=Yg(i);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===h3e}function yS(i,e){PT(i)===0?Reflect.ownKeys(i).forEach(t=>{e(t,i[t],i)}):i.forEach((t,n)=>e(n,t,i))}function PT(i){const e=i[ll];return e?e.type_:Array.isArray(i)?1:NT(i)?2:LT(i)?3:0}function u5(i,e){return PT(i)===2?i.has(e):Object.prototype.hasOwnProperty.call(i,e)}function wX(i,e,t){const n=PT(i);n===2?i.set(e,t):n===3?i.add(t):i[e]=t}function f3e(i,e){return i===e?i!==0||1/i===1/e:i!==i&&e!==e}function NT(i){return i instanceof Map}function LT(i){return i instanceof Set}function hp(i){return i.copy_||i.base_}function h5(i,e){if(NT(i))return new Map(i);if(LT(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const t=_X(i);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(i);delete n[ll];let r=Reflect.ownKeys(n);for(let s=0;s<r.length;s++){const a=r[s],o=n[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:i[a]})}return Object.create(Yg(i),n)}else{const n=Yg(i);if(n!==null&&t)return{...i};const r=Object.create(n);return Object.assign(r,i)}}function QP(i,e=!1){return DT(i)||Jp(i)||!zh(i)||(PT(i)>1&&(i.set=i.add=i.clear=i.delete=d3e),Object.freeze(i),e&&Object.entries(i).forEach(([t,n])=>QP(n,!0))),i}function d3e(){xc(2)}function DT(i){return Object.isFrozen(i)}var p3e={};function eA(i){const e=p3e[i];return e||xc(0,i),e}var Fx;function SX(){return Fx}function A3e(i,e){return{drafts_:[],parent_:i,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function p9(i,e){e&&(eA("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=e)}function f5(i){d5(i),i.drafts_.forEach(g3e),i.drafts_=null}function d5(i){i===Fx&&(Fx=i.parent_)}function A9(i){return Fx=A3e(Fx,i)}function g3e(i){const e=i[ll];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function g9(i,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return i!==void 0&&i!==t?(t[ll].modified_&&(f5(e),xc(4)),zh(i)&&(i=xS(e,i),e.parent_||bS(e,i)),e.patches_&&eA("Patches").generateReplacementPatches_(t[ll].base_,i,e.patches_,e.inversePatches_)):i=xS(e,t,[]),f5(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),i!==bX?i:void 0}function xS(i,e,t){if(DT(e))return e;const n=e[ll];if(!n)return yS(e,(r,s)=>m9(i,n,e,r,s,t)),e;if(n.scope_!==i)return e;if(!n.modified_)return bS(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const r=n.copy_;let s=r,a=!1;n.type_===3&&(s=new Set(r),r.clear(),a=!0),yS(s,(o,l)=>m9(i,n,r,o,l,t,a)),bS(i,r,!1),t&&i.patches_&&eA("Patches").generatePatches_(n,t,i.patches_,i.inversePatches_)}return n.copy_}function m9(i,e,t,n,r,s,a){if(Jp(r)){const o=s&&e&&e.type_!==3&&!u5(e.assigned_,n)?s.concat(n):void 0,l=xS(i,r,o);if(wX(t,n,l),Jp(l))i.canAutoFreeze_=!1;else return}else a&&t.add(r);if(zh(r)&&!DT(r)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;xS(i,r),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&bS(i,r)}}function bS(i,e,t=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&QP(e,t)}function m3e(i,e){const t=Array.isArray(i),n={type_:t?1:0,scope_:e?e.scope_:SX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=n,s=ZP;t&&(r=[n],s=Ux);const{revoke:a,proxy:o}=Proxy.revocable(r,s);return n.draft_=o,n.revoke_=a,o}var ZP={get(i,e){if(e===ll)return i;const t=hp(i);if(!u5(t,e))return v3e(i,t,e);const n=t[e];return i.finalized_||!zh(n)?n:n===jC(i.base_,e)?(XC(i),i.copy_[e]=A5(n,i)):n},has(i,e){return e in hp(i)},ownKeys(i){return Reflect.ownKeys(hp(i))},set(i,e,t){const n=TX(hp(i),e);if(n!=null&&n.set)return n.set.call(i.draft_,t),!0;if(!i.modified_){const r=jC(hp(i),e),s=r==null?void 0:r[ll];if(s&&s.base_===t)return i.copy_[e]=t,i.assigned_[e]=!1,!0;if(f3e(t,r)&&(t!==void 0||u5(i.base_,e)))return!0;XC(i),p5(i)}return i.copy_[e]===t&&(t!==void 0||e in i.copy_)||Number.isNaN(t)&&Number.isNaN(i.copy_[e])||(i.copy_[e]=t,i.assigned_[e]=!0),!0},deleteProperty(i,e){return jC(i.base_,e)!==void 0||e in i.base_?(i.assigned_[e]=!1,XC(i),p5(i)):delete i.assigned_[e],i.copy_&&delete i.copy_[e],!0},getOwnPropertyDescriptor(i,e){const t=hp(i),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:i.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){xc(11)},getPrototypeOf(i){return Yg(i.base_)},setPrototypeOf(){xc(12)}},Ux={};yS(ZP,(i,e)=>{Ux[i]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ux.deleteProperty=function(i,e){return Ux.set.call(this,i,e,void 0)};Ux.set=function(i,e,t){return ZP.set.call(this,i[0],e,t,i[0])};function jC(i,e){const t=i[ll];return(t?hp(t):i)[e]}function v3e(i,e,t){var r;const n=TX(e,t);return n?"value"in n?n.value:(r=n.get)==null?void 0:r.call(i.draft_):void 0}function TX(i,e){if(!(e in i))return;let t=Yg(i);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Yg(t)}}function p5(i){i.modified_||(i.modified_=!0,i.parent_&&p5(i.parent_))}function XC(i){i.copy_||(i.copy_=h5(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var y3e=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...c){return a.produce(l,u=>t.call(this,u,...c))}}typeof t!="function"&&xc(6),n!==void 0&&typeof n!="function"&&xc(7);let r;if(zh(e)){const s=A9(this),a=A5(e,void 0);let o=!0;try{r=t(a),o=!1}finally{o?f5(s):d5(s)}return p9(s,n),g9(r,s)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===bX&&(r=void 0),this.autoFreeze_&&QP(r,!0),n){const s=[],a=[];eA("Patches").generateReplacementPatches_(e,r,s,a),n(s,a)}return r}else xc(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let n,r;return[this.produce(e,t,(a,o)=>{n=a,r=o}),n,r]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){zh(i)||xc(8),Jp(i)&&(i=x3e(i));const e=A9(this),t=A5(i,void 0);return t[ll].isManual_=!0,d5(e),t}finishDraft(i,e){const t=i&&i[ll];(!t||!t.isManual_)&&xc(9);const{scope_:n}=t;return p9(n,e),g9(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){i=r.value;break}}t>-1&&(e=e.slice(t+1));const n=eA("Patches").applyPatches_;return Jp(i)?n(i,e):this.produce(i,r=>n(r,e))}};function A5(i,e){const t=NT(i)?eA("MapSet").proxyMap_(i,e):LT(i)?eA("MapSet").proxySet_(i,e):m3e(i,e);return(e?e.scope_:SX()).drafts_.push(t),t}function x3e(i){return Jp(i)||xc(10,i),MX(i)}function MX(i){if(!zh(i)||DT(i))return i;const e=i[ll];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=h5(i,e.scope_.immer_.useStrictShallowCopy_)}else t=h5(i,!0);return yS(t,(n,r)=>{wX(t,n,MX(r))}),e&&(e.finalized_=!1),t}var cl=new y3e,EX=cl.produce;cl.produceWithPatches.bind(cl);cl.setAutoFreeze.bind(cl);cl.setUseStrictShallowCopy.bind(cl);cl.applyPatches.bind(cl);cl.createDraft.bind(cl);cl.finishDraft.bind(cl);function CX(i){return({dispatch:t,getState:n})=>r=>s=>typeof s=="function"?s(t,n,i):r(s)}var b3e=CX(),_3e=CX,w3e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vS:vS.apply(null,arguments)},S3e=i=>i&&typeof i.match=="function";function Fy(i,e){function t(...n){if(e){let r=e(...n);if(!r)throw new Error(Rh(0));return{type:i,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:i,payload:n[0]}}return t.toString=()=>`${i}`,t.type=i,t.match=n=>u3e(n)&&n.type===i,t}var RX=class by extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,by.prototype)}static get[Symbol.species](){return by}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new by(...e[0].concat(this)):new by(...e.concat(this))}};function v9(i){return zh(i)?EX(i,()=>{}):i}function y_(i,e,t){return i.has(e)?i.get(e):i.set(e,t(e)).get(e)}function T3e(i){return typeof i=="boolean"}var M3e=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let a=new RX;return t&&(T3e(t)?a.push(b3e):a.push(_3e(t.extraArgument))),a},E3e="RTK_autoBatch",y9=i=>e=>{setTimeout(e,i)},C3e=(i={type:"raf"})=>e=>(...t)=>{const n=e(...t);let r=!0,s=!1,a=!1;const o=new Set,l=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:y9(10):i.type==="callback"?i.queueNotification:y9(i.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>r&&u(),d=n.subscribe(h);return o.add(u),()=>{d(),o.delete(u)}},dispatch(u){var h;try{return r=!((h=u==null?void 0:u.meta)!=null&&h[E3e]),s=!r,s&&(a||(a=!0,l(c))),n.dispatch(u)}finally{r=!0}}})},R3e=i=>function(t){const{autoBatch:n=!0}=t??{};let r=new RX(i);return n&&r.push(C3e(typeof n=="object"?n:void 0)),r};function P3e(i){const e=M3e(),{reducer:t=void 0,middleware:n,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=i||{};let o;if(typeof t=="function")o=t;else if($P(t))o=l3e(t);else throw new Error(Rh(1));let l;typeof n=="function"?l=n(e):l=e();let c=vS;r&&(c=w3e({trace:!1,...typeof r=="object"&&r}));const u=c3e(...l),h=R3e(u);let d=typeof a=="function"?a(h):h();const A=c(...d);return xX(o,s,A)}function PX(i){const e={},t=[];let n;const r={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Rh(28));if(o in e)throw new Error(Rh(29));return e[o]=a,r},addMatcher(s,a){return t.push({matcher:s,reducer:a}),r},addDefaultCase(s){return n=s,r}};return i(r),[e,t,n]}function N3e(i){return typeof i=="function"}function L3e(i,e){let[t,n,r]=PX(e),s;if(N3e(i))s=()=>v9(i());else{const o=v9(i);s=()=>o}function a(o=s(),l){let c=[t[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[r]),c.reduce((u,h)=>{if(h)if(Jp(u)){const A=h(u,l);return A===void 0?u:A}else{if(zh(u))return EX(u,d=>h(d,l));{const d=h(u,l);if(d===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return u},o)}return a.getInitialState=s,a}var D3e=(i,e)=>S3e(i)?i.match(e):i(e);function k3e(...i){return e=>i.some(t=>D3e(t,e))}var O3e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",I3e=(i=21)=>{let e="",t=i;for(;t--;)e+=O3e[Math.random()*64|0];return e},B3e=["name","message","stack","code"],YC=class{constructor(i,e){SM(this,"_type");this.payload=i,this.meta=e}},x9=class{constructor(i,e){SM(this,"_type");this.payload=i,this.meta=e}},F3e=i=>{if(typeof i=="object"&&i!==null){const e={};for(const t of B3e)typeof i[t]=="string"&&(e[t]=i[t]);return e}return{message:String(i)}},b9="External signal was aborted",U3e=(()=>{function i(e,t,n){const r=Fy(e+"/fulfilled",(l,c,u,h)=>({payload:l,meta:{...h||{},arg:u,requestId:c,requestStatus:"fulfilled"}})),s=Fy(e+"/pending",(l,c,u)=>({payload:void 0,meta:{...u||{},arg:c,requestId:l,requestStatus:"pending"}})),a=Fy(e+"/rejected",(l,c,u,h,d)=>({payload:h,error:(n&&n.serializeError||F3e)(l||"Rejected"),meta:{...d||{},arg:u,requestId:c,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function o(l,{signal:c}={}){return(u,h,d)=>{const A=n!=null&&n.idGenerator?n.idGenerator(l):I3e(),x=new AbortController;let _,S;function w(P){S=P,x.abort()}c&&(c.aborted?w(b9):c.addEventListener("abort",()=>w(b9),{once:!0}));const C=async function(){var D,B;let P;try{let k=(D=n==null?void 0:n.condition)==null?void 0:D.call(n,l,{getState:h,extra:d});if(G3e(k)&&(k=await k),k===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const U=new Promise((F,z)=>{_=()=>{z({name:"AbortError",message:S||"Aborted"})},x.signal.addEventListener("abort",_)});u(s(A,l,(B=n==null?void 0:n.getPendingMeta)==null?void 0:B.call(n,{requestId:A,arg:l},{getState:h,extra:d}))),P=await Promise.race([U,Promise.resolve(t(l,{dispatch:u,getState:h,extra:d,requestId:A,signal:x.signal,abort:w,rejectWithValue:(F,z)=>new YC(F,z),fulfillWithValue:(F,z)=>new x9(F,z)})).then(F=>{if(F instanceof YC)throw F;return F instanceof x9?r(F.payload,A,l,F.meta):r(F,A,l)})])}catch(k){P=k instanceof YC?a(null,A,l,k.payload,k.meta):a(k,A,l)}finally{_&&x.signal.removeEventListener("abort",_)}return n&&!n.dispatchConditionRejection&&a.match(P)&&P.meta.condition||u(P),P}();return Object.assign(C,{abort:w,requestId:A,arg:l,unwrap(){return C.then(z3e)}})}}return Object.assign(o,{pending:s,rejected:a,fulfilled:r,settled:k3e(a,r),typePrefix:e})}return i.withTypes=()=>i,i})();function z3e(i){if(i.meta&&i.meta.rejectedWithValue)throw i.payload;if(i.error)throw i.error;return i.payload}function G3e(i){return i!==null&&typeof i=="object"&&typeof i.then=="function"}var NX=Symbol.for("rtk-slice-createasyncthunk"),V3e={[NX]:U3e};function H3e(i,e){return`${i}/${e}`}function q3e({creators:i}={}){var t;const e=(t=i==null?void 0:i.asyncThunk)==null?void 0:t[NX];return function(r){const{name:s,reducerPath:a=s}=r;if(!s)throw new Error(Rh(11));const o=(typeof r.reducers=="function"?r.reducers(j3e()):r.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(L,D){const B=typeof L=="string"?L:L.type;if(!B)throw new Error(Rh(12));if(B in c.sliceCaseReducersByType)throw new Error(Rh(13));return c.sliceCaseReducersByType[B]=D,u},addMatcher(L,D){return c.sliceMatchers.push({matcher:L,reducer:D}),u},exposeAction(L,D){return c.actionCreators[L]=D,u},exposeCaseReducer(L,D){return c.sliceCaseReducersByName[L]=D,u}};l.forEach(L=>{const D=o[L],B={reducerName:L,type:H3e(s,L),createNotation:typeof r.reducers=="function"};Y3e(D)?Q3e(B,D,u,e):X3e(B,D,u)});function h(){const[L={},D=[],B=void 0]=typeof r.extraReducers=="function"?PX(r.extraReducers):[r.extraReducers],k={...L,...c.sliceCaseReducersByType};return L3e(r.initialState,U=>{for(let F in k)U.addCase(F,k[F]);for(let F of c.sliceMatchers)U.addMatcher(F.matcher,F.reducer);for(let F of D)U.addMatcher(F.matcher,F.reducer);B&&U.addDefaultCase(B)})}const d=L=>L,A=new Map,x=new WeakMap;let _;function S(L,D){return _||(_=h()),_(L,D)}function w(){return _||(_=h()),_.getInitialState()}function C(L,D=!1){function B(U){let F=U[L];return typeof F>"u"&&D&&(F=y_(x,B,w)),F}function k(U=d){const F=y_(A,D,()=>new WeakMap);return y_(F,U,()=>{const z={};for(const[V,W]of Object.entries(r.selectors??{}))z[V]=W3e(W,U,()=>y_(x,U,w),D);return z})}return{reducerPath:L,getSelectors:k,get selectors(){return k(B)},selectSlice:B}}const P={name:s,reducer:S,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...C(a),injectInto(L,{reducerPath:D,...B}={}){const k=D??a;return L.inject({reducerPath:k,reducer:S},B),{...P,...C(k,!0)}}};return P}}function W3e(i,e,t,n){function r(s,...a){let o=e(s);return typeof o>"u"&&n&&(o=t()),i(o,...a)}return r.unwrapped=i,r}function j3e(){function i(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return i.withTypes=()=>i,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:i}}function X3e({type:i,reducerName:e,createNotation:t},n,r){let s,a;if("reducer"in n){if(t&&!$3e(n))throw new Error(Rh(17));s=n.reducer,a=n.prepare}else s=n;r.addCase(i,s).exposeCaseReducer(e,s).exposeAction(e,a?Fy(i,a):Fy(i))}function Y3e(i){return i._reducerDefinitionType==="asyncThunk"}function $3e(i){return i._reducerDefinitionType==="reducerWithPrepare"}function Q3e({type:i,reducerName:e},t,n,r){if(!r)throw new Error(Rh(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=t,h=r(i,s,u);n.exposeAction(e,h),a&&n.addCase(h.fulfilled,a),o&&n.addCase(h.pending,o),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(e,{fulfilled:a||x_,pending:o||x_,rejected:l||x_,settled:c||x_})}function x_(){}function Rh(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}const Z3e=q3e({creators:{asyncThunk:V3e}}),LX=Z3e({name:"themeGlobe",initialState:"day",reducers:{toggleTheme:(i,e)=>e.payload}}),{toggleTheme:_9}=LX.actions,K3e=LX.reducer;var $C={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w9;function J3e(){return w9||(w9=1,function(i){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=r(s,n(o)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=r(a,o));return a}function r(s,a){return a?s?s+" "+a:s+a:s}i.exports?(t.default=t,i.exports=t):window.classNames=t})()}($C)),$C.exports}var eMe=J3e();const ym=jx(eMe);function or(i){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(i)}var tMe=Symbol.for("react.element"),nMe=Symbol.for("react.transitional.element"),iMe=Symbol.for("react.fragment");function rMe(i){return i&&or(i)==="object"&&(i.$$typeof===tMe||i.$$typeof===nMe)&&i.type===iMe}var g5={},sMe=function(e){};function aMe(i,e){}function oMe(i,e){}function lMe(){g5={}}function DX(i,e,t){!e&&!g5[t]&&(i(!1,t),g5[t]=!0)}function E1(i,e){DX(aMe,i,e)}function cMe(i,e){DX(oMe,i,e)}E1.preMessage=sMe;E1.resetWarned=lMe;E1.noteOnce=cMe;function uMe(i,e){if(or(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(or(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function kX(i){var e=uMe(i,"string");return or(e)=="symbol"?e:e+""}function Mn(i,e,t){return(e=kX(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function S9(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function vn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(t),!0).forEach(function(n){Mn(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):S9(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var OX=_F();const m5=jx(OX),hMe=bF({__proto__:null,default:m5},[OX]);function T9(i){return i instanceof HTMLElement||i instanceof SVGElement}function fMe(i){return i&&or(i)==="object"&&T9(i.nativeElement)?i.nativeElement:T9(i)?i:null}function dMe(i){var e=fMe(i);if(e)return e;if(i instanceof xa.Component){var t;return(t=m5.findDOMNode)===null||t===void 0?void 0:t.call(m5,i)}return null}var QC={exports:{}},Zi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M9;function pMe(){if(M9)return Zi;M9=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function _(S){if(typeof S=="object"&&S!==null){var w=S.$$typeof;switch(w){case i:switch(S=S.type,S){case t:case r:case n:case c:case u:return S;default:switch(S=S&&S.$$typeof,S){case o:case a:case l:case d:case h:case s:return S;default:return w}}case e:return w}}}return Zi.ContextConsumer=a,Zi.ContextProvider=s,Zi.Element=i,Zi.ForwardRef=l,Zi.Fragment=t,Zi.Lazy=d,Zi.Memo=h,Zi.Portal=e,Zi.Profiler=r,Zi.StrictMode=n,Zi.Suspense=c,Zi.SuspenseList=u,Zi.isAsyncMode=function(){return!1},Zi.isConcurrentMode=function(){return!1},Zi.isContextConsumer=function(S){return _(S)===a},Zi.isContextProvider=function(S){return _(S)===s},Zi.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===i},Zi.isForwardRef=function(S){return _(S)===l},Zi.isFragment=function(S){return _(S)===t},Zi.isLazy=function(S){return _(S)===d},Zi.isMemo=function(S){return _(S)===h},Zi.isPortal=function(S){return _(S)===e},Zi.isProfiler=function(S){return _(S)===r},Zi.isStrictMode=function(S){return _(S)===n},Zi.isSuspense=function(S){return _(S)===c},Zi.isSuspenseList=function(S){return _(S)===u},Zi.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===t||S===r||S===n||S===c||S===u||S===A||typeof S=="object"&&S!==null&&(S.$$typeof===d||S.$$typeof===h||S.$$typeof===s||S.$$typeof===a||S.$$typeof===l||S.$$typeof===x||S.getModuleId!==void 0)},Zi.typeOf=_,Zi}var E9;function AMe(){return E9||(E9=1,QC.exports=pMe()),QC.exports}var ZC=AMe();function IX(i,e,t){var n=ye.useRef({});return(!("value"in n.current)||t(n.current.condition,e))&&(n.current.value=i(),n.current.condition=e),n.current.value}var gMe=Number(ye.version.split(".")[0]),BX=function(e,t){typeof e=="function"?e(t):or(e)==="object"&&e&&"current"in e&&(e.current=t)},FX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(s){t.forEach(function(a){BX(a,s)})}},UX=function(e){var t,n;if(!e)return!1;if(zX(e)&&gMe>=19)return!0;var r=ZC.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render)&&r.$$typeof!==ZC.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==ZC.ForwardRef)};function zX(i){return ye.isValidElement(i)&&!rMe(i)}var GX=function(e){if(e&&zX(e)){var t=e;return t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}return null};function Yh(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function C9(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,kX(n.key),n)}}function $h(i,e,t){return e&&C9(i.prototype,e),t&&C9(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function kT(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Vg(i,e)}function mMe(i,e){if(e&&(or(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sd(i)}function OT(i){var e=CP();return function(){var t,n=Px(i);if(e){var r=Px(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return mMe(this,t)}}function v5(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function vMe(i){if(Array.isArray(i))return v5(i)}function VX(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function KP(i,e){if(i){if(typeof i=="string")return v5(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v5(i,e):void 0}}function yMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _d(i){return vMe(i)||VX(i)||KP(i)||yMe()}var HX=function(e){return+setTimeout(e,16)},qX=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(HX=function(e){return window.requestAnimationFrame(e)},qX=function(e){return window.cancelAnimationFrame(e)});var R9=0,JP=new Map;function WX(i){JP.delete(i)}var tA=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;R9+=1;var n=R9;function r(s){if(s===0)WX(n),e();else{var a=HX(function(){r(s-1)});JP.set(n,a)}}return r(t),n};tA.cancel=function(i){var e=JP.get(i);return WX(i),qX(e)};function jX(i){if(Array.isArray(i))return i}function xMe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function XX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hi(i,e){return jX(i)||xMe(i,e)||KP(i,e)||XX()}function zx(i){for(var e=0,t,n=0,r=i.length;r>=4;++n,r-=4)t=i.charCodeAt(n)&255|(i.charCodeAt(++n)&255)<<8|(i.charCodeAt(++n)&255)<<16|(i.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(i.charCodeAt(n+2)&255)<<16;case 2:e^=(i.charCodeAt(n+1)&255)<<8;case 1:e^=i.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function Qh(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function bMe(i,e){if(!i)return!1;if(i.contains)return i.contains(e);for(var t=e;t;){if(t===i)return!0;t=t.parentNode}return!1}var P9="data-rc-order",N9="data-rc-priority",_Me="rc-util-key",y5=new Map;function YX(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=i.mark;return e?e.startsWith("data-")?e:"data-".concat(e):_Me}function IT(i){if(i.attachTo)return i.attachTo;var e=document.querySelector("head");return e||document.body}function wMe(i){return i==="queue"?"prependQueue":i?"prepend":"append"}function eN(i){return Array.from((y5.get(i)||i).children).filter(function(e){return e.tagName==="STYLE"})}function $X(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Qh())return null;var t=e.csp,n=e.prepend,r=e.priority,s=r===void 0?0:r,a=wMe(n),o=a==="prependQueue",l=document.createElement("style");l.setAttribute(P9,a),o&&s&&l.setAttribute(N9,"".concat(s)),t!=null&&t.nonce&&(l.nonce=t==null?void 0:t.nonce),l.innerHTML=i;var c=IT(e),u=c.firstChild;if(n){if(o){var h=(e.styles||eN(c)).filter(function(d){if(!["prepend","prependQueue"].includes(d.getAttribute(P9)))return!1;var A=Number(d.getAttribute(N9)||0);return s>=A});if(h.length)return c.insertBefore(l,h[h.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function QX(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=IT(e);return(e.styles||eN(t)).find(function(n){return n.getAttribute(YX(e))===i})}function ZX(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=QX(i,e);if(t){var n=IT(e);n.removeChild(t)}}function SMe(i,e){var t=y5.get(i);if(!t||!bMe(document,t)){var n=$X("",e),r=n.parentNode;y5.set(i,r),i.removeChild(n)}}function Up(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=IT(t),r=eN(n),s=vn(vn({},t),{},{styles:r});SMe(n,s);var a=QX(e,s);if(a){var o,l;if((o=s.csp)!==null&&o!==void 0&&o.nonce&&a.nonce!==((l=s.csp)===null||l===void 0?void 0:l.nonce)){var c;a.nonce=(c=s.csp)===null||c===void 0?void 0:c.nonce}return a.innerHTML!==i&&(a.innerHTML=i),a}var u=$X(i,s);return u.setAttribute(YX(s),e),u}function TMe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function $g(i,e){if(i==null)return{};var t,n,r=TMe(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function MMe(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function r(s,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=n.has(s);if(E1(!l,"Warning: There may be circular references"),l)return!1;if(s===a)return!0;if(t&&o>1)return!1;n.add(s);var c=o+1;if(Array.isArray(s)){if(!Array.isArray(a)||s.length!==a.length)return!1;for(var u=0;u<s.length;u++)if(!r(s[u],a[u],c))return!1;return!0}if(s&&a&&or(s)==="object"&&or(a)==="object"){var h=Object.keys(s);return h.length!==Object.keys(a).length?!1:h.every(function(d){return r(s[d],a[d],c)})}return!1}return r(i,e)}var EMe="%";function x5(i){return i.join(EMe)}var CMe=function(){function i(e){Yh(this,i),Mn(this,"instanceId",void 0),Mn(this,"cache",new Map),this.instanceId=e}return $h(i,[{key:"get",value:function(t){return this.opGet(x5(t))}},{key:"opGet",value:function(t){return this.cache.get(t)||null}},{key:"update",value:function(t,n){return this.opUpdate(x5(t),n)}},{key:"opUpdate",value:function(t,n){var r=this.cache.get(t),s=n(r);s===null?this.cache.delete(t):this.cache.set(t,s)}}]),i}(),Qg="data-token-hash",Lc="data-css-hash",Zf="__cssinjs_instance__";function RMe(){var i=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Lc,"]"))||[],t=document.head.firstChild;Array.from(e).forEach(function(r){r[Zf]=r[Zf]||i,r[Zf]===i&&document.head.insertBefore(r,t)});var n={};Array.from(document.querySelectorAll("style[".concat(Lc,"]"))).forEach(function(r){var s=r.getAttribute(Lc);if(n[s]){if(r[Zf]===i){var a;(a=r.parentNode)===null||a===void 0||a.removeChild(r)}}else n[s]=!0})}return new CMe(i)}var C1=ye.createContext({hashPriority:"low",cache:RMe(),defaultCache:!0});function PMe(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}var tN=function(){function i(){Yh(this,i),Mn(this,"cache",void 0),Mn(this,"keys",void 0),Mn(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return $h(i,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(t){var n,r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return t.forEach(function(o){if(!a)a=void 0;else{var l;a=(l=a)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(o)}}),(n=a)!==null&&n!==void 0&&n.value&&s&&(a.value[1]=this.cacheCallTimes++),(r=a)===null||r===void 0?void 0:r.value}},{key:"get",value:function(t){var n;return(n=this.internalGet(t,!0))===null||n===void 0?void 0:n[0]}},{key:"has",value:function(t){return!!this.internalGet(t)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>i.MAX_CACHE_SIZE+i.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(c,u){var h=hi(c,2),d=h[1];return r.internalGet(u)[1]<d?[u,r.internalGet(u)[1]]:c},[this.keys[0],this.cacheCallTimes]),a=hi(s,1),o=a[0];this.delete(o)}this.keys.push(t)}var l=this.cache;t.forEach(function(c,u){if(u===t.length-1)l.set(c,{value:[n,r.cacheCallTimes++]});else{var h=l.get(c);h?h.map||(h.map=new Map):l.set(c,{map:new Map}),l=l.get(c).map}})}},{key:"deleteByPath",value:function(t,n){var r=t.get(n[0]);if(n.length===1){var s;return r.map?t.set(n[0],{map:r.map}):t.delete(n[0]),(s=r.value)===null||s===void 0?void 0:s[0]}var a=this.deleteByPath(r.map,n.slice(1));return(!r.map||r.map.size===0)&&!r.value&&t.delete(n[0]),a}},{key:"delete",value:function(t){if(this.has(t))return this.keys=this.keys.filter(function(n){return!PMe(n,t)}),this.deleteByPath(this.cache,t)}}]),i}();Mn(tN,"MAX_CACHE_SIZE",20);Mn(tN,"MAX_CACHE_OFFSET",5);var L9=0,KX=function(){function i(e){Yh(this,i),Mn(this,"derivatives",void 0),Mn(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=L9,e.length===0&&(e.length>0,void 0),L9+=1}return $h(i,[{key:"getDerivativeToken",value:function(t){return this.derivatives.reduce(function(n,r){return r(t,n)},void 0)}}]),i}(),KC=new tN;function b5(i){var e=Array.isArray(i)?i:[i];return KC.has(e)||KC.set(e,new KX(e)),KC.get(e)}var NMe=new WeakMap,JC={};function LMe(i,e){for(var t=NMe,n=0;n<e.length;n+=1){var r=e[n];t.has(r)||t.set(r,new WeakMap),t=t.get(r)}return t.has(JC)||t.set(JC,i()),t.get(JC)}var D9=new WeakMap;function Uy(i){var e=D9.get(i)||"";return e||(Object.keys(i).forEach(function(t){var n=i[t];e+=t,n instanceof KX?e+=n.id:n&&or(n)==="object"?e+=Uy(n):e+=n}),e=zx(e),D9.set(i,e)),e}function k9(i,e){return zx("".concat(e,"_").concat(Uy(i)))}var _5=Qh();function Ec(i){return typeof i=="number"?"".concat(i,"px"):i}function _S(i,e,t){var n,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s)return i;var a=vn(vn({},r),{},(n={},Mn(n,Qg,e),Mn(n,Lc,t),n)),o=Object.keys(a).map(function(l){var c=a[l];return c?"".concat(l,'="').concat(c,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(o,">").concat(i,"</style>")}var ew=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(t?"".concat(t,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},DMe=function(e,t,n){return Object.keys(e).length?".".concat(t).concat(n!=null&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(e).map(function(r){var s=hi(r,2),a=s[0],o=s[1];return"".concat(a,":").concat(o,";")}).join(""),"}"):""},JX=function(e,t,n){var r={},s={};return Object.entries(e).forEach(function(a){var o,l,c=hi(a,2),u=c[0],h=c[1];if(n!=null&&(o=n.preserve)!==null&&o!==void 0&&o[u])s[u]=h;else if((typeof h=="string"||typeof h=="number")&&!(n!=null&&(l=n.ignore)!==null&&l!==void 0&&l[u])){var d,A=ew(u,n==null?void 0:n.prefix);r[A]=typeof h=="number"&&!(n!=null&&(d=n.unitless)!==null&&d!==void 0&&d[u])?"".concat(h,"px"):String(h),s[u]="var(".concat(A,")")}}),[s,DMe(r,t,{scope:n==null?void 0:n.scope})]},O9=Qh()?ye.useLayoutEffect:ye.useEffect,eY=function(e,t){var n=ye.useRef(!0);O9(function(){return e(n.current)},t),O9(function(){return n.current=!1,function(){n.current=!0}},[])},I9=function(e,t){eY(function(n){if(!n)return e()},t)},kMe=vn({},$5),B9=kMe.useInsertionEffect,OMe=function(e,t,n){ye.useMemo(e,n),eY(function(){return t(!0)},n)},IMe=B9?function(i,e,t){return B9(function(){return i(),e()},t)}:OMe,BMe=vn({},$5),FMe=BMe.useInsertionEffect,UMe=function(e){var t=[],n=!1;function r(s){n||t.push(s)}return ye.useEffect(function(){return n=!1,function(){n=!0,t.length&&t.forEach(function(s){return s()})}},e),r},zMe=function(){return function(e){e()}},GMe=typeof FMe<"u"?UMe:zMe;function nN(i,e,t,n,r){var s=ye.useContext(C1),a=s.cache,o=[i].concat(_d(e)),l=x5(o),c=GMe([l]),u=function(x){a.opUpdate(l,function(_){var S=_||[void 0,void 0],w=hi(S,2),C=w[0],P=C===void 0?0:C,L=w[1],D=L,B=D||t(),k=[P,B];return x?x(k):k})};ye.useMemo(function(){u()},[l]);var h=a.opGet(l),d=h[1];return IMe(function(){r==null||r(d)},function(A){return u(function(x){var _=hi(x,2),S=_[0],w=_[1];return A&&S===0&&(r==null||r(d)),[S+1,w]}),function(){a.opUpdate(l,function(x){var _=x||[],S=hi(_,2),w=S[0],C=w===void 0?0:w,P=S[1],L=C-1;return L===0?(c(function(){(A||!a.opGet(l))&&(n==null||n(P,!1))}),null):[C-1,P]})}},[l]),d}var VMe={},HMe="css",yp=new Map;function qMe(i){yp.set(i,(yp.get(i)||0)+1)}function WMe(i,e){if(typeof document<"u"){var t=document.querySelectorAll("style[".concat(Qg,'="').concat(i,'"]'));t.forEach(function(n){if(n[Zf]===e){var r;(r=n.parentNode)===null||r===void 0||r.removeChild(n)}})}}var jMe=0;function XMe(i,e){yp.set(i,(yp.get(i)||0)-1);var t=Array.from(yp.keys()),n=t.filter(function(r){var s=yp.get(r)||0;return s<=0});t.length-n.length>jMe&&n.forEach(function(r){WMe(r,e),yp.delete(r)})}var YMe=function(e,t,n,r){var s=n.getDerivativeToken(e),a=vn(vn({},s),t);return r&&(a=r(a)),a},tY="token";function $Me(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=ye.useContext(C1),r=n.cache.instanceId,s=n.container,a=t.salt,o=a===void 0?"":a,l=t.override,c=l===void 0?VMe:l,u=t.formatToken,h=t.getComputedToken,d=t.cssVar,A=LMe(function(){return Object.assign.apply(Object,[{}].concat(_d(e)))},e),x=Uy(A),_=Uy(c),S=d?Uy(d):"",w=nN(tY,[o,i.id,x,_,S],function(){var C,P=h?h(A,c,i):YMe(A,c,i,u),L=vn({},P),D="";if(d){var B=JX(P,d.key,{prefix:d.prefix,ignore:d.ignore,unitless:d.unitless,preserve:d.preserve}),k=hi(B,2);P=k[0],D=k[1]}var U=k9(P,o);P._tokenKey=U,L._tokenKey=k9(L,o);var F=(C=d==null?void 0:d.key)!==null&&C!==void 0?C:U;P._themeKey=F,qMe(F);var z="".concat(HMe,"-").concat(zx(U));return P._hashId=z,[P,z,L,D,(d==null?void 0:d.key)||""]},function(C){XMe(C[0]._themeKey,r)},function(C){var P=hi(C,4),L=P[0],D=P[3];if(d&&D){var B=Up(D,zx("css-variables-".concat(L._themeKey)),{mark:Lc,prepend:"queue",attachTo:s,priority:-999});B[Zf]=r,B.setAttribute(Qg,L._themeKey)}});return w}var QMe=function(e,t,n){var r=hi(e,5),s=r[2],a=r[3],o=r[4],l=n||{},c=l.plain;if(!a)return null;var u=s._tokenKey,h=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(h)},A=_S(a,o,u,d,c);return[h,u,A]},ZMe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nY="comm",iY="rule",rY="decl",KMe="@import",JMe="@namespace",eEe="@keyframes",tEe="@layer",sY=Math.abs,iN=String.fromCharCode;function aY(i){return i.trim()}function tw(i,e,t){return i.replace(e,t)}function nEe(i,e,t){return i.indexOf(e,t)}function rg(i,e){return i.charCodeAt(e)|0}function Zg(i,e,t){return i.slice(e,t)}function nu(i){return i.length}function iEe(i){return i.length}function b_(i,e){return e.push(i),i}var BT=1,Kg=1,oY=0,$l=0,_s=0,xm="";function rN(i,e,t,n,r,s,a,o){return{value:i,root:e,parent:t,type:n,props:r,children:s,line:BT,column:Kg,length:a,return:"",siblings:o}}function rEe(){return _s}function sEe(){return _s=$l>0?rg(xm,--$l):0,Kg--,_s===10&&(Kg=1,BT--),_s}function Dc(){return _s=$l<oY?rg(xm,$l++):0,Kg++,_s===10&&(Kg=1,BT++),_s}function Kf(){return rg(xm,$l)}function nw(){return $l}function FT(i,e){return Zg(xm,i,e)}function Gx(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aEe(i){return BT=Kg=1,oY=nu(xm=i),$l=0,[]}function oEe(i){return xm="",i}function e4(i){return aY(FT($l-1,w5(i===91?i+2:i===40?i+1:i)))}function lEe(i){for(;(_s=Kf())&&_s<33;)Dc();return Gx(i)>2||Gx(_s)>3?"":" "}function cEe(i,e){for(;--e&&Dc()&&!(_s<48||_s>102||_s>57&&_s<65||_s>70&&_s<97););return FT(i,nw()+(e<6&&Kf()==32&&Dc()==32))}function w5(i){for(;Dc();)switch(_s){case i:return $l;case 34:case 39:i!==34&&i!==39&&w5(_s);break;case 40:i===41&&w5(i);break;case 92:Dc();break}return $l}function uEe(i,e){for(;Dc()&&i+_s!==57;)if(i+_s===84&&Kf()===47)break;return"/*"+FT(e,$l-1)+"*"+iN(i===47?i:Dc())}function hEe(i){for(;!Gx(Kf());)Dc();return FT(i,$l)}function fEe(i){return oEe(iw("",null,null,null,[""],i=aEe(i),0,[0],i))}function iw(i,e,t,n,r,s,a,o,l){for(var c=0,u=0,h=a,d=0,A=0,x=0,_=1,S=1,w=1,C=0,P="",L=r,D=s,B=n,k=P;S;)switch(x=C,C=Dc()){case 40:if(x!=108&&rg(k,h-1)==58){nEe(k+=tw(e4(C),"&","&\f"),"&\f",sY(c?o[c-1]:0))!=-1&&(w=-1);break}case 34:case 39:case 91:k+=e4(C);break;case 9:case 10:case 13:case 32:k+=lEe(x);break;case 92:k+=cEe(nw()-1,7);continue;case 47:switch(Kf()){case 42:case 47:b_(dEe(uEe(Dc(),nw()),e,t,l),l),(Gx(x||1)==5||Gx(Kf()||1)==5)&&nu(k)&&Zg(k,-1,void 0)!==" "&&(k+=" ");break;default:k+="/"}break;case 123*_:o[c++]=nu(k)*w;case 125*_:case 59:case 0:switch(C){case 0:case 125:S=0;case 59+u:w==-1&&(k=tw(k,/\f/g,"")),A>0&&(nu(k)-h||_===0&&x===47)&&b_(A>32?U9(k+";",n,t,h-1,l):U9(tw(k," ","")+";",n,t,h-2,l),l);break;case 59:k+=";";default:if(b_(B=F9(k,e,t,c,u,r,o,P,L=[],D=[],h,s),s),C===123)if(u===0)iw(k,e,B,B,L,s,h,o,D);else{switch(d){case 99:if(rg(k,3)===110)break;case 108:if(rg(k,2)===97)break;default:u=0;case 100:case 109:case 115:}u?iw(i,B,B,n&&b_(F9(i,B,B,0,0,r,o,P,r,L=[],h,D),D),r,D,h,o,n?L:D):iw(k,B,B,B,[""],D,0,o,D)}}c=u=A=0,_=w=1,P=k="",h=a;break;case 58:h=1+nu(k),A=x;default:if(_<1){if(C==123)--_;else if(C==125&&_++==0&&sEe()==125)continue}switch(k+=iN(C),C*_){case 38:w=u>0?1:(k+="\f",-1);break;case 44:o[c++]=(nu(k)-1)*w,w=1;break;case 64:Kf()===45&&(k+=e4(Dc())),d=Kf(),u=h=nu(P=k+=hEe(nw())),C++;break;case 45:x===45&&nu(k)==2&&(_=0)}}return s}function F9(i,e,t,n,r,s,a,o,l,c,u,h){for(var d=r-1,A=r===0?s:[""],x=iEe(A),_=0,S=0,w=0;_<n;++_)for(var C=0,P=Zg(i,d+1,d=sY(S=a[_])),L=i;C<x;++C)(L=aY(S>0?A[C]+" "+P:tw(P,/&\f/g,A[C])))&&(l[w++]=L);return rN(i,e,t,r===0?iY:o,l,c,u,h)}function dEe(i,e,t,n){return rN(i,e,t,nY,iN(rEe()),Zg(i,2,-2),0,n)}function U9(i,e,t,n,r){return rN(i,e,t,rY,Zg(i,0,n),Zg(i,n+1,-1),n,r)}function S5(i,e){for(var t="",n=0;n<i.length;n++)t+=e(i[n],n,i,e)||"";return t}function pEe(i,e,t,n){switch(i.type){case tEe:if(i.children.length)break;case KMe:case JMe:case rY:return i.return=i.return||i.value;case nY:return"";case eEe:return i.return=i.value+"{"+S5(i.children,n)+"}";case iY:if(!nu(i.value=i.props.join(",")))return""}return nu(t=S5(i.children,n))?i.return=i.value+"{"+t+"}":""}var z9="data-ant-cssinjs-cache-path",lY="_FILE_STYLE__",zp,cY=!0;function AEe(){if(!zp&&(zp={},Qh())){var i=document.createElement("div");i.className=z9,i.style.position="fixed",i.style.visibility="hidden",i.style.top="-9999px",document.body.appendChild(i);var e=getComputedStyle(i).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(r){var s=r.split(":"),a=hi(s,2),o=a[0],l=a[1];zp[o]=l});var t=document.querySelector("style[".concat(z9,"]"));if(t){var n;cY=!1,(n=t.parentNode)===null||n===void 0||n.removeChild(t)}document.body.removeChild(i)}}function gEe(i){return AEe(),!!zp[i]}function mEe(i){var e=zp[i],t=null;if(e&&Qh())if(cY)t=lY;else{var n=document.querySelector("style[".concat(Lc,'="').concat(zp[i],'"]'));n?t=n.innerHTML:delete zp[i]}return[t,e]}var vEe="_skip_check_",uY="_multi_value_";function rw(i){var e=S5(fEe(i),pEe);return e.replace(/\{%%%\:[^;];}/g,";")}function yEe(i){return or(i)==="object"&&i&&(vEe in i||uY in i)}function G9(i,e,t){if(!e)return i;var n=".".concat(e),r=t==="low"?":where(".concat(n,")"):n,s=i.split(",").map(function(a){var o,l=a.trim().split(/\s+/),c=l[0]||"",u=((o=c.match(/^\w+/))===null||o===void 0?void 0:o[0])||"";return c="".concat(u).concat(r).concat(c.slice(u.length)),[c].concat(_d(l.slice(1))).join(" ")});return s.join(",")}var xEe=function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},r=n.root,s=n.injectHash,a=n.parentSelectors,o=t.hashId,l=t.layer;t.path;var c=t.hashPriority,u=t.transformers,h=u===void 0?[]:u;t.linters;var d="",A={};function x(w){var C=w.getName(o);if(!A[C]){var P=i(w.style,t,{root:!1,parentSelectors:a}),L=hi(P,1),D=L[0];A[C]="@keyframes ".concat(w.getName(o)).concat(D)}}function _(w){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return w.forEach(function(P){Array.isArray(P)?_(P,C):P&&C.push(P)}),C}var S=_(Array.isArray(e)?e:[e]);return S.forEach(function(w){var C=typeof w=="string"&&!r?{}:w;if(typeof C=="string")d+="".concat(C,`
`);else if(C._keyframe)x(C);else{var P=h.reduce(function(L,D){var B;return(D==null||(B=D.visit)===null||B===void 0?void 0:B.call(D,L))||L},C);Object.keys(P).forEach(function(L){var D=P[L];if(or(D)==="object"&&D&&(L!=="animationName"||!D._keyframe)&&!yEe(D)){var B=!1,k=L.trim(),U=!1;(r||s)&&o?k.startsWith("@")?B=!0:k==="&"?k=G9("",o,c):k=G9(L,o,c):r&&!o&&(k==="&"||k==="")&&(k="",U=!0);var F=i(D,t,{root:U,injectHash:B,parentSelectors:[].concat(_d(a),[k])}),z=hi(F,2),V=z[0],W=z[1];A=vn(vn({},A),W),d+="".concat(k).concat(V)}else{let K=function(Y,ee){var se=Y.replace(/[A-Z]/g,function(ne){return"-".concat(ne.toLowerCase())}),fe=ee;!ZMe[Y]&&typeof fe=="number"&&fe!==0&&(fe="".concat(fe,"px")),Y==="animationName"&&ee!==null&&ee!==void 0&&ee._keyframe&&(x(ee),fe=ee.getName(o)),d+="".concat(se,":").concat(fe,";")};var X,J=(X=D==null?void 0:D.value)!==null&&X!==void 0?X:D;or(D)==="object"&&D!==null&&D!==void 0&&D[uY]&&Array.isArray(J)?J.forEach(function(Y){K(L,Y)}):K(L,J)}})}}),r?l&&(d&&(d="@layer ".concat(l.name," {").concat(d,"}")),l.dependencies&&(A["@layer ".concat(l.name)]=l.dependencies.map(function(w){return"@layer ".concat(w,", ").concat(l.name,";")}).join(`
`))):d="{".concat(d,"}"),[d,A]};function hY(i,e){return zx("".concat(i.join("%")).concat(e))}function bEe(){return null}var fY="style";function T5(i,e){var t=i.token,n=i.path,r=i.hashId,s=i.layer,a=i.nonce,o=i.clientOnly,l=i.order,c=l===void 0?0:l,u=ye.useContext(C1),h=u.autoClear;u.mock;var d=u.defaultCache,A=u.hashPriority,x=u.container,_=u.ssrInline,S=u.transformers,w=u.linters,C=u.cache,P=u.layer,L=t._tokenKey,D=[L];P&&D.push("layer"),D.push.apply(D,_d(n));var B=_5,k=nN(fY,D,function(){var W=D.join("|");if(gEe(W)){var X=mEe(W),J=hi(X,2),K=J[0],Y=J[1];if(K)return[K,L,Y,{},o,c]}var ee=e(),se=xEe(ee,{hashId:r,hashPriority:A,layer:P?s:void 0,path:n.join("-"),transformers:S,linters:w}),fe=hi(se,2),ne=fe[0],he=fe[1],Te=rw(ne),Pe=hY(D,Te);return[Te,L,Pe,he,o,c]},function(W,X){var J=hi(W,3),K=J[2];(X||h)&&_5&&ZX(K,{mark:Lc})},function(W){var X=hi(W,4),J=X[0];X[1];var K=X[2],Y=X[3];if(B&&J!==lY){var ee={mark:Lc,prepend:P?!1:"queue",attachTo:x,priority:c},se=typeof a=="function"?a():a;se&&(ee.csp={nonce:se});var fe=[],ne=[];Object.keys(Y).forEach(function(Te){Te.startsWith("@layer")?fe.push(Te):ne.push(Te)}),fe.forEach(function(Te){Up(rw(Y[Te]),"_layer-".concat(Te),vn(vn({},ee),{},{prepend:!0}))});var he=Up(J,K,ee);he[Zf]=C.instanceId,he.setAttribute(Qg,L),ne.forEach(function(Te){Up(rw(Y[Te]),"_effect-".concat(Te),ee)})}}),U=hi(k,3),F=U[0],z=U[1],V=U[2];return function(W){var X;if(!_||B||!d)X=ye.createElement(bEe,null);else{var J;X=ye.createElement("style",Vs({},(J={},Mn(J,Qg,z),Mn(J,Lc,V),J),{dangerouslySetInnerHTML:{__html:F}}))}return ye.createElement(ye.Fragment,null,X,W)}}var _Ee=function(e,t,n){var r=hi(e,6),s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],h=n||{},d=h.plain;if(c)return null;var A=s,x={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return A=_S(s,a,o,x,d),l&&Object.keys(l).forEach(function(_){if(!t[_]){t[_]=!0;var S=rw(l[_]),w=_S(S,a,"_effect-".concat(_),x,d);_.startsWith("@layer")?A=w+A:A+=w}}),[u,o,A]},dY="cssVar",wEe=function(e,t){var n=e.key,r=e.prefix,s=e.unitless,a=e.ignore,o=e.token,l=e.scope,c=l===void 0?"":l,u=ye.useContext(C1),h=u.cache.instanceId,d=u.container,A=o._tokenKey,x=[].concat(_d(e.path),[n,c,A]),_=nN(dY,x,function(){var S=t(),w=JX(S,n,{prefix:r,unitless:s,ignore:a,scope:c}),C=hi(w,2),P=C[0],L=C[1],D=hY(x,L);return[P,L,D,n]},function(S){var w=hi(S,3),C=w[2];_5&&ZX(C,{mark:Lc})},function(S){var w=hi(S,3),C=w[1],P=w[2];if(C){var L=Up(C,P,{mark:Lc,prepend:"queue",attachTo:d,priority:-999});L[Zf]=h,L.setAttribute(Qg,n)}});return _},SEe=function(e,t,n){var r=hi(e,4),s=r[1],a=r[2],o=r[3],l=n||{},c=l.plain;if(!s)return null;var u=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},d=_S(s,o,a,h,c);return[u,a,d]},ry;ry={},Mn(ry,fY,_Ee),Mn(ry,tY,QMe),Mn(ry,dY,SEe);function P0(i){return i.notSplit=!0,i}P0(["borderTop","borderBottom"]),P0(["borderTop"]),P0(["borderBottom"]),P0(["borderLeft","borderRight"]),P0(["borderLeft"]),P0(["borderRight"]);var sN=ye.createContext({});function TEe(i){return jX(i)||VX(i)||KP(i)||XX()}function M5(i,e){for(var t=i,n=0;n<e.length;n+=1){if(t==null)return;t=t[e[n]]}return t}function pY(i,e,t,n){if(!e.length)return t;var r=TEe(e),s=r[0],a=r.slice(1),o;return!i&&typeof s=="number"?o=[]:Array.isArray(i)?o=_d(i):o=vn({},i),n&&t===void 0&&a.length===1?delete o[s][a[0]]:o[s]=pY(o[s],a,t,n),o}function t4(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&n&&t===void 0&&!M5(i,e.slice(0,-1))?i:pY(i,e,t,n)}function MEe(i){return or(i)==="object"&&i!==null&&Object.getPrototypeOf(i)===Object.prototype}function V9(i){return Array.isArray(i)?[]:{}}var EEe=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function CEe(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n=V9(e[0]);return e.forEach(function(r){function s(a,o){var l=new Set(o),c=M5(r,a),u=Array.isArray(c);if(u||MEe(c)){if(!l.has(c)){l.add(c);var h=M5(n,a);u?n=t4(n,a,[]):(!h||or(h)!=="object")&&(n=t4(n,a,V9(c))),EEe(c).forEach(function(d){s([].concat(_d(a),[d]),l)})}}else n=t4(n,a,c)}s([])}),n}const REe=ye.createContext({}),PEe=ye.createContext(void 0),Xo="${label} is not a valid ${type}",UT={Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Xo,method:Xo,array:Xo,object:Xo,number:Xo,date:Xo,boolean:Xo,integer:Xo,float:Xo,regexp:Xo,email:Xo,url:Xo,hex:Xo},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}}};Object.assign({},UT.Modal);let sw=[];const H9=()=>sw.reduce((i,e)=>Object.assign(Object.assign({},i),e),UT.Modal);function NEe(i){if(i){const e=Object.assign({},i);return sw.push(e),H9(),()=>{sw=sw.filter(t=>t!==e),H9()}}Object.assign({},UT.Modal)}const AY=ye.createContext(void 0),LEe="internalMark",DEe=i=>{const{locale:e={},children:t,_ANT_MARK__:n}=i;ye.useEffect(()=>NEe(e==null?void 0:e.Modal),[e]);const r=ye.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return ye.createElement(AY.Provider,{value:r},t)},gY={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Vx=Object.assign(Object.assign({},gY),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Js=Math.round;function n4(i,e){const t=i.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],n=t.map(r=>parseFloat(r));for(let r=0;r<3;r+=1)n[r]=e(n[r]||0,t[r]||"",r);return t[3]?n[3]=t[3].includes("%")?n[3]/100:n[3]:n[3]=1,n}const q9=(i,e,t)=>t===0?i:i/100;function sy(i,e){const t=e||255;return i>t?t:i<0?0:i}class os{constructor(e){Mn(this,"isValid",!0),Mn(this,"r",0),Mn(this,"g",0),Mn(this,"b",0),Mn(this,"a",1),Mn(this,"_h",void 0),Mn(this,"_s",void 0),Mn(this,"_l",void 0),Mn(this,"_v",void 0),Mn(this,"_max",void 0),Mn(this,"_min",void 0),Mn(this,"_brightness",void 0);function t(r){return r[0]in e&&r[1]in e&&r[2]in e}if(e)if(typeof e=="string"){let s=function(a){return r.startsWith(a)};var n=s;const r=e.trim();/^#?[A-F\d]{3,8}$/i.test(r)?this.fromHexString(r):s("rgb")?this.fromRgbString(r):s("hsl")?this.fromHslString(r):(s("hsv")||s("hsb"))&&this.fromHsvString(r)}else if(e instanceof os)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=sy(e.r),this.g=sy(e.g),this.b=sy(e.b),this.a=typeof e.a=="number"?sy(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else if(t("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(s){const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}const t=e(this.r),n=e(this.g),r=e(this.b);return .2126*t+.7152*n+.0722*r}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Js(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:n,l:r,a:this.a})}lighten(e=10){const t=this.getHue(),n=this.getSaturation();let r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:n,l:r,a:this.a})}mix(e,t=50){const n=this._c(e),r=t/100,s=o=>(n[o]-this[o])*r+this[o],a={r:Js(s("r")),g:Js(s("g")),b:Js(s("b")),a:Js(s("a")*100)/100};return this._c(a)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const t=this._c(e),n=this.a+t.a*(1-this.a),r=s=>Js((this[s]*this.a+t[s]*t.a*(1-this.a))/n);return this._c({r:r("r"),g:r("g"),b:r("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const t=(this.r||0).toString(16);e+=t.length===2?t:"0"+t;const n=(this.g||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.b||0).toString(16);if(e+=r.length===2?r:"0"+r,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=Js(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),t=Js(this.getSaturation()*100),n=Js(this.getLightness()*100);return this.a!==1?`hsla(${e},${t}%,${n}%,${this.a})`:`hsl(${e},${t}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,n){const r=this.clone();return r[e]=sy(t,n),r}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const t=e.replace("#","");function n(r,s){return parseInt(t[r]+t[s||r],16)}t.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=t[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=t[6]?n(6,7)/255:1)}fromHsl({h:e,s:t,l:n,a:r}){if(this._h=e%360,this._s=t,this._l=n,this.a=typeof r=="number"?r:1,t<=0){const d=Js(n*255);this.r=d,this.g=d,this.b=d}let s=0,a=0,o=0;const l=e/60,c=(1-Math.abs(2*n-1))*t,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(s=c,a=u):l>=1&&l<2?(s=u,a=c):l>=2&&l<3?(a=c,o=u):l>=3&&l<4?(a=u,o=c):l>=4&&l<5?(s=u,o=c):l>=5&&l<6&&(s=c,o=u);const h=n-c/2;this.r=Js((s+h)*255),this.g=Js((a+h)*255),this.b=Js((o+h)*255)}fromHsv({h:e,s:t,v:n,a:r}){this._h=e%360,this._s=t,this._v=n,this.a=typeof r=="number"?r:1;const s=Js(n*255);if(this.r=s,this.g=s,this.b=s,t<=0)return;const a=e/60,o=Math.floor(a),l=a-o,c=Js(n*(1-t)*255),u=Js(n*(1-t*l)*255),h=Js(n*(1-t*(1-l))*255);switch(o){case 0:this.g=h,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=h;break;case 3:this.r=c,this.g=u;break;case 4:this.r=h,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const t=n4(e,q9);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){const t=n4(e,q9);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){const t=n4(e,(n,r)=>r.includes("%")?Js(n/100*255):n);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}var __=2,W9=.16,kEe=.05,OEe=.05,IEe=.15,mY=5,vY=4,BEe=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function j9(i,e,t){var n;return Math.round(i.h)>=60&&Math.round(i.h)<=240?n=t?Math.round(i.h)-__*e:Math.round(i.h)+__*e:n=t?Math.round(i.h)+__*e:Math.round(i.h)-__*e,n<0?n+=360:n>=360&&(n-=360),n}function X9(i,e,t){if(i.h===0&&i.s===0)return i.s;var n;return t?n=i.s-W9*e:e===vY?n=i.s+W9:n=i.s+kEe*e,n>1&&(n=1),t&&e===mY&&n>.1&&(n=.1),n<.06&&(n=.06),Math.round(n*100)/100}function Y9(i,e,t){var n;return t?n=i.v+OEe*e:n=i.v-IEe*e,n=Math.max(0,Math.min(1,n)),Math.round(n*100)/100}function Hx(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],n=new os(i),r=n.toHsv(),s=mY;s>0;s-=1){var a=new os({h:j9(r,s,!0),s:X9(r,s,!0),v:Y9(r,s,!0)});t.push(a)}t.push(n);for(var o=1;o<=vY;o+=1){var l=new os({h:j9(r,o),s:X9(r,o),v:Y9(r,o)});t.push(l)}return e.theme==="dark"?BEe.map(function(c){var u=c.index,h=c.amount;return new os(e.backgroundColor||"#141414").mix(t[u],h).toHexString()}):t.map(function(c){return c.toHexString()})}var i4={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},E5=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];E5.primary=E5[5];var C5=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];C5.primary=C5[5];var R5=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];R5.primary=R5[5];var P5=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];P5.primary=P5[5];var N5=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];N5.primary=N5[5];var L5=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];L5.primary=L5[5];var D5=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];D5.primary=D5[5];var k5=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];k5.primary=k5[5];var wS=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];wS.primary=wS[5];var O5=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];O5.primary=O5[5];var I5=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];I5.primary=I5[5];var B5=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];B5.primary=B5[5];var F5=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];F5.primary=F5[5];var r4={red:E5,volcano:C5,orange:R5,gold:P5,yellow:N5,lime:L5,green:D5,cyan:k5,blue:wS,geekblue:O5,purple:I5,magenta:B5,grey:F5};function FEe(i,{generateColorPalettes:e,generateNeutralColorPalettes:t}){const{colorSuccess:n,colorWarning:r,colorError:s,colorInfo:a,colorPrimary:o,colorBgBase:l,colorTextBase:c}=i,u=e(o),h=e(n),d=e(r),A=e(s),x=e(a),_=t(l,c),S=i.colorLink||i.colorInfo,w=e(S),C=new os(A[1]).mix(new os(A[3]),50).toHexString();return Object.assign(Object.assign({},_),{colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:A[1],colorErrorBgHover:A[2],colorErrorBgFilledHover:C,colorErrorBgActive:A[3],colorErrorBorder:A[3],colorErrorBorderHover:A[4],colorErrorHover:A[5],colorError:A[6],colorErrorActive:A[7],colorErrorTextHover:A[8],colorErrorText:A[9],colorErrorTextActive:A[10],colorWarningBg:d[1],colorWarningBgHover:d[2],colorWarningBorder:d[3],colorWarningBorderHover:d[4],colorWarningHover:d[4],colorWarning:d[6],colorWarningActive:d[7],colorWarningTextHover:d[8],colorWarningText:d[9],colorWarningTextActive:d[10],colorInfoBg:x[1],colorInfoBgHover:x[2],colorInfoBorder:x[3],colorInfoBorderHover:x[4],colorInfoHover:x[4],colorInfo:x[6],colorInfoActive:x[7],colorInfoTextHover:x[8],colorInfoText:x[9],colorInfoTextActive:x[10],colorLinkHover:w[4],colorLink:w[6],colorLinkActive:w[7],colorBgMask:new os("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const UEe=i=>{let e=i,t=i,n=i,r=i;return i<6&&i>=5?e=i+1:i<16&&i>=6?e=i+2:i>=16&&(e=16),i<7&&i>=5?t=4:i<8&&i>=7?t=5:i<14&&i>=8?t=6:i<16&&i>=14?t=7:i>=16&&(t=8),i<6&&i>=2?n=1:i>=6&&(n=2),i>4&&i<8?r=4:i>=8&&(r=6),{borderRadius:i,borderRadiusXS:n,borderRadiusSM:t,borderRadiusLG:e,borderRadiusOuter:r}};function zEe(i){const{motionUnit:e,motionBase:t,borderRadius:n,lineWidth:r}=i;return Object.assign({motionDurationFast:`${(t+e).toFixed(1)}s`,motionDurationMid:`${(t+e*2).toFixed(1)}s`,motionDurationSlow:`${(t+e*3).toFixed(1)}s`,lineWidthBold:r+1},UEe(n))}const GEe=i=>{const{controlHeight:e}=i;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function VEe(i){return(i+8)/i}function HEe(i){const e=Array.from({length:10}).map((t,n)=>{const r=n-1,s=i*Math.pow(Math.E,r/5),a=n>1?Math.floor(s):Math.ceil(s);return Math.floor(a/2)*2});return e[1]=i,e.map(t=>({size:t,lineHeight:VEe(t)}))}const qEe=i=>{const e=HEe(i),t=e.map(u=>u.size),n=e.map(u=>u.lineHeight),r=t[1],s=t[0],a=t[2],o=n[1],l=n[0],c=n[2];return{fontSizeSM:s,fontSize:r,fontSizeLG:a,fontSizeXL:t[3],fontSizeHeading1:t[6],fontSizeHeading2:t[5],fontSizeHeading3:t[4],fontSizeHeading4:t[3],fontSizeHeading5:t[2],lineHeight:o,lineHeightLG:c,lineHeightSM:l,fontHeight:Math.round(o*r),fontHeightLG:Math.round(c*a),fontHeightSM:Math.round(l*s),lineHeightHeading1:n[6],lineHeightHeading2:n[5],lineHeightHeading3:n[4],lineHeightHeading4:n[3],lineHeightHeading5:n[2]}};function WEe(i){const{sizeUnit:e,sizeStep:t}=i;return{sizeXXL:e*(t+8),sizeXL:e*(t+4),sizeLG:e*(t+2),sizeMD:e*(t+1),sizeMS:e*t,size:e*t,sizeSM:e*(t-1),sizeXS:e*(t-2),sizeXXS:e*(t-3)}}const Pl=(i,e)=>new os(i).setA(e).toRgbString(),ay=(i,e)=>new os(i).darken(e).toHexString(),jEe=i=>{const e=Hx(i);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},XEe=(i,e)=>{const t=i||"#fff",n=e||"#000";return{colorBgBase:t,colorTextBase:n,colorText:Pl(n,.88),colorTextSecondary:Pl(n,.65),colorTextTertiary:Pl(n,.45),colorTextQuaternary:Pl(n,.25),colorFill:Pl(n,.15),colorFillSecondary:Pl(n,.06),colorFillTertiary:Pl(n,.04),colorFillQuaternary:Pl(n,.02),colorBgSolid:Pl(n,1),colorBgSolidHover:Pl(n,.75),colorBgSolidActive:Pl(n,.95),colorBgLayout:ay(t,4),colorBgContainer:ay(t,0),colorBgElevated:ay(t,0),colorBgSpotlight:Pl(n,.85),colorBgBlur:"transparent",colorBorder:ay(t,15),colorBorderSecondary:ay(t,6)}};function YEe(i){i4.pink=i4.magenta,r4.pink=r4.magenta;const e=Object.keys(gY).map(t=>{const n=i[t]===i4[t]?r4[t]:Hx(i[t]);return Array.from({length:10},()=>1).reduce((r,s,a)=>(r[`${t}-${a+1}`]=n[a],r[`${t}${a+1}`]=n[a],r),{})}).reduce((t,n)=>(t=Object.assign(Object.assign({},t),n),t),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),e),FEe(i,{generateColorPalettes:jEe,generateNeutralColorPalettes:XEe})),qEe(i.fontSize)),WEe(i)),GEe(i)),zEe(i))}const yY=b5(YEe),U5={token:Vx,override:{override:Vx},hashed:!0},xY=xa.createContext(U5),SS="ant",aN="anticon",$Ee=(i,e)=>e||(i?`${SS}-${i}`:SS),Gh=ye.createContext({getPrefixCls:$Ee,iconPrefixCls:aN}),{Consumer:O5e}=Gh,QEe=`-ant-${Date.now()}-${Math.random()}`;function ZEe(i,e){const t={},n=(a,o)=>{let l=a.clone();return l=(o==null?void 0:o(l))||l,l.toRgbString()},r=(a,o)=>{const l=new os(a),c=Hx(l.toRgbString());t[`${o}-color`]=n(l),t[`${o}-color-disabled`]=c[1],t[`${o}-color-hover`]=c[4],t[`${o}-color-active`]=c[6],t[`${o}-color-outline`]=l.clone().setA(.2).toRgbString(),t[`${o}-color-deprecated-bg`]=c[0],t[`${o}-color-deprecated-border`]=c[2]};if(e.primaryColor){r(e.primaryColor,"primary");const a=new os(e.primaryColor),o=Hx(a.toRgbString());o.forEach((c,u)=>{t[`primary-${u+1}`]=c}),t["primary-color-deprecated-l-35"]=n(a,c=>c.lighten(35)),t["primary-color-deprecated-l-20"]=n(a,c=>c.lighten(20)),t["primary-color-deprecated-t-20"]=n(a,c=>c.tint(20)),t["primary-color-deprecated-t-50"]=n(a,c=>c.tint(50)),t["primary-color-deprecated-f-12"]=n(a,c=>c.setA(c.a*.12));const l=new os(o[0]);t["primary-color-active-deprecated-f-30"]=n(l,c=>c.setA(c.a*.3)),t["primary-color-active-deprecated-d-02"]=n(l,c=>c.darken(2))}return e.successColor&&r(e.successColor,"success"),e.warningColor&&r(e.warningColor,"warning"),e.errorColor&&r(e.errorColor,"error"),e.infoColor&&r(e.infoColor,"info"),`
  :root {
    ${Object.keys(t).map(a=>`--${i}-${a}: ${t[a]};`).join(`
`)}
  }
  `.trim()}function KEe(i,e){const t=ZEe(i,e);Qh()&&Up(t,`${QEe}-dynamic-theme`)}const TS=ye.createContext(!1),JEe=({children:i,disabled:e})=>{const t=ye.useContext(TS);return ye.createElement(TS.Provider,{value:e??t},i)},Jg=ye.createContext(void 0),eCe=({children:i,size:e})=>{const t=ye.useContext(Jg);return ye.createElement(Jg.Provider,{value:e||t},i)};function tCe(){const i=ye.useContext(TS),e=ye.useContext(Jg);return{componentDisabled:i,componentSize:e}}var bY=$h(function i(){Yh(this,i)}),_Y="CALC_UNIT",nCe=new RegExp(_Y,"g");function s4(i){return typeof i=="number"?"".concat(i).concat(_Y):i}var iCe=function(i){kT(t,i);var e=OT(t);function t(n,r){var s;Yh(this,t),s=e.call(this),Mn(sd(s),"result",""),Mn(sd(s),"unitlessCssVar",void 0),Mn(sd(s),"lowPriority",void 0);var a=or(n);return s.unitlessCssVar=r,n instanceof t?s.result="(".concat(n.result,")"):a==="number"?s.result=s4(n):a==="string"&&(s.result=n),s}return $h(t,[{key:"add",value:function(r){return r instanceof t?this.result="".concat(this.result," + ").concat(r.getResult()):(typeof r=="number"||typeof r=="string")&&(this.result="".concat(this.result," + ").concat(s4(r))),this.lowPriority=!0,this}},{key:"sub",value:function(r){return r instanceof t?this.result="".concat(this.result," - ").concat(r.getResult()):(typeof r=="number"||typeof r=="string")&&(this.result="".concat(this.result," - ").concat(s4(r))),this.lowPriority=!0,this}},{key:"mul",value:function(r){return this.lowPriority&&(this.result="(".concat(this.result,")")),r instanceof t?this.result="".concat(this.result," * ").concat(r.getResult(!0)):(typeof r=="number"||typeof r=="string")&&(this.result="".concat(this.result," * ").concat(r)),this.lowPriority=!1,this}},{key:"div",value:function(r){return this.lowPriority&&(this.result="(".concat(this.result,")")),r instanceof t?this.result="".concat(this.result," / ").concat(r.getResult(!0)):(typeof r=="number"||typeof r=="string")&&(this.result="".concat(this.result," / ").concat(r)),this.lowPriority=!1,this}},{key:"getResult",value:function(r){return this.lowPriority||r?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(r){var s=this,a=r||{},o=a.unit,l=!0;return typeof o=="boolean"?l=o:Array.from(this.unitlessCssVar).some(function(c){return s.result.includes(c)})&&(l=!1),this.result=this.result.replace(nCe,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),t}(bY),rCe=function(i){kT(t,i);var e=OT(t);function t(n){var r;return Yh(this,t),r=e.call(this),Mn(sd(r),"result",0),n instanceof t?r.result=n.result:typeof n=="number"&&(r.result=n),r}return $h(t,[{key:"add",value:function(r){return r instanceof t?this.result+=r.result:typeof r=="number"&&(this.result+=r),this}},{key:"sub",value:function(r){return r instanceof t?this.result-=r.result:typeof r=="number"&&(this.result-=r),this}},{key:"mul",value:function(r){return r instanceof t?this.result*=r.result:typeof r=="number"&&(this.result*=r),this}},{key:"div",value:function(r){return r instanceof t?this.result/=r.result:typeof r=="number"&&(this.result/=r),this}},{key:"equal",value:function(){return this.result}}]),t}(bY),sCe=function(e,t){var n=e==="css"?iCe:rCe;return function(r){return new n(r,t)}},$9=function(e,t){return"".concat([t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function em(i){var e=ye.useRef();e.current=i;var t=ye.useCallback(function(){for(var n,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(s))},[]);return t}function qx(i){var e=ye.useRef(!1),t=ye.useState(i),n=hi(t,2),r=n[0],s=n[1];ye.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(o,l){l&&e.current||s(o)}return[r,a]}function a4(i){return i!==void 0}function wY(i,e){var t=e||{},n=t.defaultValue,r=t.value,s=t.onChange,a=t.postState,o=qx(function(){return a4(r)?r:a4(n)?typeof n=="function"?n():n:i}),l=hi(o,2),c=l[0],u=l[1],h=r!==void 0?r:c,d=a?a(h):h,A=em(s),x=qx([h]),_=hi(x,2),S=_[0],w=_[1];I9(function(){var P=S[0];c!==P&&A(c,P)},[S]),I9(function(){a4(r)||u(r)},[r]);var C=em(function(P,L){u(P,L),w([h],L)});return[d,C]}function Q9(i,e,t,n){var r=vn({},e[i]);if(n!=null&&n.deprecatedTokens){var s=n.deprecatedTokens;s.forEach(function(o){var l=hi(o,2),c=l[0],u=l[1];if(r!=null&&r[c]||r!=null&&r[u]){var h;(h=r[u])!==null&&h!==void 0||(r[u]=r==null?void 0:r[c])}})}var a=vn(vn({},t),r);return Object.keys(a).forEach(function(o){a[o]===e[o]&&delete a[o]}),a}var SY=typeof CSSINJS_STATISTIC<"u",z5=!0;function oN(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];if(!SY)return Object.assign.apply(Object,[{}].concat(e));z5=!1;var n={};return e.forEach(function(r){if(or(r)==="object"){var s=Object.keys(r);s.forEach(function(a){Object.defineProperty(n,a,{configurable:!0,enumerable:!0,get:function(){return r[a]}})})}}),z5=!0,n}var Z9={};function aCe(){}var oCe=function(e){var t,n=e,r=aCe;return SY&&typeof Proxy<"u"&&(t=new Set,n=new Proxy(e,{get:function(a,o){if(z5){var l;(l=t)===null||l===void 0||l.add(o)}return a[o]}}),r=function(a,o){var l;Z9[a]={global:Array.from(t),component:vn(vn({},(l=Z9[a])===null||l===void 0?void 0:l.component),o)}}),{token:n,keys:t,flush:r}};function K9(i,e,t){if(typeof t=="function"){var n;return t(oN(e,(n=e[i])!==null&&n!==void 0?n:{}))}return t??{}}function lCe(i){return i==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"max(".concat(n.map(function(s){return Ec(s)}).join(","),")")},min:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"min(".concat(n.map(function(s){return Ec(s)}).join(","),")")}}}var cCe=1e3*60*10,uCe=function(){function i(){Yh(this,i),Mn(this,"map",new Map),Mn(this,"objectIDMap",new WeakMap),Mn(this,"nextID",0),Mn(this,"lastAccessBeat",new Map),Mn(this,"accessBeat",0)}return $h(i,[{key:"set",value:function(t,n){this.clear();var r=this.getCompositeKey(t);this.map.set(r,n),this.lastAccessBeat.set(r,Date.now())}},{key:"get",value:function(t){var n=this.getCompositeKey(t),r=this.map.get(n);return this.lastAccessBeat.set(n,Date.now()),this.accessBeat+=1,r}},{key:"getCompositeKey",value:function(t){var n=this,r=t.map(function(s){return s&&or(s)==="object"?"obj_".concat(n.getObjectID(s)):"".concat(or(s),"_").concat(s)});return r.join("|")}},{key:"getObjectID",value:function(t){if(this.objectIDMap.has(t))return this.objectIDMap.get(t);var n=this.nextID;return this.objectIDMap.set(t,n),this.nextID+=1,n}},{key:"clear",value:function(){var t=this;if(this.accessBeat>1e4){var n=Date.now();this.lastAccessBeat.forEach(function(r,s){n-r>cCe&&(t.map.delete(s),t.lastAccessBeat.delete(s))}),this.accessBeat=0}}}]),i}(),J9=new uCe;function hCe(i,e){return xa.useMemo(function(){var t=J9.get(e);if(t)return t;var n=i();return J9.set(e,n),n},e)}var fCe=function(){return{}};function dCe(i){var e=i.useCSP,t=e===void 0?fCe:e,n=i.useToken,r=i.usePrefix,s=i.getResetStyles,a=i.getCommonStyle,o=i.getCompUnitless;function l(d,A,x,_){var S=Array.isArray(d)?d[0]:d;function w(U){return"".concat(String(S)).concat(U.slice(0,1).toUpperCase()).concat(U.slice(1))}var C=(_==null?void 0:_.unitless)||{},P=typeof o=="function"?o(d):{},L=vn(vn({},P),{},Mn({},w("zIndexPopup"),!0));Object.keys(C).forEach(function(U){L[w(U)]=C[U]});var D=vn(vn({},_),{},{unitless:L,prefixToken:w}),B=u(d,A,x,D),k=c(S,x,D);return function(U){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U,z=B(U,F),V=hi(z,2),W=V[1],X=k(F),J=hi(X,2),K=J[0],Y=J[1];return[K,W,Y]}}function c(d,A,x){var _=x.unitless,S=x.injectStyle,w=S===void 0?!0:S,C=x.prefixToken,P=x.ignore,L=function(k){var U=k.rootCls,F=k.cssVar,z=F===void 0?{}:F,V=n(),W=V.realToken;return wEe({path:[d],prefix:z.prefix,key:z.key,unitless:_,ignore:P,token:W,scope:U},function(){var X=K9(d,W,A),J=Q9(d,W,X,{deprecatedTokens:x==null?void 0:x.deprecatedTokens});return Object.keys(X).forEach(function(K){J[C(K)]=J[K],delete J[K]}),J}),null},D=function(k){var U=n(),F=U.cssVar;return[function(z){return w&&F?xa.createElement(xa.Fragment,null,xa.createElement(L,{rootCls:k,cssVar:F,component:d}),z):z},F==null?void 0:F.key]};return D}function u(d,A,x){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},S=Array.isArray(d)?d:[d,d],w=hi(S,1),C=w[0],P=S.join("-"),L=i.layer||{name:"antd"};return function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,k=n(),U=k.theme,F=k.realToken,z=k.hashId,V=k.token,W=k.cssVar,X=r(),J=X.rootPrefixCls,K=X.iconPrefixCls,Y=t(),ee=W?"css":"js",se=hCe(function(){var _e=new Set;return W&&Object.keys(_.unitless||{}).forEach(function(Ie){_e.add(ew(Ie,W.prefix)),_e.add(ew(Ie,$9(C,W.prefix)))}),sCe(ee,_e)},[ee,C,W==null?void 0:W.prefix]),fe=lCe(ee),ne=fe.max,he=fe.min,Te={theme:U,token:V,hashId:z,nonce:function(){return Y.nonce},clientOnly:_.clientOnly,layer:L,order:_.order||-999};typeof s=="function"&&T5(vn(vn({},Te),{},{clientOnly:!1,path:["Shared",J]}),function(){return s(V,{prefix:{rootPrefixCls:J,iconPrefixCls:K},csp:Y})});var Pe=T5(vn(vn({},Te),{},{path:[P,D,K]}),function(){if(_.injectStyle===!1)return[];var _e=oCe(V),Ie=_e.token,Ve=_e.flush,$e=K9(C,F,x),Je=".".concat(D),vt=Q9(C,F,$e,{deprecatedTokens:_.deprecatedTokens});W&&$e&&or($e)==="object"&&Object.keys($e).forEach(function(jt){$e[jt]="var(".concat(ew(jt,$9(C,W.prefix)),")")});var pt=oN(Ie,{componentCls:Je,prefixCls:D,iconCls:".".concat(K),antCls:".".concat(J),calc:se,max:ne,min:he},W?$e:vt),Vt=A(pt,{hashId:z,prefixCls:D,rootPrefixCls:J,iconPrefixCls:K});Ve(C,vt);var fn=typeof a=="function"?a(pt,D,B,_.resetFont):null;return[_.resetStyle===!1?null:fn,Vt]});return[Pe,z]}}function h(d,A,x){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},S=u(d,A,x,vn({resetStyle:!1,order:-998},_)),w=function(P){var L=P.prefixCls,D=P.rootCls,B=D===void 0?L:D;return S(L,B),null};return w}return{genStyleHooks:l,genSubStyleComponent:h,genComponentStyleHook:u}}const pCe="5.26.1";function o4(i){return i>=0&&i<=255}function w_(i,e){const{r:t,g:n,b:r,a:s}=new os(i).toRgb();if(s<1)return i;const{r:a,g:o,b:l}=new os(e).toRgb();for(let c=.01;c<=1;c+=.01){const u=Math.round((t-a*(1-c))/c),h=Math.round((n-o*(1-c))/c),d=Math.round((r-l*(1-c))/c);if(o4(u)&&o4(h)&&o4(d))return new os({r:u,g:h,b:d,a:Math.round(c*100)/100}).toRgbString()}return new os({r:t,g:n,b:r,a:1}).toRgbString()}var ACe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function TY(i){const{override:e}=i,t=ACe(i,["override"]),n=Object.assign({},e);Object.keys(Vx).forEach(d=>{delete n[d]});const r=Object.assign(Object.assign({},t),n),s=480,a=576,o=768,l=992,c=1200,u=1600;if(r.motion===!1){const d="0s";r.motionDurationFast=d,r.motionDurationMid=d,r.motionDurationSlow=d}return Object.assign(Object.assign(Object.assign({},r),{colorFillContent:r.colorFillSecondary,colorFillContentHover:r.colorFill,colorFillAlter:r.colorFillQuaternary,colorBgContainerDisabled:r.colorFillTertiary,colorBorderBg:r.colorBgContainer,colorSplit:w_(r.colorBorderSecondary,r.colorBgContainer),colorTextPlaceholder:r.colorTextQuaternary,colorTextDisabled:r.colorTextQuaternary,colorTextHeading:r.colorText,colorTextLabel:r.colorTextSecondary,colorTextDescription:r.colorTextTertiary,colorTextLightSolid:r.colorWhite,colorHighlight:r.colorError,colorBgTextHover:r.colorFillSecondary,colorBgTextActive:r.colorFill,colorIcon:r.colorTextTertiary,colorIconHover:r.colorText,colorErrorOutline:w_(r.colorErrorBg,r.colorBgContainer),colorWarningOutline:w_(r.colorWarningBg,r.colorBgContainer),fontSizeIcon:r.fontSizeSM,lineWidthFocus:r.lineWidth*3,lineWidth:r.lineWidth,controlOutlineWidth:r.lineWidth*2,controlInteractiveSize:r.controlHeight/2,controlItemBgHover:r.colorFillTertiary,controlItemBgActive:r.colorPrimaryBg,controlItemBgActiveHover:r.colorPrimaryBgHover,controlItemBgActiveDisabled:r.colorFill,controlTmpOutline:r.colorFillQuaternary,controlOutline:w_(r.colorPrimaryBg,r.colorBgContainer),lineType:r.lineType,borderRadius:r.borderRadius,borderRadiusXS:r.borderRadiusXS,borderRadiusSM:r.borderRadiusSM,borderRadiusLG:r.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:r.sizeXXS,paddingXS:r.sizeXS,paddingSM:r.sizeSM,padding:r.size,paddingMD:r.sizeMD,paddingLG:r.sizeLG,paddingXL:r.sizeXL,paddingContentHorizontalLG:r.sizeLG,paddingContentVerticalLG:r.sizeMS,paddingContentHorizontal:r.sizeMS,paddingContentVertical:r.sizeSM,paddingContentHorizontalSM:r.size,paddingContentVerticalSM:r.sizeXS,marginXXS:r.sizeXXS,marginXS:r.sizeXS,marginSM:r.sizeSM,margin:r.size,marginMD:r.sizeMD,marginLG:r.sizeLG,marginXL:r.sizeXL,marginXXL:r.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:s,screenXSMin:s,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:o-1,screenMD:o,screenMDMin:o,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:c-1,screenXL:c,screenXLMin:c,screenXLMax:u-1,screenXXL:u,screenXXLMin:u,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new os("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new os("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new os("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),n)}var eF=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const MY={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},gCe={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},mCe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},EY=(i,e,t)=>{const n=t.getDerivativeToken(i),{override:r}=e,s=eF(e,["override"]);let a=Object.assign(Object.assign({},n),{override:r});return a=TY(a),s&&Object.entries(s).forEach(([o,l])=>{const{theme:c}=l,u=eF(l,["theme"]);let h=u;c&&(h=EY(Object.assign(Object.assign({},a),u),{override:u},c)),a[o]=h}),a};function zT(){const{token:i,hashed:e,theme:t,override:n,cssVar:r}=xa.useContext(xY),s=`${pCe}-${e||""}`,a=t||yY,[o,l,c]=$Me(a,[Vx,i],{salt:s,override:n,getComputedToken:EY,formatToken:TY,cssVar:r&&{prefix:r.prefix,key:r.key,unitless:MY,ignore:gCe,preserve:mCe}});return[a,c,e?l:"",o,r]}const vCe=(i,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:i.colorText,fontSize:i.fontSize,lineHeight:i.lineHeight,listStyle:"none",fontFamily:e?"inherit":i.fontFamily}),yCe=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),xCe=i=>({a:{color:i.colorLink,textDecoration:i.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${i.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:i.colorLinkHover},"&:active":{color:i.colorLinkActive},"&:active, &:hover":{textDecoration:i.linkHoverDecoration,outline:0},"&:focus":{textDecoration:i.linkFocusDecoration,outline:0},"&[disabled]":{color:i.colorTextDisabled,cursor:"not-allowed"}}}),bCe=(i,e,t,n)=>{const r=`[class^="${e}"], [class*=" ${e}"]`,s=t?`.${t}`:r,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let o={};return n!==!1&&(o={fontFamily:i.fontFamily,fontSize:i.fontSize}),{[s]:Object.assign(Object.assign(Object.assign({},o),a),{[r]:a})}},_Ce=(i,e)=>({outline:`${Ec(i.lineWidthFocus)} solid ${i.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),wCe=(i,e)=>({"&:focus-visible":Object.assign({},_Ce(i,e))}),CY=i=>({[`.${i}`]:Object.assign(Object.assign({},yCe()),{[`.${i} .${i}-icon`]:{display:"block"}})}),{genStyleHooks:SCe,genComponentStyleHook:TCe}=dCe({usePrefix:()=>{const{getPrefixCls:i,iconPrefixCls:e}=ye.useContext(Gh);return{rootPrefixCls:i(),iconPrefixCls:e}},useToken:()=>{const[i,e,t,n,r]=zT();return{theme:i,realToken:e,hashId:t,token:n,cssVar:r}},useCSP:()=>{const{csp:i}=ye.useContext(Gh);return i??{}},getResetStyles:(i,e)=>{var t;const n=xCe(i);return[n,{"&":n},CY((t=e==null?void 0:e.prefix.iconPrefixCls)!==null&&t!==void 0?t:aN)]},getCommonStyle:bCe,getCompUnitless:()=>MY}),MCe=(i,e)=>{const[t,n]=zT();return T5({token:n,hashId:"",path:["ant-design-icons",i],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[CY(i)])},ECe=Object.assign({},$5),{useId:tF}=ECe,CCe=()=>"",RCe=typeof tF>"u"?CCe:tF;function PCe(i,e,t){var n;const r=i||{},s=r.inherit===!1||!e?Object.assign(Object.assign({},U5),{hashed:(n=e==null?void 0:e.hashed)!==null&&n!==void 0?n:U5.hashed,cssVar:e==null?void 0:e.cssVar}):e,a=RCe();return IX(()=>{var o,l;if(!i)return e;const c=Object.assign({},s.components);Object.keys(i.components||{}).forEach(d=>{c[d]=Object.assign(Object.assign({},c[d]),i.components[d])});const u=`css-var-${a.replace(/:/g,"")}`,h=((o=r.cssVar)!==null&&o!==void 0?o:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:t==null?void 0:t.prefixCls},typeof s.cssVar=="object"?s.cssVar:{}),typeof r.cssVar=="object"?r.cssVar:{}),{key:typeof r.cssVar=="object"&&((l=r.cssVar)===null||l===void 0?void 0:l.key)||u});return Object.assign(Object.assign(Object.assign({},s),r),{token:Object.assign(Object.assign({},s.token),r.token),components:c,cssVar:h})},[r,s],(o,l)=>o.some((c,u)=>{const h=l[u];return!MMe(c,h,!0)}))}var NCe=["children"],RY=ye.createContext({});function LCe(i){var e=i.children,t=$g(i,NCe);return ye.createElement(RY.Provider,{value:t},e)}var DCe=function(i){kT(t,i);var e=OT(t);function t(){return Yh(this,t),e.apply(this,arguments)}return $h(t,[{key:"render",value:function(){return this.props.children}}]),t}(ye.Component);function kCe(i){var e=ye.useReducer(function(o){return o+1},0),t=hi(e,2),n=t[1],r=ye.useRef(i),s=em(function(){return r.current}),a=em(function(o){r.current=typeof o=="function"?o(r.current):o,n()});return[s,a]}var Vf="none",S_="appear",T_="enter",M_="leave",nF="none",mc="prepare",j0="start",X0="active",lN="end",PY="prepared";function iF(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(i)]="webkit".concat(e),t["Moz".concat(i)]="moz".concat(e),t["ms".concat(i)]="MS".concat(e),t["O".concat(i)]="o".concat(e.toLowerCase()),t}function OCe(i,e){var t={animationend:iF("Animation","AnimationEnd"),transitionend:iF("Transition","TransitionEnd")};return i&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var ICe=OCe(Qh(),typeof window<"u"?window:{}),NY={};if(Qh()){var BCe=document.createElement("div");NY=BCe.style}var E_={};function LY(i){if(E_[i])return E_[i];var e=ICe[i];if(e)for(var t=Object.keys(e),n=t.length,r=0;r<n;r+=1){var s=t[r];if(Object.prototype.hasOwnProperty.call(e,s)&&s in NY)return E_[i]=e[s],E_[i]}return""}var DY=LY("animationend"),kY=LY("transitionend"),OY=!!(DY&&kY),rF=DY||"animationend",sF=kY||"transitionend";function aF(i,e){if(!i)return null;if(or(i)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return i[t]}return"".concat(i,"-").concat(e)}const FCe=function(i){var e=ye.useRef();function t(r){r&&(r.removeEventListener(sF,i),r.removeEventListener(rF,i))}function n(r){e.current&&e.current!==r&&t(e.current),r&&r!==e.current&&(r.addEventListener(sF,i),r.addEventListener(rF,i),e.current=r)}return ye.useEffect(function(){return function(){t(e.current)}},[]),[n,t]};var IY=Qh()?ye.useLayoutEffect:ye.useEffect;const UCe=function(){var i=ye.useRef(null);function e(){tA.cancel(i.current)}function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=tA(function(){r<=1?n({isCanceled:function(){return s!==i.current}}):t(n,r-1)});i.current=s}return ye.useEffect(function(){return function(){e()}},[]),[t,e]};var zCe=[mc,j0,X0,lN],GCe=[mc,PY],BY=!1,VCe=!0;function FY(i){return i===X0||i===lN}const HCe=function(i,e,t){var n=qx(nF),r=hi(n,2),s=r[0],a=r[1],o=UCe(),l=hi(o,2),c=l[0],u=l[1];function h(){a(mc,!0)}var d=e?GCe:zCe;return IY(function(){if(s!==nF&&s!==lN){var A=d.indexOf(s),x=d[A+1],_=t(s);_===BY?a(x,!0):x&&c(function(S){function w(){S.isCanceled()||a(x,!0)}_===!0?w():Promise.resolve(_).then(w)})}},[i,s]),ye.useEffect(function(){return function(){u()}},[]),[h,s]};function qCe(i,e,t,n){var r=n.motionEnter,s=r===void 0?!0:r,a=n.motionAppear,o=a===void 0?!0:a,l=n.motionLeave,c=l===void 0?!0:l,u=n.motionDeadline,h=n.motionLeaveImmediately,d=n.onAppearPrepare,A=n.onEnterPrepare,x=n.onLeavePrepare,_=n.onAppearStart,S=n.onEnterStart,w=n.onLeaveStart,C=n.onAppearActive,P=n.onEnterActive,L=n.onLeaveActive,D=n.onAppearEnd,B=n.onEnterEnd,k=n.onLeaveEnd,U=n.onVisibleChanged,F=qx(),z=hi(F,2),V=z[0],W=z[1],X=kCe(Vf),J=hi(X,2),K=J[0],Y=J[1],ee=qx(null),se=hi(ee,2),fe=se[0],ne=se[1],he=K(),Te=ye.useRef(!1),Pe=ye.useRef(null);function _e(){return t()}var Ie=ye.useRef(!1);function Ve(){Y(Vf),ne(null,!0)}var $e=em(function(kt){var an=K();if(an!==Vf){var be=_e();if(!(kt&&!kt.deadline&&kt.target!==be)){var oe=Ie.current,He;an===S_&&oe?He=D==null?void 0:D(be,kt):an===T_&&oe?He=B==null?void 0:B(be,kt):an===M_&&oe&&(He=k==null?void 0:k(be,kt)),oe&&He!==!1&&Ve()}}}),Je=FCe($e),vt=hi(Je,1),pt=vt[0],Vt=function(an){switch(an){case S_:return Mn(Mn(Mn({},mc,d),j0,_),X0,C);case T_:return Mn(Mn(Mn({},mc,A),j0,S),X0,P);case M_:return Mn(Mn(Mn({},mc,x),j0,w),X0,L);default:return{}}},fn=ye.useMemo(function(){return Vt(he)},[he]),jt=HCe(he,!i,function(kt){if(kt===mc){var an=fn[mc];return an?an(_e()):BY}if(gt in fn){var be;ne(((be=fn[gt])===null||be===void 0?void 0:be.call(fn,_e(),null))||null)}return gt===X0&&he!==Vf&&(pt(_e()),u>0&&(clearTimeout(Pe.current),Pe.current=setTimeout(function(){$e({deadline:!0})},u))),gt===PY&&Ve(),VCe}),de=hi(jt,2),Dt=de[0],gt=de[1],Ct=FY(gt);Ie.current=Ct;var at=ye.useRef(null);IY(function(){if(!(Te.current&&at.current===e)){W(e);var kt=Te.current;Te.current=!0;var an;!kt&&e&&o&&(an=S_),kt&&e&&s&&(an=T_),(kt&&!e&&c||!kt&&h&&!e&&c)&&(an=M_);var be=Vt(an);an&&(i||be[mc])?(Y(an),Dt()):Y(Vf),at.current=e}},[e]),ye.useEffect(function(){(he===S_&&!o||he===T_&&!s||he===M_&&!c)&&Y(Vf)},[o,s,c]),ye.useEffect(function(){return function(){Te.current=!1,clearTimeout(Pe.current)}},[]);var Yt=ye.useRef(!1);ye.useEffect(function(){V&&(Yt.current=!0),V!==void 0&&he===Vf&&((Yt.current||V)&&(U==null||U(V)),Yt.current=!0)},[V,he]);var Rt=fe;return fn[mc]&&gt===j0&&(Rt=vn({transition:"none"},Rt)),[he,gt,Rt,V??e]}function WCe(i){var e=i;or(i)==="object"&&(e=i.transitionSupport);function t(r,s){return!!(r.motionName&&e&&s!==!1)}var n=ye.forwardRef(function(r,s){var a=r.visible,o=a===void 0?!0:a,l=r.removeOnLeave,c=l===void 0?!0:l,u=r.forceRender,h=r.children,d=r.motionName,A=r.leavedClassName,x=r.eventProps,_=ye.useContext(RY),S=_.motion,w=t(r,S),C=ye.useRef(),P=ye.useRef();function L(){try{return C.current instanceof HTMLElement?C.current:dMe(P.current)}catch{return null}}var D=qCe(w,o,L,r),B=hi(D,4),k=B[0],U=B[1],F=B[2],z=B[3],V=ye.useRef(z);z&&(V.current=!0);var W=ye.useCallback(function(se){C.current=se,BX(s,se)},[s]),X,J=vn(vn({},x),{},{visible:o});if(!h)X=null;else if(k===Vf)z?X=h(vn({},J),W):!c&&V.current&&A?X=h(vn(vn({},J),{},{className:A}),W):u||!c&&!A?X=h(vn(vn({},J),{},{style:{display:"none"}}),W):X=null;else{var K;U===mc?K="prepare":FY(U)?K="active":U===j0&&(K="start");var Y=aF(d,"".concat(k,"-").concat(K));X=h(vn(vn({},J),{},{className:ym(aF(d,k),Mn(Mn({},Y,Y&&K),d,typeof d=="string")),style:F}),W)}if(ye.isValidElement(X)&&UX(X)){var ee=GX(X);ee||(X=ye.cloneElement(X,{ref:W}))}return ye.createElement(DCe,{ref:P},X)});return n.displayName="CSSMotion",n}const UY=WCe(OY);var G5="add",V5="keep",H5="remove",l4="removed";function jCe(i){var e;return i&&or(i)==="object"&&"key"in i?e=i:e={key:i},vn(vn({},e),{},{key:String(e.key)})}function q5(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return i.map(jCe)}function XCe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,r=e.length,s=q5(i),a=q5(e);s.forEach(function(c){for(var u=!1,h=n;h<r;h+=1){var d=a[h];if(d.key===c.key){n<h&&(t=t.concat(a.slice(n,h).map(function(A){return vn(vn({},A),{},{status:G5})})),n=h),t.push(vn(vn({},d),{},{status:V5})),n+=1,u=!0;break}}u||t.push(vn(vn({},c),{},{status:H5}))}),n<r&&(t=t.concat(a.slice(n).map(function(c){return vn(vn({},c),{},{status:G5})})));var o={};t.forEach(function(c){var u=c.key;o[u]=(o[u]||0)+1});var l=Object.keys(o).filter(function(c){return o[c]>1});return l.forEach(function(c){t=t.filter(function(u){var h=u.key,d=u.status;return h!==c||d!==H5}),t.forEach(function(u){u.key===c&&(u.status=V5)})}),t}var YCe=["component","children","onVisibleChanged","onAllRemoved"],$Ce=["status"],QCe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ZCe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UY,t=function(n){kT(s,n);var r=OT(s);function s(){var a;Yh(this,s);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=r.call.apply(r,[this].concat(l)),Mn(sd(a),"state",{keyEntities:[]}),Mn(sd(a),"removeKey",function(u){a.setState(function(h){var d=h.keyEntities.map(function(A){return A.key!==u?A:vn(vn({},A),{},{status:l4})});return{keyEntities:d}},function(){var h=a.state.keyEntities,d=h.filter(function(A){var x=A.status;return x!==l4}).length;d===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return $h(s,[{key:"render",value:function(){var o=this,l=this.state.keyEntities,c=this.props,u=c.component,h=c.children,d=c.onVisibleChanged;c.onAllRemoved;var A=$g(c,YCe),x=u||ye.Fragment,_={};return QCe.forEach(function(S){_[S]=A[S],delete A[S]}),delete A.keys,ye.createElement(x,A,l.map(function(S,w){var C=S.status,P=$g(S,$Ce),L=C===G5||C===V5;return ye.createElement(e,Vs({},_,{key:P.key,visible:L,eventProps:P,onVisibleChanged:function(B){d==null||d(B,{key:P.key}),B||o.removeKey(P.key)}}),function(D,B){return h(vn(vn({},D),{},{index:w}),B)})}))}}],[{key:"getDerivedStateFromProps",value:function(o,l){var c=o.keys,u=l.keyEntities,h=q5(c),d=XCe(u,h);return{keyEntities:d.filter(function(A){var x=u.find(function(_){var S=_.key;return A.key===S});return!(x&&x.status===l4&&A.status===H5)})}}}]),s}(ye.Component);return Mn(t,"defaultProps",{component:"div"}),t}ZCe(OY);const oF=ye.createContext(!0);function KCe(i){const e=ye.useContext(oF),{children:t}=i,[,n]=zT(),{motion:r}=n,s=ye.useRef(!1);return s.current||(s.current=e!==r),s.current?ye.createElement(oF.Provider,{value:r},ye.createElement(LCe,{motion:r},t)):t}const JCe=()=>null;var e4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const t4e=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let zY;function n4e(){return zY||SS}function i4e(i){return Object.keys(i).some(e=>e.endsWith("Color"))}const r4e=i=>{const{prefixCls:e,iconPrefixCls:t,theme:n,holderRender:r}=i;e!==void 0&&(zY=e),n&&i4e(n)&&KEe(n4e(),n)},s4e=i=>{const{children:e,csp:t,autoInsertSpaceInButton:n,alert:r,anchor:s,form:a,locale:o,componentSize:l,direction:c,space:u,splitter:h,virtual:d,dropdownMatchSelectWidth:A,popupMatchSelectWidth:x,popupOverflow:_,legacyLocale:S,parentContext:w,iconPrefixCls:C,theme:P,componentDisabled:L,segmented:D,statistic:B,spin:k,calendar:U,carousel:F,cascader:z,collapse:V,typography:W,checkbox:X,descriptions:J,divider:K,drawer:Y,skeleton:ee,steps:se,image:fe,layout:ne,list:he,mentions:Te,modal:Pe,progress:_e,result:Ie,slider:Ve,breadcrumb:$e,menu:Je,pagination:vt,input:pt,textArea:Vt,empty:fn,badge:jt,radio:de,rate:Dt,switch:gt,transfer:Ct,avatar:at,message:Yt,tag:Rt,table:kt,card:an,tabs:be,timeline:oe,timePicker:He,upload:tt,notification:ct,tree:et,colorPicker:Xt,datePicker:Gt,rangePicker:ln,flex:dn,wave:_t,dropdown:Zt,warning:yn,tour:mn,tooltip:zt,popover:zn,popconfirm:Ae,floatButtonGroup:Ht,variant:Mt,inputNumber:en,treeSelect:Ot}=i,ht=ye.useCallback((ie,xn)=>{const{prefixCls:Gn}=i;if(xn)return xn;const mi=Gn||w.getPrefixCls("");return ie?`${mi}-${ie}`:mi},[w.getPrefixCls,i.prefixCls]),tn=C||w.iconPrefixCls||aN,Ln=t||w.csp;MCe(tn,Ln);const Ei=PCe(P,w.theme,{prefixCls:ht("")}),fi={csp:Ln,autoInsertSpaceInButton:n,alert:r,anchor:s,locale:o||S,direction:c,space:u,splitter:h,virtual:d,popupMatchSelectWidth:x??A,popupOverflow:_,getPrefixCls:ht,iconPrefixCls:tn,theme:Ei,segmented:D,statistic:B,spin:k,calendar:U,carousel:F,cascader:z,collapse:V,typography:W,checkbox:X,descriptions:J,divider:K,drawer:Y,skeleton:ee,steps:se,image:fe,input:pt,textArea:Vt,layout:ne,list:he,mentions:Te,modal:Pe,progress:_e,result:Ie,slider:Ve,breadcrumb:$e,menu:Je,pagination:vt,empty:fn,badge:jt,radio:de,rate:Dt,switch:gt,transfer:Ct,avatar:at,message:Yt,tag:Rt,table:kt,card:an,tabs:be,timeline:oe,timePicker:He,upload:tt,notification:ct,tree:et,colorPicker:Xt,datePicker:Gt,rangePicker:ln,flex:dn,wave:_t,dropdown:Zt,warning:yn,tour:mn,tooltip:zt,popover:zn,popconfirm:Ae,floatButtonGroup:Ht,variant:Mt,inputNumber:en,treeSelect:Ot},Or=Object.assign({},w);Object.keys(fi).forEach(ie=>{fi[ie]!==void 0&&(Or[ie]=fi[ie])}),t4e.forEach(ie=>{const xn=i[ie];xn&&(Or[ie]=xn)}),typeof n<"u"&&(Or.button=Object.assign({autoInsertSpace:n},Or.button));const Gi=IX(()=>Or,Or,(ie,xn)=>{const Gn=Object.keys(ie),mi=Object.keys(xn);return Gn.length!==mi.length||Gn.some(wn=>ie[wn]!==xn[wn])}),{layer:qe}=ye.useContext(C1),st=ye.useMemo(()=>({prefixCls:tn,csp:Ln,layer:qe?"antd":void 0}),[tn,Ln,qe]);let St=ye.createElement(ye.Fragment,null,ye.createElement(JCe,{dropdownMatchSelectWidth:A}),e);const ft=ye.useMemo(()=>{var ie,xn,Gn,mi;return CEe(((ie=UT.Form)===null||ie===void 0?void 0:ie.defaultValidateMessages)||{},((Gn=(xn=Gi.locale)===null||xn===void 0?void 0:xn.Form)===null||Gn===void 0?void 0:Gn.defaultValidateMessages)||{},((mi=Gi.form)===null||mi===void 0?void 0:mi.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[Gi,a==null?void 0:a.validateMessages]);Object.keys(ft).length>0&&(St=ye.createElement(PEe.Provider,{value:ft},St)),o&&(St=ye.createElement(DEe,{locale:o,_ANT_MARK__:LEe},St)),St=ye.createElement(sN.Provider,{value:st},St),l&&(St=ye.createElement(eCe,{size:l},St)),St=ye.createElement(KCe,null,St);const m=ye.useMemo(()=>{const ie=Ei||{},{algorithm:xn,token:Gn,components:mi,cssVar:wn}=ie,Zn=e4e(ie,["algorithm","token","components","cssVar"]),Rs=xn&&(!Array.isArray(xn)||xn.length>0)?b5(xn):yY,ni={};Object.entries(mi||{}).forEach(([Ps,Ql])=>{const hs=Object.assign({},Ql);"algorithm"in hs&&(hs.algorithm===!0?hs.theme=Rs:(Array.isArray(hs.algorithm)||typeof hs.algorithm=="function")&&(hs.theme=b5(hs.algorithm)),delete hs.algorithm),ni[Ps]=hs});const hn=Object.assign(Object.assign({},Vx),Gn);return Object.assign(Object.assign({},Zn),{theme:Rs,token:hn,components:ni,override:Object.assign({override:hn},ni),cssVar:wn})},[Ei]);return P&&(St=ye.createElement(xY.Provider,{value:m},St)),Gi.warning&&(St=ye.createElement(REe.Provider,{value:Gi.warning},St)),L!==void 0&&(St=ye.createElement(JEe,{disabled:L},St)),ye.createElement(Gh.Provider,{value:Gi},St)},R1=i=>{const e=ye.useContext(Gh),t=ye.useContext(AY);return ye.createElement(s4e,Object.assign({parentContext:e,legacyLocale:t},i))};R1.ConfigContext=Gh;R1.SizeContext=Jg;R1.config=r4e;R1.useConfig=tCe;Object.defineProperty(R1,"SizeContext",{get:()=>Jg});function GY(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}function a4e(i){return GY(i)instanceof ShadowRoot}function o4e(i){return a4e(i)?GY(i):null}function l4e(i){return i.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function c4e(i,e){E1(i,"[@ant-design/icons] ".concat(e))}function lF(i){return or(i)==="object"&&typeof i.name=="string"&&typeof i.theme=="string"&&(or(i.icon)==="object"||typeof i.icon=="function")}function cF(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(i).reduce(function(e,t){var n=i[t];switch(t){case"class":e.className=n,delete e.class;break;default:delete e[t],e[l4e(t)]=n}return e},{})}function W5(i,e,t){return t?xa.createElement(i.tag,vn(vn({key:e},cF(i.attrs)),t),(i.children||[]).map(function(n,r){return W5(n,"".concat(e,"-").concat(i.tag,"-").concat(r))})):xa.createElement(i.tag,vn({key:e},cF(i.attrs)),(i.children||[]).map(function(n,r){return W5(n,"".concat(e,"-").concat(i.tag,"-").concat(r))}))}function VY(i){return Hx(i)[0]}function HY(i){return i?Array.isArray(i)?i:[i]:[]}var u4e=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,h4e=function(e){var t=ye.useContext(sN),n=t.csp,r=t.prefixCls,s=t.layer,a=u4e;r&&(a=a.replace(/anticon/g,r)),s&&(a="@layer ".concat(s,` {
`).concat(a,`
}`)),ye.useEffect(function(){var o=e.current,l=o4e(o);Up(a,"@ant-design-icons",{prepend:!s,csp:n,attachTo:l})},[])},f4e=["icon","className","onClick","style","primaryColor","secondaryColor"],zy={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function d4e(i){var e=i.primaryColor,t=i.secondaryColor;zy.primaryColor=e,zy.secondaryColor=t||VY(e),zy.calculated=!!t}function p4e(){return vn({},zy)}var bm=function(e){var t=e.icon,n=e.className,r=e.onClick,s=e.style,a=e.primaryColor,o=e.secondaryColor,l=$g(e,f4e),c=ye.useRef(),u=zy;if(a&&(u={primaryColor:a,secondaryColor:o||VY(a)}),h4e(c),c4e(lF(t),"icon should be icon definiton, but got ".concat(t)),!lF(t))return null;var h=t;return h&&typeof h.icon=="function"&&(h=vn(vn({},h),{},{icon:h.icon(u.primaryColor,u.secondaryColor)})),W5(h.icon,"svg-".concat(h.name),vn(vn({className:n,onClick:r,style:s,"data-icon":h.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};bm.displayName="IconReact";bm.getTwoToneColors=p4e;bm.setTwoToneColors=d4e;function qY(i){var e=HY(i),t=hi(e,2),n=t[0],r=t[1];return bm.setTwoToneColors({primaryColor:n,secondaryColor:r})}function A4e(){var i=bm.getTwoToneColors();return i.calculated?[i.primaryColor,i.secondaryColor]:i.primaryColor}var g4e=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];qY(wS.primary);var GT=ye.forwardRef(function(i,e){var t=i.className,n=i.icon,r=i.spin,s=i.rotate,a=i.tabIndex,o=i.onClick,l=i.twoToneColor,c=$g(i,g4e),u=ye.useContext(sN),h=u.prefixCls,d=h===void 0?"anticon":h,A=u.rootClassName,x=ym(A,d,Mn(Mn({},"".concat(d,"-").concat(n.name),!!n.name),"".concat(d,"-spin"),!!r||n.name==="loading"),t),_=a;_===void 0&&o&&(_=-1);var S=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,w=HY(l),C=hi(w,2),P=C[0],L=C[1];return ye.createElement("span",Vs({role:"img","aria-label":n.name},c,{ref:e,tabIndex:_,onClick:o,className:x}),ye.createElement(bm,{icon:n,primaryColor:P,secondaryColor:L,style:S}))});GT.displayName="AntdIcon";GT.getTwoToneColor=A4e;GT.setTwoToneColor=qY;const m4e=(i,e,t)=>xa.isValidElement(i)?xa.cloneElement(i,typeof t=="function"?t(i.props||{}):t):e;function v4e(i,e){return m4e(i,i,e)}var uF={LEFT:37,RIGHT:39},y4e={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},x4e=function(e,t){return ye.createElement(GT,Vs({},e,{ref:t,icon:y4e}))},b4e=ye.forwardRef(x4e);function WY(i,e){this.v=i,this.k=e}function Da(i,e,t,n){var r=Object.defineProperty;try{r({},"",{})}catch{r=0}Da=function(a,o,l,c){if(o)r?r(a,o,{value:l,enumerable:!c,configurable:!c,writable:!c}):a[o]=l;else{var u=function(d,A){Da(a,d,function(x){return this._invoke(d,A,x)})};u("next",0),u("throw",1),u("return",2)}},Da(i,e,t,n)}function cN(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var i,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function s(A,x,_,S){var w=x&&x.prototype instanceof o?x:o,C=Object.create(w.prototype);return Da(C,"_invoke",function(P,L,D){var B,k,U,F=0,z=D||[],V=!1,W={p:0,n:0,v:i,a:X,f:X.bind(i,4),d:function(K,Y){return B=K,k=0,U=i,W.n=Y,a}};function X(J,K){for(k=J,U=K,e=0;!V&&F&&!Y&&e<z.length;e++){var Y,ee=z[e],se=W.p,fe=ee[2];J>3?(Y=fe===K)&&(U=ee[(k=ee[4])?5:(k=3,3)],ee[4]=ee[5]=i):ee[0]<=se&&((Y=J<2&&se<ee[1])?(k=0,W.v=K,W.n=ee[1]):se<fe&&(Y=J<3||ee[0]>K||K>fe)&&(ee[4]=J,ee[5]=K,W.n=fe,k=0))}if(Y||J>1)return a;throw V=!0,K}return function(J,K,Y){if(F>1)throw TypeError("Generator is already running");for(V&&K===1&&X(K,Y),k=K,U=Y;(e=k<2?i:U)||!V;){B||(k?k<3?(k>1&&(W.n=-1),X(k,U)):W.n=U:W.v=U);try{if(F=2,B){if(k||(J="next"),e=B[J]){if(!(e=e.call(B,U)))throw TypeError("iterator result is not an object");if(!e.done)return e;U=e.value,k<2&&(k=0)}else k===1&&(e=B.return)&&e.call(B),k<2&&(U=TypeError("The iterator does not provide a '"+J+"' method"),k=1);B=i}else if((e=(V=W.n<0)?U:P.call(L,W))!==a)break}catch(ee){B=i,k=1,U=ee}finally{F=1}}return{value:e,done:V}}}(A,_,S),!0),C}var a={};function o(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][n]?e(e([][n]())):(Da(e={},n,function(){return this}),e),h=c.prototype=o.prototype=Object.create(u);function d(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,c):(A.__proto__=c,Da(A,r,"GeneratorFunction")),A.prototype=Object.create(h),A}return l.prototype=c,Da(h,"constructor",c),Da(c,"constructor",l),l.displayName="GeneratorFunction",Da(c,r,"GeneratorFunction"),Da(h),Da(h,r,"Generator"),Da(h,n,function(){return this}),Da(h,"toString",function(){return"[object Generator]"}),(cN=function(){return{w:s,m:d}})()}function MS(i,e){function t(r,s,a,o){try{var l=i[r](s),c=l.value;return c instanceof WY?e.resolve(c.v).then(function(u){t("next",u,a,o)},function(u){t("throw",u,a,o)}):e.resolve(c).then(function(u){l.value=u,a(l)},function(u){return t("throw",u,a,o)})}catch(u){o(u)}}var n;this.next||(Da(MS.prototype),Da(MS.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Da(this,"_invoke",function(r,s,a){function o(){return new e(function(l,c){t(r,a,l,c)})}return n=n?n.then(o,o):o()},!0)}function jY(i,e,t,n,r){return new MS(cN().w(i,e,t,n),r||Promise)}function _4e(i,e,t,n,r){var s=jY(i,e,t,n,r);return s.next().then(function(a){return a.done?a.value:s.next()})}function w4e(i){var e=Object(i),t=[];for(var n in e)t.unshift(n);return function r(){for(;t.length;)if((n=t.pop())in e)return r.value=n,r.done=!1,r;return r.done=!0,r}}function hF(i){if(i!=null){var e=i[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(e)return e.call(i);if(typeof i.next=="function")return i;if(!isNaN(i.length))return{next:function(){return i&&t>=i.length&&(i=void 0),{value:i&&i[t++],done:!i}}}}throw new TypeError(or(i)+" is not iterable")}function tm(){var i=cN(),e=i.m(tm),t=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function n(a){var o=typeof a=="function"&&a.constructor;return!!o&&(o===t||(o.displayName||o.name)==="GeneratorFunction")}var r={throw:1,return:2,break:3,continue:3};function s(a){var o,l;return function(c){o||(o={stop:function(){return l(c.a,2)},catch:function(){return c.v},abrupt:function(h,d){return l(c.a,r[h],d)},delegateYield:function(h,d,A){return o.resultName=d,l(c.d,hF(h),A)},finish:function(h){return l(c.f,h)}},l=function(h,d,A){c.p=o.prev,c.n=o.next;try{return h(d,A)}finally{o.next=c.n}}),o.resultName&&(o[o.resultName]=c.v,o.resultName=void 0),o.sent=c.v,o.next=c.n;try{return a.call(this,o)}finally{c.p=o.prev,c.n=o.next}}}return(tm=function(){return{wrap:function(l,c,u,h){return i.w(s(l),c,u,h&&h.reverse())},isGeneratorFunction:n,mark:i.m,awrap:function(l,c){return new WY(l,c)},AsyncIterator:MS,async:function(l,c,u,h,d){return(n(c)?jY:_4e)(s(l),c,u,h,d)},keys:w4e,values:hF}})()}function fF(i,e,t,n,r,s,a){try{var o=i[s](a),l=o.value}catch(c){return void t(c)}o.done?e(l):Promise.resolve(l).then(n,r)}function XY(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function a(l){fF(s,n,r,a,o,"next",l)}function o(l){fF(s,n,r,a,o,"throw",l)}a(void 0)})}}var P1=vn({},hMe),S4e=P1.version,c4=P1.render,T4e=P1.unmountComponentAtNode,VT;try{var M4e=Number((S4e||"").split(".")[0]);M4e>=18&&(VT=P1.createRoot)}catch{}function dF(i){var e=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&or(e)==="object"&&(e.usingClientEntryPoint=i)}var ES="__rc_react_root__";function E4e(i,e){dF(!0);var t=e[ES]||VT(e);dF(!1),t.render(i),e[ES]=t}function C4e(i,e){c4==null||c4(i,e)}function R4e(i,e){if(VT){E4e(i,e);return}C4e(i,e)}function P4e(i){return j5.apply(this,arguments)}function j5(){return j5=XY(tm().mark(function i(e){return tm().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve().then(function(){var r;(r=e[ES])===null||r===void 0||r.unmount(),delete e[ES]}));case 1:case"end":return n.stop()}},i)})),j5.apply(this,arguments)}function N4e(i){T4e(i)}function L4e(i){return X5.apply(this,arguments)}function X5(){return X5=XY(tm().mark(function i(e){return tm().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(VT===void 0){n.next=2;break}return n.abrupt("return",P4e(e));case 2:N4e(e);case 3:case"end":return n.stop()}},i)})),X5.apply(this,arguments)}const D4e=(i,e)=>(R4e(i,e),()=>L4e(e));let k4e=D4e;function O4e(i){return k4e}const I4e=function(i){if(!i)return!1;if(i instanceof Element){if(i.offsetParent)return!0;if(i.getBBox){var e=i.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(i.getBoundingClientRect){var r=i.getBoundingClientRect(),s=r.width,a=r.height;if(s||a)return!0}}return!1},B4e=i=>{const{componentCls:e,colorPrimary:t}=i;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${t})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${i.motionEaseOutCirc}`,`opacity 2s ${i.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${i.motionDurationSlow} ${i.motionEaseInOut}`,`opacity ${i.motionDurationSlow} ${i.motionEaseInOut}`].join(",")}}}}},F4e=TCe("Wave",i=>[B4e(i)]),YY=`${SS}-wave-target`;function u4(i){return i&&i!=="#fff"&&i!=="#ffffff"&&i!=="rgb(255, 255, 255)"&&i!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(i)&&i!=="transparent"}function U4e(i){const{borderTopColor:e,borderColor:t,backgroundColor:n}=getComputedStyle(i);return u4(e)?e:u4(t)?t:u4(n)?n:null}function h4(i){return Number.isNaN(i)?0:i}const z4e=i=>{const{className:e,target:t,component:n,registerUnmount:r}=i,s=ye.useRef(null),a=ye.useRef(null);ye.useEffect(()=>{a.current=r()},[]);const[o,l]=ye.useState(null),[c,u]=ye.useState([]),[h,d]=ye.useState(0),[A,x]=ye.useState(0),[_,S]=ye.useState(0),[w,C]=ye.useState(0),[P,L]=ye.useState(!1),D={left:h,top:A,width:_,height:w,borderRadius:c.map(U=>`${U}px`).join(" ")};o&&(D["--wave-color"]=o);function B(){const U=getComputedStyle(t);l(U4e(t));const F=U.position==="static",{borderLeftWidth:z,borderTopWidth:V}=U;d(F?t.offsetLeft:h4(-parseFloat(z))),x(F?t.offsetTop:h4(-parseFloat(V))),S(t.offsetWidth),C(t.offsetHeight);const{borderTopLeftRadius:W,borderTopRightRadius:X,borderBottomLeftRadius:J,borderBottomRightRadius:K}=U;u([W,X,K,J].map(Y=>h4(parseFloat(Y))))}if(ye.useEffect(()=>{if(t){const U=tA(()=>{B(),L(!0)});let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(B),F.observe(t)),()=>{tA.cancel(U),F==null||F.disconnect()}}},[]),!P)return null;const k=(n==="Checkbox"||n==="Radio")&&(t==null?void 0:t.classList.contains(YY));return ye.createElement(UY,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(U,F)=>{var z,V;if(F.deadline||F.propertyName==="opacity"){const W=(z=s.current)===null||z===void 0?void 0:z.parentElement;(V=a.current)===null||V===void 0||V.call(a).then(()=>{W==null||W.remove()})}return!1}},({className:U},F)=>ye.createElement("div",{ref:FX(s,F),className:ym(e,U,{"wave-quick":k}),style:D}))},G4e=(i,e)=>{var t;const{component:n}=e;if(n==="Checkbox"&&!(!((t=i.querySelector("input"))===null||t===void 0)&&t.checked))return;const r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",i==null||i.insertBefore(r,i==null?void 0:i.firstChild);const s=O4e();let a=null;function o(){return a}a=s(ye.createElement(z4e,Object.assign({},e,{target:i,registerUnmount:o})),r)},V4e=(i,e,t)=>{const{wave:n}=ye.useContext(Gh),[,r,s]=zT(),a=em(c=>{const u=i.current;if(n!=null&&n.disabled||!u)return;const h=u.querySelector(`.${YY}`)||u,{showEffect:d}=n||{};(d||G4e)(h,{className:e,token:r,component:t,event:c,hashId:s})}),o=ye.useRef(null);return c=>{tA.cancel(o.current),o.current=tA(()=>{a(c)})}},H4e=i=>{const{children:e,disabled:t,component:n}=i,{getPrefixCls:r}=ye.useContext(Gh),s=ye.useRef(null),a=r("wave"),[,o]=F4e(a),l=V4e(s,ym(a,o),n);if(xa.useEffect(()=>{const u=s.current;if(!u||u.nodeType!==1||t)return;const h=d=>{!I4e(d.target)||!u.getAttribute||u.getAttribute("disabled")||u.disabled||u.className.includes("disabled")||u.className.includes("-leave")||l(d)};return u.addEventListener("click",h,!0),()=>{u.removeEventListener("click",h,!0)}},[t]),!xa.isValidElement(e))return e??null;const c=UX(e)?FX(GX(e),s):s;return v4e(e,{ref:c})},q4e=i=>{const e=xa.useContext(Jg);return xa.useMemo(()=>i?typeof i=="string"?i??e:typeof i=="function"?i(e):e:e,[i,e])};var W4e=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],$Y=ye.forwardRef(function(i,e){var t,n=i.prefixCls,r=n===void 0?"rc-switch":n,s=i.className,a=i.checked,o=i.defaultChecked,l=i.disabled,c=i.loadingIcon,u=i.checkedChildren,h=i.unCheckedChildren,d=i.onClick,A=i.onChange,x=i.onKeyDown,_=$g(i,W4e),S=wY(!1,{value:a,defaultValue:o}),w=hi(S,2),C=w[0],P=w[1];function L(U,F){var z=C;return l||(z=U,P(z),A==null||A(z,F)),z}function D(U){U.which===uF.LEFT?L(!1,U):U.which===uF.RIGHT&&L(!0,U),x==null||x(U)}function B(U){var F=L(!C,U);d==null||d(F,U)}var k=ym(r,s,(t={},Mn(t,"".concat(r,"-checked"),C),Mn(t,"".concat(r,"-disabled"),l),t));return ye.createElement("button",Vs({},_,{type:"button",role:"switch","aria-checked":C,disabled:l,className:k,ref:e,onKeyDown:D,onClick:B}),c,ye.createElement("span",{className:"".concat(r,"-inner")},ye.createElement("span",{className:"".concat(r,"-inner-checked")},u),ye.createElement("span",{className:"".concat(r,"-inner-unchecked")},h)))});$Y.displayName="Switch";const j4e=i=>{const{componentCls:e,trackHeightSM:t,trackPadding:n,trackMinWidthSM:r,innerMinMarginSM:s,innerMaxMarginSM:a,handleSizeSM:o,calc:l}=i,c=`${e}-inner`,u=Ec(l(o).add(l(n).mul(2)).equal()),h=Ec(l(a).mul(2).equal());return{[e]:{[`&${e}-small`]:{minWidth:r,height:t,lineHeight:Ec(t),[`${e}-inner`]:{paddingInlineStart:a,paddingInlineEnd:s,[`${c}-checked, ${c}-unchecked`]:{minHeight:t},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${h})`,marginInlineEnd:`calc(100% - ${u} + ${h})`},[`${c}-unchecked`]:{marginTop:l(t).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${e}-handle`]:{width:o,height:o},[`${e}-loading-icon`]:{top:l(l(o).sub(i.switchLoadingIconSize)).div(2).equal(),fontSize:i.switchLoadingIconSize},[`&${e}-checked`]:{[`${e}-inner`]:{paddingInlineStart:s,paddingInlineEnd:a,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${h})`,marginInlineEnd:`calc(-100% + ${u} - ${h})`}},[`${e}-handle`]:{insetInlineStart:`calc(100% - ${Ec(l(o).add(n).equal())})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:l(i.marginXXS).div(2).equal(),marginInlineEnd:l(i.marginXXS).mul(-1).div(2).equal()}},[`&${e}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:l(i.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:l(i.marginXXS).div(2).equal()}}}}}}},X4e=i=>{const{componentCls:e,handleSize:t,calc:n}=i;return{[e]:{[`${e}-loading-icon${i.iconCls}`]:{position:"relative",top:n(n(t).sub(i.fontSize)).div(2).equal(),color:i.switchLoadingIconColor,verticalAlign:"top"},[`&${e}-checked ${e}-loading-icon`]:{color:i.switchColor}}}},Y4e=i=>{const{componentCls:e,trackPadding:t,handleBg:n,handleShadow:r,handleSize:s,calc:a}=i,o=`${e}-handle`;return{[e]:{[o]:{position:"absolute",top:t,insetInlineStart:t,width:s,height:s,transition:`all ${i.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:n,borderRadius:a(s).div(2).equal(),boxShadow:r,transition:`all ${i.switchDuration} ease-in-out`,content:'""'}},[`&${e}-checked ${o}`]:{insetInlineStart:`calc(100% - ${Ec(a(s).add(t).equal())})`},[`&:not(${e}-disabled):active`]:{[`${o}::before`]:{insetInlineEnd:i.switchHandleActiveInset,insetInlineStart:0},[`&${e}-checked ${o}::before`]:{insetInlineEnd:0,insetInlineStart:i.switchHandleActiveInset}}}}},$4e=i=>{const{componentCls:e,trackHeight:t,trackPadding:n,innerMinMargin:r,innerMaxMargin:s,handleSize:a,calc:o}=i,l=`${e}-inner`,c=Ec(o(a).add(o(n).mul(2)).equal()),u=Ec(o(s).mul(2).equal());return{[e]:{[l]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:s,paddingInlineEnd:r,transition:`padding-inline-start ${i.switchDuration} ease-in-out, padding-inline-end ${i.switchDuration} ease-in-out`,[`${l}-checked, ${l}-unchecked`]:{display:"block",color:i.colorTextLightSolid,fontSize:i.fontSizeSM,transition:`margin-inline-start ${i.switchDuration} ease-in-out, margin-inline-end ${i.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:t},[`${l}-checked`]:{marginInlineStart:`calc(-100% + ${c} - ${u})`,marginInlineEnd:`calc(100% - ${c} + ${u})`},[`${l}-unchecked`]:{marginTop:o(t).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${e}-checked ${l}`]:{paddingInlineStart:r,paddingInlineEnd:s,[`${l}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${l}-unchecked`]:{marginInlineStart:`calc(100% - ${c} + ${u})`,marginInlineEnd:`calc(-100% + ${c} - ${u})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${l}`]:{[`${l}-unchecked`]:{marginInlineStart:o(n).mul(2).equal(),marginInlineEnd:o(n).mul(-1).mul(2).equal()}},[`&${e}-checked ${l}`]:{[`${l}-checked`]:{marginInlineStart:o(n).mul(-1).mul(2).equal(),marginInlineEnd:o(n).mul(2).equal()}}}}}},Q4e=i=>{const{componentCls:e,trackHeight:t,trackMinWidth:n}=i;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},vCe(i)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:n,height:t,lineHeight:Ec(t),verticalAlign:"middle",background:i.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${i.motionDurationMid}`,userSelect:"none",[`&:hover:not(${e}-disabled)`]:{background:i.colorTextTertiary}}),wCe(i)),{[`&${e}-checked`]:{background:i.switchColor,[`&:hover:not(${e}-disabled)`]:{background:i.colorPrimaryHover}},[`&${e}-loading, &${e}-disabled`]:{cursor:"not-allowed",opacity:i.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${e}-rtl`]:{direction:"rtl"}})}},Z4e=i=>{const{fontSize:e,lineHeight:t,controlHeight:n,colorWhite:r}=i,s=e*t,a=n/2,o=2,l=s-o*2,c=a-o*2;return{trackHeight:s,trackHeightSM:a,trackMinWidth:l*2+o*4,trackMinWidthSM:c*2+o*2,trackPadding:o,handleBg:r,handleSize:l,handleSizeSM:c,handleShadow:`0 2px 4px 0 ${new os("#00230b").setA(.2).toRgbString()}`,innerMinMargin:l/2,innerMaxMargin:l+o+o*2,innerMinMarginSM:c/2,innerMaxMarginSM:c+o+o*2}},K4e=SCe("Switch",i=>{const e=oN(i,{switchDuration:i.motionDurationMid,switchColor:i.colorPrimary,switchDisabledOpacity:i.opacityLoading,switchLoadingIconSize:i.calc(i.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${i.opacityLoading})`,switchHandleActiveInset:"-30%"});return[Q4e(e),$4e(e),Y4e(e),X4e(e),j4e(e)]},Z4e);var J4e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const eRe=ye.forwardRef((i,e)=>{const{prefixCls:t,size:n,disabled:r,loading:s,className:a,rootClassName:o,style:l,checked:c,value:u,defaultChecked:h,defaultValue:d,onChange:A}=i,x=J4e(i,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[_,S]=wY(!1,{value:c??u,defaultValue:h??d}),{getPrefixCls:w,direction:C,switch:P}=ye.useContext(Gh),L=ye.useContext(TS),D=(r??L)||s,B=w("switch",t),k=ye.createElement("div",{className:`${B}-handle`},s&&ye.createElement(b4e,{className:`${B}-loading-icon`})),[U,F,z]=K4e(B),V=q4e(n),W=ym(P==null?void 0:P.className,{[`${B}-small`]:V==="small",[`${B}-loading`]:s,[`${B}-rtl`]:C==="rtl"},a,o,F,z),X=Object.assign(Object.assign({},P==null?void 0:P.style),l),J=(...K)=>{S(K[0]),A==null||A.apply(void 0,K)};return U(ye.createElement(H4e,{component:"Switch"},ye.createElement($Y,Object.assign({},x,{checked:_,onChange:J,prefixCls:B,className:W,style:X,disabled:D,ref:e,loadingIcon:k}))))}),QY=eRe;QY.__ANT_SWITCH=!0;const tRe=()=>{const i=JQ(),e=TF(n=>n.themeGlobe);function t(){i(_9(e==="day"?"night":"day"))}return Hi.jsxs("div",{className:"App",children:[Hi.jsx("h1",{}),Hi.jsx(zSe,{}),Hi.jsx(r3e,{}),Hi.jsx("section",{id:"globe",children:Hi.jsx("div",{className:"container",children:Hi.jsxs("div",{className:"globe",children:[Hi.jsx(QY,{onClick:t}),Hi.jsx(USe,{})]})})}),Hi.jsx("section",{id:"part-2",children:"s"}),Hi.jsx("section",{id:"part-3",children:"a"}),Hi.jsx("footer",{})]})},nRe=P3e({reducer:{themeGlobe:K3e}});var oy={},pF;function iRe(){if(pF)return oy;pF=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.parse=a,oy.serialize=c;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function a(d,A){const x=new s,_=d.length;if(_<2)return x;const S=(A==null?void 0:A.decode)||u;let w=0;do{const C=d.indexOf("=",w);if(C===-1)break;const P=d.indexOf(";",w),L=P===-1?_:P;if(C>L){w=d.lastIndexOf(";",C-1)+1;continue}const D=o(d,w,C),B=l(d,C,D),k=d.slice(D,B);if(x[k]===void 0){let U=o(d,C+1,L),F=l(d,L,U);const z=S(d.slice(U,F));x[k]=z}w=L+1}while(w<_);return x}function o(d,A,x){do{const _=d.charCodeAt(A);if(_!==32&&_!==9)return A}while(++A<x);return x}function l(d,A,x){for(;A>x;){const _=d.charCodeAt(--A);if(_!==32&&_!==9)return A+1}return x}function c(d,A,x){const _=(x==null?void 0:x.encode)||encodeURIComponent;if(!i.test(d))throw new TypeError(`argument name is invalid: ${d}`);const S=_(A);if(!e.test(S))throw new TypeError(`argument val is invalid: ${A}`);let w=d+"="+S;if(!x)return w;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);w+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);w+="; Domain="+x.domain}if(x.path){if(!n.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);w+="; Path="+x.path}if(x.expires){if(!h(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);w+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(w+="; HttpOnly"),x.secure&&(w+="; Secure"),x.partitioned&&(w+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return w}function u(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function h(d){return r.call(d)==="[object Date]"}return oy}iRe();var AF="popstate";function rRe(i={}){function e(n,r){let{pathname:s,search:a,hash:o}=n.location;return Y5("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Wx(r)}return aRe(e,t,null,i)}function Es(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Pu(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sRe(){return Math.random().toString(36).substring(2,10)}function gF(i,e){return{usr:i.state,key:i.key,idx:e}}function Y5(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?N1(e):e,state:t,key:e&&e.key||n||sRe()}}function Wx({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function N1(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function aRe(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let S=u(),w=S==null?null:S-c;c=S,l&&l({action:o,location:_.location,delta:w})}function d(S,w){o="PUSH";let C=Y5(_.location,S,w);c=u()+1;let P=gF(C,c),L=_.createHref(C);try{a.pushState(P,"",L)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(L)}s&&l&&l({action:o,location:_.location,delta:1})}function A(S,w){o="REPLACE";let C=Y5(_.location,S,w);c=u();let P=gF(C,c),L=_.createHref(C);a.replaceState(P,"",L),s&&l&&l({action:o,location:_.location,delta:0})}function x(S){return oRe(S)}let _={get action(){return o},get location(){return i(r,a)},listen(S){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(AF,h),l=S,()=>{r.removeEventListener(AF,h),l=null}},createHref(S){return e(r,S)},createURL:x,encodeLocation(S){let w=x(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:A,go(S){return a.go(S)}};return _}function oRe(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Es(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Wx(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function ZY(i,e,t="/"){return lRe(i,e,t,!1)}function lRe(i,e,t,n){let r=typeof e=="string"?N1(e):e,s=Vh(r.pathname||"/",t);if(s==null)return null;let a=KY(i);cRe(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=xRe(s);o=vRe(a[l],c,n)}return o}function KY(i,e=[],t=[],n=""){let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Es(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let c=Ph([n,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Es(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),KY(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:gRe(c,s.index),routesMeta:u})};return i.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of JY(s.path))r(s,a,l)}),e}function JY(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let a=JY(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>i.startsWith("/")&&l===""?"/":l)}function cRe(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:mRe(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var uRe=/^:[\w-]+$/,hRe=3,fRe=2,dRe=1,pRe=10,ARe=-2,mF=i=>i==="*";function gRe(i,e){let t=i.split("/"),n=t.length;return t.some(mF)&&(n+=ARe),e&&(n+=fRe),t.filter(r=>!mF(r)).reduce((r,s)=>r+(uRe.test(s)?hRe:s===""?dRe:pRe),n)}function mRe(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function vRe(i,e,t=!1){let{routesMeta:n}=i,r={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=CS({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&t&&!n[n.length-1].route.index&&(h=CS({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:Ph([s,h.pathname]),pathnameBase:SRe(Ph([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Ph([s,h.pathnameBase]))}return a}function CS(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=yRe(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},d)=>{if(u==="*"){let x=o[d]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const A=o[d];return h&&!A?c[u]=void 0:c[u]=(A||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:i}}function yRe(i,e=!1,t=!0){Pu(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function xRe(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pu(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Vh(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function bRe(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?N1(i):i;return{pathname:t?t.startsWith("/")?t:_Re(t,e):e,search:TRe(n),hash:MRe(r)}}function _Re(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function f4(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wRe(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function e$(i){let e=wRe(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function t$(i,e,t,n=!1){let r;typeof i=="string"?r=N1(i):(r={...i},Es(!r.pathname||!r.pathname.includes("?"),f4("?","pathname","search",r)),Es(!r.pathname||!r.pathname.includes("#"),f4("#","pathname","hash",r)),Es(!r.search||!r.search.includes("#"),f4("#","search","hash",r)));let s=i===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}o=h>=0?e[h]:"/"}let l=bRe(r,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Ph=i=>i.join("/").replace(/\/\/+/g,"/"),SRe=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),TRe=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,MRe=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ERe(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var n$=["POST","PUT","PATCH","DELETE"];new Set(n$);var CRe=["GET",...n$];new Set(CRe);var _m=ye.createContext(null);_m.displayName="DataRouter";var HT=ye.createContext(null);HT.displayName="DataRouterState";var i$=ye.createContext({isTransitioning:!1});i$.displayName="ViewTransition";var RRe=ye.createContext(new Map);RRe.displayName="Fetchers";var PRe=ye.createContext(null);PRe.displayName="Await";var Ou=ye.createContext(null);Ou.displayName="Navigation";var qT=ye.createContext(null);qT.displayName="Location";var Zh=ye.createContext({outlet:null,matches:[],isDataRoute:!1});Zh.displayName="Route";var uN=ye.createContext(null);uN.displayName="RouteError";function NRe(i,{relative:e}={}){Es(L1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ye.useContext(Ou),{hash:r,pathname:s,search:a}=D1(i,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Ph([t,s])),n.createHref({pathname:o,search:a,hash:r})}function L1(){return ye.useContext(qT)!=null}function uA(){return Es(L1(),"useLocation() may be used only in the context of a <Router> component."),ye.useContext(qT).location}var r$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s$(i){ye.useContext(Ou).static||ye.useLayoutEffect(i)}function LRe(){let{isDataRoute:i}=ye.useContext(Zh);return i?WRe():DRe()}function DRe(){Es(L1(),"useNavigate() may be used only in the context of a <Router> component.");let i=ye.useContext(_m),{basename:e,navigator:t}=ye.useContext(Ou),{matches:n}=ye.useContext(Zh),{pathname:r}=uA(),s=JSON.stringify(e$(n)),a=ye.useRef(!1);return s$(()=>{a.current=!0}),ye.useCallback((l,c={})=>{if(Pu(a.current,r$),!a.current)return;if(typeof l=="number"){t.go(l);return}let u=t$(l,JSON.parse(s),r,c.relative==="path");i==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ph([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,s,r,i])}ye.createContext(null);function D1(i,{relative:e}={}){let{matches:t}=ye.useContext(Zh),{pathname:n}=uA(),r=JSON.stringify(e$(t));return ye.useMemo(()=>t$(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function kRe(i,e,t,n){Es(L1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=ye.useContext(Ou),{matches:s}=ye.useContext(Zh),a=s[s.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";a$(l,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=uA(),d;d=h;let A=d.pathname||"/",x=A;if(c!=="/"){let w=c.replace(/^\//,"").split("/");x="/"+A.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=ZY(i,{pathname:x});return Pu(u||_!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Pu(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),URe(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Ph([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ph([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,t,n)}function ORe(){let i=qRe(),e=ERe(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=ye.createElement(ye.Fragment,null,ye.createElement("p",null,"💿 Hey developer 👋"),ye.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ye.createElement("code",{style:s},"ErrorBoundary")," or"," ",ye.createElement("code",{style:s},"errorElement")," prop on your route.")),ye.createElement(ye.Fragment,null,ye.createElement("h2",null,"Unexpected Application Error!"),ye.createElement("h3",{style:{fontStyle:"italic"}},e),t?ye.createElement("pre",{style:r},t):null,a)}var IRe=ye.createElement(ORe,null),BRe=class extends ye.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ye.createElement(Zh.Provider,{value:this.props.routeContext},ye.createElement(uN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FRe({routeContext:i,match:e,children:t}){let n=ye.useContext(_m);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ye.createElement(Zh.Provider,{value:i},t)}function URe(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,s=t==null?void 0:t.errors;if(s!=null){let l=r.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Es(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,l+1))}let a=!1,o=-1;if(t)for(let l=0;l<r.length;l++){let c=r[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:h}=t,d=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||d){a=!0,o>=0?r=r.slice(0,o+1):r=[r[0]];break}}}return r.reduceRight((l,c,u)=>{let h,d=!1,A=null,x=null;t&&(h=s&&c.route.id?s[c.route.id]:void 0,A=c.route.errorElement||IRe,a&&(o<0&&u===0?(a$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,x=null):o===u&&(d=!0,x=c.route.hydrateFallbackElement||null)));let _=e.concat(r.slice(0,u+1)),S=()=>{let w;return h?w=A:d?w=x:c.route.Component?w=ye.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,ye.createElement(FRe,{match:c,routeContext:{outlet:l,matches:_,isDataRoute:t!=null},children:w})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?ye.createElement(BRe,{location:t.location,revalidation:t.revalidation,component:A,error:h,children:S(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):S()},null)}function hN(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zRe(i){let e=ye.useContext(_m);return Es(e,hN(i)),e}function GRe(i){let e=ye.useContext(HT);return Es(e,hN(i)),e}function VRe(i){let e=ye.useContext(Zh);return Es(e,hN(i)),e}function fN(i){let e=VRe(i),t=e.matches[e.matches.length-1];return Es(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function HRe(){return fN("useRouteId")}function qRe(){var n;let i=ye.useContext(uN),e=GRe("useRouteError"),t=fN("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function WRe(){let{router:i}=zRe("useNavigate"),e=fN("useNavigate"),t=ye.useRef(!1);return s$(()=>{t.current=!0}),ye.useCallback(async(r,s={})=>{Pu(t.current,r$),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...s}))},[i,e])}var vF={};function a$(i,e,t){!e&&!vF[i]&&(vF[i]=!0,Pu(!1,t))}ye.memo(jRe);function jRe({routes:i,future:e,state:t}){return kRe(i,void 0,t,e)}function XRe(i){Es(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YRe({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:s=!1}){Es(!L1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),o=ye.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof t=="string"&&(t=N1(t));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:d="default"}=t,A=ye.useMemo(()=>{let x=Vh(l,a);return x==null?null:{location:{pathname:x,search:c,hash:u,state:h,key:d},navigationType:n}},[a,l,c,u,h,d,n]);return Pu(A!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:ye.createElement(Ou.Provider,{value:o},ye.createElement(qT.Provider,{children:e,value:A}))}var aw="get",ow="application/x-www-form-urlencoded";function WT(i){return i!=null&&typeof i.tagName=="string"}function $Re(i){return WT(i)&&i.tagName.toLowerCase()==="button"}function QRe(i){return WT(i)&&i.tagName.toLowerCase()==="form"}function ZRe(i){return WT(i)&&i.tagName.toLowerCase()==="input"}function KRe(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function JRe(i,e){return i.button===0&&(!e||e==="_self")&&!KRe(i)}var C_=null;function e5e(){if(C_===null)try{new FormData(document.createElement("form"),0),C_=!1}catch{C_=!0}return C_}var t5e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function d4(i){return i!=null&&!t5e.has(i)?(Pu(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ow}"`),null):i}function n5e(i,e){let t,n,r,s,a;if(QRe(i)){let o=i.getAttribute("action");n=o?Vh(o,e):null,t=i.getAttribute("method")||aw,r=d4(i.getAttribute("enctype"))||ow,s=new FormData(i)}else if($Re(i)||ZRe(i)&&(i.type==="submit"||i.type==="image")){let o=i.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||o.getAttribute("action");if(n=l?Vh(l,e):null,t=i.getAttribute("formmethod")||o.getAttribute("method")||aw,r=d4(i.getAttribute("formenctype"))||d4(o.getAttribute("enctype"))||ow,s=new FormData(o,i),!e5e()){let{name:c,type:u,value:h}=i;if(u==="image"){let d=c?`${c}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else c&&s.append(c,h)}}else{if(WT(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=aw,n=null,r=ow,a=i}return s&&r==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:s,body:a}}function dN(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function i5e(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function r5e(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function s5e(i,e,t){let n=await Promise.all(i.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await i5e(s,t);return a.links?a.links():[]}return[]}));return c5e(n.flat(1).filter(r5e).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function yF(i,e,t,n,r,s){let a=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function a5e(i,e,{includeHydrateFallback:t}={}){return o5e(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function o5e(i){return[...new Set(i)]}function l5e(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function c5e(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let s=JSON.stringify(l5e(r));return t.has(s)||(t.add(s),n.push({key:s,link:r})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u5e=new Set([100,101,204,205]);function h5e(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&Vh(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function o$(){let i=ye.useContext(_m);return dN(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function f5e(){let i=ye.useContext(HT);return dN(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var pN=ye.createContext(void 0);pN.displayName="FrameworkContext";function l$(){let i=ye.useContext(pN);return dN(i,"You must render this element inside a <HydratedRouter> element"),i}function d5e(i,e){let t=ye.useContext(pN),[n,r]=ye.useState(!1),[s,a]=ye.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,d=ye.useRef(null);ye.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let _=w=>{w.forEach(C=>{a(C.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return d.current&&S.observe(d.current),()=>{S.disconnect()}}},[i]),ye.useEffect(()=>{if(n){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[n]);let A=()=>{r(!0)},x=()=>{r(!1),a(!1)};return t?i!=="intent"?[s,d,{}]:[s,d,{onFocus:ly(o,A),onBlur:ly(l,x),onMouseEnter:ly(c,A),onMouseLeave:ly(u,x),onTouchStart:ly(h,A)}]:[!1,d,{}]}function ly(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function p5e({page:i,...e}){let{router:t}=o$(),n=ye.useMemo(()=>ZY(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?ye.createElement(g5e,{page:i,matches:n,...e}):null}function A5e(i){let{manifest:e,routeModules:t}=l$(),[n,r]=ye.useState([]);return ye.useEffect(()=>{let s=!1;return s5e(i,e,t).then(a=>{s||r(a)}),()=>{s=!0}},[i,e,t]),n}function g5e({page:i,matches:e,...t}){let n=uA(),{manifest:r,routeModules:s}=l$(),{basename:a}=o$(),{loaderData:o,matches:l}=f5e(),c=ye.useMemo(()=>yF(i,e,l,r,n,"data"),[i,e,l,r,n]),u=ye.useMemo(()=>yF(i,e,l,r,n,"assets"),[i,e,l,r,n]),h=ye.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let x=new Set,_=!1;if(e.forEach(w=>{var P;let C=r.routes[w.route.id];!C||!C.hasLoader||(!c.some(L=>L.route.id===w.route.id)&&w.route.id in o&&((P=s[w.route.id])!=null&&P.shouldRevalidate)||C.hasClientLoader?_=!0:x.add(w.route.id))}),x.size===0)return[];let S=h5e(i,a);return _&&x.size>0&&S.searchParams.set("_routes",e.filter(w=>x.has(w.route.id)).map(w=>w.route.id).join(",")),[S.pathname+S.search]},[a,o,n,r,c,e,i,s]),d=ye.useMemo(()=>a5e(u,r),[u,r]),A=A5e(u);return ye.createElement(ye.Fragment,null,h.map(x=>ye.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),d.map(x=>ye.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),A.map(({key:x,link:_})=>ye.createElement("link",{key:x,..._})))}function m5e(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var c$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c$&&(window.__reactRouterVersion="7.6.2")}catch{}function v5e({basename:i,children:e,window:t}){let n=ye.useRef();n.current==null&&(n.current=rRe({window:t,v5Compat:!0}));let r=n.current,[s,a]=ye.useState({action:r.action,location:r.location}),o=ye.useCallback(l=>{ye.startTransition(()=>a(l))},[a]);return ye.useLayoutEffect(()=>r.listen(o),[r,o]),ye.createElement(YRe,{basename:i,children:e,location:s.location,navigationType:s.action,navigator:r})}var u$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h$=ye.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...d},A){let{basename:x}=ye.useContext(Ou),_=typeof c=="string"&&u$.test(c),S,w=!1;if(typeof c=="string"&&_&&(S=c,c$))try{let F=new URL(window.location.href),z=c.startsWith("//")?new URL(F.protocol+c):new URL(c),V=Vh(z.pathname,x);z.origin===F.origin&&V!=null?c=V+z.search+z.hash:w=!0}catch{Pu(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=NRe(c,{relative:r}),[P,L,D]=d5e(n,d),B=_5e(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:r,viewTransition:h});function k(F){e&&e(F),F.defaultPrevented||B(F)}let U=ye.createElement("a",{...d,...D,href:S||C,onClick:w||s?e:k,ref:m5e(A,L),target:l,"data-discover":!_&&t==="render"?"true":void 0});return P&&!_?ye.createElement(ye.Fragment,null,U,ye.createElement(p5e,{page:C})):U});h$.displayName="Link";var y5e=ye.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let h=D1(a,{relative:c.relative}),d=uA(),A=ye.useContext(HT),{navigator:x,basename:_}=ye.useContext(Ou),S=A!=null&&E5e(h)&&o===!0,w=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,C=d.pathname,P=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(C=C.toLowerCase(),P=P?P.toLowerCase():null,w=w.toLowerCase()),P&&_&&(P=Vh(P,_)||P);const L=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let D=C===w||!r&&C.startsWith(w)&&C.charAt(L)==="/",B=P!=null&&(P===w||!r&&P.startsWith(w)&&P.charAt(w.length)==="/"),k={isActive:D,isPending:B,isTransitioning:S},U=D?e:void 0,F;typeof n=="function"?F=n(k):F=[n,D?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof s=="function"?s(k):s;return ye.createElement(h$,{...c,"aria-current":U,className:F,ref:u,style:z,to:a,viewTransition:o},typeof l=="function"?l(k):l)});y5e.displayName="NavLink";var x5e=ye.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:s,method:a=aw,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...d},A)=>{let x=T5e(),_=M5e(o,{relative:c}),S=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&u$.test(o),C=P=>{if(l&&l(P),P.defaultPrevented)return;P.preventDefault();let L=P.nativeEvent.submitter,D=(L==null?void 0:L.getAttribute("formmethod"))||a;x(L||P.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:s,relative:c,preventScrollReset:u,viewTransition:h})};return ye.createElement("form",{ref:A,method:S,action:_,onSubmit:n?l:C,...d,"data-discover":!w&&i==="render"?"true":void 0})});x5e.displayName="Form";function b5e(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f$(i){let e=ye.useContext(_m);return Es(e,b5e(i)),e}function _5e(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=LRe(),l=uA(),c=D1(i,{relative:s});return ye.useCallback(u=>{if(JRe(u,e)){u.preventDefault();let h=t!==void 0?t:Wx(l)===Wx(c);o(i,{replace:h,state:n,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,t,n,e,i,r,s,a])}var w5e=0,S5e=()=>`__${String(++w5e)}__`;function T5e(){let{router:i}=f$("useSubmit"),{basename:e}=ye.useContext(Ou),t=HRe();return ye.useCallback(async(n,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=n5e(n,e);if(r.navigate===!1){let u=r.fetcherKey||S5e();await i.fetch(u,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await i.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function M5e(i,{relative:e}={}){let{basename:t}=ye.useContext(Ou),n=ye.useContext(Zh);Es(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...D1(i||".",{relative:e})},a=uA();if(i==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();s.search=u?`?${u}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ph([t,s.pathname])),Wx(s)}function E5e(i,e={}){let t=ye.useContext(i$);Es(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=f$("useViewTransitionState"),r=D1(i,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Vh(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Vh(t.nextLocation.pathname,n)||t.nextLocation.pathname;return CS(r.pathname,a)!=null||CS(r.pathname,s)!=null}[...u5e];const xF=document.getElementById("root");if(xF)NQ.createRoot(xF).render(Hi.jsx(ye.StrictMode,{children:Hi.jsx(v5e,{basename:"/meditationAlexandr",children:Hi.jsx(jQ,{store:nRe,children:Hi.jsx(XRe,{path:"/",element:Hi.jsx(tRe,{})})})})}));else throw new Error("Root element with ID 'root' was not found in the document. Ensure there is a corresponding HTML element with the ID 'root' in your HTML file.");
